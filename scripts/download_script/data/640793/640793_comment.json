{"bugs": {"640793": {"comments": [{"attachment_id": null, "time": "2011-03-10T22:57:32Z", "is_private": false, "author": "mrbkap@gmail.com", "bug_id": 640793, "tags": [], "count": 0, "creator": "mrbkap@gmail.com", "text": "See bug 615834 comment 18. The problem is that Gecko #define's free(x) moz_free(x), and this ends up confusing us when we compile js/src/ stuff. Right now, we have some macros that we use to undefine and redefine the Gecko memory stuff, but that leads to Gal being sad. We should do something better.", "creation_time": "2011-03-10T22:57:32Z", "raw_text": "See bug 615834 comment 18. The problem is that Gecko #define's free(x) moz_free(x), and this ends up confusing us when we compile js/src/ stuff. Right now, we have some macros that we use to undefine and redefine the Gecko memory stuff, but that leads to Gal being sad. We should do something better.", "id": 5337637}, {"bug_id": 640793, "count": 1, "creator": "bzbarsky@mit.edu", "time": "2011-03-11T00:57:10Z", "tags": [], "raw_text": "Bug 632137 is about pretty much this problem.", "id": 5337961, "text": "Bug 632137 is about pretty much this problem.", "creation_time": "2011-03-11T00:57:10Z", "is_private": false, "author": "bzbarsky@mit.edu", "attachment_id": null}, {"bug_id": 640793, "tags": [], "creator": "paul.biggar@gmail.com", "count": 2, "raw_text": "Good god yes. I've got this in bug 634155, in a different way. jsutil.h is included in some nsHttpSomething file, which turns nsHttpSomeClass::free to nsHttpSomeClass::moz_free. And I can't figure out the pixie dust.", "id": 5337976, "text": "Good god yes. I've got this in bug 634155, in a different way. jsutil.h is included in some nsHttpSomething file, which turns nsHttpSomeClass::free to nsHttpSomeClass::moz_free. And I can't figure out the pixie dust.", "creation_time": "2011-03-11T01:04:00Z", "author": "paul.biggar@gmail.com", "time": "2011-03-11T01:04:00Z", "is_private": false, "attachment_id": null}, {"bug_id": 640793, "tags": [], "count": 3, "creator": "paul.biggar@gmail.com", "raw_text": "FWIW, I have a patch (built on top of bug 634155), which adds an underscore to {rt,cx}->{malloc,free,realloc,calloc}. If that's the right solution, it's ready to go.", "id": 5337983, "text": "FWIW, I have a patch (built on top of bug 634155), which adds an underscore to {rt,cx}->{malloc,free,realloc,calloc}. If that's the right solution, it's ready to go.", "creation_time": "2011-03-11T01:06:31Z", "author": "paul.biggar@gmail.com", "time": "2011-03-11T01:06:31Z", "is_private": false, "attachment_id": null}, {"raw_text": "Its simple. jsutil.h should not be exported. nsHttpSomething has no business including anything but jsapi.h. Remove the include dependency.", "id": 5337999, "text": "Its simple. jsutil.h should not be exported. nsHttpSomething has no business including anything but jsapi.h. Remove the include dependency.", "is_private": false, "creation_time": "2011-03-11T01:14:40Z", "bug_id": 640793, "time": "2011-03-11T01:14:40Z", "tags": [], "count": 4, "creator": "gal@uci.edu", "author": "gal@uci.edu", "attachment_id": null}, {"attachment_id": null, "author": "paul.biggar@gmail.com", "tags": [], "time": "2011-03-11T01:20:55Z", "creator": "paul.biggar@gmail.com", "count": 5, "bug_id": 640793, "id": 5338015, "raw_text": "(In reply to comment #4)\n> Its simple. jsutil.h should not be exported. nsHttpSomething has no business\n> including anything but jsapi.h. Remove the include dependency.\n\nIt's included via jsapi.h.", "creation_time": "2011-03-11T01:20:55Z", "is_private": false, "text": "(In reply to comment #4)\n> Its simple. jsutil.h should not be exported. nsHttpSomething has no business\n> including anything but jsapi.h. Remove the include dependency.\n\nIt's included via jsapi.h."}, {"author": "mrbkap@gmail.com", "attachment_id": null, "raw_text": "(In reply to comment #4)\n> Its simple. jsutil.h should not be exported. nsHttpSomething has no business\n> including anything but jsapi.h. Remove the include dependency.\n\nWell, nsHttpSomethingThatTheJSEngineDoesntKnowAbout would be more correct, otherwise we wouldn't be able to implement our security wrappers. Either we need to figure out our API story for the new stuff or fix this...", "id": 5338415, "text": "(In reply to comment #4)\n> Its simple. jsutil.h should not be exported. nsHttpSomething has no business\n> including anything but jsapi.h. Remove the include dependency.\n\nWell, nsHttpSomethingThatTheJSEngineDoesntKnowAbout would be more correct, otherwise we wouldn't be able to implement our security wrappers. Either we need to figure out our API story for the new stuff or fix this...", "is_private": false, "creation_time": "2011-03-11T05:47:18Z", "bug_id": 640793, "tags": [], "creator": "mrbkap@gmail.com", "count": 6, "time": "2011-03-11T05:47:18Z"}]}}, "comments": {}}