{"bugs": {"1644349": {"comments": [{"raw_text": "Currently we use a Map to translate the inner window id to the browsing context id of the frame where the network activity takes place:\n\nhttps://searchfox.org/mozilla-central/rev/35b97af64a55d1d30caa4d6e9fabc1a7fbabc509/remote/observers/NetworkObserver.jsm#57\n\nAs I just noticed this map is not necessary. Instead we can use the [httpChannel.loadInfo.frameBrowsingContextID](https://searchfox.org/mozilla-central/rev/35b97af64a55d1d30caa4d6e9fabc1a7fbabc509/netwerk/base/nsILoadInfo.idl#743) to identify the frame id for the sub requests.", "text": "Currently we use a Map to translate the inner window id to the browsing context id of the frame where the network activity takes place:\n\nhttps://searchfox.org/mozilla-central/rev/35b97af64a55d1d30caa4d6e9fabc1a7fbabc509/remote/observers/NetworkObserver.jsm#57\n\nAs I just noticed this map is not necessary. Instead we can use the [httpChannel.loadInfo.frameBrowsingContextID](https://searchfox.org/mozilla-central/rev/35b97af64a55d1d30caa4d6e9fabc1a7fbabc509/netwerk/base/nsILoadInfo.idl#743) to identify the frame id for the sub requests.", "is_private": false, "id": 14871057, "author": "hskupin@gmail.com", "bug_id": 1644349, "attachment_id": null, "creator": "hskupin@gmail.com", "creation_time": "2020-06-09T08:07:22Z", "count": 0, "tags": [], "time": "2020-06-09T08:07:22Z"}, {"time": "2020-06-11T20:27:24Z", "count": 1, "tags": [], "creator": "cpeterson@mozilla.com", "creation_time": "2020-06-11T20:27:24Z", "attachment_id": null, "bug_id": 1644349, "author": "cpeterson@mozilla.com", "id": 14877101, "text": "(In reply to Henrik Skupin (:whimboo) [\u231a\ufe0fUTC+2] from comment #0)\n> As I just noticed this map is not necessary. Instead we can use the [httpChannel.loadInfo.frameBrowsingContextID](https://searchfox.org/mozilla-central/rev/35b97af64a55d1d30caa4d6e9fabc1a7fbabc509/netwerk/base/nsILoadInfo.idl#743) to identify the frame id for the sub requests.\n\nIIUC, this is a cleanup bug and doesn't need to block shipping Fission MVP.", "raw_text": "(In reply to Henrik Skupin (:whimboo) [\u231a\ufe0fUTC+2] from comment #0)\n> As I just noticed this map is not necessary. Instead we can use the [httpChannel.loadInfo.frameBrowsingContextID](https://searchfox.org/mozilla-central/rev/35b97af64a55d1d30caa4d6e9fabc1a7fbabc509/netwerk/base/nsILoadInfo.idl#743) to identify the frame id for the sub requests.\n\nIIUC, this is a cleanup bug and doesn't need to block shipping Fission MVP.", "is_private": false}, {"creator": "hskupin@gmail.com", "creation_time": "2020-06-15T12:13:33Z", "count": 2, "tags": [], "time": "2020-06-15T12:13:33Z", "raw_text": "I had a quick check and it actually doesn't seem to be that trivial. I still see `null` objects for the `frameBrowsingContext`. So maybe it might not be possible. But further investigation needs to be done here.", "text": "I had a quick check and it actually doesn't seem to be that trivial. I still see `null` objects for the `frameBrowsingContext`. So maybe it might not be possible. But further investigation needs to be done here.", "is_private": false, "author": "hskupin@gmail.com", "id": 14882762, "bug_id": 1644349, "attachment_id": null}, {"attachment_id": null, "bug_id": 1644349, "author": "hskupin@gmail.com", "id": 14924971, "is_private": false, "text": "Bug 1580764 just added support for the `frameId` to the `ChannelWrapper` interface. As such we should be able to get rid of our custom map.", "raw_text": "Bug 1580764 just added support for the `frameId` to the `ChannelWrapper` interface. As such we should be able to get rid of our custom map.", "time": "2020-07-08T11:14:45Z", "tags": [], "count": 3, "creation_time": "2020-07-08T11:14:45Z", "creator": "hskupin@gmail.com"}, {"time": "2020-07-08T11:47:19Z", "count": 4, "tags": [], "creator": "hskupin@gmail.com", "creation_time": "2020-07-08T11:47:19Z", "attachment_id": null, "bug_id": 1644349, "id": 14925012, "author": "hskupin@gmail.com", "text": "Actually `frameId` will be `0` for the top-browsing context. It means that for resource requests/responses we won't have a valid number. But we can actually make use of the `browsingContext` and `frameBrowsingContext` properties on the `httpChannel.loadInfo` object.", "raw_text": "Actually `frameId` will be `0` for the top-browsing context. It means that for resource requests/responses we won't have a valid number. But we can actually make use of the `browsingContext` and `frameBrowsingContext` properties on the `httpChannel.loadInfo` object.", "is_private": false}, {"creation_time": "2020-07-08T11:48:59Z", "author": "hskupin@gmail.com", "id": 14925016, "creator": "hskupin@gmail.com", "is_private": false, "raw_text": "", "text": "Created attachment 9162124\nBug 1644349 - [remote] Remove usage of windowIdToFrameIdMap in the Network observer.", "time": "2020-07-08T11:48:59Z", "attachment_id": 9162124, "tags": [], "bug_id": 1644349, "count": 5}, {"time": "2020-07-09T11:35:23Z", "count": 6, "tags": [], "creator": "pulsebot@bots.tld", "creation_time": "2020-07-09T11:35:23Z", "attachment_id": null, "bug_id": 1644349, "id": 14927244, "author": "pulsebot@bots.tld", "text": "Pushed by hskupin@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/9f5272f4fb43\n[remote] Remove usage of windowIdToFrameIdMap in the Network observer. r=remote-protocol-reviewers,maja_zf", "raw_text": "Pushed by hskupin@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/9f5272f4fb43\n[remote] Remove usage of windowIdToFrameIdMap in the Network observer. r=remote-protocol-reviewers,maja_zf", "is_private": false}, {"creation_time": "2020-07-09T21:42:19Z", "creator": "abutkovits@mozilla.com", "tags": ["bugherder"], "count": 7, "time": "2020-07-09T21:42:19Z", "is_private": false, "text": "https://hg.mozilla.org/mozilla-central/rev/9f5272f4fb43", "raw_text": "https://hg.mozilla.org/mozilla-central/rev/9f5272f4fb43", "id": 14928582, "author": "abutkovits@mozilla.com", "bug_id": 1644349, "attachment_id": null}]}}, "comments": {}}