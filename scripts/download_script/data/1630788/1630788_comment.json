{"bugs": {"1630788": {"comments": [{"creation_time": "2020-04-16T23:10:03Z", "text": "Currently the `FunctionHasExtraBodyVarScope` flag is only set for non-lazy scripts due to it accessing binding information. Since we only care about if there are var bindings or not, and this info is available in a syntax parse, we should support this flag for lazy BaseScripts too.", "count": 0, "raw_text": "Currently the `FunctionHasExtraBodyVarScope` flag is only set for non-lazy scripts due to it accessing binding information. Since we only care about if there are var bindings or not, and this info is available in a syntax parse, we should support this flag for lazy BaseScripts too.", "attachment_id": null, "author": "tcampbell@mozilla.com", "id": 14760447, "creator": "tcampbell@mozilla.com", "time": "2020-04-16T23:10:03Z", "tags": [], "bug_id": 1630788, "is_private": false}, {"creation_time": "2020-04-16T23:25:20Z", "count": 1, "text": "Created attachment 9141116\nBug 1630788 - Init FunctionHasExtraBodyVarScope during lazy parse. r?arai\n\n\nMove the initialization of this flag to `finishFunctionScopes` so that it is\nset for both lazy and non-lazy compilations. We add a `VarScopeHasBindings`\nhelper to mirror the logic of `newVarScopeData` without allocating. We use\nthe ImmutableFlag to enable consistent initialization for lazy and non-lazy\nscripts.\n\nNote that the previous `hasExtraBodyVarScope` helper is only used for\nbytecode emission which occurs after the FunctionHasExtraBodyVarScope flag is\nproperly initialized.", "attachment_id": 9141116, "raw_text": "\nMove the initialization of this flag to `finishFunctionScopes` so that it is\nset for both lazy and non-lazy compilations. We add a `VarScopeHasBindings`\nhelper to mirror the logic of `newVarScopeData` without allocating. We use\nthe ImmutableFlag to enable consistent initialization for lazy and non-lazy\nscripts.\n\nNote that the previous `hasExtraBodyVarScope` helper is only used for\nbytecode emission which occurs after the FunctionHasExtraBodyVarScope flag is\nproperly initialized.", "author": "tcampbell@mozilla.com", "id": 14760458, "creator": "tcampbell@mozilla.com", "time": "2020-04-16T23:25:20Z", "tags": [], "is_private": false, "bug_id": 1630788}, {"text": "Pushed by tcampbell@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/983377c0fc28\nInit FunctionHasExtraBodyVarScope during lazy parse. r=arai", "attachment_id": null, "author": "pulsebot@bots.tld", "id": 14760580, "is_private": false, "bug_id": 1630788, "creation_time": "2020-04-17T00:54:38Z", "count": 2, "raw_text": "Pushed by tcampbell@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/983377c0fc28\nInit FunctionHasExtraBodyVarScope during lazy parse. r=arai", "time": "2020-04-17T00:54:38Z", "creator": "pulsebot@bots.tld", "tags": []}, {"author": "dluca@mozilla.com", "id": 14761091, "raw_text": "https://hg.mozilla.org/mozilla-central/rev/983377c0fc28", "attachment_id": null, "text": "https://hg.mozilla.org/mozilla-central/rev/983377c0fc28", "count": 3, "creation_time": "2020-04-17T09:43:24Z", "bug_id": 1630788, "is_private": false, "tags": ["bugherder"], "creator": "dluca@mozilla.com", "time": "2020-04-17T09:43:24Z"}]}}, "comments": {}}