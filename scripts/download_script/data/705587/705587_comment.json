{"comments": {}, "bugs": {"705587": {"comments": [{"is_private": false, "creator": "neal@nealpoole.com", "count": 0, "creation_time": "2011-11-28T03:19:09Z", "author": "neal@nealpoole.com", "text": "User Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:8.0) Gecko/20100101 Firefox/8.0\nBuild ID: 20111104165243\n\nSteps to reproduce:\n\nI sent an email using the following PHP script and then checked my email in Thunderbird\n\n<?php\nmail('me@myemailaddress.com', 'Test Email', 'Test Message', \"From: asdf@asdf.com\\nFrom:foobar@google.com\");\n\n\nActual results:\n\nThe UI displayed the From: header inconsistently. The list of messages displayed the sender as foobar@google.com, but viewing the actual message listed the sender as asdf@asdf.com.\n\n\nExpected results:\n\nThe From value should have been consistent between the two views.", "time": "2011-11-28T03:19:09Z", "tags": [], "bug_id": 705587, "attachment_id": null, "raw_text": "User Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:8.0) Gecko/20100101 Firefox/8.0\nBuild ID: 20111104165243\n\nSteps to reproduce:\n\nI sent an email using the following PHP script and then checked my email in Thunderbird\n\n<?php\nmail('me@myemailaddress.com', 'Test Email', 'Test Message', \"From: asdf@asdf.com\\nFrom:foobar@google.com\");\n\n\nActual results:\n\nThe UI displayed the From: header inconsistently. The list of messages displayed the sender as foobar@google.com, but viewing the actual message listed the sender as asdf@asdf.com.\n\n\nExpected results:\n\nThe From value should have been consistent between the two views.", "id": 5874783}, {"count": 1, "bug_id": 705587, "raw_text": "", "attachment_id": 577182, "id": 5874786, "creator": "neal@nealpoole.com", "is_private": false, "tags": [], "time": "2011-11-28T03:21:10Z", "text": "Created attachment 577182\nA screenshot of the issue, taken in an older version of Thunderbird", "author": "neal@nealpoole.com", "creation_time": "2011-11-28T03:21:10Z"}, {"bug_id": 705587, "count": 2, "text": "I filed this separately from bug 310189 at the request of WADA.", "tags": [], "time": "2011-11-28T03:21:56Z", "creation_time": "2011-11-28T03:21:56Z", "author": "neal@nealpoole.com", "is_private": false, "creator": "neal@nealpoole.com", "id": 5874787, "raw_text": "I filed this separately from bug 310189 at the request of WADA.", "attachment_id": null}, {"id": 5874982, "attachment_id": null, "raw_text": "Following is headers defined as \"Max number=1\" in RFC 5322.\n> http://tools.ietf.org/html/rfc5322#section-3.6\n>    +----------------+--------+------------+\n>    | Field          | Min    | Max number |\n>    |                | number |            |\n>    +----------------+--------+------------+\n>    | orig-date      | 1      | 1          |\n>    | from           | 1      | 1          |\n>    | sender         | 0*     | 1          |\n>    | reply-to       | 0      | 1          |\n>    | to             | 0      | 1          |\n>    | cc             | 0      | 1          |\n>    | bcc            | 0      | 1          |\n>    | message-id     | 0*     | 1          |\n>    | in-reply-to    | 0*     | 1          |\n>    | references     | 0*     | 1          |\n>    | subject        | 0      | 1          |\n>    +----------------+--------+------------+\n\nIf Max number=1, \"multiple headers\" means malformed mail, and first header should be used for thread pane display & message pane display(this bug), and in message filtering & search too(bug 310189). This should be consistent among headers defined as \"Max number=1\".\n\nbug 172104 fixed problem on multiple Subject: only. So this bug is followup bug of bug 172104.", "author": "m-wada@usa.com", "creation_time": "2011-11-28T07:30:00Z", "time": "2011-11-28T07:30:00Z", "tags": [], "text": "Following is headers defined as \"Max number=1\" in RFC 5322.\n> http://tools.ietf.org/html/rfc5322#section-3.6\n>    +----------------+--------+------------+\n>    | Field          | Min    | Max number |\n>    |                | number |            |\n>    +----------------+--------+------------+\n>    | orig-date      | 1      | 1          |\n>    | from           | 1      | 1          |\n>    | sender         | 0*     | 1          |\n>    | reply-to       | 0      | 1          |\n>    | to             | 0      | 1          |\n>    | cc             | 0      | 1          |\n>    | bcc            | 0      | 1          |\n>    | message-id     | 0*     | 1          |\n>    | in-reply-to    | 0*     | 1          |\n>    | references     | 0*     | 1          |\n>    | subject        | 0      | 1          |\n>    +----------------+--------+------------+\n\nIf Max number=1, \"multiple headers\" means malformed mail, and first header should be used for thread pane display & message pane display(this bug), and in message filtering & search too(bug 310189). This should be consistent among headers defined as \"Max number=1\".\n\nbug 172104 fixed problem on multiple Subject: only. So this bug is followup bug of bug 172104.", "creator": "m-wada@usa.com", "is_private": false, "bug_id": 705587, "count": 3}, {"id": 15316827, "raw_text": "Confirming for 88.0a1 (2021-03-17) (64-bit).\nWe have inconsistent handling of malformed messages with multiple headers of same type (To, From, Date etc.) in spite of max-number=1.\nParticularly, what we show in message header vs. message list is *different*, which is quite confusing.", "attachment_id": null, "tags": [], "time": "2021-03-18T10:04:36Z", "bug_id": 705587, "text": "Confirming for 88.0a1 (2021-03-17) (64-bit).\nWe have inconsistent handling of malformed messages with multiple headers of same type (To, From, Date etc.) in spite of max-number=1.\nParticularly, what we show in message header vs. message list is *different*, which is quite confusing.", "author": "bugzilla2007@duellmann24.net", "creation_time": "2021-03-18T10:04:36Z", "count": 4, "creator": "bugzilla2007@duellmann24.net", "is_private": false}, {"count": 5, "bug_id": 705587, "is_private": false, "creator": "bugzilla2007@duellmann24.net", "text": "Created attachment 9209975\nTestcase-1.eml: Multiple headers of same type, only the first should be parsed (if RFC 5322 max-number=1)\n\nHere's a minimal testcase which has duplicate headers for virtually everything.", "time": "2021-03-18T10:19:34Z", "tags": [], "creation_time": "2021-03-18T10:19:34Z", "author": "bugzilla2007@duellmann24.net", "raw_text": "Here's a minimal testcase which has duplicate headers for virtually everything.", "attachment_id": 9209975, "id": 15316848}, {"is_private": false, "creator": "bugzilla2007@duellmann24.net", "count": 6, "creation_time": "2021-03-18T11:15:44Z", "author": "bugzilla2007@duellmann24.net", "text": "Created attachment 9209986\nScreenshot 1: Testcase 1 showing different headers in message list vs. message reader, and sometimes showing second headers (To, Cc, but not Bcc)\n\nScreenshot shows Testcase 1 with duplicate headers in source (relevant message list columns shown are subject, correspondents, and date).\n\n- inconsistent headers in message list vs message reader\n- inconsistent in msg reader: To/CC (wrongly showing both instances) vs. Bcc (showing first instance only)\n- Reply confusion: Attribution line uses second headers for XX wrote and the date\n- Reply wrongly includes 2nd instances of original From/To as reply recipients\n- Reply-all skips the CC recipients of the original message (should use first instance of original CC)\n\nFor developers' convenience, here's the details...\nOnly checkmarks `\u2714` and `n/a` are correct behaviour afasics.\n\n| **Header**   | **Message list**  | **Message reader**               | **Replies**                                                 | **Reply-All**                                                    |\n| -------- | ------------- | ---------------------------- | ------------------------------------------------------- | ------------------------------------------------------------ |\n| From:    | 1st From \u2714    | 2nd From                     | Reply goes to 1st & 2nd From, vs. \"2nd From wrote: ...\" | Replies goes to 1st & 2nd From vs. \"2nd From wrote ...\"      |\n| Subject: | 1st Subject \u2714 | 1st Subject \u2714                | 1st Subject \u2714                                           | 1st Subject \u2714                                                |\n| Date:    | 1st Date      | 2nd Date                     | 2nd Date                                                | \"... wrote on 2nd Date\"                                      |\n| To:      | 1st & 2nd To  | 1st & 2nd To                 | n/a                                                     | Reply recipients include: 1st & 2nd To                       |\n| Cc:      | 1st & 2nd Cc  | not shown in msg list (bugs) | n/a                                                     | missing (reply-all fails to include any one of the original Cc recipients) |\n| Bcc:     | 1st Bcc       | not shown in msg list (bugs) | n/a                                                     | n/a (by design no reply to original bcc, to prevent accidental exposure) |\n\n(Table done with [Typora](https://typora.io/), thanks to Ryan for recommending that!)\n\n(In reply to Thomas D. (:thomas8) from comment #4)\n> Confirming for 88.0a1 (2021-03-17) (64-bit).\n> We have inconsistent handling of malformed messages with multiple headers of same type (To, From, Date etc.) in spite of max-number=1.\n> Particularly, what we show in message header vs. message list is *different*, which is quite confusing.", "tags": [], "time": "2021-03-18T11:15:44Z", "bug_id": 705587, "attachment_id": 9209986, "raw_text": "Screenshot shows Testcase 1 with duplicate headers in source (relevant message list columns shown are subject, correspondents, and date).\n\n- inconsistent headers in message list vs message reader\n- inconsistent in msg reader: To/CC (wrongly showing both instances) vs. Bcc (showing first instance only)\n- Reply confusion: Attribution line uses second headers for XX wrote and the date\n- Reply wrongly includes 2nd instances of original From/To as reply recipients\n- Reply-all skips the CC recipients of the original message (should use first instance of original CC)\n\nFor developers' convenience, here's the details...\nOnly checkmarks `\u2714` and `n/a` are correct behaviour afasics.\n\n| **Header**   | **Message list**  | **Message reader**               | **Replies**                                                 | **Reply-All**                                                    |\n| -------- | ------------- | ---------------------------- | ------------------------------------------------------- | ------------------------------------------------------------ |\n| From:    | 1st From \u2714    | 2nd From                     | Reply goes to 1st & 2nd From, vs. \"2nd From wrote: ...\" | Replies goes to 1st & 2nd From vs. \"2nd From wrote ...\"      |\n| Subject: | 1st Subject \u2714 | 1st Subject \u2714                | 1st Subject \u2714                                           | 1st Subject \u2714                                                |\n| Date:    | 1st Date      | 2nd Date                     | 2nd Date                                                | \"... wrote on 2nd Date\"                                      |\n| To:      | 1st & 2nd To  | 1st & 2nd To                 | n/a                                                     | Reply recipients include: 1st & 2nd To                       |\n| Cc:      | 1st & 2nd Cc  | not shown in msg list (bugs) | n/a                                                     | missing (reply-all fails to include any one of the original Cc recipients) |\n| Bcc:     | 1st Bcc       | not shown in msg list (bugs) | n/a                                                     | n/a (by design no reply to original bcc, to prevent accidental exposure) |\n\n(Table done with [Typora](https://typora.io/), thanks to Ryan for recommending that!)\n\n(In reply to Thomas D. (:thomas8) from comment #4)\n> Confirming for 88.0a1 (2021-03-17) (64-bit).\n> We have inconsistent handling of malformed messages with multiple headers of same type (To, From, Date etc.) in spite of max-number=1.\n> Particularly, what we show in message header vs. message list is *different*, which is quite confusing.", "id": 15316944}, {"bug_id": 705587, "count": 7, "creation_time": "2022-02-02T07:21:44Z", "author": "mkmelin+mozilla@iki.fi", "text": "This is the same as bug 310189.\n\n*** This bug has been marked as a duplicate of bug 310189 ***", "tags": [], "time": "2022-02-02T07:21:44Z", "is_private": false, "creator": "mkmelin+mozilla@iki.fi", "id": 15758849, "attachment_id": null, "raw_text": "This is the same as bug 310189."}]}}}