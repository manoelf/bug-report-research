{"bugs": {"672127": {"comments": [{"author": "brian@briansmith.org", "creator": "brian@briansmith.org", "bug_id": 672127, "id": 5595613, "count": 0, "is_private": false, "tags": [], "time": "2011-07-17T19:15:50Z", "attachment_id": null, "text": "+++ This bug was initially created as a clone of Bug #663733 +++\n\nIn ocsp_CreateOrUpdateCacheEntry, there is this code:\n\n        rv = ocsp_SetCacheItemResponse(cacheItem, single);\n        if (rv != SECSuccess) {\n            ocsp_RemoveCacheItem(cache, cacheItem);\n            PR_ExitMonitor(OCSP_Global.monitor);\n            return rv;\n        }\n\nocsp_SetCacheItemResponse should be atomic, so that if there is any failure, cacheItem is unchanged. Then, the call to ocsp_RemoveCacheItem must be removed. This way, a bad single response or a failure copying it will not destroy information in the cache.", "raw_text": "+++ This bug was initially created as a clone of Bug #663733 +++\n\nIn ocsp_CreateOrUpdateCacheEntry, there is this code:\n\n        rv = ocsp_SetCacheItemResponse(cacheItem, single);\n        if (rv != SECSuccess) {\n            ocsp_RemoveCacheItem(cache, cacheItem);\n            PR_ExitMonitor(OCSP_Global.monitor);\n            return rv;\n        }\n\nocsp_SetCacheItemResponse should be atomic, so that if there is any failure, cacheItem is unchanged. Then, the call to ocsp_RemoveCacheItem must be removed. This way, a bad single response or a failure copying it will not destroy information in the cache.", "creation_time": "2011-07-17T19:15:50Z"}, {"raw_text": "There might be another problem, where the cache entry's arena will grow each time the status is replaced, because the same arena is used for each version.", "creation_time": "2011-07-17T19:35:34Z", "attachment_id": null, "time": "2011-07-17T19:35:34Z", "text": "There might be another problem, where the cache entry's arena will grow each time the status is replaced, because the same arena is used for each version.", "id": 5595624, "is_private": false, "count": 1, "tags": [], "bug_id": 672127, "author": "brian@briansmith.org", "creator": "brian@briansmith.org"}]}}, "comments": {}}