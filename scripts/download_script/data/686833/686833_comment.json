{"comments": {}, "bugs": {"686833": {"comments": [{"bug_id": 686833, "count": 0, "text": "Created attachment 560307\nevent that Lightning tries to write\n\nI have saved an event with the iPhone application of the German railway company with their iPhone application on my Calendarserver.\n\nHowever it is impossible to edit this event with Lightning as it contains tabs and they are written back as \\t by Lightning. However this is not valid according to http://tools.ietf.org/html/rfc2445#section-4.3.11", "time": "2011-09-15T05:41:32Z", "tags": [], "creation_time": "2011-09-15T05:41:32Z", "author": "mozilla@felixmoeller.de", "is_private": false, "creator": "mozilla@felixmoeller.de", "id": 5718158, "raw_text": "I have saved an event with the iPhone application of the German railway company with their iPhone application on my Calendarserver.\n\nHowever it is impossible to edit this event with Lightning as it contains tabs and they are written back as \\t by Lightning. However this is not valid according to http://tools.ietf.org/html/rfc2445#section-4.3.11", "attachment_id": 560307}, {"text": "Created attachment 560309\nevent containing \\t after saving with Lightning\n\nsory, file was currupted", "tags": [], "time": "2011-09-15T05:59:16Z", "bug_id": 686833, "creation_time": "2011-09-15T05:59:16Z", "author": "mozilla@felixmoeller.de", "count": 1, "is_private": false, "creator": "mozilla@felixmoeller.de", "id": 5718169, "raw_text": "sory, file was currupted", "attachment_id": 560309}, {"tags": [], "time": "2011-09-15T09:33:36Z", "bug_id": 686833, "text": "File is corrupted? Does that mean this bug is invalid, or does it exist nevertheless?", "author": "philipp@bugzilla.kewis.ch", "creation_time": "2011-09-15T09:33:36Z", "count": 2, "creator": "philipp@bugzilla.kewis.ch", "is_private": false, "id": 5718322, "raw_text": "File is corrupted? Does that mean this bug is invalid, or does it exist nevertheless?", "attachment_id": null}, {"time": "2011-09-15T11:41:17Z", "tags": [], "bug_id": 686833, "text": "still valid, it writes \\t on the way to the server, although this is not allowed by RFC2445. Propbably a bug in libical...", "author": "mozilla@felixmoeller.de", "creation_time": "2011-09-15T11:41:17Z", "count": 3, "creator": "mozilla@felixmoeller.de", "is_private": false, "id": 5718399, "raw_text": "still valid, it writes \\t on the way to the server, although this is not allowed by RFC2445. Propbably a bug in libical...", "attachment_id": null}, {"id": 5719146, "attachment_id": 560441, "raw_text": "This is the original event. That is stored on my CalDAV server. Opening this event and saving it results in attachment #560309 which contains \"\\t\" instead of tabs.", "author": "mozilla@felixmoeller.de", "creation_time": "2011-09-15T20:33:39Z", "tags": [], "bug_id": 686833, "time": "2011-09-15T20:33:39Z", "text": "Created attachment 560441\noriginal event -- as stored on server\n\nThis is the original event. That is stored on my CalDAV server. Opening this event and saving it results in attachment #560309 which contains \"\\t\" instead of tabs.", "creator": "mozilla@felixmoeller.de", "is_private": false, "count": 4}, {"count": 5, "bug_id": 686833, "attachment_id": null, "raw_text": "This bug has allready been discovered in 2009 on http://sourceforge.net/mailarchive/forum.php?thread_name=20091024153051.GW9450%40bzzt.net&forum_name=freeassociation-libical", "id": 5719247, "creator": "mozilla@felixmoeller.de", "is_private": false, "author": "mozilla@felixmoeller.de", "creation_time": "2011-09-15T21:20:35Z", "tags": [], "time": "2011-09-15T21:20:35Z", "text": "This bug has allready been discovered in 2009 on http://sourceforge.net/mailarchive/forum.php?thread_name=20091024153051.GW9450%40bzzt.net&forum_name=freeassociation-libical"}, {"bug_id": 686833, "count": 6, "id": 5719858, "raw_text": "The original file (attachment #560441) gets 100 out out 100 points at http://icalvalid.cloudapp.net/.\n\nHowever, when importing it to Lightning and just exporting it again is just scores 93 out 100 according to http://icalvalid.cloudapp.net/.", "attachment_id": null, "text": "The original file (attachment #560441) gets 100 out out 100 points at http://icalvalid.cloudapp.net/.\n\nHowever, when importing it to Lightning and just exporting it again is just scores 93 out 100 according to http://icalvalid.cloudapp.net/.", "tags": [], "time": "2011-09-16T07:08:12Z", "creation_time": "2011-09-16T07:08:12Z", "author": "mozilla@felixmoeller.de", "is_private": false, "creator": "mozilla@felixmoeller.de"}, {"raw_text": "I tried to find out why the tabs are converted.\n\nHowever they have been converted from tab to \\t since the initial import of libical to the repository at <http://freeassociation.svn.sourceforge.net/viewvc/freeassociation/branches/none/libical/src/libical/icalvalue.c.in?revision=4&view=markup&pathrev=4> this commit is from 2001-01-02.\n\nThe conversion \\t to tab was integrated with r132 at <http://freeassociation.svn.sourceforge.net/viewvc/freeassociation/trunk/libical/src/libical/icalvalue.c?revision=132&view=markup&pathrev=132> on 2001-11-14.\nThe patch this is based on is in the GNOME repo at <http://git.gnome.org/browse/libical/commit/?id=f20441c4a4bdc87d42c73210d3c6e16d431a8070> on 2001-08-16.", "attachment_id": null, "id": 5729920, "is_private": false, "creator": "mozilla@felixmoeller.de", "text": "I tried to find out why the tabs are converted.\n\nHowever they have been converted from tab to \\t since the initial import of libical to the repository at <http://freeassociation.svn.sourceforge.net/viewvc/freeassociation/branches/none/libical/src/libical/icalvalue.c.in?revision=4&view=markup&pathrev=4> this commit is from 2001-01-02.\n\nThe conversion \\t to tab was integrated with r132 at <http://freeassociation.svn.sourceforge.net/viewvc/freeassociation/trunk/libical/src/libical/icalvalue.c?revision=132&view=markup&pathrev=132> on 2001-11-14.\nThe patch this is based on is in the GNOME repo at <http://git.gnome.org/browse/libical/commit/?id=f20441c4a4bdc87d42c73210d3c6e16d431a8070> on 2001-08-16.", "time": "2011-09-22T01:39:26Z", "tags": [], "creation_time": "2011-09-22T01:39:26Z", "author": "mozilla@felixmoeller.de", "count": 7, "bug_id": 686833}, {"id": 5730310, "attachment_id": 561687, "raw_text": "I have tested the attached patch locally and it works for me.", "author": "mozilla@felixmoeller.de", "creation_time": "2011-09-22T09:08:51Z", "tags": [], "time": "2011-09-22T09:08:51Z", "bug_id": 686833, "text": "Created attachment 561687\npatch to solve the issue\n\nI have tested the attached patch locally and it works for me.", "creator": "mozilla@felixmoeller.de", "is_private": false, "count": 8}, {"id": 5739227, "attachment_id": null, "raw_text": "I'm not sure this is the right approach - from my understanding of http://tools.ietf.org/html/rfc5545#section-3.3.11  the tab character shouldn't be allowed, escaped or not. \n\nSee also the function comments here - http://freeassociation.svn.sourceforge.net/viewvc/freeassociation/trunk/libical/src/libical/icalvalue.c?r1=1063&r2=1062&pathrev=1063", "author": "matthew.mecca@gmail.com", "creation_time": "2011-09-27T04:58:52Z", "tags": [], "time": "2011-09-27T04:58:52Z", "text": "I'm not sure this is the right approach - from my understanding of http://tools.ietf.org/html/rfc5545#section-3.3.11  the tab character shouldn't be allowed, escaped or not. \n\nSee also the function comments here - http://freeassociation.svn.sourceforge.net/viewvc/freeassociation/trunk/libical/src/libical/icalvalue.c?r1=1063&r2=1062&pathrev=1063", "creator": "matthew.mecca@gmail.com", "is_private": false, "bug_id": 686833, "count": 9}, {"attachment_id": null, "raw_text": "Then again, attachment 560441 passes the iCalendar validators at http://severinghaus.org/projects/icv/ and http://icalvalid.cloudapp.net/ , so I don't know.", "id": 5739236, "creator": "matthew.mecca@gmail.com", "is_private": false, "count": 10, "author": "matthew.mecca@gmail.com", "creation_time": "2011-09-27T05:11:31Z", "tags": [], "bug_id": 686833, "time": "2011-09-27T05:11:31Z", "text": "Then again, attachment 560441 passes the iCalendar validators at http://severinghaus.org/projects/icv/ and http://icalvalid.cloudapp.net/ , so I don't know."}, {"count": 11, "creator": "mozilla@felixmoeller.de", "is_private": false, "time": "2011-09-27T05:54:32Z", "tags": [], "bug_id": 686833, "text": "The event I posted was generated by an iPhone. Moreover, the Apple Calendar Server validation accepts it too.\n\nReading http://tools.ietf.org/html/rfc5545#section-3.3.11:\n\n     SAFE-CHAR     = WSP / %x21 / %x23-2B / %x2D-39 / %x3C-7E\n                   / NON-US-ASCII\n     ; Any character except CONTROL, DQUOTE, \";\", \":\", \",\"\n\n     CONTROL       = %x00-08 / %x0A-1F / %x7F\n     ; All the controls except HTAB\n\nSo the tab was given an exception, however it (HTAB/%x09) is in fact not in SAFE-CHAR...", "author": "mozilla@felixmoeller.de", "creation_time": "2011-09-27T05:54:32Z", "raw_text": "The event I posted was generated by an iPhone. Moreover, the Apple Calendar Server validation accepts it too.\n\nReading http://tools.ietf.org/html/rfc5545#section-3.3.11:\n\n     SAFE-CHAR     = WSP / %x21 / %x23-2B / %x2D-39 / %x3C-7E\n                   / NON-US-ASCII\n     ; Any character except CONTROL, DQUOTE, \";\", \":\", \",\"\n\n     CONTROL       = %x00-08 / %x0A-1F / %x7F\n     ; All the controls except HTAB\n\nSo the tab was given an exception, however it (HTAB/%x09) is in fact not in SAFE-CHAR...", "attachment_id": null, "id": 5739298}, {"tags": [], "bug_id": 686833, "time": "2011-09-28T02:07:38Z", "text": "You're right - RFC 5545 neglects to define which whitespace characters are included in \"WSP\", but from RFC 2445 - http://tools.ietf.org/html/rfc2445#section-4.1 \n\n     WSP        = SPACE / HTAB\n\nSo it would appear tab is valid as a TSAFE-CHAR.\n\nI'm not sure that would apply to the /r, /b, and /f cases though - as I read it those would still be invalid as CONTROL - do you agree?", "author": "matthew.mecca@gmail.com", "creation_time": "2011-09-28T02:07:38Z", "count": 12, "creator": "matthew.mecca@gmail.com", "is_private": false, "id": 5742109, "raw_text": "You're right - RFC 5545 neglects to define which whitespace characters are included in \"WSP\", but from RFC 2445 - http://tools.ietf.org/html/rfc2445#section-4.1 \n\n     WSP        = SPACE / HTAB\n\nSo it would appear tab is valid as a TSAFE-CHAR.\n\nI'm not sure that would apply to the /r, /b, and /f cases though - as I read it those would still be invalid as CONTROL - do you agree?", "attachment_id": null}, {"creator": "mozilla@felixmoeller.de", "is_private": false, "author": "mozilla@felixmoeller.de", "creation_time": "2011-09-28T08:02:34Z", "time": "2011-09-28T08:02:34Z", "tags": [], "text": "(In reply to Matthew Mecca [:mmecca] from comment #12)\n> You're right - RFC 5545 neglects to define which whitespace characters are\n> included in \"WSP\", but from RFC 2445 -\n> http://tools.ietf.org/html/rfc2445#section-4.1 \n> \n>      WSP        = SPACE / HTAB\ngreat that you found that!\n\n\n> I'm not sure that would apply to the /r, /b, and /f cases though - as I read\n> it those would still be invalid as CONTROL - do you agree?\nTo make this more readable for others according to <http://www.javascriptkit.com/javatutors/redev2.shtml> and <http://www.torsten-horn.de/techdocs/ascii.htm>\n\\f matches form-feed.       %x0c\n\\r matches carriage return. %x0d\n\\b matches backspace.       %x08\n\nAccording to <http://tools.ietf.org/html/rfc2445#section-4.1> they cannot be part of any of \n     QSAFE-CHAR = WSP / %x21 / %x23-7E / NON-US-ASCII\n     ; Any character except CTLs and DQUOTE\n\n     SAFE-CHAR  = WSP / %x21 / %x23-2B / %x2D-39 / %x3C-7E\n                / NON-US-ASCII\n     ; Any character except CTLs, DQUOTE, \";\", \":\", \",\"\n\n     VALUE-CHAR = WSP / %x21-7E / NON-US-ASCII\n     ; Any textual character\nbecause they are all contained in:\n     CTL        = %x00-08 / %x0A-1F / %x7F\n        ; Controls\n\nNow looking at other iCal implementations:\nReading the iCal library used by the Calendar Server <http://svn.mulberrymail.com/repos/PyCalendar/branches/server/src/pycalendar/utils.py> \\r is accepted and has been accepted since the initial import (r8) in 2007.\n\n\n     8      daboo def writeTextValue( os, value ):\n     8      daboo     try:\n     8      daboo         start_pos = 0\n     8      daboo         end_pos = find_first_of( value, \"\\r\\n;\\\\,\", start_pos )\n     8      daboo         if end_pos != -1:\n     8      daboo             while True:\n     8      daboo                 # Write current segment\n     8      daboo                 os.write( value[start_pos:end_pos] )\n     8      daboo \n     8      daboo                 # Write escape\n     8      daboo                 os.write(\"\\\\\")\n     8      daboo                 c = value[end_pos]\n     8      daboo                 if c == '\\r':\n     8      daboo                     os.write(\"r\")\n     8      daboo                 elif c == '\\n':\n     8      daboo                     os.write(\"n\")\n     8      daboo                 elif c == ';':\n     8      daboo                     os.write(\";\")\n     8      daboo                 elif c == '\\\\':\n     8      daboo                     os.write(\"\\\\\")\n     8      daboo                 elif c == ',':\n     8      daboo                     os.write(\",\")\n\nDAViCal however just accepts \\r in combination with \\n <http://repo.or.cz/w/awl.git/blob/HEAD:/inc/vComponent.php> if I am not mistaken.", "attachment_id": null, "raw_text": "(In reply to Matthew Mecca [:mmecca] from comment #12)\n> You're right - RFC 5545 neglects to define which whitespace characters are\n> included in \"WSP\", but from RFC 2445 -\n> http://tools.ietf.org/html/rfc2445#section-4.1 \n> \n>      WSP        = SPACE / HTAB\ngreat that you found that!\n\n\n> I'm not sure that would apply to the /r, /b, and /f cases though - as I read\n> it those would still be invalid as CONTROL - do you agree?\nTo make this more readable for others according to <http://www.javascriptkit.com/javatutors/redev2.shtml> and <http://www.torsten-horn.de/techdocs/ascii.htm>\n\\f matches form-feed.       %x0c\n\\r matches carriage return. %x0d\n\\b matches backspace.       %x08\n\nAccording to <http://tools.ietf.org/html/rfc2445#section-4.1> they cannot be part of any of \n     QSAFE-CHAR = WSP / %x21 / %x23-7E / NON-US-ASCII\n     ; Any character except CTLs and DQUOTE\n\n     SAFE-CHAR  = WSP / %x21 / %x23-2B / %x2D-39 / %x3C-7E\n                / NON-US-ASCII\n     ; Any character except CTLs, DQUOTE, \";\", \":\", \",\"\n\n     VALUE-CHAR = WSP / %x21-7E / NON-US-ASCII\n     ; Any textual character\nbecause they are all contained in:\n     CTL        = %x00-08 / %x0A-1F / %x7F\n        ; Controls\n\nNow looking at other iCal implementations:\nReading the iCal library used by the Calendar Server <http://svn.mulberrymail.com/repos/PyCalendar/branches/server/src/pycalendar/utils.py> \\r is accepted and has been accepted since the initial import (r8) in 2007.\n\n\n     8      daboo def writeTextValue( os, value ):\n     8      daboo     try:\n     8      daboo         start_pos = 0\n     8      daboo         end_pos = find_first_of( value, \"\\r\\n;\\\\,\", start_pos )\n     8      daboo         if end_pos != -1:\n     8      daboo             while True:\n     8      daboo                 # Write current segment\n     8      daboo                 os.write( value[start_pos:end_pos] )\n     8      daboo \n     8      daboo                 # Write escape\n     8      daboo                 os.write(\"\\\\\")\n     8      daboo                 c = value[end_pos]\n     8      daboo                 if c == '\\r':\n     8      daboo                     os.write(\"r\")\n     8      daboo                 elif c == '\\n':\n     8      daboo                     os.write(\"n\")\n     8      daboo                 elif c == ';':\n     8      daboo                     os.write(\";\")\n     8      daboo                 elif c == '\\\\':\n     8      daboo                     os.write(\"\\\\\")\n     8      daboo                 elif c == ',':\n     8      daboo                     os.write(\",\")\n\nDAViCal however just accepts \\r in combination with \\n <http://repo.or.cz/w/awl.git/blob/HEAD:/inc/vComponent.php> if I am not mistaken.", "id": 5742515, "count": 13, "bug_id": 686833}, {"attachment_id": 561687, "raw_text": "Give you two are much more into the details, I think its better that Matthew reviews this!", "id": 5742616, "creator": "philipp@bugzilla.kewis.ch", "is_private": false, "count": 14, "author": "philipp@bugzilla.kewis.ch", "creation_time": "2011-09-28T09:10:24Z", "time": "2011-09-28T09:10:24Z", "tags": [], "bug_id": 686833, "text": "Comment on attachment 561687\npatch to solve the issue\n\nGive you two are much more into the details, I think its better that Matthew reviews this!"}, {"attachment_id": null, "raw_text": "I opened a bug against the calendar server as on of the applications was obviously wrong. \n\nCyrus Daboo just closed it <https://trac.calendarserver.org/ticket/464> citing <http://tools.ietf.org/html/rfc5234#appendix-B.1> so a <HTAB> may be in a VCARD.\n\nHowever all the escape sequences are bogus and therefore the attached patch is correct.", "id": 5742850, "creator": "mozilla@felixmoeller.de", "is_private": false, "count": 15, "author": "mozilla@felixmoeller.de", "creation_time": "2011-09-28T12:35:04Z", "time": "2011-09-28T12:35:04Z", "tags": [], "bug_id": 686833, "text": "I opened a bug against the calendar server as on of the applications was obviously wrong. \n\nCyrus Daboo just closed it <https://trac.calendarserver.org/ticket/464> citing <http://tools.ietf.org/html/rfc5234#appendix-B.1> so a <HTAB> may be in a VCARD.\n\nHowever all the escape sequences are bogus and therefore the attached patch is correct."}, {"id": 5751458, "attachment_id": 561687, "raw_text": "Review of attachment 561687:\n-----------------------------------------------------------------\n\nThis should work for tab, since it should be allowed, but I have some reservations on the other cases:\n\n::: calendar/libical/src/libical/icalvalue.c\n@@ -294,5 @@\n>  \n> -\t    case '\\t': {\n> -\t\ticalmemory_append_string(&str,&str_p,&buf_sz,\"\\\\t\");\n> -\t\tbreak;\n> -\t    }\n\nThis works for fine the tab character.\n\n@@ -306,5 @@\n> -\t    }\n> -\t    case '\\f': {\n> -\t\ticalmemory_append_string(&str,&str_p,&buf_sz,\"\\\\f\");\n> -\t\tbreak;\n> -\t    }\n\nI see where you're coming from, escaping these is not correct. However, since these are CONTROL and therefore invalid characters, allowing them to fall through to default and remain unescaped is not correct either - wouldn't it make more sense to break out on these cases and strip them from the result?", "creation_time": "2011-10-01T04:39:25Z", "author": "matthew.mecca@gmail.com", "text": "Comment on attachment 561687\npatch to solve the issue\n\nReview of attachment 561687:\n-----------------------------------------------------------------\n\nThis should work for tab, since it should be allowed, but I have some reservations on the other cases:\n\n::: calendar/libical/src/libical/icalvalue.c\n@@ -294,5 @@\n>  \n> -\t    case '\\t': {\n> -\t\ticalmemory_append_string(&str,&str_p,&buf_sz,\"\\\\t\");\n> -\t\tbreak;\n> -\t    }\n\nThis works for fine the tab character.\n\n@@ -306,5 @@\n> -\t    }\n> -\t    case '\\f': {\n> -\t\ticalmemory_append_string(&str,&str_p,&buf_sz,\"\\\\f\");\n> -\t\tbreak;\n> -\t    }\n\nI see where you're coming from, escaping these is not correct. However, since these are CONTROL and therefore invalid characters, allowing them to fall through to default and remain unescaped is not correct either - wouldn't it make more sense to break out on these cases and strip them from the result?", "bug_id": 686833, "time": "2011-10-01T04:39:25Z", "tags": [], "is_private": false, "creator": "matthew.mecca@gmail.com", "count": 16}, {"raw_text": "And we should probably update the comment at http://mxr.mozilla.org/comm-central/source/calendar/libical/src/libical/icalvalue.c#902", "attachment_id": null, "id": 5751465, "count": 17, "creator": "matthew.mecca@gmail.com", "is_private": false, "tags": [], "bug_id": 686833, "time": "2011-10-01T04:43:00Z", "text": "And we should probably update the comment at http://mxr.mozilla.org/comm-central/source/calendar/libical/src/libical/icalvalue.c#902", "author": "matthew.mecca@gmail.com", "creation_time": "2011-10-01T04:43:00Z"}, {"raw_text": "r- for now just to address the previous review comments. I'd also be fine with taking just the tab character part and spinning off the rest to another bug.", "attachment_id": 561687, "id": 5784263, "count": 18, "is_private": false, "creator": "matthew.mecca@gmail.com", "text": "Comment on attachment 561687\npatch to solve the issue\n\nr- for now just to address the previous review comments. I'd also be fine with taking just the tab character part and spinning off the rest to another bug.", "tags": [], "time": "2011-10-15T03:27:25Z", "bug_id": 686833, "creation_time": "2011-10-15T03:27:25Z", "author": "matthew.mecca@gmail.com"}, {"count": 19, "bug_id": 686833, "creator": "mozilla@felixmoeller.de", "is_private": false, "tags": [], "time": "2012-10-17T11:36:57Z", "text": "*** Bug 802060 has been marked as a duplicate of this bug. ***", "author": "mozilla@felixmoeller.de", "creation_time": "2012-10-17T11:36:57Z", "raw_text": "", "attachment_id": null, "id": 6737126}, {"tags": [], "bug_id": 686833, "time": "2012-10-17T12:08:44Z", "text": "(In reply to Matthew Mecca [:mmecca] from comment #16)\n> I see where you're coming from, escaping these is not correct. However,\n> since these are CONTROL and therefore invalid characters, allowing them to\n> fall through to default and remain unescaped is not correct either -\n> wouldn't it make more sense to break out on these cases and strip them from\n> the result?\nI guess Philipp should decide.\n\nLeaving these in here gives:\n- doing the least possible modification to the event\n- it will not cause any issue, as we have retrieved the character from the server, so it should be accepted again\n\nRemoving them gives:\n- Cleaning up invalid Events and make them more RFC compliant\n\nLooking at this and bug #802060 the tab is the only real world relevant character anyways, so the rest of the patch probably does not make a big difference ...", "author": "mozilla@felixmoeller.de", "creation_time": "2012-10-17T12:08:44Z", "count": 20, "creator": "mozilla@felixmoeller.de", "is_private": false, "id": 6737172, "raw_text": "(In reply to Matthew Mecca [:mmecca] from comment #16)\n> I see where you're coming from, escaping these is not correct. However,\n> since these are CONTROL and therefore invalid characters, allowing them to\n> fall through to default and remain unescaped is not correct either -\n> wouldn't it make more sense to break out on these cases and strip them from\n> the result?\nI guess Philipp should decide.\n\nLeaving these in here gives:\n- doing the least possible modification to the event\n- it will not cause any issue, as we have retrieved the character from the server, so it should be accepted again\n\nRemoving them gives:\n- Cleaning up invalid Events and make them more RFC compliant\n\nLooking at this and bug #802060 the tab is the only real world relevant character anyways, so the rest of the patch probably does not make a big difference ...", "attachment_id": null}, {"id": 6745716, "raw_text": "(In reply to Felix M\u00f6ller from comment #20)\n> - it will not cause any issue, as we have retrieved the character from the\n> server, so it should be accepted again\n\nThere's also the case where we move an event from one calendar to another.\n\n> \n> Removing them gives:\n> - Cleaning up invalid Events and make them more RFC compliant\n\nI think if we're going to change it, we should make it RFC compliant.\n\n> Looking at this and bug #802060 the tab is the only real world relevant\n> character anyways, so the rest of the patch probably does not make a big\n> difference ...\n\nI agree.\n\n\nOn a side note, it looks like the ical.js parser doesn't allow the control characters either, see - https://github.com/kewisch/ical.js/blob/0adaff697269cbdde00043b9c6d9796d22e81287/lib/ical/parser.js#L185", "attachment_id": null, "text": "(In reply to Felix M\u00f6ller from comment #20)\n> - it will not cause any issue, as we have retrieved the character from the\n> server, so it should be accepted again\n\nThere's also the case where we move an event from one calendar to another.\n\n> \n> Removing them gives:\n> - Cleaning up invalid Events and make them more RFC compliant\n\nI think if we're going to change it, we should make it RFC compliant.\n\n> Looking at this and bug #802060 the tab is the only real world relevant\n> character anyways, so the rest of the patch probably does not make a big\n> difference ...\n\nI agree.\n\n\nOn a side note, it looks like the ical.js parser doesn't allow the control characters either, see - https://github.com/kewisch/ical.js/blob/0adaff697269cbdde00043b9c6d9796d22e81287/lib/ical/parser.js#L185", "tags": [], "time": "2012-10-19T13:45:57Z", "bug_id": 686833, "creation_time": "2012-10-19T13:45:57Z", "author": "matthew.mecca@gmail.com", "count": 21, "is_private": false, "creator": "matthew.mecca@gmail.com"}, {"id": 8772790, "attachment_id": null, "raw_text": "I've seen the same problem in XP 32-bit and Win7 64-bit, and of all evidence, this bug is not related to platform, so let me change it to ALL.\n\nOn a side-note: this bug does not happen to calendars stored in local computer.\n\nSo, what's left to do or decide to have the patch reviewed or accepted?", "creation_time": "2014-05-09T10:36:57Z", "author": "lapsap7+mz@gmail.com", "text": "I've seen the same problem in XP 32-bit and Win7 64-bit, and of all evidence, this bug is not related to platform, so let me change it to ALL.\n\nOn a side-note: this bug does not happen to calendars stored in local computer.\n\nSo, what's left to do or decide to have the patch reviewed or accepted?", "tags": [], "time": "2014-05-09T10:36:57Z", "bug_id": 686833, "is_private": false, "creator": "lapsap7+mz@gmail.com", "count": 22}, {"text": "*** Bug 1008008 has been marked as a duplicate of this bug. ***", "bug_id": 686833, "tags": [], "time": "2014-09-28T21:21:07Z", "creation_time": "2014-09-28T21:21:07Z", "author": "philipp@bugzilla.kewis.ch", "count": 23, "is_private": false, "creator": "philipp@bugzilla.kewis.ch", "id": 9371638, "raw_text": "", "attachment_id": null}, {"creation_time": "2016-02-22T21:16:35Z", "author": "hacking@nachtgeist.net", "text": "*bump*\n\nAny news on this? This bug is really annoying...", "tags": [], "time": "2016-02-22T21:16:35Z", "bug_id": 686833, "is_private": false, "creator": "hacking@nachtgeist.net", "count": 24, "id": 11185627, "attachment_id": null, "raw_text": "*bump*\n\nAny news on this? This bug is really annoying..."}, {"bug_id": 686833, "count": 25, "id": 11187397, "raw_text": "On Jessie the package iceowl-extension doesn't contain any compiled code, only\nJS and XUL. I couldn't track down the calls to serializeToICSStream() any\nfurther, so my hack most probably doesn't fix the root cause.\n\nJust adding so people can hackfix locally until this is fixed upstream.\n\nCheers\nDaniel", "attachment_id": 8722453, "time": "2016-02-23T12:54:32Z", "tags": [], "text": "Created attachment 8722453\nHackfix for the  the issue on a Debian/Jessie\n\nOn Jessie the package iceowl-extension doesn't contain any compiled code, only\nJS and XUL. I couldn't track down the calls to serializeToICSStream() any\nfurther, so my hack most probably doesn't fix the root cause.\n\nJust adding so people can hackfix locally until this is fixed upstream.\n\nCheers\nDaniel", "author": "hacking@nachtgeist.net", "creation_time": "2016-02-23T12:54:32Z", "creator": "hacking@nachtgeist.net", "is_private": false}, {"tags": [], "time": "2016-02-23T16:52:01Z", "bug_id": 686833, "text": "To make debugging easier, this are the steps to reproduce the problem without using the attached test-case files:\n1. Open Notepad or any text editor\n2. Type in something and make sure some TABS are inserted\n3. Create a new event\n4. Copy-n-paste the text into the event description and save it\n5. Reopen the event and the tabs are replaced by the letter t\n\nHope this helps", "author": "lapsap7+mz@gmail.com", "creation_time": "2016-02-23T16:52:01Z", "count": 26, "creator": "lapsap7+mz@gmail.com", "is_private": false, "id": 11188167, "raw_text": "To make debugging easier, this are the steps to reproduce the problem without using the attached test-case files:\n1. Open Notepad or any text editor\n2. Type in something and make sure some TABS are inserted\n3. Create a new event\n4. Copy-n-paste the text into the event description and save it\n5. Reopen the event and the tabs are replaced by the letter t\n\nHope this helps", "attachment_id": null}, {"text": "Here is my test results I posted in bug 1008008 (duplicate bug) but I think it would be useful to post them here again.\n\n(In reply to Philipp Kewisch [:Fallen] from comment of bug 1008008)\n> It would be interesting to test this on a different CalDAV server too, maybe\n> someone else can check. There are other free caldav servers available, for\n> example yahoo or fruux.com. There is also a VM of a sogo server available at\n> http://www.sogo.nu/downloads/zeg.html\n\nHere are the test results from different CalDAV servers:\n* GMail --> the single letter   t\n* Yahoo --> the characters      \\t\n* fruux --> the REAL tab char   <tab>\n* duplic-solutions.fr  -->      \\t\n\nNote: duplic-solutions.fr is a not a public/free CalDAV server\n\nI'm using the latest TB 52.2.1 + LT 5.4.2.1", "tags": [], "bug_id": 686833, "time": "2017-08-08T18:03:14Z", "creation_time": "2017-08-08T18:03:14Z", "author": "lapsap7+mz@gmail.com", "count": 27, "is_private": false, "creator": "lapsap7+mz@gmail.com", "id": 12547472, "raw_text": "Here is my test results I posted in bug 1008008 (duplicate bug) but I think it would be useful to post them here again.\n\n(In reply to Philipp Kewisch [:Fallen] from comment of bug 1008008)\n> It would be interesting to test this on a different CalDAV server too, maybe\n> someone else can check. There are other free caldav servers available, for\n> example yahoo or fruux.com. There is also a VM of a sogo server available at\n> http://www.sogo.nu/downloads/zeg.html\n\nHere are the test results from different CalDAV servers:\n* GMail --> the single letter   t\n* Yahoo --> the characters      \\t\n* fruux --> the REAL tab char   <tab>\n* duplic-solutions.fr  -->      \\t\n\nNote: duplic-solutions.fr is a not a public/free CalDAV server\n\nI'm using the latest TB 52.2.1 + LT 5.4.2.1", "attachment_id": null}]}}}