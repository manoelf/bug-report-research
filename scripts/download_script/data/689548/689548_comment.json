{"comments": {}, "bugs": {"689548": {"comments": [{"raw_text": "User Agent: Mozilla/5.0 (X11; Linux i686; rv:6.0) Gecko/20100101 Firefox/6.0\nBuild ID: 20110811165603\n\nSteps to reproduce:\n\nCreate a context menu in XUL, which includes an empty submenu.\nIn the popupshowing handler, populate the submenu with another menu element.\nTry to set the label property on the new menu element, and try to use appendItem() to give it some menuitems.\n\n\nActual results:\n\nThe label is not set using the property, although it is set using setAttribute.\nappendItem() crashes to the error console saying appendItem() is not a method.\nIf the submenu popup is shown, then the next time the context menu is opened everything works.\n\n\nExpected results:\n\nThe properties and methods documented for the menu element should work.\nThe label property should set the label on the menu.\nThe appendItem() method should create a new menuitem on the menu.\n\nThis behaviour appears to be caused because submenus are explicitly not initialised when their containing menu is initialised.  I believe that the bindings that contain properties such as \"label\" and methods such as appendItem() do not get bound until the menu frame itself is initialised when it is eventually shown.  This is deliberate and commented in the code, although I'm not sure if the side effects described in this bug are expected.  If this is considered WONTFIX then it should at least be documented that you can't use menu element properties and methods until the menu has been shown.", "attachment_id": null, "bug_id": 689548, "text": "User Agent: Mozilla/5.0 (X11; Linux i686; rv:6.0) Gecko/20100101 Firefox/6.0\nBuild ID: 20110811165603\n\nSteps to reproduce:\n\nCreate a context menu in XUL, which includes an empty submenu.\nIn the popupshowing handler, populate the submenu with another menu element.\nTry to set the label property on the new menu element, and try to use appendItem() to give it some menuitems.\n\n\nActual results:\n\nThe label is not set using the property, although it is set using setAttribute.\nappendItem() crashes to the error console saying appendItem() is not a method.\nIf the submenu popup is shown, then the next time the context menu is opened everything works.\n\n\nExpected results:\n\nThe properties and methods documented for the menu element should work.\nThe label property should set the label on the menu.\nThe appendItem() method should create a new menuitem on the menu.\n\nThis behaviour appears to be caused because submenus are explicitly not initialised when their containing menu is initialised.  I believe that the bindings that contain properties such as \"label\" and methods such as appendItem() do not get bound until the menu frame itself is initialised when it is eventually shown.  This is deliberate and commented in the code, although I'm not sure if the side effects described in this bug are expected.  If this is considered WONTFIX then it should at least be documented that you can't use menu element properties and methods until the menu has been shown.", "tags": [], "is_private": false, "id": 5739932, "count": 0, "author": "mozilla@virginmedia.com", "creator": "mozilla@virginmedia.com", "creation_time": "2011-09-27T13:12:04Z", "time": "2011-09-27T13:12:04Z"}, {"count": 1, "id": 5792103, "is_private": false, "time": "2011-10-19T16:25:02Z", "creation_time": "2011-10-19T16:25:02Z", "creator": "mozilla@virginmedia.com", "author": "mozilla@virginmedia.com", "attachment_id": null, "raw_text": "The same thing occurs if you try to access the properties or methods of a hidden submenu.", "tags": [], "text": "The same thing occurs if you try to access the properties or methods of a hidden submenu.", "bug_id": 689548}]}}}