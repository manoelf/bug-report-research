{"bugs": {"667159": {"comments": [{"tags": [], "text": "Spun-off from bug 666706: For [::192.168.1.1], for instance, getBaseDomainFromHost returns \"1.1]\" rather than throwing NS_ERROR_HOST_IS_IP_ADDRESS.", "bug_id": 667159, "raw_text": "Spun-off from bug 666706: For [::192.168.1.1], for instance, getBaseDomainFromHost returns \"1.1]\" rather than throwing NS_ERROR_HOST_IS_IP_ADDRESS.", "attachment_id": null, "author": "dao+bmo@mozilla.com", "creation_time": "2011-06-25T07:38:09Z", "time": "2011-06-25T07:38:09Z", "creator": "dao+bmo@mozilla.com", "id": 5555797, "count": 0, "is_private": false}, {"creator": "VYV03354@nifty.ne.jp", "time": "2011-06-25T10:10:01Z", "creation_time": "2011-06-25T10:10:01Z", "author": "VYV03354@nifty.ne.jp", "is_private": false, "count": 1, "id": 5555899, "tags": [], "bug_id": 667159, "text": "Why were you passing brackets in the first place? Brackets are not considered as a part of IPv6 address. You should strip brackets before passing the address to Effective TLD service.", "attachment_id": null, "raw_text": "Why were you passing brackets in the first place? Brackets are not considered as a part of IPv6 address. You should strip brackets before passing the address to Effective TLD service."}, {"author": "dao+bmo@mozilla.com", "creator": "dao+bmo@mozilla.com", "creation_time": "2011-06-25T12:23:07Z", "time": "2011-06-25T12:23:07Z", "is_private": false, "count": 2, "id": 5555976, "tags": [], "bug_id": 667159, "text": "(In reply to comment #1)\n> Why were you passing brackets in the first place?\n\nBecause that's what you get when extracting the host as illustrated in <https://developer.mozilla.org/@api/deki/files/3267/=uri-diagram.png>.\n\n> Brackets are not\n> considered as a part of IPv6 address. You should strip brackets before\n> passing the address to Effective TLD service.\n\nThere's no point in doing this on the call side -- at the point where we're detecting IPv6 addresses, we know that there's no base domain, so we wouldn't call getBaseDomainFromHost.", "raw_text": "(In reply to comment #1)\n> Why were you passing brackets in the first place?\n\nBecause that's what you get when extracting the host as illustrated in <https://developer.mozilla.org/@api/deki/files/3267/=uri-diagram.png>.\n\n> Brackets are not\n> considered as a part of IPv6 address. You should strip brackets before\n> passing the address to Effective TLD service.\n\nThere's no point in doing this on the call side -- at the point where we're detecting IPv6 addresses, we know that there's no base domain, so we wouldn't call getBaseDomainFromHost.", "attachment_id": null}, {"raw_text": "(In reply to comment #2)\n> Because that's what you get when extracting the host as illustrated in\n> <https://developer.mozilla.org/@api/deki/files/3267/=uri-diagram.png>.\nActually you extracted the host using a regular expression.\nhttps://mxr.mozilla.org/mozilla-central/source/browser/base/content/urlbarBindings.xml#205\nI got \"::192.168.0.1\" without brackets using the following code:\n> var ioService = Components.classes[\"@mozilla.org/network/io-service;1\"]\n> .getService(Components.interfaces.nsIIOService);\n> var uri = ioService.newURI('http://[::192.168.0.1]/', null, null);\n> console.log(uri.host);\n\n> There's no point in doing this on the call side -- at the point where we're\n> detecting IPv6 addresses, we know that there's no base domain, so we\n> wouldn't call getBaseDomainFromHost.\nThen why is this bug required? You do not even call the eTLD service.", "attachment_id": null, "tags": [], "bug_id": 667159, "text": "(In reply to comment #2)\n> Because that's what you get when extracting the host as illustrated in\n> <https://developer.mozilla.org/@api/deki/files/3267/=uri-diagram.png>.\nActually you extracted the host using a regular expression.\nhttps://mxr.mozilla.org/mozilla-central/source/browser/base/content/urlbarBindings.xml#205\nI got \"::192.168.0.1\" without brackets using the following code:\n> var ioService = Components.classes[\"@mozilla.org/network/io-service;1\"]\n> .getService(Components.interfaces.nsIIOService);\n> var uri = ioService.newURI('http://[::192.168.0.1]/', null, null);\n> console.log(uri.host);\n\n> There's no point in doing this on the call side -- at the point where we're\n> detecting IPv6 addresses, we know that there's no base domain, so we\n> wouldn't call getBaseDomainFromHost.\nThen why is this bug required? You do not even call the eTLD service.", "count": 3, "id": 5555985, "is_private": false, "author": "VYV03354@nifty.ne.jp", "creation_time": "2011-06-25T12:39:15Z", "time": "2011-06-25T12:39:15Z", "creator": "VYV03354@nifty.ne.jp"}, {"bug_id": 667159, "text": "(In reply to comment #3)\n> (In reply to comment #2)\n> > Because that's what you get when extracting the host as illustrated in\n> > <https://developer.mozilla.org/@api/deki/files/3267/=uri-diagram.png>.\n> Actually you extracted the host using a regular expression.\n> https://mxr.mozilla.org/mozilla-central/source/browser/base/content/\n> urlbarBindings.xml#205\n\nRight, I didn't say anything contrary to this.\n\n> I got \"::192.168.0.1\" without brackets using the following code:\n> > var ioService = Components.classes[\"@mozilla.org/network/io-service;1\"]\n> > .getService(Components.interfaces.nsIIOService);\n> > var uri = ioService.newURI('http://[::192.168.0.1]/', null, null);\n> > console.log(uri.host);\n\nSure.\n\n> > There's no point in doing this on the call side -- at the point where we're\n> > detecting IPv6 addresses, we know that there's no base domain, so we\n> > wouldn't call getBaseDomainFromHost.\n> Then why is this bug required? You do not even call the eTLD service.\n\nThat's what I'm talking about. We're not calling the eTLD service anymore since we detect IPv6 addresses. Bug 666706 added this workaround.", "tags": [], "attachment_id": null, "raw_text": "(In reply to comment #3)\n> (In reply to comment #2)\n> > Because that's what you get when extracting the host as illustrated in\n> > <https://developer.mozilla.org/@api/deki/files/3267/=uri-diagram.png>.\n> Actually you extracted the host using a regular expression.\n> https://mxr.mozilla.org/mozilla-central/source/browser/base/content/\n> urlbarBindings.xml#205\n\nRight, I didn't say anything contrary to this.\n\n> I got \"::192.168.0.1\" without brackets using the following code:\n> > var ioService = Components.classes[\"@mozilla.org/network/io-service;1\"]\n> > .getService(Components.interfaces.nsIIOService);\n> > var uri = ioService.newURI('http://[::192.168.0.1]/', null, null);\n> > console.log(uri.host);\n\nSure.\n\n> > There's no point in doing this on the call side -- at the point where we're\n> > detecting IPv6 addresses, we know that there's no base domain, so we\n> > wouldn't call getBaseDomainFromHost.\n> Then why is this bug required? You do not even call the eTLD service.\n\nThat's what I'm talking about. We're not calling the eTLD service anymore since we detect IPv6 addresses. Bug 666706 added this workaround.", "creator": "dao+bmo@mozilla.com", "creation_time": "2011-06-25T12:42:42Z", "time": "2011-06-25T12:42:42Z", "author": "dao+bmo@mozilla.com", "is_private": false, "id": 5555987, "count": 4}, {"attachment_id": null, "raw_text": "Bulk change to priority: https://bugzilla.mozilla.org/show_bug.cgi?id=1399258", "text": "Bulk change to priority: https://bugzilla.mozilla.org/show_bug.cgi?id=1399258", "bug_id": 667159, "tags": [], "count": 5, "id": 12658210, "is_private": false, "creation_time": "2017-09-13T18:37:03Z", "time": "2017-09-13T18:37:03Z", "creator": "bug-husbandry-bot@mozilla.bugs", "author": "bug-husbandry-bot@mozilla.bugs"}, {"count": 6, "id": 12659760, "is_private": false, "creation_time": "2017-09-13T18:49:06Z", "time": "2017-09-13T18:49:06Z", "creator": "bug-husbandry-bot@mozilla.bugs", "author": "bug-husbandry-bot@mozilla.bugs", "attachment_id": null, "raw_text": "Bulk change to priority: https://bugzilla.mozilla.org/show_bug.cgi?id=1399258", "tags": [], "bug_id": 667159, "text": "Bulk change to priority: https://bugzilla.mozilla.org/show_bug.cgi?id=1399258"}]}}, "comments": {}}