{"comments": {}, "bugs": {"428690": {"comments": [{"text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.8.1.13) Gecko/20080311 Firefox/2.0.0.13\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9pre) Gecko/2008041206 Minefield/3.0pre\n\nWhen you visit pages or bookmarks whose URL redirects to another page, two entries are added to the \"History\" menu. One entry displays the title of the page that is eventually loaded (as expected), but the other entry shows the path or filename of the URL that was originally called.\n\nThis also occurs when clicking items from the \"Latest Headlines\" live bookmark (http://news.bbc.co.uk/go/rss/-/2/hi/default.stm) or RSS feeds served by FeedBurner (e.g. http://feeds.feedburner.com/BurnThisRSS2). In both cases, the feed items are URL redirects.\n\nReproducible: Always\n\nSteps to Reproduce:\n1. Click the \"Getting Started\" bookmark on the bookmarks toolbar (or visit http://www.mozilla.com/products/firefox/central.html)\n2. Wait for the page to finish loading\nActual Results:  \nNote two new items atop the \"History\" menu\n  central.html\n  Firefox Central | Mozilla\n\nExpected Results:  \nOnly one new item should be in the \"History\" menu\n  Firefox Central | Mozilla\n\nThis also occurs in Firefox 2 when manually typing in addresses that redirect. However, if you click a link or bookmark in Firefox 2 that redirects, only one entry is added to the \"History\" menu, which is the expected behavior.", "count": 0, "attachment_id": null, "author": "projects@protej.com", "tags": [], "creation_time": "2008-04-12T18:05:12Z", "time": "2008-04-12T18:05:12Z", "id": 3577007, "is_private": false, "creator": "projects@protej.com", "raw_text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.8.1.13) Gecko/20080311 Firefox/2.0.0.13\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9pre) Gecko/2008041206 Minefield/3.0pre\n\nWhen you visit pages or bookmarks whose URL redirects to another page, two entries are added to the \"History\" menu. One entry displays the title of the page that is eventually loaded (as expected), but the other entry shows the path or filename of the URL that was originally called.\n\nThis also occurs when clicking items from the \"Latest Headlines\" live bookmark (http://news.bbc.co.uk/go/rss/-/2/hi/default.stm) or RSS feeds served by FeedBurner (e.g. http://feeds.feedburner.com/BurnThisRSS2). In both cases, the feed items are URL redirects.\n\nReproducible: Always\n\nSteps to Reproduce:\n1. Click the \"Getting Started\" bookmark on the bookmarks toolbar (or visit http://www.mozilla.com/products/firefox/central.html)\n2. Wait for the page to finish loading\nActual Results:  \nNote two new items atop the \"History\" menu\n  central.html\n  Firefox Central | Mozilla\n\nExpected Results:  \nOnly one new item should be in the \"History\" menu\n  Firefox Central | Mozilla\n\nThis also occurs in Firefox 2 when manually typing in addresses that redirect. However, if you click a link or bookmark in Firefox 2 that redirects, only one entry is added to the \"History\" menu, which is the expected behavior.", "bug_id": 428690}, {"tags": [], "raw_text": "", "bug_id": 428690, "is_private": false, "id": 3764910, "time": "2008-09-03T16:21:54Z", "creation_time": "2008-09-03T16:21:54Z", "author": "hzbz@pm.me", "attachment_id": null, "count": 1, "text": "*** Bug 448462 has been marked as a duplicate of this bug. ***", "creator": "hzbz@pm.me"}, {"creator": "hzbz@pm.me", "creation_time": "2008-09-03T16:23:04Z", "text": "*** Bug 450353 has been marked as a duplicate of this bug. ***", "count": 2, "attachment_id": null, "author": "hzbz@pm.me", "bug_id": 428690, "raw_text": "", "time": "2008-09-03T16:23:04Z", "id": 3764912, "is_private": false, "tags": []}, {"bug_id": 428690, "raw_text": "I'm going implementing includeRedirects option", "creator": "mak@mozilla.com", "time": "2008-09-04T23:08:52Z", "id": 3767162, "is_private": false, "creation_time": "2008-09-04T23:08:52Z", "attachment_id": null, "count": 3, "text": "I'm going implementing includeRedirects option", "author": "mak@mozilla.com", "tags": []}, {"id": 3767286, "time": "2008-09-05T00:29:54Z", "is_private": false, "bug_id": 428690, "raw_text": "a problem:\n\nuser TYPES in url A that redirects to B (ideally we could have a bunch of redirects in the middle), what user see for real in the browser is TitleB and UriB, so imho we should try to hold the final target page in our views by default, that's because in-the-middle redirects could have wrong titles, and both uri and title are not what the user see in the browser.\nSuppose that we have a query with includeRedirects = 0 and onlyTyped = 1, the original uri is typed but we redirect from it, so first option will discard A. The targer uri B will instead be discarded by onlyTyped option since it has not been typed. So we end up not showing both A and B.\n\npossible solutions:\n1. when a typed page redirects mark redirected to as typed. This is easy but database is not consistent, user has not typed in B really.\n\n2. if a redirected-from page has empty title set it to target one. This does not fix uri, uriA is not what the user see when he visit the page, the same for favicon and we could still have wrong titles like \"redirecting...\".\n\n3. actually we use typed as a bool, we could change it to an int, typed = 1 means a page has been typed in, typed = 2 means a page is a redirect from a typed in url. So when both options are excluding each other we could use WHERE typed IN (1,2) and we have consistent data in the db. The problem is that, since includeRedirects = 0 would be the default, doing onlyTyped = 1 will get an uri we have not typed at all.\n\n4. ...", "tags": [], "creator": "mak@mozilla.com", "author": "mak@mozilla.com", "attachment_id": null, "count": 4, "text": "a problem:\n\nuser TYPES in url A that redirects to B (ideally we could have a bunch of redirects in the middle), what user see for real in the browser is TitleB and UriB, so imho we should try to hold the final target page in our views by default, that's because in-the-middle redirects could have wrong titles, and both uri and title are not what the user see in the browser.\nSuppose that we have a query with includeRedirects = 0 and onlyTyped = 1, the original uri is typed but we redirect from it, so first option will discard A. The targer uri B will instead be discarded by onlyTyped option since it has not been typed. So we end up not showing both A and B.\n\npossible solutions:\n1. when a typed page redirects mark redirected to as typed. This is easy but database is not consistent, user has not typed in B really.\n\n2. if a redirected-from page has empty title set it to target one. This does not fix uri, uriA is not what the user see when he visit the page, the same for favicon and we could still have wrong titles like \"redirecting...\".\n\n3. actually we use typed as a bool, we could change it to an int, typed = 1 means a page has been typed in, typed = 2 means a page is a redirect from a typed in url. So when both options are excluding each other we could use WHERE typed IN (1,2) and we have consistent data in the db. The problem is that, since includeRedirects = 0 would be the default, doing onlyTyped = 1 will get an uri we have not typed at all.\n\n4. ...", "creation_time": "2008-09-05T00:29:54Z"}, {"raw_text": "4. set typed = 2 for redirects from a typed in page, includeRedirects = 0 will discard all redirects maintaining the first typed page, and that will be the default behaviour, so no headache. We could instead introduce a new option resolveRedirects = 1 that will invert the behaviour maintaining the target redirects for UI purpose (in ui elements like most visited or history menu we should show uris/titles that the user has already seen in the main ui).\n\nresolveRedirects = 0 will retain typed = 1 pages, with wrong titles\nresolveRedirects = 1 will retain typed = 1,2 pages, with correct titles (but onlyTyped will also report uris redirects from a typed one)", "bug_id": 428690, "is_private": false, "time": "2008-09-05T09:50:33Z", "id": 3767759, "tags": [], "creator": "mak@mozilla.com", "creation_time": "2008-09-05T09:50:33Z", "attachment_id": null, "count": 5, "text": "4. set typed = 2 for redirects from a typed in page, includeRedirects = 0 will discard all redirects maintaining the first typed page, and that will be the default behaviour, so no headache. We could instead introduce a new option resolveRedirects = 1 that will invert the behaviour maintaining the target redirects for UI purpose (in ui elements like most visited or history menu we should show uris/titles that the user has already seen in the main ui).\n\nresolveRedirects = 0 will retain typed = 1 pages, with wrong titles\nresolveRedirects = 1 will retain typed = 1,2 pages, with correct titles (but onlyTyped will also report uris redirects from a typed one)", "author": "mak@mozilla.com"}, {"raw_text": "first take, support includeRedirects and resolveRedirects. for now it works only for history queries, and still don't have support for typed only pages.\nThe test unit executes a matrix of tests mixing up options and looking if we get consistent transition types and number of results.\nNext step is adding a onlyTyped option.", "bug_id": 428690, "creator": "mak@mozilla.com", "id": 3781581, "time": "2008-09-16T14:25:32Z", "is_private": false, "creation_time": "2008-09-16T14:25:32Z", "author": "mak@mozilla.com", "attachment_id": 338859, "count": 6, "text": "Created attachment 338859\nwip 0.1\n\nfirst take, support includeRedirects and resolveRedirects. for now it works only for history queries, and still don't have support for typed only pages.\nThe test unit executes a matrix of tests mixing up options and looking if we get consistent transition types and number of results.\nNext step is adding a onlyTyped option.", "tags": []}, {"tags": [], "is_private": false, "id": 3784456, "time": "2008-09-18T14:07:43Z", "bug_id": 428690, "raw_text": "added support for onlyTyped and managed resolveRedirects in this case.\nagain this is only supported by history queries for now.\n\nI must tell this makes the history menu and Most Visited much cleaner", "author": "mak@mozilla.com", "attachment_id": 339246, "text": "Created attachment 339246\nwip 0.2\n\nadded support for onlyTyped and managed resolveRedirects in this case.\nagain this is only supported by history queries for now.\n\nI must tell this makes the history menu and Most Visited much cleaner", "count": 7, "creation_time": "2008-09-18T14:07:43Z", "creator": "mak@mozilla.com"}, {"bug_id": 428690, "raw_text": "applied to Most Visited (attachment in bug 420446): https://bugzilla.mozilla.org/attachment.cgi?id=339247", "id": 3784469, "time": "2008-09-18T14:22:04Z", "is_private": false, "tags": [], "creator": "mak@mozilla.com", "creation_time": "2008-09-18T14:22:04Z", "author": "mak@mozilla.com", "count": 8, "attachment_id": null, "text": "applied to Most Visited (attachment in bug 420446): https://bugzilla.mozilla.org/attachment.cgi?id=339247"}, {"creator": "brade@comcast.net", "attachment_id": null, "text": "Seeking blocking status for Firefox 3.1.\n\nThis bug negatively impacts the \"Most Visited\" feature.  Other people have shared their frustrations with me that they see duplicate entries in the menu.  This problem is fairly common because many people type \"cnn.com\" in the URL bar which redirects to \"www.cnn.com\".", "count": 9, "author": "brade@comcast.net", "creation_time": "2008-11-05T15:38:28Z", "time": "2008-11-05T15:38:28Z", "id": 3841897, "is_private": false, "raw_text": "Seeking blocking status for Firefox 3.1.\n\nThis bug negatively impacts the \"Most Visited\" feature.  Other people have shared their frustrations with me that they see duplicate entries in the menu.  This problem is fairly common because many people type \"cnn.com\" in the URL bar which redirects to \"www.cnn.com\".", "bug_id": 428690, "tags": []}, {"creation_time": "2008-11-07T15:55:05Z", "attachment_id": null, "text": "instead of using typed = 2 we could define the old referrer column in moz_historyvisits, that would allow to check back if we come from typed without recursion (would be slower though)", "count": 10, "author": "mak@mozilla.com", "tags": [], "creator": "mak@mozilla.com", "raw_text": "instead of using typed = 2 we could define the old referrer column in moz_historyvisits, that would allow to check back if we come from typed without recursion (would be slower though)", "bug_id": 428690, "time": "2008-11-07T15:55:05Z", "id": 3845227, "is_private": false}, {"creator": "mak@mozilla.com", "text": "*** Bug 421852 has been marked as a duplicate of this bug. ***", "attachment_id": null, "count": 11, "author": "mak@mozilla.com", "creation_time": "2008-11-13T00:25:05Z", "is_private": false, "time": "2008-11-13T00:25:05Z", "id": 3852757, "raw_text": "", "bug_id": 428690, "tags": []}, {"tags": [], "raw_text": "really would like to see this for 3.1. what's left to figure out here?", "bug_id": 428690, "is_private": false, "time": "2009-01-13T19:14:15Z", "id": 3928564, "creation_time": "2009-01-13T19:14:15Z", "attachment_id": null, "text": "really would like to see this for 3.1. what's left to figure out here?", "count": 12, "author": "hzbz@pm.me", "creator": "hzbz@pm.me"}, {"creator": "mak@mozilla.com", "text": "i would say the remaining part is \"convert it to the temp table era\", and discard onlyTyped changes since i think we should rethink those better (option to query based on transition type and a better history table).\nI'll try to unbitrot this in the next days.", "count": 13, "attachment_id": null, "author": "mak@mozilla.com", "creation_time": "2009-01-13T19:20:52Z", "is_private": false, "time": "2009-01-13T19:20:52Z", "id": 3928579, "raw_text": "i would say the remaining part is \"convert it to the temp table era\", and discard onlyTyped changes since i think we should rethink those better (option to query based on transition type and a better history table).\nI'll try to unbitrot this in the next days.", "bug_id": 428690, "tags": []}, {"tags": [], "author": "mak@mozilla.com", "attachment_id": 358079, "count": 14, "text": "Created attachment 358079\nwip 0.3\n\nmoving to a single redirectsMode option (and leaving out onlyTyped for now, since i really prefer having a way to query the transition type, that we can eventually optimize later when building the queries).\n\nI'm still not sure if we should change the default behaviour from the actual one where we show everything... hwv finally it should be configurable...\nalso for 3.2 would be better moving placesQueryBuilder to its own file and clean it up somehow if possible, will most likely file a followup for it.", "creation_time": "2009-01-22T00:11:46Z", "is_private": false, "id": 3939648, "time": "2009-01-22T00:11:46Z", "bug_id": 428690, "creator": "mak@mozilla.com", "raw_text": "moving to a single redirectsMode option (and leaving out onlyTyped for now, since i really prefer having a way to query the transition type, that we can eventually optimize later when building the queries).\n\nI'm still not sure if we should change the default behaviour from the actual one where we show everything... hwv finally it should be configurable...\nalso for 3.2 would be better moving placesQueryBuilder to its own file and clean it up somehow if possible, will most likely file a followup for it."}, {"tags": [], "bug_id": 428690, "raw_text": "per irc the options should be:\nREDIRECTS_MODE_SOURCE: show only sources\nREDIRECTS_MODE_TARGET: show only targets\nREDIRECTS_MODE_ALL: show both (default, like it is now, let's see in future)", "time": "2009-01-22T00:37:12Z", "id": 3939690, "is_private": false, "creation_time": "2009-01-22T00:37:12Z", "count": 15, "attachment_id": null, "text": "per irc the options should be:\nREDIRECTS_MODE_SOURCE: show only sources\nREDIRECTS_MODE_TARGET: show only targets\nREDIRECTS_MODE_ALL: show both (default, like it is now, let's see in future)", "author": "mak@mozilla.com", "creator": "mak@mozilla.com"}, {"tags": [], "id": 3940570, "time": "2009-01-22T16:24:22Z", "is_private": false, "raw_text": "all of the above, needs a deeper test since the actual one is only counting results.\nFixed smart query and updated smart bookmarks version (this is the first time we do), added the new option to the new serialization test, updated constants and new default.", "bug_id": 428690, "author": "mak@mozilla.com", "count": 16, "text": "Created attachment 358184\nwip 0.4\n\nall of the above, needs a deeper test since the actual one is only counting results.\nFixed smart query and updated smart bookmarks version (this is the first time we do), added the new option to the new serialization test, updated constants and new default.", "attachment_id": 358184, "creation_time": "2009-01-22T16:24:22Z", "creator": "mak@mozilla.com"}, {"tags": [], "attachment_id": 360400, "count": 17, "text": "Created attachment 360400\npatch v1.0\n\nAll of the above, and a dedicated unit test!", "author": "mak@mozilla.com", "creation_time": "2009-02-03T23:59:14Z", "is_private": false, "time": "2009-02-03T23:59:14Z", "id": 3958535, "creator": "mak@mozilla.com", "raw_text": "All of the above, and a dedicated unit test!", "bug_id": 428690}, {"creation_time": "2009-03-13T18:13:22Z", "count": 18, "text": "Comment on attachment 360400\npatch v1.0\n\n\n>+  },\n>+  // redirectsMode\n>+  {\n>+    property: \"redirectsMode\",\n>+    desc:     \"nsINavHistoryQueryOptions.redirectsMode\",\n>+    matches:  simplePropertyMatches,\n>+    runs:     [\n>+      function (aQuery, aQueryOptions) {\n>+        aQueryOptions.redirectsMode = aQueryOptions.REDIRECTS_MODE_ALL;\n>+      },\n>+      function (aQuery, aQueryOptions) {\n>+        aQueryOptions.redirectsMode = aQueryOptions.REDIRECTS_MODE_TARGET;\n>+      }\n>+    ]\n>+  },\n> ];\n\nwhy only 2 of the 3 states?\n\n> \n> ///////////////////////////////////////////////////////////////////////////////\n> \n> /**\n>  * Enumerates all the sequences of the cartesian product of the arrays contained\n>  * in aSequences.  Examples:\n>  *\n>diff --git a/toolkit/components/places/tests/queries/test_redirectsMode.js b/toolkit/components/places/tests/queries/test_redirectsMode.js\n>new file mode 100644\n>--- /dev/null\n>+++ b/toolkit/components/places/tests/queries/test_redirectsMode.js\n>@@ -0,0 +1,268 @@\n>+/* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */\n>+/* vim:set ts=2 sw=2 sts=2 et: */\n>+/* ***** BEGIN LICENSE BLOCK *****\n>+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1\n>+ *\n>+ * The contents of this file are subject to the Mozilla Public License Version\n>+ * 1.1 (the \"License\"); you may not use this file except in compliance with\n>+ * the License. You may obtain a copy of the License at\n>+ * http://www.mozilla.org/MPL/\n>+ *\n>+ * Software distributed under the License is distributed on an \"AS IS\" basis,\n>+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n>+ * for the specific language governing rights and limitations under the\n>+ * License.\n>+ *\n>+ * The Original Code is Places Test Code.\n>+ *\n>+ * The Initial Developer of the Original Code is Mozilla Corporation\n>+ * Portions created by the Initial Developer are Copyright (C) 2009\n>+ * the Initial Developer. All Rights Reserved.\n>+ *\n>+ * Contributor(s):\n>+ *   Marco Bonardo <mak77@bonardo.net> (Original Author)\n>+ *\n>+ * Alternatively, the contents of this file may be used under the terms of\n>+ * either the GNU General Public License Version 2 or later (the \"GPL\"), or\n>+ * the GNU Lesser General Public License Version 2.1 or later (the \"LGPL\"),\n>+ * in which case the provisions of the GPL or the LGPL are applicable instead\n>+ * of those above. If you wish to allow use of your version of this file only\n>+ * under the terms of either the GPL or the LGPL, and not to allow others to\n>+ * use your version of this file under the terms of the MPL, indicate your\n>+ * decision by deleting the provisions above and replace them with the notice\n>+ * and other provisions required by the GPL or the LGPL. If you do not delete\n>+ * the provisions above, a recipient may use your version of this file under\n>+ * the terms of any one of the MPL, the GPL or the LGPL.\n>+ *\n>+ * ***** END LICENSE BLOCK ***** */\n>+\n>+// Array of visits we will add to the database, will be populated later\n>+// in the test.\n>+let visits = [];\n>+\n>+/**\n>+ * Gets a sequence of query options, and compare query results obtained throgh\n>+ * them with a custom filtered array of visits, based on the values we are\n>+ * expecting from the query.\n\ns/Gets/Takes/\ns/throgh/through/\n\nr=me otherwise", "attachment_id": 360400, "author": "hzbz@pm.me", "creator": "hzbz@pm.me", "tags": [], "bug_id": 428690, "raw_text": "\n>+  },\n>+  // redirectsMode\n>+  {\n>+    property: \"redirectsMode\",\n>+    desc:     \"nsINavHistoryQueryOptions.redirectsMode\",\n>+    matches:  simplePropertyMatches,\n>+    runs:     [\n>+      function (aQuery, aQueryOptions) {\n>+        aQueryOptions.redirectsMode = aQueryOptions.REDIRECTS_MODE_ALL;\n>+      },\n>+      function (aQuery, aQueryOptions) {\n>+        aQueryOptions.redirectsMode = aQueryOptions.REDIRECTS_MODE_TARGET;\n>+      }\n>+    ]\n>+  },\n> ];\n\nwhy only 2 of the 3 states?\n\n> \n> ///////////////////////////////////////////////////////////////////////////////\n> \n> /**\n>  * Enumerates all the sequences of the cartesian product of the arrays contained\n>  * in aSequences.  Examples:\n>  *\n>diff --git a/toolkit/components/places/tests/queries/test_redirectsMode.js b/toolkit/components/places/tests/queries/test_redirectsMode.js\n>new file mode 100644\n>--- /dev/null\n>+++ b/toolkit/components/places/tests/queries/test_redirectsMode.js\n>@@ -0,0 +1,268 @@\n>+/* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */\n>+/* vim:set ts=2 sw=2 sts=2 et: */\n>+/* ***** BEGIN LICENSE BLOCK *****\n>+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1\n>+ *\n>+ * The contents of this file are subject to the Mozilla Public License Version\n>+ * 1.1 (the \"License\"); you may not use this file except in compliance with\n>+ * the License. You may obtain a copy of the License at\n>+ * http://www.mozilla.org/MPL/\n>+ *\n>+ * Software distributed under the License is distributed on an \"AS IS\" basis,\n>+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n>+ * for the specific language governing rights and limitations under the\n>+ * License.\n>+ *\n>+ * The Original Code is Places Test Code.\n>+ *\n>+ * The Initial Developer of the Original Code is Mozilla Corporation\n>+ * Portions created by the Initial Developer are Copyright (C) 2009\n>+ * the Initial Developer. All Rights Reserved.\n>+ *\n>+ * Contributor(s):\n>+ *   Marco Bonardo <mak77@bonardo.net> (Original Author)\n>+ *\n>+ * Alternatively, the contents of this file may be used under the terms of\n>+ * either the GNU General Public License Version 2 or later (the \"GPL\"), or\n>+ * the GNU Lesser General Public License Version 2.1 or later (the \"LGPL\"),\n>+ * in which case the provisions of the GPL or the LGPL are applicable instead\n>+ * of those above. If you wish to allow use of your version of this file only\n>+ * under the terms of either the GPL or the LGPL, and not to allow others to\n>+ * use your version of this file under the terms of the MPL, indicate your\n>+ * decision by deleting the provisions above and replace them with the notice\n>+ * and other provisions required by the GPL or the LGPL. If you do not delete\n>+ * the provisions above, a recipient may use your version of this file under\n>+ * the terms of any one of the MPL, the GPL or the LGPL.\n>+ *\n>+ * ***** END LICENSE BLOCK ***** */\n>+\n>+// Array of visits we will add to the database, will be populated later\n>+// in the test.\n>+let visits = [];\n>+\n>+/**\n>+ * Gets a sequence of query options, and compare query results obtained throgh\n>+ * them with a custom filtered array of visits, based on the values we are\n>+ * expecting from the query.\n\ns/Gets/Takes/\ns/throgh/through/\n\nr=me otherwise", "time": "2009-03-13T18:13:22Z", "id": 4015182, "is_private": false}, {"author": "mak@mozilla.com", "text": "Created attachment 367600\npatch v1.1\n\naddressed comments, fixed a minor problem in head_queries so all unit tests run correctly. This should be ready to land.", "count": 19, "attachment_id": 367600, "creation_time": "2009-03-16T15:42:23Z", "creator": "mak@mozilla.com", "tags": [], "id": 4018140, "time": "2009-03-16T15:42:23Z", "is_private": false, "bug_id": 428690, "raw_text": "addressed comments, fixed a minor problem in head_queries so all unit tests run correctly. This should be ready to land."}, {"creation_time": "2009-03-17T21:09:47Z", "author": "mak@mozilla.com", "count": 20, "text": "http://hg.mozilla.org/mozilla-central/rev/e743e00363e3", "attachment_id": null, "tags": [], "bug_id": 428690, "creator": "mak@mozilla.com", "raw_text": "http://hg.mozilla.org/mozilla-central/rev/e743e00363e3", "id": 4020577, "time": "2009-03-17T21:09:47Z", "is_private": false}, {"bug_id": 428690, "raw_text": "asking approval allows us to have a better history menu and a better \"most visited\". medium risk, has tests. the only regression found has a patch and tests.", "is_private": false, "id": 4034482, "time": "2009-03-27T09:31:14Z", "tags": [], "creator": "mak@mozilla.com", "creation_time": "2009-03-27T09:31:14Z", "author": "mak@mozilla.com", "attachment_id": 367600, "count": 21, "text": "Comment on attachment 367600\npatch v1.1\n\nasking approval allows us to have a better history menu and a better \"most visited\". medium risk, has tests. the only regression found has a patch and tests."}, {"raw_text": "Is there any reason this was limited to history and not used for the awesome bar results too? I can easily get multiple entries from redirects in the awesome bar results.", "bug_id": 428690, "id": 4049367, "time": "2009-04-07T15:58:43Z", "is_private": false, "tags": [], "creator": "mark.finkle@gmail.com", "creation_time": "2009-04-07T15:58:43Z", "author": "mark.finkle@gmail.com", "count": 22, "attachment_id": null, "text": "Is there any reason this was limited to history and not used for the awesome bar results too? I can easily get multiple entries from redirects in the awesome bar results."}, {"creation_time": "2009-04-07T23:57:03Z", "author": "mak@mozilla.com", "attachment_id": null, "text": "because those are completely different code paths, iirc there's already a bug filed for the location bar component.", "count": 23, "creator": "mak@mozilla.com", "tags": [], "bug_id": 428690, "raw_text": "because those are completely different code paths, iirc there's already a bug filed for the location bar component.", "is_private": false, "id": 4050405, "time": "2009-04-07T23:57:03Z"}, {"creation_time": "2009-04-09T14:58:17Z", "author": "mbeltzner@gmail.com", "attachment_id": null, "count": 24, "text": "I apparently can't take this without bug 484263, which is not nominated for approval - any reason for that? Also, what's the compatibility-hit here and in that other bug for add-ons and such?", "creator": "mbeltzner@gmail.com", "tags": [], "raw_text": "I apparently can't take this without bug 484263, which is not nominated for approval - any reason for that? Also, what's the compatibility-hit here and in that other bug for add-ons and such?", "bug_id": 428690, "is_private": false, "id": 4052643, "time": "2009-04-09T14:58:17Z"}, {"creator": "mak@mozilla.com", "attachment_id": null, "count": 25, "text": "yes bug 484263 is needed to avoid recreating smart bookmarks when they are upgraded if the user has deleted them(this patch upgrades smart bookmarks version), there's no reason for it to not be approved with this (i'll nominate it), bug 484263 has no impact on add-ons.\n\nImpact of this bug on add-ons is only the uuid change (so hitting binary components, not standard add-ons). This adds a new option, but has been built to not change old results.", "author": "mak@mozilla.com", "creation_time": "2009-04-09T15:08:32Z", "time": "2009-04-09T15:08:32Z", "id": 4052659, "is_private": false, "raw_text": "yes bug 484263 is needed to avoid recreating smart bookmarks when they are upgraded if the user has deleted them(this patch upgrades smart bookmarks version), there's no reason for it to not be approved with this (i'll nominate it), bug 484263 has no impact on add-ons.\n\nImpact of this bug on add-ons is only the uuid change (so hitting binary components, not standard add-ons). This adds a new option, but has been built to not change old results.", "bug_id": 428690, "tags": []}, {"creator": "sdwilsh@forerunnerdesigns.com", "author": "sdwilsh@forerunnerdesigns.com", "attachment_id": null, "text": "(In reply to comment #25)\n> Impact of this bug on add-ons is only the uuid change (so hitting binary\n> components, not standard add-ons). This adds a new option, but has been built\n> to not change old results.\nIt's not just a uuid change, it also adds an attribute.  If you want this on branch, you should do what I did in bug 468305.", "count": 26, "creation_time": "2009-04-09T15:19:24Z", "id": 4052672, "time": "2009-04-09T15:19:24Z", "is_private": false, "bug_id": 428690, "raw_text": "(In reply to comment #25)\n> Impact of this bug on add-ons is only the uuid change (so hitting binary\n> components, not standard add-ons). This adds a new option, but has been built\n> to not change old results.\nIt's not just a uuid change, it also adds an attribute.  If you want this on branch, you should do what I did in bug 468305.", "tags": []}, {"text": "...(which I'm not sure if this is worth doing that on branch)", "count": 27, "attachment_id": null, "author": "sdwilsh@forerunnerdesigns.com", "creation_time": "2009-04-09T15:19:53Z", "creator": "sdwilsh@forerunnerdesigns.com", "tags": [], "time": "2009-04-09T15:19:53Z", "id": 4052673, "is_private": false, "raw_text": "...(which I'm not sure if this is worth doing that on branch)", "bug_id": 428690}, {"attachment_id": null, "text": "adding a special interface just for removing a couple entries from a menu is not worth doing unless bug is a blocker.\n\nShawn: what's the impact of a new attribute on old implementers who does not even know about it and that does not change the behavior of old queries (the default value is the old behavior)?\nI think the evaluation point is more around the uuid change, i don't know the number of binary components who implement a place query, but i suppose is quite low (i don't have access to addons mxr to look for the uuid)", "count": 28, "author": "mak@mozilla.com", "creation_time": "2009-04-09T15:29:30Z", "creator": "mak@mozilla.com", "tags": [], "is_private": false, "time": "2009-04-09T15:29:30Z", "id": 4052687, "raw_text": "adding a special interface just for removing a couple entries from a menu is not worth doing unless bug is a blocker.\n\nShawn: what's the impact of a new attribute on old implementers who does not even know about it and that does not change the behavior of old queries (the default value is the old behavior)?\nI think the evaluation point is more around the uuid change, i don't know the number of binary components who implement a place query, but i suppose is quite low (i don't have access to addons mxr to look for the uuid)", "bug_id": 428690}, {"attachment_id": null, "text": "(In reply to comment #28)\n> adding a special interface just for removing a couple entries from a menu is\n> not worth doing unless bug is a blocker.\nhence comment 27\n\n> Shawn: what's the impact of a new attribute on old implementers who does not\n> even know about it and that does not change the behavior of old queries (the\n> default value is the old behavior)?\n> I think the evaluation point is more around the uuid change, i don't know the\n> number of binary components who implement a place query, but i suppose is quite\n> low (i don't have access to addons mxr to look for the uuid)\nIt changes the vtable, so they'll be totally broken (binary components only).", "count": 29, "author": "sdwilsh@forerunnerdesigns.com", "tags": [], "creation_time": "2009-04-09T15:48:50Z", "time": "2009-04-09T15:48:50Z", "id": 4052709, "is_private": false, "creator": "sdwilsh@forerunnerdesigns.com", "bug_id": 428690, "raw_text": "(In reply to comment #28)\n> adding a special interface just for removing a couple entries from a menu is\n> not worth doing unless bug is a blocker.\nhence comment 27\n\n> Shawn: what's the impact of a new attribute on old implementers who does not\n> even know about it and that does not change the behavior of old queries (the\n> default value is the old behavior)?\n> I think the evaluation point is more around the uuid change, i don't know the\n> number of binary components who implement a place query, but i suppose is quite\n> low (i don't have access to addons mxr to look for the uuid)\nIt changes the vtable, so they'll be totally broken (binary components only)."}, {"time": "2009-04-10T10:10:07Z", "id": 4054018, "is_private": false, "creator": "mak@mozilla.com", "raw_text": "Clearing approval, looks like this has made history menu query slower. So i prefer not taking this till we have a better query.", "bug_id": 428690, "count": 30, "attachment_id": 367600, "text": "Comment on attachment 367600\npatch v1.1\n\nClearing approval, looks like this has made history menu query slower. So i prefer not taking this till we have a better query.", "author": "mak@mozilla.com", "tags": [], "creation_time": "2009-04-10T10:10:07Z"}, {"author": "mak@mozilla.com", "attachment_id": null, "count": 31, "text": "we have better query now, but this can't still make 3.5 due to idl changes, btw any perf issue on trunk is solved.", "tags": [], "creation_time": "2009-05-26T15:18:00Z", "id": 4115626, "time": "2009-05-26T15:18:00Z", "is_private": false, "bug_id": 428690, "raw_text": "we have better query now, but this can't still make 3.5 due to idl changes, btw any perf issue on trunk is solved.", "creator": "mak@mozilla.com"}, {"bug_id": 428690, "raw_text": "", "creator": "jo.hermans@gmail.com", "is_private": false, "time": "2009-05-31T17:25:03Z", "id": 4123325, "creation_time": "2009-05-31T17:25:03Z", "tags": [], "count": 32, "attachment_id": null, "text": "*** Bug 495698 has been marked as a duplicate of this bug. ***", "author": "jo.hermans@gmail.com"}, {"creator": "the.sheppy@gmail.com", "bug_id": 428690, "raw_text": "Updated the documentation here:\n\nhttps://developer.mozilla.org/en/nsINavHistoryQueryOptions", "id": 4276401, "time": "2009-09-01T00:09:30Z", "is_private": false, "creation_time": "2009-09-01T00:09:30Z", "author": "the.sheppy@gmail.com", "text": "Updated the documentation here:\n\nhttps://developer.mozilla.org/en/nsINavHistoryQueryOptions", "attachment_id": null, "count": 33, "tags": []}, {"author": "gerv@mozilla.org", "attachment_id": null, "text": "Bug 451915 - move Firefox/Places bugs to Firefox/Bookmarks and History. Remove all bugspam from this move by filtering for the string \"places-to-b-and-h\".\n\nIn Thunderbird 3.0b, you do that as follows:\nTools | Message Filters\nMake sure the correct account is selected. Click \"New\"\nConditions: Body   contains   places-to-b-and-h\nChange the action to \"Delete Message\".\nSelect \"Manually Run\" from the dropdown at the top.\nClick OK.\n\nSelect the filter in the list, make sure \"Inbox\" is selected at the bottom, and click \"Run Now\". This should delete all the bugspam. You can then delete the filter.\n\nGerv", "count": 34, "tags": [], "creation_time": "2009-11-26T14:25:40Z", "id": 4421969, "time": "2009-11-26T14:25:40Z", "is_private": false, "raw_text": "Bug 451915 - move Firefox/Places bugs to Firefox/Bookmarks and History. Remove all bugspam from this move by filtering for the string \"places-to-b-and-h\".\n\nIn Thunderbird 3.0b, you do that as follows:\nTools | Message Filters\nMake sure the correct account is selected. Click \"New\"\nConditions: Body   contains   places-to-b-and-h\nChange the action to \"Delete Message\".\nSelect \"Manually Run\" from the dropdown at the top.\nClick OK.\n\nSelect the filter in the list, make sure \"Inbox\" is selected at the bottom, and click \"Run Now\". This should delete all the bugspam. You can then delete the filter.\n\nGerv", "creator": "gerv@mozilla.org", "bug_id": 428690}, {"tags": [], "author": "pwd.mozilla@yahoo.co.uk", "text": "If Firefox wrongly marks something as a redirect, how do you get it to recognise it as a normal page again?", "attachment_id": null, "count": 35, "creation_time": "2010-03-15T13:00:01Z", "is_private": false, "id": 4584945, "time": "2010-03-15T13:00:01Z", "raw_text": "If Firefox wrongly marks something as a redirect, how do you get it to recognise it as a normal page again?", "bug_id": 428690, "creator": "pwd.mozilla@yahoo.co.uk"}, {"bug_id": 428690, "raw_text": "(In reply to comment #35)\n> If Firefox wrongly marks something as a redirect, how do you get it to\n> recognise it as a normal page again?\n\nFirefox does not wrongly marks something as a redirect. if it does it's a bug in channel implementation, the bug should have clear steps to reproduce and the link to the address that is wrongly interpreted.", "creator": "mak@mozilla.com", "is_private": false, "id": 4584948, "time": "2010-03-15T13:01:36Z", "creation_time": "2010-03-15T13:01:36Z", "tags": [], "author": "mak@mozilla.com", "count": 36, "attachment_id": null, "text": "(In reply to comment #35)\n> If Firefox wrongly marks something as a redirect, how do you get it to\n> recognise it as a normal page again?\n\nFirefox does not wrongly marks something as a redirect. if it does it's a bug in channel implementation, the bug should have clear steps to reproduce and the link to the address that is wrongly interpreted."}, {"raw_text": "Firefox has done so for me, I stayed at a hotel and it made you log in everytime you wanted to go online thus turning whatever page I went to into a redirect up until the point I logged in. Bug reported here: https://bugzilla.mozilla.org/show_bug.cgi?id=550750\n\nBut the original question stands, _IF_ Firefox incorrectly thinks something is a redirect, what do I need to do in order to undo it? There seems to be something in my places database that has been marked in which I seemingly have no access to. I'd really just like my Most Visited to work properly again.", "bug_id": 428690, "creator": "pwd.mozilla@yahoo.co.uk", "time": "2010-03-15T13:31:28Z", "id": 4584998, "is_private": false, "creation_time": "2010-03-15T13:31:28Z", "text": "Firefox has done so for me, I stayed at a hotel and it made you log in everytime you wanted to go online thus turning whatever page I went to into a redirect up until the point I logged in. Bug reported here: https://bugzilla.mozilla.org/show_bug.cgi?id=550750\n\nBut the original question stands, _IF_ Firefox incorrectly thinks something is a redirect, what do I need to do in order to undo it? There seems to be something in my places database that has been marked in which I seemingly have no access to. I'd really just like my Most Visited to work properly again.", "count": 37, "attachment_id": null, "author": "pwd.mozilla@yahoo.co.uk", "tags": []}, {"id": 4585008, "time": "2010-03-15T13:40:16Z", "is_private": false, "raw_text": "(In reply to comment #37)\n> Firefox has done so for me, I stayed at a hotel and it made you log in\n> everytime you wanted to go online thus turning whatever page I went to into a\n> redirect up until the point I logged in. Bug reported here:\n> https://bugzilla.mozilla.org/show_bug.cgi?id=550750\n\nok, this is an edge-case, that unfortunatly we don't handle. Firefox is not uncorrect here, since what you see IS a redirect, and there is no easy way to workaround it since we can't know if you're in an hotel or at home or what's the way you access the web in particular moments of the day. But i suppose you don't live in an hotel for all of your life, so the problem should be limited.\nThat said i'll confirm the bug you pointed at, the the discussion should proceed there. thanks.", "bug_id": 428690, "creator": "mak@mozilla.com", "author": "mak@mozilla.com", "count": 38, "text": "(In reply to comment #37)\n> Firefox has done so for me, I stayed at a hotel and it made you log in\n> everytime you wanted to go online thus turning whatever page I went to into a\n> redirect up until the point I logged in. Bug reported here:\n> https://bugzilla.mozilla.org/show_bug.cgi?id=550750\n\nok, this is an edge-case, that unfortunatly we don't handle. Firefox is not uncorrect here, since what you see IS a redirect, and there is no easy way to workaround it since we can't know if you're in an hotel or at home or what's the way you access the web in particular moments of the day. But i suppose you don't live in an hotel for all of your life, so the problem should be limited.\nThat said i'll confirm the bug you pointed at, the the discussion should proceed there. thanks.", "attachment_id": null, "tags": [], "creation_time": "2010-03-15T13:40:16Z"}]}}}