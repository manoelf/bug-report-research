{"comments": {}, "bugs": {"697789": {"comments": [{"raw_text": "User Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:7.0.1) Gecko/20100101 Firefox/7.0.1\nBuild ID: 20110928134238\n\nSteps to reproduce:\n\nThis occurs randomly.\n\n\nActual results:\n\nThunderbird constantly recreates a folder called \"#news^#news\" on my IMAP server with a Drafts mailbox inside it.  Each time I right-click and unsubscribe from it, it reappears within 24 hours.\n\n\nExpected results:\n\nThis folder should not appear at all.", "time": "2011-10-27T19:34:11Z", "bug_id": 697789, "id": 5809693, "count": 0, "text": "User Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:7.0.1) Gecko/20100101 Firefox/7.0.1\nBuild ID: 20110928134238\n\nSteps to reproduce:\n\nThis occurs randomly.\n\n\nActual results:\n\nThunderbird constantly recreates a folder called \"#news^#news\" on my IMAP server with a Drafts mailbox inside it.  Each time I right-click and unsubscribe from it, it reappears within 24 hours.\n\n\nExpected results:\n\nThis folder should not appear at all.", "author": "bigheadjer@gmail.com", "tags": [], "attachment_id": null, "is_private": false, "creation_time": "2011-10-27T19:34:11Z", "creator": "bigheadjer@gmail.com"}, {"id": 5809738, "bug_id": 697789, "author": "bigheadjer@gmail.com", "text": "Note appearance of this folder occurs with a popup error saying \"Error saving to Drafts folder.\"", "count": 1, "time": "2011-10-27T19:53:08Z", "raw_text": "Note appearance of this folder occurs with a popup error saying \"Error saving to Drafts folder.\"", "creation_time": "2011-10-27T19:53:08Z", "is_private": false, "creator": "bigheadjer@gmail.com", "tags": [], "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "wraithlike@gmail.com", "creation_time": "2011-10-29T07:56:01Z", "is_private": false, "time": "2011-10-29T07:56:01Z", "raw_text": "(In reply to Jeremy Tan from comment #1)\nCheck bug 517462.", "text": "(In reply to Jeremy Tan from comment #1)\nCheck bug 517462.", "count": 2, "author": "wraithlike@gmail.com", "bug_id": 697789, "id": 5813110}, {"time": "2011-10-30T03:15:31Z", "attachment_id": null, "raw_text": "(In reply to Jeremy Tan from comment #1)\n> Note appearance of this folder occurs with a popup error saying \"Error\n> saving to Drafts folder.\"\n\nCan you manually save mail as draft to folder which is set by you as \"folder to save draft mail\" at Copies&Folders setting of any identity(mail address which can be used as From: of composed mail)?", "tags": [], "creator": "m-wada@usa.com", "author": "m-wada@usa.com", "text": "(In reply to Jeremy Tan from comment #1)\n> Note appearance of this folder occurs with a popup error saying \"Error\n> saving to Drafts folder.\"\n\nCan you manually save mail as draft to folder which is set by you as \"folder to save draft mail\" at Copies&Folders setting of any identity(mail address which can be used as From: of composed mail)?", "count": 3, "bug_id": 697789, "id": 5813656, "creation_time": "2011-10-30T03:15:31Z", "is_private": false}, {"tags": [], "attachment_id": null, "is_private": false, "creation_time": "2011-10-31T13:12:46Z", "creator": "bigheadjer@gmail.com", "time": "2011-10-31T13:12:46Z", "raw_text": "(In reply to Hashem Masoud from comment #2)\n> (In reply to Jeremy Tan from comment #1)\n> Check bug 517462.\n\nWow, according to that, which links to bug 503735, this bug has been around since 2009!", "id": 5814919, "bug_id": 697789, "author": "bigheadjer@gmail.com", "text": "(In reply to Hashem Masoud from comment #2)\n> (In reply to Jeremy Tan from comment #1)\n> Check bug 517462.\n\nWow, according to that, which links to bug 503735, this bug has been around since 2009!", "count": 4}, {"id": 5814923, "bug_id": 697789, "creation_time": "2011-10-31T13:14:21Z", "is_private": false, "creator": "bigheadjer@gmail.com", "author": "bigheadjer@gmail.com", "count": 5, "text": "(In reply to WADA from comment #3)\n> Can you manually save mail as draft to folder which is set by you as \"folder\n> to save draft mail\" at Copies&Folders setting of any identity(mail address\n> which can be used as From: of composed mail)?\n\nWhen I manually save a draft email, it gets saved to the proper folder which I have set in Copies & Folders.  The popup error from comment 2 only occurs during autosaving it seems.", "tags": [], "time": "2011-10-31T13:14:21Z", "attachment_id": null, "raw_text": "(In reply to WADA from comment #3)\n> Can you manually save mail as draft to folder which is set by you as \"folder\n> to save draft mail\" at Copies&Folders setting of any identity(mail address\n> which can be used as From: of composed mail)?\n\nWhen I manually save a draft email, it gets saved to the proper folder which I have set in Copies & Folders.  The popup error from comment 2 only occurs during autosaving it seems."}, {"raw_text": "(In reply to Jeremy Tan from comment #0)\n> Thunderbird constantly recreates a folder called \"#news^#news\"\n> on my IMAP server with a Drafts mailbox inside it.\n\nWhere was the \"#news\" originally come from?\nDid you create IMAP folder named \"#news\" once?\n\nSetting dependency to bug 720911 for ease of anlysis and tracking.", "time": "2012-02-09T10:49:40Z", "text": "(In reply to Jeremy Tan from comment #0)\n> Thunderbird constantly recreates a folder called \"#news^#news\"\n> on my IMAP server with a Drafts mailbox inside it.\n\nWhere was the \"#news\" originally come from?\nDid you create IMAP folder named \"#news\" once?\n\nSetting dependency to bug 720911 for ease of anlysis and tracking.", "count": 6, "author": "m-wada@usa.com", "id": 6046678, "bug_id": 697789, "attachment_id": null, "tags": [], "creator": "m-wada@usa.com", "creation_time": "2012-02-09T10:49:40Z", "is_private": false}, {"tags": [], "time": "2012-02-09T20:16:13Z", "raw_text": "No I never created it myself.  The first time it was created was when I ran Thunderbird for the first time to my IMAP server.\n\nI used to use two IMAP clients (one now, I had to stop using Thunderbird due to another bug), Apple Mail and Thunderbird.  Apple Mail never created any such folder, while each time I used Thundebird, the #news^news folder would get created on the IMAP server.  Now that I've stopped using Thunderbird, the folder no longer gets created randomly, so it's definitely Thunderbird that's causing this.", "attachment_id": null, "id": 6048144, "bug_id": 697789, "is_private": false, "creation_time": "2012-02-09T20:16:13Z", "creator": "bigheadjer@gmail.com", "count": 7, "text": "No I never created it myself.  The first time it was created was when I ran Thunderbird for the first time to my IMAP server.\n\nI used to use two IMAP clients (one now, I had to stop using Thunderbird due to another bug), Apple Mail and Thunderbird.  Apple Mail never created any such folder, while each time I used Thundebird, the #news^news folder would get created on the IMAP server.  Now that I've stopped using Thunderbird, the folder no longer gets created randomly, so it's definitely Thunderbird that's causing this.", "author": "bigheadjer@gmail.com"}, {"bug_id": 697789, "id": 6049082, "author": "m-wada@usa.com", "count": 8, "text": "(In reply to Jeremy Tan from comment #7)\n> No I never created it myself.  The first time it was created was when I ran\n> Thunderbird for the first time to my IMAP server.\n> I used to use two IMAP clients (one now, I had to stop using Thunderbird due\n> to another bug), Apple Mail and Thunderbird.  Apple Mail never created any\n> such folder, while each time I used Thundebird, the #news^news folder would\n> get created on the IMAP server.  Now that I've stopped using Thunderbird,\n> the folder no longer gets created randomly, so it's definitely Thunderbird\n> that's causing this.\n\nDid #news or folder whose name contains # already exist at IMAP server before start of Tb use?  \nIf actually created by Tb, which is actually created folder name at IMAP server by Tb wrongly?\n  #news^#news  (in comment #0)\n  #news^news   (in comment #7)\nOr #news, #news under #news, ^news under #news like one? (bug 720911)\n\nWhere the string of \"#news\" or \"#\" come from in your case?\nIs there \"#\" in profile directory path? (bug 725555)\nIs there \"#\" in folder/subfolder/newsgroup/feed name? (bug 720911)\nIs there \"#\" or \"#news\" in your prefs.js? (for example, #news in account's name)\n\n\"With a Drafts mailbox inside it\" indicates that garbled folder is perhaps created upon Drafts folder access. Did Drafts folder already exist at IMAP server before you started to use Tb?\n\nTb has issue of \"tries to access IMAP folder of account's label and creates it\". If account's label is #news and such problem happens, #news may be created. And once #news is created, bug 720911 surely occurs and problem of bug 720911 continues forever until garbled data is manually cleaned up.\nIf IMAP folder of account's label was created by Tb upon Drafts folder access, it's only when Drafts folder which is requested by Copies&Folders doesn't exist at IMAP server.\nAnd \"^\" in garbled folder name was seen only when namespace is used and delimiter is dot instead of slash.", "time": "2012-02-10T01:50:29Z", "raw_text": "(In reply to Jeremy Tan from comment #7)\n> No I never created it myself.  The first time it was created was when I ran\n> Thunderbird for the first time to my IMAP server.\n> I used to use two IMAP clients (one now, I had to stop using Thunderbird due\n> to another bug), Apple Mail and Thunderbird.  Apple Mail never created any\n> such folder, while each time I used Thundebird, the #news^news folder would\n> get created on the IMAP server.  Now that I've stopped using Thunderbird,\n> the folder no longer gets created randomly, so it's definitely Thunderbird\n> that's causing this.\n\nDid #news or folder whose name contains # already exist at IMAP server before start of Tb use?  \nIf actually created by Tb, which is actually created folder name at IMAP server by Tb wrongly?\n  #news^#news  (in comment #0)\n  #news^news   (in comment #7)\nOr #news, #news under #news, ^news under #news like one? (bug 720911)\n\nWhere the string of \"#news\" or \"#\" come from in your case?\nIs there \"#\" in profile directory path? (bug 725555)\nIs there \"#\" in folder/subfolder/newsgroup/feed name? (bug 720911)\nIs there \"#\" or \"#news\" in your prefs.js? (for example, #news in account's name)\n\n\"With a Drafts mailbox inside it\" indicates that garbled folder is perhaps created upon Drafts folder access. Did Drafts folder already exist at IMAP server before you started to use Tb?\n\nTb has issue of \"tries to access IMAP folder of account's label and creates it\". If account's label is #news and such problem happens, #news may be created. And once #news is created, bug 720911 surely occurs and problem of bug 720911 continues forever until garbled data is manually cleaned up.\nIf IMAP folder of account's label was created by Tb upon Drafts folder access, it's only when Drafts folder which is requested by Copies&Folders doesn't exist at IMAP server.\nAnd \"^\" in garbled folder name was seen only when namespace is used and delimiter is dot instead of slash.", "creation_time": "2012-02-10T01:50:29Z", "is_private": false, "creator": "m-wada@usa.com", "tags": [], "attachment_id": null}, {"creator": "m-wada@usa.com", "creation_time": "2012-02-10T04:00:05Z", "is_private": false, "attachment_id": null, "tags": [], "count": 9, "text": "\"With a Drafts mailbox inside it\" is simply a phenomenon after bug 720911.\n(i) Because \"#news^#news\" was created, bug 720911 occurs. So root == #news^#news.\n(ii) mail.identity.idX.draft_folder = imap://userName@hostname/Drafts\nBecause Root is changed to #news^#news, actual Drafts at IMAP server is /#news^#news/Drafts for Tb. So Tb can't find folder set in draft_folder.\n(iii) Because draft_folder is not found, Tb tries to create \"Drafts\" which is obtained from draft_folder setting upon draft save.\n(iv) Due to bug 720911, create is requested for /#news^#news/Drafts.\n(v) Because created folder is not \"Drafts\" which is specified in draft_folder, draft save fails.\n(vi) Even if #news^#news is manually unsubscribed/deleted, (iii)/(iv) occurs again sooner or later. \n\nAny problems after creation of \"#news^#news\" is dup of bug 720911.\nProblem in your case is \"Why/how the garbled IMAP folder was generated by Tb\".\nI guess problematic string is \"#news\" in your environment. And I suspect \"^\" in \"#news^#news\" is a result by \"delimiter=dot\" or \"namespace=Inbox. with delimiter=dot\".\n\nDo you still need to stop using Tb due to other problems?\nIf no, can you test with Tb?\nAfter \"manual cleanup of garbage by bug 720911\", Tb works as expected unless you intentionally create IMAP mail folder of \"# in folder name\".", "author": "m-wada@usa.com", "bug_id": 697789, "id": 6049236, "time": "2012-02-10T04:00:05Z", "raw_text": "\"With a Drafts mailbox inside it\" is simply a phenomenon after bug 720911.\n(i) Because \"#news^#news\" was created, bug 720911 occurs. So root == #news^#news.\n(ii) mail.identity.idX.draft_folder = imap://userName@hostname/Drafts\nBecause Root is changed to #news^#news, actual Drafts at IMAP server is /#news^#news/Drafts for Tb. So Tb can't find folder set in draft_folder.\n(iii) Because draft_folder is not found, Tb tries to create \"Drafts\" which is obtained from draft_folder setting upon draft save.\n(iv) Due to bug 720911, create is requested for /#news^#news/Drafts.\n(v) Because created folder is not \"Drafts\" which is specified in draft_folder, draft save fails.\n(vi) Even if #news^#news is manually unsubscribed/deleted, (iii)/(iv) occurs again sooner or later. \n\nAny problems after creation of \"#news^#news\" is dup of bug 720911.\nProblem in your case is \"Why/how the garbled IMAP folder was generated by Tb\".\nI guess problematic string is \"#news\" in your environment. And I suspect \"^\" in \"#news^#news\" is a result by \"delimiter=dot\" or \"namespace=Inbox. with delimiter=dot\".\n\nDo you still need to stop using Tb due to other problems?\nIf no, can you test with Tb?\nAfter \"manual cleanup of garbage by bug 720911\", Tb works as expected unless you intentionally create IMAP mail folder of \"# in folder name\"."}, {"author": "m-wada@usa.com", "count": 10, "text": "(In reply to Jeremy Tan from comment #7)\n> the #news^news(or #news^#news) folder would get created on the IMAP server.\n\nI could observe following IMAP log for \"# and ^ in folder name\" with Tb 9.0.1, with Gmail IMAP(# is allowed but ^ is not allowed in Gmail Label), by forcing namespace=\"#XYZ#/\".  \n> :imap.gmail.com:S-INBOX:ProcessCurrentURL:imap://yatter%2Eone%40gmail%2Ecom@imap.gmail.com:993/create%3E/%23XYZ%23%5ESent/AAA:  = currentUrl\n> :imap.gmail.com:S-INBOX:SendData: 9 create \"#XYZ#/#XYZ#^Sent/AAA\" \n> :imap.gmail.com:S-INBOX:CreateNewLineFromSocket: 9 NO [CANNOT] Folder name is not allowed. (Failure)\n\nFollowing data was generated in ...\\ImapMail\\imap.gmail.com.msf by Tb, as done in bug 720911.\n> <(80=1)(82=#XYZ#^Sent)(87=40404400)>\n\nOnce #XYZ#^Sent is generated in .msf file by bug 720911, creation request of root level AAA becomes creation request of #XYZ#^Sent/AAA, and if namespace=\"#XYZ#/\" is used, it is always changed to creation request of #XYZ#/#XYZ#^Sent/AAA.\n\nIf namespace of \"#news/\" or \"#news.\" is used by server, it should be shown as root level #news in Tb's folder pane.\nIs namespace used by your server? Do you set \"IMAP Directory: #news\" at Server Settings/Advanced?", "creator": "m-wada@usa.com", "is_private": false, "creation_time": "2012-02-10T09:21:03Z", "id": 6049548, "bug_id": 697789, "attachment_id": null, "raw_text": "(In reply to Jeremy Tan from comment #7)\n> the #news^news(or #news^#news) folder would get created on the IMAP server.\n\nI could observe following IMAP log for \"# and ^ in folder name\" with Tb 9.0.1, with Gmail IMAP(# is allowed but ^ is not allowed in Gmail Label), by forcing namespace=\"#XYZ#/\".  \n> :imap.gmail.com:S-INBOX:ProcessCurrentURL:imap://yatter%2Eone%40gmail%2Ecom@imap.gmail.com:993/create%3E/%23XYZ%23%5ESent/AAA:  = currentUrl\n> :imap.gmail.com:S-INBOX:SendData: 9 create \"#XYZ#/#XYZ#^Sent/AAA\" \n> :imap.gmail.com:S-INBOX:CreateNewLineFromSocket: 9 NO [CANNOT] Folder name is not allowed. (Failure)\n\nFollowing data was generated in ...\\ImapMail\\imap.gmail.com.msf by Tb, as done in bug 720911.\n> <(80=1)(82=#XYZ#^Sent)(87=40404400)>\n\nOnce #XYZ#^Sent is generated in .msf file by bug 720911, creation request of root level AAA becomes creation request of #XYZ#^Sent/AAA, and if namespace=\"#XYZ#/\" is used, it is always changed to creation request of #XYZ#/#XYZ#^Sent/AAA.\n\nIf namespace of \"#news/\" or \"#news.\" is used by server, it should be shown as root level #news in Tb's folder pane.\nIs namespace used by your server? Do you set \"IMAP Directory: #news\" at Server Settings/Advanced?", "time": "2012-02-10T09:21:03Z", "tags": []}, {"count": 11, "text": "(In reply to WADA from comment #8)\n> (In reply to Jeremy Tan from comment #7)\n> > No I never created it myself.  The first time it was created was when I ran\n> > Thunderbird for the first time to my IMAP server.\n> > I used to use two IMAP clients (one now, I had to stop using Thunderbird due\n> > to another bug), Apple Mail and Thunderbird.  Apple Mail never created any\n> > such folder, while each time I used Thundebird, the #news^news folder would\n> > get created on the IMAP server.  Now that I've stopped using Thunderbird,\n> > the folder no longer gets created randomly, so it's definitely Thunderbird\n> > that's causing this.\n> \n> Did #news or folder whose name contains # already exist at IMAP server\n> before start of Tb use?  \n\nNo it did not exist until after I started using Tb.\n\n> If actually created by Tb, which is actually created folder name at IMAP\n> server by Tb wrongly?\n>   #news^#news  (in comment #0)\n>   #news^news   (in comment #7)\n> Or #news, #news under #news, ^news under #news like one? (bug 720911)\n\nSorry for the confusion, it was #news^#news.\n\n> Where the string of \"#news\" or \"#\" come from in your case?\n> Is there \"#\" in profile directory path? (bug 725555)\n\nYes.\n\n> Is there \"#\" in folder/subfolder/newsgroup/feed name? (bug 720911)\n> Is there \"#\" or \"#news\" in your prefs.js? (for example, #news in account's\n> name)\n\nYes they appear here:\n\nuser_pref(\"mail.server.server1.namespace.personal\", \"\\\"#mh/\\\",\\\"#mhinbox\\\",\\\"\\\"\");\nuser_pref(\"mail.server.server1.namespace.public\", \"\\\"#public/\\\",\\\"#news.\\\",\\\"#ftp/\\\",\\\"#shared/\\\"\");\n\nHowever, I did not add them myself.\n\n> \"With a Drafts mailbox inside it\" indicates that garbled folder is perhaps\n> created upon Drafts folder access. Did Drafts folder already exist at IMAP\n> server before you started to use Tb?\n\nNo, the Drafts folder did not exist within #news^#news, it existed in my mail subdirectory on the server.", "author": "bigheadjer@gmail.com", "id": 6050566, "bug_id": 697789, "raw_text": "(In reply to WADA from comment #8)\n> (In reply to Jeremy Tan from comment #7)\n> > No I never created it myself.  The first time it was created was when I ran\n> > Thunderbird for the first time to my IMAP server.\n> > I used to use two IMAP clients (one now, I had to stop using Thunderbird due\n> > to another bug), Apple Mail and Thunderbird.  Apple Mail never created any\n> > such folder, while each time I used Thundebird, the #news^news folder would\n> > get created on the IMAP server.  Now that I've stopped using Thunderbird,\n> > the folder no longer gets created randomly, so it's definitely Thunderbird\n> > that's causing this.\n> \n> Did #news or folder whose name contains # already exist at IMAP server\n> before start of Tb use?  \n\nNo it did not exist until after I started using Tb.\n\n> If actually created by Tb, which is actually created folder name at IMAP\n> server by Tb wrongly?\n>   #news^#news  (in comment #0)\n>   #news^news   (in comment #7)\n> Or #news, #news under #news, ^news under #news like one? (bug 720911)\n\nSorry for the confusion, it was #news^#news.\n\n> Where the string of \"#news\" or \"#\" come from in your case?\n> Is there \"#\" in profile directory path? (bug 725555)\n\nYes.\n\n> Is there \"#\" in folder/subfolder/newsgroup/feed name? (bug 720911)\n> Is there \"#\" or \"#news\" in your prefs.js? (for example, #news in account's\n> name)\n\nYes they appear here:\n\nuser_pref(\"mail.server.server1.namespace.personal\", \"\\\"#mh/\\\",\\\"#mhinbox\\\",\\\"\\\"\");\nuser_pref(\"mail.server.server1.namespace.public\", \"\\\"#public/\\\",\\\"#news.\\\",\\\"#ftp/\\\",\\\"#shared/\\\"\");\n\nHowever, I did not add them myself.\n\n> \"With a Drafts mailbox inside it\" indicates that garbled folder is perhaps\n> created upon Drafts folder access. Did Drafts folder already exist at IMAP\n> server before you started to use Tb?\n\nNo, the Drafts folder did not exist within #news^#news, it existed in my mail subdirectory on the server.", "time": "2012-02-10T17:47:34Z", "creator": "bigheadjer@gmail.com", "creation_time": "2012-02-10T17:47:34Z", "is_private": false, "attachment_id": null, "tags": []}, {"is_private": false, "creation_time": "2012-02-10T17:49:24Z", "bug_id": 697789, "id": 6050575, "text": "(In reply to WADA from comment #9)\n> Do you still need to stop using Tb due to other problems?\n\nYes I can't use Tb right now because of https://bugzilla.mozilla.org/show_bug.cgi?id=413240.\n\n> If no, can you test with Tb?\n> After \"manual cleanup of garbage by bug 720911\", Tb works as expected unless\n> you intentionally create IMAP mail folder of \"# in folder name\".\n\nOnce that bug gets resolved I will test this as well.", "count": 12, "author": "bigheadjer@gmail.com", "creator": "bigheadjer@gmail.com", "tags": [], "raw_text": "(In reply to WADA from comment #9)\n> Do you still need to stop using Tb due to other problems?\n\nYes I can't use Tb right now because of https://bugzilla.mozilla.org/show_bug.cgi?id=413240.\n\n> If no, can you test with Tb?\n> After \"manual cleanup of garbage by bug 720911\", Tb works as expected unless\n> you intentionally create IMAP mail folder of \"# in folder name\".\n\nOnce that bug gets resolved I will test this as well.", "attachment_id": null, "time": "2012-02-10T17:49:24Z"}, {"attachment_id": null, "tags": [], "creator": "m-wada@usa.com", "is_private": false, "creation_time": "2012-02-11T06:29:31Z", "raw_text": "(In reply to Jeremy Tan from comment #12)\n> Yes I can't use Tb right now because of bug 413240\n\nDoes bug 413240 occur on every mail send in your environment?\nIs sent mail actually saved in correct Sent folder upon every mail send but \"Copying to sent folder\" never disapppears upon every mail send?  \n(I can't imagine environment where bug 413240 occurs upon every mail send, because that bug can't be reproduced intentionally and occurs accidentaly.)\n> Bug 413240  : after sending message,\n> \"Copying to sent folder\" doesn't finish even after Save to Sent is successfull,\n> or zombie \"Copy complete\" is generated after successfull Save to Sent\nOr do you mean \"save mail to Sent after send always fails or is not executed always\"?\n\nIn both cases, it may be relevant to #XYZ#^Sent like one which is seen in my IMAP log.\n> create%3E/%23XYZ%23%5ESent/AAA:  = currentUrl\n> 9 create \"#XYZ#/#XYZ#^Sent/AAA\"\nI never did send operation nor \"copy to Sent folder\" operation. As for Sent folder, I merely opened Copies&Folders setting panel. This log indicates that Tb wrongly generates internal path for Sent folder requested at Copies&Folders setting.\n\nMain reason why you can't use Tb is bug 720911. Because \"#news^#news\" was already created once by Tb and its name is held in <servername>.msf, bug 720911 continues to occur forever until garbage by bug 720911 is manually cleaned up.\n\nThis bug's particularity: \nBecause \"#\" is used in Mbox name for namespace, folder of \"# in folder name\" is created sooner or later even if 'folder of \"# in folder name\" used as namespace' doesn't exist at server. So bug 720911 surely occurs always.\n(Note: \"folder used as namespace doesn't exist at server\" is usually called \"server configuration error\" in our country.)\n\nSo, we can say \"you can't use Tb due to this bug\".\n\n\"^\" in \"#news^#news\" and \"#XYZ#^Sent\" part is apparent Tb's actual bug found in this bug. This is different issue from bug 720911 although relevant.\nCan you get IMAP log of TB in your environment with new profile and one IMAP account only?\n\nBy the way, simplest workaround is \"no # in folder name\". Can you change server configuration?", "time": "2012-02-11T06:29:31Z", "author": "m-wada@usa.com", "count": 13, "text": "(In reply to Jeremy Tan from comment #12)\n> Yes I can't use Tb right now because of bug 413240\n\nDoes bug 413240 occur on every mail send in your environment?\nIs sent mail actually saved in correct Sent folder upon every mail send but \"Copying to sent folder\" never disapppears upon every mail send?  \n(I can't imagine environment where bug 413240 occurs upon every mail send, because that bug can't be reproduced intentionally and occurs accidentaly.)\n> Bug 413240  : after sending message,\n> \"Copying to sent folder\" doesn't finish even after Save to Sent is successfull,\n> or zombie \"Copy complete\" is generated after successfull Save to Sent\nOr do you mean \"save mail to Sent after send always fails or is not executed always\"?\n\nIn both cases, it may be relevant to #XYZ#^Sent like one which is seen in my IMAP log.\n> create%3E/%23XYZ%23%5ESent/AAA:  = currentUrl\n> 9 create \"#XYZ#/#XYZ#^Sent/AAA\"\nI never did send operation nor \"copy to Sent folder\" operation. As for Sent folder, I merely opened Copies&Folders setting panel. This log indicates that Tb wrongly generates internal path for Sent folder requested at Copies&Folders setting.\n\nMain reason why you can't use Tb is bug 720911. Because \"#news^#news\" was already created once by Tb and its name is held in <servername>.msf, bug 720911 continues to occur forever until garbage by bug 720911 is manually cleaned up.\n\nThis bug's particularity: \nBecause \"#\" is used in Mbox name for namespace, folder of \"# in folder name\" is created sooner or later even if 'folder of \"# in folder name\" used as namespace' doesn't exist at server. So bug 720911 surely occurs always.\n(Note: \"folder used as namespace doesn't exist at server\" is usually called \"server configuration error\" in our country.)\n\nSo, we can say \"you can't use Tb due to this bug\".\n\n\"^\" in \"#news^#news\" and \"#XYZ#^Sent\" part is apparent Tb's actual bug found in this bug. This is different issue from bug 720911 although relevant.\nCan you get IMAP log of TB in your environment with new profile and one IMAP account only?\n\nBy the way, simplest workaround is \"no # in folder name\". Can you change server configuration?", "bug_id": 697789, "id": 6052746}, {"author": "m-wada@usa.com", "count": 14, "text": "(In reply to Jeremy Tan from comment #11)\n> Yes they appear here:\n> user_pref(\"mail.server.server1.namespace.personal\",\n> \"\\\"#mh/\\\",\\\"#mhinbox\\\",\\\"\\\"\");\n> user_pref(\"mail.server.server1.namespace.public\",\n> \"\\\"#public/\\\",\\\"#news.\\\",\\\"#ftp/\\\",\\\"#shared/\\\"\");\n> However, I did not add them myself.\n\n(In reply to Jeremy Tan from comment #11)\n> Yes they appear here:\n> user_pref(\"mail.server.server1.namespace.personal\",\n> \"\\\"#mh/\\\",\\\"#mhinbox\\\",\\\"\\\"\");\n> user_pref(\"mail.server.server1.namespace.public\",\n> \"\\\"#public/\\\",\\\"#news.\\\",\\\"#ftp/\\\",\\\"#shared/\\\"\");\n> However, I did not add them myself.\n\nThese are writtten by Tb when NAMESPACE response is returned from IMAP server, when Server Settings/Advanced, \"Allow server to override these namespaces\" is Ckecked.\n(\"Checked\" is default, in order to use namespace requested by server)\n(\"Unchecked\" is for server of \"server doesn't support namespace command well but server requires namespace=Inbox. or Inbox/)\n\n> \\\"#news.\\\"\n\nIs delimier of \"/\" and \".\" intentionally mixed at server?\nOr it's Mbox named \"#news.\" which can hold mails but can't hold subfolder?", "bug_id": 697789, "id": 6052755, "time": "2012-02-11T06:50:28Z", "raw_text": "(In reply to Jeremy Tan from comment #11)\n> Yes they appear here:\n> user_pref(\"mail.server.server1.namespace.personal\",\n> \"\\\"#mh/\\\",\\\"#mhinbox\\\",\\\"\\\"\");\n> user_pref(\"mail.server.server1.namespace.public\",\n> \"\\\"#public/\\\",\\\"#news.\\\",\\\"#ftp/\\\",\\\"#shared/\\\"\");\n> However, I did not add them myself.\n\n(In reply to Jeremy Tan from comment #11)\n> Yes they appear here:\n> user_pref(\"mail.server.server1.namespace.personal\",\n> \"\\\"#mh/\\\",\\\"#mhinbox\\\",\\\"\\\"\");\n> user_pref(\"mail.server.server1.namespace.public\",\n> \"\\\"#public/\\\",\\\"#news.\\\",\\\"#ftp/\\\",\\\"#shared/\\\"\");\n> However, I did not add them myself.\n\nThese are writtten by Tb when NAMESPACE response is returned from IMAP server, when Server Settings/Advanced, \"Allow server to override these namespaces\" is Ckecked.\n(\"Checked\" is default, in order to use namespace requested by server)\n(\"Unchecked\" is for server of \"server doesn't support namespace command well but server requires namespace=Inbox. or Inbox/)\n\n> \\\"#news.\\\"\n\nIs delimier of \"/\" and \".\" intentionally mixed at server?\nOr it's Mbox named \"#news.\" which can hold mails but can't hold subfolder?", "creator": "m-wada@usa.com", "creation_time": "2012-02-11T06:50:28Z", "is_private": false, "attachment_id": null, "tags": []}, {"time": "2012-02-12T16:24:37Z", "raw_text": "(In reply to WADA from comment #13)\n> (In reply to Jeremy Tan from comment #12)\n> > Yes I can't use Tb right now because of bug 413240\n> \n> Does bug 413240 occur on every mail send in your environment?\n\nWhen I stopped using it, yes it was occurring on every mail send on that particular IMAP server.\n\n> Is sent mail actually saved in correct Sent folder upon every mail send but\n> \"Copying to sent folder\" never disapppears upon every mail send?  \n> (I can't imagine environment where bug 413240 occurs upon every mail send,\n> because that bug can't be reproduced intentionally and occurs accidentaly.)\n\nEven if it occurs randomly, I can't use it as it is for my work email and I can't have my outgoing emails not being archived in the IMAP server's outbox correctly because I need to access mail from multiple locations.\n\n> So, we can say \"you can't use Tb due to this bug\".\n> \n> \"^\" in \"#news^#news\" and \"#XYZ#^Sent\" part is apparent Tb's actual bug found\n> in this bug. This is different issue from bug 720911 although relevant.\n> Can you get IMAP log of TB in your environment with new profile and one IMAP\n> account only?\n> \n> By the way, simplest workaround is \"no # in folder name\". Can you change\n> server configuration?\n\nNo I do not have the authority to change the server configuration.  AFAIK it is a very vanilla UW-IMAP installation.", "author": "bigheadjer@gmail.com", "text": "(In reply to WADA from comment #13)\n> (In reply to Jeremy Tan from comment #12)\n> > Yes I can't use Tb right now because of bug 413240\n> \n> Does bug 413240 occur on every mail send in your environment?\n\nWhen I stopped using it, yes it was occurring on every mail send on that particular IMAP server.\n\n> Is sent mail actually saved in correct Sent folder upon every mail send but\n> \"Copying to sent folder\" never disapppears upon every mail send?  \n> (I can't imagine environment where bug 413240 occurs upon every mail send,\n> because that bug can't be reproduced intentionally and occurs accidentaly.)\n\nEven if it occurs randomly, I can't use it as it is for my work email and I can't have my outgoing emails not being archived in the IMAP server's outbox correctly because I need to access mail from multiple locations.\n\n> So, we can say \"you can't use Tb due to this bug\".\n> \n> \"^\" in \"#news^#news\" and \"#XYZ#^Sent\" part is apparent Tb's actual bug found\n> in this bug. This is different issue from bug 720911 although relevant.\n> Can you get IMAP log of TB in your environment with new profile and one IMAP\n> account only?\n> \n> By the way, simplest workaround is \"no # in folder name\". Can you change\n> server configuration?\n\nNo I do not have the authority to change the server configuration.  AFAIK it is a very vanilla UW-IMAP installation.", "count": 15, "bug_id": 697789, "id": 6054343, "attachment_id": null, "tags": [], "creator": "bigheadjer@gmail.com", "creation_time": "2012-02-12T16:24:37Z", "is_private": false}, {"creator": "m-wada@usa.com", "author": "m-wada@usa.com", "count": 16, "text": "Is personal namespace of \"#mh/\", \"#mhinbox\" actually used and required?\nDoes Mbox named #mh, #mhinbox actually exist at server?\nDoes Mbox named \"#public\", \"#news.\", \"#ftp\", \"#shared\" actually exist on server? Actually used?\nIf no, following setting(Server Settings/Advanced) can be a workaround in your case.\n  mail.server.server1.override_namespaces = false\n  mail.server.server1.namespace.personal    = \"\" (or \"INBOX/\" or \"INBOX.\")\n  mail.server.server1.namespace.public      = \"\"\n  mail.server.server1.namespace.other_users = \"\"", "id": 6058606, "bug_id": 697789, "creation_time": "2012-02-14T02:42:39Z", "is_private": false, "time": "2012-02-14T02:42:39Z", "attachment_id": null, "raw_text": "Is personal namespace of \"#mh/\", \"#mhinbox\" actually used and required?\nDoes Mbox named #mh, #mhinbox actually exist at server?\nDoes Mbox named \"#public\", \"#news.\", \"#ftp\", \"#shared\" actually exist on server? Actually used?\nIf no, following setting(Server Settings/Advanced) can be a workaround in your case.\n  mail.server.server1.override_namespaces = false\n  mail.server.server1.namespace.personal    = \"\" (or \"INBOX/\" or \"INBOX.\")\n  mail.server.server1.namespace.public      = \"\"\n  mail.server.server1.namespace.other_users = \"\"", "tags": []}, {"raw_text": "Phenomenon was following.\n1. root level #XYZ# exists. namespace=\"#XYZ#/\"\n2. Junk folder setting : \"Junk\" folder of\n     mail.server.serverN.spamActionTargetAccount = imap://userName@hostname\n3. Because namespace=\"#XYZ#/\", ensureExists of Junk is executed on \"#XYZ#/Junk\",\n     ensureExists%3E/%23XYZ%23/Junk:  = currentUrl\n   and create \"#XYZ#/Junk\" is executed and is subscribed normally.\n4. Because \"#\" is delimiter of hash in URL, its's \"/\" is escaped as \"#XYZ#^Junk\".\n   This garbled \"#XYZ#^Junk\" is written in ...\\ImapMail\\<servername>.msf\n   due to bug 720911.\n5. After that, create request of ABC is changed to #XYZ#^Junk/ABC by bug 720911,\n   and is changed to #XYZ#/#XYZ#^Junk/ABC by namespace=\"#XYZ#/\".", "time": "2012-02-14T06:58:33Z", "author": "m-wada@usa.com", "text": "Phenomenon was following.\n1. root level #XYZ# exists. namespace=\"#XYZ#/\"\n2. Junk folder setting : \"Junk\" folder of\n     mail.server.serverN.spamActionTargetAccount = imap://userName@hostname\n3. Because namespace=\"#XYZ#/\", ensureExists of Junk is executed on \"#XYZ#/Junk\",\n     ensureExists%3E/%23XYZ%23/Junk:  = currentUrl\n   and create \"#XYZ#/Junk\" is executed and is subscribed normally.\n4. Because \"#\" is delimiter of hash in URL, its's \"/\" is escaped as \"#XYZ#^Junk\".\n   This garbled \"#XYZ#^Junk\" is written in ...\\ImapMail\\<servername>.msf\n   due to bug 720911.\n5. After that, create request of ABC is changed to #XYZ#^Junk/ABC by bug 720911,\n   and is changed to #XYZ#/#XYZ#^Junk/ABC by namespace=\"#XYZ#/\".", "count": 17, "bug_id": 697789, "id": 6058941, "attachment_id": null, "tags": [], "creator": "m-wada@usa.com", "is_private": false, "creation_time": "2012-02-14T06:58:33Z"}, {"is_private": false, "creation_time": "2012-03-30T07:04:51Z", "creator": "m-wada@usa.com", "tags": [], "attachment_id": null, "id": 6184167, "bug_id": 697789, "text": "FYI.\n\n(In reply to Jeremy Tan from comment #11)\n> user_pref(\"mail.server.server1.namespace.public\",\n> \"\\\"#public/\\\",\\\"#news.\\\",\\\"#ftp/\\\",\\\"#shared/\\\"\");\n> However, I did not add them myself.\n\nIf non-personal namespace(shared/public namespace, other users namespace) is used, and if folder(or parent folder) for non-personal namespace is accessed and is shown at folder pane of Tb(returned as LSUB command and/or LIST command), Bug 540378 currently occurs, and that bug may be relivant to this bug.", "count": 18, "author": "m-wada@usa.com", "raw_text": "FYI.\n\n(In reply to Jeremy Tan from comment #11)\n> user_pref(\"mail.server.server1.namespace.public\",\n> \"\\\"#public/\\\",\\\"#news.\\\",\\\"#ftp/\\\",\\\"#shared/\\\"\");\n> However, I did not add them myself.\n\nIf non-personal namespace(shared/public namespace, other users namespace) is used, and if folder(or parent folder) for non-personal namespace is accessed and is shown at folder pane of Tb(returned as LSUB command and/or LIST command), Bug 540378 currently occurs, and that bug may be relivant to this bug.", "time": "2012-03-30T07:04:51Z"}, {"is_private": false, "creation_time": "2013-04-10T02:42:45Z", "bug_id": 697789, "id": 7297479, "text": "Developers of IMAP RFC looks to have had assigned special meaning to # ... \n> http://tools.ietf.org/html/rfc3501#section-5.1.2\n> 5.1.2. Mailbox Namespace Naming Convention\n>    By convention, the first hierarchical element of any mailbox name\n>    which begins with \"#\" identifies the \"namespace\" of the remainder of\n>    the name.  This makes it possible to disambiguate between different\n>    types of mailbox stores, each of which have their own namespaces.\n> \n>         For example, implementations which offer access to USENET\n>         newsgroups MAY use the \"#news\" namespace to partition the\n>         USENET newsgroup namespace from that of other mailboxes.\n>         Thus, the comp.mail.misc newsgroup would have a mailbox\n>         name of \"#news.comp.mail.misc\", and the name\n>         \"comp.mail.misc\" can refer to a different object (e.g., a\n>         user's private mailbox).\n\nHowever, such special meaning is never defined by RFC for Namespace. Rather, developer of namespace RFC recommends to avoid \"# in namespace\".\nIt's merely that # was a convension used by UW-IAP developer, isn't it?\n> http://tools.ietf.org/html/rfc2342\n>   Example 5.9:\n>   Historical convention has been to start all namespaces with the \"#\"\n>   character.  Namespaces that include the \"#\" character are not IMAP\n>   URL [IMAP-URL] friendly requiring the \"#\" character to be represented\n>   as %23 when within URLs.  As such, server implementers MAY instead\n>   consider using namespace prefixes that do not contain the \"#\"\n>   character.\n> Gahrns & Newman      Standards Track           [Page 7]", "count": 19, "author": "m-wada@usa.com", "creator": "m-wada@usa.com", "tags": [], "raw_text": "Developers of IMAP RFC looks to have had assigned special meaning to # ... \n> http://tools.ietf.org/html/rfc3501#section-5.1.2\n> 5.1.2. Mailbox Namespace Naming Convention\n>    By convention, the first hierarchical element of any mailbox name\n>    which begins with \"#\" identifies the \"namespace\" of the remainder of\n>    the name.  This makes it possible to disambiguate between different\n>    types of mailbox stores, each of which have their own namespaces.\n> \n>         For example, implementations which offer access to USENET\n>         newsgroups MAY use the \"#news\" namespace to partition the\n>         USENET newsgroup namespace from that of other mailboxes.\n>         Thus, the comp.mail.misc newsgroup would have a mailbox\n>         name of \"#news.comp.mail.misc\", and the name\n>         \"comp.mail.misc\" can refer to a different object (e.g., a\n>         user's private mailbox).\n\nHowever, such special meaning is never defined by RFC for Namespace. Rather, developer of namespace RFC recommends to avoid \"# in namespace\".\nIt's merely that # was a convension used by UW-IAP developer, isn't it?\n> http://tools.ietf.org/html/rfc2342\n>   Example 5.9:\n>   Historical convention has been to start all namespaces with the \"#\"\n>   character.  Namespaces that include the \"#\" character are not IMAP\n>   URL [IMAP-URL] friendly requiring the \"#\" character to be represented\n>   as %23 when within URLs.  As such, server implementers MAY instead\n>   consider using namespace prefixes that do not contain the \"#\"\n>   character.\n> Gahrns & Newman      Standards Track           [Page 7]", "attachment_id": null, "time": "2013-04-10T02:42:45Z"}, {"creator": "m-wada@usa.com", "author": "m-wada@usa.com", "count": 20, "text": "As for \"#\" in namespace part, it looks to have resolved by \"correct escaping of #\" in internal URL used by Tb at many places, because problem due to \"#something/\" of any namespace is not observed.\nMain culprit is perhaps mixture of \"namespace of something + . with delimiter of .\" in sample setting of shipped UW-IMAP even though \"delimiter is /\" is used, which is merely to show that \"delimiter of /\" and \"delimiter of .\" can be mixed in IMAP by sample namespace setting, instead of one shipped as \"recommended or practically useful default setting\".", "bug_id": 697789, "id": 7304330, "creation_time": "2013-04-11T16:44:34Z", "is_private": false, "time": "2013-04-11T16:44:34Z", "attachment_id": null, "raw_text": "As for \"#\" in namespace part, it looks to have resolved by \"correct escaping of #\" in internal URL used by Tb at many places, because problem due to \"#something/\" of any namespace is not observed.\nMain culprit is perhaps mixture of \"namespace of something + . with delimiter of .\" in sample setting of shipped UW-IMAP even though \"delimiter is /\" is used, which is merely to show that \"delimiter of /\" and \"delimiter of .\" can be mixed in IMAP by sample namespace setting, instead of one shipped as \"recommended or practically useful default setting\".", "tags": []}]}}}