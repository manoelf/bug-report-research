{"comments": {}, "bugs": {"684769": {"comments": [{"time": "2011-09-06T00:49:27Z", "creation_time": "2011-09-06T00:49:27Z", "creator": "djm@mindrot.org", "author": "djm@mindrot.org", "id": 5701208, "count": 0, "is_private": false, "text": "When changing multiple bugs at once, the \"Depends On\" and \"Blocks\" fields accept bug aliases for addition (\"Add these IDs\") but not deletion (\"Delete these IDs\"). \n\nHow to reproduce:\n\n1. Create a few bugs\n2. Give one bug an alias, say \"XXX\"\n3. Mark all the other bugs as blocking XXX\n4. View the blockers of XXX in \"change several\" (e.g. via XXX -> show dependency tree -> change several)\n5. In the \"Blocks\" field, enter XXX and select the \"Delete these IDs\" option\n6. Click commit\n\nexpected result: bug XXX ends up with an empty blockers list\nactual result: bug XXX doesn't", "bug_id": 684769, "tags": [], "attachment_id": null, "raw_text": "When changing multiple bugs at once, the \"Depends On\" and \"Blocks\" fields accept bug aliases for addition (\"Add these IDs\") but not deletion (\"Delete these IDs\"). \n\nHow to reproduce:\n\n1. Create a few bugs\n2. Give one bug an alias, say \"XXX\"\n3. Mark all the other bugs as blocking XXX\n4. View the blockers of XXX in \"change several\" (e.g. via XXX -> show dependency tree -> change several)\n5. In the \"Blocks\" field, enter XXX and select the \"Delete these IDs\" option\n6. Click commit\n\nexpected result: bug XXX ends up with an empty blockers list\nactual result: bug XXX doesn't"}, {"creator": "LpSolit@gmail.com", "time": "2011-09-06T16:16:26Z", "creation_time": "2011-09-06T16:16:26Z", "author": "LpSolit@gmail.com", "is_private": false, "id": 5702231, "count": 1, "text": "Hum, indeed. And this is still a problem in 4.1.3.", "bug_id": 684769, "tags": [], "attachment_id": null, "raw_text": "Hum, indeed. And this is still a problem in 4.1.3."}, {"count": 2, "id": 5702443, "is_private": false, "creation_time": "2011-09-06T17:32:16Z", "time": "2011-09-06T17:32:16Z", "creator": "LpSolit@gmail.com", "author": "LpSolit@gmail.com", "attachment_id": null, "raw_text": "The reason is that Bugzilla::Bug->set_all has:\n\n            foreach my $remove (@{ $params->{$name}->{remove} || [] }) {\n                @dep_ids = grep($_ != $remove, @dep_ids);\n            }\n\nBut when you pass an alias, it will never match any element from @dep_ids and so will never be removed.\n\nThis works when adding an alias because it will never match any element from @dep_ids either, for the same reason, and so will always be added. _check_dependencies() will then convert aliases into bug IDs.", "text": "The reason is that Bugzilla::Bug->set_all has:\n\n            foreach my $remove (@{ $params->{$name}->{remove} || [] }) {\n                @dep_ids = grep($_ != $remove, @dep_ids);\n            }\n\nBut when you pass an alias, it will never match any element from @dep_ids and so will never be removed.\n\nThis works when adding an alias because it will never match any element from @dep_ids either, for the same reason, and so will always be added. _check_dependencies() will then convert aliases into bug IDs.", "bug_id": 684769, "tags": []}, {"raw_text": "This issue is still occuring.", "attachment_id": null, "tags": [], "text": "This issue is still occuring.", "bug_id": 684769, "is_private": false, "id": 14902081, "count": 3, "author": "ktaeleman@mozilla.com", "creator": "ktaeleman@mozilla.com", "time": "2020-06-25T17:20:02Z", "creation_time": "2020-06-25T17:20:02Z"}]}}}