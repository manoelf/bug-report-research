{"comments": {}, "bugs": {"237098": {"comments": [{"time": "2004-03-11T07:14:51Z", "creation_time": "2004-03-11T07:14:51Z", "attachment_id": null, "creator": "ctalipsky@bellsouth.net", "raw_text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.6) Gecko/20040206 Firefox/0.8\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.6) Gecko/20040206 Firefox/0.8\n\nWhen using\nnetscape.security.PrivilegeManager.enablePrivilege(\"UniversalPreferencesWrite\");\nin an external JS file, the grant window pops up and allows you to grant the\nrequest but will not allow security to execute the line following the\nUniversalPreferencesWrite request. I have a window.open (with a modal=1) that\nwill not open unless i remove it from the external JS file aand put it in the\nmain HTML script block.\n\nReproducible: Always\nSteps to Reproduce:\n1. Set user_pref(\"signed.applets.codebase_principal_support\", true); in prefs.js\n2. Create a blank html page with a script block in the HEAD.\n<html><head><script src=\"somefile.js\"></script></head><body></body></html>\n3. In \"somefile.js\" put the following:\nnetscape.security.PrivilegeManager.enablePrivilege(\"UniversalPreferencesWrite\");\nwindow.open(\"somefile.htm\",\"Test\",\"height=200,width=200,modal=1\");\nalert('done');\n4. Put all files in the same dir and open the main html file.\n\n\n\nActual Results:  \nOpen the html file and grant permission and you will see that window.open DOES\nNOT open but you DO see the alert. Since i saw the popup asking for permission,\nI assume my code will work after i grant but it does not.\n\nExpected Results:  \nYou should get a popup to grant permission and then see the modal window open\nand once the modal window is closed, then you should see the alert.\n\nThe trick is to make sure the codebase_principal_support is set and that you use\nthe UniversalPreferencesWrite priveledge trick to get modal windows to open.\nThis all works fine IF the javascript is IN the main html file. It just doesnt\nwork when you put it in an external JS file even if they are all in the same\ndomain and directory.", "is_private": false, "id": 2098523, "count": 0, "bug_id": 237098, "tags": [], "text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.6) Gecko/20040206 Firefox/0.8\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.6) Gecko/20040206 Firefox/0.8\n\nWhen using\nnetscape.security.PrivilegeManager.enablePrivilege(\"UniversalPreferencesWrite\");\nin an external JS file, the grant window pops up and allows you to grant the\nrequest but will not allow security to execute the line following the\nUniversalPreferencesWrite request. I have a window.open (with a modal=1) that\nwill not open unless i remove it from the external JS file aand put it in the\nmain HTML script block.\n\nReproducible: Always\nSteps to Reproduce:\n1. Set user_pref(\"signed.applets.codebase_principal_support\", true); in prefs.js\n2. Create a blank html page with a script block in the HEAD.\n<html><head><script src=\"somefile.js\"></script></head><body></body></html>\n3. In \"somefile.js\" put the following:\nnetscape.security.PrivilegeManager.enablePrivilege(\"UniversalPreferencesWrite\");\nwindow.open(\"somefile.htm\",\"Test\",\"height=200,width=200,modal=1\");\nalert('done');\n4. Put all files in the same dir and open the main html file.\n\n\n\nActual Results:  \nOpen the html file and grant permission and you will see that window.open DOES\nNOT open but you DO see the alert. Since i saw the popup asking for permission,\nI assume my code will work after i grant but it does not.\n\nExpected Results:  \nYou should get a popup to grant permission and then see the modal window open\nand once the modal window is closed, then you should see the alert.\n\nThe trick is to make sure the codebase_principal_support is set and that you use\nthe UniversalPreferencesWrite priveledge trick to get modal windows to open.\nThis all works fine IF the javascript is IN the main html file. It just doesnt\nwork when you put it in an external JS file even if they are all in the same\ndomain and directory.", "author": "ctalipsky@bellsouth.net"}, {"creator": "ali@ebrahim.org", "attachment_id": null, "raw_text": "Can you reproduce this in Mozilla 1.6?\n\nhttp://www.mozilla.org/products/mozilla1.x/", "creation_time": "2004-03-11T07:19:19Z", "id": 2098528, "time": "2004-03-11T07:19:19Z", "count": 1, "text": "Can you reproduce this in Mozilla 1.6?\n\nhttp://www.mozilla.org/products/mozilla1.x/", "author": "ali@ebrahim.org", "bug_id": 237098, "tags": [], "is_private": false}, {"is_private": false, "tags": [], "bug_id": 237098, "author": "smrank@zepler.org", "text": "Try requesting UniversalBrowserWrite instead (WFM in Mozilla/5.0 (Windows; U;\nWin98; en-US; rv:1.7b) Gecko/20040311 Firefox/0.8.0+).", "count": 2, "time": "2004-03-11T15:07:47Z", "creation_time": "2004-03-11T15:07:47Z", "id": 2098788, "raw_text": "Try requesting UniversalBrowserWrite instead (WFM in Mozilla/5.0 (Windows; U;\nWin98; en-US; rv:1.7b) Gecko/20040311 Firefox/0.8.0+).", "attachment_id": null, "creator": "smrank@zepler.org"}, {"creation_time": "2004-04-27T23:19:51Z", "id": 2137647, "time": "2004-04-27T23:19:51Z", "count": 3, "creator": "asa@mozilla.com", "attachment_id": null, "raw_text": "not a firefox bug.", "bug_id": 237098, "tags": [], "is_private": false, "text": "not a firefox bug.", "author": "asa@mozilla.com"}]}}}