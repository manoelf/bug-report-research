{"comments": {}, "bugs": {"677763": {"comments": [{"creator": "donrhummy@yahoo.com", "author": "donrhummy@yahoo.com", "bug_id": 677763, "tags": [], "is_private": false, "count": 0, "id": 5643916, "text": "User Agent: Mozilla/5.0 (X11; Linux i686; rv:5.0) Gecko/20100101 Firefox/5.0\nBuild ID: 20110615151330\n\nSteps to reproduce:\n\nI searched for a person in the autocomplete \"to\" field of a new email by using their 3rd email address (smtpemail3). It found the person but the dropdown only contains the person's primary email address.\n\n\nActual results:\n\nThe autocomplete dropdown only lets me select a person's primary email address even if found by searching for their thrid email address.\n\n\nExpected results:\n\nIt should have shown 3 possible choices:\n\n\"John Doe\" johndoe@primary.com\n\"John Doe\" johndoe@secondary.com\n\"John Doe\" johndoe@third.com", "attachment_id": null, "time": "2011-08-09T23:48:33Z", "raw_text": "User Agent: Mozilla/5.0 (X11; Linux i686; rv:5.0) Gecko/20100101 Firefox/5.0\nBuild ID: 20110615151330\n\nSteps to reproduce:\n\nI searched for a person in the autocomplete \"to\" field of a new email by using their 3rd email address (smtpemail3). It found the person but the dropdown only contains the person's primary email address.\n\n\nActual results:\n\nThe autocomplete dropdown only lets me select a person's primary email address even if found by searching for their thrid email address.\n\n\nExpected results:\n\nIt should have shown 3 possible choices:\n\n\"John Doe\" johndoe@primary.com\n\"John Doe\" johndoe@secondary.com\n\"John Doe\" johndoe@third.com", "creation_time": "2011-08-09T23:48:33Z"}, {"creator": "standard8@mozilla.com", "author": "standard8@mozilla.com", "creation_time": "2011-08-10T08:28:43Z", "raw_text": "Depending on how your LDAP server stores its mail addresses, this is either a duplicate of bug 262093 or bug 261497. As you've got more than two in there, I'm going to be on this being bug 262093.", "text": "Depending on how your LDAP server stores its mail addresses, this is either a duplicate of bug 262093 or bug 261497. As you've got more than two in there, I'm going to be on this being bug 262093.\n\n*** This bug has been marked as a duplicate of bug 262093 ***", "time": "2011-08-10T08:28:43Z", "attachment_id": null, "tags": [], "count": 1, "is_private": false, "id": 5644526, "bug_id": 677763}, {"creator": "donrhummy@yahoo.com", "author": "donrhummy@yahoo.com", "is_private": false, "count": 2, "tags": [], "id": 5644806, "bug_id": 677763, "creation_time": "2011-08-10T13:41:12Z", "raw_text": "No, it's not a duplicate of that. Let me (try) to explain:\n\nBug 262093 deals with the search filter which ignores any emails except for the primary email. That can be fixed by adding the search filters (smtpemail2=*%v*)(smtpemail3=*%v*).\n\nMy bug deals with what's returned in the results. Even if I am able to search through the 2nd and 3rd emails (which I can in autocomplete where I added a filterTemplate that does so) and it finds John Doe, I only get one result returned and when I select that it ALWAYS uses the primary email. There's no way to use the other emails.", "text": "No, it's not a duplicate of that. Let me (try) to explain:\n\nBug 262093 deals with the search filter which ignores any emails except for the primary email. That can be fixed by adding the search filters (smtpemail2=*%v*)(smtpemail3=*%v*).\n\nMy bug deals with what's returned in the results. Even if I am able to search through the 2nd and 3rd emails (which I can in autocomplete where I added a filterTemplate that does so) and it finds John Doe, I only get one result returned and when I select that it ALWAYS uses the primary email. There's no way to use the other emails.", "time": "2011-08-10T13:41:12Z", "attachment_id": null}, {"text": "(In reply to donrhummy from comment #2)\n> No, it's not a duplicate of that. Let me (try) to explain:\n> \n> Bug 262093 deals with the search filter which ignores any emails except for\n> the primary email. That can be fixed by adding the search filters\n> (smtpemail2=*%v*)(smtpemail3=*%v*).\n\nThat bug doesn't deal with the search filter. It deals with the search results.\n\nThe general LDAP standard is to have multiple \"mail\" attributes in the returned contact, one for each email address.\n\nIf you've defined new types (smtpemail) then we won't be looking for those unless you've modified the ldap_2.servers.default.attrmap.PrimaryEmail and ldap_2.servers.default.attrmap.SecondEmail preferences, and then we'll only deal for two.\n\nThe real solution is to fix bug 262093 which would then just have something like ldap_2.servers.default.attrmap.email mapped to \"mail\" which you could override to \"smtpemail\" for instance, and we wouldn't need multiple email fields.\n\n> My bug deals with what's returned in the results. Even if I am able to\n> search through the 2nd and 3rd emails (which I can in autocomplete where I\n> added a filterTemplate that does so) and it finds John Doe, I only get one\n> result returned and when I select that it ALWAYS uses the primary email.\n> There's no way to use the other emails.\n\nYep, that's bug 262093.", "creator": "standard8@mozilla.com", "author": "standard8@mozilla.com", "time": "2011-08-10T13:52:09Z", "attachment_id": null, "raw_text": "(In reply to donrhummy from comment #2)\n> No, it's not a duplicate of that. Let me (try) to explain:\n> \n> Bug 262093 deals with the search filter which ignores any emails except for\n> the primary email. That can be fixed by adding the search filters\n> (smtpemail2=*%v*)(smtpemail3=*%v*).\n\nThat bug doesn't deal with the search filter. It deals with the search results.\n\nThe general LDAP standard is to have multiple \"mail\" attributes in the returned contact, one for each email address.\n\nIf you've defined new types (smtpemail) then we won't be looking for those unless you've modified the ldap_2.servers.default.attrmap.PrimaryEmail and ldap_2.servers.default.attrmap.SecondEmail preferences, and then we'll only deal for two.\n\nThe real solution is to fix bug 262093 which would then just have something like ldap_2.servers.default.attrmap.email mapped to \"mail\" which you could override to \"smtpemail\" for instance, and we wouldn't need multiple email fields.\n\n> My bug deals with what's returned in the results. Even if I am able to\n> search through the 2nd and 3rd emails (which I can in autocomplete where I\n> added a filterTemplate that does so) and it finds John Doe, I only get one\n> result returned and when I select that it ALWAYS uses the primary email.\n> There's no way to use the other emails.\n\nYep, that's bug 262093.", "creation_time": "2011-08-10T13:52:09Z", "bug_id": 677763, "tags": [], "count": 3, "is_private": false, "id": 5644831}, {"raw_text": "(In reply to Mark Banner (:standard8) from comment #3)\n> (In reply to donrhummy from comment #2)\n> > No, it's not a duplicate of that. Let me (try) to explain:\n> > \n> > Bug 262093 deals with the search filter which ignores any emails except for\n> > the primary email. That can be fixed by adding the search filters\n> > (smtpemail2=*%v*)(smtpemail3=*%v*).\n> \n> That bug doesn't deal with the search filter. It deals with the search\n> results.\n> \n> The general LDAP standard is to have multiple \"mail\" attributes in the\n> returned contact, one for each email address.\n\nThat may be the standard, but I'm getting the issue in autoComplete despite it actually returning all three email addresses. (i.e. I am able to SEE the 2nd and 3rd email in the commentFormat when I set it to show up there, but cannot select them)\n\n> If you've defined new types (smtpemail) then we won't be looking for those\n> unless you've modified the ldap_2.servers.default.attrmap.PrimaryEmail and\n> ldap_2.servers.default.attrmap.SecondEmail preferences, and then we'll only\n> deal for two.\n\nsmtpemail is not a new type I've invented. It's the name for Exchange's email fields. The following all work:\n\nTo Find Primary Email: smtpemail, mail\nTo Find Second Email: smtpemail2, xmozillasecondemail\nTo Find Third Email: smtpemail3\n\n> The real solution is to fix bug 262093 which would then just have something\n> like ldap_2.servers.default.attrmap.email mapped to \"mail\" which you could\n> override to \"smtpemail\" for instance, and we wouldn't need multiple email\n> fields.\n\nUnfortunately, having just that one field \"mail\" does NOT solve the problem. When I do a filterTemplate in autoComplete with only the \"mail\" field in the template, it NEVER looks in the second or third email to find a match. It ONLY looks in the primary email field. (My LDAP server is MS Exchange)", "creation_time": "2011-08-10T14:10:55Z", "text": "(In reply to Mark Banner (:standard8) from comment #3)\n> (In reply to donrhummy from comment #2)\n> > No, it's not a duplicate of that. Let me (try) to explain:\n> > \n> > Bug 262093 deals with the search filter which ignores any emails except for\n> > the primary email. That can be fixed by adding the search filters\n> > (smtpemail2=*%v*)(smtpemail3=*%v*).\n> \n> That bug doesn't deal with the search filter. It deals with the search\n> results.\n> \n> The general LDAP standard is to have multiple \"mail\" attributes in the\n> returned contact, one for each email address.\n\nThat may be the standard, but I'm getting the issue in autoComplete despite it actually returning all three email addresses. (i.e. I am able to SEE the 2nd and 3rd email in the commentFormat when I set it to show up there, but cannot select them)\n\n> If you've defined new types (smtpemail) then we won't be looking for those\n> unless you've modified the ldap_2.servers.default.attrmap.PrimaryEmail and\n> ldap_2.servers.default.attrmap.SecondEmail preferences, and then we'll only\n> deal for two.\n\nsmtpemail is not a new type I've invented. It's the name for Exchange's email fields. The following all work:\n\nTo Find Primary Email: smtpemail, mail\nTo Find Second Email: smtpemail2, xmozillasecondemail\nTo Find Third Email: smtpemail3\n\n> The real solution is to fix bug 262093 which would then just have something\n> like ldap_2.servers.default.attrmap.email mapped to \"mail\" which you could\n> override to \"smtpemail\" for instance, and we wouldn't need multiple email\n> fields.\n\nUnfortunately, having just that one field \"mail\" does NOT solve the problem. When I do a filterTemplate in autoComplete with only the \"mail\" field in the template, it NEVER looks in the second or third email to find a match. It ONLY looks in the primary email field. (My LDAP server is MS Exchange)", "attachment_id": null, "time": "2011-08-10T14:10:55Z", "tags": [], "count": 4, "is_private": false, "id": 5644868, "bug_id": 677763, "creator": "donrhummy@yahoo.com", "author": "donrhummy@yahoo.com"}, {"creator": "standard8@mozilla.com", "author": "standard8@mozilla.com", "creation_time": "2012-05-24T09:48:37Z", "raw_text": "", "text": "*** Bug 754882 has been marked as a duplicate of this bug. ***", "attachment_id": null, "time": "2012-05-24T09:48:37Z", "is_private": false, "count": 5, "tags": [], "id": 6334050, "bug_id": 677763}, {"bug_id": 677763, "id": 6334075, "count": 6, "is_private": false, "tags": [], "attachment_id": null, "time": "2012-05-24T10:05:15Z", "text": "Sorry for the delay in response, sometimes bug mail gets missed.\n\n(In reply to donrhummy from comment #4)\n> > The general LDAP standard is to have multiple \"mail\" attributes in the\n> > returned contact, one for each email address.\n> \n> That may be the standard, but I'm getting the issue in autoComplete despite\n> it actually returning all three email addresses. (i.e. I am able to SEE the\n> 2nd and 3rd email in the commentFormat when I set it to show up there, but\n> cannot select them)\n\nThat's because the commentFormat is designed as a comment, not as an email address. The code needs to be modified to support storing multiple mail attribute values and recalling them.\n\n> \n> > If you've defined new types (smtpemail) then we won't be looking for those\n> > unless you've modified the ldap_2.servers.default.attrmap.PrimaryEmail and\n> > ldap_2.servers.default.attrmap.SecondEmail preferences, and then we'll only\n> > deal for two.\n> \n> smtpemail is not a new type I've invented. It's the name for Exchange's\n> email fields. The following all work:\n> \n> To Find Primary Email: smtpemail, mail\n> To Find Second Email: smtpemail2, xmozillasecondemail\n> To Find Third Email: smtpemail3\n\nSo currently we don't support a ThirdEmail, I don't think we ever will. We're more likely to just support the multi-valued mail attribute. I am very surprised that exchange doesn't support multi-valued mail attribute, as it is a part of most of the core standards (e.g. http://tools.ietf.org/html/rfc4524#page-9).\n\n> > The real solution is to fix bug 262093 which would then just have something\n> > like ldap_2.servers.default.attrmap.email mapped to \"mail\" which you could\n> > override to \"smtpemail\" for instance, and we wouldn't need multiple email\n> > fields.\n> \n> Unfortunately, having just that one field \"mail\" does NOT solve the problem.\n> When I do a filterTemplate in autoComplete with only the \"mail\" field in the\n> template, it NEVER looks in the second or third email to find a match. It\n> ONLY looks in the primary email field. (My LDAP server is MS Exchange)\n\nThat makes me think either your LDAP set-up is wrong, or the exchange server isn't working correctly, unfortunately I don't know exchange well enough. Multiple values of mail: seem to be quite common, but I'm not seeing any support for smtpemail when I search around on the internet.", "creation_time": "2012-05-24T10:05:15Z", "raw_text": "Sorry for the delay in response, sometimes bug mail gets missed.\n\n(In reply to donrhummy from comment #4)\n> > The general LDAP standard is to have multiple \"mail\" attributes in the\n> > returned contact, one for each email address.\n> \n> That may be the standard, but I'm getting the issue in autoComplete despite\n> it actually returning all three email addresses. (i.e. I am able to SEE the\n> 2nd and 3rd email in the commentFormat when I set it to show up there, but\n> cannot select them)\n\nThat's because the commentFormat is designed as a comment, not as an email address. The code needs to be modified to support storing multiple mail attribute values and recalling them.\n\n> \n> > If you've defined new types (smtpemail) then we won't be looking for those\n> > unless you've modified the ldap_2.servers.default.attrmap.PrimaryEmail and\n> > ldap_2.servers.default.attrmap.SecondEmail preferences, and then we'll only\n> > deal for two.\n> \n> smtpemail is not a new type I've invented. It's the name for Exchange's\n> email fields. The following all work:\n> \n> To Find Primary Email: smtpemail, mail\n> To Find Second Email: smtpemail2, xmozillasecondemail\n> To Find Third Email: smtpemail3\n\nSo currently we don't support a ThirdEmail, I don't think we ever will. We're more likely to just support the multi-valued mail attribute. I am very surprised that exchange doesn't support multi-valued mail attribute, as it is a part of most of the core standards (e.g. http://tools.ietf.org/html/rfc4524#page-9).\n\n> > The real solution is to fix bug 262093 which would then just have something\n> > like ldap_2.servers.default.attrmap.email mapped to \"mail\" which you could\n> > override to \"smtpemail\" for instance, and we wouldn't need multiple email\n> > fields.\n> \n> Unfortunately, having just that one field \"mail\" does NOT solve the problem.\n> When I do a filterTemplate in autoComplete with only the \"mail\" field in the\n> template, it NEVER looks in the second or third email to find a match. It\n> ONLY looks in the primary email field. (My LDAP server is MS Exchange)\n\nThat makes me think either your LDAP set-up is wrong, or the exchange server isn't working correctly, unfortunately I don't know exchange well enough. Multiple values of mail: seem to be quite common, but I'm not seeing any support for smtpemail when I search around on the internet.", "author": "standard8@mozilla.com", "creator": "standard8@mozilla.com"}]}}}