{"bugs": {"634663": {"comments": [{"text": "I like the new \"balloon\" notification which bug 605972 introduced that comes up when new mail arrives (mail.biff.show_balloon), but see a somewhat unexpected behavior in both Windows 7 and XP. When clicking on the balloon, the Mail & News window is opened or gets into the foreground (most of the time, sometimes it doesn't), but may not be focused. This is somewhat independent of whether\nit yet has to be opened, was already opened, or was minimized, but the exact conditions are a bit fuzzy and hard to reproduce.\n\nWhen clicking the balloon, the mouse is in the lower-right corner, thus has to be moved back into the window to click on the new message. Using the [N] keyboard shortcut instead would be nice, but won't work as the window isn't focused. Sometimes the window isn't even brought into the foreground, I've seen this when other applications have the focus (e.g., Firefox).\n\nSeen on Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0b12pre) Gecko/20110215 SeaMonkey/2.1b3pre & Mozilla/5.0 (Windows NT 5.1; rv:2.0b12pre) Gecko/20110215 SeaMonkey/2.1b3pre. Since I don't encounter the issue with the respective Thunderbird/3.3a3pre trunk builds (those always focuse the main mail window), this seems to be specific to SeaMonkey and hopefully fixable by whatever Thunderbird is doing to properly focus the window.", "creation_time": "2011-02-16T18:51:17Z", "is_private": false, "raw_text": "I like the new \"balloon\" notification which bug 605972 introduced that comes up when new mail arrives (mail.biff.show_balloon), but see a somewhat unexpected behavior in both Windows 7 and XP. When clicking on the balloon, the Mail & News window is opened or gets into the foreground (most of the time, sometimes it doesn't), but may not be focused. This is somewhat independent of whether\nit yet has to be opened, was already opened, or was minimized, but the exact conditions are a bit fuzzy and hard to reproduce.\n\nWhen clicking the balloon, the mouse is in the lower-right corner, thus has to be moved back into the window to click on the new message. Using the [N] keyboard shortcut instead would be nice, but won't work as the window isn't focused. Sometimes the window isn't even brought into the foreground, I've seen this when other applications have the focus (e.g., Firefox).\n\nSeen on Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0b12pre) Gecko/20110215 SeaMonkey/2.1b3pre & Mozilla/5.0 (Windows NT 5.1; rv:2.0b12pre) Gecko/20110215 SeaMonkey/2.1b3pre. Since I don't encounter the issue with the respective Thunderbird/3.3a3pre trunk builds (those always focuse the main mail window), this seems to be specific to SeaMonkey and hopefully fixable by whatever Thunderbird is doing to properly focus the window.", "id": 5283713, "bug_id": 634663, "tags": [], "count": 0, "creator": "rsx11m.pub@gmail.com", "time": "2011-02-16T18:51:17Z", "author": "rsx11m.pub@gmail.com", "attachment_id": null}, {"bug_id": 634663, "tags": [], "count": 1, "creator": "philip.chee@gmail.com", "raw_text": "Looking at nsMessengerWinIntegration.cpp, if the main mail3pane window is already open we eventually call activateWindow() to focus on that window (like Thunderbird does) so we should behave the same. But according to rsx11m we sometimes don't acquire focus (or get it stolen)\n\nOur other code path which TB doesn't have calls the nsIWindowWatcher to open a new mail3pane window but I don't see anything that calls focus on that window.", "id": 5285396, "text": "Looking at nsMessengerWinIntegration.cpp, if the main mail3pane window is already open we eventually call activateWindow() to focus on that window (like Thunderbird does) so we should behave the same. But according to rsx11m we sometimes don't acquire focus (or get it stolen)\n\nOur other code path which TB doesn't have calls the nsIWindowWatcher to open a new mail3pane window but I don't see anything that calls focus on that window.", "creation_time": "2011-02-17T03:54:33Z", "author": "philip.chee@gmail.com", "time": "2011-02-17T03:54:33Z", "is_private": false, "attachment_id": null}, {"author": "neil@httl.net", "bug_id": 634663, "count": 2, "tags": [], "creator": "neil@httl.net", "text": "Sorry, but this (both clicking the balloon, and double-clicking the icon) works for me on Windows XP. (I don't have Windows 7.)\n\n(In reply to comment #1)\n> Our other code path which TB doesn't have calls the nsIWindowWatcher to open a\n> new mail3pane window but I don't see anything that calls focus on that window.\nMy understanding is that opening a window focuses it by default.", "creation_time": "2011-02-17T10:17:55Z", "raw_text": "Sorry, but this (both clicking the balloon, and double-clicking the icon) works for me on Windows XP. (I don't have Windows 7.)\n\n(In reply to comment #1)\n> Our other code path which TB doesn't have calls the nsIWindowWatcher to open a\n> new mail3pane window but I don't see anything that calls focus on that window.\nMy understanding is that opening a window focuses it by default.", "id": 5285810, "attachment_id": null, "time": "2011-02-17T10:17:55Z", "is_private": false}, {"is_private": false, "creation_time": "2011-02-17T14:47:27Z", "text": "Ah, rsx11m I'm going to ask an obvious question, does this happen in -safe-mode?", "id": 5286164, "raw_text": "Ah, rsx11m I'm going to ask an obvious question, does this happen in -safe-mode?", "tags": [], "creator": "philip.chee@gmail.com", "count": 3, "time": "2011-02-17T14:47:27Z", "bug_id": 634663, "attachment_id": null, "author": "philip.chee@gmail.com"}, {"attachment_id": null, "time": "2011-02-17T15:15:34Z", "is_private": false, "author": "rsx11m.pub@gmail.com", "bug_id": 634663, "count": 4, "tags": [], "creator": "rsx11m.pub@gmail.com", "raw_text": "Yes, it's reproducible on Windows XP with -safe-mode as well, though I needed to try 3-4 times before it happened. It helps to have some other applications running in parallel to trigger the effect.\n\nRegarding comment #1, I had a closer look at the Mail & News window during the incident, and indeed it gets focus for a brief time but then looses it again. Thus, apparently the focus gets stolen shortly after it was acquired.", "id": 5286227, "text": "Yes, it's reproducible on Windows XP with -safe-mode as well, though I needed to try 3-4 times before it happened. It helps to have some other applications running in parallel to trigger the effect.\n\nRegarding comment #1, I had a closer look at the Mail & News window during the incident, and indeed it gets focus for a brief time but then looses it again. Thus, apparently the focus gets stolen shortly after it was acquired.", "creation_time": "2011-02-17T15:15:34Z"}, {"bug_id": 634663, "creator": "rsx11m.pub@gmail.com", "tags": [], "count": 5, "text": "It seems that the problem occurs (mainly) when the focus is on a different application when the message arrives *and* when the balloon is clicked. I've\njust had a case where clicking the balloon retained both the focus and the foreground with the current application, whereas the Mail & News window was just blinking in the taskbar to indicate that action is required (it didn't even get to the foreground at all). In this instance, the currently focused application was having active I/O.\n\nSorry for not being able to provide more specific steps to reproduce. It happens frequently enough to be an annoyance, but is elusive enough to not allow the identification of any specific pattern...", "creation_time": "2011-02-18T05:04:53Z", "raw_text": "It seems that the problem occurs (mainly) when the focus is on a different application when the message arrives *and* when the balloon is clicked. I've\njust had a case where clicking the balloon retained both the focus and the foreground with the current application, whereas the Mail & News window was just blinking in the taskbar to indicate that action is required (it didn't even get to the foreground at all). In this instance, the currently focused application was having active I/O.\n\nSorry for not being able to provide more specific steps to reproduce. It happens frequently enough to be an annoyance, but is elusive enough to not allow the identification of any specific pattern...", "id": 5288709, "author": "rsx11m.pub@gmail.com", "time": "2011-02-18T05:04:53Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "time": "2011-02-18T11:46:14Z", "is_private": false, "author": "neil@httl.net", "creator": "neil@httl.net", "tags": [], "count": 6, "bug_id": 634663, "id": 5289165, "raw_text": "Clicking on the balloon should act the same way as double-clicking the icon. So could you try turning the balloon off temporarily?\n\nNote that the old alert isn't equivalent in this respect as it's part of the application so counts as gaining foreground activation.", "creation_time": "2011-02-18T11:46:14Z", "text": "Clicking on the balloon should act the same way as double-clicking the icon. So could you try turning the balloon off temporarily?\n\nNote that the old alert isn't equivalent in this respect as it's part of the application so counts as gaining foreground activation."}, {"author": "rsx11m.pub@gmail.com", "creation_time": "2011-02-18T14:21:16Z", "text": "Ok, I've switched back to the traditional alert and set alerts.totalOpenTime\nto 20sec so that I actually manage to hit it, let's see what this does...", "id": 5289367, "raw_text": "Ok, I've switched back to the traditional alert and set alerts.totalOpenTime\nto 20sec so that I actually manage to hit it, let's see what this does...", "tags": [], "creator": "rsx11m.pub@gmail.com", "count": 7, "bug_id": 634663, "attachment_id": null, "is_private": false, "time": "2011-02-18T14:21:16Z"}, {"attachment_id": null, "is_private": false, "time": "2011-02-18T14:27:37Z", "author": "neil@httl.net", "text": "No, don't click on the old alert, that's known to work! Click on the icon.", "creation_time": "2011-02-18T14:27:37Z", "raw_text": "No, don't click on the old alert, that's known to work! Click on the icon.", "id": 5289378, "bug_id": 634663, "count": 8, "tags": [], "creator": "neil@httl.net"}, {"id": 5289382, "raw_text": "Oops, my bad. I've switched off the old alert and now should get the icon only.", "creation_time": "2011-02-18T14:29:58Z", "is_private": false, "text": "Oops, my bad. I've switched off the old alert and now should get the icon only.", "count": 9, "creator": "rsx11m.pub@gmail.com", "tags": [], "time": "2011-02-18T14:29:58Z", "bug_id": 634663, "attachment_id": null, "author": "rsx11m.pub@gmail.com"}, {"attachment_id": null, "author": "rsx11m.pub@gmail.com", "creation_time": "2011-02-19T15:43:28Z", "is_private": false, "text": "So, another case, and another application was running in parallel but the focus was on the SeaMonkey browser this time. E-mail arrives, no balloon but icon.\n\n1. Double-clicked on the icon now;\n2. Mail & News window goes into foreground, briefly gains focus\n   (title bar turns blue);\n3. Mail & News window looses focus (title bar turns gray);\n4. SeaMonkey blinks in the taskbar to indicate user action;\n5. no application has the focus at this point.\n\nI'm using the Windows Classic desktop theme, in case this makes any difference (I wouldn't know though why it should, but maybe tiny details matter).", "id": 5292022, "raw_text": "So, another case, and another application was running in parallel but the focus was on the SeaMonkey browser this time. E-mail arrives, no balloon but icon.\n\n1. Double-clicked on the icon now;\n2. Mail & News window goes into foreground, briefly gains focus\n   (title bar turns blue);\n3. Mail & News window looses focus (title bar turns gray);\n4. SeaMonkey blinks in the taskbar to indicate user action;\n5. no application has the focus at this point.\n\nI'm using the Windows Classic desktop theme, in case this makes any difference (I wouldn't know though why it should, but maybe tiny details matter).", "count": 10, "tags": [], "time": "2011-02-19T15:43:28Z", "creator": "rsx11m.pub@gmail.com", "bug_id": 634663}, {"attachment_id": null, "is_private": false, "time": "2011-02-19T16:04:20Z", "author": "neil@httl.net", "raw_text": "That means that the bug has nothing to do with bug 605972. It just makes it easier to trigger (by giving you a whole Windows balloon to click instead of just the icon).\n\nHowever the icon code has been around for almost a decade, but I guess most people manage to click on the alert, or ignore the icon, otherwise I would have expected the bug to have been reported before.", "id": 5292049, "text": "That means that the bug has nothing to do with bug 605972. It just makes it easier to trigger (by giving you a whole Windows balloon to click instead of just the icon).\n\nHowever the icon code has been around for almost a decade, but I guess most people manage to click on the alert, or ignore the icon, otherwise I would have expected the bug to have been reported before.", "creation_time": "2011-02-19T16:04:20Z", "bug_id": 634663, "creator": "neil@httl.net", "count": 11, "tags": []}, {"count": 12, "tags": [], "time": "2011-02-19T16:59:53Z", "creator": "rsx11m.pub@gmail.com", "bug_id": 634663, "id": 5292108, "raw_text": "The balloon is certainly much more attractive than the little icon or the fairly quick slide-in/slide-out notification, that's likely why I haven't used either before as much as I use the new balloon. So, that certainly makes sense.", "creation_time": "2011-02-19T16:59:53Z", "is_private": false, "text": "The balloon is certainly much more attractive than the little icon or the fairly quick slide-in/slide-out notification, that's likely why I haven't used either before as much as I use the new balloon. So, that certainly makes sense.", "attachment_id": null, "author": "rsx11m.pub@gmail.com"}, {"time": "2011-02-20T00:34:34Z", "is_private": false, "attachment_id": null, "bug_id": 634663, "count": 13, "tags": [], "creator": "rsx11m.pub@gmail.com", "text": "Upon further testing, I could also reproduce this on Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.17) Gecko/20110123 SeaMonkey/2.0.12, so Neil's suspicion was correct that the effect has been around for a while already.\n\nThe new balloon notification makes it more prominent, though, as it's more likely to be used than the small taskbar icon. Thus, it would nevertheless be good to fix this if possible...", "creation_time": "2011-02-20T00:34:34Z", "raw_text": "Upon further testing, I could also reproduce this on Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.17) Gecko/20110123 SeaMonkey/2.0.12, so Neil's suspicion was correct that the effect has been around for a while already.\n\nThe new balloon notification makes it more prominent, though, as it's more likely to be used than the small taskbar icon. Thus, it would nevertheless be good to fix this if possible...", "id": 5292526, "author": "rsx11m.pub@gmail.com"}, {"attachment_id": null, "time": "2011-02-20T12:54:04Z", "is_private": false, "author": "philip.chee@gmail.com", "creator": "philip.chee@gmail.com", "count": 14, "tags": [], "bug_id": 634663, "id": 5292937, "raw_text": "Hmm rsx11m, based on the latest comments should this bug move to -> MailNews::Backend ?", "creation_time": "2011-02-20T12:54:04Z", "text": "Hmm rsx11m, based on the latest comments should this bug move to -> MailNews::Backend ?"}, {"text": "That's where it is already, or do you mean MailNews Core instead of SeaMonkey?\nI'll double-check on my prior assessment that it didn't occur with Thunderbird.", "is_private": false, "creation_time": "2011-02-20T14:18:21Z", "raw_text": "That's where it is already, or do you mean MailNews Core instead of SeaMonkey?\nI'll double-check on my prior assessment that it didn't occur with Thunderbird.", "id": 5292973, "bug_id": 634663, "count": 15, "tags": [], "creator": "rsx11m.pub@gmail.com", "time": "2011-02-20T14:18:21Z", "author": "rsx11m.pub@gmail.com", "attachment_id": null}, {"creator": "philip.chee@gmail.com", "count": 16, "tags": [], "bug_id": 634663, "id": 5293890, "raw_text": "Yeah I mean MailNews Core. Sorry.", "creation_time": "2011-02-21T11:22:12Z", "text": "Yeah I mean MailNews Core. Sorry.", "author": "philip.chee@gmail.com", "time": "2011-02-21T11:22:12Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "is_private": false, "time": "2011-02-26T21:40:26Z", "author": "rsx11m.pub@gmail.com", "creation_time": "2011-02-26T21:40:26Z", "text": "I've been using double-click on the new-mail icon to open Thunderbird as well for a while now, but don't see the focus issue there on the same machines where I've seen it on SeaMonkey during the same time period. Thus, if it's a MailNews Core bug, it may be manifesting in SeaMonkey only, or it's indeed specific to the SeaMonkey code.", "id": 5306604, "raw_text": "I've been using double-click on the new-mail icon to open Thunderbird as well for a while now, but don't see the focus issue there on the same machines where I've seen it on SeaMonkey during the same time period. Thus, if it's a MailNews Core bug, it may be manifesting in SeaMonkey only, or it's indeed specific to the SeaMonkey code.", "tags": [], "count": 17, "creator": "rsx11m.pub@gmail.com", "bug_id": 634663}]}}, "comments": {}}