{"bugs": {"680808": {"comments": [{"creator": "passfree@gmail.com", "is_private": false, "count": 0, "author": "passfree@gmail.com", "creation_time": "2011-08-21T23:18:10Z", "tags": [], "bug_id": 680808, "time": "2011-08-21T23:18:10Z", "text": "Created attachment 554766\ncrash.txt\n\nUser Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/535.2 (KHTML, like Gecko) Chrome/15.0.854.0 Safari/535.2\n\nSteps to reproduce:\n\nIf I add a special mac menu item such as aboutName and I click on it while the main window is closed, the application will crash.\n\n\nActual results:\n\nThe application crashed.\n\n\nExpected results:\n\nThe application crashes regardless what the oncommand event handler does. It will crash even if it contains a simple alert(1).\n\nI have attached the stack trace but it is not very detailed as it is take from a non-debug build. However, it should be enough to illustrate the problem.", "attachment_id": 554766, "raw_text": "User Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/535.2 (KHTML, like Gecko) Chrome/15.0.854.0 Safari/535.2\n\nSteps to reproduce:\n\nIf I add a special mac menu item such as aboutName and I click on it while the main window is closed, the application will crash.\n\n\nActual results:\n\nThe application crashed.\n\n\nExpected results:\n\nThe application crashes regardless what the oncommand event handler does. It will crash even if it contains a simple alert(1).\n\nI have attached the stack trace but it is not very detailed as it is take from a non-debug build. However, it should be enough to illustrate the problem.", "id": 5668436}, {"count": 1, "bug_id": 680808, "creator": "mstange.moz@gmail.com", "is_private": false, "tags": [], "time": "2011-08-22T10:05:21Z", "text": "Can you reproduce this in Firefox, too? I can't.\nA stack trace from a debug build would be very helpful.", "author": "mstange.moz@gmail.com", "creation_time": "2011-08-22T10:05:21Z", "raw_text": "Can you reproduce this in Firefox, too? I can't.\nA stack trace from a debug build would be very helpful.", "attachment_id": null, "id": 5668824}, {"creation_time": "2011-08-22T12:53:39Z", "author": "passfree@gmail.com", "text": "Is there a way to get a debug build instead of building it myself? It will be useful if such thing is available as I will be able to get much more useful reports through. I don't always have a debug build available as I am trying to work with the release versions (available for general consumption) instead.", "time": "2011-08-22T12:53:39Z", "tags": [], "is_private": false, "creator": "passfree@gmail.com", "id": 5669009, "attachment_id": null, "raw_text": "Is there a way to get a debug build instead of building it myself? It will be useful if such thing is available as I will be able to get much more useful reports through. I don't always have a debug build available as I am trying to work with the release versions (available for general consumption) instead.", "bug_id": 680808, "count": 2}, {"is_private": false, "creator": "mstange.moz@gmail.com", "count": 3, "creation_time": "2011-08-23T09:57:21Z", "author": "mstange.moz@gmail.com", "text": "What's your setup? Are you using XULRunner, or making a Firefox extension?\nI can't find any debug XULRunner binaries, but Firefox debug binaries are here, for example: http://ftp.mozilla.org/pub/mozilla.org/firefox/tinderbox-builds/mozilla-central-macosx64-debug/1314061045/firefox-9.0a1.en-US.mac64.dmg", "time": "2011-08-23T09:57:21Z", "tags": [], "bug_id": 680808, "attachment_id": null, "raw_text": "What's your setup? Are you using XULRunner, or making a Firefox extension?\nI can't find any debug XULRunner binaries, but Firefox debug binaries are here, for example: http://ftp.mozilla.org/pub/mozilla.org/firefox/tinderbox-builds/mozilla-central-macosx64-debug/1314061045/firefox-9.0a1.en-US.mac64.dmg", "id": 5671550}, {"is_private": false, "creator": "passfree@gmail.com", "creation_time": "2011-08-23T18:06:51Z", "author": "passfree@gmail.com", "text": "I forgot that Firefox can run with the -app flag. Here are the details of the crash:\n\nThread 0 Crashed:  Dispatch queue: com.apple.main-thread\n0   XUL                           \t0x0000000102440b76 operator delete(void*, void*) + 10334\n1   com.apple.AppKit              \t0x00007fff80915eda -[NSApplication sendAction:to:from:] + 95\n2   com.apple.AppKit              \t0x00007fff8093a46a -[NSMenuItem _corePerformAction] + 365\n3   com.apple.AppKit              \t0x00007fff8093a1d4 -[NSCarbonMenuImpl performActionWithHighlightingForItemAtIndex:] + 121\n4   com.apple.AppKit              \t0x00007fff80bbfcf4 -[NSMenu _internalPerformActionForItemAtIndex:] + 35\n5   com.apple.AppKit              \t0x00007fff80a719e9 -[NSCarbonMenuImpl _carbonCommandProcessEvent:handlerCallRef:] + 136\n6   com.apple.AppKit              \t0x00007fff8091c99c NSSLMMenuEventHandler + 321\n7   com.apple.HIToolbox           \t0x00007fff888ef7f7 DispatchEventToHandlers(EventTargetRec*, OpaqueEventRef*, HandlerCallRec*) + 1002\n8   com.apple.HIToolbox           \t0x00007fff888eed46 SendEventToEventTargetInternal(OpaqueEventRef*, OpaqueEventTargetRef*, HandlerCallRec*) + 395\n9   com.apple.HIToolbox           \t0x00007fff8890ca81 SendEventToEventTarget + 45\n10  com.apple.HIToolbox           \t0x00007fff8893bc35 SendHICommandEvent(unsigned int, HICommand const*, unsigned int, unsigned int, unsigned char, void const*, OpaqueEventTargetRef*, OpaqueEventTargetRef*, OpaqueEventRef**) + 387\n11  com.apple.HIToolbox           \t0x00007fff88968a0a SendMenuCommandWithContextAndModifiers + 56\n12  com.apple.HIToolbox           \t0x00007fff889689c2 SendMenuItemSelectedEvent + 101\n13  com.apple.HIToolbox           \t0x00007fff889688d2 FinishMenuSelection(SelectionData*, MenuResult*, MenuResult*) + 150\n14  com.apple.HIToolbox           \t0x00007fff88949c27 MenuSelectCore(MenuData*, Point, double, unsigned int, OpaqueMenuRef**, unsigned short*) + 467\n15  com.apple.HIToolbox           \t0x00007fff8894937c _HandleMenuSelection2 + 453\n16  com.apple.AppKit              \t0x00007fff807ed851 _NSHandleCarbonMenuEvent + 236\n17  com.apple.AppKit              \t0x00007fff807c1362 _DPSNextEvent + 1908\n18  com.apple.AppKit              \t0x00007fff807c0801 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 155\n19  com.apple.AppKit              \t0x00007fff8078668f -[NSApplication run] + 395\n20  XUL                           \t0x000000010245764e operator delete(void*, void*) + 103222\n21  XUL                           \t0x00000001021aa462 JSWrapper::wrapperHandler(JSObject const*) + 1004660\n22  XUL                           \t0x000000010103884c XRE_main + 10996\n23  org.mozilla.nightlydebug      \t0x0000000100001b56 start + 1342\n24  org.mozilla.nightlydebug      \t0x0000000100001dbd start + 1957\n25  org.mozilla.nightlydebug      \t0x000000010000164c start + 52", "tags": [], "time": "2011-08-23T18:06:51Z", "attachment_id": null, "raw_text": "I forgot that Firefox can run with the -app flag. Here are the details of the crash:\n\nThread 0 Crashed:  Dispatch queue: com.apple.main-thread\n0   XUL                           \t0x0000000102440b76 operator delete(void*, void*) + 10334\n1   com.apple.AppKit              \t0x00007fff80915eda -[NSApplication sendAction:to:from:] + 95\n2   com.apple.AppKit              \t0x00007fff8093a46a -[NSMenuItem _corePerformAction] + 365\n3   com.apple.AppKit              \t0x00007fff8093a1d4 -[NSCarbonMenuImpl performActionWithHighlightingForItemAtIndex:] + 121\n4   com.apple.AppKit              \t0x00007fff80bbfcf4 -[NSMenu _internalPerformActionForItemAtIndex:] + 35\n5   com.apple.AppKit              \t0x00007fff80a719e9 -[NSCarbonMenuImpl _carbonCommandProcessEvent:handlerCallRef:] + 136\n6   com.apple.AppKit              \t0x00007fff8091c99c NSSLMMenuEventHandler + 321\n7   com.apple.HIToolbox           \t0x00007fff888ef7f7 DispatchEventToHandlers(EventTargetRec*, OpaqueEventRef*, HandlerCallRec*) + 1002\n8   com.apple.HIToolbox           \t0x00007fff888eed46 SendEventToEventTargetInternal(OpaqueEventRef*, OpaqueEventTargetRef*, HandlerCallRec*) + 395\n9   com.apple.HIToolbox           \t0x00007fff8890ca81 SendEventToEventTarget + 45\n10  com.apple.HIToolbox           \t0x00007fff8893bc35 SendHICommandEvent(unsigned int, HICommand const*, unsigned int, unsigned int, unsigned char, void const*, OpaqueEventTargetRef*, OpaqueEventTargetRef*, OpaqueEventRef**) + 387\n11  com.apple.HIToolbox           \t0x00007fff88968a0a SendMenuCommandWithContextAndModifiers + 56\n12  com.apple.HIToolbox           \t0x00007fff889689c2 SendMenuItemSelectedEvent + 101\n13  com.apple.HIToolbox           \t0x00007fff889688d2 FinishMenuSelection(SelectionData*, MenuResult*, MenuResult*) + 150\n14  com.apple.HIToolbox           \t0x00007fff88949c27 MenuSelectCore(MenuData*, Point, double, unsigned int, OpaqueMenuRef**, unsigned short*) + 467\n15  com.apple.HIToolbox           \t0x00007fff8894937c _HandleMenuSelection2 + 453\n16  com.apple.AppKit              \t0x00007fff807ed851 _NSHandleCarbonMenuEvent + 236\n17  com.apple.AppKit              \t0x00007fff807c1362 _DPSNextEvent + 1908\n18  com.apple.AppKit              \t0x00007fff807c0801 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 155\n19  com.apple.AppKit              \t0x00007fff8078668f -[NSApplication run] + 395\n20  XUL                           \t0x000000010245764e operator delete(void*, void*) + 103222\n21  XUL                           \t0x00000001021aa462 JSWrapper::wrapperHandler(JSObject const*) + 1004660\n22  XUL                           \t0x000000010103884c XRE_main + 10996\n23  org.mozilla.nightlydebug      \t0x0000000100001b56 start + 1342\n24  org.mozilla.nightlydebug      \t0x0000000100001dbd start + 1957\n25  org.mozilla.nightlydebug      \t0x000000010000164c start + 52", "id": 5672479, "count": 4, "bug_id": 680808}, {"count": 5, "creator": "mstange.moz@gmail.com", "is_private": false, "time": "2011-08-23T20:57:34Z", "tags": [], "bug_id": 680808, "text": "Steven, does this look familiar to you?", "author": "mstange.moz@gmail.com", "creation_time": "2011-08-23T20:57:34Z", "raw_text": "Steven, does this look familiar to you?", "attachment_id": null, "id": 5672981}, {"attachment_id": null, "raw_text": "> Steven, does this look familiar to you?\n\nNo, it doesn't.\n\nPassfree, if possible please write and attach a testcase to this bug (one with which we can reproduce it).\n\nAnd since you're using a non-debug build, all the Mozilla-specific symbols in your stack from comment #4 are (probably) bogus.  You'll probably need to create your own debug build, but do try the build Markus mentioned in comment #3.\n\nAnd do answer Markus' questions from comment #3.", "id": 5673693, "is_private": false, "creator": "smichaud@pobox.com", "creation_time": "2011-08-24T00:51:55Z", "author": "smichaud@pobox.com", "text": "> Steven, does this look familiar to you?\n\nNo, it doesn't.\n\nPassfree, if possible please write and attach a testcase to this bug (one with which we can reproduce it).\n\nAnd since you're using a non-debug build, all the Mozilla-specific symbols in your stack from comment #4 are (probably) bogus.  You'll probably need to create your own debug build, but do try the build Markus mentioned in comment #3.\n\nAnd do answer Markus' questions from comment #3.", "time": "2011-08-24T00:51:55Z", "tags": [], "count": 6, "bug_id": 680808}, {"id": 5683872, "attachment_id": 556437, "raw_text": "This simple application illustrates the crash. This is what you need to do\n\n1. Launch the application\n2. Test the aboutName menu by clicking on the application menu and selecting the first item\n3. Close the main window\n4. Click on the application menu and select the first item\n\nAt this stage the application should have crashed. It works on xulrunner 2.0, 6.0, latest firefox, etc...", "creation_time": "2011-08-28T23:55:53Z", "author": "passfree@gmail.com", "text": "Created attachment 556437\ntest case\n\nThis simple application illustrates the crash. This is what you need to do\n\n1. Launch the application\n2. Test the aboutName menu by clicking on the application menu and selecting the first item\n3. Close the main window\n4. Click on the application menu and select the first item\n\nAt this stage the application should have crashed. It works on xulrunner 2.0, 6.0, latest firefox, etc...", "time": "2011-08-28T23:55:53Z", "bug_id": 680808, "tags": [], "is_private": false, "creator": "passfree@gmail.com", "count": 7}, {"creator": "passfree@gmail.com", "is_private": false, "count": 8, "author": "passfree@gmail.com", "creation_time": "2011-08-30T10:20:33Z", "time": "2011-08-30T10:20:33Z", "bug_id": 680808, "tags": [], "text": "has anyone confirmed the issue?", "attachment_id": null, "raw_text": "has anyone confirmed the issue?", "id": 5687294}, {"count": 9, "is_private": false, "creator": "mstange.moz@gmail.com", "text": "Confirmed.\n\nCreateNativeAppMenuItem creates an NSMenuItem that points to the current nsMenuBarX object. When the window closes, the window's nsMenuBarX object is destroyed, but the NSMenuItem stays alive with a dangling pointer ([[item info] menuGroupOwner).", "bug_id": 680808, "time": "2011-08-30T12:17:48Z", "tags": [], "creation_time": "2011-08-30T12:17:48Z", "author": "mstange.moz@gmail.com", "raw_text": "Confirmed.\n\nCreateNativeAppMenuItem creates an NSMenuItem that points to the current nsMenuBarX object. When the window closes, the window's nsMenuBarX object is destroyed, but the NSMenuItem stays alive with a dangling pointer ([[item info] menuGroupOwner).", "attachment_id": null, "id": 5687444}]}}, "comments": {}}