{"comments": {}, "bugs": {"1639969": {"comments": [{"is_private": false, "text": "Due to the fact that we add the storage permission asynchronously, so it would happen race condition that the storage permission could be added after the test finishes. This would affect the next test. So, we have to wait explicitly until the storage permission is available in the parent process before we do cleaning up.", "raw_text": "Due to the fact that we add the storage permission asynchronously, so it would happen race condition that the storage permission could be added after the test finishes. This would affect the next test. So, we have to wait explicitly until the storage permission is available in the parent process before we do cleaning up.", "author": "tihuang@mozilla.com", "id": 14836169, "bug_id": 1639969, "attachment_id": null, "creation_time": "2020-05-21T19:17:24Z", "creator": "tihuang@mozilla.com", "tags": [], "count": 0, "time": "2020-05-21T19:17:24Z"}, {"is_private": false, "text": "Created attachment 9150842\nBug 1639969 - explicitly wait the storage permission before cleaning up in test 'browser_storageAccessWithHeuristics.js'. r?baku\n\n\nOur ETP backend adds the storage permission asynchronously when adding\nstorage access. So, we have to wait the permission is ready in the\nparent process before cleaning up. Otherwise, we will have a incorrect\nstate after the test.", "raw_text": "\nOur ETP backend adds the storage permission asynchronously when adding\nstorage access. So, we have to wait the permission is ready in the\nparent process before cleaning up. Otherwise, we will have a incorrect\nstate after the test.", "id": 14836190, "author": "tihuang@mozilla.com", "bug_id": 1639969, "attachment_id": 9150842, "creation_time": "2020-05-21T19:29:00Z", "creator": "tihuang@mozilla.com", "tags": [], "count": 1, "time": "2020-05-21T19:29:00Z"}, {"bug_id": 1639969, "attachment_id": null, "is_private": false, "text": "Pushed by tihuang@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/49f3f0221d39\nexplicitly wait the storage permission before cleaning up in test 'browser_storageAccessWithHeuristics.js'. r=baku", "raw_text": "Pushed by tihuang@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/49f3f0221d39\nexplicitly wait the storage permission before cleaning up in test 'browser_storageAccessWithHeuristics.js'. r=baku", "author": "pulsebot@bots.tld", "id": 14837132, "tags": [], "count": 2, "time": "2020-05-22T07:31:29Z", "creation_time": "2020-05-22T07:31:29Z", "creator": "pulsebot@bots.tld"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/49f3f0221d39", "raw_text": "https://hg.mozilla.org/mozilla-central/rev/49f3f0221d39", "is_private": false, "author": "apavel@mozilla.com", "id": 14838361, "bug_id": 1639969, "attachment_id": null, "creator": "apavel@mozilla.com", "creation_time": "2020-05-22T21:46:22Z", "count": 3, "tags": ["bugherder"], "time": "2020-05-22T21:46:22Z"}]}}}