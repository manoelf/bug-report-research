{"bugs": {"693460": {"comments": [{"time": "2011-10-10T22:12:32Z", "raw_text": "The idea of this bug is to get a sense of what will happen if we have compartment-per-global and if we allocate slot arrays as GC things (bug 648320). We'll probably have a lot more thingKinds and a lot more compartments. If we continue to have at least one arena per (thingKind, compartment) pair, we're probably going to have a lot of fragmentation of the arena-unused variety. We have ideas about how to rework things to reduce the fragmentation, but they're pretty speculative.\n\ndmandelin suggested we create a log of the following:\n- when a compartment or global is created/destroyed\n- when a GC thing is created and when it gets GCed\n- when slots are created/resized\n\nThen we could easily model different ideas using a script or something. We wouldn't have to touch SpiderMonkey code at all. I really like this idea.", "text": "The idea of this bug is to get a sense of what will happen if we have compartment-per-global and if we allocate slot arrays as GC things (bug 648320). We'll probably have a lot more thingKinds and a lot more compartments. If we continue to have at least one arena per (thingKind, compartment) pair, we're probably going to have a lot of fragmentation of the arena-unused variety. We have ideas about how to rework things to reduce the fragmentation, but they're pretty speculative.\n\ndmandelin suggested we create a log of the following:\n- when a compartment or global is created/destroyed\n- when a GC thing is created and when it gets GCed\n- when slots are created/resized\n\nThen we could easily model different ideas using a script or something. We wouldn't have to touch SpiderMonkey code at all. I really like this idea.", "count": 0, "author": "bill.mccloskey@gmail.com", "bug_id": 693460, "id": 5772888, "attachment_id": null, "tags": [], "creator": "bill.mccloskey@gmail.com", "creation_time": "2011-10-10T22:12:32Z", "is_private": false}]}}, "comments": {}}