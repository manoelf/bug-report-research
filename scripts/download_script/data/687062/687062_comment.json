{"comments": {}, "bugs": {"687062": {"comments": [{"count": 0, "id": 5720166, "attachment_id": 560547, "is_private": false, "raw_text": "User Agent: Mozilla/5.0 (Windows NT 6.1; rv:7.0) Gecko/20100101 Firefox/7.0\nBuild ID: 20110908135051\n\nSteps to reproduce:\n\nI want to load a RGBA BMP image into a WebGL texture. \nThe texture is for a tree model. The RGB channel of the texture stored color map and the alpha channel of which stored the opacity map of the tree leaves. \n\n\nActual results:\n\nEverything works fine in chrome, but in firefox, I found that only RGB parts of the image were loaded into the texture, however, the alpha channel is always 1.0 no\nmatter what the value is in the image.\n\n\nExpected results:\n\nThe alpha value of the image should enable WebGL performs alpha testing when rendering the tree model.", "time": "2011-09-16T15:03:36Z", "creation_time": "2011-09-16T15:03:36Z", "creator": "zlgong1984@gmail.com", "bug_id": 687062, "text": "Created attachment 560547\nA test case of the problem. This demo works fine in Chrome but rendered uncorrectly in firefox.\n\nUser Agent: Mozilla/5.0 (Windows NT 6.1; rv:7.0) Gecko/20100101 Firefox/7.0\nBuild ID: 20110908135051\n\nSteps to reproduce:\n\nI want to load a RGBA BMP image into a WebGL texture. \nThe texture is for a tree model. The RGB channel of the texture stored color map and the alpha channel of which stored the opacity map of the tree leaves. \n\n\nActual results:\n\nEverything works fine in chrome, but in firefox, I found that only RGB parts of the image were loaded into the texture, however, the alpha channel is always 1.0 no\nmatter what the value is in the image.\n\n\nExpected results:\n\nThe alpha value of the image should enable WebGL performs alpha testing when rendering the tree model.", "tags": [], "author": "zlgong1984@gmail.com"}, {"creator": "jacob.benoit.1@gmail.com", "time": "2011-09-16T19:50:50Z", "creation_time": "2011-09-16T19:50:50Z", "author": "jacob.benoit.1@gmail.com", "is_private": false, "id": 5720676, "count": 1, "text": "Brian tells me that it's worth trying Firefox 9 (Nightly) as this might have changed.\n\nAlso notice that the BMP file format is obsolete and if you have a choice, it's better to use PNG.", "bug_id": 687062, "tags": [], "attachment_id": null, "raw_text": "Brian tells me that it's worth trying Firefox 9 (Nightly) as this might have changed.\n\nAlso notice that the BMP file format is obsolete and if you have a choice, it's better to use PNG."}, {"id": 5720680, "count": 2, "is_private": false, "time": "2011-09-16T19:56:33Z", "creation_time": "2011-09-16T19:56:33Z", "creator": "jacob.benoit.1@gmail.com", "author": "jacob.benoit.1@gmail.com", "attachment_id": null, "raw_text": "I confirm that the texture is working fine in Firefox 9 :-)\n\nNotice that to allow using local files as textures you need to go to about:config and set security.fileuri.strict_origin_policy to false. Only do this in a test profile, as this is a security vulnerability.", "tags": [], "text": "I confirm that the texture is working fine in Firefox 9 :-)\n\nNotice that to allow using local files as textures you need to go to about:config and set security.fileuri.strict_origin_policy to false. Only do this in a test profile, as this is a security vulnerability.", "bug_id": 687062}, {"author": "jacob.benoit.1@gmail.com", "time": "2011-09-16T19:58:09Z", "creation_time": "2011-09-16T19:58:09Z", "creator": "jacob.benoit.1@gmail.com", "count": 3, "id": 5720682, "is_private": false, "bug_id": 687062, "text": "oops. No, not fixed in Firefox 9, sorry. The texture is indeed rendered as fully opaque in Firefox 9 while it is transparent in Chrome 13.", "tags": [], "raw_text": "oops. No, not fixed in Firefox 9, sorry. The texture is indeed rendered as fully opaque in Firefox 9 while it is transparent in Chrome 13.", "attachment_id": null}, {"count": 4, "id": 5720707, "is_private": false, "creation_time": "2011-09-16T20:28:45Z", "time": "2011-09-16T20:28:45Z", "creator": "netzen@gmail.com", "author": "netzen@gmail.com", "attachment_id": null, "raw_text": "Support was actually added in Firefox 9 for transparent bitmaps, but we only enable it currently for bitmaps loaded inside an icon file.  I did this only to keep everything the same as it used to be and not cause new regressions.  This shouldn't be too hard to enable.\n\nI want to test it, and verify if we should only enable it for certain bitmap headers, but all we should have to do is default mUseAlphaData to true in the BMP decoder.\n\nhttp://mxr.mozilla.org/mozilla-central/source/modules/libpr0n/decoders/nsBMPDecoder.cpp#76", "bug_id": 687062, "text": "Support was actually added in Firefox 9 for transparent bitmaps, but we only enable it currently for bitmaps loaded inside an icon file.  I did this only to keep everything the same as it used to be and not cause new regressions.  This shouldn't be too hard to enable.\n\nI want to test it, and verify if we should only enable it for certain bitmap headers, but all we should have to do is default mUseAlphaData to true in the BMP decoder.\n\nhttp://mxr.mozilla.org/mozilla-central/source/modules/libpr0n/decoders/nsBMPDecoder.cpp#76", "tags": []}, {"time": "2011-09-17T02:40:20Z", "creation_time": "2011-09-17T02:40:20Z", "creator": "zlgong1984@gmail.com", "author": "zlgong1984@gmail.com", "count": 5, "id": 5721136, "is_private": false, "bug_id": 687062, "text": "We are working on Oak3D project which is an free WebGL based javascript framwork.\nSo we can not put certain limitation on what kind of image the developers should use, indeed, this often depends on artist who creating the art asset.\nAnd opacity map I think is often used in real-time rendering when simulate plants,railings and so on, so I hope this can be fixed in the near future:)\nThank you very much!", "tags": [], "attachment_id": null, "raw_text": "We are working on Oak3D project which is an free WebGL based javascript framwork.\nSo we can not put certain limitation on what kind of image the developers should use, indeed, this often depends on artist who creating the art asset.\nAnd opacity map I think is often used in real-time rendering when simulate plants,railings and so on, so I hope this can be fixed in the near future:)\nThank you very much!"}, {"bug_id": 687062, "text": "For a 40 byte file headers, the BMP spec says that the 4th byte should be reserved and always 0.\nThe BMP file format does not specify what should happen when this value is not 0.\nThe ICO file format though specifies that the 4th byte can be used for transparency (if not all 0) when a BMP is stored.\n\nPrograms that use the 4th byte for alpha data: Google Chrome, and GIMP \nPrograms that do not use the 4th byte: Firefox all versions, IE, Windows, Photoshop\n\nI don't see any harm in supporting this for BMP files though.\nSupporting it is only 1 line of code because the code is already there for handling of ICO files that use the transparency byte for each quad.", "tags": [], "raw_text": "For a 40 byte file headers, the BMP spec says that the 4th byte should be reserved and always 0.\nThe BMP file format does not specify what should happen when this value is not 0.\nThe ICO file format though specifies that the 4th byte can be used for transparency (if not all 0) when a BMP is stored.\n\nPrograms that use the 4th byte for alpha data: Google Chrome, and GIMP \nPrograms that do not use the 4th byte: Firefox all versions, IE, Windows, Photoshop\n\nI don't see any harm in supporting this for BMP files though.\nSupporting it is only 1 line of code because the code is already there for handling of ICO files that use the transparency byte for each quad.", "attachment_id": null, "author": "netzen@gmail.com", "time": "2011-09-18T22:00:03Z", "creation_time": "2011-09-18T22:00:03Z", "creator": "netzen@gmail.com", "count": 6, "id": 5722297, "is_private": false}, {"attachment_id": null, "raw_text": "By the way, BMPs with BITMAPV3INFOHEADER and above support transparency properly but I don't know of any program that generate them.  The bitmap in this bug report falls into the case of a 40 byte file header which is for BITMAPINFOHEADER and is using the 4th byte as alpha (as if it were a BMP inside of an ICO).", "text": "By the way, BMPs with BITMAPV3INFOHEADER and above support transparency properly but I don't know of any program that generate them.  The bitmap in this bug report falls into the case of a 40 byte file header which is for BITMAPINFOHEADER and is using the 4th byte as alpha (as if it were a BMP inside of an ICO).", "bug_id": 687062, "tags": [], "is_private": false, "id": 5722299, "count": 7, "creator": "netzen@gmail.com", "creation_time": "2011-09-18T22:03:44Z", "time": "2011-09-18T22:03:44Z", "author": "netzen@gmail.com"}, {"is_private": false, "id": 5722303, "count": 8, "author": "netzen@gmail.com", "creator": "netzen@gmail.com", "time": "2011-09-18T22:16:04Z", "creation_time": "2011-09-18T22:16:04Z", "raw_text": "Confirmed that the WebGL texture works now in the demo.\nWe support RGBA BMPs the same as Google Chrome and GIMP with this patch. \nWe did not support RGBA BMPs ever before this patch though.", "attachment_id": 560827, "tags": [], "bug_id": 687062, "text": "Created attachment 560827\nPatch for adding RGBA BMP support\n\nConfirmed that the WebGL texture works now in the demo.\nWe support RGBA BMPs the same as Google Chrome and GIMP with this patch. \nWe did not support RGBA BMPs ever before this patch though."}, {"attachment_id": 560827, "raw_text": "Review of attachment 560827:\n-----------------------------------------------------------------\n\nI think you should just remove mUseAlphaData, since now it's only ever set to true.", "bug_id": 687062, "text": "Comment on attachment 560827\nPatch for adding RGBA BMP support\n\nReview of attachment 560827:\n-----------------------------------------------------------------\n\nI think you should just remove mUseAlphaData, since now it's only ever set to true.", "tags": [], "is_private": false, "id": 5723881, "count": 9, "creator": "joe@drew.ca", "creation_time": "2011-09-19T20:25:41Z", "time": "2011-09-19T20:25:41Z", "author": "joe@drew.ca"}, {"text": "ok will do.", "bug_id": 687062, "tags": [], "attachment_id": null, "raw_text": "ok will do.", "time": "2011-09-19T22:27:35Z", "creation_time": "2011-09-19T22:27:35Z", "creator": "netzen@gmail.com", "author": "netzen@gmail.com", "count": 10, "id": 5724227, "is_private": false}, {"attachment_id": 561112, "raw_text": "", "text": "Created attachment 561112\nRemoved mUseAlphaData and support this mode for BMP and ICO now", "bug_id": 687062, "tags": [], "is_private": false, "count": 11, "id": 5724783, "creator": "netzen@gmail.com", "time": "2011-09-20T03:30:49Z", "creation_time": "2011-09-20T03:30:49Z", "author": "netzen@gmail.com"}, {"text": "Pushed to try:\nhttps://tbpl.mozilla.org/?tree=Try&usebuildbot=1&rev=574c6321fef4", "bug_id": 687062, "tags": [], "raw_text": "Pushed to try:\nhttps://tbpl.mozilla.org/?tree=Try&usebuildbot=1&rev=574c6321fef4", "attachment_id": null, "author": "netzen@gmail.com", "time": "2011-09-21T19:56:58Z", "creation_time": "2011-09-21T19:56:58Z", "creator": "netzen@gmail.com", "count": 12, "id": 5729089, "is_private": false}, {"time": "2012-06-20T08:28:55Z", "creation_time": "2012-06-20T08:28:55Z", "creator": "VYV03354@nifty.ne.jp", "author": "VYV03354@nifty.ne.jp", "count": 13, "id": 6406284, "is_private": false, "text": "What happened after pushing to try?", "bug_id": 687062, "tags": [], "attachment_id": null, "raw_text": "What happened after pushing to try?"}, {"author": "netzen@gmail.com", "creation_time": "2012-06-20T16:15:56Z", "time": "2012-06-20T16:15:56Z", "creator": "netzen@gmail.com", "count": 14, "id": 6407428, "is_private": false, "tags": [], "text": "Sorry not sure what happened on this one, I think this patch should be redone/updated though after bug 722555 lands.", "bug_id": 687062, "raw_text": "Sorry not sure what happened on this one, I think this patch should be redone/updated though after bug 722555 lands.", "attachment_id": null}, {"raw_text": "Bug 722555 was landed far back. Is this bug forgotten again?", "attachment_id": null, "bug_id": 687062, "text": "Bug 722555 was landed far back. Is this bug forgotten again?", "tags": [], "is_private": false, "count": 15, "id": 8624332, "author": "VYV03354@nifty.ne.jp", "creator": "VYV03354@nifty.ne.jp", "time": "2014-04-05T06:30:33Z", "creation_time": "2014-04-05T06:30:33Z"}, {"count": 16, "id": 8624612, "is_private": false, "author": "netzen@gmail.com", "creation_time": "2014-04-05T13:36:44Z", "time": "2014-04-05T13:36:44Z", "creator": "netzen@gmail.com", "raw_text": "Note this is not a regression from bug 722555. \nIt is not forgotten it's just was never a priority for me in comparison to other things.\nIf you want this fixed please try to find another owner.", "attachment_id": null, "bug_id": 687062, "text": "Note this is not a regression from bug 722555. \nIt is not forgotten it's just was never a priority for me in comparison to other things.\nIf you want this fixed please try to find another owner.", "tags": []}, {"tags": [], "bug_id": 687062, "text": "No assignee, updating the status.", "attachment_id": null, "raw_text": "No assignee, updating the status.", "creation_time": "2018-10-15T08:44:33Z", "time": "2018-10-15T08:44:33Z", "creator": "sledru@mozilla.com", "author": "sledru@mozilla.com", "id": 13686267, "count": 17, "is_private": false}]}}}