{"bugs": {"631455": {"comments": [{"time": "2011-02-04T05:59:19Z", "is_private": false, "attachment_id": null, "bug_id": 631455, "tags": [], "creator": "rick.brown@immi.gov.au", "count": 0, "raw_text": "User-Agent:       Mozilla/5.0 (Windows NT 5.1; rv:2.0b10) Gecko/20100101 Firefox/4.0b10\nBuild Identifier: Mozilla/5.0 (Windows NT 5.1; rv:2.0b10) Gecko/20100101 Firefox/4.0b10\n\nWhen performing client-side XSLT in Firefox the HTML result produced by the transform is not correctly interpreted as HTML by Firefox (which seems to think it is dealing with XML).\n\nExecuting the line \"document.body.innerHTML = document.body.innerHTML\" resolves the problem and Firefox renders the HTML correctly.\n\nRemoving the attribute 'xmlns=\"http://www.w3.org/1999/xhtml\"' from the xsl:stylesheet element makes this issue go away. \n\nChrome 9 and IE8 do not have this problem.\n\nReproducible: Always\n\nSteps to Reproduce:\n1. Save the included XML and XSL into a directory where you can execute from your webserver.\n2. Load the XML in Firefox.\n\nXSL FILE:\n<?xml version=\"1.0\"?>\n<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n\txmlns=\"http://www.w3.org/1999/xhtml\"\n\txmlns:ui=\"http://dummy.com/mynamespace\"\n\tversion=\"1.0\">\n\n<xsl:output method=\"html\"\n\tdoctype-public=\"XSLT-compat\"\n\tencoding=\"UTF-8\"\n\tindent=\"no\"\n\tomit-xml-declaration=\"yes\"/>\n\n<xsl:strip-space elements=\"*\"/>\n\n<xsl:template match=\"ui:example\">\n\t<html>\n\t\t<head>\n\t\t\t<title>Example</title>\n\t\t</head>\n\t\t<body>\n\t\t\t<form action=\".\">\n\t\t\t\t<xsl:apply-templates/>\n\t\t\t</form>\n\t\t</body>\n\t</html>\n</xsl:template>\n\n<xsl:template match=\"ui:table\">\n\t<xsl:variable name=\"id\" select=\"@id\"/>\n\t<xsl:variable name=\"functionalClass\">\n\t\t<xsl:if test=\"ui:pagination\">\n\t\t\t<xsl:text> paginatedTable</xsl:text>\n\t\t</xsl:if>\n\t</xsl:variable>\n\t<div id=\"{$id}\">\n\t\t<xsl:attribute name=\"class\">\n\t\t\t<xsl:text>table-wrapper</xsl:text>\n\t\t</xsl:attribute>\n\t\t<table>\n\t\t\t<xsl:apply-templates select=\"ui:thead\" mode=\"table\"/>\n\t\t\t<xsl:apply-templates select=\"ui:tbody\" mode=\"table\"/>\n\t\t\t<xsl:call-template name=\"tfoot\"/>\n\t\t</table>\n\t</div>\n</xsl:template>\n\n<xsl:template match=\"ui:pagination\">\n\t<xsl:variable name='tableId' select=\"../@id\"/>\n\t<xsl:variable name='name'>\n\t\t<xsl:value-of select=\"concat($tableId, '.page')\"/>\n\t</xsl:variable>\n\t<xsl:variable name='pages'>\n\t\t<xsl:value-of select=\"ceiling(@rows div @rowsPerPage)\"/>\n\t</xsl:variable>\n\t<xsl:if test=\"@rows &gt; 0\">\n\t\t<xsl:element name=\"LABEL\">\n\t\t\t<xsl:attribute name=\"for\">\n\t\t\t\t<xsl:value-of select=\"$name\"/>\n\t\t\t</xsl:attribute>\n\t\t\t<xsl:variable name=\"resultSuffix\">\n\t\t\t\t<xsl:if test=\"@rows != '1'\">\n\t\t\t\t\t<xsl:text>s</xsl:text>\n\t\t\t\t</xsl:if>\n\t\t\t</xsl:variable>\n\t\t\t<xsl:value-of select=\"concat(@rows,' Result', $resultSuffix, ', page: ')\"/>\n\t\t</xsl:element>\n\t\t<xsl:element name=\"SELECT\">\n\t\t\t<xsl:attribute name=\"id\">\n\t\t\t\t<xsl:value-of select=\"$name\"/>\n\t\t\t</xsl:attribute>\n\t\t\t<xsl:attribute name=\"class\">\n\t\t\t\t<xsl:text>paginationList</xsl:text>\n\t\t\t</xsl:attribute>\n\t\t\t<xsl:attribute name=\"name\">\n\t\t\t\t<xsl:value-of select=\"$name\"/>\n\t\t\t</xsl:attribute>\n\t\t\t<xsl:call-template name=\"pagination.option.for.loop\">\n\t\t\t\t<xsl:with-param name=\"i\">0</xsl:with-param>\n\t\t\t\t<xsl:with-param name=\"count\"><xsl:value-of select=\"$pages\"/></xsl:with-param>\n\t\t\t\t<xsl:with-param name=\"current\"><xsl:value-of select=\"@currentPage\"/></xsl:with-param>\n\t\t\t</xsl:call-template>\n\t\t</xsl:element>\n\t\t<xsl:variable name=\"buttonType\">\n\t\t\t<xsl:text>button</xsl:text>\n\t\t</xsl:variable>\n\t\t<xsl:call-template name=\"paginationButton\">\n\t\t\t<xsl:with-param name=\"title\" select=\"'First page'\"/>\n\t\t\t<xsl:with-param name=\"type\" select=\"$buttonType\"/>\n\t\t\t<xsl:with-param name=\"idSuffix\" select=\"'1'\"/>\n\t\t</xsl:call-template>\n\t\t<xsl:call-template name=\"paginationButton\">\n\t\t\t<xsl:with-param name=\"title\" select=\"'Previous page'\"/>\n\t\t\t<xsl:with-param name=\"type\" select=\"$buttonType\"/>\n\t\t\t<xsl:with-param name=\"idSuffix\" select=\"'2'\"/>\n\t\t</xsl:call-template>\n\t\t<xsl:call-template name=\"paginationButton\">\n\t\t\t<xsl:with-param name=\"title\" select=\"'Next page'\"/>\n\t\t\t<xsl:with-param name=\"type\" select=\"$buttonType\"/>\n\t\t\t<xsl:with-param name=\"idSuffix\" select=\"'3'\"/>\n\t\t</xsl:call-template>\n\t\t<xsl:call-template name=\"paginationButton\">\n\t\t\t<xsl:with-param name=\"title\" select=\"'Last page'\"/>\n\t\t\t<xsl:with-param name=\"type\" select=\"$buttonType\"/>\n\t\t\t<xsl:with-param name=\"idSuffix\" select=\"'4'\"/>\n\t\t</xsl:call-template>\n\t</xsl:if>\n</xsl:template>\n\n<xsl:template match=\"ui:thead\" mode=\"table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<xsl:apply-templates mode=\"table\"/>\n\t\t</tr>\n\t</thead>\n</xsl:template>\n\n<xsl:template match=\"ui:tbody\" mode=\"table\">\n\t<tbody class=\"page\">\n\t\t<xsl:apply-templates mode=\"table\" />\n\t</tbody>\n</xsl:template>\n\n<xsl:template match=\"ui:tr\" mode=\"table\">\n\t<tr>\n\t\t<xsl:apply-templates mode=\"table\"/>\n\t</tr>\n</xsl:template>\n\n<xsl:template match=\"ui:th\" mode=\"table\">\n\t<th>\n\t\t<xsl:value-of select=\".\"/>\n\t</th>\n</xsl:template>\n\n<xsl:template match=\"ui:td\" mode=\"table\">\n\t<td>\n\t\t<xsl:value-of select=\".\"/>\n\t</td>\n</xsl:template>\n\n<xsl:template name=\"tfoot\">\n\t<xsl:variable name=\"hasPagination\">\n\t\t<xsl:choose>\n\t\t\t<xsl:when test=\"ui:pagination\">\n\t\t\t\t<xsl:number value=\"1\" />\n\t\t\t</xsl:when>\n\t\t\t<xsl:otherwise>\n\t\t\t\t<xsl:number value=\"0\" />\n\t\t\t</xsl:otherwise>\n\t\t</xsl:choose>\n\t</xsl:variable>\n\t<xsl:variable name='hasFooterElements'>\n\t\t<xsl:value-of select=\"$hasPagination\"/>\n\t</xsl:variable>\n\t\n\t<xsl:if test=\"$hasFooterElements > 0\">\n\t\t<xsl:variable name=\"numCols\">\n\t\t\t<xsl:choose>\n\t\t\t\t<xsl:when test=\"ui:thead/ui:th\">\n\t\t\t\t\t<xsl:value-of select=\"count(ui:thead/ui:th)\"/>\n\t\t\t\t</xsl:when>\n\t\t\t\t<xsl:when test=\"ui:tbody/ui:tr[position()=1]/ui:td\">\n\t\t\t\t\t<xsl:value-of select=\"count(ui:tbody/ui:tr[position()=1]/ui:td)\"/>\n\t\t\t\t</xsl:when>\n\t\t\t\t<xsl:otherwise>\n\t\t\t\t\t<xsl:number value=\"1\"/>\n\t\t\t\t</xsl:otherwise>\n\t\t\t</xsl:choose>\n\t\t</xsl:variable>\n\n\t\t<xsl:variable name=\"totalCols\">\n\t\t\t<xsl:value-of select=\"$numCols\"/>\n\t\t</xsl:variable>\n\t\t<xsl:variable name='colSpan1'>\n\t\t\t<xsl:value-of select=\"ceiling($totalCols div $hasFooterElements)\"/>\n\t\t</xsl:variable>\n\n\t\t<xsl:variable name='colSpan2'>\n\t\t\t<xsl:value-of select=\"$totalCols - $colSpan1\"/>\n\t\t</xsl:variable>\n\t\t<tfoot>\n\t\t\t<tr>\n\t\t\t\t<xsl:if test=\"$hasPagination = 1\">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<xsl:attribute name=\"colspan\">\n\t\t\t\t\t\t\t<xsl:value-of select=\"$colSpan2\"/>\n\t\t\t\t\t\t</xsl:attribute>\n\t\t\t\t\t\t<xsl:apply-templates select=\"ui:pagination\"/>\n\t\t\t\t\t</td>\n\t\t\t\t</xsl:if>\n\t\t\t</tr>\n\t\t</tfoot>\n\t</xsl:if>\n</xsl:template>\n\n<xsl:template name=\"pagination.option.for.loop\">\n\t<xsl:param name=\"i\" />\n\t<xsl:param name=\"count\" />\n\t<xsl:param name=\"current\" />\n\t<xsl:if test=\"$i &lt; $count\">\n\t\t<option value=\"{$i}\">\n\t\t\t<xsl:if test=\"$i = $current\">\n\t\t\t\t<xsl:attribute name=\"selected\">selected</xsl:attribute>\n\t\t\t</xsl:if>\n\t\t\t<xsl:value-of select=\"$i + 1\"/>\n\t\t</option>\n\n\t\t<xsl:call-template name=\"pagination.option.for.loop\">\n\t\t\t<xsl:with-param name=\"i\">\n\t\t\t\t<xsl:value-of select=\"$i + 1\"/>\n\t\t\t</xsl:with-param>\n\t\t\t<xsl:with-param name=\"count\">\n\t\t\t\t<xsl:value-of select=\"$count\"/>\n\t\t\t</xsl:with-param>\n\t\t\t<xsl:with-param name=\"current\">\n\t\t\t\t<xsl:value-of select=\"$current\"/>\n\t\t\t</xsl:with-param>\n\t\t</xsl:call-template>\n\t</xsl:if>\n</xsl:template>\n\n<xsl:template name=\"paginationButton\">\n\t<xsl:param name=\"name\"/>\n\t<xsl:param name=\"title\"/>\n\t<xsl:param name=\"class\"/>\n\t<xsl:param name=\"value\"/>\n\t<xsl:param name=\"pages\"/>\n\t<xsl:param name=\"type\"/>\n\t<xsl:param name=\"idSuffix\"/>\n\t<xsl:element name=\"BUTTON\">\n\t\t <xsl:attribute name=\"id\">\n\t\t \t<xsl:value-of select=\"concat(../@id,'.pagination.',$idSuffix)\"/>\n\t\t </xsl:attribute>\n\t\t<xsl:if test=\"$class\">\n\t\t\t<xsl:attribute name=\"class\">\n\t\t\t\t<xsl:value-of select=\"$class\"/>\n\t\t\t</xsl:attribute>\n\t\t</xsl:if>\n\t\t<xsl:if test=\"$name\">\n\t\t\t<xsl:attribute name=\"name\">\n\t\t\t\t<xsl:value-of select=\"$name\"/>\n\t\t\t</xsl:attribute>\n\t\t</xsl:if>\n\t\t<xsl:attribute name=\"title\">\n\t\t\t<xsl:value-of select=\"$title\"/>\n\t\t</xsl:attribute>\n\t\t<xsl:attribute name=\"type\">\n\t\t\t<xsl:value-of select=\"$type\"/>\n\t\t</xsl:attribute>\n\t\t<span class=\"offscreen\">\n\t\t\t<xsl:value-of select=\"$title\"/>\n\t\t</span>\n\t</xsl:element>\n</xsl:template>\n</xsl:stylesheet>\n\nXML FILE:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<?xml-stylesheet type=\"text/xsl\" href=\"table.xsl\"?>\n<ui:example\n\txmlns:ui=\"http://dummy.com/mynamespace\"\n    \txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n\txmlns=\"http://www.w3.org/1999/xhtml\"\n\txmlns:html=\"http://www.w3.org/1999/xhtml\">\n\n\t<ui:table id=\"table_1\">\n\t\t<ui:pagination rowsPerPage=\"5\" rows=\"25\" currentPage=\"2\"/>\n\t\t<ui:thead>\n\t\t\t<ui:th>Heading 1</ui:th>\n\t\t\t<ui:th>Heading 2</ui:th>\n\t\t\t<ui:th>Heading 3</ui:th>\n\t\t\t<ui:th>Heading 4</ui:th>\n\t\t\t<ui:th>Heading 5</ui:th>\n\t\t</ui:thead>\n\t\t<ui:tbody>\n\t\t\t<ui:tr rowIndex=\"1\">\n\t\t\t\t<ui:td>Cell 1_1</ui:td>\n\t\t\t\t<ui:td>Cell 1_2</ui:td>\n\t\t\t\t<ui:td>Cell 1_3</ui:td>\n\t\t\t\t<ui:td>Cell 1_4</ui:td>\n\t\t\t\t<ui:td>Cell 1_5</ui:td>\n\t\t\t</ui:tr>\n\t\t\t<ui:tr rowIndex=\"2\">\n\t\t\t\t<ui:td>Cell 2_1</ui:td>\n\t\t\t\t<ui:td>Cell 2_2</ui:td>\n\t\t\t\t<ui:td>Cell 2_3</ui:td>\n\t\t\t\t<ui:td>Cell 2_4</ui:td>\n\t\t\t\t<ui:td>Cell 2_5</ui:td>\n\t\t\t</ui:tr>\n\t\t\t<ui:tr rowIndex=\"3\">\n\t\t\t\t<ui:td>Cell 3_1</ui:td>\n\t\t\t\t<ui:td>Cell 3_2</ui:td>\n\t\t\t\t<ui:td>Cell 3_3</ui:td>\n\t\t\t\t<ui:td>Cell 3_4</ui:td>\n\t\t\t\t<ui:td>Cell 3_5</ui:td>\n\t\t\t</ui:tr>\n\t\t\t<ui:tr rowIndex=\"4\">\n\t\t\t\t<ui:td>Cell 4_1</ui:td>\n\t\t\t\t<ui:td>Cell 4_2</ui:td>\n\t\t\t\t<ui:td>Cell 4_3</ui:td>\n\t\t\t\t<ui:td>Cell 4_4</ui:td>\n\t\t\t\t<ui:td>Cell 4_5</ui:td>\n\t\t\t</ui:tr>\n\t\t\t<ui:tr rowIndex=\"5\">\n\t\t\t\t<ui:td>Cell 5_1</ui:td>\n\t\t\t\t<ui:td>Cell 5_2</ui:td>\n\t\t\t\t<ui:td>Cell 5_3</ui:td>\n\t\t\t\t<ui:td>Cell 5_4</ui:td>\n\t\t\t\t<ui:td>Cell 5_5</ui:td>\n\t\t\t</ui:tr>\n\t\t</ui:tbody>\n\t</ui:table>\n</ui:example>\nActual Results:  \nThe page is not rendered correctly (note the buttons and select element are not interpreted as HTML form controls).\n\nExpected Results:  \nThe result of the XSLT should be interepreted as HTML.\n\nFor example, grab hold of the select element and inspect its namespaceURI with this line: document.getElementById(\"table_1.page\").namespaceURI\n\nYou will see it is \"http://www.w3.org/1999/xhtml\" as it should be for HTML.\n\nIn Firebug or the address bar execute the line \"document.body.innerHTML = document.body.innerHTML\", now Firefox will render the page correctly.\n\nRemove the line: xmlns=\"http://www.w3.org/1999/xhtml\" from the XSL and it all works swimmingly.", "id": 5254432, "text": "User-Agent:       Mozilla/5.0 (Windows NT 5.1; rv:2.0b10) Gecko/20100101 Firefox/4.0b10\nBuild Identifier: Mozilla/5.0 (Windows NT 5.1; rv:2.0b10) Gecko/20100101 Firefox/4.0b10\n\nWhen performing client-side XSLT in Firefox the HTML result produced by the transform is not correctly interpreted as HTML by Firefox (which seems to think it is dealing with XML).\n\nExecuting the line \"document.body.innerHTML = document.body.innerHTML\" resolves the problem and Firefox renders the HTML correctly.\n\nRemoving the attribute 'xmlns=\"http://www.w3.org/1999/xhtml\"' from the xsl:stylesheet element makes this issue go away. \n\nChrome 9 and IE8 do not have this problem.\n\nReproducible: Always\n\nSteps to Reproduce:\n1. Save the included XML and XSL into a directory where you can execute from your webserver.\n2. Load the XML in Firefox.\n\nXSL FILE:\n<?xml version=\"1.0\"?>\n<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n\txmlns=\"http://www.w3.org/1999/xhtml\"\n\txmlns:ui=\"http://dummy.com/mynamespace\"\n\tversion=\"1.0\">\n\n<xsl:output method=\"html\"\n\tdoctype-public=\"XSLT-compat\"\n\tencoding=\"UTF-8\"\n\tindent=\"no\"\n\tomit-xml-declaration=\"yes\"/>\n\n<xsl:strip-space elements=\"*\"/>\n\n<xsl:template match=\"ui:example\">\n\t<html>\n\t\t<head>\n\t\t\t<title>Example</title>\n\t\t</head>\n\t\t<body>\n\t\t\t<form action=\".\">\n\t\t\t\t<xsl:apply-templates/>\n\t\t\t</form>\n\t\t</body>\n\t</html>\n</xsl:template>\n\n<xsl:template match=\"ui:table\">\n\t<xsl:variable name=\"id\" select=\"@id\"/>\n\t<xsl:variable name=\"functionalClass\">\n\t\t<xsl:if test=\"ui:pagination\">\n\t\t\t<xsl:text> paginatedTable</xsl:text>\n\t\t</xsl:if>\n\t</xsl:variable>\n\t<div id=\"{$id}\">\n\t\t<xsl:attribute name=\"class\">\n\t\t\t<xsl:text>table-wrapper</xsl:text>\n\t\t</xsl:attribute>\n\t\t<table>\n\t\t\t<xsl:apply-templates select=\"ui:thead\" mode=\"table\"/>\n\t\t\t<xsl:apply-templates select=\"ui:tbody\" mode=\"table\"/>\n\t\t\t<xsl:call-template name=\"tfoot\"/>\n\t\t</table>\n\t</div>\n</xsl:template>\n\n<xsl:template match=\"ui:pagination\">\n\t<xsl:variable name='tableId' select=\"../@id\"/>\n\t<xsl:variable name='name'>\n\t\t<xsl:value-of select=\"concat($tableId, '.page')\"/>\n\t</xsl:variable>\n\t<xsl:variable name='pages'>\n\t\t<xsl:value-of select=\"ceiling(@rows div @rowsPerPage)\"/>\n\t</xsl:variable>\n\t<xsl:if test=\"@rows &gt; 0\">\n\t\t<xsl:element name=\"LABEL\">\n\t\t\t<xsl:attribute name=\"for\">\n\t\t\t\t<xsl:value-of select=\"$name\"/>\n\t\t\t</xsl:attribute>\n\t\t\t<xsl:variable name=\"resultSuffix\">\n\t\t\t\t<xsl:if test=\"@rows != '1'\">\n\t\t\t\t\t<xsl:text>s</xsl:text>\n\t\t\t\t</xsl:if>\n\t\t\t</xsl:variable>\n\t\t\t<xsl:value-of select=\"concat(@rows,' Result', $resultSuffix, ', page: ')\"/>\n\t\t</xsl:element>\n\t\t<xsl:element name=\"SELECT\">\n\t\t\t<xsl:attribute name=\"id\">\n\t\t\t\t<xsl:value-of select=\"$name\"/>\n\t\t\t</xsl:attribute>\n\t\t\t<xsl:attribute name=\"class\">\n\t\t\t\t<xsl:text>paginationList</xsl:text>\n\t\t\t</xsl:attribute>\n\t\t\t<xsl:attribute name=\"name\">\n\t\t\t\t<xsl:value-of select=\"$name\"/>\n\t\t\t</xsl:attribute>\n\t\t\t<xsl:call-template name=\"pagination.option.for.loop\">\n\t\t\t\t<xsl:with-param name=\"i\">0</xsl:with-param>\n\t\t\t\t<xsl:with-param name=\"count\"><xsl:value-of select=\"$pages\"/></xsl:with-param>\n\t\t\t\t<xsl:with-param name=\"current\"><xsl:value-of select=\"@currentPage\"/></xsl:with-param>\n\t\t\t</xsl:call-template>\n\t\t</xsl:element>\n\t\t<xsl:variable name=\"buttonType\">\n\t\t\t<xsl:text>button</xsl:text>\n\t\t</xsl:variable>\n\t\t<xsl:call-template name=\"paginationButton\">\n\t\t\t<xsl:with-param name=\"title\" select=\"'First page'\"/>\n\t\t\t<xsl:with-param name=\"type\" select=\"$buttonType\"/>\n\t\t\t<xsl:with-param name=\"idSuffix\" select=\"'1'\"/>\n\t\t</xsl:call-template>\n\t\t<xsl:call-template name=\"paginationButton\">\n\t\t\t<xsl:with-param name=\"title\" select=\"'Previous page'\"/>\n\t\t\t<xsl:with-param name=\"type\" select=\"$buttonType\"/>\n\t\t\t<xsl:with-param name=\"idSuffix\" select=\"'2'\"/>\n\t\t</xsl:call-template>\n\t\t<xsl:call-template name=\"paginationButton\">\n\t\t\t<xsl:with-param name=\"title\" select=\"'Next page'\"/>\n\t\t\t<xsl:with-param name=\"type\" select=\"$buttonType\"/>\n\t\t\t<xsl:with-param name=\"idSuffix\" select=\"'3'\"/>\n\t\t</xsl:call-template>\n\t\t<xsl:call-template name=\"paginationButton\">\n\t\t\t<xsl:with-param name=\"title\" select=\"'Last page'\"/>\n\t\t\t<xsl:with-param name=\"type\" select=\"$buttonType\"/>\n\t\t\t<xsl:with-param name=\"idSuffix\" select=\"'4'\"/>\n\t\t</xsl:call-template>\n\t</xsl:if>\n</xsl:template>\n\n<xsl:template match=\"ui:thead\" mode=\"table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<xsl:apply-templates mode=\"table\"/>\n\t\t</tr>\n\t</thead>\n</xsl:template>\n\n<xsl:template match=\"ui:tbody\" mode=\"table\">\n\t<tbody class=\"page\">\n\t\t<xsl:apply-templates mode=\"table\" />\n\t</tbody>\n</xsl:template>\n\n<xsl:template match=\"ui:tr\" mode=\"table\">\n\t<tr>\n\t\t<xsl:apply-templates mode=\"table\"/>\n\t</tr>\n</xsl:template>\n\n<xsl:template match=\"ui:th\" mode=\"table\">\n\t<th>\n\t\t<xsl:value-of select=\".\"/>\n\t</th>\n</xsl:template>\n\n<xsl:template match=\"ui:td\" mode=\"table\">\n\t<td>\n\t\t<xsl:value-of select=\".\"/>\n\t</td>\n</xsl:template>\n\n<xsl:template name=\"tfoot\">\n\t<xsl:variable name=\"hasPagination\">\n\t\t<xsl:choose>\n\t\t\t<xsl:when test=\"ui:pagination\">\n\t\t\t\t<xsl:number value=\"1\" />\n\t\t\t</xsl:when>\n\t\t\t<xsl:otherwise>\n\t\t\t\t<xsl:number value=\"0\" />\n\t\t\t</xsl:otherwise>\n\t\t</xsl:choose>\n\t</xsl:variable>\n\t<xsl:variable name='hasFooterElements'>\n\t\t<xsl:value-of select=\"$hasPagination\"/>\n\t</xsl:variable>\n\t\n\t<xsl:if test=\"$hasFooterElements > 0\">\n\t\t<xsl:variable name=\"numCols\">\n\t\t\t<xsl:choose>\n\t\t\t\t<xsl:when test=\"ui:thead/ui:th\">\n\t\t\t\t\t<xsl:value-of select=\"count(ui:thead/ui:th)\"/>\n\t\t\t\t</xsl:when>\n\t\t\t\t<xsl:when test=\"ui:tbody/ui:tr[position()=1]/ui:td\">\n\t\t\t\t\t<xsl:value-of select=\"count(ui:tbody/ui:tr[position()=1]/ui:td)\"/>\n\t\t\t\t</xsl:when>\n\t\t\t\t<xsl:otherwise>\n\t\t\t\t\t<xsl:number value=\"1\"/>\n\t\t\t\t</xsl:otherwise>\n\t\t\t</xsl:choose>\n\t\t</xsl:variable>\n\n\t\t<xsl:variable name=\"totalCols\">\n\t\t\t<xsl:value-of select=\"$numCols\"/>\n\t\t</xsl:variable>\n\t\t<xsl:variable name='colSpan1'>\n\t\t\t<xsl:value-of select=\"ceiling($totalCols div $hasFooterElements)\"/>\n\t\t</xsl:variable>\n\n\t\t<xsl:variable name='colSpan2'>\n\t\t\t<xsl:value-of select=\"$totalCols - $colSpan1\"/>\n\t\t</xsl:variable>\n\t\t<tfoot>\n\t\t\t<tr>\n\t\t\t\t<xsl:if test=\"$hasPagination = 1\">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<xsl:attribute name=\"colspan\">\n\t\t\t\t\t\t\t<xsl:value-of select=\"$colSpan2\"/>\n\t\t\t\t\t\t</xsl:attribute>\n\t\t\t\t\t\t<xsl:apply-templates select=\"ui:pagination\"/>\n\t\t\t\t\t</td>\n\t\t\t\t</xsl:if>\n\t\t\t</tr>\n\t\t</tfoot>\n\t</xsl:if>\n</xsl:template>\n\n<xsl:template name=\"pagination.option.for.loop\">\n\t<xsl:param name=\"i\" />\n\t<xsl:param name=\"count\" />\n\t<xsl:param name=\"current\" />\n\t<xsl:if test=\"$i &lt; $count\">\n\t\t<option value=\"{$i}\">\n\t\t\t<xsl:if test=\"$i = $current\">\n\t\t\t\t<xsl:attribute name=\"selected\">selected</xsl:attribute>\n\t\t\t</xsl:if>\n\t\t\t<xsl:value-of select=\"$i + 1\"/>\n\t\t</option>\n\n\t\t<xsl:call-template name=\"pagination.option.for.loop\">\n\t\t\t<xsl:with-param name=\"i\">\n\t\t\t\t<xsl:value-of select=\"$i + 1\"/>\n\t\t\t</xsl:with-param>\n\t\t\t<xsl:with-param name=\"count\">\n\t\t\t\t<xsl:value-of select=\"$count\"/>\n\t\t\t</xsl:with-param>\n\t\t\t<xsl:with-param name=\"current\">\n\t\t\t\t<xsl:value-of select=\"$current\"/>\n\t\t\t</xsl:with-param>\n\t\t</xsl:call-template>\n\t</xsl:if>\n</xsl:template>\n\n<xsl:template name=\"paginationButton\">\n\t<xsl:param name=\"name\"/>\n\t<xsl:param name=\"title\"/>\n\t<xsl:param name=\"class\"/>\n\t<xsl:param name=\"value\"/>\n\t<xsl:param name=\"pages\"/>\n\t<xsl:param name=\"type\"/>\n\t<xsl:param name=\"idSuffix\"/>\n\t<xsl:element name=\"BUTTON\">\n\t\t <xsl:attribute name=\"id\">\n\t\t \t<xsl:value-of select=\"concat(../@id,'.pagination.',$idSuffix)\"/>\n\t\t </xsl:attribute>\n\t\t<xsl:if test=\"$class\">\n\t\t\t<xsl:attribute name=\"class\">\n\t\t\t\t<xsl:value-of select=\"$class\"/>\n\t\t\t</xsl:attribute>\n\t\t</xsl:if>\n\t\t<xsl:if test=\"$name\">\n\t\t\t<xsl:attribute name=\"name\">\n\t\t\t\t<xsl:value-of select=\"$name\"/>\n\t\t\t</xsl:attribute>\n\t\t</xsl:if>\n\t\t<xsl:attribute name=\"title\">\n\t\t\t<xsl:value-of select=\"$title\"/>\n\t\t</xsl:attribute>\n\t\t<xsl:attribute name=\"type\">\n\t\t\t<xsl:value-of select=\"$type\"/>\n\t\t</xsl:attribute>\n\t\t<span class=\"offscreen\">\n\t\t\t<xsl:value-of select=\"$title\"/>\n\t\t</span>\n\t</xsl:element>\n</xsl:template>\n</xsl:stylesheet>\n\nXML FILE:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<?xml-stylesheet type=\"text/xsl\" href=\"table.xsl\"?>\n<ui:example\n\txmlns:ui=\"http://dummy.com/mynamespace\"\n    \txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n\txmlns=\"http://www.w3.org/1999/xhtml\"\n\txmlns:html=\"http://www.w3.org/1999/xhtml\">\n\n\t<ui:table id=\"table_1\">\n\t\t<ui:pagination rowsPerPage=\"5\" rows=\"25\" currentPage=\"2\"/>\n\t\t<ui:thead>\n\t\t\t<ui:th>Heading 1</ui:th>\n\t\t\t<ui:th>Heading 2</ui:th>\n\t\t\t<ui:th>Heading 3</ui:th>\n\t\t\t<ui:th>Heading 4</ui:th>\n\t\t\t<ui:th>Heading 5</ui:th>\n\t\t</ui:thead>\n\t\t<ui:tbody>\n\t\t\t<ui:tr rowIndex=\"1\">\n\t\t\t\t<ui:td>Cell 1_1</ui:td>\n\t\t\t\t<ui:td>Cell 1_2</ui:td>\n\t\t\t\t<ui:td>Cell 1_3</ui:td>\n\t\t\t\t<ui:td>Cell 1_4</ui:td>\n\t\t\t\t<ui:td>Cell 1_5</ui:td>\n\t\t\t</ui:tr>\n\t\t\t<ui:tr rowIndex=\"2\">\n\t\t\t\t<ui:td>Cell 2_1</ui:td>\n\t\t\t\t<ui:td>Cell 2_2</ui:td>\n\t\t\t\t<ui:td>Cell 2_3</ui:td>\n\t\t\t\t<ui:td>Cell 2_4</ui:td>\n\t\t\t\t<ui:td>Cell 2_5</ui:td>\n\t\t\t</ui:tr>\n\t\t\t<ui:tr rowIndex=\"3\">\n\t\t\t\t<ui:td>Cell 3_1</ui:td>\n\t\t\t\t<ui:td>Cell 3_2</ui:td>\n\t\t\t\t<ui:td>Cell 3_3</ui:td>\n\t\t\t\t<ui:td>Cell 3_4</ui:td>\n\t\t\t\t<ui:td>Cell 3_5</ui:td>\n\t\t\t</ui:tr>\n\t\t\t<ui:tr rowIndex=\"4\">\n\t\t\t\t<ui:td>Cell 4_1</ui:td>\n\t\t\t\t<ui:td>Cell 4_2</ui:td>\n\t\t\t\t<ui:td>Cell 4_3</ui:td>\n\t\t\t\t<ui:td>Cell 4_4</ui:td>\n\t\t\t\t<ui:td>Cell 4_5</ui:td>\n\t\t\t</ui:tr>\n\t\t\t<ui:tr rowIndex=\"5\">\n\t\t\t\t<ui:td>Cell 5_1</ui:td>\n\t\t\t\t<ui:td>Cell 5_2</ui:td>\n\t\t\t\t<ui:td>Cell 5_3</ui:td>\n\t\t\t\t<ui:td>Cell 5_4</ui:td>\n\t\t\t\t<ui:td>Cell 5_5</ui:td>\n\t\t\t</ui:tr>\n\t\t</ui:tbody>\n\t</ui:table>\n</ui:example>\nActual Results:  \nThe page is not rendered correctly (note the buttons and select element are not interpreted as HTML form controls).\n\nExpected Results:  \nThe result of the XSLT should be interepreted as HTML.\n\nFor example, grab hold of the select element and inspect its namespaceURI with this line: document.getElementById(\"table_1.page\").namespaceURI\n\nYou will see it is \"http://www.w3.org/1999/xhtml\" as it should be for HTML.\n\nIn Firebug or the address bar execute the line \"document.body.innerHTML = document.body.innerHTML\", now Firefox will render the page correctly.\n\nRemove the line: xmlns=\"http://www.w3.org/1999/xhtml\" from the XSL and it all works swimmingly.", "creation_time": "2011-02-04T05:59:19Z", "author": "rick.brown@immi.gov.au"}, {"attachment_id": 509970, "time": "2011-02-05T02:30:48Z", "is_private": false, "author": "rick.brown@immi.gov.au", "bug_id": 631455, "creator": "rick.brown@immi.gov.au", "count": 1, "tags": [], "text": "Created attachment 509970\nTest XML file\n\nsave this file and table.xsl into the same directory then view this xml in firefox", "creation_time": "2011-02-05T02:30:48Z", "raw_text": "save this file and table.xsl into the same directory then view this xml in firefox", "id": 5257158}, {"attachment_id": 509971, "time": "2011-02-05T02:33:22Z", "is_private": false, "author": "rick.brown@immi.gov.au", "bug_id": 631455, "tags": [], "creator": "rick.brown@immi.gov.au", "count": 2, "text": "Created attachment 509971\nThe XSL test file", "creation_time": "2011-02-05T02:33:22Z", "raw_text": "", "id": 5257163}, {"is_private": false, "time": "2011-02-07T15:30:29Z", "attachment_id": null, "text": "This does not work on Build identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13.\n\nOn Internet Explorer 8 works fine.", "creation_time": "2011-02-07T15:30:29Z", "raw_text": "This does not work on Build identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13.\n\nOn Internet Explorer 8 works fine.", "id": 5260065, "bug_id": 631455, "count": 3, "tags": [], "creator": "alex.lakatos.qa@gmail.com", "author": "alex.lakatos.qa@gmail.com"}, {"time": "2012-04-09T19:26:34Z", "count": 4, "creator": "mozilla@drbeagle.com", "tags": [], "bug_id": 631455, "creation_time": "2012-04-09T19:26:34Z", "is_private": false, "text": "I have replicated this root cause for a similar simple example listed below.\nXML:\n<?xml version=\"1.0\"?>\n<?xml-stylesheet type=\"text/xsl\" href=\"xslt.xsl\"?>\n<root><node></node></root>\n\nXSLT - broken:\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" xmlns=\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n    <xsl:output indent=\"no\" omit-xml-declaration=\"yes\" method=\"html\" encoding=\"UTF-8\" media-type=\"text/html\" doctype-public=\"-//W3C//DTD XHTML 1.0 Strict//EN\"/>\n    <xsl:template match=\"/\">\n        <html><head></head><body>\n            <table border=\"1\">\n                <xsl:call-template name=\"row\"/>\n                <xsl:call-template name=\"row\"/>\n                <xsl:call-template name=\"row\"/>\n            </table>\n        </body></html>\n    </xsl:template>\n    <xsl:template name=\"row\">\n        <tr><td>row</td></tr>\n    </xsl:template>\n</xsl:stylesheet>\n\nXSLT - working:\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n    <xsl:output indent=\"no\" omit-xml-declaration=\"yes\" method=\"html\" encoding=\"UTF-8\" media-type=\"text/html\" doctype-public=\"-//W3C//DTD XHTML 1.0 Strict//EN\"/>\n    <xsl:template match=\"/\">\n        <html><head></head><body>\n            <table border=\"1\">\n                <xsl:call-template name=\"row\"/>\n                <xsl:call-template name=\"row\"/>\n                <xsl:call-template name=\"row\"/>\n            </table>\n        </body></html>\n    </xsl:template>\n    <xsl:template name=\"row\">\n        <tr><td>row</td></tr>\n    </xsl:template>\n</xsl:stylesheet>", "id": 6207991, "raw_text": "I have replicated this root cause for a similar simple example listed below.\nXML:\n<?xml version=\"1.0\"?>\n<?xml-stylesheet type=\"text/xsl\" href=\"xslt.xsl\"?>\n<root><node></node></root>\n\nXSLT - broken:\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" xmlns=\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n    <xsl:output indent=\"no\" omit-xml-declaration=\"yes\" method=\"html\" encoding=\"UTF-8\" media-type=\"text/html\" doctype-public=\"-//W3C//DTD XHTML 1.0 Strict//EN\"/>\n    <xsl:template match=\"/\">\n        <html><head></head><body>\n            <table border=\"1\">\n                <xsl:call-template name=\"row\"/>\n                <xsl:call-template name=\"row\"/>\n                <xsl:call-template name=\"row\"/>\n            </table>\n        </body></html>\n    </xsl:template>\n    <xsl:template name=\"row\">\n        <tr><td>row</td></tr>\n    </xsl:template>\n</xsl:stylesheet>\n\nXSLT - working:\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n    <xsl:output indent=\"no\" omit-xml-declaration=\"yes\" method=\"html\" encoding=\"UTF-8\" media-type=\"text/html\" doctype-public=\"-//W3C//DTD XHTML 1.0 Strict//EN\"/>\n    <xsl:template match=\"/\">\n        <html><head></head><body>\n            <table border=\"1\">\n                <xsl:call-template name=\"row\"/>\n                <xsl:call-template name=\"row\"/>\n                <xsl:call-template name=\"row\"/>\n            </table>\n        </body></html>\n    </xsl:template>\n    <xsl:template name=\"row\">\n        <tr><td>row</td></tr>\n    </xsl:template>\n</xsl:stylesheet>", "attachment_id": null, "author": "mozilla@drbeagle.com"}]}}, "comments": {}}