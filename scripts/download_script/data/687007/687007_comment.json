{"bugs": {"687007": {"comments": [{"count": 0, "text": "We still have code that uses the full, raw content-disposition header, either via nsIChannel.contentDispositionHeader, or by just using getHeader().  These should all be refactored to use the 'contentDisposition' and 'contentDispositionFilename' properties.\n\nI'm seeing stuff like the full disposition header being stuffed into imageCache entry properties and then fished out in contentAreaUtils.js.  It's also in nsIDOMWindowUtils and then retrieved here:\n\n    http://mxr.mozilla.org/mozilla-central/source/toolkit/content/contentAreaUtils.js#158\n    http://mxr.mozilla.org/mozilla-central/source/toolkit/content/contentAreaUtils.js#182\n\nThe context menu popupstate contains full C-D header too:\n\n    http://mxr.mozilla.org/mozilla-central/source/mobile/chrome/content/ContextCommands.js#62\n\nDeath to raw C-D header parsing!\n\nI'm fine with this work being chopped into separate bugs as needed.", "author": "jduell.mcbugs@gmail.com", "creator": "jduell.mcbugs@gmail.com", "creation_time": "2011-09-16T01:39:33Z", "is_private": false, "id": 5719613, "bug_id": 687007, "raw_text": "We still have code that uses the full, raw content-disposition header, either via nsIChannel.contentDispositionHeader, or by just using getHeader().  These should all be refactored to use the 'contentDisposition' and 'contentDispositionFilename' properties.\n\nI'm seeing stuff like the full disposition header being stuffed into imageCache entry properties and then fished out in contentAreaUtils.js.  It's also in nsIDOMWindowUtils and then retrieved here:\n\n    http://mxr.mozilla.org/mozilla-central/source/toolkit/content/contentAreaUtils.js#158\n    http://mxr.mozilla.org/mozilla-central/source/toolkit/content/contentAreaUtils.js#182\n\nThe context menu popupstate contains full C-D header too:\n\n    http://mxr.mozilla.org/mozilla-central/source/mobile/chrome/content/ContextCommands.js#62\n\nDeath to raw C-D header parsing!\n\nI'm fine with this work being chopped into separate bugs as needed.", "attachment_id": null, "time": "2011-09-16T01:39:33Z", "tags": []}, {"raw_text": "Bulk change to priority: https://bugzilla.mozilla.org/show_bug.cgi?id=1399258", "time": "2017-09-13T18:40:05Z", "author": "bug-husbandry-bot@mozilla.bugs", "text": "Bulk change to priority: https://bugzilla.mozilla.org/show_bug.cgi?id=1399258", "count": 1, "bug_id": 687007, "id": 12658889, "attachment_id": null, "tags": [], "creator": "bug-husbandry-bot@mozilla.bugs", "creation_time": "2017-09-13T18:40:05Z", "is_private": false}]}}, "comments": {}}