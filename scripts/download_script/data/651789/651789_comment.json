{"comments": {}, "bugs": {"651789": {"comments": [{"is_private": false, "time": "2011-04-21T02:09:39Z", "attachment_id": null, "creation_time": "2011-04-21T02:09:39Z", "text": "User-Agent:       Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0) Gecko/20100101 Firefox/4.0\nBuild Identifier: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0) Gecko/20100101 Firefox/4.0\n\nW's on my display show up with the center inverted-V faded. I'll attach a screenshot.\n\nReproducible: Always\n\nSteps to Reproduce:\n1. Turn on Firefox.\n2.\n3.\nActual Results:  \nCenter portion of W's faded.\n\nExpected Results:  \nLetters should be solid, as in Firefox 3.6.\n\nRegardless of theme chosen.", "id": 5423170, "raw_text": "User-Agent:       Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0) Gecko/20100101 Firefox/4.0\nBuild Identifier: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0) Gecko/20100101 Firefox/4.0\n\nW's on my display show up with the center inverted-V faded. I'll attach a screenshot.\n\nReproducible: Always\n\nSteps to Reproduce:\n1. Turn on Firefox.\n2.\n3.\nActual Results:  \nCenter portion of W's faded.\n\nExpected Results:  \nLetters should be solid, as in Firefox 3.6.\n\nRegardless of theme chosen.", "tags": [], "creator": "ehume@pshrink.com", "count": 0, "bug_id": 651789, "author": "ehume@pshrink.com"}, {"author": "ehume@pshrink.com", "bug_id": 651789, "count": 1, "tags": [], "creator": "ehume@pshrink.com", "text": "Created attachment 527459\nselection of screenshot that shows faded w's\n\nYou may have to enlarge the image to see the full effect.", "creation_time": "2011-04-21T02:10:58Z", "raw_text": "You may have to enlarge the image to see the full effect.", "id": 5423175, "attachment_id": 527459, "time": "2011-04-21T02:10:58Z", "is_private": false}, {"attachment_id": null, "time": "2011-04-21T03:24:59Z", "is_private": false, "author": "moz@jeka.info", "tags": [], "count": 2, "creator": "moz@jeka.info", "bug_id": 651789, "id": 5423234, "raw_text": "Mozilla/5.0 (Windows NT 5.1; rv:2.0) Gecko/20100101 Firefox/4.0\nCan't reproduce on XP", "creation_time": "2011-04-21T03:24:59Z", "text": "Mozilla/5.0 (Windows NT 5.1; rv:2.0) Gecko/20100101 Firefox/4.0\nCan't reproduce on XP"}, {"author": "tdowner@mozilla.com", "count": 3, "creator": "tdowner@mozilla.com", "tags": [], "bug_id": 651789, "id": 5423270, "raw_text": "Likely the font you have selected. Try creating a fresh profile, http://support.mozilla.com/kb/Managing+profiles", "creation_time": "2011-04-21T03:58:40Z", "text": "Likely the font you have selected. Try creating a fresh profile, http://support.mozilla.com/kb/Managing+profiles", "attachment_id": null, "time": "2011-04-21T03:58:40Z", "is_private": false}, {"attachment_id": null, "is_private": false, "time": "2011-04-21T11:46:36Z", "author": "jfkthame@gmail.com", "creation_time": "2011-04-21T11:46:36Z", "text": "This looks like a result of DirectWrite/D2D antialiasing. You may be able to improve the result by using the ClearType Tuner control panel to customize the behavior for your display.\n\nIn bug 642589, we've just added several prefs that can be used to fine-tune the antialiasing behavior under DW/D2D, including the possibility of using \"classic\" GDI-style hinting and antialiasing (which gives less accurate glyph shapes and metrics, but often a \"crisper\" appearance) for people who prefer that. This should appear in Nightly builds soon, if you want to experiment with alternative text-rendering options.", "id": 5423650, "raw_text": "This looks like a result of DirectWrite/D2D antialiasing. You may be able to improve the result by using the ClearType Tuner control panel to customize the behavior for your display.\n\nIn bug 642589, we've just added several prefs that can be used to fine-tune the antialiasing behavior under DW/D2D, including the possibility of using \"classic\" GDI-style hinting and antialiasing (which gives less accurate glyph shapes and metrics, but often a \"crisper\" appearance) for people who prefer that. This should appear in Nightly builds soon, if you want to experiment with alternative text-rendering options.", "count": 4, "tags": [], "creator": "jfkthame@gmail.com", "bug_id": 651789}, {"text": "Created attachment 527695\nMore weak w's from Mozillazine forums\n\nTotally reamed out a profile - no files.\n\nStill an issue.", "creation_time": "2011-04-22T00:14:06Z", "raw_text": "Totally reamed out a profile - no files.\n\nStill an issue.", "id": 5425464, "bug_id": 651789, "creator": "ehume@pshrink.com", "tags": [], "count": 5, "author": "ehume@pshrink.com", "is_private": false, "time": "2011-04-22T00:14:06Z", "attachment_id": 527695}, {"author": "ehume@pshrink.com", "attachment_id": 527696, "bug_id": 651789, "time": "2011-04-22T00:21:01Z", "count": 6, "creator": "ehume@pshrink.com", "tags": [], "raw_text": "Look at the w's here. Same font, but this time on Firefox 3.6.\n\nThis was good. The Firefox 4 shot shows weakness. That is a regression.", "id": 5425479, "text": "Created attachment 527696\nSame piece of page, this time on Firefox 3.6\n\nLook at the w's here. Same font, but this time on Firefox 3.6.\n\nThis was good. The Firefox 4 shot shows weakness. That is a regression.", "is_private": false, "creation_time": "2011-04-22T00:21:01Z"}, {"raw_text": "How does this work for you?\n(No need for screenshots, nobody doubts your words)", "id": 5425675, "text": "Created attachment 527715\ntestcase\n\nHow does this work for you?\n(No need for screenshots, nobody doubts your words)", "creation_time": "2011-04-22T03:54:20Z", "bug_id": 651789, "count": 7, "tags": [], "creator": "moz@jeka.info", "author": "moz@jeka.info", "is_private": false, "time": "2011-04-22T03:54:20Z", "attachment_id": 527715}, {"is_private": false, "time": "2011-04-22T04:19:28Z", "attachment_id": null, "id": 5425695, "raw_text": "In the test case, the w in the large font is fine. The w in the small font has a faded middle.", "creation_time": "2011-04-22T04:19:28Z", "text": "In the test case, the w in the large font is fine. The w in the small font has a faded middle.", "creator": "ehume@pshrink.com", "count": 8, "tags": [], "bug_id": 651789, "author": "ehume@pshrink.com"}, {"attachment_id": 527750, "time": "2011-04-22T10:25:18Z", "is_private": false, "author": "moz@jeka.info", "count": 9, "creator": "moz@jeka.info", "tags": [], "bug_id": 651789, "id": 5425988, "raw_text": "Which font and font-size, besides Trebuchet MS 12px, is affected?", "creation_time": "2011-04-22T10:25:18Z", "text": "Created attachment 527750\ntestcase2\n\nWhich font and font-size, besides Trebuchet MS 12px, is affected?"}, {"tags": [], "time": "2011-04-22T13:37:13Z", "count": 10, "creator": "jfkthame@gmail.com", "bug_id": 651789, "creation_time": "2011-04-22T13:37:13Z", "is_private": false, "text": "Created attachment 527764\nIE9 screenshot showing the poor rendering of \"w\" in Trebuchet MS\n\nThe Trebuchet \"w\" is particularly bad at 16px, too. The same issue shows up in IE9 (see attached screenshot), as it also makes use of DirectWrite & D2D.\n\nThis is not really a Firefox bug, it is simply how the Trebuchet font renders on Windows under DirectWrite/D2D. (I agree it looks terrible, though!)\n\nIt looks better in Fx3.6 because that uses the old GDI rendering path, which has a completely different font rasterizer. You'll get that same result if you disable hardware acceleration in Fx4 (but this may greatly degrade performance for some kinds of pages).\n\nIn the latest Nightly build, you can go to about:config and set gfx.font_rendering.cleartype_params.rendering_mode to 2 (GDI Classic) or 3 (GDI Natural Widths) to get font rendering that is much more like Fx3.6; this fixes the weak \"w\" in Trebuchet. Note that the glyph shapes and/or spacing with some fonts may be less precise than under standard DirectWrite rendering, however.", "id": 5426158, "raw_text": "The Trebuchet \"w\" is particularly bad at 16px, too. The same issue shows up in IE9 (see attached screenshot), as it also makes use of DirectWrite & D2D.\n\nThis is not really a Firefox bug, it is simply how the Trebuchet font renders on Windows under DirectWrite/D2D. (I agree it looks terrible, though!)\n\nIt looks better in Fx3.6 because that uses the old GDI rendering path, which has a completely different font rasterizer. You'll get that same result if you disable hardware acceleration in Fx4 (but this may greatly degrade performance for some kinds of pages).\n\nIn the latest Nightly build, you can go to about:config and set gfx.font_rendering.cleartype_params.rendering_mode to 2 (GDI Classic) or 3 (GDI Natural Widths) to get font rendering that is much more like Fx3.6; this fixes the weak \"w\" in Trebuchet. Note that the glyph shapes and/or spacing with some fonts may be less precise than under standard DirectWrite rendering, however.", "attachment_id": 527764, "author": "jfkthame@gmail.com"}, {"id": 5426227, "raw_text": "So what the resolution for this bug, WONTFIX or INVALID?", "creation_time": "2011-04-22T15:04:15Z", "text": "So what the resolution for this bug, WONTFIX or INVALID?", "creator": "moz@jeka.info", "count": 11, "tags": [], "bug_id": 651789, "author": "moz@jeka.info", "is_private": false, "time": "2011-04-22T15:04:15Z", "attachment_id": null}, {"author": "ws.bugzilla@starkov.name", "creation_time": "2012-12-26T12:46:08Z", "text": "This problem still happens. It would be nice if Firefox could have an exception for this particular font/size combination and rendered it using GDI. I mean fine, it might be that DirectWrite sucks when rendering this \"w\", but Firefox is the one who chooses to use that API; maybe it's up to Firefox to work around the flaws in it.\n\nMarking NEW; if such an exception is off the table, please mark WONTFIX.", "id": 6944679, "raw_text": "This problem still happens. It would be nice if Firefox could have an exception for this particular font/size combination and rendered it using GDI. I mean fine, it might be that DirectWrite sucks when rendering this \"w\", but Firefox is the one who chooses to use that API; maybe it's up to Firefox to work around the flaws in it.\n\nMarking NEW; if such an exception is off the table, please mark WONTFIX.", "tags": [], "creator": "ws.bugzilla@starkov.name", "count": 12, "bug_id": 651789, "attachment_id": null, "is_private": false, "time": "2012-12-26T12:46:08Z"}, {"author": "moz@jeka.info", "raw_text": "Per comment 10 it's not Mozilla's bug.\nIf it was, \"Firefox/General\" would be the wrong product/component", "id": 6946126, "text": "Per comment 10 it's not Mozilla's bug.\nIf it was, \"Firefox/General\" would be the wrong product/component", "creation_time": "2012-12-27T01:33:53Z", "bug_id": 651789, "creator": "moz@jeka.info", "count": 13, "tags": [], "attachment_id": null, "is_private": false, "time": "2012-12-27T01:33:53Z"}, {"author": "ws.bugzilla@starkov.name", "creation_time": "2012-12-27T13:57:24Z", "text": "Agreed, this is not a Mozilla bug. However, Firefox already implements a preference to work around this bug: \"gfx.font_rendering.cleartype_params.force_gdi_classic_for_families\"\n\nThe problem is, this list is hard-coded to stop working at 16px. That's exactly where the problem occurs. For Trebuchet MS, the switch-over should happen at 17px instead.\n\nI've renamed the bug to clarify what exactly needs to be done. See also bug 661471, which originally introduced this preference.", "id": 6946951, "raw_text": "Agreed, this is not a Mozilla bug. However, Firefox already implements a preference to work around this bug: \"gfx.font_rendering.cleartype_params.force_gdi_classic_for_families\"\n\nThe problem is, this list is hard-coded to stop working at 16px. That's exactly where the problem occurs. For Trebuchet MS, the switch-over should happen at 17px instead.\n\nI've renamed the bug to clarify what exactly needs to be done. See also bug 661471, which originally introduced this preference.", "count": 14, "tags": [], "creator": "ws.bugzilla@starkov.name", "bug_id": 651789, "attachment_id": null, "is_private": false, "time": "2012-12-27T13:57:24Z"}, {"author": "terrell.kelley@gmail.com", "attachment_id": null, "bug_id": 651789, "time": "2013-10-12T08:07:52Z", "creator": "terrell.kelley@gmail.com", "tags": [], "count": 15, "raw_text": "I can confirm that changing gfx.font_rendering.cleartype_params.force_gdi_classic_max_size to 17 fixes this. I have not noticed any regressions in other fonts, so that seems like an easy fix.", "id": 7953012, "text": "I can confirm that changing gfx.font_rendering.cleartype_params.force_gdi_classic_max_size to 17 fixes this. I have not noticed any regressions in other fonts, so that seems like an easy fix.", "creation_time": "2013-10-12T08:07:52Z", "is_private": false}, {"author": "u279076@disabled.tld", "attachment_id": null, "text": "I can't see this locally. Does this still reproduce?", "is_private": false, "creation_time": "2016-08-25T21:03:44Z", "raw_text": "I can't see this locally. Does this still reproduce?", "id": 11656363, "bug_id": 651789, "count": 16, "tags": [], "creator": "u279076@disabled.tld", "time": "2016-08-25T21:03:44Z"}, {"author": "ehume@pshrink.com", "tags": [], "count": 17, "creator": "ehume@pshrink.com", "bug_id": 651789, "creation_time": "2016-08-26T21:49:02Z", "text": "I still see the problem -- but now it shows up in the testcase on Trebuchet 16px", "id": 11659943, "raw_text": "I still see the problem -- but now it shows up in the testcase on Trebuchet 16px", "attachment_id": null, "time": "2016-08-26T21:49:02Z", "is_private": false}, {"is_private": false, "time": "2017-02-02T09:55:54Z", "attachment_id": null, "text": "Having this problem as well. A body of text with Trebuchet MS with a font-size setting of 15px renders notably worse compared to IE/Chrome. Increasing \"gfx.font_rendering.cleartype_params.force_gdi_classic_max_size\" has no effect, and according to this quote this is expected: \n\n> The problem is, this list is hard-coded to stop working at 16px. That's exactly where the problem occurs. For Trebuchet MS, the switch-over should happen at 17px instead.", "creation_time": "2017-02-02T09:55:54Z", "raw_text": "Having this problem as well. A body of text with Trebuchet MS with a font-size setting of 15px renders notably worse compared to IE/Chrome. Increasing \"gfx.font_rendering.cleartype_params.force_gdi_classic_max_size\" has no effect, and according to this quote this is expected: \n\n> The problem is, this list is hard-coded to stop working at 16px. That's exactly where the problem occurs. For Trebuchet MS, the switch-over should happen at 17px instead.", "id": 12030895, "bug_id": 651789, "count": 18, "tags": [], "creator": "git@roeme.ch", "author": "git@roeme.ch"}, {"creation_time": "2019-03-06T18:43:33Z", "text": "I was about to file a new bug but saw this was already filed (and a very long time ago at that!).\nJust a note then that this is **still** a problem in the latest nightly as of today (2019-03-06). Trebuchet is e.g. the default font for (probably) the most popular bulletin board software (phpBB) out there, and this occurs on all D2D/Dwrite setups (the majority of Windows systems) so this has a lot of exposure.\n\nI confirmed that setting gfx.font_rendering.cleartype_params.force_gdi_classic_max_size to 17 and restarting the browser completely fixes this issue with no noted drawbacks at all on font rendering otherwise, anywhere.\nConsidering the GDI font list is specifically listed to be a subset of fonts, i would expect the related parameter to have a value that fixes rendering for all listed fonts there -- unfortunately the default setting of \"15\" does not.\n\nSuggested fix:\nSet gfx.font_rendering.cleartype_params.force_gdi_classic_max_size to 17 by default.", "id": 13969038, "raw_text": "I was about to file a new bug but saw this was already filed (and a very long time ago at that!).\nJust a note then that this is **still** a problem in the latest nightly as of today (2019-03-06). Trebuchet is e.g. the default font for (probably) the most popular bulletin board software (phpBB) out there, and this occurs on all D2D/Dwrite setups (the majority of Windows systems) so this has a lot of exposure.\n\nI confirmed that setting gfx.font_rendering.cleartype_params.force_gdi_classic_max_size to 17 and restarting the browser completely fixes this issue with no noted drawbacks at all on font rendering otherwise, anywhere.\nConsidering the GDI font list is specifically listed to be a subset of fonts, i would expect the related parameter to have a value that fixes rendering for all listed fonts there -- unfortunately the default setting of \"15\" does not.\n\nSuggested fix:\nSet gfx.font_rendering.cleartype_params.force_gdi_classic_max_size to 17 by default.", "tags": [], "count": 19, "creator": "mark@wolfbeast.com", "bug_id": 651789, "author": "mark@wolfbeast.com", "is_private": false, "time": "2019-03-06T18:43:33Z", "attachment_id": null}, {"id": 13969221, "raw_text": "Throwing this back into the triage queue.", "creation_time": "2019-03-06T20:00:19Z", "is_private": false, "text": "Throwing this back into the triage queue.", "tags": [], "count": 20, "creator": "ech@emmah.net", "time": "2019-03-06T20:00:19Z", "bug_id": 651789, "attachment_id": null, "author": "ech@emmah.net"}, {"attachment_id": null, "is_private": false, "time": "2019-03-06T20:04:54Z", "author": "lsalzman@mozilla.com", "raw_text": "Jonathan, any ideas if there is still something we can do here, or should we just WONTFIX this?", "id": 13969230, "text": "Jonathan, any ideas if there is still something we can do here, or should we just WONTFIX this?", "creation_time": "2019-03-06T20:04:54Z", "bug_id": 651789, "count": 21, "tags": [], "creator": "lsalzman@mozilla.com"}, {"id": 13969428, "raw_text": "Well, I can't see us doing a per-font size threshold for this setting, but we could bump the default value for gfx.font_rendering.cleartype_params.force_gdi_classic_max_size to 17 as suggested by Mark in comment 19.\n\nObviously, this would also affect the rendering of the other fonts in the GDI-classic list. I don't know if anyone would regard that as a regression, or if it's unimportant. I suspect things like Arial, Tahoma and Verdana are often seen at 16px on the web, so it'd be worth having a look to see how they compare.", "is_private": false, "creation_time": "2019-03-06T21:26:07Z", "text": "Well, I can't see us doing a per-font size threshold for this setting, but we could bump the default value for gfx.font_rendering.cleartype_params.force_gdi_classic_max_size to 17 as suggested by Mark in comment 19.\n\nObviously, this would also affect the rendering of the other fonts in the GDI-classic list. I don't know if anyone would regard that as a regression, or if it's unimportant. I suspect things like Arial, Tahoma and Verdana are often seen at 16px on the web, so it'd be worth having a look to see how they compare.", "tags": [], "creator": "jfkthame@gmail.com", "time": "2019-03-06T21:26:07Z", "count": 22, "bug_id": 651789, "attachment_id": null, "author": "jfkthame@gmail.com"}, {"attachment_id": 9049000, "is_private": false, "time": "2019-03-06T21:59:33Z", "author": "mark@wolfbeast.com", "creation_time": "2019-03-06T21:59:33Z", "text": "Created attachment 9049000\nfont comparison D2D/GDI\n\nI made a quick test rendering the stated fonts in the previous comment at 16px with the setting at 15 and 17 respectively.\nAside from the very much broken diagonals (V and W specifically) in Trebuchet @ 15, the only real difference I see is that the DWrite versions have a very slightly darker face but also poorer letter spacing and some verticals are not as sharp (compare e.g. Tahoma)\n\nOverall, I personally think the GDI rendered versions at 16px actually look a little sharper across the board and have slightly better legibility.", "id": 13969516, "raw_text": "I made a quick test rendering the stated fonts in the previous comment at 16px with the setting at 15 and 17 respectively.\nAside from the very much broken diagonals (V and W specifically) in Trebuchet @ 15, the only real difference I see is that the DWrite versions have a very slightly darker face but also poorer letter spacing and some verticals are not as sharp (compare e.g. Tahoma)\n\nOverall, I personally think the GDI rendered versions at 16px actually look a little sharper across the board and have slightly better legibility.", "tags": [], "count": 23, "creator": "mark@wolfbeast.com", "bug_id": 651789}, {"time": "2019-03-08T16:10:29Z", "is_private": false, "attachment_id": null, "bug_id": 651789, "tags": [], "creator": "terrell.kelley@gmail.com", "count": 24, "text": "The post I made 6 years ago remains true. I've consistently run Windows Firefox with that setting at 17 instead of 15 and noticed no font regressions. In fact, I had completely forgotten I had made that change.", "creation_time": "2019-03-08T16:10:29Z", "raw_text": "The post I made 6 years ago remains true. I've consistently run Windows Firefox with that setting at 17 instead of 15 and noticed no font regressions. In fact, I had completely forgotten I had made that change.", "id": 13974155, "author": "terrell.kelley@gmail.com"}]}}}