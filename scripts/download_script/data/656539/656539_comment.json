{"comments": {}, "bugs": {"656539": {"comments": [{"creator": "glob@mozilla.com", "raw_text": "\"password change request cancelled\" emails are not encrypted, and probably should be if a certificate has been attached.\n\nwhile there's probably nothing confidential in them, it seems weird having the 'change password request' email encrypted, but the cancelled email not.\n\nit's probably a good idea to check that all password related emails are covered.", "text": "\"password change request cancelled\" emails are not encrypted, and probably should be if a certificate has been attached.\n\nwhile there's probably nothing confidential in them, it seems weird having the 'change password request' email encrypted, but the cancelled email not.\n\nit's probably a good idea to check that all password related emails are covered.", "count": 0, "time": "2011-05-12T04:58:13Z", "attachment_id": null, "tags": [], "creation_time": "2011-05-12T04:58:13Z", "bug_id": 656539, "author": "glob@mozilla.com", "is_private": false, "id": 5464789}, {"attachment_id": null, "tags": [], "creation_time": "2011-05-12T05:05:47Z", "creator": "dkl@mozilla.com", "raw_text": "Seems simple enough to update the regex that is used in SecureMail::Extension::mailer_before_send to also look for text related to password change cancellations.\n\nmy $is_passwordmail = !$is_bugmail \n                      && ($email->body =~ /cfmpw.*cxlpw/s\n                          || $email->header('Subject') =~ /Password change request canceled/);\n\nThe rest will happen automatically.\n\ndkl", "bug_id": 656539, "text": "Seems simple enough to update the regex that is used in SecureMail::Extension::mailer_before_send to also look for text related to password change cancellations.\n\nmy $is_passwordmail = !$is_bugmail \n                      && ($email->body =~ /cfmpw.*cxlpw/s\n                          || $email->header('Subject') =~ /Password change request canceled/);\n\nThe rest will happen automatically.\n\ndkl", "is_private": false, "count": 1, "time": "2011-05-12T05:05:47Z", "author": "dkl@mozilla.com", "id": 5464792}, {"creator": "mkanat@bugzilla.org", "raw_text": "(In reply to comment #0)\n> while there's probably nothing confidential in them, it seems weird having\n> the 'change password request' email encrypted, but the cancelled email not.\n\n  Well, the password change email allows you to change your password. The cancellation email doesn't allow you to do anything.", "text": "(In reply to comment #0)\n> while there's probably nothing confidential in them, it seems weird having\n> the 'change password request' email encrypted, but the cancelled email not.\n\n  Well, the password change email allows you to change your password. The cancellation email doesn't allow you to do anything.", "count": 2, "time": "2011-05-12T16:45:10Z", "attachment_id": null, "creation_time": "2011-05-12T16:45:10Z", "tags": [], "bug_id": 656539, "author": "mkanat@bugzilla.org", "is_private": false, "id": 5465778}, {"bug_id": 656539, "text": "Created attachment 533026\nPatch to also encrypt password cancellation email (v1)\n\nWe can do it for consistency as it would probably be expected by the users IMO.\n\ndkl", "creation_time": "2011-05-17T18:33:20Z", "tags": [], "attachment_id": 533026, "raw_text": "We can do it for consistency as it would probably be expected by the users IMO.\n\ndkl", "creator": "dkl@mozilla.com", "id": 5475351, "is_private": false, "author": "dkl@mozilla.com", "time": "2011-05-17T18:33:20Z", "count": 3}, {"creator": "mkanat@bugzilla.org", "raw_text": "  Adding behavior means maintaining behavior.\n\n  Also, I personally would be annoyed if I had to decrypt a notice that a request was canceled.", "text": "  Adding behavior means maintaining behavior.\n\n  Also, I personally would be annoyed if I had to decrypt a notice that a request was canceled.", "count": 4, "time": "2011-05-17T18:49:44Z", "attachment_id": null, "tags": [], "creation_time": "2011-05-17T18:49:44Z", "bug_id": 656539, "is_private": false, "author": "mkanat@bugzilla.org", "id": 5475373}, {"time": "2011-05-26T22:31:59Z", "count": 5, "raw_text": "Attaching patch that adds 'header' hook to forgotten-password.txt.tmpl and newchangedmail.txt.tmpl. The SecureMail extension can then add X-Bugzilla-Encrypt to the headers of those specific emails for detection in the extension code. This way body and subject lines would not need to be grepped. We could in theory add the 'header' hook to all email templates which would allow us to encrypt any other messages we like.\n\ndkl", "creator": "dkl@mozilla.com", "text": "Created attachment 535494\nPatch to add header hook for securemail (v1)\n\nAttaching patch that adds 'header' hook to forgotten-password.txt.tmpl and newchangedmail.txt.tmpl. The SecureMail extension can then add X-Bugzilla-Encrypt to the headers of those specific emails for detection in the extension code. This way body and subject lines would not need to be grepped. We could in theory add the 'header' hook to all email templates which would allow us to encrypt any other messages we like.\n\ndkl", "is_private": false, "author": "dkl@mozilla.com", "id": 5496410, "tags": [], "creation_time": "2011-05-26T22:31:59Z", "attachment_id": 535494, "bug_id": 656539}, {"id": 5497052, "count": 6, "author": "glob@mozilla.com", "time": "2011-05-27T06:47:50Z", "is_private": false, "text": "Comment on attachment 535494\nPatch to add header hook for securemail (v1)\n\nReview of attachment 535494:\n-----------------------------------------------------------------\n\nr=glob, much cleaner :)\n\n::: extensions/SecureMail/template/en/default/hook/account/password/forgotten-password-header.txt.tmpl\n@@ +16,5 @@\n> +  # All Rights Reserved.\n> +  #\n> +  # Contributor(s): Max Kanat-Alexander <mkanat@bugzilla.org>\n> +  #                 Gervase Markham <gerv@gerv.net>\n> +  # \t\t    Dave Lawrence <dkl@mozilla.com>\n\nnit: it's 2011 and just you :) (for both boilerplates)", "bug_id": 656539, "creator": "glob@mozilla.com", "raw_text": "Review of attachment 535494:\n-----------------------------------------------------------------\n\nr=glob, much cleaner :)\n\n::: extensions/SecureMail/template/en/default/hook/account/password/forgotten-password-header.txt.tmpl\n@@ +16,5 @@\n> +  # All Rights Reserved.\n> +  #\n> +  # Contributor(s): Max Kanat-Alexander <mkanat@bugzilla.org>\n> +  #                 Gervase Markham <gerv@gerv.net>\n> +  # \t\t    Dave Lawrence <dkl@mozilla.com>\n\nnit: it's 2011 and just you :) (for both boilerplates)", "attachment_id": 535494, "tags": [], "creation_time": "2011-05-27T06:47:50Z"}, {"bug_id": 656539, "text": "Thanks glob. I will push the new hooks upstream as well.\n\nCommitting to: bzr+ssh://dlawrence%40mozilla.com@bzr.mozilla.org/bmo/4.0\nmodified extensions/SecureMail/Extension.pm\nadded extensions/SecureMail/template/en/default/hook/email\nadded extensions/SecureMail/template/en/default/hook/account/password\nadded extensions/SecureMail/template/en/default/hook/account/password/forgotten-password-header.txt.tmpl\nadded extensions/SecureMail/template/en/default/hook/email/newchangedmail-header.txt.tmpl\nmodified template/en/default/account/password/forgotten-password.txt.tmpl\nmodified template/en/default/email/newchangedmail.txt.tmpl\nCommitted revision 7728.\n\ndkl", "tags": [], "creation_time": "2011-05-27T16:09:49Z", "attachment_id": null, "raw_text": "Thanks glob. I will push the new hooks upstream as well.\n\nCommitting to: bzr+ssh://dlawrence%40mozilla.com@bzr.mozilla.org/bmo/4.0\nmodified extensions/SecureMail/Extension.pm\nadded extensions/SecureMail/template/en/default/hook/email\nadded extensions/SecureMail/template/en/default/hook/account/password\nadded extensions/SecureMail/template/en/default/hook/account/password/forgotten-password-header.txt.tmpl\nadded extensions/SecureMail/template/en/default/hook/email/newchangedmail-header.txt.tmpl\nmodified template/en/default/account/password/forgotten-password.txt.tmpl\nmodified template/en/default/email/newchangedmail.txt.tmpl\nCommitted revision 7728.\n\ndkl", "creator": "dkl@mozilla.com", "id": 5497939, "is_private": false, "author": "dkl@mozilla.com", "time": "2011-05-27T16:09:49Z", "count": 7}, {"attachment_id": null, "tags": [], "creation_time": "2011-05-27T16:14:37Z", "bug_id": 656539, "is_private": false, "author": "dkl@mozilla.com", "id": 5497956, "creator": "dkl@mozilla.com", "raw_text": "Reopening as this does not solve the original reason for this bug. I will add the header to the password canceled email as well.\n\ndkl", "text": "Reopening as this does not solve the original reason for this bug. I will add the header to the password canceled email as well.\n\ndkl", "count": 8, "time": "2011-05-27T16:14:37Z"}, {"creator": "dkl@mozilla.com", "raw_text": "Done.\n\nCommitting to: bzr+ssh://dlawrence%40mozilla.com@bzr.mozilla.org/bmo/4.0\nadded extensions/SecureMail/template/en/default/hook/account/cancel-token-header.txt.tmpl\nmodified template/en/default/account/cancel-token.txt.tmpl\nCommitted revision 7729.\n\ndkl", "attachment_id": null, "tags": [], "creation_time": "2011-05-27T16:30:25Z", "text": "Done.\n\nCommitting to: bzr+ssh://dlawrence%40mozilla.com@bzr.mozilla.org/bmo/4.0\nadded extensions/SecureMail/template/en/default/hook/account/cancel-token-header.txt.tmpl\nmodified template/en/default/account/cancel-token.txt.tmpl\nCommitted revision 7729.\n\ndkl", "bug_id": 656539, "count": 9, "author": "dkl@mozilla.com", "time": "2011-05-27T16:30:25Z", "is_private": false, "id": 5498016}, {"bug_id": 656539, "text": "Reopening as this was backed out of bmo/4.0 pending some more thorough testing.\n\ndkl", "creation_time": "2011-06-01T05:13:28Z", "tags": [], "attachment_id": null, "raw_text": "Reopening as this was backed out of bmo/4.0 pending some more thorough testing.\n\ndkl", "creator": "dkl@mozilla.com", "id": 5505336, "is_private": false, "time": "2011-06-01T05:13:28Z", "author": "dkl@mozilla.com", "count": 10}]}}}