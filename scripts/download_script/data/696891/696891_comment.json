{"comments": {}, "bugs": {"696891": {"comments": [{"author": "ehsan.akhgari@gmail.com", "count": 0, "text": "If you create an nsLocalFile with a path name like \"/Users/ehsanakhgari/moz/mozgit/obj-ff-dbg/dist/NightlyDebug.app/Contents/MacOS/./application.ini\", and then call GetParent on it, you'll get an nsIFile pointing to \"/Users/ehsanakhgari/moz/mozgit/obj-ff-dbg/dist/NightlyDebug.app/Contents/MacOS/.\".  I believe that this is not correct, and GetParent should be pointing to \"/Users/ehsanakhgari/moz/mozgit/obj-ff-dbg/dist/NightlyDebug.app/Contents/MacOS\" instead.\n\nI'm not sure if this is the desired behavior, and if not, how to fix it.  This can lead to some weird corner cases where we would end up picking the wrong directory for performing background updates.", "creator": "ehsan.akhgari@gmail.com", "is_private": false, "creation_time": "2011-10-24T21:33:52Z", "id": 5801544, "bug_id": 696891, "attachment_id": null, "raw_text": "If you create an nsLocalFile with a path name like \"/Users/ehsanakhgari/moz/mozgit/obj-ff-dbg/dist/NightlyDebug.app/Contents/MacOS/./application.ini\", and then call GetParent on it, you'll get an nsIFile pointing to \"/Users/ehsanakhgari/moz/mozgit/obj-ff-dbg/dist/NightlyDebug.app/Contents/MacOS/.\".  I believe that this is not correct, and GetParent should be pointing to \"/Users/ehsanakhgari/moz/mozgit/obj-ff-dbg/dist/NightlyDebug.app/Contents/MacOS\" instead.\n\nI'm not sure if this is the desired behavior, and if not, how to fix it.  This can lead to some weird corner cases where we would end up picking the wrong directory for performing background updates.", "time": "2011-10-24T21:33:52Z", "tags": []}, {"id": 5801600, "bug_id": 696891, "creation_time": "2011-10-24T21:53:09Z", "is_private": false, "creator": "benjamin@smedbergs.us", "author": "benjamin@smedbergs.us", "count": 1, "text": "What does python do? We normally operate on files lexically in which case the current behavior would be correct and you'd need to normalize a file in order to get the parent that you expect. But I'm willing to be convinced that maybe we should automatically normalize when .parent is called, or something like that.", "tags": [], "time": "2011-10-24T21:53:09Z", "attachment_id": null, "raw_text": "What does python do? We normally operate on files lexically in which case the current behavior would be correct and you'd need to normalize a file in order to get the parent that you expect. But I'm willing to be convinced that maybe we should automatically normalize when .parent is called, or something like that."}, {"time": "2011-10-25T12:08:21Z", "raw_text": "Python 2.6.6 (r266:84374, Aug 31 2010, 11:00:51) \n[GCC 4.0.1 (Apple Inc. build 5493)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import os.path\n>>> p = \"/Users/ehsanakhgari/moz/mozgit/obj-ff-dbg/dist/NightlyDebug.app/Contents/MacOS/./application.ini\"\n>>> os.path.dirname(p)\n'/Users/ehsanakhgari/moz/mozgit/obj-ff-dbg/dist/NightlyDebug.app/Contents/MacOS/.'\n\nnormpath works:\n>>> os.path.normpath(p)\n'/Users/ehsanakhgari/moz/mozgit/obj-ff-dbg/dist/NightlyDebug.app/Contents/MacOS/application.ini'", "bug_id": 696891, "id": 5802835, "author": "ted@mielczarek.org", "text": "Python 2.6.6 (r266:84374, Aug 31 2010, 11:00:51) \n[GCC 4.0.1 (Apple Inc. build 5493)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import os.path\n>>> p = \"/Users/ehsanakhgari/moz/mozgit/obj-ff-dbg/dist/NightlyDebug.app/Contents/MacOS/./application.ini\"\n>>> os.path.dirname(p)\n'/Users/ehsanakhgari/moz/mozgit/obj-ff-dbg/dist/NightlyDebug.app/Contents/MacOS/.'\n\nnormpath works:\n>>> os.path.normpath(p)\n'/Users/ehsanakhgari/moz/mozgit/obj-ff-dbg/dist/NightlyDebug.app/Contents/MacOS/application.ini'", "count": 2, "tags": [], "attachment_id": null, "is_private": false, "creation_time": "2011-10-25T12:08:21Z", "creator": "ted@mielczarek.org"}, {"bug_id": 696891, "id": 5805199, "text": "Is there any reason why we should not adopt the normpath behavior?", "count": 3, "author": "ehsan.akhgari@gmail.com", "raw_text": "Is there any reason why we should not adopt the normpath behavior?", "time": "2011-10-26T02:39:54Z", "is_private": false, "creation_time": "2011-10-26T02:39:54Z", "creator": "ehsan.akhgari@gmail.com", "tags": [], "attachment_id": null}, {"creation_time": "2012-04-11T14:54:31Z", "is_private": false, "id": 6213765, "bug_id": 696891, "text": "*** Bug 744400 has been marked as a duplicate of this bug. ***", "count": 4, "author": "edransch.contact@gmail.com", "creator": "edransch.contact@gmail.com", "tags": [], "raw_text": "", "attachment_id": null, "time": "2012-04-11T14:54:31Z"}, {"id": 6213778, "bug_id": 696891, "is_private": false, "creation_time": "2012-04-11T14:59:27Z", "creator": "ehsan.akhgari@gmail.com", "author": "ehsan.akhgari@gmail.com", "text": "See bug 744400, where this behavior breaks our updates in a weird way.\n\nCan somebody please respond to comment 3?  If we don't fix this, basically any caller of nsIFile::GetParent() has a chance of getting the wrong directory out of it.", "count": 5, "tags": [], "time": "2012-04-11T14:59:27Z", "attachment_id": null, "raw_text": "See bug 744400, where this behavior breaks our updates in a weird way.\n\nCan somebody please respond to comment 3?  If we don't fix this, basically any caller of nsIFile::GetParent() has a chance of getting the wrong directory out of it."}]}}}