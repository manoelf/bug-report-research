{"comments": {}, "bugs": {"1631845": {"comments": [{"is_private": false, "creation_time": "2020-04-21T16:55:21Z", "time": "2020-04-21T16:55:21Z", "text": "We are going to add a footer to the bottom of Top Sites results that reads \"Top Sites\", so it is clear where Urlbar Top Sites are coming from. The footer will contain a gear icon that will link to about:preferences#search, which will have a preference to disable Top Sites/openViewOnFocus behaviour.\n\nVerdi is finalizing a spec for this.", "raw_text": "We are going to add a footer to the bottom of Top Sites results that reads \"Top Sites\", so it is clear where Urlbar Top Sites are coming from. The footer will contain a gear icon that will link to about:preferences#search, which will have a preference to disable Top Sites/openViewOnFocus behaviour.\n\nVerdi is finalizing a spec for this.", "count": 0, "id": 14769549, "bug_id": 1631845, "tags": [], "author": "htwyford@mozilla.com", "attachment_id": null, "creator": "htwyford@mozilla.com"}, {"text": "If possible (depends on design times) we should have this in 77 along with the pref.", "creation_time": "2020-04-22T07:51:10Z", "attachment_id": null, "tags": [], "author": "mak@mozilla.com", "time": "2020-04-22T07:51:10Z", "raw_text": "If possible (depends on design times) we should have this in 77 along with the pref.", "is_private": false, "count": 1, "bug_id": 1631845, "id": 14771065, "creator": "mak@mozilla.com"}, {"text": "Created attachment 9143197\nWIP - Bug 1631845 - Add a footer to Urlbar Top Sites to explain their source.\n\n\nThis is a WIP patch to add a footer to address bar Top Sites. It needs fixes to the layout, polish, and tests, but I wanted to post this for feedback on the design before I spent too much time polishing what might turn out to be a bad approach.\n\nThe spec calls for a row at the bottom of results with a right-aligned settings button that leads the user to about:preferences#search. I considered a couple of approaches:\n\n1. Handle the entire thing in the View. If all results are from UrlbarProviderTopSites, then we add some DOM elements to the bottom of the results pane. This would be very reliable, but adds more custom layout code to UrlbarView, which we're trying to get away from. It also breaks down the separation between the view and the model.\n\n2. Introduce a new FOOTER UrlbarReslt. Adding and maintaining a whole new UrlbarResult seems like it would be a pain.\n\n3. Tweak one of the existing types.\n\nI settled on (3), tweaking tips to add a new `compact` property. This shrinks the tip down to one row. I also introduced a buttonIcon payload property to allow for ghost icons as the tip button. These compact tips could be useful in the future, too.\n\nThe main disadvantage of this imo is that this \"result\" still has to go through the Muxer, even though we know in this case we always want it anchored to the bottom of the results panel. I set suggestedIndex to sites.length to work around this, but suggestedIndex is just a suggestion after all. Also in this current implementation, it counts as a result against maxResults. This isn't a problem right now since we show < maxResults Top Sites, but it would take away the tenth Top Site if we decided to show more than 8 Top Sites in the future. It could also mess with our tip telemetry, although we could just add special handling not to record this particular kind of tip.", "creation_time": "2020-04-24T19:27:10Z", "tags": [], "author": "htwyford@mozilla.com", "attachment_id": 9143197, "count": 2, "is_private": false, "time": "2020-04-24T19:27:10Z", "raw_text": "\nThis is a WIP patch to add a footer to address bar Top Sites. It needs fixes to the layout, polish, and tests, but I wanted to post this for feedback on the design before I spent too much time polishing what might turn out to be a bad approach.\n\nThe spec calls for a row at the bottom of results with a right-aligned settings button that leads the user to about:preferences#search. I considered a couple of approaches:\n\n1. Handle the entire thing in the View. If all results are from UrlbarProviderTopSites, then we add some DOM elements to the bottom of the results pane. This would be very reliable, but adds more custom layout code to UrlbarView, which we're trying to get away from. It also breaks down the separation between the view and the model.\n\n2. Introduce a new FOOTER UrlbarReslt. Adding and maintaining a whole new UrlbarResult seems like it would be a pain.\n\n3. Tweak one of the existing types.\n\nI settled on (3), tweaking tips to add a new `compact` property. This shrinks the tip down to one row. I also introduced a buttonIcon payload property to allow for ghost icons as the tip button. These compact tips could be useful in the future, too.\n\nThe main disadvantage of this imo is that this \"result\" still has to go through the Muxer, even though we know in this case we always want it anchored to the bottom of the results panel. I set suggestedIndex to sites.length to work around this, but suggestedIndex is just a suggestion after all. Also in this current implementation, it counts as a result against maxResults. This isn't a problem right now since we show < maxResults Top Sites, but it would take away the tenth Top Site if we decided to show more than 8 Top Sites in the future. It could also mess with our tip telemetry, although we could just add special handling not to record this particular kind of tip.", "creator": "htwyford@mozilla.com", "id": 14777097, "bug_id": 1631845}, {"raw_text": "Sorry y'all. After talking this though with a number of people on the ux team we've decided that we don't want or need this footer. The sites themselves are explanatory and a direct link to preferences here could cause more harm than not. We'll still be adding the pref though - https://bugzilla.mozilla.org/show_bug.cgi?id=1627858#c54", "time": "2020-04-24T21:42:36Z", "creation_time": "2020-04-24T21:42:36Z", "text": "Sorry y'all. After talking this though with a number of people on the ux team we've decided that we don't want or need this footer. The sites themselves are explanatory and a direct link to preferences here could cause more harm than not. We'll still be adding the pref though - https://bugzilla.mozilla.org/show_bug.cgi?id=1627858#c54", "is_private": false, "count": 3, "bug_id": 1631845, "id": 14777428, "creator": "mverdi@mozilla.com", "attachment_id": null, "author": "mverdi@mozilla.com", "tags": []}]}}}