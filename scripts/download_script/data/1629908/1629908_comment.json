{"bugs": {"1629908": {"comments": [{"raw_text": "In bug 1594443 graphics telemetry dashboard notebooks were updated to read from BigQuery. This worked until around mid-March, when something in Databricks was changed. Now the notebooks are failing to import `get_pings_properties` from `python_moztelemetry`.\n\nAnthony and Wesley, do you have any suggestions how to get this up and running again?", "time": "2020-04-14T14:40:27Z", "is_private": false, "count": 0, "bug_id": 1629908, "id": 14754257, "creator": "mikokm@gmail.com", "text": "In bug 1594443 graphics telemetry dashboard notebooks were updated to read from BigQuery. This worked until around mid-March, when something in Databricks was changed. Now the notebooks are failing to import `get_pings_properties` from `python_moztelemetry`.\n\nAnthony and Wesley, do you have any suggestions how to get this up and running again?", "creation_time": "2020-04-14T14:40:27Z", "attachment_id": null, "author": "mikokm@gmail.com", "tags": []}, {"tags": [], "author": "amiyaguchi@mozilla.com", "attachment_id": null, "creator": "amiyaguchi@mozilla.com", "id": 14757974, "bug_id": 1629908, "count": 1, "is_private": false, "time": "2020-04-15T22:13:55Z", "creation_time": "2020-04-15T22:13:55Z", "text": "It looks like the `python_moztelemetry` package is no longer installed on the cluster by default. Can you add to the top of the relevant notebook the following line and report the results?\n\n```\ndbutils.library.installPyPI(\"python_moztelemetry\")\n```", "raw_text": "It looks like the `python_moztelemetry` package is no longer installed on the cluster by default. Can you add to the top of the relevant notebook the following line and report the results?\n\n```\ndbutils.library.installPyPI(\"python_moztelemetry\")\n```"}, {"id": 14758571, "bug_id": 1629908, "tags": [], "author": "akomarzewski@mozilla.com", "attachment_id": null, "creator": "akomarzewski@mozilla.com", "is_private": false, "time": "2020-04-16T08:39:11Z", "creation_time": "2020-04-16T08:39:11Z", "text": "Moztelemetry was deprecated in November [1]. As mentioned in the announcement, these notebooks can be migrated to Spark BigQuery connector [2].\n\n:miko - I too a quick look at one of the notebooks, it should be easy to migrate. I'd suggest you take a look at example notebook mentioned in [2], feel free to ping me if something's not clear.\n\n[1] https://mail.mozilla.org/pipermail/fx-data-dev/2019-November/000291.html\n[2] https://docs.telemetry.mozilla.org/cookbooks/bigquery.html#on-databricks", "raw_text": "Moztelemetry was deprecated in November [1]. As mentioned in the announcement, these notebooks can be migrated to Spark BigQuery connector [2].\n\n:miko - I too a quick look at one of the notebooks, it should be easy to migrate. I'd suggest you take a look at example notebook mentioned in [2], feel free to ping me if something's not clear.\n\n[1] https://mail.mozilla.org/pipermail/fx-data-dev/2019-November/000291.html\n[2] https://docs.telemetry.mozilla.org/cookbooks/bigquery.html#on-databricks", "count": 2}, {"count": 3, "creation_time": "2020-04-16T19:18:11Z", "time": "2020-04-16T19:18:11Z", "text": "(In reply to Anthony Miyaguchi [:amiyaguchi] from comment #1)\n> It looks like the `python_moztelemetry` package is no longer installed on the cluster by default. Can you add to the top of the relevant notebook the following line and report the results?\n> \n> ```\n> dbutils.library.installPyPI(\"python_moztelemetry\")\n> ```\n\nThis worked perfectly, thank you! I had actually already tried this but was missing the `python_` prefix.\n\nHow does the lifecycle of these python packages work? Is it possible that this stops working at some point?", "raw_text": "(In reply to Anthony Miyaguchi [:amiyaguchi] from comment #1)\n> It looks like the `python_moztelemetry` package is no longer installed on the cluster by default. Can you add to the top of the relevant notebook the following line and report the results?\n> \n> ```\n> dbutils.library.installPyPI(\"python_moztelemetry\")\n> ```\n\nThis worked perfectly, thank you! I had actually already tried this but was missing the `python_` prefix.\n\nHow does the lifecycle of these python packages work? Is it possible that this stops working at some point?", "is_private": false, "attachment_id": null, "creator": "mikokm@gmail.com", "tags": [], "author": "mikokm@gmail.com", "bug_id": 1629908, "id": 14759796}, {"count": 4, "raw_text": "The repository for the package (https://github.com/mozilla/python_moztelemetry) is currently archived, so there are unlikely to be any modifications to the package going forward. It's published to pypi, so any of the utilities should continue to work as long as there aren't any dependency conflicts in the installed packages on the cluster. I would be more worried about databricks going away in the future (which is plausible). At that point, I would recommend migrating your dashboard to utilize BigQuery without all of the shims.", "creation_time": "2020-04-16T19:25:00Z", "time": "2020-04-16T19:25:00Z", "text": "The repository for the package (https://github.com/mozilla/python_moztelemetry) is currently archived, so there are unlikely to be any modifications to the package going forward. It's published to pypi, so any of the utilities should continue to work as long as there aren't any dependency conflicts in the installed packages on the cluster. I would be more worried about databricks going away in the future (which is plausible). At that point, I would recommend migrating your dashboard to utilize BigQuery without all of the shims.", "is_private": false, "creator": "amiyaguchi@mozilla.com", "attachment_id": null, "author": "amiyaguchi@mozilla.com", "tags": [], "bug_id": 1629908, "id": 14759809}]}}, "comments": {}}