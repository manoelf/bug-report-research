{"comments": {}, "bugs": {"675138": {"comments": [{"tags": [], "attachment_id": null, "raw_text": "User Agent: Mozilla/5.0 (X11; Linux i686; rv:8.0a1) Gecko/20110718 Firefox/8.0a1\nBuild ID: 20110725210822\n\nSteps to reproduce:\n\nRunning firefox in the debugger, surfing normally\n\n\nActual results:\n\nFirefox tried to close a socket and got the sigpipe signal\n\n\nExpected results:\n\nit should have closed the socket", "time": "2011-07-29T04:30:18Z", "is_private": false, "creation_time": "2011-07-29T04:30:18Z", "id": 5621251, "bug_id": 675138, "author": "JamesMikeDuPont@googlemail.com", "count": 0, "text": "User Agent: Mozilla/5.0 (X11; Linux i686; rv:8.0a1) Gecko/20110718 Firefox/8.0a1\nBuild ID: 20110725210822\n\nSteps to reproduce:\n\nRunning firefox in the debugger, surfing normally\n\n\nActual results:\n\nFirefox tried to close a socket and got the sigpipe signal\n\n\nExpected results:\n\nit should have closed the socket", "creator": "JamesMikeDuPont@googlemail.com"}, {"tags": [], "attachment_id": null, "creation_time": "2011-07-29T04:31:07Z", "is_private": false, "creator": "JamesMikeDuPont@googlemail.com", "time": "2011-07-29T04:31:07Z", "raw_text": "I have been running firefox in the debugger for the past days, It looks like I caught something : closing the connection to ad.zanox.com:443  kills the browser. I guess it is some adserver that is unstable. \n\nBacktrace :\nProgram received signal SIGPIPE, Broken pipe.\n[Switching to Thread 0xb60ffb70 (LWP 9426)]\n0x0012e416 in __kernel_vsyscall ()\n(gdb) bt\n#0  0x0012e416 in __kernel_vsyscall ()\n#1  0x0013fa78 in send () at ../sysdeps/unix/sysv/linux/i386/socket.S:97\n#2  0x00480053 in pt_Send (fd=0x899d5f60, buf=0x8c62e000, amount=37, flags=0, \n    timeout=0)\n    at /home/mdupont/experiments/firefox/mozilla-central/nsprpub/pr/src/pthreads/ptio.c:1945\n#3  0x00654725 in ssl_DefSend (ss=0x9154b000, buf=0x8c62e000 \"\\025\\003\\001\", \n    len=37, flags=0) at ssldef.c:127\n#4  0x00646db3 in ssl3_SendRecord (ss=0x9154b000, type=<value optimized out>, \n    pIn=0xb60ff02e \"\\001\", nIn=2, flags=0) at ssl3con.c:2280\n#5  0x00647050 in SSL3_SendAlert (ss=0x9154b000, level=alert_warning, \n    desc=<value optimized out>) at ssl3con.c:2535\n#6  0x00658187 in ssl_SecureClose (ss=0x9154b000) at sslsecur.c:1076\n#7  0x0065c222 in ssl_Close (fd=0x9e11c0e0) at sslsock.c:1572\n#8  0x010dfe52 in nsNSSSocketInfo::CloseSocketAndDestroy (this=0x7fc37ce0)\n    at /home/mdupont/experiments/firefox/mozilla-central/security/manager/ssl/src/nsNSSIOLayer.cpp:1831\n#9  0x010d24b2 in nsSSLThread::requestClose (si=0x7fc37ce0)\n    at /home/mdupont/experiments/firefox/mozilla-central/security/manager/ssl/src/nsSSLThread.cpp:438\n#10 0x010dfb04 in nsSSLIOLayerClose (fd=0x9e11c0e0)\n---Type <return> to continue, or q <return> to quit---\n    at /home/mdupont/experiments/firefox/mozilla-central/security/manager/ssl/src/nsNSSIOLayer.cpp:1820\n#11 0x00465231 in PR_Close (fd=0x9e11c0e0)\n    at /home/mdupont/experiments/firefox/mozilla-central/nsprpub/pr/src/io/priometh.c:136\n#12 0x008bfe29 in nsSocketTransport::ReleaseFD_Locked (this=0x8e16cbd0, \n    fd=0x9e11c0e0)\n    at /home/mdupont/experiments/firefox/mozilla-central/netwerk/base/src/nsSocketTransport2.cpp:1403\n#13 0x008c0639 in nsSocketTransport::OnSocketDetached (this=0x8e16cbd0, \n    fd=0x9e11c0e0)\n    at /home/mdupont/experiments/firefox/mozilla-central/netwerk/base/src/nsSocketTransport2.cpp:1646\n#14 0x008c336c in nsSocketTransportService::DetachSocket (this=0xb734da60, \n    listHead=0xa47a4000, sock=0xa47a40b4)\n    at /home/mdupont/experiments/firefox/mozilla-central/netwerk/base/src/nsSocketTransportService2.cpp:205\n#15 0x008c36ed in nsSocketTransportService::DoPollIteration (this=0xb734da60, \n    wait=-1221272992)\n    at /home/mdupont/experiments/firefox/mozilla-central/netwerk/base/src/nsSocketTransportService2.cpp:765\n---Type <return> to continue, or q <return> to quit---\n#16 0x008c3843 in nsSocketTransportService::Run (this=0xb734da60)\n    at /home/mdupont/experiments/firefox/mozilla-central/netwerk/base/src/nsSocketTransportService2.cpp:631\n#17 0x0134d3f9 in nsThread::ProcessNextEvent (this=0xb734db20, mayWait=1, \n    result=0xb60ff30c)\n    at /home/mdupont/experiments/firefox/mozilla-central/xpcom/threads/nsThread.cpp:617\n#18 0x0131b859 in NS_ProcessNextEvent_P (thread=0xffffffe0, mayWait=1)\n    at /home/mdupont/experiments/firefox/mozilla-central/obj-i686-pc-linux-gnu/xpcom/build/nsThreadUtils.cpp:245\n#19 0x0134da76 in nsThread::ThreadFunc (arg=0xb734db20)\n    at /home/mdupont/experiments/firefox/mozilla-central/xpcom/threads/nsThread.cpp:272\n#20 0x00482b24 in _pt_root (arg=0xb7d31a00)\n    at /home/mdupont/experiments/firefox/mozilla-central/nsprpub/pr/src/pthreads/ptthread.c:187\n#21 0x00137cc9 in start_thread (arg=0xb60ffb70) at pthread_create.c:304\n#22 0x0034d69e in clone () at ../sysdeps/unix/sysv/linux/i386/clone.S:130\n\nLooking up the stack  :\n\n#7  0x0065c222 in ssl_Close (fd=0x9e11c0e0) at sslsock.c:1572\n1572\t    rv = (PRStatus)(*ss->ops->close)(ss);\n(gdb) p *ss\n$6 = {fd = 0x9e11c0e0, ops = 0x668d98, opt = {useSecurity = 1, useSocks = 0, \n    requestCertificate = 0, requireCertificate = 2, handshakeAsClient = 1, \n    handshakeAsServer = 0, enableSSL2 = 0, enableSSL3 = 1, enableTLS = 1, \n    noCache = 0, fdx = 0, v2CompatibleHello = 0, detectRollBack = 1, \n    noStepDown = 0, bypassPKCS11 = 0, noLocks = 0, enableSessionTickets = 1, \n    enableDeflate = 0, enableRenegotiation = 2, requireSafeNegotiation = 0, \n    enableFalseStart = 0}, clientAuthRequested = 0, delayDisabled = 1, \n  firstHsDone = 1, handshakeBegun = 1, lastWriteBlocked = 0, \n  recvdCloseNotify = 0, TCPconnected = 1, appDataBuffered = 0, \n  peerRequestedProtection = 1, version = 769, clientHelloVersion = 769, sec = {\n    send = 0x648adb <ssl3_SendApplicationData>, isServer = 0, writeBuf = {\n      buf = 0x8c62e000 \"\\025\\003\\001\", len = 37, space = 18432}, \n    cipherType = 10, keyBits = 128, secretKeyBits = 128, localCert = 0x0, \n    peerCert = 0x9bd08010, peerKey = 0x0, authAlgorithm = ssl_sign_rsa, \n    authKeyBits = 1024, keaType = ssl_kea_rsa, keaKeyBits = 1024, \n    cache = 0x657361 <CacheSID>, uncache = 0x6572f4 <LockAndUncacheSID>, \n    sendSequence = 0, rcvSequence = 0, hash = 0x0, hashcx = 0x0, sendSecret = {\n      type = siBuffer, data = 0x0, len = 0}, rcvSecret = {type = siBuffer, \n      data = 0x0, len = 0}, readcx = 0x0, writecx = 0x0, enc = 0, dec = 0, \n    destroy = 0, blockShift = 0, blockSize = 1, ci = {sendBuf = {\n        buf = 0x8eb68000 \"\\024\", len = 0, space = 18432}, peer = {_S6_un = {\n          _S6_u8 = \"\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\377\\377\\331nn\\347\", _S6_u16 = {0, 0, 0, 0, 0, 65535, 28377, 59246}, _S6_u32 = {0, 0, 4294901760, \n            3882774233}, _S6_u64 = {0, 16676388352781385728}}}, port = 47873, \n      sid = 0x8e16d420, elements = 0 '\\000', requiredElements = 0 '\\000', \n      sentElements = 0 '\\000', sentFinished = 0 '\\000', \n      serverChallengeLen = 0, authType = 0 '\\000', \n      clientChallenge = '\\000' <repeats 31 times>, \n      connectionID = '\\000' <repeats 15 times>, \n      serverChallenge = '\\000' <repeats 31 times>, \n      readKey = '\\000' <repeats 63 times>, \n      writeKey = '\\000' <repeats 63 times>, keySize = 0}}, \n  url = 0x89d4f530 \"ad.zanox.com\", handshake = 0, nextHandshake = 0, \n  securityHandshake = 0, peerID = 0x899d5fc0 \"ad.zanox.com:443\", \n  cipherSpecs = 0x833d9390 \"\", sizeCipherSpecs = 105, preferredCipher = 0x0, \n  stepDownKeyPair = 0x0, authCertificate = 0x10d3bf2\n     <AuthCertificateCallback(void*, PRFileDesc*, PRBool, PRBool)>, \n  authCertificateArg = 0x0, \n  getClientAuthData = 0x10e0546 <nsNSS_SSLGetClientAuthData(void*, PRFileDesc*, CERTDistNames*, CERTCertificate**, SECKEYPrivateKey**)>, \n  getClientAuthDataArg = 0x7fc37ce0, sniSocketConfig = 0, \n  sniSocketConfigArg = 0x0, \n---Type <return> to continue, or q <return> to quit---\n  handleBadCert = 0x10e2202 <nsNSSBadCertHandler(void*, PRFileDesc*)>, \n  badCertArg = 0x7fc37ce0, \n  handshakeCallback = 0x10d3ff7 <HandshakeCallback(PRFileDesc*, void*)>, \n  handshakeCallbackData = 0x7fc37ce0, pkcs11PinArg = 0x7fc37ce8, rTimeout = 0, \n  wTimeout = 0, cTimeout = 20, recvLock = 0x84d9b5e0, sendLock = 0x84dbb3a0, \n  recvBufLock = 0x8338fa50, xmitBufLock = 0x8338fac0, \n  firstHandshakeLock = 0x8338ea90, ssl3HandshakeLock = 0x8338f970, \n  specLock = 0x9abd8190, dbHandle = 0xb17ca018, writerThread = 0x0, \n  shutdownHow = 0, allowedByPolicy = 222, maybeAllowedByPolicy = 222, \n  chosenPreference = 0, handshaking = sslHandshakingAsClient, gs = {state = 1, \n    buf = {\n      buf = 0x8c652000 \"HTTP/1.1 302 Moved Temporarily\\r\\nCache-Control: no-store\\r\\nPragma: no-cache\\r\\nContent-Length: 0\\r\\nLocation: https://www.zanox-affiliate.de/ppl/?SavedRedirectID=1531872154021609472\\r\\nServer: Microsoft-IIS/7\"..., len = 315, space = 18432}, offset = 0, remainder = 5, count = 0, \n\n\nIt seems this bug is mentioned here: \nhttps://bugs.launchpad.net/ubuntu/+source/firefox/+bug/788102\n\nhere are some similar ones :\n\nhttps://bugs.launchpad.net/ubuntu/+source/firefox/+bug/374488", "id": 5621253, "bug_id": 675138, "text": "I have been running firefox in the debugger for the past days, It looks like I caught something : closing the connection to ad.zanox.com:443  kills the browser. I guess it is some adserver that is unstable. \n\nBacktrace :\nProgram received signal SIGPIPE, Broken pipe.\n[Switching to Thread 0xb60ffb70 (LWP 9426)]\n0x0012e416 in __kernel_vsyscall ()\n(gdb) bt\n#0  0x0012e416 in __kernel_vsyscall ()\n#1  0x0013fa78 in send () at ../sysdeps/unix/sysv/linux/i386/socket.S:97\n#2  0x00480053 in pt_Send (fd=0x899d5f60, buf=0x8c62e000, amount=37, flags=0, \n    timeout=0)\n    at /home/mdupont/experiments/firefox/mozilla-central/nsprpub/pr/src/pthreads/ptio.c:1945\n#3  0x00654725 in ssl_DefSend (ss=0x9154b000, buf=0x8c62e000 \"\\025\\003\\001\", \n    len=37, flags=0) at ssldef.c:127\n#4  0x00646db3 in ssl3_SendRecord (ss=0x9154b000, type=<value optimized out>, \n    pIn=0xb60ff02e \"\\001\", nIn=2, flags=0) at ssl3con.c:2280\n#5  0x00647050 in SSL3_SendAlert (ss=0x9154b000, level=alert_warning, \n    desc=<value optimized out>) at ssl3con.c:2535\n#6  0x00658187 in ssl_SecureClose (ss=0x9154b000) at sslsecur.c:1076\n#7  0x0065c222 in ssl_Close (fd=0x9e11c0e0) at sslsock.c:1572\n#8  0x010dfe52 in nsNSSSocketInfo::CloseSocketAndDestroy (this=0x7fc37ce0)\n    at /home/mdupont/experiments/firefox/mozilla-central/security/manager/ssl/src/nsNSSIOLayer.cpp:1831\n#9  0x010d24b2 in nsSSLThread::requestClose (si=0x7fc37ce0)\n    at /home/mdupont/experiments/firefox/mozilla-central/security/manager/ssl/src/nsSSLThread.cpp:438\n#10 0x010dfb04 in nsSSLIOLayerClose (fd=0x9e11c0e0)\n---Type <return> to continue, or q <return> to quit---\n    at /home/mdupont/experiments/firefox/mozilla-central/security/manager/ssl/src/nsNSSIOLayer.cpp:1820\n#11 0x00465231 in PR_Close (fd=0x9e11c0e0)\n    at /home/mdupont/experiments/firefox/mozilla-central/nsprpub/pr/src/io/priometh.c:136\n#12 0x008bfe29 in nsSocketTransport::ReleaseFD_Locked (this=0x8e16cbd0, \n    fd=0x9e11c0e0)\n    at /home/mdupont/experiments/firefox/mozilla-central/netwerk/base/src/nsSocketTransport2.cpp:1403\n#13 0x008c0639 in nsSocketTransport::OnSocketDetached (this=0x8e16cbd0, \n    fd=0x9e11c0e0)\n    at /home/mdupont/experiments/firefox/mozilla-central/netwerk/base/src/nsSocketTransport2.cpp:1646\n#14 0x008c336c in nsSocketTransportService::DetachSocket (this=0xb734da60, \n    listHead=0xa47a4000, sock=0xa47a40b4)\n    at /home/mdupont/experiments/firefox/mozilla-central/netwerk/base/src/nsSocketTransportService2.cpp:205\n#15 0x008c36ed in nsSocketTransportService::DoPollIteration (this=0xb734da60, \n    wait=-1221272992)\n    at /home/mdupont/experiments/firefox/mozilla-central/netwerk/base/src/nsSocketTransportService2.cpp:765\n---Type <return> to continue, or q <return> to quit---\n#16 0x008c3843 in nsSocketTransportService::Run (this=0xb734da60)\n    at /home/mdupont/experiments/firefox/mozilla-central/netwerk/base/src/nsSocketTransportService2.cpp:631\n#17 0x0134d3f9 in nsThread::ProcessNextEvent (this=0xb734db20, mayWait=1, \n    result=0xb60ff30c)\n    at /home/mdupont/experiments/firefox/mozilla-central/xpcom/threads/nsThread.cpp:617\n#18 0x0131b859 in NS_ProcessNextEvent_P (thread=0xffffffe0, mayWait=1)\n    at /home/mdupont/experiments/firefox/mozilla-central/obj-i686-pc-linux-gnu/xpcom/build/nsThreadUtils.cpp:245\n#19 0x0134da76 in nsThread::ThreadFunc (arg=0xb734db20)\n    at /home/mdupont/experiments/firefox/mozilla-central/xpcom/threads/nsThread.cpp:272\n#20 0x00482b24 in _pt_root (arg=0xb7d31a00)\n    at /home/mdupont/experiments/firefox/mozilla-central/nsprpub/pr/src/pthreads/ptthread.c:187\n#21 0x00137cc9 in start_thread (arg=0xb60ffb70) at pthread_create.c:304\n#22 0x0034d69e in clone () at ../sysdeps/unix/sysv/linux/i386/clone.S:130\n\nLooking up the stack  :\n\n#7  0x0065c222 in ssl_Close (fd=0x9e11c0e0) at sslsock.c:1572\n1572\t    rv = (PRStatus)(*ss->ops->close)(ss);\n(gdb) p *ss\n$6 = {fd = 0x9e11c0e0, ops = 0x668d98, opt = {useSecurity = 1, useSocks = 0, \n    requestCertificate = 0, requireCertificate = 2, handshakeAsClient = 1, \n    handshakeAsServer = 0, enableSSL2 = 0, enableSSL3 = 1, enableTLS = 1, \n    noCache = 0, fdx = 0, v2CompatibleHello = 0, detectRollBack = 1, \n    noStepDown = 0, bypassPKCS11 = 0, noLocks = 0, enableSessionTickets = 1, \n    enableDeflate = 0, enableRenegotiation = 2, requireSafeNegotiation = 0, \n    enableFalseStart = 0}, clientAuthRequested = 0, delayDisabled = 1, \n  firstHsDone = 1, handshakeBegun = 1, lastWriteBlocked = 0, \n  recvdCloseNotify = 0, TCPconnected = 1, appDataBuffered = 0, \n  peerRequestedProtection = 1, version = 769, clientHelloVersion = 769, sec = {\n    send = 0x648adb <ssl3_SendApplicationData>, isServer = 0, writeBuf = {\n      buf = 0x8c62e000 \"\\025\\003\\001\", len = 37, space = 18432}, \n    cipherType = 10, keyBits = 128, secretKeyBits = 128, localCert = 0x0, \n    peerCert = 0x9bd08010, peerKey = 0x0, authAlgorithm = ssl_sign_rsa, \n    authKeyBits = 1024, keaType = ssl_kea_rsa, keaKeyBits = 1024, \n    cache = 0x657361 <CacheSID>, uncache = 0x6572f4 <LockAndUncacheSID>, \n    sendSequence = 0, rcvSequence = 0, hash = 0x0, hashcx = 0x0, sendSecret = {\n      type = siBuffer, data = 0x0, len = 0}, rcvSecret = {type = siBuffer, \n      data = 0x0, len = 0}, readcx = 0x0, writecx = 0x0, enc = 0, dec = 0, \n    destroy = 0, blockShift = 0, blockSize = 1, ci = {sendBuf = {\n        buf = 0x8eb68000 \"\\024\", len = 0, space = 18432}, peer = {_S6_un = {\n          _S6_u8 = \"\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\377\\377\\331nn\\347\", _S6_u16 = {0, 0, 0, 0, 0, 65535, 28377, 59246}, _S6_u32 = {0, 0, 4294901760, \n            3882774233}, _S6_u64 = {0, 16676388352781385728}}}, port = 47873, \n      sid = 0x8e16d420, elements = 0 '\\000', requiredElements = 0 '\\000', \n      sentElements = 0 '\\000', sentFinished = 0 '\\000', \n      serverChallengeLen = 0, authType = 0 '\\000', \n      clientChallenge = '\\000' <repeats 31 times>, \n      connectionID = '\\000' <repeats 15 times>, \n      serverChallenge = '\\000' <repeats 31 times>, \n      readKey = '\\000' <repeats 63 times>, \n      writeKey = '\\000' <repeats 63 times>, keySize = 0}}, \n  url = 0x89d4f530 \"ad.zanox.com\", handshake = 0, nextHandshake = 0, \n  securityHandshake = 0, peerID = 0x899d5fc0 \"ad.zanox.com:443\", \n  cipherSpecs = 0x833d9390 \"\", sizeCipherSpecs = 105, preferredCipher = 0x0, \n  stepDownKeyPair = 0x0, authCertificate = 0x10d3bf2\n     <AuthCertificateCallback(void*, PRFileDesc*, PRBool, PRBool)>, \n  authCertificateArg = 0x0, \n  getClientAuthData = 0x10e0546 <nsNSS_SSLGetClientAuthData(void*, PRFileDesc*, CERTDistNames*, CERTCertificate**, SECKEYPrivateKey**)>, \n  getClientAuthDataArg = 0x7fc37ce0, sniSocketConfig = 0, \n  sniSocketConfigArg = 0x0, \n---Type <return> to continue, or q <return> to quit---\n  handleBadCert = 0x10e2202 <nsNSSBadCertHandler(void*, PRFileDesc*)>, \n  badCertArg = 0x7fc37ce0, \n  handshakeCallback = 0x10d3ff7 <HandshakeCallback(PRFileDesc*, void*)>, \n  handshakeCallbackData = 0x7fc37ce0, pkcs11PinArg = 0x7fc37ce8, rTimeout = 0, \n  wTimeout = 0, cTimeout = 20, recvLock = 0x84d9b5e0, sendLock = 0x84dbb3a0, \n  recvBufLock = 0x8338fa50, xmitBufLock = 0x8338fac0, \n  firstHandshakeLock = 0x8338ea90, ssl3HandshakeLock = 0x8338f970, \n  specLock = 0x9abd8190, dbHandle = 0xb17ca018, writerThread = 0x0, \n  shutdownHow = 0, allowedByPolicy = 222, maybeAllowedByPolicy = 222, \n  chosenPreference = 0, handshaking = sslHandshakingAsClient, gs = {state = 1, \n    buf = {\n      buf = 0x8c652000 \"HTTP/1.1 302 Moved Temporarily\\r\\nCache-Control: no-store\\r\\nPragma: no-cache\\r\\nContent-Length: 0\\r\\nLocation: https://www.zanox-affiliate.de/ppl/?SavedRedirectID=1531872154021609472\\r\\nServer: Microsoft-IIS/7\"..., len = 315, space = 18432}, offset = 0, remainder = 5, count = 0, \n\n\nIt seems this bug is mentioned here: \nhttps://bugs.launchpad.net/ubuntu/+source/firefox/+bug/788102\n\nhere are some similar ones :\n\nhttps://bugs.launchpad.net/ubuntu/+source/firefox/+bug/374488", "count": 1, "author": "JamesMikeDuPont@googlemail.com"}, {"is_private": false, "creation_time": "2011-07-29T04:37:02Z", "bug_id": 675138, "id": 5621260, "count": 2, "text": "I am able to repeat this by calling this url multiple times :\nhttps://www.zanox-affiliate.de/ppl/?SavedRedirectID=1531872154021609472", "author": "JamesMikeDuPont@googlemail.com", "creator": "JamesMikeDuPont@googlemail.com", "tags": [], "raw_text": "I am able to repeat this by calling this url multiple times :\nhttps://www.zanox-affiliate.de/ppl/?SavedRedirectID=1531872154021609472", "attachment_id": null, "time": "2011-07-29T04:37:02Z"}]}}}