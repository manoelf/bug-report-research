{"comments": {}, "bugs": {"661452": {"comments": [{"text": "User-Agent:       Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\nBuild Identifier: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\n\nI frequently use transforms when drawing to the canvas element.  Sometimes I will do the following:\n   ctx.save();\n   ctx.scale(fraction);\n   ...\n   ctx.restore();\n\nIf fraction is set to zero, Firefox will fail to render any future updates.  No error appears in the console and the code continues to execute as expected.\n\nReproducible: Always\n\nSteps to Reproduce:\n1. Open the attached HTML file in FF4.\n2. Click 100%, 20%, 0%, 30%.\n3. Click any other percents you feel like.\n\nActual Results:  \nAfter 2: Beige rectangle inside a red rectangle.\nAfter 3: Updates on other clicks.\n\nExpected Results:  \nAfter 2: Coral rectangle inside red rectangle.\nAfter 3: No canvas updates occur.\n\nObvious workaround while this is fixed is to wrap code in if(fraction != 0) {}.  Chrome handles this fine.  Don't know what the specification says.", "count": 0, "author": "brian.nickel@gmail.com", "creator": "brian.nickel@gmail.com", "creation_time": "2011-06-02T01:54:55Z", "is_private": false, "id": 5507880, "bug_id": 661452, "raw_text": "User-Agent:       Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\nBuild Identifier: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\n\nI frequently use transforms when drawing to the canvas element.  Sometimes I will do the following:\n   ctx.save();\n   ctx.scale(fraction);\n   ...\n   ctx.restore();\n\nIf fraction is set to zero, Firefox will fail to render any future updates.  No error appears in the console and the code continues to execute as expected.\n\nReproducible: Always\n\nSteps to Reproduce:\n1. Open the attached HTML file in FF4.\n2. Click 100%, 20%, 0%, 30%.\n3. Click any other percents you feel like.\n\nActual Results:  \nAfter 2: Beige rectangle inside a red rectangle.\nAfter 3: Updates on other clicks.\n\nExpected Results:  \nAfter 2: Coral rectangle inside red rectangle.\nAfter 3: No canvas updates occur.\n\nObvious workaround while this is fixed is to wrap code in if(fraction != 0) {}.  Chrome handles this fine.  Don't know what the specification says.", "attachment_id": null, "time": "2011-06-02T01:54:55Z", "tags": []}, {"bug_id": 661452, "id": 5507882, "count": 1, "text": "Created attachment 536809\nTestcase", "author": "brian.nickel@gmail.com", "time": "2011-06-02T01:56:31Z", "raw_text": "", "is_private": false, "creation_time": "2011-06-02T01:56:31Z", "creator": "brian.nickel@gmail.com", "tags": [], "attachment_id": 536809}, {"bug_id": 661452, "id": 5652841, "count": 2, "text": "Confirmed for me in FireFox 6 on Windows 7. I can reproduce it every time, perfectly.\n\nUser-Agent: Mozilla/5.0 (Windows NT 6.1; rv:6.0) Gecko/20100101 Firefox/6.0\n\nWhen it hits the canvas stops working, entirely, and is unusable until it's size is adjusted or is replaced with a new canvas.\n\nIf you want cross-browser behaviour, then the workarounds to this are non-trivial.\n\nFirst workaround is to wrap the call to scale the canvas, and check if the x or y is 0. If so then avoid the call, and instead avoid any future drawing calls until the canvas matrix has been changed (i.e. setTransform, reset or changing the canvas' size). This requires tracking that drawing is disabled, and making checks in all places where you draw to the canvas, which adds minor overhead.\n\nAnother workaround is to store the canvas 2D context state, reset the canvas width, and then set the stored stated back to the canvas. This works, if you have not drawn to it.\n\nIf you have drawn to it, then you can draw the canvas to another canvas first, data and then draw it back after you have altered the width.\n\nIE 9 and Chrome 15 are not affected by this.", "author": "joe@playmycode.com", "raw_text": "Confirmed for me in FireFox 6 on Windows 7. I can reproduce it every time, perfectly.\n\nUser-Agent: Mozilla/5.0 (Windows NT 6.1; rv:6.0) Gecko/20100101 Firefox/6.0\n\nWhen it hits the canvas stops working, entirely, and is unusable until it's size is adjusted or is replaced with a new canvas.\n\nIf you want cross-browser behaviour, then the workarounds to this are non-trivial.\n\nFirst workaround is to wrap the call to scale the canvas, and check if the x or y is 0. If so then avoid the call, and instead avoid any future drawing calls until the canvas matrix has been changed (i.e. setTransform, reset or changing the canvas' size). This requires tracking that drawing is disabled, and making checks in all places where you draw to the canvas, which adds minor overhead.\n\nAnother workaround is to store the canvas 2D context state, reset the canvas width, and then set the stored stated back to the canvas. This works, if you have not drawn to it.\n\nIf you have drawn to it, then you can draw the canvas to another canvas first, data and then draw it back after you have altered the width.\n\nIE 9 and Chrome 15 are not affected by this.", "time": "2011-08-14T17:47:30Z", "is_private": false, "creation_time": "2011-08-14T17:47:30Z", "creator": "joe@playmycode.com", "tags": [], "attachment_id": null}, {"author": "mozilla@rowk.com", "count": 3, "text": "Confirmed as well on Firefox 6 / Vista and Firefox 6 / OSX 10.7. An easier work-around that should behave mostly as expected is to set the scale to scale || 0.001.", "id": 5716045, "bug_id": 661452, "raw_text": "Confirmed as well on Firefox 6 / Vista and Firefox 6 / OSX 10.7. An easier work-around that should behave mostly as expected is to set the scale to scale || 0.001.", "time": "2011-09-13T21:41:48Z", "creator": "mozilla@rowk.com", "creation_time": "2011-09-13T21:41:48Z", "is_private": false, "attachment_id": null, "tags": []}, {"attachment_id": null, "tags": [], "creator": "weiju.wu@gmail.com", "is_private": false, "creation_time": "2011-12-02T01:46:11Z", "time": "2011-12-02T01:46:11Z", "raw_text": "Just stumbled upon this bug, happens on Firefox 8 and 8.01 as well.", "author": "weiju.wu@gmail.com", "count": 4, "text": "Just stumbled upon this bug, happens on Firefox 8 and 8.01 as well.", "id": 5887181, "bug_id": 661452}, {"time": "2012-01-15T06:06:53Z", "raw_text": "This no longer happens to me on Firefox 9.0.1 on Windows 7. Both my own test, and the test case provided, work fine.\n\nLooks like it's been fixed.", "text": "This no longer happens to me on Firefox 9.0.1 on Windows 7. Both my own test, and the test case provided, work fine.\n\nLooks like it's been fixed.", "count": 5, "author": "joe@playmycode.com", "bug_id": 661452, "id": 5981363, "attachment_id": null, "tags": [], "creator": "joe@playmycode.com", "creation_time": "2012-01-15T06:06:53Z", "is_private": false}, {"attachment_id": null, "raw_text": "This bug is still active for me running Firefox 10.0.2 Mac OSX Lion. I came across it when my animation wouldn't play in Firefox. I solved it by resetting 0 to 0.01, then found this page. Some further documentation on my blog: http://www.mandalatv.net/2012/03/flying-x-experimenting-with-oop-javascript/", "time": "2012-03-05T05:05:11Z", "tags": [], "author": "richhauck@mandalatv.net", "count": 6, "text": "This bug is still active for me running Firefox 10.0.2 Mac OSX Lion. I came across it when my animation wouldn't play in Firefox. I solved it by resetting 0 to 0.01, then found this page. Some further documentation on my blog: http://www.mandalatv.net/2012/03/flying-x-experimenting-with-oop-javascript/", "creator": "richhauck@mandalatv.net", "is_private": false, "creation_time": "2012-03-05T05:05:11Z", "id": 6113514, "bug_id": 661452}, {"bug_id": 661452, "id": 6811548, "is_private": false, "creation_time": "2012-11-11T06:15:17Z", "creator": "admin@structuredcanvaslanguage.com", "text": "I still have this on Windows 7 FF 16.0.2.\n\nI also experience the bug if doing a shearing transform with \t\tcontext.transform(1,1,1,1,0,0); (or shearing variations thereof)\n\nThe scaling solution of setting 0 to 0.01 is sufficient for scaling but I haven't figured out an equivalent for shearing or other arbitrary transforms. So if you are a matrix wizard, please tell me how to detect if a transformation will turn its source rectangle into a 0-width sliver.", "count": 7, "author": "admin@structuredcanvaslanguage.com", "tags": [], "time": "2012-11-11T06:15:17Z", "raw_text": "I still have this on Windows 7 FF 16.0.2.\n\nI also experience the bug if doing a shearing transform with \t\tcontext.transform(1,1,1,1,0,0); (or shearing variations thereof)\n\nThe scaling solution of setting 0 to 0.01 is sufficient for scaling but I haven't figured out an equivalent for shearing or other arbitrary transforms. So if you are a matrix wizard, please tell me how to detect if a transformation will turn its source rectangle into a 0-width sliver.", "attachment_id": null}, {"creator": "alex@baseten.co.uk", "author": "alex@baseten.co.uk", "count": 8, "text": "This is still happening on Windows 7 FF 20.0.1. I can confirm that it doesn't occur on Mac OS X 10.8.3", "id": 7335005, "bug_id": 661452, "is_private": false, "creation_time": "2013-04-19T14:06:05Z", "time": "2013-04-19T14:06:05Z", "attachment_id": null, "raw_text": "This is still happening on Windows 7 FF 20.0.1. I can confirm that it doesn't occur on Mac OS X 10.8.3", "tags": []}, {"creator": "chenmulong@gmail.com", "count": 9, "text": "This still happens to my LINUX firefox 21.0", "author": "chenmulong@gmail.com", "bug_id": 661452, "id": 7465549, "is_private": false, "creation_time": "2013-05-27T09:05:27Z", "time": "2013-05-27T09:05:27Z", "raw_text": "This still happens to my LINUX firefox 21.0", "attachment_id": null, "tags": []}, {"id": 7870118, "bug_id": 661452, "text": "I can confirm this with Firefox Linux Nightly 26.0a1 2013-09-16 running on Fedora 14. With the attached test case, as soon as I click 0% the browser starts behaving strangely, having trouble repainting the page at all (alert dialog looks broken, page flashes white, text disappears, selecting it makes it appear again, etc.)\n\n Graphics\nAdapter Description\tGLXtest process failed (exited with status 1): No visuals found\nGPU Accelerated Windows\t0/1 Basic Blocked for your graphics driver version. Try updating your graphics driver to version <Anything with EXT_texture_from_pixmap support> or newer.\nWebGL Renderer\tBlocked for your graphics card because of unresolved driver issues.\nwindowLayerManagerRemote\tfalse\nAzureCanvasBackend\tcairo\nAzureContentBackend\tnone\nAzureFallbackCanvasBackend\tnone\nAzureSkiaAccelerated\t0", "count": 10, "author": "nicholas.rd.fraser@gmail.com", "raw_text": "I can confirm this with Firefox Linux Nightly 26.0a1 2013-09-16 running on Fedora 14. With the attached test case, as soon as I click 0% the browser starts behaving strangely, having trouble repainting the page at all (alert dialog looks broken, page flashes white, text disappears, selecting it makes it appear again, etc.)\n\n Graphics\nAdapter Description\tGLXtest process failed (exited with status 1): No visuals found\nGPU Accelerated Windows\t0/1 Basic Blocked for your graphics driver version. Try updating your graphics driver to version <Anything with EXT_texture_from_pixmap support> or newer.\nWebGL Renderer\tBlocked for your graphics card because of unresolved driver issues.\nwindowLayerManagerRemote\tfalse\nAzureCanvasBackend\tcairo\nAzureContentBackend\tnone\nAzureFallbackCanvasBackend\tnone\nAzureSkiaAccelerated\t0", "time": "2013-09-17T16:03:15Z", "creation_time": "2013-09-17T16:03:15Z", "is_private": false, "creator": "nicholas.rd.fraser@gmail.com", "tags": [], "attachment_id": null}, {"tags": [], "time": "2013-09-23T17:53:58Z", "attachment_id": null, "raw_text": "It would be great if this could be fixed. This bug is more than 2 years old. I don't see this behavior on Windows 7, but on Ubuntu and other Linux distributions. \n\nI use the context.setTransform(a,b,c,d,tx,ty) function. \nAs soon as a,b,c,d are zero the Canvas element stops rendering.\nAll other browsers are running fine.", "bug_id": 661452, "id": 7891219, "creation_time": "2013-09-23T17:53:58Z", "is_private": false, "creator": "bernhard.robert.pichler@gmail.com", "author": "bernhard.robert.pichler@gmail.com", "count": 11, "text": "It would be great if this could be fixed. This bug is more than 2 years old. I don't see this behavior on Windows 7, but on Ubuntu and other Linux distributions. \n\nI use the context.setTransform(a,b,c,d,tx,ty) function. \nAs soon as a,b,c,d are zero the Canvas element stops rendering.\nAll other browsers are running fine."}, {"creation_time": "2015-04-09T11:09:10Z", "is_private": false, "id": 10135626, "bug_id": 661452, "author": "thomas.darimont@gmail.com", "count": 12, "text": "This still happens with firefox 37.0.1 on linux.", "creator": "thomas.darimont@gmail.com", "tags": [], "attachment_id": null, "raw_text": "This still happens with firefox 37.0.1 on linux.", "time": "2015-04-09T11:09:10Z"}, {"count": 13, "text": "*** Bug 1152728 has been marked as a duplicate of this bug. ***", "author": "thomas.darimont@gmail.com", "bug_id": 661452, "id": 10135630, "time": "2015-04-09T11:10:31Z", "raw_text": "", "creator": "thomas.darimont@gmail.com", "creation_time": "2015-04-09T11:10:31Z", "is_private": false, "attachment_id": null, "tags": []}, {"attachment_id": null, "raw_text": "Duplicate of this bug:985261", "time": "2015-05-13T16:34:25Z", "tags": [], "author": "joao.r.matos@ist.utl.pt", "count": 14, "text": "Duplicate of this bug:985261", "creator": "joao.r.matos@ist.utl.pt", "creation_time": "2015-05-13T16:34:25Z", "is_private": false, "id": 10264434, "bug_id": 661452}, {"creator": "seth.bugzilla@blackhail.net", "text": "*** Bug 985261 has been marked as a duplicate of this bug. ***", "count": 15, "author": "seth.bugzilla@blackhail.net", "id": 10264464, "bug_id": 661452, "creation_time": "2015-05-13T16:39:28Z", "is_private": false, "time": "2015-05-13T16:39:28Z", "raw_text": "", "attachment_id": null, "tags": []}, {"raw_text": "I CAN REPRODUCE this with the following configurations:\n\nCONFIGURATION 1:\nFirefox 37.0.2 for GNU/Linux x86_64 (Mozilla build, self-updated from previous .tar.gz versions)\nDebian GNU/Linux 7.8 amd64 (\"Wheezy\")\nGraphics hardware: NVIDIA GT216 (PCI Class 0300: Device 10de:0a20 (rev a2))\nGraphics driver: NVIDIA GLX 304.125 (proprietary NVIDIA drivers from Debian's non-free for Wheezy)\nLinux: 3.16.0-0.bpo.4-amd64 (from wheezy-backports)\n\nCONFIGURATION 2:\nIceweasel 31.6.0 (Debian build)\nDebian GNU/Linux 8.0 amd64 (\"Jessie\")\nGraphics hardware: Intel GM965/GL960 Integrated Graphics (PCI Class 0300: Device 8086:2a02 (rev 03))\nGraphics driver: i915\nLinux: 3.16.0-4-amd64 (from jessie)\n\nI CAN NOT REPRODUCE this with Firefox for Android, on a 1st gen Nexus 7 (Tegra 3).\n\nI haven't tested any other configurations with Firefox.", "time": "2015-05-13T17:34:42Z", "count": 16, "text": "I CAN REPRODUCE this with the following configurations:\n\nCONFIGURATION 1:\nFirefox 37.0.2 for GNU/Linux x86_64 (Mozilla build, self-updated from previous .tar.gz versions)\nDebian GNU/Linux 7.8 amd64 (\"Wheezy\")\nGraphics hardware: NVIDIA GT216 (PCI Class 0300: Device 10de:0a20 (rev a2))\nGraphics driver: NVIDIA GLX 304.125 (proprietary NVIDIA drivers from Debian's non-free for Wheezy)\nLinux: 3.16.0-0.bpo.4-amd64 (from wheezy-backports)\n\nCONFIGURATION 2:\nIceweasel 31.6.0 (Debian build)\nDebian GNU/Linux 8.0 amd64 (\"Jessie\")\nGraphics hardware: Intel GM965/GL960 Integrated Graphics (PCI Class 0300: Device 8086:2a02 (rev 03))\nGraphics driver: i915\nLinux: 3.16.0-4-amd64 (from jessie)\n\nI CAN NOT REPRODUCE this with Firefox for Android, on a 1st gen Nexus 7 (Tegra 3).\n\nI haven't tested any other configurations with Firefox.", "author": "joao.r.matos@ist.utl.pt", "id": 10264752, "bug_id": 661452, "attachment_id": null, "tags": [], "creator": "joao.r.matos@ist.utl.pt", "creation_time": "2015-05-13T17:34:42Z", "is_private": false}]}}}