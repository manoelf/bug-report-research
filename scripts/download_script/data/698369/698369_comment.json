{"comments": {}, "bugs": {"698369": {"comments": [{"bug_id": 698369, "text": "Created attachment 570638\nTest case image for font type comparison\n\nUser Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.7 (KHTML, like Gecko) Chrome/16.0.912.15 Safari/535.7\n\nSteps to reproduce:\n\nI have the Univers 45 Light and Univers 55 fonts installed on this Windows 7 computer. I used these fonts on a web site and compared their font renderings of each weight, including bold.\n\n\nActual results:\n\nThe Univers 45 normal weight appeared to be heavier than the Univers 55 weight. It looks like the bold font is being used where the regular one should be used\n\n\nExpected results:\n\nThe Light font should have been rendered, which is lighter than the Univers 55 used for comparison.\n\nI've also tested this in IE10pp2, Chrome 16 and IE8. IE10, which also has GPU accelerated type, appears to have the same problem. Chrome 16 and IE8 show the correct font.", "tags": [], "attachment_id": 570638, "raw_text": "User Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.7 (KHTML, like Gecko) Chrome/16.0.912.15 Safari/535.7\n\nSteps to reproduce:\n\nI have the Univers 45 Light and Univers 55 fonts installed on this Windows 7 computer. I used these fonts on a web site and compared their font renderings of each weight, including bold.\n\n\nActual results:\n\nThe Univers 45 normal weight appeared to be heavier than the Univers 55 weight. It looks like the bold font is being used where the regular one should be used\n\n\nExpected results:\n\nThe Light font should have been rendered, which is lighter than the Univers 55 used for comparison.\n\nI've also tested this in IE10pp2, Chrome 16 and IE8. IE10, which also has GPU accelerated type, appears to have the same problem. Chrome 16 and IE8 show the correct font.", "creation_time": "2011-10-31T11:01:58Z", "time": "2011-10-31T11:01:58Z", "creator": "steve.workman@gmail.com", "author": "steve.workman@gmail.com", "id": 5814791, "count": 0, "is_private": false}, {"raw_text": "Test case: http://jsfiddle.net/CYTdd/\n\nNote, you must have the Univers 45 Light, Univers 45 Light Oblique, Univers 55 and Univers 55 Oblique fonts installed on the computer", "attachment_id": null, "tags": [], "bug_id": 698369, "text": "Test case: http://jsfiddle.net/CYTdd/\n\nNote, you must have the Univers 45 Light, Univers 45 Light Oblique, Univers 55 and Univers 55 Oblique fonts installed on the computer", "count": 1, "id": 5814795, "is_private": false, "author": "steve.workman@gmail.com", "time": "2011-10-31T11:05:43Z", "creation_time": "2011-10-31T11:05:43Z", "creator": "steve.workman@gmail.com"}, {"count": 2, "id": 5814817, "is_private": false, "author": "steve.workman@gmail.com", "creation_time": "2011-10-31T11:37:59Z", "time": "2011-10-31T11:37:59Z", "creator": "steve.workman@gmail.com", "raw_text": "", "attachment_id": 570650, "tags": [], "text": "Created attachment 570650\nChanges seen when using font-face rule for local fonts", "bug_id": 698369}, {"attachment_id": null, "raw_text": "Please attach a complete testcase - it's not entirely clear to me what CSS properties you're setting in each case.", "tags": [], "text": "Please attach a complete testcase - it's not entirely clear to me what CSS properties you're setting in each case.", "bug_id": 698369, "is_private": false, "id": 5814825, "count": 3, "creator": "jfkthame@gmail.com", "creation_time": "2011-10-31T11:49:30Z", "time": "2011-10-31T11:49:30Z", "author": "jfkthame@gmail.com"}, {"is_private": false, "id": 5814839, "count": 4, "creator": "jfkthame@gmail.com", "time": "2011-10-31T11:59:47Z", "creation_time": "2011-10-31T11:59:47Z", "author": "jfkthame@gmail.com", "attachment_id": null, "raw_text": "Note that the @font-face rules shown in your second image are incorrect (e.g. 'src: \"Univers 55\"' is invalid; did you mean \"src: local('Univers 55')\"?), and as a result you're not getting Univers at all in some of those examples, you're getting fallback to the default sans-serif font, probably Arial. Look at the shape of the \"5\", for example.\n\nAlso note that under the DirectWrite model, font families are organized differently from the old GDI model. Family names like \"Univers 45 Light\" are not generally used; instead, all the faces belong to a single family, with distinct font-weight values. (But I haven't examined the Univers family to see exactly how they're organized.)", "bug_id": 698369, "text": "Note that the @font-face rules shown in your second image are incorrect (e.g. 'src: \"Univers 55\"' is invalid; did you mean \"src: local('Univers 55')\"?), and as a result you're not getting Univers at all in some of those examples, you're getting fallback to the default sans-serif font, probably Arial. Look at the shape of the \"5\", for example.\n\nAlso note that under the DirectWrite model, font families are organized differently from the old GDI model. Family names like \"Univers 45 Light\" are not generally used; instead, all the faces belong to a single family, with distinct font-weight values. (But I haven't examined the Univers family to see exactly how they're organized.)", "tags": []}, {"id": 5814968, "count": 5, "is_private": false, "creation_time": "2011-10-31T13:35:51Z", "time": "2011-10-31T13:35:51Z", "creator": "steve.workman@gmail.com", "author": "steve.workman@gmail.com", "attachment_id": null, "raw_text": "(In reply to Jonathan Kew (:jfkthame) from comment #4)\n> Note that the @font-face rules shown in your second image are incorrect\n> (e.g. 'src: \"Univers 55\"' is invalid; did you mean \"src: local('Univers\n> 55')\"?), and as a result you're not getting Univers at all in some of those\n> examples, you're getting fallback to the default sans-serif font, probably\n> Arial. Look at the shape of the \"5\", for example.\n> \n> Also note that under the DirectWrite model, font families are organized\n> differently from the old GDI model. Family names like \"Univers 45 Light\" are\n> not generally used; instead, all the faces belong to a single family, with\n> distinct font-weight values. (But I haven't examined the Univers family to\n> see exactly how they're organized.)\n\nThanks Jonathan:", "bug_id": 698369, "text": "(In reply to Jonathan Kew (:jfkthame) from comment #4)\n> Note that the @font-face rules shown in your second image are incorrect\n> (e.g. 'src: \"Univers 55\"' is invalid; did you mean \"src: local('Univers\n> 55')\"?), and as a result you're not getting Univers at all in some of those\n> examples, you're getting fallback to the default sans-serif font, probably\n> Arial. Look at the shape of the \"5\", for example.\n> \n> Also note that under the DirectWrite model, font families are organized\n> differently from the old GDI model. Family names like \"Univers 45 Light\" are\n> not generally used; instead, all the faces belong to a single family, with\n> distinct font-weight values. (But I haven't examined the Univers family to\n> see exactly how they're organized.)\n\nThanks Jonathan:", "tags": []}, {"author": "steve.workman@gmail.com", "creation_time": "2011-10-31T13:54:10Z", "time": "2011-10-31T13:54:10Z", "creator": "steve.workman@gmail.com", "count": 6, "id": 5814997, "is_private": false, "tags": [], "bug_id": 698369, "text": "Created attachment 570689\nTest case HTML for font-face vs font-family rendering\n\nNote the difference in rendering when the font is included as font-face (i.e. correctly) compared to attached simply by font-family.\n\nThis test case is on JSFiddle: http://jsfiddle.net/CYTdd/6/\n\nThe Univers font can be licensed from http://www.linotype.com/1560/univers-family.html", "raw_text": "Note the difference in rendering when the font is included as font-face (i.e. correctly) compared to attached simply by font-family.\n\nThis test case is on JSFiddle: http://jsfiddle.net/CYTdd/6/\n\nThe Univers font can be licensed from http://www.linotype.com/1560/univers-family.html", "attachment_id": 570689}, {"is_private": false, "count": 7, "id": 5815401, "author": "jfkthame@gmail.com", "creator": "jfkthame@gmail.com", "time": "2011-10-31T16:37:33Z", "creation_time": "2011-10-31T16:37:33Z", "raw_text": "And what does that testcase look like on screen?\n\nThe @font-face and non-@font-face cases there aren't comparable. When you say\n  font-family: \"Univers 55\";\nwithout the use of @font-face, you're requesting that _font family_, which may have multiple faces with different weights. What you'll get when you use font-weight:bold along with this depends which faces have been grouped under that family name - which may well differ between GDI and DirectWrite environments. And if there's no \"bold\" face in the family, then the browser will artificially \"embolden\" the text. (You can tell exactly which font is really being displayed using the \"font-info\" add-on, btw.) I suspect you might get a true bolder face in one case and synthetic bold in the other, but that depends very much on the structure of the font families you're using.\n\nIn the @font-face case, you're defining your own font families (independently of how the OS or the font designer organized things), and your CSS only assigns them a single (normal-weight) face each, which means that when your styles ask for font-weight:bold, you should be getting synthetic emboldening rather than a real face with a heavier weight.\n\nTo see what faces are supposed to be available within each family, look in the Windows Fonts folder - IIRC, this should reflect the DirectWrite organization of the fonts. Do you see separate \"Univers 45\" and \"Univers 55\" families? What faces exist in each?", "attachment_id": null, "tags": [], "text": "And what does that testcase look like on screen?\n\nThe @font-face and non-@font-face cases there aren't comparable. When you say\n  font-family: \"Univers 55\";\nwithout the use of @font-face, you're requesting that _font family_, which may have multiple faces with different weights. What you'll get when you use font-weight:bold along with this depends which faces have been grouped under that family name - which may well differ between GDI and DirectWrite environments. And if there's no \"bold\" face in the family, then the browser will artificially \"embolden\" the text. (You can tell exactly which font is really being displayed using the \"font-info\" add-on, btw.) I suspect you might get a true bolder face in one case and synthetic bold in the other, but that depends very much on the structure of the font families you're using.\n\nIn the @font-face case, you're defining your own font families (independently of how the OS or the font designer organized things), and your CSS only assigns them a single (normal-weight) face each, which means that when your styles ask for font-weight:bold, you should be getting synthetic emboldening rather than a real face with a heavier weight.\n\nTo see what faces are supposed to be available within each family, look in the Windows Fonts folder - IIRC, this should reflect the DirectWrite organization of the fonts. Do you see separate \"Univers 45\" and \"Univers 55\" families? What faces exist in each?", "bug_id": 698369}, {"count": 8, "id": 5818257, "is_private": false, "creation_time": "2011-11-01T17:03:38Z", "time": "2011-11-01T17:03:38Z", "creator": "steve.workman@gmail.com", "author": "steve.workman@gmail.com", "attachment_id": null, "raw_text": "I've given as much detail as I can in this blog post: http://www.steveworkman.com/html5-2/html5-css3/2011/problems-loading-local-fonts-with-font-family/\n\nIt looks like my issues with font-family are unfounded. However, there are differences between Firefox and IE10 when addressing the font file using @font-face. From my test Firefox looks for the Title property in the font properties, and IE10 looks at the font name in the file system (see the images in the blog post).\n\nWhich of these implementations matches the spec?", "bug_id": 698369, "text": "I've given as much detail as I can in this blog post: http://www.steveworkman.com/html5-2/html5-css3/2011/problems-loading-local-fonts-with-font-family/\n\nIt looks like my issues with font-family are unfounded. However, there are differences between Firefox and IE10 when addressing the font file using @font-face. From my test Firefox looks for the Title property in the font properties, and IE10 looks at the font name in the file system (see the images in the blog post).\n\nWhich of these implementations matches the spec?", "tags": []}, {"creator": "bram@mozilla.com", "creation_time": "2011-11-01T17:54:04Z", "time": "2011-11-01T17:54:04Z", "author": "bram@mozilla.com", "is_private": false, "id": 5818408, "count": 9, "text": "There are a few potential areas of problem:\n\n1. The font foundry generates different \u201cName\u201d and \u201cPostScript Name\u201d for the same file. The font could have \u201cUnivers 55 Normal\u201d as name, but \u201cUnivers 55 Roman\u201d as PostScript name. The font could have \u201cUnivers 55 Black\u201d as name, but \u201cUnivers 85 Black\u201d as PostScript name.\n\n2. The OS either couldn\u2019t handle misnaming and reports of naming conflict, or DirectDraw\u2019s implementation in Windows 7 has a bug (Steve tweeted that he didn\u2019t see the same problem in XP).\n\n3. The browser couldn\u2019t handle naming conflict, which in this case could be a legitimate bug. Perhaps Firefox could recognize any name that user calls a font, as long as that name exist somewhere within the font metadata.", "bug_id": 698369, "tags": [], "attachment_id": null, "raw_text": "There are a few potential areas of problem:\n\n1. The font foundry generates different \u201cName\u201d and \u201cPostScript Name\u201d for the same file. The font could have \u201cUnivers 55 Normal\u201d as name, but \u201cUnivers 55 Roman\u201d as PostScript name. The font could have \u201cUnivers 55 Black\u201d as name, but \u201cUnivers 85 Black\u201d as PostScript name.\n\n2. The OS either couldn\u2019t handle misnaming and reports of naming conflict, or DirectDraw\u2019s implementation in Windows 7 has a bug (Steve tweeted that he didn\u2019t see the same problem in XP).\n\n3. The browser couldn\u2019t handle naming conflict, which in this case could be a legitimate bug. Perhaps Firefox could recognize any name that user calls a font, as long as that name exist somewhere within the font metadata."}]}}}