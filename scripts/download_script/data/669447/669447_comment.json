{"comments": {}, "bugs": {"669447": {"comments": [{"count": 0, "creator": "ouhman@gmail.com", "is_private": false, "bug_id": 669447, "tags": [], "time": "2011-07-05T20:43:05Z", "text": "User Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.112 Safari/534.30\n\nSteps to reproduce:\n\nI basically have a form and I am using a dropdown to load different templates dynamically (once selected, it loads other fields dynamically on the page)\n\n\nActual results:\n\nElements that have been loaded dynamically do not appear in the POST request once the submit button has been clicked (I noticed this issue only on FF5, and did a cross browser testing and it appears to work on all the other browsers)\n\n\nExpected results:\n\nElements loaded dynamically should appear in the POST request", "author": "ouhman@gmail.com", "creation_time": "2011-07-05T20:43:05Z", "raw_text": "User Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.112 Safari/534.30\n\nSteps to reproduce:\n\nI basically have a form and I am using a dropdown to load different templates dynamically (once selected, it loads other fields dynamically on the page)\n\n\nActual results:\n\nElements that have been loaded dynamically do not appear in the POST request once the submit button has been clicked (I noticed this issue only on FF5, and did a cross browser testing and it appears to work on all the other browsers)\n\n\nExpected results:\n\nElements loaded dynamically should appear in the POST request", "attachment_id": null, "id": 5574790}, {"author": "bugzilla@mversen.de", "creation_time": "2011-07-05T21:39:27Z", "time": "2011-07-05T21:39:27Z", "tags": [], "text": "Please provide a testcase", "creator": "bugzilla@mversen.de", "is_private": false, "id": 5574961, "attachment_id": null, "raw_text": "Please provide a testcase", "bug_id": 669447, "count": 1}, {"count": 2, "creator": "ouhman@gmail.com", "is_private": false, "tags": [], "time": "2011-07-05T22:02:56Z", "bug_id": 669447, "text": "What do you mean by testcase?\n\nSo let's say I have this form:\n\n<form method=\"post\" action=\"action\">\n<div class=\"simple\">\n    <label class=\"required\" for=\"Newsletter_title\">Titre <span class=\"required\">*</span></label>    \n<input type=\"text\" id=\"Newsletter_title\" name=\"Newsletter[title]\" maxlength=\"100\" size=\"60\"></div>\n<div class=\"simple\">\n    <label for=\"Newsletter_rate\">Tarif</label>    \n<input type=\"text\" id=\"Newsletter_rate\" name=\"Newsletter[rate]\" maxlength=\"5\" size=\"10\">\n</div>\n<div class=\"simple\">\n    <label class=\"required\" for=\"Newsletter_idTemplate\">Mod\u00e8le</label>    \n<select id=\"Newsletter_idTemplate\" name=\"Newsletter[idTemplate]\" class=\"switchTemplate\" maxlength=\"100\">\n<option selected=\"selected\" value=\"\"></option>\n<option value=\"3\">Weekly</option>\n</select>\n</div>\n\n<div class=\"extraFields\">\n</div>\n\n<a id=\"yt0\" href=\"#\">Annuler</a>    <input type=\"submit\" value=\"action\" name=\"yt1\">\n</form>\n\n\nOn the dropdown element (Newsletter_idTemplate) I have a listener that fires an ajax request which loads dynamically the div .extraFields with new elements (multiple inputs). After that when I submit the form and display the POST values, the new fields that have been added from the ajax request do not appear in the POST object.", "author": "ouhman@gmail.com", "creation_time": "2011-07-05T22:02:56Z", "raw_text": "What do you mean by testcase?\n\nSo let's say I have this form:\n\n<form method=\"post\" action=\"action\">\n<div class=\"simple\">\n    <label class=\"required\" for=\"Newsletter_title\">Titre <span class=\"required\">*</span></label>    \n<input type=\"text\" id=\"Newsletter_title\" name=\"Newsletter[title]\" maxlength=\"100\" size=\"60\"></div>\n<div class=\"simple\">\n    <label for=\"Newsletter_rate\">Tarif</label>    \n<input type=\"text\" id=\"Newsletter_rate\" name=\"Newsletter[rate]\" maxlength=\"5\" size=\"10\">\n</div>\n<div class=\"simple\">\n    <label class=\"required\" for=\"Newsletter_idTemplate\">Mod\u00e8le</label>    \n<select id=\"Newsletter_idTemplate\" name=\"Newsletter[idTemplate]\" class=\"switchTemplate\" maxlength=\"100\">\n<option selected=\"selected\" value=\"\"></option>\n<option value=\"3\">Weekly</option>\n</select>\n</div>\n\n<div class=\"extraFields\">\n</div>\n\n<a id=\"yt0\" href=\"#\">Annuler</a>    <input type=\"submit\" value=\"action\" name=\"yt1\">\n</form>\n\n\nOn the dropdown element (Newsletter_idTemplate) I have a listener that fires an ajax request which loads dynamically the div .extraFields with new elements (multiple inputs). After that when I submit the form and display the POST values, the new fields that have been added from the ajax request do not appear in the POST object.", "attachment_id": null, "id": 5575038}, {"id": 5576479, "raw_text": "", "attachment_id": 544256, "text": "Created attachment 544256\nTestcase #1", "tags": [], "bug_id": 669447, "time": "2011-07-06T15:48:41Z", "creation_time": "2011-07-06T15:48:41Z", "author": "MatsPalmgren_bugz@use.startmail.com", "count": 3, "is_private": false, "creator": "MatsPalmgren_bugz@use.startmail.com"}, {"time": "2011-07-06T15:50:30Z", "tags": [], "bug_id": 669447, "text": "Testcase #1 works for me in Firefox 5.0 on Linux64.", "author": "MatsPalmgren_bugz@use.startmail.com", "creation_time": "2011-07-06T15:50:30Z", "count": 4, "creator": "MatsPalmgren_bugz@use.startmail.com", "is_private": false, "id": 5576484, "raw_text": "Testcase #1 works for me in Firefox 5.0 on Linux64.", "attachment_id": null}, {"raw_text": "Hello,\n\nJust tried the attachment and it does not seem to represent well the issue.\nWhen changing the dropdown Newsletter_idTemplate state (onChange event) it should populate the form with new elements (input) which does not appear to be the case.\n\nLet me know if you want me to provide a full test case (did not know that I would be able to write JS as well)", "attachment_id": null, "id": 5576502, "is_private": false, "creator": "ouhman@gmail.com", "text": "Hello,\n\nJust tried the attachment and it does not seem to represent well the issue.\nWhen changing the dropdown Newsletter_idTemplate state (onChange event) it should populate the form with new elements (input) which does not appear to be the case.\n\nLet me know if you want me to provide a full test case (did not know that I would be able to write JS as well)", "time": "2011-07-06T15:56:22Z", "tags": [], "creation_time": "2011-07-06T15:56:22Z", "author": "ouhman@gmail.com", "count": 5, "bug_id": 669447}, {"attachment_id": null, "raw_text": "Last I checked we don't fire an onChange event when selecting a new item\nin a <select size=1> dropdown menu.  We fire it when you move the focus\naway from the <select>.", "id": 5576630, "is_private": false, "creator": "MatsPalmgren_bugz@use.startmail.com", "count": 6, "creation_time": "2011-07-06T16:43:55Z", "author": "MatsPalmgren_bugz@use.startmail.com", "text": "Last I checked we don't fire an onChange event when selecting a new item\nin a <select size=1> dropdown menu.  We fire it when you move the focus\naway from the <select>.", "bug_id": 669447, "time": "2011-07-06T16:43:55Z", "tags": []}, {"creation_time": "2011-07-06T16:51:49Z", "author": "MatsPalmgren_bugz@use.startmail.com", "text": "Created attachment 544278\nTestcase #2\n\nStill works for me, since when you click \"action\" the <select> with\n\"Weekly\" is blurred and the onchange is fired.  Please modify this\ntest so that it shows the problem you're seeing.  Thanks!", "time": "2011-07-06T16:51:49Z", "tags": [], "is_private": false, "creator": "MatsPalmgren_bugz@use.startmail.com", "id": 5576642, "attachment_id": 544278, "raw_text": "Still works for me, since when you click \"action\" the <select> with\n\"Weekly\" is blurred and the onchange is fired.  Please modify this\ntest so that it shows the problem you're seeing.  Thanks!", "bug_id": 669447, "count": 7}, {"raw_text": "Are you using an asynchronous XHR by any chance?", "attachment_id": null, "id": 5576700, "count": 8, "is_private": false, "creator": "MatsPalmgren_bugz@use.startmail.com", "text": "Are you using an asynchronous XHR by any chance?", "tags": [], "time": "2011-07-06T17:17:56Z", "bug_id": 669447, "creation_time": "2011-07-06T17:17:56Z", "author": "MatsPalmgren_bugz@use.startmail.com"}, {"author": "ouhman@gmail.com", "creation_time": "2011-07-06T19:21:53Z", "bug_id": 669447, "tags": [], "time": "2011-07-06T19:21:53Z", "text": "Hi this is the code I am using to fire the event on the dropdown (jQuery)\n\n    $p.attachTemplateSwitch = function(url) {\n        $('.switchTemplate').change(function(event) {\n            var idTemplate = $(this).val();\n            event.preventDefault();\n            $.ajax({\n                url: url + '?idTemplate=' + idTemplate,\n                type: \"GET\",\n                dataType: \"html\",\n                success: function(data){\n                    $('.extraFields').html(data);\n                }\n             });\n        });\n    },\n\nAnd to answer your last question, yes this is a asynchronous XHR request (defaulted in jQuery).\n\nLet me know if I still need to give you the full test after having answered your question.\n\nThank you.", "creator": "ouhman@gmail.com", "is_private": false, "count": 9, "id": 5577061, "attachment_id": null, "raw_text": "Hi this is the code I am using to fire the event on the dropdown (jQuery)\n\n    $p.attachTemplateSwitch = function(url) {\n        $('.switchTemplate').change(function(event) {\n            var idTemplate = $(this).val();\n            event.preventDefault();\n            $.ajax({\n                url: url + '?idTemplate=' + idTemplate,\n                type: \"GET\",\n                dataType: \"html\",\n                success: function(data){\n                    $('.extraFields').html(data);\n                }\n             });\n        });\n    },\n\nAnd to answer your last question, yes this is a asynchronous XHR request (defaulted in jQuery).\n\nLet me know if I still need to give you the full test after having answered your question.\n\nThank you."}, {"time": "2011-07-06T20:14:14Z", "bug_id": 669447, "tags": [], "text": "It looks like we actually do fire the change event upon selecting a new value\nin the dropdown menu, so it must be something else causing the problem...\n\nYes, please provide a public URL or attach a test that demonstrates\nthe problem.  Thanks.", "author": "MatsPalmgren_bugz@use.startmail.com", "creation_time": "2011-07-06T20:14:14Z", "count": 10, "creator": "MatsPalmgren_bugz@use.startmail.com", "is_private": false, "id": 5577201, "raw_text": "It looks like we actually do fire the change event upon selecting a new value\nin the dropdown menu, so it must be something else causing the problem...\n\nYes, please provide a public URL or attach a test that demonstrates\nthe problem.  Thanks.", "attachment_id": null}, {"is_private": false, "creator": "ouhman@gmail.com", "count": 11, "creation_time": "2011-07-06T21:52:02Z", "author": "ouhman@gmail.com", "text": "Hello,\n\nI investigated a bit more and found out that a second form tag was added in the extraFields class. So the code looks like:\n\n\n<form method=\"post\" action=\"/my-pc-admin/newsletter/create.html\">\n\t<div class=\"simple\">\n\t\t<label class=\"required\" for=\"Newsletter_title\">Titre <span class=\"required\">*</span></label>    <input type=\"text\" id=\"Newsletter_title\" name=\"Newsletter[title]\" maxlength=\"100\" size=\"60\">\n\t</div>\n\t<div class=\"simple\">\n\t\t<label for=\"Newsletter_rate\">Tarif</label>    <input type=\"text\" id=\"Newsletter_rate\" name=\"Newsletter[rate]\" maxlength=\"5\" size=\"10\">\n\t</div>\n\t<div class=\"simple\">\n\t\t<label class=\"required\" for=\"Newsletter_idTemplate\">Mod\u00e8le <span class=\"required\">*</span></label>    <select id=\"Newsletter_idTemplate\" name=\"Newsletter[idTemplate]\" class=\"switchTemplate\" maxlength=\"100\">\n\t<option selected=\"selected\" value=\"\"></option>\n\t<option value=\"3\">Hebdomadaire</option>\n\t</select>\n\t</div>\n\t<div class=\"simple\">\n\t\t<label for=\"Newsletter_trackable\">Activer les statistiques</label>\n\t\t<input type=\"hidden\" name=\"Newsletter[trackable]\" value=\"0\" id=\"ytNewsletter_trackable\"><input type=\"checkbox\" value=\"1\" id=\"Newsletter_trackable\" name=\"Newsletter[trackable]\">\n\t</div>\n\n\t<div class=\"extraFields\">\n\t\t<form method=\"post\" action=\"/my-pc-admin/newsletter/gettemplateform.html?idTemplate=3\" id=\"yw0\">\n\t\t\t<div style=\"visibility:hidden\">\n\t\t\t\t<input type=\"hidden\" id=\"yform_6ba7a222\" name=\"yform_6ba7a222\" value=\"1\">\n\t\t\t</div>\n\t\t\t<div class=\"simple\">\n\t\t\t\t<label class=\"required\" for=\"TemplateWeeklyForm_mainTitle\">Ent\u00eate de la newsletter <span class=\"required\">*</span></label>\n\t\t\t\t<input type=\"text\" id=\"TemplateWeeklyForm_mainTitle\" name=\"TemplateWeeklyForm[mainTitle]\" size=\"60\" maxlength=\"100\">\n\t\t\t</div>\n\t\t\t<div class=\"simple\">\n\t\t\t\t<label for=\"TemplateWeeklyForm_titleOptionnal\">Titre optionnel</label>\n\t\t\t\t<input type=\"text\" id=\"TemplateWeeklyForm_titleOptionnal\" name=\"TemplateWeeklyForm[titleOptionnal]\" size=\"60\" maxlength=\"150\">\n\t\t\t</div>\n\t\t</form>\n\t</div>\n\t<div class=\"action\">\n\t\t<a id=\"yt0\" href=\"#\">Annuler</a>    <input type=\"submit\" value=\"Ajouter la newsletter\" name=\"yt1\">\n\t</div>\n</form>\n\nWhich obviously is wrong. The strange thing is that it seems to work on all the others browsers I tested with. Not sure how this should be handled though?", "tags": [], "bug_id": 669447, "time": "2011-07-06T21:52:02Z", "attachment_id": null, "raw_text": "Hello,\n\nI investigated a bit more and found out that a second form tag was added in the extraFields class. So the code looks like:\n\n\n<form method=\"post\" action=\"/my-pc-admin/newsletter/create.html\">\n\t<div class=\"simple\">\n\t\t<label class=\"required\" for=\"Newsletter_title\">Titre <span class=\"required\">*</span></label>    <input type=\"text\" id=\"Newsletter_title\" name=\"Newsletter[title]\" maxlength=\"100\" size=\"60\">\n\t</div>\n\t<div class=\"simple\">\n\t\t<label for=\"Newsletter_rate\">Tarif</label>    <input type=\"text\" id=\"Newsletter_rate\" name=\"Newsletter[rate]\" maxlength=\"5\" size=\"10\">\n\t</div>\n\t<div class=\"simple\">\n\t\t<label class=\"required\" for=\"Newsletter_idTemplate\">Mod\u00e8le <span class=\"required\">*</span></label>    <select id=\"Newsletter_idTemplate\" name=\"Newsletter[idTemplate]\" class=\"switchTemplate\" maxlength=\"100\">\n\t<option selected=\"selected\" value=\"\"></option>\n\t<option value=\"3\">Hebdomadaire</option>\n\t</select>\n\t</div>\n\t<div class=\"simple\">\n\t\t<label for=\"Newsletter_trackable\">Activer les statistiques</label>\n\t\t<input type=\"hidden\" name=\"Newsletter[trackable]\" value=\"0\" id=\"ytNewsletter_trackable\"><input type=\"checkbox\" value=\"1\" id=\"Newsletter_trackable\" name=\"Newsletter[trackable]\">\n\t</div>\n\n\t<div class=\"extraFields\">\n\t\t<form method=\"post\" action=\"/my-pc-admin/newsletter/gettemplateform.html?idTemplate=3\" id=\"yw0\">\n\t\t\t<div style=\"visibility:hidden\">\n\t\t\t\t<input type=\"hidden\" id=\"yform_6ba7a222\" name=\"yform_6ba7a222\" value=\"1\">\n\t\t\t</div>\n\t\t\t<div class=\"simple\">\n\t\t\t\t<label class=\"required\" for=\"TemplateWeeklyForm_mainTitle\">Ent\u00eate de la newsletter <span class=\"required\">*</span></label>\n\t\t\t\t<input type=\"text\" id=\"TemplateWeeklyForm_mainTitle\" name=\"TemplateWeeklyForm[mainTitle]\" size=\"60\" maxlength=\"100\">\n\t\t\t</div>\n\t\t\t<div class=\"simple\">\n\t\t\t\t<label for=\"TemplateWeeklyForm_titleOptionnal\">Titre optionnel</label>\n\t\t\t\t<input type=\"text\" id=\"TemplateWeeklyForm_titleOptionnal\" name=\"TemplateWeeklyForm[titleOptionnal]\" size=\"60\" maxlength=\"150\">\n\t\t\t</div>\n\t\t</form>\n\t</div>\n\t<div class=\"action\">\n\t\t<a id=\"yt0\" href=\"#\">Annuler</a>    <input type=\"submit\" value=\"Ajouter la newsletter\" name=\"yt1\">\n\t</div>\n</form>\n\nWhich obviously is wrong. The strange thing is that it seems to work on all the others browsers I tested with. Not sure how this should be handled though?", "id": 5577451}, {"time": "2011-07-06T22:02:00Z", "tags": [], "text": "It's hard to say without a testcase, because the behavior depends on the exact way that <form> was inserted into the DOM.  \n\nDid you test in a current Chrome (ideally dev build), by any chance?", "author": "bzbarsky@mit.edu", "creation_time": "2011-07-06T22:02:00Z", "creator": "bzbarsky@mit.edu", "is_private": false, "id": 5577471, "raw_text": "It's hard to say without a testcase, because the behavior depends on the exact way that <form> was inserted into the DOM.  \n\nDid you test in a current Chrome (ideally dev build), by any chance?", "attachment_id": null, "bug_id": 669447, "count": 12}, {"id": 5577492, "attachment_id": null, "raw_text": "I tested with the latest stable build of chrome (12.0.742.112) and IE8-9. \n\nAlso I am pretty sure this code was working with FF4 as well as it appeared only since I updated to FF5.", "creation_time": "2011-07-06T22:12:07Z", "author": "ouhman@gmail.com", "text": "I tested with the latest stable build of chrome (12.0.742.112) and IE8-9. \n\nAlso I am pretty sure this code was working with FF4 as well as it appeared only since I updated to FF5.", "time": "2011-07-06T22:12:07Z", "bug_id": 669447, "tags": [], "is_private": false, "creator": "ouhman@gmail.com", "count": 13}, {"id": 5577509, "raw_text": "OK, then it's not the new parser.\n\nThis bug really needs a way for someone to reproduce...", "attachment_id": null, "text": "OK, then it's not the new parser.\n\nThis bug really needs a way for someone to reproduce...", "time": "2011-07-06T22:15:59Z", "tags": [], "bug_id": 669447, "creation_time": "2011-07-06T22:15:59Z", "author": "bzbarsky@mit.edu", "count": 14, "is_private": false, "creator": "bzbarsky@mit.edu"}, {"raw_text": "What do you think the expected result should look like when having the following code?\n\n<form method=\"post\" action=\"test.html\">\n<input type=\"text\" id=\"1\" name=\"1\" />\n<input type=\"text\" id=\"2\" name=\"2\" />\n<input type=\"text\" id=\"3\" name=\"3\" />\n    <form>\n    <input type=\"text\" id=\"4\" name=\"4\" />\n    </form>\n<input type=\"submit\" value=\"test\" name=\"submit\">\n</form>\n\nSo basically what should contain the POST object when submitting the code above according to you?", "attachment_id": null, "id": 5577556, "creator": "ouhman@gmail.com", "is_private": false, "tags": [], "time": "2011-07-06T22:33:33Z", "text": "What do you think the expected result should look like when having the following code?\n\n<form method=\"post\" action=\"test.html\">\n<input type=\"text\" id=\"1\" name=\"1\" />\n<input type=\"text\" id=\"2\" name=\"2\" />\n<input type=\"text\" id=\"3\" name=\"3\" />\n    <form>\n    <input type=\"text\" id=\"4\" name=\"4\" />\n    </form>\n<input type=\"submit\" value=\"test\" name=\"submit\">\n</form>\n\nSo basically what should contain the POST object when submitting the code above according to you?", "author": "ouhman@gmail.com", "creation_time": "2011-07-06T22:33:33Z", "count": 15, "bug_id": 669447}, {"id": 5577577, "raw_text": "It depends on what you mean by \"the following code\".\n\nIf you have HTML that looks exactly like that in a file, then the submit button is not inside a form at all and clicking it will do nothing when you load that file.\n\nIf the inner form was inserted via a DOM operation (e.g insertBefore with the first argument being the inner form), then the submission of the outer form should not contain \"4=\".\n\nIf the inner form was inserted via innerHTML, then it starts to depend on exactly which node innerHTML was set on and what the exact string passed to the innerHTML setter was.", "attachment_id": null, "text": "It depends on what you mean by \"the following code\".\n\nIf you have HTML that looks exactly like that in a file, then the submit button is not inside a form at all and clicking it will do nothing when you load that file.\n\nIf the inner form was inserted via a DOM operation (e.g insertBefore with the first argument being the inner form), then the submission of the outer form should not contain \"4=\".\n\nIf the inner form was inserted via innerHTML, then it starts to depend on exactly which node innerHTML was set on and what the exact string passed to the innerHTML setter was.", "tags": [], "bug_id": 669447, "time": "2011-07-06T22:39:54Z", "creation_time": "2011-07-06T22:39:54Z", "author": "bzbarsky@mit.edu", "count": 16, "is_private": false, "creator": "bzbarsky@mit.edu"}]}}}