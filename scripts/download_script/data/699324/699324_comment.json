{"comments": {}, "bugs": {"699324": {"comments": [{"count": 0, "is_private": false, "creator": "bzbarsky@mit.edu", "text": "The current structure is that every call to GetElement checks what sort of object |obj| is and depending on that either does special stuff for dense arrays or arguments or falls through to either getElementIfPresent if called with an int or slow stuff involving resolve if called with a jsid.  This typically happens over and over in a loop.\n\nIt might be better to invert this: do checking of the object type once, then call a function templated on that type for whatever loop is doing GetElement.  Furthermore, we could maybe try to be smarter about double vs uint indices so that callsites that currently use doubles can still take the int fast path in the common (non-overflowing) case.", "time": "2011-11-03T03:57:36Z", "bug_id": 699324, "tags": [], "creation_time": "2011-11-03T03:57:36Z", "author": "bzbarsky@mit.edu", "raw_text": "The current structure is that every call to GetElement checks what sort of object |obj| is and depending on that either does special stuff for dense arrays or arguments or falls through to either getElementIfPresent if called with an int or slow stuff involving resolve if called with a jsid.  This typically happens over and over in a loop.\n\nIt might be better to invert this: do checking of the object type once, then call a function templated on that type for whatever loop is doing GetElement.  Furthermore, we could maybe try to be smarter about double vs uint indices so that callsites that currently use doubles can still take the int fast path in the common (non-overflowing) case.", "attachment_id": null, "id": 5822813}]}}}