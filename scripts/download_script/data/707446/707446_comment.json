{"bugs": {"707446": {"comments": [{"raw_text": "i noticed panacea.dat had grown to 2M and had references to things like \"Documents and Settings\", obviously files that no longer existed on an OS that was no longer current.\n\nso i renamed it.  on restart, eventually a script busy dialog appeared, with the Continue prompt, stopped at:\nScript: resource:///modules/iteratorUtils.jsm:117\n\nselecting Continue resulted in Tb opening, but with a Gmail Imap account (no stored pwd) containing 3556 inbox folders, in the form INBOX-xxxx, with corresponding references in panacea.dat to each.\n\nupon another restart the folders were gone and only the one Inbox remained under the account.  the references in panacea remained.", "attachment_id": null, "time": "2011-12-03T17:40:44Z", "tags": [], "text": "i noticed panacea.dat had grown to 2M and had references to things like \"Documents and Settings\", obviously files that no longer existed on an OS that was no longer current.\n\nso i renamed it.  on restart, eventually a script busy dialog appeared, with the Continue prompt, stopped at:\nScript: resource:///modules/iteratorUtils.jsm:117\n\nselecting Continue resulted in Tb opening, but with a Gmail Imap account (no stored pwd) containing 3556 inbox folders, in the form INBOX-xxxx, with corresponding references in panacea.dat to each.\n\nupon another restart the folders were gone and only the one Inbox remained under the account.  the references in panacea remained.", "count": 0, "author": "alta88@fixall.com", "creator": "alta88@fixall.com", "creation_time": "2011-12-03T17:40:44Z", "is_private": false, "id": 5890741, "bug_id": 707446}, {"is_private": false, "creation_time": "2011-12-05T06:29:37Z", "id": 5892113, "bug_id": 707446, "count": 1, "text": "You saw some or all phenomena of bug 698321, bug 701688, and bug 520437, because you deleted panacea.dat and Gmail IMAP server access was not done when first restart of Tb after deletion of panacea.dat. See [Test-B] in bug 701688 comment #14.\n\nAs you say \"3556 inbox folders\", many .msf files with suffix(and many .sbd directries with suffix too) looks created in the past(phenomnon of bug 520437).\nBecause panacea.dat is deleted by you, all subdirectories under Mail, ImapMail, News directory is scanned for existent files for mail folder. Directory scan takes long, and directory scan takes longer if many files are held in a directory, and if many directories are scanned, it takes very long. Further, remote directory scan takes far longer than local directory scan.\nIf I understand correctly, one of purposes of panacea.dat file is to avoid such directory scan in normal use of Tb.\n\"Script busy\" is perhaps due to this kind of directory scan.\n\n\"3556 inbox folders\" indicates that internal re-subscribe(or loss of \"folder is synchronized with server\" status) happened at least 3556 times in the past. Why such many internal re-subscribe did happen in your environment? Do you use Portable Thunderbird on removable media? Do you delete panacea.dat daily?\n\nAnyway, I recommend you to clean up too many files/directries with suffix first, to avoid unexpected or unwanted problems.\n(1) Unckeck \"[] Keep messages for this account on this computer\" at Synchronization&Storage of the Gmail IMAP account, and confirm that no Gmail IMAP folder is set as offline-use=on via Advanced button.\n(2) Terminate Tb, delete all .msf files(offline-store files. file with no file extension) and .sbd directories under ...\\ImapMail\\imap.gmail.com(may be imap.gmail-N.com, imap.googlemail.com, imap.googlemail-N.com).\n(3) Delete panacea.dat\n(4) Restart Tb, click Inbox of the Gmail account.\n(5) Access all Gmail folder to force re-fetch of message header of all mails\n    in all Gmail IMAP mail folder. A way for it.\n    Enable \"Check new messages at start up\".\n    Check \"When getting new messages for this account, always check this folder\"\n    of all Gmail IMAP folder.\n    (mail.server.default.check_all_folders_for_new = true can be used temporary)\n    (mail.server.serverN.check_all_folders_for_new = true may be available)\n(6) After all message header are fetched, ckeck \"[] Keep messages for this\n    account on this computer\", and uncheck offline-use=on of folders for which\n    auto-sync is not mandatory, and wait for auto-sync completion.", "author": "m-wada@usa.com", "creator": "m-wada@usa.com", "tags": [], "raw_text": "You saw some or all phenomena of bug 698321, bug 701688, and bug 520437, because you deleted panacea.dat and Gmail IMAP server access was not done when first restart of Tb after deletion of panacea.dat. See [Test-B] in bug 701688 comment #14.\n\nAs you say \"3556 inbox folders\", many .msf files with suffix(and many .sbd directries with suffix too) looks created in the past(phenomnon of bug 520437).\nBecause panacea.dat is deleted by you, all subdirectories under Mail, ImapMail, News directory is scanned for existent files for mail folder. Directory scan takes long, and directory scan takes longer if many files are held in a directory, and if many directories are scanned, it takes very long. Further, remote directory scan takes far longer than local directory scan.\nIf I understand correctly, one of purposes of panacea.dat file is to avoid such directory scan in normal use of Tb.\n\"Script busy\" is perhaps due to this kind of directory scan.\n\n\"3556 inbox folders\" indicates that internal re-subscribe(or loss of \"folder is synchronized with server\" status) happened at least 3556 times in the past. Why such many internal re-subscribe did happen in your environment? Do you use Portable Thunderbird on removable media? Do you delete panacea.dat daily?\n\nAnyway, I recommend you to clean up too many files/directries with suffix first, to avoid unexpected or unwanted problems.\n(1) Unckeck \"[] Keep messages for this account on this computer\" at Synchronization&Storage of the Gmail IMAP account, and confirm that no Gmail IMAP folder is set as offline-use=on via Advanced button.\n(2) Terminate Tb, delete all .msf files(offline-store files. file with no file extension) and .sbd directories under ...\\ImapMail\\imap.gmail.com(may be imap.gmail-N.com, imap.googlemail.com, imap.googlemail-N.com).\n(3) Delete panacea.dat\n(4) Restart Tb, click Inbox of the Gmail account.\n(5) Access all Gmail folder to force re-fetch of message header of all mails\n    in all Gmail IMAP mail folder. A way for it.\n    Enable \"Check new messages at start up\".\n    Check \"When getting new messages for this account, always check this folder\"\n    of all Gmail IMAP folder.\n    (mail.server.default.check_all_folders_for_new = true can be used temporary)\n    (mail.server.serverN.check_all_folders_for_new = true may be available)\n(6) After all message header are fetched, ckeck \"[] Keep messages for this\n    account on this computer\", and uncheck offline-use=on of folders for which\n    auto-sync is not mandatory, and wait for auto-sync completion.", "attachment_id": null, "time": "2011-12-05T06:29:37Z"}, {"time": "2011-12-05T06:48:45Z", "raw_text": "Note: Even if above clean up is executed, Junk.msf looks always created internally and Junk-1.msf/Junk-1 looks used, if Junk folder of this account is chosen as junk folder for this account. A workaround of this Junk-1,msf problem is \"create Junk under Local Folders\" and \"select Junk folder of Local Folders as junk folder of this IMAP account\".", "id": 5892128, "bug_id": 707446, "author": "m-wada@usa.com", "text": "Note: Even if above clean up is executed, Junk.msf looks always created internally and Junk-1.msf/Junk-1 looks used, if Junk folder of this account is chosen as junk folder for this account. A workaround of this Junk-1,msf problem is \"create Junk under Local Folders\" and \"select Junk folder of Local Folders as junk folder of this IMAP account\".", "count": 2, "tags": [], "attachment_id": null, "creation_time": "2011-12-05T06:48:45Z", "is_private": false, "creator": "m-wada@usa.com"}, {"text": "\nthanks for the detailed analysis.  i will dupe this bug.\n\nthis (In reply to WADA from comment #1)\n> \"3556 inbox folders\" indicates that internal re-subscribe(or loss of \"folder\n> is synchronized with server\" status) happened at least 3556 times in the\n> past. Why such many internal re-subscribe did happen in your environment? Do\n> you use Portable Thunderbird on removable media? Do you delete panacea.dat\n> daily?\n> \n\nthis account is solely for testing and Imap in Gmail is turned on only occasionally, usually being turned off in favor of Pop.  but yes, there are thousands of files in the [profD]/ImapMail/imap.gmail.com account folder.  i didn't notice that before.  not a portable Tb nor have i deleted panacea.dat before.\n\nso the bug seems to be the creation, for an incorrect reason i think, of the thousands of Inbox-xxx.msf files.\n\n*** This bug has been marked as a duplicate of bug 520437 ***", "count": 3, "author": "alta88@fixall.com", "id": 5892674, "bug_id": 707446, "raw_text": "\nthanks for the detailed analysis.  i will dupe this bug.\n\nthis (In reply to WADA from comment #1)\n> \"3556 inbox folders\" indicates that internal re-subscribe(or loss of \"folder\n> is synchronized with server\" status) happened at least 3556 times in the\n> past. Why such many internal re-subscribe did happen in your environment? Do\n> you use Portable Thunderbird on removable media? Do you delete panacea.dat\n> daily?\n> \n\nthis account is solely for testing and Imap in Gmail is turned on only occasionally, usually being turned off in favor of Pop.  but yes, there are thousands of files in the [profD]/ImapMail/imap.gmail.com account folder.  i didn't notice that before.  not a portable Tb nor have i deleted panacea.dat before.\n\nso the bug seems to be the creation, for an incorrect reason i think, of the thousands of Inbox-xxx.msf files.", "time": "2011-12-05T15:10:08Z", "creator": "alta88@fixall.com", "creation_time": "2011-12-05T15:10:08Z", "is_private": false, "attachment_id": null, "tags": []}, {"tags": [], "raw_text": "(In reply to alta88 from comment #3)\n> so the bug seems to be the creation, for an incorrect reason i think,\n> of the thousands of Inbox-xxx.msf files.\n\nEven though creation of the thousands of Inbox-xxx.msf files was due to bug 520437, I believe that happening of phenomenon of bug 520437 due to incorrect or unknown reasons is a bug of Tb(apparently, you didn't do intentional manual unsubscribe/re-subscribe, you didn't do use of copied profile many times, you didn't do deletion of panaca.dat, and so on).\nPhenonenon of file/directory with suffix due to existence of bug 520437 is merely an evidence that re-subscribe of IMAP mail folder happened in the past by unknown or incorrect reasons.\nalta88(bug opener), why can your this bug be dup of bug 520437?\nDo you think that \"creation of thousands of Inbox-xxx.msf files due to bug 520437 by unknown reason\" itself is never apparent *bug* of a software which is called Thundebird?", "attachment_id": null, "time": "2011-12-05T15:45:47Z", "is_private": false, "creation_time": "2011-12-05T15:45:47Z", "bug_id": 707446, "id": 5892780, "text": "(In reply to alta88 from comment #3)\n> so the bug seems to be the creation, for an incorrect reason i think,\n> of the thousands of Inbox-xxx.msf files.\n\nEven though creation of the thousands of Inbox-xxx.msf files was due to bug 520437, I believe that happening of phenomenon of bug 520437 due to incorrect or unknown reasons is a bug of Tb(apparently, you didn't do intentional manual unsubscribe/re-subscribe, you didn't do use of copied profile many times, you didn't do deletion of panaca.dat, and so on).\nPhenonenon of file/directory with suffix due to existence of bug 520437 is merely an evidence that re-subscribe of IMAP mail folder happened in the past by unknown or incorrect reasons.\nalta88(bug opener), why can your this bug be dup of bug 520437?\nDo you think that \"creation of thousands of Inbox-xxx.msf files due to bug 520437 by unknown reason\" itself is never apparent *bug* of a software which is called Thundebird?", "count": 4, "author": "m-wada@usa.com", "creator": "m-wada@usa.com"}, {"text": "\nin fact, the rebuilding of panacea.dat does not cause the creation of the files.  the rebuild causes the incorrectly created files on disk to show in folderpane.\n\ni just noticed that every time i restart Tb, a new Inbox-x.msf is created in the [profD]/ImapMail/imap.gmail.com account folder.\n\nso that is the real bug.  the gmail imap account is not active in Gmail, is not signed in and rarely is used.  yet each restart creates a new .msf file.", "count": 5, "author": "alta88@fixall.com", "bug_id": 707446, "id": 5892927, "raw_text": "\nin fact, the rebuilding of panacea.dat does not cause the creation of the files.  the rebuild causes the incorrectly created files on disk to show in folderpane.\n\ni just noticed that every time i restart Tb, a new Inbox-x.msf is created in the [profD]/ImapMail/imap.gmail.com account folder.\n\nso that is the real bug.  the gmail imap account is not active in Gmail, is not signed in and rarely is used.  yet each restart creates a new .msf file.", "time": "2011-12-05T16:32:39Z", "creator": "alta88@fixall.com", "creation_time": "2011-12-05T16:32:39Z", "is_private": false, "attachment_id": null, "tags": []}, {"time": "2011-12-05T17:58:12Z", "raw_text": "Wayne is also seeing this. alta88, do you have access to a source level c++ debugger so that you can perhaps figure out what's going on, with some help from me?", "attachment_id": null, "tags": [], "creator": "mozilla@davidbienvenu.org", "text": "Wayne is also seeing this. alta88, do you have access to a source level c++ debugger so that you can perhaps figure out what's going on, with some help from me?", "count": 6, "author": "mozilla@davidbienvenu.org", "id": 5893158, "bug_id": 707446, "creation_time": "2011-12-05T17:58:12Z", "is_private": false}, {"tags": ["obsolete"], "time": "2011-12-05T19:02:57Z", "attachment_id": null, "raw_text": "\nunfortunately no, it would be a start from scratch with c++ debuggers.", "bug_id": 707446, "id": 5893410, "creation_time": "2011-12-05T19:02:57Z", "is_private": false, "creator": "alta88@fixall.com", "author": "alta88@fixall.com", "text": "\nunfortunately no, it would be a start from scratch with c++ debuggers.", "count": 7}, {"creator": "m-wada@usa.com", "author": "m-wada@usa.com", "count": 8, "text": "Following files are seen in my Gmail IMAP local directory.\n  INBOX.msf     2011/12/03  17:15   7,227\n  INBOX-1.msf   2011/12/03  18:00   1,356\n  INBOX-2.msf   2011/12/03  18:04   1,356\n  INBOX-3.msf   2011/12/04  18:22   1,327\n  INBOX-4.msf   2011/12/05  10:21   1,327\n  INBOX-5.msf   2011/12/05  10:59   1,327\n  INBOX-6.msf   2011/12/05  11:19   1,327\n  INBOX-7.msf   2011/12/05  12:57   1,327\n  INBOX-8.msf   2011/12/05  14:13   1,327\n  INBOX-9.msf   2011/12/05  15:34   1,483\nAfter several restarts of Tb 8 today.\n  INBOX-10.msf  2011/12/06  12:02   5,135\nAfter last restart of Tb 8, Repair Folder of Inbox, Compact of Inbox, Termination.\n  INBOX-10.msf  2011/12/06  12:22   5,836\n\nBecause I deleted any inbox.sbd and inbox-N.sbd, next .sbd directry only remains and is currently used by Tb.\n  INBOX-10.sbd  2011/12/06  11:54    <DIR>\n\nI used Tb 8 only these days. So this is not problem in nightly builds.\nI restarted Tb several times today, and increase of suffix is not observed yet.\nIt seems for me trouble in Gmail IMAP between 12/03 and 12/06.\nI always activate SeaMonkey 2.1 for daily use and same Gmail IMAP account is defined in SeaMonkey. So trouble may be relevant to concurrent access of Mbox from multiple IMAP clients.\n\nalta88, do you still see increase of suffix by each restart of Tb?", "id": 5894002, "bug_id": 707446, "is_private": false, "creation_time": "2011-12-06T03:41:01Z", "time": "2011-12-06T03:41:01Z", "attachment_id": null, "raw_text": "Following files are seen in my Gmail IMAP local directory.\n  INBOX.msf     2011/12/03  17:15   7,227\n  INBOX-1.msf   2011/12/03  18:00   1,356\n  INBOX-2.msf   2011/12/03  18:04   1,356\n  INBOX-3.msf   2011/12/04  18:22   1,327\n  INBOX-4.msf   2011/12/05  10:21   1,327\n  INBOX-5.msf   2011/12/05  10:59   1,327\n  INBOX-6.msf   2011/12/05  11:19   1,327\n  INBOX-7.msf   2011/12/05  12:57   1,327\n  INBOX-8.msf   2011/12/05  14:13   1,327\n  INBOX-9.msf   2011/12/05  15:34   1,483\nAfter several restarts of Tb 8 today.\n  INBOX-10.msf  2011/12/06  12:02   5,135\nAfter last restart of Tb 8, Repair Folder of Inbox, Compact of Inbox, Termination.\n  INBOX-10.msf  2011/12/06  12:22   5,836\n\nBecause I deleted any inbox.sbd and inbox-N.sbd, next .sbd directry only remains and is currently used by Tb.\n  INBOX-10.sbd  2011/12/06  11:54    <DIR>\n\nI used Tb 8 only these days. So this is not problem in nightly builds.\nI restarted Tb several times today, and increase of suffix is not observed yet.\nIt seems for me trouble in Gmail IMAP between 12/03 and 12/06.\nI always activate SeaMonkey 2.1 for daily use and same Gmail IMAP account is defined in SeaMonkey. So trouble may be relevant to concurrent access of Mbox from multiple IMAP clients.\n\nalta88, do you still see increase of suffix by each restart of Tb?", "tags": []}, {"tags": [], "raw_text": "alta88, can you check timestamp of thousands of Inbox-N.msf files?", "attachment_id": null, "time": "2011-12-06T03:43:52Z", "is_private": false, "creation_time": "2011-12-06T03:43:52Z", "bug_id": 707446, "id": 5894004, "count": 9, "text": "alta88, can you check timestamp of thousands of Inbox-N.msf files?", "author": "m-wada@usa.com", "creator": "m-wada@usa.com"}, {"creator": "alta88@fixall.com", "count": 10, "text": "\ni've deleted the 3K already..\n\nbut here's the diagnosis.  i deleted all Inbox* files, enabled Imap in Gmail, restarted, and immediately saw an Inbox.msf file created, while the pwd prompt also came up.  cancelling the prompt means that the Inbox itself is not created.  on restart, another Inbox-1.msf is created, pwd prompt, etc etc IF the account is not signed in.\n\nonce the account is succdessfully signed in, *then* an Inbox is created.  on restart(s), no more incremental .msf and one no longer needs to sign in next restart.\n\nso an .msf file should not be created unless the underlying files exists, which for Imap it won't unless login succeeds (if it doesn't already exist).  the file creation order is backwards.\n\nand there you have it.", "author": "alta88@fixall.com", "id": 5894031, "bug_id": 707446, "creation_time": "2011-12-06T04:01:58Z", "is_private": false, "time": "2011-12-06T04:01:58Z", "raw_text": "\ni've deleted the 3K already..\n\nbut here's the diagnosis.  i deleted all Inbox* files, enabled Imap in Gmail, restarted, and immediately saw an Inbox.msf file created, while the pwd prompt also came up.  cancelling the prompt means that the Inbox itself is not created.  on restart, another Inbox-1.msf is created, pwd prompt, etc etc IF the account is not signed in.\n\nonce the account is succdessfully signed in, *then* an Inbox is created.  on restart(s), no more incremental .msf and one no longer needs to sign in next restart.\n\nso an .msf file should not be created unless the underlying files exists, which for Imap it won't unless login succeeds (if it doesn't already exist).  the file creation order is backwards.\n\nand there you have it.", "attachment_id": null, "tags": []}, {"creation_time": "2011-12-06T04:49:08Z", "is_private": false, "id": 5894087, "bug_id": 707446, "count": 11, "text": "(In reply to alta88 from comment #10)\n> so an .msf file should not be created unless the underlying files exists,\n> which for Imap it won't unless login succeeds (if it doesn't already exist).\n> the file creation order is backwards.\n\nI suspect this also describes the situation I have seen.", "author": "vseerror@lehigh.edu", "creator": "vseerror@lehigh.edu", "tags": [], "raw_text": "(In reply to alta88 from comment #10)\n> so an .msf file should not be created unless the underlying files exists,\n> which for Imap it won't unless login succeeds (if it doesn't already exist).\n> the file creation order is backwards.\n\nI suspect this also describes the situation I have seen.", "attachment_id": null, "time": "2011-12-06T04:49:08Z"}, {"time": "2011-12-06T05:18:27Z", "attachment_id": null, "raw_text": "I could easily see phenomenon without password prompt.\n  0. Successful access to an IMAP account. Inbox.msf or Inbox-N.msf is used.\n     (this step is not mandatory)\n  1. Delete Inbox.msf, Inbox-N.msf in local directory for the IMAP account.\n     (.msf file for Inbox pointed by panacea.dat doesn't exist any more.)\n  2. thunderbird.exe -offline -p \"prof_for_test\", then terminate Tb\n  3. repeat step 2 => suffix of Inbox-N.msf is incremented by each restart.\nConfirming.\n\nInbox-N.msf between 12/3 and 12/5 in my environmet was perhaps by above, because I was testing -offline parameter for bug 698321 and bug 701688.", "tags": [], "creator": "m-wada@usa.com", "author": "m-wada@usa.com", "text": "I could easily see phenomenon without password prompt.\n  0. Successful access to an IMAP account. Inbox.msf or Inbox-N.msf is used.\n     (this step is not mandatory)\n  1. Delete Inbox.msf, Inbox-N.msf in local directory for the IMAP account.\n     (.msf file for Inbox pointed by panacea.dat doesn't exist any more.)\n  2. thunderbird.exe -offline -p \"prof_for_test\", then terminate Tb\n  3. repeat step 2 => suffix of Inbox-N.msf is incremented by each restart.\nConfirming.\n\nInbox-N.msf between 12/3 and 12/5 in my environmet was perhaps by above, because I was testing -offline parameter for bug 698321 and bug 701688.", "count": 12, "id": 5894127, "bug_id": 707446, "creation_time": "2011-12-06T05:18:27Z", "is_private": false}, {"creator": "alta88@fixall.com", "text": "\nturns out there's more:\n\nwhile creating an Inbox will prevent new .msf files on restart immediately after its creation and yesterday multiple restarts were fine, this morning restarts have once again started creating Inbox-x.msf files even with the presence of the Inbox.\n\nmy hypothesis (since msgDatabase timestamps are in vogue lately) on a second (or perhaps root) path to this error is that an out of date .msf is detected and a new one is created.  as the account is not logged in, timestamps are not getting updated.  maybe the 'corrupted .msf' meme has all along been mostly timestamps.\n\nWADA this may explain the random timings you're seeing.\n\nanyway, the failure is the lack of file cleanup.", "count": 13, "author": "alta88@fixall.com", "id": 5894809, "bug_id": 707446, "is_private": false, "creation_time": "2011-12-06T17:30:04Z", "time": "2011-12-06T17:30:04Z", "raw_text": "\nturns out there's more:\n\nwhile creating an Inbox will prevent new .msf files on restart immediately after its creation and yesterday multiple restarts were fine, this morning restarts have once again started creating Inbox-x.msf files even with the presence of the Inbox.\n\nmy hypothesis (since msgDatabase timestamps are in vogue lately) on a second (or perhaps root) path to this error is that an out of date .msf is detected and a new one is created.  as the account is not logged in, timestamps are not getting updated.  maybe the 'corrupted .msf' meme has all along been mostly timestamps.\n\nWADA this may explain the random timings you're seeing.\n\nanyway, the failure is the lack of file cleanup.", "attachment_id": null, "tags": []}, {"time": "2011-12-06T18:56:13Z", "raw_text": "timestamps aren't relevant for imap folders/db's.", "attachment_id": null, "tags": [], "creator": "mozilla@davidbienvenu.org", "count": 14, "text": "timestamps aren't relevant for imap folders/db's.", "author": "mozilla@davidbienvenu.org", "bug_id": 707446, "id": 5895045, "creation_time": "2011-12-06T18:56:13Z", "is_private": false}, {"id": 5898353, "bug_id": 707446, "author": "alta88@fixall.com", "text": "\na final observation - on account creation and signin, a [Gmail].sbd folder is created along with [Gmail].msf.  the .msf file had not been there previously though the .sbd folder was; an .msf was created with a signin.\n\nno restart signins and no Inbox-x.msf files since then.", "count": 15, "raw_text": "\na final observation - on account creation and signin, a [Gmail].sbd folder is created along with [Gmail].msf.  the .msf file had not been there previously though the .sbd folder was; an .msf was created with a signin.\n\nno restart signins and no Inbox-x.msf files since then.", "time": "2011-12-07T20:38:38Z", "is_private": false, "creation_time": "2011-12-07T20:38:38Z", "creator": "alta88@fixall.com", "tags": [], "attachment_id": null}, {"creation_time": "2011-12-17T16:39:04Z", "is_private": false, "creator": "acelists@atlas.sk", "tags": [], "attachment_id": null, "bug_id": 707446, "id": 5924478, "author": "acelists@atlas.sk", "text": "I can also see this. I created a test IMAP account with a made-up server name. So TB can never successfully connect to it. This is on linux.\nI have currently INBOX-X.msf where X=1 up to 146. At each start of TB, 1 new file is created. The files are sometimes also shown in the left folder pane of TB, but currently I have only seen the numbers 84 up to 146. I don't know why folder 1 - 83 were missing in the list, but they are on the disk. After upgrading to TB9 latest beta (from the previous beta of TB9), all of them vanished from the folder pane, but they are still on the disk.", "count": 16, "time": "2011-12-17T16:39:04Z", "raw_text": "I can also see this. I created a test IMAP account with a made-up server name. So TB can never successfully connect to it. This is on linux.\nI have currently INBOX-X.msf where X=1 up to 146. At each start of TB, 1 new file is created. The files are sometimes also shown in the left folder pane of TB, but currently I have only seen the numbers 84 up to 146. I don't know why folder 1 - 83 were missing in the list, but they are on the disk. After upgrading to TB9 latest beta (from the previous beta of TB9), all of them vanished from the folder pane, but they are still on the disk."}, {"bug_id": 707446, "id": 6439642, "count": 17, "text": "Bug 131589 was for creation of suffixed .msf/suffixed offline-store file when panacea.dat is corrupted, which will force re-fetch of all mails.\n\nSetting dependency to that bug for ease of tracking.", "author": "m-wada@usa.com", "raw_text": "Bug 131589 was for creation of suffixed .msf/suffixed offline-store file when panacea.dat is corrupted, which will force re-fetch of all mails.\n\nSetting dependency to that bug for ease of tracking.", "time": "2012-07-02T22:02:29Z", "creation_time": "2012-07-02T22:02:29Z", "is_private": false, "creator": "m-wada@usa.com", "tags": [], "attachment_id": null}, {"text": "I don't think this bug is limited to gmail. I see it also with several other IMAP accounts. I just deleted another 700 INBOX files.\n\nA little less often I see the error with other folders as described in bug 1287223.", "count": 18, "author": "infofrommozilla@gmail.com", "creator": "infofrommozilla@gmail.com", "creation_time": "2020-10-10T10:03:57Z", "is_private": false, "id": 15077628, "bug_id": 707446, "raw_text": "I don't think this bug is limited to gmail. I see it also with several other IMAP accounts. I just deleted another 700 INBOX files.\n\nA little less often I see the error with other folders as described in bug 1287223.", "attachment_id": null, "time": "2020-10-10T10:03:57Z", "tags": []}, {"creator": "infofrommozilla@gmail.com", "is_private": false, "creation_time": "2020-11-15T19:21:54Z", "attachment_id": null, "tags": [], "text": "(In reply to WADA:World Anti-bad-Duping Agency from comment #12)\n> I could easily see phenomenon without password prompt.\n\nI can reproduce this with a clean Profile even without offline mode:\n\n1. Create a new profile.\n2. Create a new IMAP account.\n3. Disable \"Check for new messages at startup\".\n   Disable \"Check for new messages every [n] minutes\".\n4. Select the INBOX an wait till it's synchronized.\n5. Select a Folder outside that account (e.g. Local Files)\n5. Close TB.\n\nLook into the profile folder: My inbox.msf had a size of ~16kB because some mails were in it.\n\n6. Delete the inbox.msf.\n7. Start TB - but do nothing.\n8. Close TB.\n\nA new inbox.msf was created. it has a size below 2kB because it's still empty.\n\nEvery time you repeat step 7 and 8 a new inbox-N.msf will be created.\nI guess TB recognizes the empty inbox file as invalid and therefor creates a new one.\n\n9. Start TB and enter the INBOX\n\nNow the data will be synchronized again and on restart no new inbox-N.msf will be created any more.", "count": 19, "author": "infofrommozilla@gmail.com", "bug_id": 707446, "id": 15131711, "raw_text": "(In reply to WADA:World Anti-bad-Duping Agency from comment #12)\n> I could easily see phenomenon without password prompt.\n\nI can reproduce this with a clean Profile even without offline mode:\n\n1. Create a new profile.\n2. Create a new IMAP account.\n3. Disable \"Check for new messages at startup\".\n   Disable \"Check for new messages every [n] minutes\".\n4. Select the INBOX an wait till it's synchronized.\n5. Select a Folder outside that account (e.g. Local Files)\n5. Close TB.\n\nLook into the profile folder: My inbox.msf had a size of ~16kB because some mails were in it.\n\n6. Delete the inbox.msf.\n7. Start TB - but do nothing.\n8. Close TB.\n\nA new inbox.msf was created. it has a size below 2kB because it's still empty.\n\nEvery time you repeat step 7 and 8 a new inbox-N.msf will be created.\nI guess TB recognizes the empty inbox file as invalid and therefor creates a new one.\n\n9. Start TB and enter the INBOX\n\nNow the data will be synchronized again and on restart no new inbox-N.msf will be created any more.", "time": "2020-11-15T19:21:54Z"}, {"id": 15131835, "bug_id": 707446, "author": "gds@chartertn.net", "text": "(In reply to Alfred Peters from comment #19)\n\nI did what you did and see it too.\n\nAlso, one more thing. If there's a subfolder under inbox, when you finally select Inbox you get a new INBOX-2.sdb directory with all the subfolder under it and the original INBOX.sdb directory is now, I assume, abandoned.", "count": 20, "raw_text": "(In reply to Alfred Peters from comment #19)\n\nI did what you did and see it too.\n\nAlso, one more thing. If there's a subfolder under inbox, when you finally select Inbox you get a new INBOX-2.sdb directory with all the subfolder under it and the original INBOX.sdb directory is now, I assume, abandoned.", "time": "2020-11-15T23:47:26Z", "creation_time": "2020-11-15T23:47:26Z", "is_private": false, "creator": "gds@chartertn.net", "tags": [], "attachment_id": null}]}}, "comments": {}}