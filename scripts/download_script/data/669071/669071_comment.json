{"comments": {}, "bugs": {"669071": {"comments": [{"tags": [], "count": 0, "is_private": false, "id": 5571755, "bug_id": 669071, "creation_time": "2011-07-03T13:27:06Z", "raw_text": "While working on a contenteditable element trying to force text in to paragraph elements due to bug 662591 I apparently commented out the removeChild method while not commenting out the createElement method.\n\nHere is the following function that is triggered on the keyup event...\n----------------\nfunction editor_paragraph_gecko_bug(e)\n{\n var a = '';\n var b = document.getElementById('editor_test');\n var n = b.childNodes;\n\n for (var i=0;i<n.length;i++)\n {\n  if (n[i].nodeValue)\n  {\n   if (n[i].nodeValue.length>0)\n   {\n    var p = document.createElement('p');\n    var t = document.createTextNode(n[i].nodeValue);\n    //p.appendChild(t);\n\n    //b.insertBefore(p,n[i]);\n    //b.removeChild(n[i].b.childNodes[i]);\n\n    //a += n[i]+' = ['+i+'] = '+n[i].nodeValue+' = length = '+n[i].nodeValue.length+'\\n';\n   }\n   else\n   {\n    a += n[i]+'\\n';\n   }\n  }\n  else {a += n[i]+'\\n';}\n }\n\n document.getElementById('test1').value=a;\n //window.getSelection().focusNode.parentNode\n}\n----------------\n\nThis led to one CPU core being completely and unrelentingly utilized at 100% while my RAM usage quickly and steadily increased. It effectively forced me to close Firefox (though I did not have to kill it via the task manager at least).\n\nThere should be some mechanism that prevents this, the manner of doing so is subjective to debate. I think a full error (not warning) should be added to the console and a certain limit set in the browser in the very least.", "text": "While working on a contenteditable element trying to force text in to paragraph elements due to bug 662591 I apparently commented out the removeChild method while not commenting out the createElement method.\n\nHere is the following function that is triggered on the keyup event...\n----------------\nfunction editor_paragraph_gecko_bug(e)\n{\n var a = '';\n var b = document.getElementById('editor_test');\n var n = b.childNodes;\n\n for (var i=0;i<n.length;i++)\n {\n  if (n[i].nodeValue)\n  {\n   if (n[i].nodeValue.length>0)\n   {\n    var p = document.createElement('p');\n    var t = document.createTextNode(n[i].nodeValue);\n    //p.appendChild(t);\n\n    //b.insertBefore(p,n[i]);\n    //b.removeChild(n[i].b.childNodes[i]);\n\n    //a += n[i]+' = ['+i+'] = '+n[i].nodeValue+' = length = '+n[i].nodeValue.length+'\\n';\n   }\n   else\n   {\n    a += n[i]+'\\n';\n   }\n  }\n  else {a += n[i]+'\\n';}\n }\n\n document.getElementById('test1').value=a;\n //window.getSelection().focusNode.parentNode\n}\n----------------\n\nThis led to one CPU core being completely and unrelentingly utilized at 100% while my RAM usage quickly and steadily increased. It effectively forced me to close Firefox (though I did not have to kill it via the task manager at least).\n\nThere should be some mechanism that prevents this, the manner of doing so is subjective to debate. I think a full error (not warning) should be added to the console and a certain limit set in the browser in the very least.", "time": "2011-07-03T13:27:06Z", "attachment_id": null, "creator": "jab_creations@yahoo.com", "author": "jab_creations@yahoo.com"}, {"creator": "mounir@lamouri.fr", "author": "mounir@lamouri.fr", "bug_id": 669071, "tags": [], "is_private": false, "count": 1, "id": 5572736, "text": "Could you attach a test with un-commented script so I can test it live?\nI guess you end up in an infinite loop? Did you get the slow scrip dialog?", "attachment_id": null, "time": "2011-07-04T16:06:57Z", "raw_text": "Could you attach a test with un-commented script so I can test it live?\nI guess you end up in an infinite loop? Did you get the slow scrip dialog?", "creation_time": "2011-07-04T16:06:57Z"}, {"is_private": false, "count": 2, "tags": [], "id": 5572770, "bug_id": 669071, "creation_time": "2011-07-04T16:38:57Z", "raw_text": "I reconstructed a basic bare-bones example however I can't seem to replicate the issue at this time. I've since edited the original extensively since I discovered the bug past the extent that I am able to replicate the bug with that file.", "text": "Created attachment 543795\nStripped down test-case.\n\nI reconstructed a basic bare-bones example however I can't seem to replicate the issue at this time. I've since edited the original extensively since I discovered the bug past the extent that I am able to replicate the bug with that file.", "attachment_id": 543795, "time": "2011-07-04T16:38:57Z", "creator": "jab_creations@yahoo.com", "author": "jab_creations@yahoo.com"}, {"bug_id": 669071, "count": 3, "is_private": false, "tags": [], "id": 5573661, "text": "Mozilla/5.0 (Windows NT 6.1; rv:7.0a1) Gecko/20110704 Firefox/7.0a1\n\n> This led to one CPU core being completely and unrelentingly utilized at 100%\n> while my RAM usage quickly and steadily increased. It effectively forced me\n> to close Firefox (though I did not have to kill it via the task manager at\n> least).\n\nLoading the attached example in Firefox Nightly (7.0a1)I get the following loads:\nCPU: usage -> 0; threads -> 27\nMemory: Commit -> 94 MB; Working set -> 112 MB; Private -> 70 MB\nSo, none of these seem odd. \n\nCould you provide more details regarding the config (OS, browser version)? Is it Fx5 and Windows Server? Thanks", "time": "2011-07-05T12:13:12Z", "attachment_id": null, "creation_time": "2011-07-05T12:13:12Z", "raw_text": "Mozilla/5.0 (Windows NT 6.1; rv:7.0a1) Gecko/20110704 Firefox/7.0a1\n\n> This led to one CPU core being completely and unrelentingly utilized at 100%\n> while my RAM usage quickly and steadily increased. It effectively forced me\n> to close Firefox (though I did not have to kill it via the task manager at\n> least).\n\nLoading the attached example in Firefox Nightly (7.0a1)I get the following loads:\nCPU: usage -> 0; threads -> 27\nMemory: Commit -> 94 MB; Working set -> 112 MB; Private -> 70 MB\nSo, none of these seem odd. \n\nCould you provide more details regarding the config (OS, browser version)? Is it Fx5 and Windows Server? Thanks", "creator": "andrei.domuta@softvision.ro", "author": "andrei.domuta@softvision.ro"}, {"bug_id": 669071, "tags": [], "is_private": false, "count": 4, "id": 5573676, "text": "I'm using 64 Bit XP Pro and Firefox 5.0 stable.\n\nI think it's code related than platform related (though I can't verify that without being able to replicate it). Offhand I think the combination of double nested for loops (to nest through blockquote elements and then for each blockquote to loop through childNodes in example) while attempting to alert (or write the returned value to a textarea for visual analysis) may trigger this too as there was a single time where I encountered Firefox freezing up (after a script timeout notification) however I was unable to replicate that using the same code (and it did not add to memory unlike the first issue I encountered). When I encounter something I can reproduce I'll make a copy, minimize the code and post it as an attachment.", "time": "2011-07-05T12:23:53Z", "attachment_id": null, "raw_text": "I'm using 64 Bit XP Pro and Firefox 5.0 stable.\n\nI think it's code related than platform related (though I can't verify that without being able to replicate it). Offhand I think the combination of double nested for loops (to nest through blockquote elements and then for each blockquote to loop through childNodes in example) while attempting to alert (or write the returned value to a textarea for visual analysis) may trigger this too as there was a single time where I encountered Firefox freezing up (after a script timeout notification) however I was unable to replicate that using the same code (and it did not add to memory unlike the first issue I encountered). When I encounter something I can reproduce I'll make a copy, minimize the code and post it as an attachment.", "creation_time": "2011-07-05T12:23:53Z", "creator": "jab_creations@yahoo.com", "author": "jab_creations@yahoo.com"}, {"creation_time": "2013-01-21T18:08:59Z", "raw_text": "modest CPU usage, but not high memory using current nightly on vista", "text": "modest CPU usage, but not high memory using current nightly on vista", "attachment_id": null, "time": "2013-01-21T18:08:59Z", "is_private": false, "count": 5, "tags": [], "id": 7023148, "bug_id": 669071, "creator": "vseerror@lehigh.edu", "author": "vseerror@lehigh.edu"}, {"bug_id": 669071, "count": 6, "is_private": false, "tags": [], "id": 13435242, "text": "https://bugzilla.mozilla.org/show_bug.cgi?id=1472046\n\nMove all DOM bugs that haven't been updated in more than 3 years and has no one currently assigned to P5.\n\nIf you have questions, please contact :mdaly.", "time": "2018-06-29T04:39:57Z", "attachment_id": null, "creation_time": "2018-06-29T04:39:57Z", "raw_text": "https://bugzilla.mozilla.org/show_bug.cgi?id=1472046\n\nMove all DOM bugs that haven't been updated in more than 3 years and has no one currently assigned to P5.\n\nIf you have questions, please contact :mdaly.", "creator": "bug-husbandry-bot@mozilla.bugs", "author": "bug-husbandry-bot@mozilla.bugs"}]}}}