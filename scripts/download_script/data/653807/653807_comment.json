{"bugs": {"653807": {"comments": [{"attachment_id": null, "author": "justin.lebar+bug@gmail.com", "id": 5440172, "raw_text": "Currently (well, after we fix the regression noted in bug 653741), pressing <enter> in the location bar does one of two things:\n\n* If the URI doesn't contain a hash, the page is refreshed.\n* If the URI does contain a hash, the page is not refreshed, and we scroll back to whatever anchor is specified in the URI's hash.\n\nI think this behavior is pretty bizarre.  I'd rather be consistent and always refresh.\n\nOn the other hand, being consistent would mean getting rid of the ability to scroll back to whatever anchor is specified in the URI without refreshing.  At least one person uses this feature.  :)\n\nIE9 and Opera do what we currently do, while Chrome and Safari always refresh.", "is_private": false, "creation_time": "2011-04-29T19:15:04Z", "text": "Currently (well, after we fix the regression noted in bug 653741), pressing <enter> in the location bar does one of two things:\n\n* If the URI doesn't contain a hash, the page is refreshed.\n* If the URI does contain a hash, the page is not refreshed, and we scroll back to whatever anchor is specified in the URI's hash.\n\nI think this behavior is pretty bizarre.  I'd rather be consistent and always refresh.\n\nOn the other hand, being consistent would mean getting rid of the ability to scroll back to whatever anchor is specified in the URI without refreshing.  At least one person uses this feature.  :)\n\nIE9 and Opera do what we currently do, while Chrome and Safari always refresh.", "time": "2011-04-29T19:15:04Z", "creator": "justin.lebar+bug@gmail.com", "count": 0, "tags": [], "bug_id": 653807}, {"author": "justin.lebar+bug@gmail.com", "id": 5440179, "raw_text": "I'm curious what the UX folks think we should do here.", "creation_time": "2011-04-29T19:16:41Z", "text": "I'm curious what the UX folks think we should do here.", "count": 1, "creator": "justin.lebar+bug@gmail.com", "tags": [], "bug_id": 653807, "attachment_id": null, "is_private": false, "time": "2011-04-29T19:16:41Z"}, {"text": "Created attachment 529170\nTestcase\n\nHere's a simple testcase.  Load it, press enter in the location bar, and notice that the displayed time changes.  Now add #foo, press enter, and notice that the displayed time doesn't change when you re-focus the location bar and press enter.", "creation_time": "2011-04-29T19:19:14Z", "raw_text": "Here's a simple testcase.  Load it, press enter in the location bar, and notice that the displayed time changes.  Now add #foo, press enter, and notice that the displayed time doesn't change when you re-focus the location bar and press enter.", "id": 5440187, "bug_id": 653807, "count": 2, "tags": [], "creator": "justin.lebar+bug@gmail.com", "author": "justin.lebar+bug@gmail.com", "is_private": false, "time": "2011-04-29T19:19:14Z", "attachment_id": 529170}, {"attachment_id": null, "time": "2011-04-29T19:30:48Z", "is_private": false, "author": "bzbarsky@mit.edu", "count": 3, "tags": [], "creator": "bzbarsky@mit.edu", "bug_id": 653807, "id": 5440220, "raw_text": "Note that in Chrome and Safari \"enter in url bar\" does the same thing as the reload button in all cases.  So it's not at all the same as our \"no hash\" refresh from commen 0 (which does NOT do the same thing as the reload button).", "creation_time": "2011-04-29T19:30:48Z", "text": "Note that in Chrome and Safari \"enter in url bar\" does the same thing as the reload button in all cases.  So it's not at all the same as our \"no hash\" refresh from commen 0 (which does NOT do the same thing as the reload button)."}, {"raw_text": "What else would we unwittingly break if we made \"enter in the URL bar\" the same thing as the reload button?", "id": 5440225, "text": "What else would we unwittingly break if we made \"enter in the URL bar\" the same thing as the reload button?", "creation_time": "2011-04-29T19:34:00Z", "bug_id": 653807, "creator": "justin.lebar+bug@gmail.com", "count": 4, "tags": [], "author": "justin.lebar+bug@gmail.com", "is_private": false, "time": "2011-04-29T19:34:00Z", "attachment_id": null}, {"author": "bzbarsky@mit.edu", "id": 5440229, "raw_text": "Well, it'd be a lot slower for one thing.", "creation_time": "2011-04-29T19:36:00Z", "text": "Well, it'd be a lot slower for one thing.", "creator": "bzbarsky@mit.edu", "count": 5, "tags": [], "bug_id": 653807, "attachment_id": null, "is_private": false, "time": "2011-04-29T19:36:00Z"}, {"author": "justin.lebar+bug@gmail.com", "attachment_id": null, "raw_text": "I Am Not a UX person, but I think fewer load types is probably better from a user's perspective.  I mean, I work on docshell and I don't understand the differences between all these different loads.", "id": 5440238, "text": "I Am Not a UX person, but I think fewer load types is probably better from a user's perspective.  I mean, I work on docshell and I don't understand the differences between all these different loads.", "creation_time": "2011-04-29T19:39:20Z", "is_private": false, "bug_id": 653807, "creator": "justin.lebar+bug@gmail.com", "count": 6, "time": "2011-04-29T19:39:20Z", "tags": []}, {"bug_id": 653807, "tags": [], "count": 7, "time": "2011-04-30T03:54:45Z", "creator": "bzbarsky@mit.edu", "text": "For what it's worth, the other common case where I rely on the current behavior is by hitting \"enter\" in the url bar during pageloads for URIs that have an anchor to trigger the anchor scroll quicker than we normally do...  Arguably that's a bug we should just fix, though.", "creation_time": "2011-04-30T03:54:45Z", "is_private": false, "raw_text": "For what it's worth, the other common case where I rely on the current behavior is by hitting \"enter\" in the url bar during pageloads for URIs that have an anchor to trigger the anchor scroll quicker than we normally do...  Arguably that's a bug we should just fix, though.", "id": 5440936, "author": "bzbarsky@mit.edu", "attachment_id": null}, {"is_private": false, "time": "2011-05-06T07:56:34Z", "attachment_id": null, "text": "(In reply to comment #3)\n> Note that in Chrome and Safari \"enter in url bar\" does the same thing as the\n> reload button in all cases.  So it's not at all the same as our \"no hash\"\n> refresh from commen 0 (which does NOT do the same thing as the reload\n> button).\n\nIn Chrome, the reload button doesn't clear the referrer (document.referrer), whereas the go button does. This is most noticeable when sites return 403 Forbidden errors for non-same-origin, non=null referrers but display the resource normally after pressing enter in the URL bar.\n\nI think this behavior is desired; therefore, my answer for the bug's question is yes.", "creation_time": "2011-05-06T07:56:34Z", "raw_text": "(In reply to comment #3)\n> Note that in Chrome and Safari \"enter in url bar\" does the same thing as the\n> reload button in all cases.  So it's not at all the same as our \"no hash\"\n> refresh from commen 0 (which does NOT do the same thing as the reload\n> button).\n\nIn Chrome, the reload button doesn't clear the referrer (document.referrer), whereas the go button does. This is most noticeable when sites return 403 Forbidden errors for non-same-origin, non=null referrers but display the resource normally after pressing enter in the URL bar.\n\nI think this behavior is desired; therefore, my answer for the bug's question is yes.", "id": 5452981, "bug_id": 653807, "count": 8, "tags": [], "creator": "fryn@frankyan.com", "author": "fryn@frankyan.com"}, {"time": "2011-05-06T13:29:25Z", "tags": [], "count": 9, "creator": "torisugari@gmail.com", "bug_id": 653807, "is_private": false, "creation_time": "2011-05-06T13:29:25Z", "text": "What's the merit of refresh? I'm sure low-bandwidth users all over the world wouldn't like UA to re-fetch dynamic contents. If inconsistency\n\n> * If the URI doesn't contain a hash, the page is refreshed.\n> * If the URI does contain a hash, the page is not refreshed,\n>   and we scroll back to whatever anchor is specified in the URI's hash.\n\nis the problem, we can chose \"don't refresh if it doesn't contain a hash.\" How about just doing nothing, or scrolling back to top of the page? Users can hit F5 or \"Ctrl + r\" when they need reloading.", "id": 5453297, "raw_text": "What's the merit of refresh? I'm sure low-bandwidth users all over the world wouldn't like UA to re-fetch dynamic contents. If inconsistency\n\n> * If the URI doesn't contain a hash, the page is refreshed.\n> * If the URI does contain a hash, the page is not refreshed,\n>   and we scroll back to whatever anchor is specified in the URI's hash.\n\nis the problem, we can chose \"don't refresh if it doesn't contain a hash.\" How about just doing nothing, or scrolling back to top of the page? Users can hit F5 or \"Ctrl + r\" when they need reloading.", "attachment_id": null, "author": "torisugari@gmail.com"}, {"author": "bzbarsky@mit.edu", "bug_id": 653807, "count": 10, "tags": [], "creator": "bzbarsky@mit.edu", "text": "A few more notes:\n\n1)  Ctrl+r doesn't do the same thing as hitting enter in url bar.  It causes more\n    network traffic.\n2)  Scripted location sets and anchor links to the current location with no hash\n    need to reload the page for web compat, last I checked (see the blame on the\n    relevant code).  If we want a different behavior for url bar, we'll need to\n    communicate more than just the url to load down to docshell.", "creation_time": "2011-05-06T13:55:50Z", "raw_text": "A few more notes:\n\n1)  Ctrl+r doesn't do the same thing as hitting enter in url bar.  It causes more\n    network traffic.\n2)  Scripted location sets and anchor links to the current location with no hash\n    need to reload the page for web compat, last I checked (see the blame on the\n    relevant code).  If we want a different behavior for url bar, we'll need to\n    communicate more than just the url to load down to docshell.", "id": 5453336, "attachment_id": null, "time": "2011-05-06T13:55:50Z", "is_private": false}, {"author": "torisugari@gmail.com", "text": "(In reply to comment #10)\n> 1)  Ctrl+r doesn't do the same thing as hitting enter in url bar.  It causes\n>     more network traffic.\nIt sounds a little weird to me, though now I see what you mean. Users can relaod, hard-reload, and soft-reload(doc only), in undocumented ways...", "creation_time": "2011-05-07T07:40:46Z", "raw_text": "(In reply to comment #10)\n> 1)  Ctrl+r doesn't do the same thing as hitting enter in url bar.  It causes\n>     more network traffic.\nIt sounds a little weird to me, though now I see what you mean. Users can relaod, hard-reload, and soft-reload(doc only), in undocumented ways...", "id": 5455074, "bug_id": 653807, "tags": [], "creator": "torisugari@gmail.com", "count": 11, "attachment_id": null, "is_private": false, "time": "2011-05-07T07:40:46Z"}, {"attachment_id": null, "author": "bzbarsky@mit.edu", "id": 5455220, "raw_text": "Well, with an HTTP cache there are 4 possible \"reload\" behaviors:\n\n1)  Read from the cache unconditionally (this is the \"save as\" behavior, say).\n2)  Read from the cache for valid things, revalidate things that might be\n    invalid (this is the normal load behavior).\n3)  Revalidate everything but allow 304 responses and intermediate caches\n    (normal reload).\n4)  Force everything to be reread end-to-end from the server, bypassing all\n    intermediate caches and our cache (forced reload).\n\nWe surface all but #1 in our user-facing UI at the moment, with different ways of getting at them.", "is_private": false, "creation_time": "2011-05-07T13:42:12Z", "text": "Well, with an HTTP cache there are 4 possible \"reload\" behaviors:\n\n1)  Read from the cache unconditionally (this is the \"save as\" behavior, say).\n2)  Read from the cache for valid things, revalidate things that might be\n    invalid (this is the normal load behavior).\n3)  Revalidate everything but allow 304 responses and intermediate caches\n    (normal reload).\n4)  Force everything to be reread end-to-end from the server, bypassing all\n    intermediate caches and our cache (forced reload).\n\nWe surface all but #1 in our user-facing UI at the moment, with different ways of getting at them.", "tags": [], "time": "2011-05-07T13:42:12Z", "count": 12, "creator": "bzbarsky@mit.edu", "bug_id": 653807}, {"author": "dave@woldrich.com", "attachment_id": null, "text": "My muscle memory is to use Enter in the location bar to \"revalidate the page\".  \n\nI'm always confused when this fails to trigger anything and I have to click refresh with the mouse.  With the current behavior, often the local anchor is already in view, and the page does not scroll.  In that case, the Enter key feels like it was silently ignored to the confused me.  \n\nI finally got curious enough that I researched it and found this bug.  Now I understand it's the local anchor, and I agree with those who say the current behavior is inconsistent.  I love the 4 possible cache behaviors discussion, you learn something new every day.\n\nI think it's valid to be able to navigate in-page to an anchor using just the location bar though.  I think the rule should be: if URL has a local anchor, and the user has hit enter on the location bar, then the page should revalidate.  But, if the location was changed at all, and the URL has a local anchor, then it should scroll to the anchor without refreshing.\n\nIt would be handy if there were visual cues as to what firefox thinks about the current URL in the location bar.  Clicking in the location bar now for me highlights the URL. It might be helpful if there was also grey text right aligned in the location bar (assuming there is enough horizontal space) that says \"Press Enter to revalidate this page\" or something to that effect.  If the user types anything in the location bar or edits it, then this hint would disappear and the current location bar semantics would apply.", "is_private": false, "creation_time": "2012-01-04T19:05:04Z", "raw_text": "My muscle memory is to use Enter in the location bar to \"revalidate the page\".  \n\nI'm always confused when this fails to trigger anything and I have to click refresh with the mouse.  With the current behavior, often the local anchor is already in view, and the page does not scroll.  In that case, the Enter key feels like it was silently ignored to the confused me.  \n\nI finally got curious enough that I researched it and found this bug.  Now I understand it's the local anchor, and I agree with those who say the current behavior is inconsistent.  I love the 4 possible cache behaviors discussion, you learn something new every day.\n\nI think it's valid to be able to navigate in-page to an anchor using just the location bar though.  I think the rule should be: if URL has a local anchor, and the user has hit enter on the location bar, then the page should revalidate.  But, if the location was changed at all, and the URL has a local anchor, then it should scroll to the anchor without refreshing.\n\nIt would be handy if there were visual cues as to what firefox thinks about the current URL in the location bar.  Clicking in the location bar now for me highlights the URL. It might be helpful if there was also grey text right aligned in the location bar (assuming there is enough horizontal space) that says \"Press Enter to revalidate this page\" or something to that effect.  If the user types anything in the location bar or edits it, then this hint would disappear and the current location bar semantics would apply.", "id": 5954743, "bug_id": 653807, "time": "2012-01-04T19:05:04Z", "creator": "dave@woldrich.com", "count": 13, "tags": []}]}}, "comments": {}}