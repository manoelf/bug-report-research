{"bugs": {"700927": {"comments": [{"bug_id": 700927, "is_private": false, "count": 0, "tags": [], "id": 5836205, "text": "Currently we only color manage during image decoding. We transform decoded images from their color space to the display's color space. We currently don't manage other web content which is in sRGB color space. This is bad because we're rendering in two different color spaces.\n\nWe should instead decode images to sRGB giving us the nice property of having all layer content in sRGB. Then we can compute a single 3D LUT conversion for sRGB->Display and do the conversion using a fragment shader where we use hardware acceleration.", "attachment_id": null, "time": "2011-11-09T05:00:35Z", "creation_time": "2011-11-09T05:00:35Z", "raw_text": "Currently we only color manage during image decoding. We transform decoded images from their color space to the display's color space. We currently don't manage other web content which is in sRGB color space. This is bad because we're rendering in two different color spaces.\n\nWe should instead decode images to sRGB giving us the nice property of having all layer content in sRGB. Then we can compute a single 3D LUT conversion for sRGB->Display and do the conversion using a fragment shader where we use hardware acceleration.", "creator": "b56girard@gmail.com", "author": "b56girard@gmail.com"}, {"author": "b56girard@gmail.com", "creator": "b56girard@gmail.com", "attachment_id": 573074, "time": "2011-11-09T05:01:49Z", "text": "Created attachment 573074\nOGL CMSProgram", "raw_text": "", "creation_time": "2011-11-09T05:01:49Z", "bug_id": 700927, "id": 5836206, "tags": [], "is_private": false, "count": 1}, {"tags": [], "is_private": false, "count": 2, "id": 5836209, "bug_id": 700927, "raw_text": "Another nice property of adopting this chance is that we can handle having the Display color profile changing without re-decoding images and redrawing our layers. The display profile can change by dragging the window from a laptop monitor to a wide gammut monitor where the change can be quite striking.", "creation_time": "2011-11-09T05:04:50Z", "text": "Another nice property of adopting this chance is that we can handle having the Display color profile changing without re-decoding images and redrawing our layers. The display profile can change by dragging the window from a laptop monitor to a wide gammut monitor where the change can be quite striking.", "time": "2011-11-09T05:04:50Z", "attachment_id": null, "creator": "b56girard@gmail.com", "author": "b56girard@gmail.com"}, {"author": "b56girard@gmail.com", "creator": "b56girard@gmail.com", "raw_text": "Expose the LUT so that we can upload it", "creation_time": "2011-11-09T05:47:32Z", "attachment_id": 573082, "time": "2011-11-09T05:47:32Z", "text": "Created attachment 573082\nExpose qcms_precacheLUT_float\n\nExpose the LUT so that we can upload it", "id": 5836263, "is_private": false, "count": 3, "tags": [], "bug_id": 700927}, {"bug_id": 700927, "id": 5836276, "tags": [], "count": 4, "is_private": false, "author": "b56girard@gmail.com", "attachment_id": 573083, "time": "2011-11-09T05:52:34Z", "creator": "b56girard@gmail.com", "text": "Created attachment 573083\nAdd qcms_precacheLUT_float wrapper to gfxPlatform", "creation_time": "2011-11-09T05:52:34Z", "raw_text": ""}, {"bug_id": 700927, "tags": [], "count": 5, "is_private": false, "id": 5836293, "text": "Created attachment 573088\nIntroduce 'Decode' profile\n\nInstead of decoding directly to the output profile, we decode to the 'decode' profile, which will either be the output profile if the layer manager does not supports CM or sRGB if it does.", "attachment_id": 573088, "time": "2011-11-09T06:09:45Z", "creation_time": "2011-11-09T06:09:45Z", "raw_text": "Instead of decoding directly to the output profile, we decode to the 'decode' profile, which will either be the output profile if the layer manager does not supports CM or sRGB if it does.", "creator": "b56girard@gmail.com", "author": "b56girard@gmail.com"}, {"raw_text": "", "creation_time": "2011-11-09T06:41:05Z", "text": "Created attachment 573098\nDefine TEXTURE_3D+glTexImage3D", "attachment_id": 573098, "time": "2011-11-09T06:41:05Z", "is_private": false, "count": 6, "tags": [], "id": 5836341, "bug_id": 700927, "creator": "b56girard@gmail.com", "author": "b56girard@gmail.com"}, {"creation_time": "2011-11-09T15:59:59Z", "raw_text": "", "time": "2011-11-09T15:59:59Z", "attachment_id": 573200, "text": "Created attachment 573200\nAll ColorManagement features to LayerManager", "id": 5837100, "is_private": false, "count": 7, "tags": [], "bug_id": 700927, "author": "b56girard@gmail.com", "creator": "b56girard@gmail.com"}, {"bug_id": 700927, "tags": [], "count": 8, "is_private": false, "id": 5837146, "text": "Created attachment 573205\nAdd ColorManagement features to LayerManager\n\nHandle GetCMSLUTTransform failures.", "time": "2011-11-09T16:11:48Z", "attachment_id": 573205, "creation_time": "2011-11-09T16:11:48Z", "raw_text": "Handle GetCMSLUTTransform failures.", "creator": "b56girard@gmail.com", "author": "b56girard@gmail.com"}, {"id": 5837514, "count": 9, "is_private": false, "tags": [], "bug_id": 700927, "raw_text": "", "creation_time": "2011-11-09T18:13:11Z", "attachment_id": 573239, "time": "2011-11-09T18:13:11Z", "author": "b56girard@gmail.com", "creator": "b56girard@gmail.com", "text": "Created attachment 573239\nOGL CMSProgram"}, {"author": "b56girard@gmail.com", "creator": "b56girard@gmail.com", "bug_id": 700927, "id": 5837639, "tags": [], "is_private": false, "count": 10, "attachment_id": 573251, "time": "2011-11-09T18:39:37Z", "text": "Created attachment 573251\nAdd Stub CMS Programs", "creation_time": "2011-11-09T18:39:37Z", "raw_text": ""}, {"bug_id": 700927, "id": 5837644, "tags": [], "count": 11, "is_private": false, "author": "b56girard@gmail.com", "attachment_id": 573252, "time": "2011-11-09T18:41:15Z", "creator": "b56girard@gmail.com", "text": "Created attachment 573252\nInit CMS Program", "raw_text": "", "creation_time": "2011-11-09T18:41:15Z"}, {"creation_time": "2011-11-09T21:49:24Z", "raw_text": "I approve of this bug. Are changes needed to all backends (e.g. D2D) or do you get everything but OpenGl for free?", "text": "I approve of this bug. Are changes needed to all backends (e.g. D2D) or do you get everything but OpenGl for free?", "attachment_id": null, "time": "2011-11-09T21:49:24Z", "is_private": false, "count": 12, "tags": [], "id": 5838362, "bug_id": 700927, "creator": "emanuel.hoogeveen@protonmail.com", "author": "emanuel.hoogeveen@protonmail.com"}, {"text": "I'm glad I have your approval :)\n\nThe GFX team, nor have I, really committed to solve this. I'll only going to keep working on this as long as I'm convinced that it's reasonably not invasive or complex changes.\n\nThe changes are needed in all accelerated backends. I don't plan on supporting this for non accelerated backends (at least in this bug).", "time": "2011-11-09T21:59:51Z", "attachment_id": null, "creation_time": "2011-11-09T21:59:51Z", "raw_text": "I'm glad I have your approval :)\n\nThe GFX team, nor have I, really committed to solve this. I'll only going to keep working on this as long as I'm convinced that it's reasonably not invasive or complex changes.\n\nThe changes are needed in all accelerated backends. I don't plan on supporting this for non accelerated backends (at least in this bug).", "bug_id": 700927, "tags": [], "is_private": false, "count": 13, "id": 5838412, "creator": "b56girard@gmail.com", "author": "b56girard@gmail.com"}, {"creator": "b56girard@gmail.com", "author": "b56girard@gmail.com", "tags": [], "count": 14, "is_private": false, "id": 5840522, "bug_id": 700927, "creation_time": "2011-11-10T18:09:54Z", "raw_text": "I got this working however the problem is that with this patch we're blending in display color space, which is worse then blending in sRGB space which we currently do. What we should be doing is blending in linear space.\n\nTo fix this we would have to composite to a sRGB framebuffer and then transform the result to Display color space. Putting this on hold for now.", "text": "I got this working however the problem is that with this patch we're blending in display color space, which is worse then blending in sRGB space which we currently do. What we should be doing is blending in linear space.\n\nTo fix this we would have to composite to a sRGB framebuffer and then transform the result to Display color space. Putting this on hold for now.", "time": "2011-11-10T18:09:54Z", "attachment_id": null}, {"id": 9363793, "tags": [], "count": 15, "is_private": false, "bug_id": 700927, "creation_time": "2014-09-25T23:34:00Z", "raw_text": "I found something really neat:\n\n1. Go to http://www.colorkeeper.com/?page_id=235\n\n2. Download \"BToATestProfile.zip\" (at the very bottom)\n\n3. Copy the file \"BToATestProfile.icc\" to \"~/Library/ColorSync/Profiles\"\n\n4. Open \"System Preferences\" -> \"Displays\" -> \"Color\"\n\n5. Choose \"TRC-LetTestingProfile\"\n\nYour whole system will look like... well, except Fx, which will look as always. Not just window content, also window UI elements. Would this be the issue this bug is all about?", "author": "spamcop@tgos.net", "time": "2014-09-25T23:34:00Z", "attachment_id": null, "creator": "spamcop@tgos.net", "text": "I found something really neat:\n\n1. Go to http://www.colorkeeper.com/?page_id=235\n\n2. Download \"BToATestProfile.zip\" (at the very bottom)\n\n3. Copy the file \"BToATestProfile.icc\" to \"~/Library/ColorSync/Profiles\"\n\n4. Open \"System Preferences\" -> \"Displays\" -> \"Color\"\n\n5. Choose \"TRC-LetTestingProfile\"\n\nYour whole system will look like... well, except Fx, which will look as always. Not just window content, also window UI elements. Would this be the issue this bug is all about?"}]}}, "comments": {}}