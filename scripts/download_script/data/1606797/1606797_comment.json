{"comments": {}, "bugs": {"1606797": {"comments": [{"creation_time": "2020-01-03T10:17:01Z", "author": "catalin.sasca@softvision.com", "time": "2020-01-03T10:17:01Z", "text": "Created attachment 9118476\nDouble the trouble.gif\n\n**Affected versions**\n- Firefox 68.4.0esr\n- Firefox 70.0.1\n- Firefox 72.0b11\n- Firefox 73.0a1\n\n**Affected platforms**\n- Windows 10 & 7\n- macOS 10.15\n\n**Steps to reproduce**\n1.  Open the following [link](https://outlook.live.com/people/0/) and login with valid credentials\n2. If not available, create a new contact and add a phone number to it\n3. On the newly created contact, click on the phone number\n\n**Expected result**\n- An external application window requesting the user to choose is shown\n\n**Actual result**\n- Two windows will appear, requesting the same action\n\n**Regression range**\n- I will see for a regression, if there is one.\n\n**Additional notes**\n- The actual issue can be seen in the attachment.\n- On Ubuntu 18, a request to launch an external application will not appear, instead a page stating that \"The address was not understood\" will appear.", "tags": [], "id": 14571393, "attachment_id": 9118476, "bug_id": 1606797, "count": 0, "is_private": false, "creator": "catalin.sasca@softvision.com", "raw_text": "**Affected versions**\n- Firefox 68.4.0esr\n- Firefox 70.0.1\n- Firefox 72.0b11\n- Firefox 73.0a1\n\n**Affected platforms**\n- Windows 10 & 7\n- macOS 10.15\n\n**Steps to reproduce**\n1.  Open the following [link](https://outlook.live.com/people/0/) and login with valid credentials\n2. If not available, create a new contact and add a phone number to it\n3. On the newly created contact, click on the phone number\n\n**Expected result**\n- An external application window requesting the user to choose is shown\n\n**Actual result**\n- Two windows will appear, requesting the same action\n\n**Regression range**\n- I will see for a regression, if there is one.\n\n**Additional notes**\n- The actual issue can be seen in the attachment.\n- On Ubuntu 18, a request to launch an external application will not appear, instead a page stating that \"The address was not understood\" will appear."}, {"creation_time": "2020-01-07T00:22:15Z", "text": "This is an issue with Outlook, I'm pretty sure? It'll be navigating to `tel:<phonenumber>` more than once.\n\nI think we already have a bug on file about being able to open more than one of these dialogs, but I can't find it. Johann, do you remember? I would have thought we would have filed this after the zoommtg: stuff last year.", "time": "2020-01-07T00:22:15Z", "author": "gijskruitbosch+bugs@gmail.com", "id": 14576527, "attachment_id": null, "tags": [], "creator": "gijskruitbosch+bugs@gmail.com", "raw_text": "This is an issue with Outlook, I'm pretty sure? It'll be navigating to `tel:<phonenumber>` more than once.\n\nI think we already have a bug on file about being able to open more than one of these dialogs, but I can't find it. Johann, do you remember? I would have thought we would have filed this after the zoommtg: stuff last year.", "count": 1, "bug_id": 1606797, "is_private": false}, {"id": 14579409, "attachment_id": null, "creation_time": "2020-01-08T08:52:15Z", "tags": [], "creator": "mail@johann-hofmann.com", "raw_text": "The only thing I know of is bug 1361653, which I originally thought was only an issue on Android. But if a website is able to open an infinite amount of these that sounds annoying on desktop, too. Not sure how to consolidate these bugs now.", "text": "The only thing I know of is bug 1361653, which I originally thought was only an issue on Android. But if a website is able to open an infinite amount of these that sounds annoying on desktop, too. Not sure how to consolidate these bugs now.", "bug_id": 1606797, "time": "2020-01-08T08:52:15Z", "count": 2, "author": "mail@johann-hofmann.com", "is_private": false}, {"id": 14591970, "attachment_id": null, "tags": [], "creator": "augusto.pace@softvision.com", "raw_text": "This issue was reproducible on Windows 10 with Firefox Nightly version 74.0a1 (2020-01-14) (64-bit). Marked as affected.", "count": 3, "bug_id": 1606797, "is_private": false, "creation_time": "2020-01-14T17:03:35Z", "text": "This issue was reproducible on Windows 10 with Firefox Nightly version 74.0a1 (2020-01-14) (64-bit). Marked as affected.", "author": "augusto.pace@softvision.com", "time": "2020-01-14T17:03:35Z"}, {"time": "2020-01-17T12:05:44Z", "author": "release-mgmt-account-bot@mozilla.tld", "text": "The priority flag is not set for this bug.\n:Gijs, could you have a look please?\n\nFor more information, please visit [auto_nag documentation](https://wiki.mozilla.org/Release_Management/autonag#workflow.2Fno_priority.py).", "creation_time": "2020-01-17T12:05:44Z", "count": 4, "bug_id": 1606797, "is_private": false, "creator": "release-mgmt-account-bot@mozilla.tld", "raw_text": "The priority flag is not set for this bug.\n:Gijs, could you have a look please?\n\nFor more information, please visit [auto_nag documentation](https://wiki.mozilla.org/Release_Management/autonag#workflow.2Fno_priority.py).", "tags": [], "id": 14597430, "attachment_id": null}, {"id": 14602856, "attachment_id": null, "tags": [], "creator": "cristian.fogel@protonmail.com", "raw_text": "Managed to reproduce the issue with older builds such as 25.0a1/32.0a1 builds before this don't seem to load the page at all.\nIt seems this is not a regression and as per comment 1, this would be an issue with Outlook.", "count": 5, "bug_id": 1606797, "is_private": false, "creation_time": "2020-01-21T13:07:12Z", "text": "Managed to reproduce the issue with older builds such as 25.0a1/32.0a1 builds before this don't seem to load the page at all.\nIt seems this is not a regression and as per comment 1, this would be an issue with Outlook.", "time": "2020-01-21T13:07:12Z", "author": "cristian.fogel@protonmail.com"}, {"count": 6, "bug_id": 1606797, "is_private": false, "creator": "marcela.calderon@softvision.com", "raw_text": "This issue was reproducible on latest Nightly version 74.0a1 (2020-02-04) on Windows 10", "tags": [], "id": 14623362, "attachment_id": null, "time": "2020-02-04T17:16:47Z", "author": "marcela.calderon@softvision.com", "text": "This issue was reproducible on latest Nightly version 74.0a1 (2020-02-04) on Windows 10", "creation_time": "2020-02-04T17:16:47Z"}, {"attachment_id": null, "id": 14671494, "tags": [], "creation_time": "2020-03-02T14:31:01Z", "raw_text": "This issue was reproducible on Latest Nightly version 75.0a1 (2020-03-02) on Windows 10. Changed flag accordingly", "text": "This issue was reproducible on Latest Nightly version 75.0a1 (2020-03-02) on Windows 10. Changed flag accordingly", "creator": "marcela.calderon@softvision.com", "is_private": false, "count": 7, "time": "2020-03-02T14:31:01Z", "author": "marcela.calderon@softvision.com", "bug_id": 1606797}, {"tags": [], "attachment_id": null, "id": 14702574, "is_private": false, "bug_id": 1606797, "count": 8, "raw_text": "This issue was reproducible on Latest Nightly version 76.0a1 (2020-03-18) (64-bit) on Windows 10. Changed flag accordingly", "creator": "clara.guerrero@softvision.com", "creation_time": "2020-03-18T14:11:51Z", "author": "clara.guerrero@softvision.com", "time": "2020-03-18T14:11:51Z", "text": "This issue was reproducible on Latest Nightly version 76.0a1 (2020-03-18) (64-bit) on Windows 10. Changed flag accordingly"}, {"time": "2020-04-16T13:53:33Z", "author": "marcela.calderon@softvision.com", "text": "This issue is reproducible on Windows 10 with Firefox Nightly version 77.0a1 (2020-04-15) (64-bit)", "creation_time": "2020-04-16T13:53:33Z", "is_private": false, "bug_id": 1606797, "count": 9, "raw_text": "This issue is reproducible on Windows 10 with Firefox Nightly version 77.0a1 (2020-04-15) (64-bit)", "creator": "marcela.calderon@softvision.com", "tags": [], "attachment_id": null, "id": 14759099}, {"tags": [], "id": 14846206, "attachment_id": 9152044, "count": 10, "bug_id": 1606797, "is_private": false, "creator": "gijskruitbosch+bugs@gmail.com", "raw_text": "", "creation_time": "2020-05-27T12:10:35Z", "author": "gijskruitbosch+bugs@gmail.com", "time": "2020-05-27T12:10:35Z", "text": "Created attachment 9152044\nBug 1606797 - pass the triggering principal when opening external URIs, r?ckerschb"}, {"is_private": false, "count": 11, "bug_id": 1606797, "raw_text": "\n\nDepends on D77027", "creator": "gijskruitbosch+bugs@gmail.com", "tags": [], "attachment_id": 9152045, "id": 14846213, "author": "gijskruitbosch+bugs@gmail.com", "time": "2020-05-27T12:11:04Z", "text": "Created attachment 9152045\nBug 1606797 - do not allow navigating to external URIs in cross-origin disjoint browsing contexts, r?johannh\n\n\n\nDepends on D77027", "creation_time": "2020-05-27T12:11:04Z"}, {"creation_time": "2020-05-27T12:11:28Z", "tags": [], "id": 14846220, "attachment_id": 9152046, "count": 12, "author": "gijskruitbosch+bugs@gmail.com", "time": "2020-05-27T12:11:28Z", "bug_id": 1606797, "is_private": false, "creator": "gijskruitbosch+bugs@gmail.com", "raw_text": "\nThis patch adds the following constraints:\n\n- close the dialog when the originating context navigates;\n- close the dialog when the originating context closes / goes away;\n- do not allow more than 1 dialog at a time;\n- do not allow opening the dialog from an inactive (background) browser.\n\nDepends on D77028", "text": "Created attachment 9152046\nBug 1606797 - restrict opening the 'open external protocol' dialog, r?johannh\n\n\nThis patch adds the following constraints:\n\n- close the dialog when the originating context navigates;\n- close the dialog when the originating context closes / goes away;\n- do not allow more than 1 dialog at a time;\n- do not allow opening the dialog from an inactive (background) browser.\n\nDepends on D77028"}, {"tags": [], "id": 14859431, "attachment_id": null, "count": 13, "bug_id": 1606797, "is_private": false, "creator": "pulsebot@bots.tld", "raw_text": "Pushed by gijskruitbosch@gmail.com:\nhttps://hg.mozilla.org/integration/autoland/rev/ecef5e940485\npass the triggering principal when opening external URIs, r=ckerschb\nhttps://hg.mozilla.org/integration/autoland/rev/47c229951c8b\ndo not allow navigating to external URIs in cross-origin disjoint browsing contexts, r=johannh,smaug\nhttps://hg.mozilla.org/integration/autoland/rev/b4b26ce1c20e\nrestrict opening the 'open external protocol' dialog, r=johannh,fluent-reviewers,flod", "creation_time": "2020-06-02T23:25:23Z", "time": "2020-06-02T23:25:23Z", "author": "pulsebot@bots.tld", "text": "Pushed by gijskruitbosch@gmail.com:\nhttps://hg.mozilla.org/integration/autoland/rev/ecef5e940485\npass the triggering principal when opening external URIs, r=ckerschb\nhttps://hg.mozilla.org/integration/autoland/rev/47c229951c8b\ndo not allow navigating to external URIs in cross-origin disjoint browsing contexts, r=johannh,smaug\nhttps://hg.mozilla.org/integration/autoland/rev/b4b26ce1c20e\nrestrict opening the 'open external protocol' dialog, r=johannh,fluent-reviewers,flod"}, {"author": "abutkovits@mozilla.com", "count": 14, "time": "2020-06-03T09:38:42Z", "bug_id": 1606797, "is_private": false, "creator": "abutkovits@mozilla.com", "text": "https://hg.mozilla.org/mozilla-central/rev/ecef5e940485\nhttps://hg.mozilla.org/mozilla-central/rev/47c229951c8b\nhttps://hg.mozilla.org/mozilla-central/rev/b4b26ce1c20e", "raw_text": "https://hg.mozilla.org/mozilla-central/rev/ecef5e940485\nhttps://hg.mozilla.org/mozilla-central/rev/47c229951c8b\nhttps://hg.mozilla.org/mozilla-central/rev/b4b26ce1c20e", "creation_time": "2020-06-03T09:38:42Z", "tags": ["bugherder"], "id": 14860114, "attachment_id": null}, {"creation_time": "2020-06-03T10:16:15Z", "tags": [], "id": 14860188, "attachment_id": null, "bug_id": 1606797, "count": 15, "time": "2020-06-03T10:16:15Z", "author": "release-mgmt-account-bot@mozilla.tld", "is_private": false, "creator": "release-mgmt-account-bot@mozilla.tld", "text": "Since the status are different for nightly and release, what's the status for beta?\nFor more information, please visit [auto_nag documentation](https://wiki.mozilla.org/Release_Management/autonag#missing_beta_status.py).", "raw_text": "Since the status are different for nightly and release, what's the status for beta?\nFor more information, please visit [auto_nag documentation](https://wiki.mozilla.org/Release_Management/autonag#missing_beta_status.py)."}, {"creation_time": "2020-06-10T12:00:41Z", "time": "2020-06-10T12:00:41Z", "author": "release-mgmt-account-bot@mozilla.tld", "text": "The patch landed in nightly and beta is affected.\n:Gijs, is this bug important enough to require an uplift?\nIf not please set `status_beta` to `wontfix`.\n\n\nFor more information, please visit [auto_nag documentation](https://wiki.mozilla.org/Release_Management/autonag#uplift_beta.py).", "tags": [], "attachment_id": null, "id": 14873879, "is_private": false, "count": 16, "bug_id": 1606797, "raw_text": "The patch landed in nightly and beta is affected.\n:Gijs, is this bug important enough to require an uplift?\nIf not please set `status_beta` to `wontfix`.\n\n\nFor more information, please visit [auto_nag documentation](https://wiki.mozilla.org/Release_Management/autonag#uplift_beta.py).", "creator": "release-mgmt-account-bot@mozilla.tld"}, {"attachment_id": 9156454, "id": 14879576, "tags": [], "raw_text": "", "creator": "gijskruitbosch+bugs@gmail.com", "is_private": false, "bug_id": 1606797, "count": 17, "creation_time": "2020-06-12T23:55:20Z", "text": "Created attachment 9156454\nBeta patches for protocol restrictions", "time": "2020-06-12T23:55:20Z", "author": "gijskruitbosch+bugs@gmail.com"}, {"tags": [], "id": 14879583, "attachment_id": 9156454, "bug_id": 1606797, "count": 18, "is_private": false, "creator": "gijskruitbosch+bugs@gmail.com", "raw_text": "### Beta/Release Uplift Approval Request\n* **User impact if declined**: Confusing / DoS-style issues with the external protocol dialog\n* **Is this code covered by automated tests?**: Yes\n* **Has the fix been verified in Nightly?**: Yes\n* **Needs manual test from QE?**: No\n* **If yes, steps to reproduce**: \n* **List of other uplifts needed**: n/a\n* **Risk to taking this patch**: Medium\n* **Why is the change risky/not risky? (and alternatives if risky)**: Medium because it's not that early in the cycle anymore. However, the patches are reasonably straightforward, have some automated test coverage, and they fix a few security/DoS style issues with external protocols, so I think they're worth taking. There's also an about:config pref we can use to disable the aspect of this patch with the most risk (disallowing external URLs opened on cross-origin popups).\n* **String changes made/needed**: not in this patch for uplift\n\n### ESR Uplift Approval Request\n* **If this is not a sec:{high,crit} bug, please state case for ESR consideration**: DoS-style (sec-low/sec-vector) security issues prior to the release of the first ESR\n* **User impact if declined**: (as above)\n* **Fix Landed on Version**: 79\n* **Risk to taking this patch**: Medium\n* **Why is the change risky/not risky? (and alternatives if risky)**: (as above)\n* **String or UUID changes made by this patch**: not in this patch for uplift", "creation_time": "2020-06-13T00:03:35Z", "author": "gijskruitbosch+bugs@gmail.com", "time": "2020-06-13T00:03:35Z", "text": "Comment on attachment 9156454\nBeta patches for protocol restrictions\n\n### Beta/Release Uplift Approval Request\n* **User impact if declined**: Confusing / DoS-style issues with the external protocol dialog\n* **Is this code covered by automated tests?**: Yes\n* **Has the fix been verified in Nightly?**: Yes\n* **Needs manual test from QE?**: No\n* **If yes, steps to reproduce**: \n* **List of other uplifts needed**: n/a\n* **Risk to taking this patch**: Medium\n* **Why is the change risky/not risky? (and alternatives if risky)**: Medium because it's not that early in the cycle anymore. However, the patches are reasonably straightforward, have some automated test coverage, and they fix a few security/DoS style issues with external protocols, so I think they're worth taking. There's also an about:config pref we can use to disable the aspect of this patch with the most risk (disallowing external URLs opened on cross-origin popups).\n* **String changes made/needed**: not in this patch for uplift\n\n### ESR Uplift Approval Request\n* **If this is not a sec:{high,crit} bug, please state case for ESR consideration**: DoS-style (sec-low/sec-vector) security issues prior to the release of the first ESR\n* **User impact if declined**: (as above)\n* **Fix Landed on Version**: 79\n* **Risk to taking this patch**: Medium\n* **Why is the change risky/not risky? (and alternatives if risky)**: (as above)\n* **String or UUID changes made by this patch**: not in this patch for uplift"}, {"creation_time": "2020-06-15T13:38:30Z", "tags": [], "id": 14882881, "attachment_id": null, "count": 19, "time": "2020-06-15T13:38:30Z", "author": "jcristau@mozilla.com", "bug_id": 1606797, "is_private": false, "creator": "jcristau@mozilla.com", "text": "Maybe we can let this ride to 79 and get the fix in ESR for 78.1?", "raw_text": "Maybe we can let this ride to 79 and get the fix in ESR for 78.1?"}, {"tags": [], "attachment_id": null, "id": 14883186, "is_private": false, "bug_id": 1606797, "count": 20, "raw_text": "(In reply to Julien Cristau [:jcristau] from comment #19)\n> Maybe we can let this ride to 79 and get the fix in ESR for 78.1?\n\nI'm not worried about landing this on beta at this point in the cycle. However, iIf enterprise things use external protocol handlers, this change may affect them, and landing it on ESR *after* shipping the initial ESR release seems more risky (to them) than landing it before we ship the first one.", "creator": "gijskruitbosch+bugs@gmail.com", "creation_time": "2020-06-15T16:20:00Z", "author": "gijskruitbosch+bugs@gmail.com", "time": "2020-06-15T16:20:00Z", "text": "(In reply to Julien Cristau [:jcristau] from comment #19)\n> Maybe we can let this ride to 79 and get the fix in ESR for 78.1?\n\nI'm not worried about landing this on beta at this point in the cycle. However, iIf enterprise things use external protocol handlers, this change may affect them, and landing it on ESR *after* shipping the initial ESR release seems more risky (to them) than landing it before we ship the first one."}, {"tags": [], "creation_time": "2020-06-16T08:34:39Z", "attachment_id": 9156454, "id": 14884317, "is_private": false, "count": 21, "author": "jcristau@mozilla.com", "time": "2020-06-16T08:34:39Z", "bug_id": 1606797, "text": "Comment on attachment 9156454\nBeta patches for protocol restrictions\n\nalright then, approved for 78.0b8, it'll go into esr78 from there.", "raw_text": "alright then, approved for 78.0b8, it'll go into esr78 from there.", "creator": "jcristau@mozilla.com"}, {"creator": "ryanvm@gmail.com", "raw_text": "https://hg.mozilla.org/releases/mozilla-beta/rev/28b5472e0d82\nhttps://hg.mozilla.org/releases/mozilla-beta/rev/c3f184d5cba9\nhttps://hg.mozilla.org/releases/mozilla-beta/rev/5de3646dd424", "text": "https://hg.mozilla.org/releases/mozilla-beta/rev/28b5472e0d82\nhttps://hg.mozilla.org/releases/mozilla-beta/rev/c3f184d5cba9\nhttps://hg.mozilla.org/releases/mozilla-beta/rev/5de3646dd424", "author": "ryanvm@gmail.com", "time": "2020-06-16T19:21:29Z", "count": 22, "bug_id": 1606797, "is_private": false, "id": 14885694, "attachment_id": null, "creation_time": "2020-06-16T19:21:29Z", "tags": ["bugherder", "uplift"]}, {"time": "2020-06-16T19:44:25Z", "author": "ryanvm@gmail.com", "text": "Backed out for ESLint failures (and I'm guessing eventually other test failures too given the nature of the reported issue).\nhttps://hg.mozilla.org/releases/mozilla-beta/rev/bdb9a8c9c312748fd764664e3808d2c0e1f4e2d3\n\nFailure log:\nhttps://treeherder.mozilla.org/logviewer.html#/jobs?job_id=306526838&repo=mozilla-beta&lineNumber=124", "creation_time": "2020-06-16T19:44:25Z", "count": 23, "bug_id": 1606797, "is_private": false, "creator": "ryanvm@gmail.com", "raw_text": "Backed out for ESLint failures (and I'm guessing eventually other test failures too given the nature of the reported issue).\nhttps://hg.mozilla.org/releases/mozilla-beta/rev/bdb9a8c9c312748fd764664e3808d2c0e1f4e2d3\n\nFailure log:\nhttps://treeherder.mozilla.org/logviewer.html#/jobs?job_id=306526838&repo=mozilla-beta&lineNumber=124", "tags": [], "id": 14885754, "attachment_id": null}, {"text": "Created attachment 9157081\nBeta patches for protocol restrictions\n\nSorry, unused variable left after removing the string changes, but there shouldn't have been any ill effects from that other than the eslint failure...", "time": "2020-06-16T19:50:08Z", "author": "gijskruitbosch+bugs@gmail.com", "creation_time": "2020-06-16T19:50:08Z", "raw_text": "Sorry, unused variable left after removing the string changes, but there shouldn't have been any ill effects from that other than the eslint failure...", "creator": "gijskruitbosch+bugs@gmail.com", "is_private": false, "count": 24, "bug_id": 1606797, "attachment_id": 9157081, "id": 14885764, "tags": []}, {"author": "ryanvm@gmail.com", "time": "2020-06-16T21:04:13Z", "text": "Comment on attachment 9157081\nBeta patches for protocol restrictions\n\nRe-approved for 78.0b8. Thanks for the fix-up.", "creation_time": "2020-06-16T21:04:13Z", "bug_id": 1606797, "count": 25, "is_private": false, "creator": "ryanvm@gmail.com", "raw_text": "Re-approved for 78.0b8. Thanks for the fix-up.", "tags": [], "id": 14885893, "attachment_id": 9157081}, {"creation_time": "2020-06-16T23:57:17Z", "text": "https://hg.mozilla.org/releases/mozilla-beta/rev/793ad64683fd\nhttps://hg.mozilla.org/releases/mozilla-beta/rev/0b02968510da\nhttps://hg.mozilla.org/releases/mozilla-beta/rev/8be7f599bbf6", "author": "ryanvm@gmail.com", "time": "2020-06-16T23:57:17Z", "id": 14886159, "attachment_id": null, "tags": ["bugherder", "uplift"], "creator": "ryanvm@gmail.com", "raw_text": "https://hg.mozilla.org/releases/mozilla-beta/rev/793ad64683fd\nhttps://hg.mozilla.org/releases/mozilla-beta/rev/0b02968510da\nhttps://hg.mozilla.org/releases/mozilla-beta/rev/8be7f599bbf6", "bug_id": 1606797, "count": 26, "is_private": false}]}}}