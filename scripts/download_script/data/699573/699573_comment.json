{"comments": {}, "bugs": {"699573": {"comments": [{"time": "2011-11-03T21:17:47Z", "creation_time": "2011-11-03T21:17:47Z", "creator": "gavin.sharp@gmail.com", "tags": [], "bug_id": 699573, "text": "Currently the needHomePageOverride function in nsBrowserContentHandler runs every time someone gets defaultArgs, which includes e.g. opening a new window. This is unnecessary, and means that we have various unrelated things shoved into this function for convenience (like the AboutHomeUtils stuff), since it's the only place we do checks for upgrade/first run scenarios.\n\nI propose creating a new module that will track this state specifically, and allow it to be queried from elsewhere so that code that wants to handle upgrade/new profile scenarios can live wherever it wants.", "author": "gavin.sharp@gmail.com", "id": 5824788, "count": 0, "is_private": false, "attachment_id": null, "raw_text": "Currently the needHomePageOverride function in nsBrowserContentHandler runs every time someone gets defaultArgs, which includes e.g. opening a new window. This is unnecessary, and means that we have various unrelated things shoved into this function for convenience (like the AboutHomeUtils stuff), since it's the only place we do checks for upgrade/first run scenarios.\n\nI propose creating a new module that will track this state specifically, and allow it to be queried from elsewhere so that code that wants to handle upgrade/new profile scenarios can live wherever it wants."}, {"is_private": false, "id": 5824817, "count": 1, "creator": "gavin.sharp@gmail.com", "time": "2011-11-03T21:30:39Z", "creation_time": "2011-11-03T21:30:39Z", "author": "gavin.sharp@gmail.com", "attachment_id": 571779, "raw_text": "", "bug_id": 699573, "text": "Created attachment 571779\npatch", "tags": []}, {"time": "2011-11-03T22:59:01Z", "creation_time": "2011-11-03T22:59:01Z", "creator": "margaret.leibovic@gmail.com", "author": "margaret.leibovic@gmail.com", "id": 5825130, "count": 2, "is_private": false, "bug_id": 699573, "text": "Comment on attachment 571779\npatch\n\nLooks good to me. Like I said on IRC, you probably just want to run browser_bug538331.js to make sure nothing got unintentionally busted.", "tags": [], "attachment_id": 571779, "raw_text": "Looks good to me. Like I said on IRC, you probably just want to run browser_bug538331.js to make sure nothing got unintentionally busted."}, {"attachment_id": 571779, "raw_text": "Review of attachment 571779:\n-----------------------------------------------------------------\n\n::: browser/modules/RunState.jsm\n@@ +41,5 @@\n> +Cu.import(\"resource://gre/modules/XPCOMUtils.jsm\");\n> +\n> +let EXPORTED_SYMBOLS = [\"RunState\"];\n> +\n> +var RunState = {\n\nNit: Use \"let\" for consistency?", "tags": [], "bug_id": 699573, "text": "Comment on attachment 571779\npatch\n\nReview of attachment 571779:\n-----------------------------------------------------------------\n\n::: browser/modules/RunState.jsm\n@@ +41,5 @@\n> +Cu.import(\"resource://gre/modules/XPCOMUtils.jsm\");\n> +\n> +let EXPORTED_SYMBOLS = [\"RunState\"];\n> +\n> +var RunState = {\n\nNit: Use \"let\" for consistency?", "count": 3, "id": 5832696, "is_private": false, "creation_time": "2011-11-08T00:24:40Z", "time": "2011-11-08T00:24:40Z", "creator": "mozilla+bmo@noorenberghe.ca", "author": "mozilla+bmo@noorenberghe.ca"}, {"tags": [], "bug_id": 699573, "text": "(In reply to Margaret Leibovic [:margaret] from comment #2)\n> Looks good to me. Like I said on IRC, you probably just want to run\n> browser_bug538331.js to make sure nothing got unintentionally busted.\n\nTurns out the move to making .state a lazy getter did bust that test, so I've reverted that for now until we find a different solution to that test (my future startup refactorings will probably impact this).", "attachment_id": null, "raw_text": "(In reply to Margaret Leibovic [:margaret] from comment #2)\n> Looks good to me. Like I said on IRC, you probably just want to run\n> browser_bug538331.js to make sure nothing got unintentionally busted.\n\nTurns out the move to making .state a lazy getter did bust that test, so I've reverted that for now until we find a different solution to that test (my future startup refactorings will probably impact this).", "creator": "gavin.sharp@gmail.com", "time": "2011-11-23T23:25:20Z", "creation_time": "2011-11-23T23:25:20Z", "author": "gavin.sharp@gmail.com", "is_private": false, "count": 4, "id": 5869727}, {"attachment_id": null, "raw_text": "(In reply to Gavin Sharp (use gavin@gavinsharp.com for email) from comment #4)\n> Turns out the move to making .state a lazy getter did bust that test, so\n> I've reverted that for now\n\n... except that that's going to mess up the use of this module by other consumers, so that isn't a suitable solution. I'm going to have to fix the test now, I guess.", "tags": [], "bug_id": 699573, "text": "(In reply to Gavin Sharp (use gavin@gavinsharp.com for email) from comment #4)\n> Turns out the move to making .state a lazy getter did bust that test, so\n> I've reverted that for now\n\n... except that that's going to mess up the use of this module by other consumers, so that isn't a suitable solution. I'm going to have to fix the test now, I guess.", "is_private": false, "count": 5, "id": 5869769, "creator": "gavin.sharp@gmail.com", "time": "2011-11-23T23:45:34Z", "creation_time": "2011-11-23T23:45:34Z", "author": "gavin.sharp@gmail.com"}, {"attachment_id": null, "raw_text": "Any update on this bug? I am working on bug 532150, which seems to depend on this one.", "tags": [], "text": "Any update on this bug? I am working on bug 532150, which seems to depend on this one.", "bug_id": 699573, "count": 6, "id": 6821421, "is_private": false, "creation_time": "2012-11-14T16:41:13Z", "time": "2012-11-14T16:41:13Z", "creator": "D.O.Teller+bugspam@gmail.com", "author": "D.O.Teller+bugspam@gmail.com"}, {"tags": [], "text": "No assignee, updating the status.", "bug_id": 699573, "raw_text": "No assignee, updating the status.", "attachment_id": null, "author": "sledru@mozilla.com", "creator": "sledru@mozilla.com", "time": "2018-10-15T08:36:50Z", "creation_time": "2018-10-15T08:36:50Z", "is_private": false, "id": 13685268, "count": 7}, {"attachment_id": null, "raw_text": "No assignee, updating the status.", "bug_id": 699573, "text": "No assignee, updating the status.", "tags": [], "is_private": false, "count": 8, "id": 13686111, "creator": "sledru@mozilla.com", "time": "2018-10-15T08:44:00Z", "creation_time": "2018-10-15T08:44:00Z", "author": "sledru@mozilla.com"}]}}}