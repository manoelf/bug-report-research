{"comments": {}, "bugs": {"713845": {"comments": [{"tags": [], "time": "2011-12-28T13:54:57Z", "text": "User Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/535.7 (KHTML, like Gecko) Chrome/16.0.912.63 Safari/535.7\n\nSteps to reproduce:\n\nI tried to render a page within an invisible iframe. The page was a simple page which applied a green border to any element that was the target of the hash (using the :target pseudo-class selector).\n\nI've constructed a minimum test case here to describe the problem:\nhttp://jonrobson.me.uk/mtc/firefox-iframe/index.html\nHope this is self explanatory if not poke me and I'll make it so.\n\n\nActual results:\n\nWhen I made the iframe visible I found that my css rule had not been applied and that the div had no border.\n\n\nExpected results:\n\nThe css rule should have been applied.  When viewing the MTC I expect to see a green border on my div.", "author": "jdlrobson@gmail.com", "creation_time": "2011-12-28T13:54:57Z", "creator": "jdlrobson@gmail.com", "is_private": false, "id": 5942637, "raw_text": "User Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/535.7 (KHTML, like Gecko) Chrome/16.0.912.63 Safari/535.7\n\nSteps to reproduce:\n\nI tried to render a page within an invisible iframe. The page was a simple page which applied a green border to any element that was the target of the hash (using the :target pseudo-class selector).\n\nI've constructed a minimum test case here to describe the problem:\nhttp://jonrobson.me.uk/mtc/firefox-iframe/index.html\nHope this is self explanatory if not poke me and I'll make it so.\n\n\nActual results:\n\nWhen I made the iframe visible I found that my css rule had not been applied and that the div had no border.\n\n\nExpected results:\n\nThe css rule should have been applied.  When viewing the MTC I expect to see a green border on my div.", "attachment_id": null, "bug_id": 713845, "count": 0}, {"count": 1, "bug_id": 713845, "creator": "moz@jeka.info", "is_private": false, "tags": [], "time": "2011-12-28T14:47:45Z", "text": "Created attachment 584563\niframe content", "author": "moz@jeka.info", "creation_time": "2011-12-28T14:47:45Z", "raw_text": "", "attachment_id": 584563, "id": 5942698}, {"time": "2011-12-28T14:55:50Z", "tags": [], "text": "Created attachment 584564\ntrestcase, reduced\n\nMight be over-reduced, behaves different than the reported case", "author": "moz@jeka.info", "creation_time": "2011-12-28T14:55:50Z", "creator": "moz@jeka.info", "is_private": false, "id": 5942716, "raw_text": "Might be over-reduced, behaves different than the reported case", "attachment_id": 584564, "bug_id": 713845, "count": 2}, {"id": 5942917, "raw_text": "Scrolling doesn't happen in display:none iframes, because there is nothing to scroll.  Or put another way, the :target state is maintained in data structures that are not present in display:none iframes.  So this is somewhat expected behavior.\n\nIf your testcase actually required scrolling to the anchor, you'd see that the subframe is not scrolled to it either.\n\nThe attached reduction is definitely not the same thing as the original testcase, btw.", "attachment_id": null, "text": "Scrolling doesn't happen in display:none iframes, because there is nothing to scroll.  Or put another way, the :target state is maintained in data structures that are not present in display:none iframes.  So this is somewhat expected behavior.\n\nIf your testcase actually required scrolling to the anchor, you'd see that the subframe is not scrolled to it either.\n\nThe attached reduction is definitely not the same thing as the original testcase, btw.", "tags": [], "time": "2011-12-28T16:59:14Z", "bug_id": 713845, "creation_time": "2011-12-28T16:59:14Z", "author": "bzbarsky@mit.edu", "count": 3, "is_private": false, "creator": "bzbarsky@mit.edu"}, {"text": "Agreed the reduction is not the same. The invisible iframe seems to be the culprit. Boris your description throws some logic on the bug and makes me understand it better so thanks! :)\n\nBut regardless should I not be able to target it with css since the uri still refers to the element?\nI guess the issue for me is that it is not consistent with others browsers notably Chrome.\n\n(In reply to Boris Zbarsky (:bz) from comment #3)\n> Scrolling doesn't happen in display:none iframes, because there is nothing\n> to scroll.  Or put another way, the :target state is maintained in data\n> structures that are not present in display:none iframes.  So this is\n> somewhat expected behavior.\n> \n> If your testcase actually required scrolling to the anchor, you'd see that\n> the subframe is not scrolled to it either.\n> \n> The attached reduction is definitely not the same thing as the original\n> testcase, btw.", "time": "2011-12-28T17:33:57Z", "tags": [], "creation_time": "2011-12-28T17:33:57Z", "author": "jdlrobson@gmail.com", "is_private": false, "creator": "jdlrobson@gmail.com", "id": 5943009, "raw_text": "Agreed the reduction is not the same. The invisible iframe seems to be the culprit. Boris your description throws some logic on the bug and makes me understand it better so thanks! :)\n\nBut regardless should I not be able to target it with css since the uri still refers to the element?\nI guess the issue for me is that it is not consistent with others browsers notably Chrome.\n\n(In reply to Boris Zbarsky (:bz) from comment #3)\n> Scrolling doesn't happen in display:none iframes, because there is nothing\n> to scroll.  Or put another way, the :target state is maintained in data\n> structures that are not present in display:none iframes.  So this is\n> somewhat expected behavior.\n> \n> If your testcase actually required scrolling to the anchor, you'd see that\n> the subframe is not scrolled to it either.\n> \n> The attached reduction is definitely not the same thing as the original\n> testcase, btw.", "attachment_id": null, "bug_id": 713845, "count": 4}, {"text": "> But regardless should I not be able to target it with css since the uri still refers to\n> the element?\n\nThat's a good question.  Someone needs to look up what the relevant specs actually say here...", "tags": [], "bug_id": 713845, "time": "2011-12-28T17:45:00Z", "creation_time": "2011-12-28T17:45:00Z", "author": "bzbarsky@mit.edu", "count": 5, "is_private": false, "creator": "bzbarsky@mit.edu", "id": 5943035, "raw_text": "> But regardless should I not be able to target it with css since the uri still refers to\n> the element?\n\nThat's a good question.  Someone needs to look up what the relevant specs actually say here...", "attachment_id": null}, {"creation_time": "2011-12-28T17:48:40Z", "author": "jdlrobson@gmail.com", "text": "It's a bit hazy. All it says is \"A target element can be represented by the :target pseudo-class. If the document's URI has no fragment identifier, then the document has no target element.\"\n\nSince in this case there is a fragment identifier...\nhttp://www.w3.org/TR/selectors/#target-pseudo", "time": "2011-12-28T17:48:40Z", "tags": [], "bug_id": 713845, "is_private": false, "creator": "jdlrobson@gmail.com", "count": 6, "id": 5943046, "attachment_id": null, "raw_text": "It's a bit hazy. All it says is \"A target element can be represented by the :target pseudo-class. If the document's URI has no fragment identifier, then the document has no target element.\"\n\nSince in this case there is a fragment identifier...\nhttp://www.w3.org/TR/selectors/#target-pseudo"}, {"id": 5943076, "attachment_id": null, "raw_text": "http://www.w3.org/TR/css3-selectors/#target-pseudo is pretty unclear in terms of conformance requirements...\n\nhttp://www.whatwg.org/specs/web-apps/current-work/multipage/history.html#the-indicated-part-of-the-document seems to have no provisions for there not being a presentation.\n\nDavid, how do you feel about trying to move all the STATE_URLTARGET stuff from presshell to document or something?", "creation_time": "2011-12-28T18:07:49Z", "author": "bzbarsky@mit.edu", "text": "http://www.w3.org/TR/css3-selectors/#target-pseudo is pretty unclear in terms of conformance requirements...\n\nhttp://www.whatwg.org/specs/web-apps/current-work/multipage/history.html#the-indicated-part-of-the-document seems to have no provisions for there not being a presentation.\n\nDavid, how do you feel about trying to move all the STATE_URLTARGET stuff from presshell to document or something?", "time": "2011-12-28T18:07:49Z", "tags": [], "is_private": false, "creator": "bzbarsky@mit.edu", "bug_id": 713845, "count": 7}, {"bug_id": 713845, "count": 8, "id": 5943092, "attachment_id": null, "raw_text": "Seems reasonable -- presumably it would be the same amount of code, just in a different place?", "author": "dbaron@dbaron.org", "creation_time": "2011-12-28T18:13:03Z", "tags": [], "time": "2011-12-28T18:13:03Z", "text": "Seems reasonable -- presumably it would be the same amount of code, just in a different place?", "creator": "dbaron@dbaron.org", "is_private": false}, {"creation_time": "2011-12-28T18:16:45Z", "author": "bzbarsky@mit.edu", "text": "Probably.  We'd need to somewhat decouple STATE_URLTARGET from scrolling, basically.  I'll take a stab at it.", "bug_id": 713845, "tags": [], "time": "2011-12-28T18:16:45Z", "is_private": false, "creator": "bzbarsky@mit.edu", "count": 9, "id": 5943104, "attachment_id": null, "raw_text": "Probably.  We'd need to somewhat decouple STATE_URLTARGET from scrolling, basically.  I'll take a stab at it."}]}}}