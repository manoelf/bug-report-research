{"bugs": {"698809": {"comments": [{"attachment_id": null, "raw_text": "Bug 454532 caused Courier to always be substituted with Courier New. If this happens then it's as if Courier doesn't exist for us, and the GDI font enumerator's EnumerateFonts and EnumerateAllFonts functions shouldn't be listing it at all, I think.", "bug_id": 698809, "text": "Bug 454532 caused Courier to always be substituted with Courier New. If this happens then it's as if Courier doesn't exist for us, and the GDI font enumerator's EnumerateFonts and EnumerateAllFonts functions shouldn't be listing it at all, I think.", "tags": [], "count": 0, "id": 5818400, "is_private": false, "creation_time": "2011-11-01T17:51:56Z", "time": "2011-11-01T17:51:56Z", "creator": "rain@sunshowers.io", "author": "rain@sunshowers.io"}, {"tags": [], "text": "Hmm, not sure I agree with this.  The font enumerator lists fonts on the system.  The font 'Courier' on XP systems is an old junky .FON font while 'Courier New' is a TrueType font.  Bug 454532 added 'Courier' to the list of fonts for which we do substitutions.  I don't see why this means we need to exclude it from the font list.", "bug_id": 698809, "raw_text": "Hmm, not sure I agree with this.  The font enumerator lists fonts on the system.  The font 'Courier' on XP systems is an old junky .FON font while 'Courier New' is a TrueType font.  Bug 454532 added 'Courier' to the list of fonts for which we do substitutions.  I don't see why this means we need to exclude it from the font list.", "attachment_id": null, "author": "jd.bugzilla@gmail.com", "creation_time": "2011-11-01T20:58:59Z", "time": "2011-11-01T20:58:59Z", "creator": "jd.bugzilla@gmail.com", "count": 1, "id": 5819032, "is_private": false}, {"text": "Here's an STR for something that breaks:\n1. Make sure Firefox is in GDI mode (i.e. d2d/dwrite is disabled).\n2. Open the advanced font dialog in Tools/Options/Content.\n3. Choose Courier in the dialog.\n4. Close both pref windows and open them up again.\n\nNote that Courier New is selected instead. (This is precisely what we hit in bug 698238.) It seems contrary to expectations to be able to select Courier then have that yanked out and a different font selected.\n\nI guess an alternative is to have another API which does filter out substituted fonts, but I couldn't find an easy one when I looked. The best it seems one could do is enumerate all the fonts then use getStandardFamilyName + a dictionary to filter out fonts that aren't used.", "bug_id": 698809, "tags": [], "attachment_id": null, "raw_text": "Here's an STR for something that breaks:\n1. Make sure Firefox is in GDI mode (i.e. d2d/dwrite is disabled).\n2. Open the advanced font dialog in Tools/Options/Content.\n3. Choose Courier in the dialog.\n4. Close both pref windows and open them up again.\n\nNote that Courier New is selected instead. (This is precisely what we hit in bug 698238.) It seems contrary to expectations to be able to select Courier then have that yanked out and a different font selected.\n\nI guess an alternative is to have another API which does filter out substituted fonts, but I couldn't find an easy one when I looked. The best it seems one could do is enumerate all the fonts then use getStandardFamilyName + a dictionary to filter out fonts that aren't used.", "time": "2011-11-01T21:10:32Z", "creation_time": "2011-11-01T21:10:32Z", "creator": "rain@sunshowers.io", "author": "rain@sunshowers.io", "id": 5819077, "count": 2, "is_private": false}, {"raw_text": "What happens if the user installs a font named, say, \"Times\" or \"Helvetica\" (for which there are by default substitutions defined in the registry) - will those fonts be inaccessible, always replaced by the substitutes? My expectation as a user would be that Windows font substitutions are a fallback, to be used if the specified font is not available, rather that taking priority over it.\n\nWhich suggests to me that the Courier -> Courier New substitution, for the purpose of fixing a printing problem, is being done in the wrong place; and also that font substitution in general (based on the registry entries) may also be happening at the wrong level, though this would rarely be noticed as a problem in practice.", "attachment_id": null, "bug_id": 698809, "text": "What happens if the user installs a font named, say, \"Times\" or \"Helvetica\" (for which there are by default substitutions defined in the registry) - will those fonts be inaccessible, always replaced by the substitutes? My expectation as a user would be that Windows font substitutions are a fallback, to be used if the specified font is not available, rather that taking priority over it.\n\nWhich suggests to me that the Courier -> Courier New substitution, for the purpose of fixing a printing problem, is being done in the wrong place; and also that font substitution in general (based on the registry entries) may also be happening at the wrong level, though this would rarely be noticed as a problem in practice.", "tags": [], "id": 5820104, "count": 3, "is_private": false, "author": "jfkthame@gmail.com", "time": "2011-11-02T06:32:05Z", "creation_time": "2011-11-02T06:32:05Z", "creator": "jfkthame@gmail.com"}, {"raw_text": "Yeah, I'm pretty sure font substitution only happens if the font isn't present. The Courier -> Courier New replacement is an override, not a substitution.", "attachment_id": null, "tags": [], "text": "Yeah, I'm pretty sure font substitution only happens if the font isn't present. The Courier -> Courier New replacement is an override, not a substitution.", "bug_id": 698809, "is_private": false, "id": 5849183, "count": 4, "author": "rain@sunshowers.io", "creator": "rain@sunshowers.io", "time": "2011-11-15T13:30:28Z", "creation_time": "2011-11-15T13:30:28Z"}]}}, "comments": {}}