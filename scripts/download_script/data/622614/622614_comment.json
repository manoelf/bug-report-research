{"bugs": {"622614": {"comments": [{"creator": "hesslow@gmail.com", "creation_time": "2011-01-03T18:31:38Z", "is_private": false, "id": 5171605, "text": "Created attachment 500849\nImage Firefox don't handle\n\nFound the attached image on: http://wvnvaxa.wvnet.edu/vmswww/bmp.html\n\nIn Chrome: Works\nIn IE9 Beta: Don't render the image at all\n\nAccording to Wikipedia: http://en.wikipedia.org/wiki/BMP_file_format BITMAPCOREHEADER2 is 64 in size.\n\nNow I'm just guessing but looking at http://mxr.mozilla.org/mozilla-central/source/modules/libpr0n/decoders/nsBMPDecoder.cpp it only seems to handle Windows (size 40) and OS/2 version 1 (size 12).\n\nI guess OS/2 version 2 is not a very used format. But shouldn't the code check if the Header Length is something other then 40 and 12 and if so not decode the image. Now when it only handle those to formats. Instead of trying to parse the OS/2 version 2 format as a Windows format and the image looks strange.\n\nWasn't able to open the image in Paint.NET so I could save it as a PNG. But I took a PrintScreen from Chrome and saved it as PNG which I will attach.", "time": "2011-01-03T18:31:38Z", "tags": [], "author": "hesslow@gmail.com", "attachment_id": 500849, "bug_id": 622614, "raw_text": "Found the attached image on: http://wvnvaxa.wvnet.edu/vmswww/bmp.html\n\nIn Chrome: Works\nIn IE9 Beta: Don't render the image at all\n\nAccording to Wikipedia: http://en.wikipedia.org/wiki/BMP_file_format BITMAPCOREHEADER2 is 64 in size.\n\nNow I'm just guessing but looking at http://mxr.mozilla.org/mozilla-central/source/modules/libpr0n/decoders/nsBMPDecoder.cpp it only seems to handle Windows (size 40) and OS/2 version 1 (size 12).\n\nI guess OS/2 version 2 is not a very used format. But shouldn't the code check if the Header Length is something other then 40 and 12 and if so not decode the image. Now when it only handle those to formats. Instead of trying to parse the OS/2 version 2 format as a Windows format and the image looks strange.\n\nWasn't able to open the image in Paint.NET so I could save it as a PNG. But I took a PrintScreen from Chrome and saved it as PNG which I will attach.", "count": 0}, {"time": "2011-01-03T18:32:31Z", "id": 5171609, "text": "Created attachment 500850\nHow it looks in Chrome (PrintScreen and saved as PNG)", "is_private": false, "creator": "hesslow@gmail.com", "creation_time": "2011-01-03T18:32:31Z", "raw_text": "", "count": 1, "author": "hesslow@gmail.com", "tags": [], "bug_id": 622614, "attachment_id": 500850}, {"creator": "hesslow@gmail.com", "creation_time": "2011-01-03T18:36:06Z", "time": "2011-01-03T18:36:06Z", "text": "Looks like Bugzilla destroyed the BMP-image. The image still exists on http://wvnvaxa.wvnet.edu/vmswww/bmp.html listed as OS/2 version 2 so if someone knows how to attach it without Bugzilla changing it please do.", "id": 5171618, "is_private": false, "author": "hesslow@gmail.com", "tags": [], "bug_id": 622614, "attachment_id": null, "raw_text": "Looks like Bugzilla destroyed the BMP-image. The image still exists on http://wvnvaxa.wvnet.edu/vmswww/bmp.html listed as OS/2 version 2 so if someone knows how to attach it without Bugzilla changing it please do.", "count": 2}, {"creator": "dholbert@mozilla.com", "tags": [], "author": "dholbert@mozilla.com", "creation_time": "2011-01-03T18:51:35Z", "attachment_id": 500855, "bug_id": 622614, "is_private": false, "raw_text": "", "text": "Created attachment 500855\ntestcase", "id": 5171652, "time": "2011-01-03T18:51:35Z", "count": 3}, {"is_private": false, "time": "2011-01-03T19:00:36Z", "id": 5171665, "text": "Created attachment 500858\ntestcase again", "creator": "dholbert@mozilla.com", "creation_time": "2011-01-03T19:00:36Z", "raw_text": "", "count": 4, "author": "dholbert@mozilla.com", "tags": [], "bug_id": 622614, "attachment_id": 500858}, {"attachment_id": 500861, "bug_id": 622614, "tags": [], "author": "dholbert@mozilla.com", "count": 5, "raw_text": "odd, bugzilla does indeed force the image to image/png, even if I enter image/bmp as the mimetype when I upload it. (The image is also changed somehow such that if I download it with wget, the md5sum is different from the original.)\n\nAnyway, here's the bmp file zipped up, so we have it saved somewhere -- hopefully bugzilla won't break the zip file. :)", "creation_time": "2011-01-03T19:03:30Z", "creator": "dholbert@mozilla.com", "id": 5171672, "text": "Created attachment 500861\nzipped testcase\n\nodd, bugzilla does indeed force the image to image/png, even if I enter image/bmp as the mimetype when I upload it. (The image is also changed somehow such that if I download it with wget, the md5sum is different from the original.)\n\nAnyway, here's the bmp file zipped up, so we have it saved somewhere -- hopefully bugzilla won't break the zip file. :)", "time": "2011-01-03T19:03:30Z", "is_private": false}, {"author": "dholbert@mozilla.com", "tags": [], "bug_id": 622614, "attachment_id": 500863, "raw_text": "Here's how it looks in Firefox (trunk & 3.6.x) on my machine. Opera (ver 11.00) actually matches Firefox's rendering, FWIW.\n\nHowever: Gimp and Eye of GNOME (default Ubuntu image viewer) match the Chrome/Webkit rendering.", "count": 6, "creator": "dholbert@mozilla.com", "creation_time": "2011-01-03T19:09:17Z", "time": "2011-01-03T19:09:17Z", "id": 5171683, "text": "Created attachment 500863\nHow it looks in Firefox\n\nHere's how it looks in Firefox (trunk & 3.6.x) on my machine. Opera (ver 11.00) actually matches Firefox's rendering, FWIW.\n\nHowever: Gimp and Eye of GNOME (default Ubuntu image viewer) match the Chrome/Webkit rendering.", "is_private": false}, {"text": "Firefox's behavior is consistent at least as far back as 3.0.x\nMozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.19pre) Gecko/2010060904 GranParadiso/3.0.19pre", "id": 5171692, "time": "2011-01-03T19:11:46Z", "is_private": false, "creator": "dholbert@mozilla.com", "creation_time": "2011-01-03T19:11:46Z", "raw_text": "Firefox's behavior is consistent at least as far back as 3.0.x\nMozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.19pre) Gecko/2010060904 GranParadiso/3.0.19pre", "count": 7, "tags": [], "author": "dholbert@mozilla.com", "attachment_id": null, "bug_id": 622614}]}}, "comments": {}}