{"comments": {}, "bugs": {"322886": {"comments": [{"author": "phil@off.net", "raw_text": "User-Agent:       Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O; en-US; rv:1.8) Gecko/20051111 Firefox/1.5\nBuild Identifier: Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O; en-US; rv:1.8) Gecko/20051111 Firefox/1.5\n\nAt first I thought this might be a dupe of bug 322232, but my stack doesn't have any obvious connection to plugins.  Only a few more data points will reveal the truth, I think.\n\nI find after a day or three of browsing that an idle firefox will consume 40-60% of my Powerbook G4's CPU.\n\nEnough was enough, I said, egged on by shaver, and installed Shark.  The results are relatively unambiguous.  This is the stack that is responsible for the first 40%:\n\n\t0.0%\t46.8%\tfirefox-bin\tstart\t\n\t0.0%\t46.8%\tfirefox-bin\tnsAppStartup::Run()\t\n\t0.0%\t46.8%\tfirefox-bin\tnsAppShell::Run()\t\n\t0.0%\t46.8%\tfirefox-bin\tnsMacMessagePump::DoMessagePump()\t\n\t0.0%\t46.8%\tfirefox-bin\tnsMacMessagePump::GetEvent(EventRecord&)\t\n\t0.0%\t46.8%\tHIToolbox\tWaitNextEvent\t\n\t0.0%\t46.8%\tHIToolbox\tWNEInternal\t\n\t0.0%\t46.7%\tHIToolbox\tGetNextEventMatchingMask\t\n\t0.0%\t46.2%\tHIToolbox\tRunCurrentEventLoopInMode\t\n\t0.0%\t45.9%\tCoreFoundation\tCFRunLoopRunSpecific\t\n\t0.1%\t43.6%\tCoreFoundation\t__CFRunLoopRun\t\n\t0.0%\t42.6%\tCoreFoundation\t__CFRunLoopDoSources0\t\n\t0.0%\t42.3%\tlibxpcom_core.dylib\tPL_ProcessPendingEvents\t\n\t0.0%\t42.1%\tlibxpcom_core.dylib\tPL_HandleEvent\t\n\t0.0%\t42.0%\tlibxpcom_core.dylib\thandleTimerEvent(TimerEventType*)\t\n\t0.0%\t41.8%\tlibxpcom_core.dylib\tnsTimerImpl::Fire()\t\n\t0.0%\t41.3%\tfirefox-bin\timgContainerGIF::Notify(nsITimer*)\t\n\t0.1%\t41.0%\tfirefox-bin\timgContainerGIF::DoComposite(gfxIImageFrame**, nsRect*, gfxIImageFrame*, gfxIImageFrame*, int)\t\n\t0.0%\t39.9%\tfirefox-bin\tgfxImageFrame::DrawTo(gfxIImageFrame*, int, int, int, int)\t\n        ... more inner frames ...\n\nThe other 60% is the kernel doing IPC, handling faults, and adjusting mappings.  Related to the non-stop GIF drawing, I assume?  I don't know, you tell me.\n\nTo anticipate a few questions:\n\n- No, there are no pages loaded with plugins (or gifs).  In fact, no pages visible of any kind.  Before I gathered the data, I closed all tabs except for one new empty one, pure as the wind-driven snow.\n\n- In three days of heavy use, the browser has probably seen every kind of content imaginable.\n\n- I've been suffering with this for months, but I have not yet detected a pattern to any particular type of content that triggers it.\n\n- Restarting the browser resets the clock, and I get another day or three until I notice that my fan never turns off anymore.\n\n- To make the pain of restarting every three days less acute, I installed SessionSaver.  But this behaviour long predates my use of that plugin.\n\nOne stack trace is not maximally useful, but I'll add more Shark data until it becomes clear that there is a trend, or the bug gets fixed, or Safari gets adblock.  I kept the raw data, but each 30-second snapshot is 1.4 MB.  If someone wants it, I'll attach it, or put it on the web.\n\nI'm sure that someone will figure out in which component this belongs, but maybe only after some analysis.\n\nReproducible: Always\n\nSteps to Reproduce:", "text": "User-Agent:       Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O; en-US; rv:1.8) Gecko/20051111 Firefox/1.5\nBuild Identifier: Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O; en-US; rv:1.8) Gecko/20051111 Firefox/1.5\n\nAt first I thought this might be a dupe of bug 322232, but my stack doesn't have any obvious connection to plugins.  Only a few more data points will reveal the truth, I think.\n\nI find after a day or three of browsing that an idle firefox will consume 40-60% of my Powerbook G4's CPU.\n\nEnough was enough, I said, egged on by shaver, and installed Shark.  The results are relatively unambiguous.  This is the stack that is responsible for the first 40%:\n\n\t0.0%\t46.8%\tfirefox-bin\tstart\t\n\t0.0%\t46.8%\tfirefox-bin\tnsAppStartup::Run()\t\n\t0.0%\t46.8%\tfirefox-bin\tnsAppShell::Run()\t\n\t0.0%\t46.8%\tfirefox-bin\tnsMacMessagePump::DoMessagePump()\t\n\t0.0%\t46.8%\tfirefox-bin\tnsMacMessagePump::GetEvent(EventRecord&)\t\n\t0.0%\t46.8%\tHIToolbox\tWaitNextEvent\t\n\t0.0%\t46.8%\tHIToolbox\tWNEInternal\t\n\t0.0%\t46.7%\tHIToolbox\tGetNextEventMatchingMask\t\n\t0.0%\t46.2%\tHIToolbox\tRunCurrentEventLoopInMode\t\n\t0.0%\t45.9%\tCoreFoundation\tCFRunLoopRunSpecific\t\n\t0.1%\t43.6%\tCoreFoundation\t__CFRunLoopRun\t\n\t0.0%\t42.6%\tCoreFoundation\t__CFRunLoopDoSources0\t\n\t0.0%\t42.3%\tlibxpcom_core.dylib\tPL_ProcessPendingEvents\t\n\t0.0%\t42.1%\tlibxpcom_core.dylib\tPL_HandleEvent\t\n\t0.0%\t42.0%\tlibxpcom_core.dylib\thandleTimerEvent(TimerEventType*)\t\n\t0.0%\t41.8%\tlibxpcom_core.dylib\tnsTimerImpl::Fire()\t\n\t0.0%\t41.3%\tfirefox-bin\timgContainerGIF::Notify(nsITimer*)\t\n\t0.1%\t41.0%\tfirefox-bin\timgContainerGIF::DoComposite(gfxIImageFrame**, nsRect*, gfxIImageFrame*, gfxIImageFrame*, int)\t\n\t0.0%\t39.9%\tfirefox-bin\tgfxImageFrame::DrawTo(gfxIImageFrame*, int, int, int, int)\t\n        ... more inner frames ...\n\nThe other 60% is the kernel doing IPC, handling faults, and adjusting mappings.  Related to the non-stop GIF drawing, I assume?  I don't know, you tell me.\n\nTo anticipate a few questions:\n\n- No, there are no pages loaded with plugins (or gifs).  In fact, no pages visible of any kind.  Before I gathered the data, I closed all tabs except for one new empty one, pure as the wind-driven snow.\n\n- In three days of heavy use, the browser has probably seen every kind of content imaginable.\n\n- I've been suffering with this for months, but I have not yet detected a pattern to any particular type of content that triggers it.\n\n- Restarting the browser resets the clock, and I get another day or three until I notice that my fan never turns off anymore.\n\n- To make the pain of restarting every three days less acute, I installed SessionSaver.  But this behaviour long predates my use of that plugin.\n\nOne stack trace is not maximally useful, but I'll add more Shark data until it becomes clear that there is a trend, or the bug gets fixed, or Safari gets adblock.  I kept the raw data, but each 30-second snapshot is 1.4 MB.  If someone wants it, I'll attach it, or put it on the web.\n\nI'm sure that someone will figure out in which component this belongs, but maybe only after some analysis.\n\nReproducible: Always\n\nSteps to Reproduce:", "creation_time": "2006-01-10T03:59:09Z", "creator": "phil@off.net", "is_private": false, "count": 0, "attachment_id": null, "time": "2006-01-10T03:59:09Z", "bug_id": 322886, "id": 2743859, "tags": []}, {"tags": [], "author": "shaver@mozilla.org", "creation_time": "2006-01-10T21:53:06Z", "text": "I've asked Phil to test disabling fastback, to see if that affects the behaviour.  (It happens to me, too.)", "creator": "shaver@mozilla.org", "raw_text": "I've asked Phil to test disabling fastback, to see if that affects the behaviour.  (It happens to me, too.)", "is_private": false, "count": 1, "time": "2006-01-10T21:53:06Z", "attachment_id": null, "id": 2744639, "bug_id": 322886}, {"count": 2, "attachment_id": null, "time": "2006-01-17T19:39:13Z", "is_private": false, "id": 2750420, "bug_id": 322886, "tags": [], "author": "shaver@mozilla.org", "creator": "shaver@mozilla.org", "text": "With fastback disabled (max_total_viewers at 0), this still happened.", "creation_time": "2006-01-17T19:39:13Z", "raw_text": "With fastback disabled (max_total_viewers at 0), this still happened."}, {"is_private": false, "count": 3, "time": "2006-07-20T20:57:34Z", "attachment_id": null, "bug_id": 322886, "id": 2918812, "author": "ispiked@gmail.com", "tags": [], "raw_text": "*** Bug 327143 has been marked as a duplicate of this bug. ***", "text": "*** Bug 327143 has been marked as a duplicate of this bug. ***", "creation_time": "2006-07-20T20:57:34Z", "creator": "ispiked@gmail.com"}, {"bug_id": 322886, "id": 11935532, "count": 4, "time": "2016-12-21T18:57:00Z", "attachment_id": null, "is_private": false, "raw_text": "Is this still relevant or has code churn made it obsolete?", "creator": "ilmari.lauhakangas@libreoffice.org", "creation_time": "2016-12-21T18:57:00Z", "text": "Is this still relevant or has code churn made it obsolete?", "author": "ilmari.lauhakangas@libreoffice.org", "tags": []}, {"count": 5, "attachment_id": null, "time": "2019-01-08T17:20:23Z", "is_private": false, "id": 13848773, "bug_id": 322886, "tags": [], "author": "standard8@mozilla.com", "creator": "standard8@mozilla.com", "text": "I suspect code churn has made it obsolete. It was also filed on Power PC which we no longer support.", "creation_time": "2019-01-08T17:20:23Z", "raw_text": "I suspect code churn has made it obsolete. It was also filed on Power PC which we no longer support."}]}}}