{"comments": {}, "bugs": {"628245": {"comments": [{"is_private": false, "text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; fr; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13\nBuild Identifier: \n\nIf an attachment is added to a message that was previously signed with S/MIME, the message body is rendered blank.\n\nReproducible: Always\n\nSteps to Reproduce:\n1. Sign a message with S/MIME and send it\n2. Add an attachment (you'll need to edit the message body manually)\n3. Open the message\n\nI'll send sample messages so it's easier to reproduce.\nActual Results:  \nA blank page is shown.\n\nExpected Results:  \nThe message or at least an error about invalid / incomplete signature should be shown\n\nAppending of attachments after the signature is common with mailing lists. For example, sympa can be configured to do it <http://www.sympa.org/>.", "count": 0, "id": 5221570, "tags": [], "creation_time": "2011-01-24T11:40:00Z", "bug_id": 628245, "raw_text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; fr; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13\nBuild Identifier: \n\nIf an attachment is added to a message that was previously signed with S/MIME, the message body is rendered blank.\n\nReproducible: Always\n\nSteps to Reproduce:\n1. Sign a message with S/MIME and send it\n2. Add an attachment (you'll need to edit the message body manually)\n3. Open the message\n\nI'll send sample messages so it's easier to reproduce.\nActual Results:  \nA blank page is shown.\n\nExpected Results:  \nThe message or at least an error about invalid / incomplete signature should be shown\n\nAppending of attachments after the signature is common with mailing lists. For example, sympa can be configured to do it <http://www.sympa.org/>.", "time": "2011-01-24T11:40:00Z", "author": "bugmail-mozilla@xavier.robin.name", "attachment_id": null, "creator": "bugmail-mozilla@xavier.robin.name"}, {"time": "2011-01-24T11:42:33Z", "author": "bugmail-mozilla@xavier.robin.name", "attachment_id": 506353, "creator": "bugmail-mozilla@xavier.robin.name", "bug_id": 628245, "raw_text": "Signature is invalid because email address is obscured. I'll provide the correct email address upon request.", "creation_time": "2011-01-24T11:42:33Z", "tags": [], "is_private": false, "text": "Created attachment 506353\nSigned message\n\nSignature is invalid because email address is obscured. I'll provide the correct email address upon request.", "count": 1, "id": 5221571}, {"attachment_id": 506354, "creator": "bugmail-mozilla@xavier.robin.name", "author": "bugmail-mozilla@xavier.robin.name", "time": "2011-01-24T11:43:23Z", "creation_time": "2011-01-24T11:43:23Z", "tags": [], "raw_text": "Here is a signed message to which an attachment was added after signature. Email address is obscured but I'll provide it upon request. Opening this message results in a blank page without any error.", "id": 5221572, "count": 2, "bug_id": 628245, "is_private": false, "text": "Created attachment 506354\nSigned message with attachment\n\nHere is a signed message to which an attachment was added after signature. Email address is obscured but I'll provide it upon request. Opening this message results in a blank page without any error."}, {"creation_time": "2011-01-30T08:49:31Z", "tags": [], "text": "Quoting RFC 1847, section 2.1:\n\n   The multipart/signed content type contains exactly two body parts.\n   The first body part is the body part over which the digital signature\n   was created, including its MIME headers.  The second body part\n   contains the control information necessary to verify the digital\n   signature.  The first body part may contain any valid MIME content\n   type, labeled accordingly.  The second body part is labeled according\n   to the value of the protocol parameter.\n\nAppending a \"footer\" to a multipart/signed message is simply bogus (if Sympa allows you doing that, then it's broken).\n\nThe purpose of signed messages is to make sure that they can't be altered afterwards (at least not w/o the recipient noticing). Displaying arbitrary content at the end of a message would also need a separate treatment UI-wise - to make it clear to the user that the footer isn't covered by the signature.", "is_private": false, "count": 3, "id": 5238377, "time": "2011-01-30T08:49:31Z", "creator": "mozbgz@velox.ch", "author": "mozbgz@velox.ch", "attachment_id": null, "bug_id": 628245, "raw_text": "Quoting RFC 1847, section 2.1:\n\n   The multipart/signed content type contains exactly two body parts.\n   The first body part is the body part over which the digital signature\n   was created, including its MIME headers.  The second body part\n   contains the control information necessary to verify the digital\n   signature.  The first body part may contain any valid MIME content\n   type, labeled accordingly.  The second body part is labeled according\n   to the value of the protocol parameter.\n\nAppending a \"footer\" to a multipart/signed message is simply bogus (if Sympa allows you doing that, then it's broken).\n\nThe purpose of signed messages is to make sure that they can't be altered afterwards (at least not w/o the recipient noticing). Displaying arbitrary content at the end of a message would also need a separate treatment UI-wise - to make it clear to the user that the footer isn't covered by the signature."}, {"time": "2011-01-30T09:14:17Z", "attachment_id": null, "author": "bugmail-mozilla@xavier.robin.name", "creator": "bugmail-mozilla@xavier.robin.name", "bug_id": 628245, "raw_text": "I disagree with the resolution as INVALID.\n\nIf the signature is invalid (and I agree it is), then Thunderbird should make it clear that the signature really is invalid. At the very least a message should be displayed. A confusing blank page is not an acceptable solution.\n\n\u201cBe conservative in what you send; be liberal in what you accept.\u201d", "creation_time": "2011-01-30T09:14:17Z", "tags": [], "text": "I disagree with the resolution as INVALID.\n\nIf the signature is invalid (and I agree it is), then Thunderbird should make it clear that the signature really is invalid. At the very least a message should be displayed. A confusing blank page is not an acceptable solution.\n\n\u201cBe conservative in what you send; be liberal in what you accept.\u201d", "is_private": false, "id": 5238391, "count": 4}, {"creator": "mozilla@mattsch.com", "author": "mozilla@mattsch.com", "attachment_id": null, "time": "2020-12-02T17:49:50Z", "raw_text": "This is still a problem (Thunderbird 78.5.1).\n\nI just received an email that has an S/MIME signature. The email also contains an attachment. What I see is not a blank page but the raw body:\n\n```\n------_=_NextPart_001_0059C2F1.5FC7C6AD--\n\n------_=_NextPart_000_0059C2F1.5FC7C6AD\nContent-Type: application/x-pkcs7-signature;\n name=\"smime.p7s\"\nContent-Transfer-Encoding: base64\nContent-Disposition: attachment;\n filename=\"smime.p7s\"\n\n<removed>\n\n------_=_NextPart_000_0059C2F1.5FC7C6AD--\n```\n\nI agree with Xavier that I should see at least a warning. Better would be a warning and the option to display the content anyway.\n\nFor example, I opened the email on iOS Mail which showed me the text of the email but not the attachment. At the top I see a note stating that the content of the message could not be verified and I can choose \"load external content\" which then shows the attachment.", "bug_id": 628245, "tags": [], "creation_time": "2020-12-02T17:49:50Z", "id": 15156005, "count": 5, "text": "This is still a problem (Thunderbird 78.5.1).\n\nI just received an email that has an S/MIME signature. The email also contains an attachment. What I see is not a blank page but the raw body:\n\n```\n------_=_NextPart_001_0059C2F1.5FC7C6AD--\n\n------_=_NextPart_000_0059C2F1.5FC7C6AD\nContent-Type: application/x-pkcs7-signature;\n name=\"smime.p7s\"\nContent-Transfer-Encoding: base64\nContent-Disposition: attachment;\n filename=\"smime.p7s\"\n\n<removed>\n\n------_=_NextPart_000_0059C2F1.5FC7C6AD--\n```\n\nI agree with Xavier that I should see at least a warning. Better would be a warning and the option to display the content anyway.\n\nFor example, I opened the email on iOS Mail which showed me the text of the email but not the attachment. At the top I see a note stating that the content of the message could not be verified and I can choose \"load external content\" which then shows the attachment.", "is_private": false}]}}}