{"bugs": {"630863": {"comments": [{"attachment_id": null, "creator": "m.koot@zoetermeer.peutz.nl", "raw_text": "User-Agent:       Mozilla/5.0 (Windows NT 5.1; rv:2.0b10) Gecko/20100101 Firefox/4.0b10\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; nl; rv:1.9.2.12pre) Gecko/20101104 Lightning/1.0b2.104i Thunderbird/3.1.6\n\nMozilla provides the gFolderDisplay.selectedMessageUris[0] or gMessageDisplay.displayedMessage.messageKey to get a URI/Key for a currently selected message.\nHowever when one opens a message, changes the selection in the main window pane to a different mail, and then requests the URI of the opened message with the upper functions, the URI has changed to the new selected mail and there's no way to get the URI of the openened message.\nThere doesn't seem to be a property which returns the URI of the opened message, only for the currently selected one.\nCan this property be added?\n\nReproducible: Always", "bug_id": 630863, "text": "User-Agent:       Mozilla/5.0 (Windows NT 5.1; rv:2.0b10) Gecko/20100101 Firefox/4.0b10\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; nl; rv:1.9.2.12pre) Gecko/20101104 Lightning/1.0b2.104i Thunderbird/3.1.6\n\nMozilla provides the gFolderDisplay.selectedMessageUris[0] or gMessageDisplay.displayedMessage.messageKey to get a URI/Key for a currently selected message.\nHowever when one opens a message, changes the selection in the main window pane to a different mail, and then requests the URI of the opened message with the upper functions, the URI has changed to the new selected mail and there's no way to get the URI of the openened message.\nThere doesn't seem to be a property which returns the URI of the opened message, only for the currently selected one.\nCan this property be added?\n\nReproducible: Always", "time": "2011-02-02T15:49:37Z", "creation_time": "2011-02-02T15:49:37Z", "count": 0, "author": "m.koot@zoetermeer.peutz.nl", "id": 5247225, "tags": [], "is_private": false}, {"raw_text": "Why don't you just cache the URI when the window is opened?", "creator": "standard8@mozilla.com", "attachment_id": null, "text": "Why don't you just cache the URI when the window is opened?", "bug_id": 630863, "creation_time": "2011-02-02T16:33:10Z", "time": "2011-02-02T16:33:10Z", "author": "standard8@mozilla.com", "count": 1, "tags": [], "id": 5247322, "is_private": false}, {"creator": "bugmail@asutherland.org", "raw_text": "I'm not clear on what \"when one opens a message\" refers to in this case.  Open it in another tab, another window, display it in the current tab, other?", "attachment_id": null, "time": "2011-02-02T19:35:29Z", "creation_time": "2011-02-02T19:35:29Z", "bug_id": 630863, "text": "I'm not clear on what \"when one opens a message\" refers to in this case.  Open it in another tab, another window, display it in the current tab, other?", "count": 2, "author": "bugmail@asutherland.org", "is_private": false, "id": 5247964, "tags": []}, {"attachment_id": null, "raw_text": "@ Andrew, with opening a message I refer to a opening a message as a new window.\n@ Mark, well I'm looking into that, but I'm having trouble getting the uri after a message is loaded. Load event listeners seem to be too early (returning null for the uri), and using a \"mail-startup-done\" observer doesn't trigger an event.", "creator": "m.koot@zoetermeer.peutz.nl", "creation_time": "2011-02-03T10:36:08Z", "time": "2011-02-03T10:36:08Z", "text": "@ Andrew, with opening a message I refer to a opening a message as a new window.\n@ Mark, well I'm looking into that, but I'm having trouble getting the uri after a message is loaded. Load event listeners seem to be too early (returning null for the uri), and using a \"mail-startup-done\" observer doesn't trigger an event.", "bug_id": 630863, "author": "m.koot@zoetermeer.peutz.nl", "count": 3, "is_private": false, "tags": [], "id": 5251085}, {"author": "standard8@mozilla.com", "count": 4, "attachment_id": null, "raw_text": "Isn't the message being opened passed as part of the window arguments? So you could just poke the window arguments after having loaded.\n\nSee here for what the standalone message window currently does: http://hg.mozilla.org/comm-central/annotate/81ced12283af/mail/base/content/messageWindow.js#l429", "creator": "standard8@mozilla.com", "text": "Isn't the message being opened passed as part of the window arguments? So you could just poke the window arguments after having loaded.\n\nSee here for what the standalone message window currently does: http://hg.mozilla.org/comm-central/annotate/81ced12283af/mail/base/content/messageWindow.js#l429", "tags": [], "bug_id": 630863, "id": 5251105, "creation_time": "2011-02-03T11:00:04Z", "time": "2011-02-03T11:00:04Z", "is_private": false}, {"id": 5254822, "tags": [], "is_private": false, "count": 5, "author": "m.koot@zoetermeer.peutz.nl", "bug_id": 630863, "text": "Unfortunaly the message doesn't seem to be passed through the window arguments.\nI've got around it nevertheless by using the nsIWindowMediator, and then getMostRecentWindow(\"mail:messageWindow\").gFolderDisplay.selectedMessageUris[0]\nA bit of a workaround but it works.", "time": "2011-02-04T11:43:28Z", "creation_time": "2011-02-04T11:43:28Z", "attachment_id": null, "creator": "m.koot@zoetermeer.peutz.nl", "raw_text": "Unfortunaly the message doesn't seem to be passed through the window arguments.\nI've got around it nevertheless by using the nsIWindowMediator, and then getMostRecentWindow(\"mail:messageWindow\").gFolderDisplay.selectedMessageUris[0]\nA bit of a workaround but it works."}]}}, "comments": {}}