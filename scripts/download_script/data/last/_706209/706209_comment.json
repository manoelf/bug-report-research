{"comments": {}, "bugs": {"706209": {"comments": [{"text": "It'd be nice if we could combine moz-selection with moz-window-active/inactive, so that we could override FF's default behavior of making selected text both opaque and gray in inactive windows (at least on OS X).\n\nThis would be useful for our pdf.js project, where we have a transparent layer of text on top of a canvas used for faking text selection: Currently, when the user inactivates a window the forced opaque-gray selection hides the canvas content behind it.\n\nHere's a discussion on this by someone else:\n\nhttp://css-tricks.com/9288-window-inactive-styling/\n\nThanks!", "bug_id": 706209, "tags": [], "attachment_id": null, "raw_text": "It'd be nice if we could combine moz-selection with moz-window-active/inactive, so that we could override FF's default behavior of making selected text both opaque and gray in inactive windows (at least on OS X).\n\nThis would be useful for our pdf.js project, where we have a transparent layer of text on top of a canvas used for faking text selection: Currently, when the user inactivates a window the forced opaque-gray selection hides the canvas content behind it.\n\nHere's a discussion on this by someone else:\n\nhttp://css-tricks.com/9288-window-inactive-styling/\n\nThanks!", "creator": "aadib@mozilla.com", "creation_time": "2011-11-29T19:52:51Z", "time": "2011-11-29T19:52:51Z", "author": "aadib@mozilla.com", "is_private": false, "count": 0, "id": 5879593}, {"is_private": false, "count": 1, "id": 5879734, "author": "bzbarsky@mit.edu", "creator": "bzbarsky@mit.edu", "creation_time": "2011-11-29T20:38:18Z", "time": "2011-11-29T20:38:18Z", "raw_text": "This seems to be quite purposeful.  In particular, nsTextPaintStyle::InitSelectionColors does this:\n\n3447      if (selectionElement &&\n3448          selectionStatus == nsISelectionController::SELECTION_ON) {\n\naround looking up ::selection styles.  When the window is active, the selectionStatus is SELECTION_ON.  Otherwise it's SELECTION_DISABLED, at least on Mac.\n\nThis behavior was introduced by bug 56314, looks like.  Masayuki, why is that check there?", "attachment_id": null, "tags": [], "text": "This seems to be quite purposeful.  In particular, nsTextPaintStyle::InitSelectionColors does this:\n\n3447      if (selectionElement &&\n3448          selectionStatus == nsISelectionController::SELECTION_ON) {\n\naround looking up ::selection styles.  When the window is active, the selectionStatus is SELECTION_ON.  Otherwise it's SELECTION_DISABLED, at least on Mac.\n\nThis behavior was introduced by bug 56314, looks like.  Masayuki, why is that check there?", "bug_id": 706209}, {"raw_text": "Because the -moz-selection is for specifying normal selection styles rather than other styles (including disabled). If we apply the specified style to -moz-selection simply, we always paint the selection on some sites as active even if the window is inactive.\n\nWe can think that the inactive selection style is another feature, so, different from normal selection. If the suggested trick is needed by web developers, I think there should be -moz-selection-disabled or something. If so, we can paint the disabled selection even on such pages.", "attachment_id": null, "tags": [], "text": "Because the -moz-selection is for specifying normal selection styles rather than other styles (including disabled). If we apply the specified style to -moz-selection simply, we always paint the selection on some sites as active even if the window is inactive.\n\nWe can think that the inactive selection style is another feature, so, different from normal selection. If the suggested trick is needed by web developers, I think there should be -moz-selection-disabled or something. If so, we can paint the disabled selection even on such pages.", "bug_id": 706209, "is_private": false, "count": 2, "id": 5881059, "author": "masayuki@d-toybox.com", "creator": "masayuki@d-toybox.com", "time": "2011-11-30T02:53:32Z", "creation_time": "2011-11-30T02:53:32Z"}, {"attachment_id": null, "raw_text": "I can't claim I understand the rationale for not preserving the -moz-selection style in inactive windows (somehow WebKit gets away with preserving it), but anyway another solution that would work for us is to combine -moz-selection and -moz-window-inactive as suggested in the link above:\n\n::-moz-selection:-moz-window-inactive {\n  background: rgba(255,0,0,0.3);\n}", "bug_id": 706209, "text": "I can't claim I understand the rationale for not preserving the -moz-selection style in inactive windows (somehow WebKit gets away with preserving it), but anyway another solution that would work for us is to combine -moz-selection and -moz-window-inactive as suggested in the link above:\n\n::-moz-selection:-moz-window-inactive {\n  background: rgba(255,0,0,0.3);\n}", "tags": [], "is_private": false, "id": 5881806, "count": 3, "creator": "aadib@mozilla.com", "time": "2011-11-30T13:06:10Z", "creation_time": "2011-11-30T13:06:10Z", "author": "aadib@mozilla.com"}, {"creator": "bzbarsky@mit.edu", "time": "2011-11-30T17:48:17Z", "creation_time": "2011-11-30T17:48:17Z", "author": "bzbarsky@mit.edu", "tags": [], "text": "That won't help; the code that looks at the moz-selection value has no idea what selector was used to apply it.", "bug_id": 706209, "is_private": false, "attachment_id": null, "count": 4, "id": 5882622, "raw_text": "That won't help; the code that looks at the moz-selection value has no idea what selector was used to apply it."}, {"raw_text": "Bummer. I guess we're stuck with gray-and-opaque then?", "attachment_id": null, "tags": [], "bug_id": 706209, "text": "Bummer. I guess we're stuck with gray-and-opaque then?", "id": 5882644, "count": 5, "is_private": false, "author": "aadib@mozilla.com", "creation_time": "2011-11-30T17:55:30Z", "time": "2011-11-30T17:55:30Z", "creator": "aadib@mozilla.com"}, {"text": "Well, we could add ::-moz-disabled-selection.", "bug_id": 706209, "tags": [], "raw_text": "Well, we could add ::-moz-disabled-selection.", "attachment_id": null, "author": "bzbarsky@mit.edu", "time": "2011-11-30T19:42:23Z", "creation_time": "2011-11-30T19:42:23Z", "creator": "bzbarsky@mit.edu", "count": 6, "id": 5883027, "is_private": false}, {"attachment_id": null, "raw_text": "", "bug_id": 706209, "text": "*** Bug 541311 has been marked as a duplicate of this bug. ***", "tags": [], "is_private": false, "count": 7, "id": 6291812, "creator": "bzbarsky@mit.edu", "creation_time": "2012-05-09T01:49:21Z", "time": "2012-05-09T01:49:21Z", "author": "bzbarsky@mit.edu"}, {"is_private": false, "id": 6292343, "count": 8, "creator": "timdown@gmail.com", "time": "2012-05-09T08:26:11Z", "creation_time": "2012-05-09T08:26:11Z", "author": "timdown@gmail.com", "attachment_id": null, "raw_text": "There is a related Firefox bug where the selection always appears inactive in an iframe that has been dynamically created by script, thus preventing any styling of the selection in such an iframe:\n\nhttp://stackoverflow.com/questions/6730814/", "tags": [], "text": "There is a related Firefox bug where the selection always appears inactive in an iframe that has been dynamically created by script, thus preventing any styling of the selection in such an iframe:\n\nhttp://stackoverflow.com/questions/6730814/", "bug_id": 706209}, {"text": "This behavior becomes a real problem when you combine it with bug 554039.  That is, we could work around the inability to style the inactive window selection color by making that window active, but bug 554039 prevent that.\n\nFor more info see these discussions: \n    http://stackoverflow.com/questions/10502099\n    http://stackoverflow.com/questions/10501381", "bug_id": 706209, "tags": [], "raw_text": "This behavior becomes a real problem when you combine it with bug 554039.  That is, we could work around the inability to style the inactive window selection color by making that window active, but bug 554039 prevent that.\n\nFor more info see these discussions: \n    http://stackoverflow.com/questions/10502099\n    http://stackoverflow.com/questions/10501381", "attachment_id": null, "author": "paleozogt@gmail.com", "time": "2012-05-09T15:17:11Z", "creation_time": "2012-05-09T15:17:11Z", "creator": "paleozogt@gmail.com", "id": 6293062, "count": 9, "is_private": false}, {"author": "julian.viereck@gmail.com", "time": "2012-11-02T16:27:55Z", "creation_time": "2012-11-02T16:27:55Z", "creator": "julian.viereck@gmail.com", "count": 10, "id": 6787724, "is_private": false, "bug_id": 706209, "text": "(In reply to Boris Zbarsky (:bz) from comment #6)\n> Well, we could add ::-moz-disabled-selection.\n\nShould a separate bug be opened to implement ::-moz-disabled-selection?", "tags": [], "raw_text": "(In reply to Boris Zbarsky (:bz) from comment #6)\n> Well, we could add ::-moz-disabled-selection.\n\nShould a separate bug be opened to implement ::-moz-disabled-selection?", "attachment_id": null}, {"creator": "bzbarsky@mit.edu", "creation_time": "2012-11-21T15:03:14Z", "time": "2012-11-21T15:03:14Z", "author": "bzbarsky@mit.edu", "is_private": false, "id": 6841911, "count": 11, "text": "*** Bug 813799 has been marked as a duplicate of this bug. ***", "bug_id": 706209, "tags": [], "attachment_id": null, "raw_text": ""}, {"is_private": false, "id": 6958428, "count": 12, "creator": "bzbarsky@mit.edu", "time": "2013-01-03T02:05:07Z", "creation_time": "2013-01-03T02:05:07Z", "author": "bzbarsky@mit.edu", "attachment_id": null, "raw_text": "", "tags": [], "bug_id": 706209, "text": "*** Bug 826006 has been marked as a duplicate of this bug. ***"}, {"attachment_id": null, "is_private": false, "id": 12117411, "count": 13, "raw_text": "This is called ::inactive-selection in CSS pseudo-elements level 4: https://drafts.csswg.org/css-pseudo-4/#selectordef-inactive-selection\n\nI'm guessing that it would be best to hide this being a pref rather than adding a new ::-moz-inactive-selection for consistency, yes? Can you think of a reason to avoid implementing this for now, pref or not?", "creator": "wisniewskit@gmail.com", "time": "2017-03-06T02:19:25Z", "creation_time": "2017-03-06T02:19:25Z", "author": "wisniewskit@gmail.com", "tags": [], "text": "This is called ::inactive-selection in CSS pseudo-elements level 4: https://drafts.csswg.org/css-pseudo-4/#selectordef-inactive-selection\n\nI'm guessing that it would be best to hide this being a pref rather than adding a new ::-moz-inactive-selection for consistency, yes? Can you think of a reason to avoid implementing this for now, pref or not?", "bug_id": 706209}, {"raw_text": "That's a question for dbaron; I don't know how stable this spec draft is.", "attachment_id": null, "tags": [], "text": "That's a question for dbaron; I don't know how stable this spec draft is.", "bug_id": 706209, "id": 12128862, "count": 14, "is_private": false, "author": "bzbarsky@mit.edu", "time": "2017-03-09T06:01:12Z", "creation_time": "2017-03-09T06:01:12Z", "creator": "bzbarsky@mit.edu"}, {"author": "dbaron@dbaron.org", "time": "2017-03-09T20:21:38Z", "creation_time": "2017-03-09T20:21:38Z", "creator": "dbaron@dbaron.org", "count": 15, "id": 12131308, "is_private": false, "tags": [], "text": "I'm not sure how stable the spec draft is, but the feature seems (assuming ::selection is complete!) relatively straightforward, so it seems reasonable to implement behind a pref.  Having an implementation also makes the feature more stable.", "bug_id": 706209, "raw_text": "I'm not sure how stable the spec draft is, but the feature seems (assuming ::selection is complete!) relatively straightforward, so it seems reasonable to implement behind a pref.  Having an implementation also makes the feature more stable.", "attachment_id": null}, {"text": "*** Bug 1560141 has been marked as a duplicate of this bug. ***", "bug_id": 706209, "tags": [], "raw_text": "", "attachment_id": null, "author": "florencia.diciocco@softvision.com", "time": "2019-06-24T17:48:45Z", "creation_time": "2019-06-24T17:48:45Z", "creator": "florencia.diciocco@softvision.com", "count": 16, "id": 14195801, "is_private": false}]}}}