{"comments": {}, "bugs": {"693668": {"comments": [{"is_private": false, "count": 0, "id": 5774811, "creator": "pnixte@gmail.com", "creation_time": "2011-10-11T16:42:38Z", "time": "2011-10-11T16:42:38Z", "author": "pnixte@gmail.com", "attachment_id": null, "raw_text": "User Agent: Mozilla/5.0 (Windows NT 5.1; rv:7.0.1) Gecko/20100101 Firefox/7.0.1\nBuild ID: 20110928134238\n\nSteps to reproduce:\n\nI intend to use Thunderbird as an offline NNTP reader.\n\nI have set the NNTP account settings to \"Do not delete any messages\" and made sure (to the best of my knowledge and hours spent researching) that there is no hidden option that could somehow circumvent this (\"Remove bodies...\" is also unchecked).\n\nI have also disabled the junk filter.\n\n\n\nActual results:\n\nIn the Activity manager I see that Thunderbird does not obey the \"Do not delete\" policy and goes on with the deletion of some messages. Version 6.0.2 Windows.\n\n\nExpected results:\n\nThunderbird should respect my choice of not deleting ANY messages at all.\n\nIs there an option to see specifically which messages are deleted? I only get the total number for each group.", "tags": [], "bug_id": 693668, "text": "User Agent: Mozilla/5.0 (Windows NT 5.1; rv:7.0.1) Gecko/20100101 Firefox/7.0.1\nBuild ID: 20110928134238\n\nSteps to reproduce:\n\nI intend to use Thunderbird as an offline NNTP reader.\n\nI have set the NNTP account settings to \"Do not delete any messages\" and made sure (to the best of my knowledge and hours spent researching) that there is no hidden option that could somehow circumvent this (\"Remove bodies...\" is also unchecked).\n\nI have also disabled the junk filter.\n\n\n\nActual results:\n\nIn the Activity manager I see that Thunderbird does not obey the \"Do not delete\" policy and goes on with the deletion of some messages. Version 6.0.2 Windows.\n\n\nExpected results:\n\nThunderbird should respect my choice of not deleting ANY messages at all.\n\nIs there an option to see specifically which messages are deleted? I only get the total number for each group."}, {"tags": [], "bug_id": 693668, "text": "From where does it delete the messages? Your local offline copies of them? Can you attach screenshot of your settings. There is Offline & disk space config tab per account, There also may be some global setting in preferences. There are also per folder retention settings (see them in right-click on folder).", "attachment_id": null, "raw_text": "From where does it delete the messages? Your local offline copies of them? Can you attach screenshot of your settings. There is Offline & disk space config tab per account, There also may be some global setting in preferences. There are also per folder retention settings (see them in right-click on folder).", "creator": "acelists@atlas.sk", "creation_time": "2011-10-12T07:58:14Z", "time": "2011-10-12T07:58:14Z", "author": "acelists@atlas.sk", "is_private": false, "count": 1, "id": 5776879}, {"creator": "pnixte@gmail.com", "time": "2011-10-12T08:59:43Z", "creation_time": "2011-10-12T08:59:43Z", "author": "pnixte@gmail.com", "bug_id": 693668, "text": "Yes, it says it deletes the local offline copies.\n\nAttached are 4 screenshots. Note that the group file in \\Data\\profile\\News\\newsserver-5 is 20MB, the .dat file is 1 Kb and the .msf is 3MB.", "tags": [], "is_private": false, "attachment_id": null, "count": 2, "id": 5776945, "raw_text": "Yes, it says it deletes the local offline copies.\n\nAttached are 4 screenshots. Note that the group file in \\Data\\profile\\News\\newsserver-5 is 20MB, the .dat file is 1 Kb and the .msf is 3MB."}, {"creator": "pnixte@gmail.com", "time": "2011-10-12T09:00:34Z", "creation_time": "2011-10-12T09:00:34Z", "author": "pnixte@gmail.com", "is_private": false, "count": 3, "id": 5776946, "tags": [], "text": "Created attachment 566469\naccount settings", "bug_id": 693668, "attachment_id": 566469, "raw_text": ""}, {"attachment_id": 566470, "raw_text": "", "tags": [], "bug_id": 693668, "text": "Created attachment 566470\nactivity manager", "id": 5776947, "count": 4, "is_private": false, "time": "2011-10-12T09:01:03Z", "creation_time": "2011-10-12T09:01:03Z", "creator": "pnixte@gmail.com", "author": "pnixte@gmail.com"}, {"attachment_id": 566471, "raw_text": "", "tags": [], "text": "Created attachment 566471\ndisk space properties", "bug_id": 693668, "is_private": false, "count": 5, "id": 5776949, "creator": "pnixte@gmail.com", "creation_time": "2011-10-12T09:01:28Z", "time": "2011-10-12T09:01:28Z", "author": "pnixte@gmail.com"}, {"author": "pnixte@gmail.com", "creator": "pnixte@gmail.com", "creation_time": "2011-10-12T09:01:53Z", "time": "2011-10-12T09:01:53Z", "is_private": false, "id": 5776952, "count": 6, "tags": [], "text": "Created attachment 566472\nfolder properties", "bug_id": 693668, "raw_text": "", "attachment_id": 566472}, {"is_private": false, "count": 7, "id": 5777298, "creator": "Pidgeot18@gmail.com", "time": "2011-10-12T14:07:07Z", "creation_time": "2011-10-12T14:07:07Z", "author": "Pidgeot18@gmail.com", "attachment_id": null, "raw_text": "Are the newsgroups set up for offline storage?", "tags": [], "text": "Are the newsgroups set up for offline storage?", "bug_id": 693668}, {"count": 8, "id": 5777322, "is_private": false, "author": "acelists@atlas.sk", "time": "2011-10-12T14:16:36Z", "creation_time": "2011-10-12T14:16:36Z", "creator": "acelists@atlas.sk", "raw_text": "That would be the \"select newsgroups for offline use...\" button on attachment 566469 ?", "attachment_id": null, "tags": [], "text": "That would be the \"select newsgroups for offline use...\" button on attachment 566469 ?", "bug_id": 693668}, {"id": 5777730, "count": 9, "is_private": false, "creation_time": "2011-10-12T16:41:09Z", "time": "2011-10-12T16:41:09Z", "creator": "pnixte@gmail.com", "author": "pnixte@gmail.com", "attachment_id": null, "raw_text": "Yes, they are and the offline browsing works as it should be.\n\nAlthough, a funny thing I just noticed. \nIn the attachment for the \"item offline settings\" (to be uploaded now) there is the number of unread messages next to the newsgroup name. I do not know whether this is the correct behavior or has anything critical to do with this bug.", "text": "Yes, they are and the offline browsing works as it should be.\n\nAlthough, a funny thing I just noticed. \nIn the attachment for the \"item offline settings\" (to be uploaded now) there is the number of unread messages next to the newsgroup name. I do not know whether this is the correct behavior or has anything critical to do with this bug.", "bug_id": 693668, "tags": []}, {"id": 5777732, "count": 10, "is_private": false, "author": "pnixte@gmail.com", "time": "2011-10-12T16:41:45Z", "creation_time": "2011-10-12T16:41:45Z", "creator": "pnixte@gmail.com", "raw_text": "", "attachment_id": 566571, "tags": [], "text": "Created attachment 566571\nitems for offline use", "bug_id": 693668}, {"tags": [], "text": "Does it still happen in Thunderbird 8?\nAlso, can you somehow determine which messages are being deleted? Is it possible they are deleted from the server and TB is just syncing to that (I am not sure this applies to newsgroups, just an idea). Do you have any other means to look on the state on the server?", "bug_id": 693668, "attachment_id": null, "raw_text": "Does it still happen in Thunderbird 8?\nAlso, can you somehow determine which messages are being deleted? Is it possible they are deleted from the server and TB is just syncing to that (I am not sure this applies to newsgroups, just an idea). Do you have any other means to look on the state on the server?", "creator": "acelists@atlas.sk", "time": "2011-11-25T15:29:24Z", "creation_time": "2011-11-25T15:29:24Z", "author": "acelists@atlas.sk", "is_private": false, "count": 11, "id": 5872316}, {"author": "pnixte@gmail.com", "creator": "pnixte@gmail.com", "creation_time": "2011-11-26T10:59:36Z", "time": "2011-11-26T10:59:36Z", "is_private": false, "id": 5873422, "count": 12, "tags": [], "bug_id": 693668, "text": "> Does it still happen in Thunderbird 8?\nUnfortunately, yes, it still does. In the last comment there is (finally) the reason why this happens. But bear with me for a minute...\n\n> Also, can you somehow determine which messages are being deleted? \nIt happens to *some* (not all) old messages in *some* (not all) groups.\n\n> Is it possible they are deleted from the server and TB is just syncing to that\nMost of the messages are long expired on the server but they remain accessible locally (offline) through Thunderbird. Also I \"star\" all messages before closing the program and I have the option \"never delete starred messages\" always checked in order to use Thunderbird as an *offline* newsreader. Also, I have switched on/off the variable \"mailnews.offline_sync_news\" to no avail.\n\n\n> Do you have any other means to look on the state on the server?\nI tried snooping around the network traffic and discovered (possibly) the real reason this happens.\n\n\nHere is the showdown (according to a meticulous net snooping):\n\n- The program correctly sends a \"XOVER\" message for the new messages of the group\n(\"XOVER 1112-1129\") and the server responds with an Overview (headers of the particular messages).\n\n- Then, the program sends \"ARTICLE 1024\" (which corresponds to an \"ancient\" message that should have been *already* stored the last time Thunderbird run (articles are kept on the server for 14 days and Thunderbird runs every 2-3 days) and the server responds with a \"No such article\". This means that Thunderbird had only the headers of the message (through the Overview response) but did not bother storing the body within the period of 14 days that the article remains on the server.\n- Ditto for articles 1027, 1038, 1043 (for a total of 4 \"ancient\" articles) which is also what the Activity Manager reports as \"Messages that were deleted\".\n\n- However, the body of article 1067 which is \"ancient\" as well but has not been deleted from the server is retrieved and stored normally.\n- Ditto for the bodies of articles 1069, 1072, 1074 and 1081.\n\n- Thunderbird goes on and retrieves all the bodies from the XOVER command, that is articles 1112-1129.\n- However, some bodies are NOT stored in the mbox file that Thunderbird keeps locally (name_of_newsgroup). In this session, while article 1125 was correctly retrieved from the server (network dump testifies for that), its body was *not* stored in the mbox file. Thus, when I tried to read the article through Thunderbird I was presented with the message \"The body of this message has not been downloaded from the server for reading offline. To read this message, you must reconnect to the network, choose Offline from the File menu and then uncheck Work Offline...\"\n- Ditto for articles 1113, 1114, 1117, 1118, 1120 and 1122.\n\n- That means that I have to go \"serial accessing\" each and every message in the group in order to test for non-stored articles (then connect to the server in order to retrieve and store the body of the article) which is a tedious process and frankly a bit of a deal-breaker for Thunderbird use (I read hundreds of newsgroups and the serial inspection of each and every message retrieved in each and every group I subscribe to is absolutely unrealistic).\n\n\nHope to have helped pinpoint the bug.", "raw_text": "> Does it still happen in Thunderbird 8?\nUnfortunately, yes, it still does. In the last comment there is (finally) the reason why this happens. But bear with me for a minute...\n\n> Also, can you somehow determine which messages are being deleted? \nIt happens to *some* (not all) old messages in *some* (not all) groups.\n\n> Is it possible they are deleted from the server and TB is just syncing to that\nMost of the messages are long expired on the server but they remain accessible locally (offline) through Thunderbird. Also I \"star\" all messages before closing the program and I have the option \"never delete starred messages\" always checked in order to use Thunderbird as an *offline* newsreader. Also, I have switched on/off the variable \"mailnews.offline_sync_news\" to no avail.\n\n\n> Do you have any other means to look on the state on the server?\nI tried snooping around the network traffic and discovered (possibly) the real reason this happens.\n\n\nHere is the showdown (according to a meticulous net snooping):\n\n- The program correctly sends a \"XOVER\" message for the new messages of the group\n(\"XOVER 1112-1129\") and the server responds with an Overview (headers of the particular messages).\n\n- Then, the program sends \"ARTICLE 1024\" (which corresponds to an \"ancient\" message that should have been *already* stored the last time Thunderbird run (articles are kept on the server for 14 days and Thunderbird runs every 2-3 days) and the server responds with a \"No such article\". This means that Thunderbird had only the headers of the message (through the Overview response) but did not bother storing the body within the period of 14 days that the article remains on the server.\n- Ditto for articles 1027, 1038, 1043 (for a total of 4 \"ancient\" articles) which is also what the Activity Manager reports as \"Messages that were deleted\".\n\n- However, the body of article 1067 which is \"ancient\" as well but has not been deleted from the server is retrieved and stored normally.\n- Ditto for the bodies of articles 1069, 1072, 1074 and 1081.\n\n- Thunderbird goes on and retrieves all the bodies from the XOVER command, that is articles 1112-1129.\n- However, some bodies are NOT stored in the mbox file that Thunderbird keeps locally (name_of_newsgroup). In this session, while article 1125 was correctly retrieved from the server (network dump testifies for that), its body was *not* stored in the mbox file. Thus, when I tried to read the article through Thunderbird I was presented with the message \"The body of this message has not been downloaded from the server for reading offline. To read this message, you must reconnect to the network, choose Offline from the File menu and then uncheck Work Offline...\"\n- Ditto for articles 1113, 1114, 1117, 1118, 1120 and 1122.\n\n- That means that I have to go \"serial accessing\" each and every message in the group in order to test for non-stored articles (then connect to the server in order to retrieve and store the body of the article) which is a tedious process and frankly a bit of a deal-breaker for Thunderbird use (I read hundreds of newsgroups and the serial inspection of each and every message retrieved in each and every group I subscribe to is absolutely unrealistic).\n\n\nHope to have helped pinpoint the bug.", "attachment_id": null}, {"creation_time": "2011-11-26T11:02:23Z", "time": "2011-11-26T11:02:23Z", "creator": "pnixte@gmail.com", "author": "pnixte@gmail.com", "id": 5873423, "count": 13, "is_private": false, "tags": [], "bug_id": 693668, "text": "> - However, the body of article 1067 which is \"ancient\" as well but has not\n> been deleted from the server is retrieved and stored normally.\n> - Ditto for the bodies of articles 1069, 1072, 1074 and 1081.\n\nIn this part, I mean that Thunderbird sends to the server the commands \"ARTICLE 1067\", \"ARTICLE 1069\", \"ARTICLE 1072\", \"ARTICLE 1074\" and \"ARTICLE 1081\", before it goes and retrieves the bodies of the articles from the \"XOVER\" command.", "attachment_id": null, "raw_text": "> - However, the body of article 1067 which is \"ancient\" as well but has not\n> been deleted from the server is retrieved and stored normally.\n> - Ditto for the bodies of articles 1069, 1072, 1074 and 1081.\n\nIn this part, I mean that Thunderbird sends to the server the commands \"ARTICLE 1067\", \"ARTICLE 1069\", \"ARTICLE 1072\", \"ARTICLE 1074\" and \"ARTICLE 1081\", before it goes and retrieves the bodies of the articles from the \"XOVER\" command."}, {"attachment_id": null, "raw_text": "Thanks for the thorough examination. I'll try to move the bug to the appropriate component.", "text": "Thanks for the thorough examination. I'll try to move the bug to the appropriate component.", "bug_id": 693668, "tags": [], "id": 5873457, "count": 14, "is_private": false, "creation_time": "2011-11-26T11:56:24Z", "time": "2011-11-26T11:56:24Z", "creator": "acelists@atlas.sk", "author": "acelists@atlas.sk"}, {"raw_text": "Joshua, thoughts?  confirmed bug?", "attachment_id": null, "tags": [], "bug_id": 693668, "text": "Joshua, thoughts?  confirmed bug?", "is_private": false, "id": 6446376, "count": 15, "author": "vseerror@lehigh.edu", "creator": "vseerror@lehigh.edu", "creation_time": "2012-07-05T12:09:56Z", "time": "2012-07-05T12:09:56Z"}, {"attachment_id": null, "raw_text": "Waiting for Joshua's input, I would like to add that this bug still persists in Thunderbird 13.0.1.", "text": "Waiting for Joshua's input, I would like to add that this bug still persists in Thunderbird 13.0.1.", "bug_id": 693668, "tags": [], "id": 6446689, "count": 16, "is_private": false, "creation_time": "2012-07-05T14:49:17Z", "time": "2012-07-05T14:49:17Z", "creator": "pnixte@gmail.com", "author": "pnixte@gmail.com"}, {"raw_text": "(In reply to pnixte from comment #16)\n> Waiting for Joshua's input, I would like to add that this bug still persists\n> in Thunderbird 13.0.1.", "id": 7563910, "count": 17, "attachment_id": null, "is_private": false, "bug_id": 693668, "text": "(In reply to pnixte from comment #16)\n> Waiting for Joshua's input, I would like to add that this bug still persists\n> in Thunderbird 13.0.1.", "tags": [], "author": "vseerror@lehigh.edu", "creation_time": "2013-06-22T13:10:22Z", "time": "2013-06-22T13:10:22Z", "creator": "vseerror@lehigh.edu"}, {"bug_id": 693668, "text": "It sounds like the real problem is that we don't automatically download bodies for offline retention in newsgroups, which I don't think we've ever supported, but which I think is worthwhile to support.", "tags": [], "raw_text": "It sounds like the real problem is that we don't automatically download bodies for offline retention in newsgroups, which I don't think we've ever supported, but which I think is worthwhile to support.", "attachment_id": null, "author": "Pidgeot18@gmail.com", "time": "2013-06-22T19:59:09Z", "creation_time": "2013-06-22T19:59:09Z", "creator": "Pidgeot18@gmail.com", "count": 18, "id": 7564397, "is_private": false}]}}}