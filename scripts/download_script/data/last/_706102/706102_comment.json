{"comments": {}, "bugs": {"706102": {"comments": [{"bug_id": 706102, "text": "User Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:10.0a2) Gecko/20111127 Firefox/10.0a2\nBuild ID: 20111127042022\n\nSteps to reproduce:\n\nWhen using a css gradient, hovering the value should show a tooltip. \n(a color swatch seems too minimal for gradients).", "tags": [], "attachment_id": null, "raw_text": "User Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:10.0a2) Gecko/20111127 Firefox/10.0a2\nBuild ID: 20111127042022\n\nSteps to reproduce:\n\nWhen using a css gradient, hovering the value should show a tooltip. \n(a color swatch seems too minimal for gradients).", "time": "2011-11-29T15:07:57Z", "creation_time": "2011-11-29T15:07:57Z", "creator": "domi.papin@gmail.com", "author": "domi.papin@gmail.com", "count": 0, "id": 5878826, "is_private": false}, {"creation_time": "2012-01-11T13:29:29Z", "time": "2012-01-11T13:29:29Z", "creator": "michael@ratcliffefamily.org", "author": "michael@ratcliffefamily.org", "id": 5971791, "count": 1, "is_private": false, "tags": [], "bug_id": 706102, "text": "Bug triage, filter on PEGASUS.", "attachment_id": null, "raw_text": "Bug triage, filter on PEGASUS."}, {"raw_text": "This is part of our Q4 goal on doorhangers (tooltips).\nSee the roadmap here: https://gist.github.com/captainbrosset/6681978\n\nThe goal here is to display a gradient swatch next to the css gradient expression (depends on bug 918716 for this) and, when clicking on it, display a gradient editor doorhanger.", "attachment_id": null, "bug_id": 706102, "text": "This is part of our Q4 goal on doorhangers (tooltips).\nSee the roadmap here: https://gist.github.com/captainbrosset/6681978\n\nThe goal here is to display a gradient swatch next to the css gradient expression (depends on bug 918716 for this) and, when clicking on it, display a gradient editor doorhanger.", "tags": [], "id": 7945152, "count": 2, "is_private": false, "author": "patrickbrosset+bugzilla@gmail.com", "time": "2013-10-10T12:02:19Z", "creation_time": "2013-10-10T12:02:19Z", "creator": "patrickbrosset+bugzilla@gmail.com"}, {"author": "patrickbrosset+bugzilla@gmail.com", "creator": "patrickbrosset+bugzilla@gmail.com", "creation_time": "2013-11-06T08:53:06Z", "time": "2013-11-06T08:53:06Z", "is_private": false, "id": 8046374, "count": 3, "tags": [], "bug_id": 706102, "text": "Bug 889638 is ongoing, and will add, when it lands, a color picker tooltip that look somewhat liks this: http://people.mozilla.org/~pbrosset/tooltips/color-picker.png\n\nI suggest that we use the same color picker widget, but evolve the UI a little bit to show the gradient panel itself with color stops, and allow to add/remove/drag stops and change their colors with the same picker. A very very basic mockup: http://people.mozilla.org/~pbrosset/tooltips/gradient-editor.png", "raw_text": "Bug 889638 is ongoing, and will add, when it lands, a color picker tooltip that look somewhat liks this: http://people.mozilla.org/~pbrosset/tooltips/color-picker.png\n\nI suggest that we use the same color picker widget, but evolve the UI a little bit to show the gradient panel itself with color stops, and allow to add/remove/drag stops and change their colors with the same picker. A very very basic mockup: http://people.mozilla.org/~pbrosset/tooltips/gradient-editor.png", "attachment_id": null}, {"raw_text": "", "attachment_id": null, "text": "*** Bug 711943 has been marked as a duplicate of this bug. ***", "bug_id": 706102, "tags": [], "is_private": false, "count": 4, "id": 8046377, "author": "patrickbrosset+bugzilla@gmail.com", "creator": "patrickbrosset+bugzilla@gmail.com", "time": "2013-11-06T08:54:04Z", "creation_time": "2013-11-06T08:54:04Z"}, {"tags": [], "bug_id": 706102, "text": "Created attachment 8421208\nwebkit-gradient.gif\n\nA pretty amazing gradient editor tooltip landed in webkit nightly.", "raw_text": "A pretty amazing gradient editor tooltip landed in webkit nightly.", "attachment_id": 8421208, "author": "patrickbrosset+bugzilla@gmail.com", "creator": "patrickbrosset+bugzilla@gmail.com", "creation_time": "2014-05-12T19:55:16Z", "time": "2014-05-12T19:55:16Z", "is_private": false, "id": 8782256, "count": 5}, {"attachment_id": null, "raw_text": "While looking at Tooltip.js, I realized that it contains some left over code that isn't used:\n\nhttps://github.com/mozilla/gecko-dev/blob/master/browser/devtools/shared/widgets/Tooltip.js#L1065\nand\nhttps://github.com/mozilla/gecko-dev/blob/master/browser/devtools/shared/widgets/Tooltip.js#L1073\n\nThese 2 functions were originally added because the logic to choose which tooltip should be shown when hovering over some element was in this file. But there are so many different consumers to the tooltip API that it didn't make sense to keep this there. These 2 functions should be removed.\n\nI'm only mentioning this here because for this bug we'll have to detect gradient expressions in the style inspector, and this code used to deal with this.", "bug_id": 706102, "text": "While looking at Tooltip.js, I realized that it contains some left over code that isn't used:\n\nhttps://github.com/mozilla/gecko-dev/blob/master/browser/devtools/shared/widgets/Tooltip.js#L1065\nand\nhttps://github.com/mozilla/gecko-dev/blob/master/browser/devtools/shared/widgets/Tooltip.js#L1073\n\nThese 2 functions were originally added because the logic to choose which tooltip should be shown when hovering over some element was in this file. But there are so many different consumers to the tooltip API that it didn't make sense to keep this there. These 2 functions should be removed.\n\nI'm only mentioning this here because for this bug we'll have to detect gradient expressions in the style inspector, and this code used to deal with this.", "tags": [], "is_private": false, "id": 8785114, "count": 6, "creator": "patrickbrosset+bugzilla@gmail.com", "creation_time": "2014-05-13T09:54:59Z", "time": "2014-05-13T09:54:59Z", "author": "patrickbrosset+bugzilla@gmail.com"}, {"author": "bgrinstead@mozilla.com", "creation_time": "2014-05-19T23:24:48Z", "time": "2014-05-19T23:24:48Z", "creator": "bgrinstead@mozilla.com", "id": 8812691, "count": 7, "is_private": false, "tags": [], "text": "Some information about possible implementation taken from a chat with pbrosset:\n\n> In tooltip.js, we need a new SwatchBasedTooltip class - GradientEditorTooltip or something like this which inherits from the SwatchBased thing\n> This takes care of linking a set of swatches to a tooltip and then up to you to put what you want in the tooltip\n> I suggest focusing on the standlone editor first, like we have spectrum so that it's easy to work on it and test it individually\n> And then embedding it in a tooltip is going to be a piece of cake - the famous \"it should only take a minute\"!\n\nThe takeaway was that we should focus on a gradient editor component outside of a tooltip at first to make development and testing easier, then we should add this to a tooltip later.", "bug_id": 706102, "raw_text": "Some information about possible implementation taken from a chat with pbrosset:\n\n> In tooltip.js, we need a new SwatchBasedTooltip class - GradientEditorTooltip or something like this which inherits from the SwatchBased thing\n> This takes care of linking a set of swatches to a tooltip and then up to you to put what you want in the tooltip\n> I suggest focusing on the standlone editor first, like we have spectrum so that it's easy to work on it and test it individually\n> And then embedding it in a tooltip is going to be a piece of cake - the famous \"it should only take a minute\"!\n\nThe takeaway was that we should focus on a gradient editor component outside of a tooltip at first to make development and testing easier, then we should add this to a tooltip later.", "attachment_id": null}, {"tags": [], "text": "After discussing with bgrins, I am interested in working on this", "bug_id": 706102, "raw_text": "After discussing with bgrins, I am interested in working on this", "attachment_id": null, "author": "alexharris6@gmail.com", "creator": "alexharris6@gmail.com", "creation_time": "2014-05-21T22:03:31Z", "time": "2014-05-21T22:03:31Z", "is_private": false, "id": 8824601, "count": 8}, {"attachment_id": null, "raw_text": "I have put together a basic plan for this here: https://pastebin.mozilla.org/5221306\n\nA few other things to keep in mind, from a conversation I had with bgrins:\n\n1. How to correctly get CSS linear-gradient() properties from element. Regex? Bgrins: \"we may be able to ask gecko about the position of the stops being used for a particular gradient.\"\n2. Issues surrounding the position of colorstops that use pixels as opposed to percentages in the css. Perhaps by converting them to percentages when they are received.\n2. Pre-populating new handles (ghost handles) with the color at that location. Bgrins: \"use a canvas with the grad drawn and get the color from that\"", "tags": [], "bug_id": 706102, "text": "I have put together a basic plan for this here: https://pastebin.mozilla.org/5221306\n\nA few other things to keep in mind, from a conversation I had with bgrins:\n\n1. How to correctly get CSS linear-gradient() properties from element. Regex? Bgrins: \"we may be able to ask gecko about the position of the stops being used for a particular gradient.\"\n2. Issues surrounding the position of colorstops that use pixels as opposed to percentages in the css. Perhaps by converting them to percentages when they are received.\n2. Pre-populating new handles (ghost handles) with the color at that location. Bgrins: \"use a canvas with the grad drawn and get the color from that\"", "is_private": false, "id": 8835755, "count": 9, "creator": "alexharris6@gmail.com", "creation_time": "2014-05-23T19:42:29Z", "time": "2014-05-23T19:42:29Z", "author": "alexharris6@gmail.com"}, {"creator": "bgrinstead@mozilla.com", "creation_time": "2014-05-29T14:00:05Z", "time": "2014-05-29T14:00:05Z", "author": "bgrinstead@mozilla.com", "is_private": false, "id": 8857802, "count": 10, "text": "So when initially opening the tooltip, we will want to have a list of color stops prepopulated.  Parsing it with js seems pretty nasty, esp taking into account rules for old syntax gradients.\n\nJonathan, I was wondering if there was a function in the platform or if you had any ideas that could help converting a gradient string into a more structured interpretation of the gradient.\n\nI've put together a demo of some of the gradient types that we care about at: http://jsfiddle.net/bgrins/9MxNS/.\n\nHere are some examples of the expected input and output from such a function (these are negotiable, just my current thoughts on what we would want returned).\n\n1) Basic support for percentage based stops:\n\n  Input: \"linear-gradient(to bottom, red 0%, yellow 100%)\"\n  Output: {\n    angle: \"180deg\",\n    stops: [\n      {color:\"red\",position:0},\n      {color:\"yellow\",position:1}\n    ]\n  }\n\n2) It would be awesome if this included position information when it was not defined:\n\n  Input: \"linear-gradient(to right, red, orange, yellow, green)\"\n  Output: {\n    angle: \"90deg\",\n    stops: [\n      {color:\"red\",position:0},\n      {color:\"orange\",position:.333},\n      {color:\"yellow\",position:.666},\n      {color:\"green\",position:1},\n    ]\n  }\n\n3) Handling unordered color stops.  I'm not actually sure how to best represent this in a gradient editor - it seems that it is solid red until 40%, then the interpolation from green 10% to yellow 100% takes over.  Regardless, I guess the function should just return them in order.\n\n  Input: \"linear-gradient(to right, red 40%, green 10%, yellow)\"\n  Output: {\n    angle: \"90deg\",\n    stops: [\n      {color:\"red\", position: .4 },\n      {color:\"green\", position: .1 },\n      {color:\"yellow\", position:.9}\n    ]\n  }\n\n4) I *think* we would want to even include percentage based positional information when a non-percent unit was passed in, but if it came back as \"10px\", \"5em\", etc we should be to do the conversion on the client side.\n\n  Input: \"linear-gradient(to right, red 10px, yellow 5em, green 90%)\"\n  Output: {\n    angle: \"90deg\",\n    stops: [\n      {color:\"red\", position: .05 }, // 10px converted to percentage\n      {color:\"orange\", position: .25 }, // 5em converted to percentage\n      {color:\"green\", position:.9}\n    ]\n  }\n\n5) Radial Gradients - I haven't dug in as much as to exactly what we need here, but probably something similar that includes <position>, <shape>, <size>, <extent-keyword> to go along with the stops instead of just <angle>.", "bug_id": 706102, "tags": [], "attachment_id": null, "raw_text": "So when initially opening the tooltip, we will want to have a list of color stops prepopulated.  Parsing it with js seems pretty nasty, esp taking into account rules for old syntax gradients.\n\nJonathan, I was wondering if there was a function in the platform or if you had any ideas that could help converting a gradient string into a more structured interpretation of the gradient.\n\nI've put together a demo of some of the gradient types that we care about at: http://jsfiddle.net/bgrins/9MxNS/.\n\nHere are some examples of the expected input and output from such a function (these are negotiable, just my current thoughts on what we would want returned).\n\n1) Basic support for percentage based stops:\n\n  Input: \"linear-gradient(to bottom, red 0%, yellow 100%)\"\n  Output: {\n    angle: \"180deg\",\n    stops: [\n      {color:\"red\",position:0},\n      {color:\"yellow\",position:1}\n    ]\n  }\n\n2) It would be awesome if this included position information when it was not defined:\n\n  Input: \"linear-gradient(to right, red, orange, yellow, green)\"\n  Output: {\n    angle: \"90deg\",\n    stops: [\n      {color:\"red\",position:0},\n      {color:\"orange\",position:.333},\n      {color:\"yellow\",position:.666},\n      {color:\"green\",position:1},\n    ]\n  }\n\n3) Handling unordered color stops.  I'm not actually sure how to best represent this in a gradient editor - it seems that it is solid red until 40%, then the interpolation from green 10% to yellow 100% takes over.  Regardless, I guess the function should just return them in order.\n\n  Input: \"linear-gradient(to right, red 40%, green 10%, yellow)\"\n  Output: {\n    angle: \"90deg\",\n    stops: [\n      {color:\"red\", position: .4 },\n      {color:\"green\", position: .1 },\n      {color:\"yellow\", position:.9}\n    ]\n  }\n\n4) I *think* we would want to even include percentage based positional information when a non-percent unit was passed in, but if it came back as \"10px\", \"5em\", etc we should be to do the conversion on the client side.\n\n  Input: \"linear-gradient(to right, red 10px, yellow 5em, green 90%)\"\n  Output: {\n    angle: \"90deg\",\n    stops: [\n      {color:\"red\", position: .05 }, // 10px converted to percentage\n      {color:\"orange\", position: .25 }, // 5em converted to percentage\n      {color:\"green\", position:.9}\n    ]\n  }\n\n5) Radial Gradients - I haven't dug in as much as to exactly what we need here, but probably something similar that includes <position>, <shape>, <size>, <extent-keyword> to go along with the stops instead of just <angle>."}, {"count": 11, "id": 8858679, "is_private": false, "creation_time": "2014-05-29T16:33:21Z", "time": "2014-05-29T16:33:21Z", "creator": "jwatt@jwatt.org", "author": "jwatt@jwatt.org", "attachment_id": null, "raw_text": "I think what you really need is a DOM for CSS gradients. Tab, is there any work on that?", "tags": [], "bug_id": 706102, "text": "I think what you really need is a DOM for CSS gradients. Tab, is there any work on that?"}, {"attachment_id": null, "raw_text": "(nsComputedDOMStyle::GetCSSGradientString shows iteration over the internal structures.)", "text": "(nsComputedDOMStyle::GetCSSGradientString shows iteration over the internal structures.)", "bug_id": 706102, "tags": [], "count": 12, "id": 8858693, "is_private": false, "creation_time": "2014-05-29T16:35:13Z", "time": "2014-05-29T16:35:13Z", "creator": "jwatt@jwatt.org", "author": "jwatt@jwatt.org"}, {"text": "So apparently there is no specification for a DOM for complex CSS values like the transform property because they're waiting on CSS Value Objects:\n\n  http://wiki.ecmascript.org/doku.php?id=strawman:value_objects\n\nAs far as I can tell the main bug on file related to implementing that is bug 749786.\n\nIt would be a fair bit of work to expose some temporary object model just for devtools, so the best path forward is likely to have your own parser written in JS for now.", "bug_id": 706102, "tags": [], "raw_text": "So apparently there is no specification for a DOM for complex CSS values like the transform property because they're waiting on CSS Value Objects:\n\n  http://wiki.ecmascript.org/doku.php?id=strawman:value_objects\n\nAs far as I can tell the main bug on file related to implementing that is bug 749786.\n\nIt would be a fair bit of work to expose some temporary object model just for devtools, so the best path forward is likely to have your own parser written in JS for now.", "attachment_id": null, "author": "jwatt@jwatt.org", "creator": "jwatt@jwatt.org", "time": "2014-05-29T18:02:42Z", "creation_time": "2014-05-29T18:02:42Z", "is_private": false, "count": 13, "id": 8859354}, {"count": 14, "id": 8859440, "is_private": false, "creation_time": "2014-05-29T18:18:32Z", "time": "2014-05-29T18:18:32Z", "creator": "jwatt@jwatt.org", "author": "jwatt@jwatt.org", "attachment_id": null, "raw_text": "I suppose the tricky bit may be getting the 'gradient box' ( http://dev.w3.org/csswg/css-images-3/#gradient-box ). I'm not sure the size of getBoundingClientRect gets you what you need.", "bug_id": 706102, "text": "I suppose the tricky bit may be getting the 'gradient box' ( http://dev.w3.org/csswg/css-images-3/#gradient-box ). I'm not sure the size of getBoundingClientRect gets you what you need.", "tags": []}, {"tags": [], "text": "Created attachment 8466792\ngradient_picker_i03.png\n\nMockup", "bug_id": 706102, "attachment_id": 8466792, "raw_text": "Mockup", "creator": "ntim.bugs@gmail.com", "creation_time": "2014-08-03T15:47:58Z", "time": "2014-08-03T15:47:58Z", "author": "ntim.bugs@gmail.com", "is_private": false, "count": 15, "id": 9134811}, {"tags": [], "text": "Maybe we could use something like this as a start point:\nhttps://github.com/rafaelcaricio/gradient-inspector/blob/master/gradient_inspector.js", "bug_id": 706102, "attachment_id": null, "raw_text": "Maybe we could use something like this as a start point:\nhttps://github.com/rafaelcaricio/gradient-inspector/blob/master/gradient_inspector.js", "creation_time": "2014-09-01T10:23:38Z", "time": "2014-09-01T10:23:38Z", "creator": "michael@ratcliffefamily.org", "author": "michael@ratcliffefamily.org", "count": 16, "id": 9254227, "is_private": false}, {"raw_text": "Found this design : http://static.tumblr.com/8dw0uyw/RpOnh3de2/feature_4.jpg\nIt looks really cool, I think we could use an UI like that as well.", "attachment_id": null, "bug_id": 706102, "text": "Found this design : http://static.tumblr.com/8dw0uyw/RpOnh3de2/feature_4.jpg\nIt looks really cool, I think we could use an UI like that as well.", "tags": [], "is_private": false, "count": 17, "id": 9734535, "author": "ntim.bugs@gmail.com", "creator": "ntim.bugs@gmail.com", "creation_time": "2014-12-26T19:41:47Z", "time": "2014-12-26T19:41:47Z"}, {"id": 9734581, "count": 18, "is_private": false, "author": "ntim.bugs@gmail.com", "creation_time": "2014-12-26T19:56:07Z", "time": "2014-12-26T19:56:07Z", "creator": "ntim.bugs@gmail.com", "raw_text": "Here's what can be used to parse the gradient : https://github.com/rafaelcaricio/gradient-parser", "attachment_id": null, "tags": [], "bug_id": 706102, "text": "Here's what can be used to parse the gradient : https://github.com/rafaelcaricio/gradient-parser"}, {"bug_id": 706102, "text": "Chrome DevTools recently posted a set of ideas about what they call \"devtools for designers\". One of the entries is about editing gradients: https://trello.com/c/30RNIE2J/2-gradient-designer\nThe screenshot seems to show an in-content tool to create the gradient by dragging a line tool to set the angle and span of the gradient, just like in photoshop, which I think, is pretty awesome.", "tags": [], "raw_text": "Chrome DevTools recently posted a set of ideas about what they call \"devtools for designers\". One of the entries is about editing gradients: https://trello.com/c/30RNIE2J/2-gradient-designer\nThe screenshot seems to show an in-content tool to create the gradient by dragging a line tool to set the angle and span of the gradient, just like in photoshop, which I think, is pretty awesome.", "attachment_id": null, "author": "patrickbrosset+bugzilla@gmail.com", "creator": "patrickbrosset+bugzilla@gmail.com", "time": "2015-02-25T10:02:46Z", "creation_time": "2015-02-25T10:02:46Z", "is_private": false, "id": 9955506, "count": 19}, {"count": 20, "id": 9955509, "is_private": false, "time": "2015-02-25T10:03:54Z", "creation_time": "2015-02-25T10:03:54Z", "creator": "patrickbrosset+bugzilla@gmail.com", "author": "patrickbrosset+bugzilla@gmail.com", "attachment_id": null, "raw_text": "Alex, do you still plan to work on this bug? It's been a while.", "tags": [], "text": "Alex, do you still plan to work on this bug? It's been a while.", "bug_id": 706102}, {"author": "patrickbrosset+bugzilla@gmail.com", "time": "2015-02-25T14:45:54Z", "creation_time": "2015-02-25T14:45:54Z", "creator": "patrickbrosset+bugzilla@gmail.com", "id": 9956467, "count": 21, "is_private": false, "bug_id": 706102, "text": "(In reply to Patrick Brosset [:pbrosset] [:patrick] from comment #19)\n> Chrome DevTools recently posted a set of ideas about what they call\n> \"devtools for designers\". One of the entries is about editing gradients:\n> https://trello.com/c/30RNIE2J/2-gradient-designer\n> The screenshot seems to show an in-content tool to create the gradient by\n> dragging a line tool to set the angle and span of the gradient, just like in\n> photoshop, which I think, is pretty awesome.\nSomething like this: http://codepen.io/captainbrosset/full/XJqQwV/", "tags": [], "raw_text": "(In reply to Patrick Brosset [:pbrosset] [:patrick] from comment #19)\n> Chrome DevTools recently posted a set of ideas about what they call\n> \"devtools for designers\". One of the entries is about editing gradients:\n> https://trello.com/c/30RNIE2J/2-gradient-designer\n> The screenshot seems to show an in-content tool to create the gradient by\n> dragging a line tool to set the angle and span of the gradient, just like in\n> photoshop, which I think, is pretty awesome.\nSomething like this: http://codepen.io/captainbrosset/full/XJqQwV/", "attachment_id": null}, {"is_private": false, "id": 10032033, "count": 22, "author": "ntim.bugs@gmail.com", "creator": "ntim.bugs@gmail.com", "time": "2015-03-15T22:37:12Z", "creation_time": "2015-03-15T22:37:12Z", "raw_text": "It's been 10 months now, let's unassign this.", "attachment_id": null, "text": "It's been 10 months now, let's unassign this.", "bug_id": 706102, "tags": []}, {"attachment_id": null, "raw_text": "Inspector bug triage (filter on CLIMBING SHOES).", "tags": [], "bug_id": 706102, "text": "Inspector bug triage (filter on CLIMBING SHOES).", "id": 11541455, "count": 23, "is_private": false, "time": "2016-07-12T12:48:40Z", "creation_time": "2016-07-12T12:48:40Z", "creator": "patrickbrosset+bugzilla@gmail.com", "author": "patrickbrosset+bugzilla@gmail.com"}]}}}