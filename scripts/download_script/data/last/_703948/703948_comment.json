{"comments": {}, "bugs": {"703948": {"comments": [{"creator": "brian@briansmith.org", "author": "brian@briansmith.org", "raw_text": "+++ This bug was initially created as a clone of Bug #703946 +++\n\nIt seems like there are a few components that are using thread pools. Also, I am adding a thread pool to PSM in bug 674147.\n\nIt seems rather wasteful to have several components creating threads that are often going to be idle. At the same time, I bet many components (like PSM) don't want to add the thread creation latency to every single dispatch, so they want to have *some* idle threads waiting around.\n\nIf we have a shared thread pool with a documented worker thread stack size, that had a hard limit for the number of threads, then each component could do the following:\n\n* Try to dispatch the job to the shared thread pool. If it succeeds, nothing else needs to be done.\n* Otherwise, if the shared thread pool returned a \"no free threads available to run your job\" indication, then the component can dispatch the job to its own private thread pool. (This is necessary to prevent other components from starving us.)\n* Assume that starvation issues are rare, and decrease the sizes and idle timeouts for the private thread pools. I imagine that most components would be able to let their private thread pools idle at zero threads most of the time.", "creation_time": "2011-11-20T04:22:33Z", "text": "+++ This bug was initially created as a clone of Bug #703946 +++\n\nIt seems like there are a few components that are using thread pools. Also, I am adding a thread pool to PSM in bug 674147.\n\nIt seems rather wasteful to have several components creating threads that are often going to be idle. At the same time, I bet many components (like PSM) don't want to add the thread creation latency to every single dispatch, so they want to have *some* idle threads waiting around.\n\nIf we have a shared thread pool with a documented worker thread stack size, that had a hard limit for the number of threads, then each component could do the following:\n\n* Try to dispatch the job to the shared thread pool. If it succeeds, nothing else needs to be done.\n* Otherwise, if the shared thread pool returned a \"no free threads available to run your job\" indication, then the component can dispatch the job to its own private thread pool. (This is necessary to prevent other components from starving us.)\n* Assume that starvation issues are rare, and decrease the sizes and idle timeouts for the private thread pools. I imagine that most components would be able to let their private thread pools idle at zero threads most of the time.", "attachment_id": null, "time": "2011-11-20T04:22:33Z", "tags": [], "is_private": false, "count": 0, "id": 5860983, "bug_id": 703948}, {"id": 5866609, "is_private": false, "count": 1, "tags": [], "bug_id": 703948, "creation_time": "2011-11-22T22:17:02Z", "raw_text": "We can re-prioritize if we get measurements showing this will be good.", "time": "2011-11-22T22:17:02Z", "attachment_id": null, "text": "We can re-prioritize if we get measurements showing this will be good.", "author": "n.nethercote@gmail.com", "creator": "n.nethercote@gmail.com"}, {"author": "doug.turner@gmail.com", "creator": "doug.turner@gmail.com", "attachment_id": null, "time": "2013-01-22T03:28:25Z", "text": "fwiw, we have code now using the stream transport service's thread pool.  (namely device storage and ipc blob)", "raw_text": "fwiw, we have code now using the stream transport service's thread pool.  (namely device storage and ipc blob)", "creation_time": "2013-01-22T03:28:25Z", "bug_id": 703948, "id": 7024342, "is_private": false, "count": 2, "tags": []}]}}}