{"bugs": {"693136": {"comments": [{"count": 0, "bug_id": 693136, "raw_text": "User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:7.0.1) Gecko/20100101 Firefox/7.0.1\nBuild ID: 20110930134335\n\nSteps to reproduce:\n\nI am using several VPNs for my work and when the traffic is routed through the VPN, some systems use internal IPs that are not available publicly but only in the VPN.\n\n\nActual results:\n\nAfter disconnecting from the VPN I could no longer access these systems because FF was trying to reach them on their internal VPN and fails to refresh the DNS cache.\n\n\nExpected results:\n\nDNS cache should get invalid after the network connection changes. As this is hard to implement properly cross-platform, having an option to disable DNS caching in Preferences -> Advanced -> Network would be a good start. Having to work around this by adding two undocumented keys in about:config is not an option.\n\nAnd if caching is enabled, reloading a page with CTRL+SHIFT+R should send a new DNS query rather than using the cached DNS", "attachment_id": null, "id": 5769837, "creator": "cwickert@fedoraproject.org", "is_private": false, "tags": [], "time": "2011-10-09T09:55:00Z", "text": "User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:7.0.1) Gecko/20100101 Firefox/7.0.1\nBuild ID: 20110930134335\n\nSteps to reproduce:\n\nI am using several VPNs for my work and when the traffic is routed through the VPN, some systems use internal IPs that are not available publicly but only in the VPN.\n\n\nActual results:\n\nAfter disconnecting from the VPN I could no longer access these systems because FF was trying to reach them on their internal VPN and fails to refresh the DNS cache.\n\n\nExpected results:\n\nDNS cache should get invalid after the network connection changes. As this is hard to implement properly cross-platform, having an option to disable DNS caching in Preferences -> Advanced -> Network would be a good start. Having to work around this by adding two undocumented keys in about:config is not an option.\n\nAnd if caching is enabled, reloading a page with CTRL+SHIFT+R should send a new DNS query rather than using the cached DNS", "author": "cwickert@fedoraproject.org", "creation_time": "2011-10-09T09:55:00Z"}, {"author": "cwickert@fedoraproject.org", "creation_time": "2011-10-09T09:55:53Z", "bug_id": 693136, "time": "2011-10-09T09:55:53Z", "tags": [], "text": "(In reply to Christoph Wickert from comment #0)\n> FF was trying to reach them on their internal VPN and [...]\n\ns/VPN/IP", "creator": "cwickert@fedoraproject.org", "is_private": false, "count": 1, "id": 5769838, "attachment_id": null, "raw_text": "(In reply to Christoph Wickert from comment #0)\n> FF was trying to reach them on their internal VPN and [...]\n\ns/VPN/IP"}, {"is_private": false, "creator": "bugzilla@mversen.de", "creation_time": "2011-10-09T16:52:58Z", "author": "bugzilla@mversen.de", "text": "Clearing the DNS cache on a neztwork change would also fix the bug report about wireless hotspot redirects.I guess that adding just another option in the preferences would be too much for such a special case.", "time": "2011-10-09T16:52:58Z", "tags": [], "attachment_id": null, "raw_text": "Clearing the DNS cache on a neztwork change would also fix the bug report about wireless hotspot redirects.I guess that adding just another option in the preferences would be too much for such a special case.", "id": 5770146, "count": 2, "bug_id": 693136}, {"id": 5770519, "raw_text": "The problem is detecting that something changed - the current code only detects when all network configuration is lost or re-enabled. Not every other change (change in routing, change in proxyserver, ...) is detected this way, although a change in ipaddress should.", "attachment_id": null, "text": "The problem is detecting that something changed - the current code only detects when all network configuration is lost or re-enabled. Not every other change (change in routing, change in proxyserver, ...) is detected this way, although a change in ipaddress should.", "time": "2011-10-09T22:33:25Z", "tags": [], "creation_time": "2011-10-09T22:33:25Z", "author": "jo.hermans@gmail.com", "is_private": false, "creator": "jo.hermans@gmail.com", "bug_id": 693136, "count": 3}, {"bug_id": 693136, "count": 4, "id": 5770542, "raw_text": "see bug 664266", "attachment_id": null, "tags": [], "time": "2011-10-09T22:45:16Z", "text": "see bug 664266", "author": "bugzilla@mversen.de", "creation_time": "2011-10-09T22:45:16Z", "creator": "bugzilla@mversen.de", "is_private": false}, {"id": 5770551, "attachment_id": null, "raw_text": "I have to admit that I'm not familiar with the code, but I doubt there is code that can detect connection changes reliably cross plattform. And even if there might be users who want to disable DNS caching all together for reasons we are not thinking about. This is why I ask for a configuration option in the settings.", "author": "cwickert@fedoraproject.org", "creation_time": "2011-10-09T22:58:00Z", "tags": [], "time": "2011-10-09T22:58:00Z", "bug_id": 693136, "text": "I have to admit that I'm not familiar with the code, but I doubt there is code that can detect connection changes reliably cross plattform. And even if there might be users who want to disable DNS caching all together for reasons we are not thinking about. This is why I ask for a configuration option in the settings.", "creator": "cwickert@fedoraproject.org", "is_private": false, "count": 5}, {"id": 5770554, "raw_text": "Possibly, but not every user will be able not find that setting in the preferences, or know what it means. Bug 664266 might indeed help for a very common error (wifi portals), but there should be more automated version too.\n\nFor example: I'm using my proxy-server setting (a PAC file loaded from the network) all the time, even when I'm not on a network. The proxy-code detect that it can not reach the PAC-file, and thus decide not to use it at all (it's not cached), only direct connections. Unfortunately, it only does that at startup, not when waking from sleep, or even in the middle of my browsing session.", "attachment_id": null, "tags": [], "time": "2011-10-09T23:05:34Z", "bug_id": 693136, "text": "Possibly, but not every user will be able not find that setting in the preferences, or know what it means. Bug 664266 might indeed help for a very common error (wifi portals), but there should be more automated version too.\n\nFor example: I'm using my proxy-server setting (a PAC file loaded from the network) all the time, even when I'm not on a network. The proxy-code detect that it can not reach the PAC-file, and thus decide not to use it at all (it's not cached), only direct connections. Unfortunately, it only does that at startup, not when waking from sleep, or even in the middle of my browsing session.", "author": "jo.hermans@gmail.com", "creation_time": "2011-10-09T23:05:34Z", "count": 6, "creator": "jo.hermans@gmail.com", "is_private": false}, {"count": 7, "creator": "bzbarsky@mit.edu", "is_private": false, "bug_id": 693136, "time": "2011-10-10T04:53:52Z", "tags": [], "text": "This isn't a networking issue.  Networking already has a configuration option here; you even mention it in comment 0!\n\nWhat you're asking for is adding Firefox UI to expose this preference, right?", "author": "bzbarsky@mit.edu", "creation_time": "2011-10-10T04:53:52Z", "raw_text": "This isn't a networking issue.  Networking already has a configuration option here; you even mention it in comment 0!\n\nWhat you're asking for is adding Firefox UI to expose this preference, right?", "attachment_id": null, "id": 5770802}, {"id": 5771311, "attachment_id": null, "raw_text": "(In reply to Boris Zbarsky (:bz) from comment #7)\n> This isn't a networking issue.  \n\nI think it is. Disabling the cache is only a workaround, the cache should be cleared automatically on network changes.\n\n> Networking already has a configuration\n> option here; you even mention it in comment 0!\n\nI'd hardly call adding two keys to about:config a \"configuration option\". ;)\n\n> What you're asking for is adding Firefox UI to expose this preference, right?\n\nRight, as a workaround or starting point. Should we clone this bug and assign one to Networking and the other to Preferences?", "author": "cwickert@fedoraproject.org", "creation_time": "2011-10-10T13:58:06Z", "bug_id": 693136, "tags": [], "time": "2011-10-10T13:58:06Z", "text": "(In reply to Boris Zbarsky (:bz) from comment #7)\n> This isn't a networking issue.  \n\nI think it is. Disabling the cache is only a workaround, the cache should be cleared automatically on network changes.\n\n> Networking already has a configuration\n> option here; you even mention it in comment 0!\n\nI'd hardly call adding two keys to about:config a \"configuration option\". ;)\n\n> What you're asking for is adding Firefox UI to expose this preference, right?\n\nRight, as a workaround or starting point. Should we clone this bug and assign one to Networking and the other to Preferences?", "creator": "cwickert@fedoraproject.org", "is_private": false, "count": 8}, {"raw_text": "> the cache should be cleared automatically on network changes. \n\nSure, but that's not what the summary and comment 0 are about.  A separate bug on that would make sense; it's completely separate from the question of surfacing UI for the existing \"turn off the DNS cache\" preference.\n\n> I'd hardly call adding two keys to about:config a \"configuration option\". ;)\n\nAgain, the networking component has configuration options that can be used to disable the DNS cache.  Since the networking component has no UI, obviously, the only way it can have \"configuration options\" is to have preferences that someone sets.  Your issue is that the particular UI in Firefox doesn't have an obvious way to set these preferences.", "attachment_id": null, "id": 5771555, "count": 9, "creator": "bzbarsky@mit.edu", "is_private": false, "time": "2011-10-10T15:20:30Z", "bug_id": 693136, "tags": [], "text": "> the cache should be cleared automatically on network changes. \n\nSure, but that's not what the summary and comment 0 are about.  A separate bug on that would make sense; it's completely separate from the question of surfacing UI for the existing \"turn off the DNS cache\" preference.\n\n> I'd hardly call adding two keys to about:config a \"configuration option\". ;)\n\nAgain, the networking component has configuration options that can be used to disable the DNS cache.  Since the networking component has no UI, obviously, the only way it can have \"configuration options\" is to have preferences that someone sets.  Your issue is that the particular UI in Firefox doesn't have an obvious way to set these preferences.", "author": "bzbarsky@mit.edu", "creation_time": "2011-10-10T15:20:30Z"}]}}, "comments": {}}