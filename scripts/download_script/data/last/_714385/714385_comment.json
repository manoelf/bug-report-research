{"bugs": {"714385": {"comments": [{"author": "bruce.lilly@gmail.com", "creator": "bruce.lilly@gmail.com", "creation_time": "2011-12-31T00:25:18Z", "time": "2011-12-31T00:25:18Z", "is_private": false, "count": 0, "id": 5947871, "tags": [], "text": "User Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/534.34 (KHTML, like Gecko) konqueror/4.7.2 Safari/534.34\n\nSteps to reproduce:\n\nFirst-time install of Bugzilla version 4.0.3 (not listed in Version pulldown of Bugzilla Bugzilla form...) with PostgreSQL version 9.1.1 on openSUSE 12.1 Linux following instructions in http://www.bugzilla.org/docs/4.0/en/html/configuration.html\n\n\nActual results:\n\nchecksetup.pl reports:\n\nThere was an error connecting to PostgreSQL:\n\n\nExpected results:\n\nchecksetup.pl should have proceeded to set up initial database.\nTwo issues: 1.(this bug) PostgreSQL by default doesn't listen on TCP/IP; listen_addresses must be configured in postgresql.conf (and PostgreSQL restarted).\n2.  Section 2.2.2.3.2 says to \"add\" a line to pg_hba.conf, however it may be necessary to \"insert\" said line before existing lines specifying \"ident\" authentication, or \"replace\" said line.\n\nUpdating the installation document to cover these two points might save others some debugging time.", "bug_id": 714385, "raw_text": "User Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/534.34 (KHTML, like Gecko) konqueror/4.7.2 Safari/534.34\n\nSteps to reproduce:\n\nFirst-time install of Bugzilla version 4.0.3 (not listed in Version pulldown of Bugzilla Bugzilla form...) with PostgreSQL version 9.1.1 on openSUSE 12.1 Linux following instructions in http://www.bugzilla.org/docs/4.0/en/html/configuration.html\n\n\nActual results:\n\nchecksetup.pl reports:\n\nThere was an error connecting to PostgreSQL:\n\n\nExpected results:\n\nchecksetup.pl should have proceeded to set up initial database.\nTwo issues: 1.(this bug) PostgreSQL by default doesn't listen on TCP/IP; listen_addresses must be configured in postgresql.conf (and PostgreSQL restarted).\n2.  Section 2.2.2.3.2 says to \"add\" a line to pg_hba.conf, however it may be necessary to \"insert\" said line before existing lines specifying \"ident\" authentication, or \"replace\" said line.\n\nUpdating the installation document to cover these two points might save others some debugging time.", "attachment_id": null}, {"is_private": false, "count": 1, "id": 5947945, "creator": "LpSolit@gmail.com", "time": "2011-12-31T01:24:50Z", "creation_time": "2011-12-31T01:24:50Z", "author": "LpSolit@gmail.com", "attachment_id": null, "raw_text": "listen_addresses must only be set if remote connections are desired. Else this is not needed, as specified in the PostgreSQL documentation:\n\nhttp://www.postgresql.org/docs/9.1/static/auth-pg-hba-conf.html\n\n\"Remote TCP/IP connections will not be possible unless the server is started with an appropriate value for the listen_addresses configuration parameter, since the default behavior is to listen for TCP/IP connections only on the local loopback address localhost.\"", "tags": [], "text": "listen_addresses must only be set if remote connections are desired. Else this is not needed, as specified in the PostgreSQL documentation:\n\nhttp://www.postgresql.org/docs/9.1/static/auth-pg-hba-conf.html\n\n\"Remote TCP/IP connections will not be possible unless the server is started with an appropriate value for the listen_addresses configuration parameter, since the default behavior is to listen for TCP/IP connections only on the local loopback address localhost.\"", "bug_id": 714385}, {"is_private": false, "count": 2, "id": 5948105, "author": "bruce.lilly@gmail.com", "creator": "bruce.lilly@gmail.com", "time": "2011-12-31T05:01:38Z", "creation_time": "2011-12-31T05:01:38Z", "raw_text": "checksetup.pl reported that it tried the configured static IP address for the host and 127.0.0.2 (not the usual 127.0.0.1).  netstat -tap showed postgresql listening on port 5432 (but that screen is long gone, so I can't see the bindings).  I troubleshot using pgadmin, which also couldn't connect but which pointed to listen_addresses.  Setting listen_addresses fixed the issue for me.\n\nifconfig shows lo as 127.0.0.1 mask 255.0.0.0; I'm guessing that there's something peculiar about postgresql that causes it to listen *only* on 127.0.0.1 by default rather than observing the netmask (which is the same as it was implicitly in pre-CIDR days) for localhost.", "attachment_id": null, "text": "checksetup.pl reported that it tried the configured static IP address for the host and 127.0.0.2 (not the usual 127.0.0.1).  netstat -tap showed postgresql listening on port 5432 (but that screen is long gone, so I can't see the bindings).  I troubleshot using pgadmin, which also couldn't connect but which pointed to listen_addresses.  Setting listen_addresses fixed the issue for me.\n\nifconfig shows lo as 127.0.0.1 mask 255.0.0.0; I'm guessing that there's something peculiar about postgresql that causes it to listen *only* on 127.0.0.1 by default rather than observing the netmask (which is the same as it was implicitly in pre-CIDR days) for localhost.", "bug_id": 714385, "tags": []}, {"creator": "gerv@mozilla.org", "time": "2014-12-04T01:20:34Z", "creation_time": "2014-12-04T01:20:34Z", "author": "gerv@mozilla.org", "is_private": false, "count": 3, "id": 9659053, "tags": [], "bug_id": 714385, "text": "So the problem is that if your loopback address is not 127.0.0.1, postgres doesn't listen on the right address?\n\nGerv", "attachment_id": null, "raw_text": "So the problem is that if your loopback address is not 127.0.0.1, postgres doesn't listen on the right address?\n\nGerv"}, {"raw_text": "No, the problem is that Bugzilla checksetup.pl and documentation are inadequate for some situations.\n\nN.B. the Postgres database server might be a different machine from the one running bugzilla.", "attachment_id": null, "bug_id": 714385, "text": "No, the problem is that Bugzilla checksetup.pl and documentation are inadequate for some situations.\n\nN.B. the Postgres database server might be a different machine from the one running bugzilla.", "tags": [], "count": 4, "id": 9662287, "is_private": false, "author": "bruce.lilly@gmail.com", "time": "2014-12-05T01:01:46Z", "creation_time": "2014-12-05T01:01:46Z", "creator": "bruce.lilly@gmail.com"}]}}, "comments": {}}