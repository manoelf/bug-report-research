{"bugs": {"651478": {"comments": [{"creation_time": "2011-04-20T13:15:43Z", "bug_id": 651478, "raw_text": "Currently you can obsolete custom fields, which always removes them from the UI.  I'd like the ability to deactivate custom fields, which would remove them from the UI unless a value has been set.", "tags": [], "creator": "glob@mozilla.com", "attachment_id": null, "is_private": false, "text": "Currently you can obsolete custom fields, which always removes them from the UI.  I'd like the ability to deactivate custom fields, which would remove them from the UI unless a value has been set.", "count": 0, "time": "2011-04-20T13:15:43Z", "author": "glob@mozilla.com", "id": 5421080}, {"id": 5421516, "time": "2011-04-20T16:58:20Z", "is_private": false, "tags": [], "raw_text": "That should be how obsoleting works, ideally. Perhaps display it read-only if it had a value set? Or some option? Not quite sure. I suppose it would help to know--what's the use case?", "creation_time": "2011-04-20T16:58:20Z", "bug_id": 651478, "author": "mkanat@bugzilla.org", "count": 1, "text": "That should be how obsoleting works, ideally. Perhaps display it read-only if it had a value set? Or some option? Not quite sure. I suppose it would help to know--what's the use case?", "attachment_id": null, "creator": "mkanat@bugzilla.org"}, {"is_private": false, "tags": [], "creation_time": "2011-04-20T17:05:20Z", "bug_id": 651478, "raw_text": "(In reply to comment #1)\n> what's the use case?\n\nwe're using custom fields as multi-state flags, so we need to be able to deactivate old ones but still have them visible on old bugs.", "id": 5421535, "time": "2011-04-20T17:05:20Z", "attachment_id": null, "creator": "glob@mozilla.com", "author": "glob@mozilla.com", "text": "(In reply to comment #1)\n> what's the use case?\n\nwe're using custom fields as multi-state flags, so we need to be able to deactivate old ones but still have them visible on old bugs.", "count": 2}, {"attachment_id": null, "is_private": false, "creation_time": "2011-04-20T18:41:42Z", "bug_id": 651478, "raw_text": "Okay. I think obsoleting should just work the way that you want. If the field is set to some value that isn't the \"empty\" value, it should simply be displayed, much like how flags work now.", "tags": [], "creator": "mkanat@bugzilla.org", "time": "2011-04-20T18:41:42Z", "author": "mkanat@bugzilla.org", "id": 5421859, "text": "Okay. I think obsoleting should just work the way that you want. If the field is set to some value that isn't the \"empty\" value, it should simply be displayed, much like how flags work now.", "count": 3}, {"time": "2011-04-20T22:35:48Z", "id": 5422607, "is_private": false, "creation_time": "2011-04-20T22:35:48Z", "bug_id": 651478, "raw_text": "This would be annoying, because if you have a custom field which you no longer use, it would be visible in the UI forever (you are not going to remove text from free text forms, and there is no empty value for single-select fields).", "tags": [], "author": "LpSolit@gmail.com", "text": "This would be annoying, because if you have a custom field which you no longer use, it would be visible in the UI forever (you are not going to remove text from free text forms, and there is no empty value for single-select fields).", "count": 4, "attachment_id": null, "creator": "LpSolit@gmail.com"}, {"time": "2011-04-21T00:53:20Z", "id": 5423091, "is_private": false, "raw_text": "\"---\" is the empty value for single-select fields.\n\nMy suggestion (and this may be clearer now that I've thought about it more) is that they behave like disabled flags.", "bug_id": 651478, "creation_time": "2011-04-21T00:53:20Z", "tags": [], "author": "mkanat@bugzilla.org", "text": "\"---\" is the empty value for single-select fields.\n\nMy suggestion (and this may be clearer now that I've thought about it more) is that they behave like disabled flags.", "count": 5, "attachment_id": null, "creator": "mkanat@bugzilla.org"}, {"id": 5423449, "time": "2011-04-21T07:38:42Z", "author": "LpSolit@gmail.com", "count": 6, "text": "(In reply to comment #5)\n> My suggestion (and this may be clearer now that I've thought about it more) is\n> that they behave like disabled flags.\n\nOK, but this should be a separate option from hidding them entirely. Because when you don't use a custom field at all and it has no historical interest, even displaying them as read-only may be confusing to users. So we would have both \"obsolete\" and \"deactivate\" as options.", "is_private": false, "attachment_id": null, "tags": [], "creator": "LpSolit@gmail.com", "creation_time": "2011-04-21T07:38:42Z", "bug_id": 651478, "raw_text": "(In reply to comment #5)\n> My suggestion (and this may be clearer now that I've thought about it more) is\n> that they behave like disabled flags.\n\nOK, but this should be a separate option from hidding them entirely. Because when you don't use a custom field at all and it has no historical interest, even displaying them as read-only may be confusing to users. So we would have both \"obsolete\" and \"deactivate\" as options."}, {"attachment_id": null, "creator": "mkanat@bugzilla.org", "author": "mkanat@bugzilla.org", "text": "I thought about that. I think that glob's case is actually more common--I suspect that in the case where a custom field isn't used at all, it will be set to the \"empty\" value on most bugs and thus will disappear. Also, you could do a mass-change to set all bugs to the empty value and make them all disappear if you really wanted to.", "count": 7, "is_private": false, "tags": [], "raw_text": "I thought about that. I think that glob's case is actually more common--I suspect that in the case where a custom field isn't used at all, it will be set to the \"empty\" value on most bugs and thus will disappear. Also, you could do a mass-change to set all bugs to the empty value and make them all disappear if you really wanted to.", "creation_time": "2011-04-21T19:03:06Z", "bug_id": 651478, "id": 5424690, "time": "2011-04-21T19:03:06Z"}, {"bug_id": 651478, "creation_time": "2011-05-23T05:09:22Z", "raw_text": "(In reply to comment #6)\n> OK, but this should be a separate option from hidding them entirely. Because\n> when you don't use a custom field at all and it has no historical interest,\n> even displaying them as read-only may be confusing to users.\n\nif that's the case, why wouldn't you simply delete the field?", "tags": [], "creator": "glob@mozilla.com", "attachment_id": null, "is_private": false, "count": 8, "text": "(In reply to comment #6)\n> OK, but this should be a separate option from hidding them entirely. Because\n> when you don't use a custom field at all and it has no historical interest,\n> even displaying them as read-only may be confusing to users.\n\nif that's the case, why wouldn't you simply delete the field?", "time": "2011-05-23T05:09:22Z", "author": "glob@mozilla.com", "id": 5485840}, {"id": 5485952, "time": "2011-05-23T08:20:51Z", "tags": [], "bug_id": 651478, "creation_time": "2011-05-23T08:20:51Z", "raw_text": "(In reply to comment #8)\n> if that's the case, why wouldn't you simply delete the field?\n\noh, because you can't drop the column if it has ever been used due to entries in the activity table.", "is_private": false, "count": 9, "text": "(In reply to comment #8)\n> if that's the case, why wouldn't you simply delete the field?\n\noh, because you can't drop the column if it has ever been used due to entries in the activity table.", "author": "glob@mozilla.com", "creator": "glob@mozilla.com", "attachment_id": null}, {"attachment_id": null, "creator": "mkanat@bugzilla.org", "author": "mkanat@bugzilla.org", "text": "  But you could still set them all manually to empty to make the field disappear, so we don't need a separate option.", "count": 10, "is_private": false, "raw_text": "  But you could still set them all manually to empty to make the field disappear, so we don't need a separate option.", "creation_time": "2011-05-23T19:21:11Z", "bug_id": 651478, "tags": [], "time": "2011-05-23T19:21:11Z", "id": 5487225}, {"tags": [], "bug_id": 651478, "creation_time": "2011-06-07T05:34:30Z", "raw_text": "general consensus is to:\n  - change 'delete' to actually remove the field from the database\n  - change/rename 'obsolete' to hide the field from the UI unless there's a value set\n\nwhen the field is removed from the database we still need to retain entries in the bugs_activity, which implies that the fielddefs row will also need to be retained (but marked as obsolete).\n\nfielddefs has a uniqueness constraint on name, so to allow recreation of identically named fields we should also rename the fielddefs entry to something like 'deleted_cf_test', 'deleted2_cf_test', ...", "is_private": false, "id": 5516881, "time": "2011-06-07T05:34:30Z", "creator": "glob@mozilla.com", "attachment_id": null, "count": 11, "text": "general consensus is to:\n  - change 'delete' to actually remove the field from the database\n  - change/rename 'obsolete' to hide the field from the UI unless there's a value set\n\nwhen the field is removed from the database we still need to retain entries in the bugs_activity, which implies that the fielddefs row will also need to be retained (but marked as obsolete).\n\nfielddefs has a uniqueness constraint on name, so to allow recreation of identically named fields we should also rename the fielddefs entry to something like 'deleted_cf_test', 'deleted2_cf_test', ...", "author": "glob@mozilla.com"}, {"is_private": false, "creation_time": "2011-06-07T17:17:40Z", "bug_id": 651478, "raw_text": ">   - change 'delete' to actually remove the field from the database\n\n  That's actually what delete does now.\n\n>   - change/rename 'obsolete' to hide the field from the UI unless there's a\n> value set\n\n  Cool, that sounds great to me.\n\n> when the field is removed from the database we still need to retain entries\n> in the bugs_activity, which implies that the fielddefs row will also need to\n> be retained (but marked as obsolete).\n\n  For various reasons, if a field remains in fielddefs, you should not remove it from the bugs table.", "tags": [], "time": "2011-06-07T17:17:40Z", "id": 5517725, "attachment_id": null, "creator": "mkanat@bugzilla.org", "author": "mkanat@bugzilla.org", "count": 12, "text": ">   - change 'delete' to actually remove the field from the database\n\n  That's actually what delete does now.\n\n>   - change/rename 'obsolete' to hide the field from the UI unless there's a\n> value set\n\n  Cool, that sounds great to me.\n\n> when the field is removed from the database we still need to retain entries\n> in the bugs_activity, which implies that the fielddefs row will also need to\n> be retained (but marked as obsolete).\n\n  For various reasons, if a field remains in fielddefs, you should not remove it from the bugs table."}, {"id": 5517773, "time": "2011-06-07T17:30:03Z", "author": "glob@mozilla.com", "count": 13, "text": "(In reply to comment #12)\n> >   - change 'delete' to actually remove the field from the database\n> \n>   That's actually what delete does now.\n\nsorry, i'll rephrase:\n\n- change 'delete' to remove the field from the database even if there are values set.\n\n>   For various reasons, if a field remains in fielddefs, you should not\n> remove it from the bugs table.\n\nah, that puts a spanner in the works then.", "is_private": false, "attachment_id": null, "tags": [], "creator": "glob@mozilla.com", "bug_id": 651478, "creation_time": "2011-06-07T17:30:03Z", "raw_text": "(In reply to comment #12)\n> >   - change 'delete' to actually remove the field from the database\n> \n>   That's actually what delete does now.\n\nsorry, i'll rephrase:\n\n- change 'delete' to remove the field from the database even if there are values set.\n\n>   For various reasons, if a field remains in fielddefs, you should not\n> remove it from the bugs table.\n\nah, that puts a spanner in the works then."}]}}, "comments": {}}