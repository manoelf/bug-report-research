{"comments": {}, "bugs": {"707156": {"comments": [{"author": "pae9@star.le.ac.uk", "creation_time": "2011-12-02T14:38:47Z", "tags": [], "time": "2011-12-02T14:38:47Z", "text": "User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:7.0) Gecko/20100101 Firefox/7.0\nBuild ID: 2011092200\n\nSteps to reproduce:\n\nIf I log into area A and provided my credentials. Then I went to a page in area B with different credentials. Then I went back to a page in area A. \n\n\n\nActual results:\n\nAlthough all of the pages loaded OK, when I went back to area A after viewing area B, the error log on my apache server received new entries of the form:\n\n\"access to <some page> reason: user 'AREAB' does not meet 'requirements for user/valid-user to be allowed access\"\n\nWhere <some page> is a page in area A, but the user is the user for area B. i.e., although the page managed to load, Firefox clearly tried to use the credentials for area B at some point, even though it is looking for a page in area A. I tried the same process in another browser, and no errors appeared in the apache log, hence I think it's a Firefox issue.\n\n\nExpected results:\n\nThe pages should have loaded without generating apache errors, i.e. when accessing area A for the second time, Firefox should have sent only the area A credentials.", "creator": "pae9@star.le.ac.uk", "is_private": false, "id": 5888076, "attachment_id": null, "raw_text": "User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:7.0) Gecko/20100101 Firefox/7.0\nBuild ID: 2011092200\n\nSteps to reproduce:\n\nIf I log into area A and provided my credentials. Then I went to a page in area B with different credentials. Then I went back to a page in area A. \n\n\n\nActual results:\n\nAlthough all of the pages loaded OK, when I went back to area A after viewing area B, the error log on my apache server received new entries of the form:\n\n\"access to <some page> reason: user 'AREAB' does not meet 'requirements for user/valid-user to be allowed access\"\n\nWhere <some page> is a page in area A, but the user is the user for area B. i.e., although the page managed to load, Firefox clearly tried to use the credentials for area B at some point, even though it is looking for a page in area A. I tried the same process in another browser, and no errors appeared in the apache log, hence I think it's a Firefox issue.\n\n\nExpected results:\n\nThe pages should have loaded without generating apache errors, i.e. when accessing area A for the second time, Firefox should have sent only the area A credentials.", "bug_id": 707156, "count": 0}, {"count": 1, "bug_id": 707156, "creator": "fmdevelopertim@gmail.com", "is_private": false, "author": "fmdevelopertim@gmail.com", "creation_time": "2011-12-03T01:49:52Z", "time": "2011-12-03T01:49:52Z", "tags": [], "text": "Firefox isn't sending credentials - rather it is sending cookies. If the site uses the same cookie for the different sections, this is the expected result.\n\nTE?", "attachment_id": null, "raw_text": "Firefox isn't sending credentials - rather it is sending cookies. If the site uses the same cookie for the different sections, this is the expected result.\n\nTE?", "id": 5890089}, {"raw_text": "Phil -> Please provide a public URL or reduced test case that exhibits this issue.", "attachment_id": null, "id": 5955251, "count": 2, "creator": "fmdevelopertim@gmail.com", "is_private": false, "tags": [], "time": "2012-01-04T21:24:25Z", "bug_id": 707156, "text": "Phil -> Please provide a public URL or reduced test case that exhibits this issue.", "author": "fmdevelopertim@gmail.com", "creation_time": "2012-01-04T21:24:25Z"}, {"creation_time": "2012-01-05T08:21:03Z", "author": "pae9@star.le.ac.uk", "text": "\nTim,\nI can't provide a public URL for this unfortunately. \nHowever I can provide a simple reduced test case.\n\nCreate a basic apache config with areas thus: \n\n<Directory \"/some/path/areaa\">\n        Order allow,deny\n        Allow from all\n        AuthType Basic\n        AuthName \"Some test area\"\n        AuthUserFile /path/to/users_file\n        Require user ThisUser\n</Directory>\n\n<Directory \"/some/path/areab\">\n        Order allow,deny\n        Allow from all\n        AuthType Basic\n        AuthName \"Another secure area\"\n        AuthUserFile /path/to/users_file\n        Require user DifferentUser\n</Directory>\n\nThen in firefox, load the URL for \"areab\" and log in as \"DifferentUser\".\nAll OK.\n\nNow go to \"areaa\" in the browser and log in as \"ThisUser\". Also OK.\n\nNow go back to \"areab\"\nAlthough the page loads, I get the following in the apache error log:\n\n\"access to /areab failed, reason: user 'ThisUser' does not meet 'require'ments for user/valid-user to be allowed access\"\n\nCuriously, on Firefox 7.0 (packaged for OpenSuse 11.4), after doing\nthis, if I hit reload on area B, nothing gets added to the error log.\nHowever on Firefox 10.0 (from the Ubuntu firefox-next ppa), every time I hit reload, a new entry identical to that above appears in the error log. \n\nHope this helps.", "time": "2012-01-05T08:21:03Z", "bug_id": 707156, "tags": [], "is_private": false, "creator": "pae9@star.le.ac.uk", "count": 3, "id": 5956439, "attachment_id": null, "raw_text": "\nTim,\nI can't provide a public URL for this unfortunately. \nHowever I can provide a simple reduced test case.\n\nCreate a basic apache config with areas thus: \n\n<Directory \"/some/path/areaa\">\n        Order allow,deny\n        Allow from all\n        AuthType Basic\n        AuthName \"Some test area\"\n        AuthUserFile /path/to/users_file\n        Require user ThisUser\n</Directory>\n\n<Directory \"/some/path/areab\">\n        Order allow,deny\n        Allow from all\n        AuthType Basic\n        AuthName \"Another secure area\"\n        AuthUserFile /path/to/users_file\n        Require user DifferentUser\n</Directory>\n\nThen in firefox, load the URL for \"areab\" and log in as \"DifferentUser\".\nAll OK.\n\nNow go to \"areaa\" in the browser and log in as \"ThisUser\". Also OK.\n\nNow go back to \"areab\"\nAlthough the page loads, I get the following in the apache error log:\n\n\"access to /areab failed, reason: user 'ThisUser' does not meet 'require'ments for user/valid-user to be allowed access\"\n\nCuriously, on Firefox 7.0 (packaged for OpenSuse 11.4), after doing\nthis, if I hit reload on area B, nothing gets added to the error log.\nHowever on Firefox 10.0 (from the Ubuntu firefox-next ppa), every time I hit reload, a new entry identical to that above appears in the error log. \n\nHope this helps."}, {"is_private": false, "creator": "asqueella@gmail.com", "count": 4, "creation_time": "2012-04-02T21:58:07Z", "author": "asqueella@gmail.com", "text": "I didn't find an exact duplicate, but this seems similar to bug 515651, which is about navigating from http://host/pathA ->  http://host/pathB -> http://host/pathC (all having different realms) and getting pathA's credentials submitted to pathC.\n\nIt mentions RFC 2617 (\"clients should assume that all paths at or deeper than the depth of the last symbolic element in the path field of the Request-URI also are within the protection space specified by the Basic realm value of the current challenge.\"), but I'm unsure if that applies in your scenarion (areaB->areeA->areaB) or if the previously observed realm for areaB must be taken into consideration when picking the credentials to send.", "time": "2012-04-02T21:58:07Z", "tags": [], "bug_id": 707156, "attachment_id": null, "raw_text": "I didn't find an exact duplicate, but this seems similar to bug 515651, which is about navigating from http://host/pathA ->  http://host/pathB -> http://host/pathC (all having different realms) and getting pathA's credentials submitted to pathC.\n\nIt mentions RFC 2617 (\"clients should assume that all paths at or deeper than the depth of the last symbolic element in the path field of the Request-URI also are within the protection space specified by the Basic realm value of the current challenge.\"), but I'm unsure if that applies in your scenarion (areaB->areeA->areaB) or if the previously observed realm for areaB must be taken into consideration when picking the credentials to send.", "id": 6191498}, {"id": 12658232, "raw_text": "Bulk change to priority: https://bugzilla.mozilla.org/show_bug.cgi?id=1399258", "attachment_id": null, "text": "Bulk change to priority: https://bugzilla.mozilla.org/show_bug.cgi?id=1399258", "time": "2017-09-13T18:37:10Z", "tags": [], "bug_id": 707156, "creation_time": "2017-09-13T18:37:10Z", "author": "bug-husbandry-bot@mozilla.bugs", "count": 5, "is_private": false, "creator": "bug-husbandry-bot@mozilla.bugs"}, {"raw_text": "Bulk change to priority: https://bugzilla.mozilla.org/show_bug.cgi?id=1399258", "attachment_id": null, "id": 12659784, "count": 6, "is_private": false, "creator": "bug-husbandry-bot@mozilla.bugs", "text": "Bulk change to priority: https://bugzilla.mozilla.org/show_bug.cgi?id=1399258", "time": "2017-09-13T18:49:13Z", "tags": [], "bug_id": 707156, "creation_time": "2017-09-13T18:49:13Z", "author": "bug-husbandry-bot@mozilla.bugs"}, {"id": 13776292, "attachment_id": null, "raw_text": "I believe I am the initial reporter of this class of problems (bug 137852, 17 years ago) and can confirm a variation of this problem still exists using the Apache configuration listed in comment 3, but with different specifics.\n\nFirstly, this is working for me, assuming:\n /areaA is RealmA with userA/passA\n /areaB is RealmB with userB/passB\n\nAuthenticating as userA/RealmA at /areaA, works ok.\nAuthenticating as userB/RealmB at /areaB, works ok.\nI can now surf /areaA and /areaB freely (both simply show the directory index)\n\nHere is the problem:\nAuthenticate as userB/RealmA at /areaA, fails ok.\nAuthenticate as userA/RealmA at /areaA, works ok.\nAuthenticate as userA/RealmB at /areaB, fails ok.\nAuthenticate as userB/RealmB at /areaB, works ok.\nSurfing to /areaA now prompts for credentials.\n\nSomething in Firefox Quantum 63.0.3 (64-bit, Linux) appears to be confusing realm authentication failures beyond the scope of the realm being authenticated. In all cases, the Firefox prompt to save the credentials was declined. However, it does not appear that Firefox is first sending the wrong credentials.\n\nRegarding comment 4, the three-realm variation (areaC) also appears to work as described above.", "author": "ccurtis0@gmail.com", "creation_time": "2018-11-24T16:52:36Z", "time": "2018-11-24T16:52:36Z", "bug_id": 707156, "tags": [], "text": "I believe I am the initial reporter of this class of problems (bug 137852, 17 years ago) and can confirm a variation of this problem still exists using the Apache configuration listed in comment 3, but with different specifics.\n\nFirstly, this is working for me, assuming:\n /areaA is RealmA with userA/passA\n /areaB is RealmB with userB/passB\n\nAuthenticating as userA/RealmA at /areaA, works ok.\nAuthenticating as userB/RealmB at /areaB, works ok.\nI can now surf /areaA and /areaB freely (both simply show the directory index)\n\nHere is the problem:\nAuthenticate as userB/RealmA at /areaA, fails ok.\nAuthenticate as userA/RealmA at /areaA, works ok.\nAuthenticate as userA/RealmB at /areaB, fails ok.\nAuthenticate as userB/RealmB at /areaB, works ok.\nSurfing to /areaA now prompts for credentials.\n\nSomething in Firefox Quantum 63.0.3 (64-bit, Linux) appears to be confusing realm authentication failures beyond the scope of the realm being authenticated. In all cases, the Firefox prompt to save the credentials was declined. However, it does not appear that Firefox is first sending the wrong credentials.\n\nRegarding comment 4, the three-realm variation (areaC) also appears to work as described above.", "creator": "ccurtis0@gmail.com", "is_private": false, "count": 7}, {"raw_text": "I just experienced this, or very similar.\n\nLogged into a website I'm developing for using basic authentication,\n\n/areaA, RealmA as userA\n\nthen into\n\n/areaB, RealmB as userB\n\nNavigated back to /AreaA, did some browsing, and site appeared to time-out.  I though the server had gone down, but after some investigation and help from hosting company support, it turns out my IP address was blocked due to \"too many failed logins\".  Couldn't work out what that meant, since I hadn't experienced a \"failed login\".\n\nLooking at the Apache logs, though I can see that requests for files in /areaA are being made using the userB username, returning 401, and then getting immediately re-attempted with the userA username, whereupon they succeed.  This seems to happen for every file access.\n\nThis is a serious bug; I had to have my IP whitelisted just so I could use the site without being immediately re-blocked.\nI'm sure other users have had this happen, and not figured out why, or how to fix it.\n\nPlease fix!", "attachment_id": null, "id": 14482430, "creator": "f2424880@rmqkr.net", "is_private": false, "time": "2019-11-12T14:03:15Z", "tags": [], "text": "I just experienced this, or very similar.\n\nLogged into a website I'm developing for using basic authentication,\n\n/areaA, RealmA as userA\n\nthen into\n\n/areaB, RealmB as userB\n\nNavigated back to /AreaA, did some browsing, and site appeared to time-out.  I though the server had gone down, but after some investigation and help from hosting company support, it turns out my IP address was blocked due to \"too many failed logins\".  Couldn't work out what that meant, since I hadn't experienced a \"failed login\".\n\nLooking at the Apache logs, though I can see that requests for files in /areaA are being made using the userB username, returning 401, and then getting immediately re-attempted with the userA username, whereupon they succeed.  This seems to happen for every file access.\n\nThis is a serious bug; I had to have my IP whitelisted just so I could use the site without being immediately re-blocked.\nI'm sure other users have had this happen, and not figured out why, or how to fix it.\n\nPlease fix!", "author": "f2424880@rmqkr.net", "creation_time": "2019-11-12T14:03:15Z", "count": 8, "bug_id": 707156}]}}}