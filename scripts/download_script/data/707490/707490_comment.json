{"comments": {}, "bugs": {"707490": {"comments": [{"creation_time": "2011-12-04T10:21:00Z", "is_private": false, "creator": "jaws@mozilla.com", "tags": [], "attachment_id": null, "id": 5891223, "bug_id": 707490, "text": "When the unresponsive script dialog appears, it doesn't seem to matter how long I leave the dialog open. I can wait 10 seconds or 1 minute and once I hit \"continue\", then the browser will come back to life about 5 seconds later.\n\nThis leads me to believe that the unresponsive script dialog is pausing the script. If this is the case, the unresponsive script dialog should disappear if the script is able to finish before the user makes a decision.\n\nThis bug is especially painful if a user opens a webpage, walks away from their computer, and comes back and the loading of said webpage stopped early and thus still won't have finished until the user intervenes.\n\nTo reproduce this, log in to irccloud.com (see bug 703455) and wait a period of time before telling the script to \"continue\".", "count": 0, "author": "jaws@mozilla.com", "time": "2011-12-04T10:21:00Z", "raw_text": "When the unresponsive script dialog appears, it doesn't seem to matter how long I leave the dialog open. I can wait 10 seconds or 1 minute and once I hit \"continue\", then the browser will come back to life about 5 seconds later.\n\nThis leads me to believe that the unresponsive script dialog is pausing the script. If this is the case, the unresponsive script dialog should disappear if the script is able to finish before the user makes a decision.\n\nThis bug is especially painful if a user opens a webpage, walks away from their computer, and comes back and the loading of said webpage stopped early and thus still won't have finished until the user intervenes.\n\nTo reproduce this, log in to irccloud.com (see bug 703455) and wait a period of time before telling the script to \"continue\"."}, {"creator": "bugzilla@mversen.de", "text": ">I can wait 10 seconds or 1 minute and once I hit \"continue\", then the browser will \n>come back to life about 5 seconds later.\n\nI assume that this statement is based on your experience with the one single website irccloud.com ?\nThat the loop goes away seems to be a special case.\nMaybe the loop goes away due to a timeout from the website or the script is just a little bit too slow and triggers the dialog just before it's finished.\nIn nearly all cases you have a real loop and the browser will hang if you hit continue.\n\n>This leads me to believe that the unresponsive script dialog is pausing the script.\n>If this is the case, the unresponsive script dialog should disappear if the script \n>is able to finish before the user makes a decision.\n\nHow should the script finish if it's paused ?\nNote: The script have to be paused to show the dialog that can interact with the user.", "count": 1, "author": "bugzilla@mversen.de", "id": 5891969, "bug_id": 707490, "creation_time": "2011-12-05T03:00:28Z", "is_private": false, "time": "2011-12-05T03:00:28Z", "raw_text": ">I can wait 10 seconds or 1 minute and once I hit \"continue\", then the browser will \n>come back to life about 5 seconds later.\n\nI assume that this statement is based on your experience with the one single website irccloud.com ?\nThat the loop goes away seems to be a special case.\nMaybe the loop goes away due to a timeout from the website or the script is just a little bit too slow and triggers the dialog just before it's finished.\nIn nearly all cases you have a real loop and the browser will hang if you hit continue.\n\n>This leads me to believe that the unresponsive script dialog is pausing the script.\n>If this is the case, the unresponsive script dialog should disappear if the script \n>is able to finish before the user makes a decision.\n\nHow should the script finish if it's paused ?\nNote: The script have to be paused to show the dialog that can interact with the user.", "attachment_id": null, "tags": []}, {"id": 5892287, "bug_id": 707490, "author": "jaws@mozilla.com", "text": "(In reply to Matthias Versen (Matti - currently busy) from comment #1)\n> >I can wait 10 seconds or 1 minute and once I hit \"continue\", then the browser will \n> >come back to life about 5 seconds later.\n> \n> I assume that this statement is based on your experience with the one single\n> website irccloud.com ?\n\nYes, this is true.\n\n> >This leads me to believe that the unresponsive script dialog is pausing the script.\n> >If this is the case, the unresponsive script dialog should disappear if the script \n> >is able to finish before the user makes a decision.\n> \n> How should the script finish if it's paused ?\n> Note: The script have to be paused to show the dialog that can interact with\n> the user.\n\nYeah, I guess this is something that e10s could have fixed?", "count": 2, "raw_text": "(In reply to Matthias Versen (Matti - currently busy) from comment #1)\n> >I can wait 10 seconds or 1 minute and once I hit \"continue\", then the browser will \n> >come back to life about 5 seconds later.\n> \n> I assume that this statement is based on your experience with the one single\n> website irccloud.com ?\n\nYes, this is true.\n\n> >This leads me to believe that the unresponsive script dialog is pausing the script.\n> >If this is the case, the unresponsive script dialog should disappear if the script \n> >is able to finish before the user makes a decision.\n> \n> How should the script finish if it's paused ?\n> Note: The script have to be paused to show the dialog that can interact with\n> the user.\n\nYeah, I guess this is something that e10s could have fixed?", "time": "2011-12-05T09:55:47Z", "is_private": false, "creation_time": "2011-12-05T09:55:47Z", "creator": "jaws@mozilla.com", "tags": [], "attachment_id": null}, {"time": "2011-12-05T17:04:38Z", "raw_text": ">> Note: The script have to be paused to show the dialog that can interact with\n>> the user.\n>\n>Yeah, I guess this is something that e10s could have fixed?\n\nYes, I think this would be \"fixable\" by e10s but you would still have the problem that a loop often allocates a huge amount of memory.", "attachment_id": null, "tags": [], "creator": "bugzilla@mversen.de", "count": 3, "text": ">> Note: The script have to be paused to show the dialog that can interact with\n>> the user.\n>\n>Yeah, I guess this is something that e10s could have fixed?\n\nYes, I think this would be \"fixable\" by e10s but you would still have the problem that a loop often allocates a huge amount of memory.", "author": "bugzilla@mversen.de", "id": 5893005, "bug_id": 707490, "is_private": false, "creation_time": "2011-12-05T17:04:38Z"}, {"text": "Whether we want to do this seems like a product question: which version would users prefer?\n\nI don't know if this is really a JS engine issue: the JS engine just reports that a script has been running for 10 seconds. The browser decides what to do about that. I guess the browser could show a dialog and then let the JS continue to run, but that would be kind of weird because the dialog would be unresponsive while the JS continues to run. \n\nThere was a bug recently about running JS on background threads that is related to this but I can't find it right now.", "count": 4, "author": "dmandelin@mozilla.com", "creator": "dmandelin@mozilla.com", "is_private": false, "creation_time": "2011-12-08T03:26:38Z", "id": 5899600, "bug_id": 707490, "raw_text": "Whether we want to do this seems like a product question: which version would users prefer?\n\nI don't know if this is really a JS engine issue: the JS engine just reports that a script has been running for 10 seconds. The browser decides what to do about that. I guess the browser could show a dialog and then let the JS continue to run, but that would be kind of weird because the dialog would be unresponsive while the JS continues to run. \n\nThere was a bug recently about running JS on background threads that is related to this but I can't find it right now.", "attachment_id": null, "time": "2011-12-08T03:26:38Z", "tags": []}, {"author": "emanuel.hoogeveen@protonmail.com", "count": 5, "text": "Bug 384412?", "id": 5900891, "bug_id": 707490, "time": "2011-12-08T17:10:08Z", "raw_text": "Bug 384412?", "creator": "emanuel.hoogeveen@protonmail.com", "creation_time": "2011-12-08T17:10:08Z", "is_private": false, "attachment_id": null, "tags": []}, {"tags": [], "attachment_id": null, "is_private": false, "creation_time": "2013-01-15T23:38:02Z", "creator": "jruderman@gmail.com", "time": "2013-01-15T23:38:02Z", "raw_text": "> I guess the browser could show a dialog and then let the JS\n> continue to run, but that would be kind of weird because the dialog would be\n> unresponsive while the JS continues to run. \n\nThe JS engine could terminate the script on its next \"operation callback\" after the user clicks \"Stop\", right?  That would be good enough, I think.", "id": 7005472, "bug_id": 707490, "text": "> I guess the browser could show a dialog and then let the JS\n> continue to run, but that would be kind of weird because the dialog would be\n> unresponsive while the JS continues to run. \n\nThe JS engine could terminate the script on its next \"operation callback\" after the user clicks \"Stop\", right?  That would be good enough, I think.", "count": 6, "author": "jruderman@gmail.com"}, {"creator": "bugzilla@mversen.de", "author": "bugzilla@mversen.de", "text": "*** Bug 858846 has been marked as a duplicate of this bug. ***", "count": 7, "id": 7286760, "bug_id": 707490, "is_private": false, "creation_time": "2013-04-07T17:51:06Z", "time": "2013-04-07T17:51:06Z", "attachment_id": null, "raw_text": "", "tags": []}, {"time": "2013-04-08T04:44:21Z", "raw_text": "(In reply to Matthias Versen [:Matti] from comment #1)\n> >I can wait 10 seconds or 1 minute and once I hit \"continue\", then the browser will \n> >come back to life about 5 seconds later.\n> \n> I assume that this statement is based on your experience with the one single\n> website irccloud.com ?\n\nAs the reporter of bug 858846, I can say it happens elsewhere too. For example, I have seen multiple times Firefox refer to resource://gre/modules/XPIProvider.jsm in the unresponsive script warning after I choose File > Exit.\n\n> Note: The script have to be paused to show the dialog that can interact with\n> the user.\n\nThat's too bad.\n\n(In reply to David Mandelin [:dmandelin] from comment #4)\n> \n> I don't know if this is really a JS engine issue: the JS engine just reports\n> that a script has been running for 10 seconds. The browser decides what to\n> do about that. I guess the browser could show a dialog and then let the JS\n> continue to run, but that would be kind of weird because the dialog would be\n> unresponsive while the JS continues to run. \n\nI guess you mean the JS engine is not preemptive; unless the engine pauses running and returns the control to the browser, the browser UI has no way to stop the engine.\n\nMaybe a (dirty) workaround would be to dismiss the dialog automatically a few seconds after the dialog is displayed, and let the script run for another 10 seconds, and show the dialog again, and repeat this until the user finally intervenes or the script finishes. It may appear more confusing sometimes, but it can be more helpful in other cases.\n\n> There was a bug recently about running JS on background threads that is\n> related to this\n\nThat would be very helpful.", "text": "(In reply to Matthias Versen [:Matti] from comment #1)\n> >I can wait 10 seconds or 1 minute and once I hit \"continue\", then the browser will \n> >come back to life about 5 seconds later.\n> \n> I assume that this statement is based on your experience with the one single\n> website irccloud.com ?\n\nAs the reporter of bug 858846, I can say it happens elsewhere too. For example, I have seen multiple times Firefox refer to resource://gre/modules/XPIProvider.jsm in the unresponsive script warning after I choose File > Exit.\n\n> Note: The script have to be paused to show the dialog that can interact with\n> the user.\n\nThat's too bad.\n\n(In reply to David Mandelin [:dmandelin] from comment #4)\n> \n> I don't know if this is really a JS engine issue: the JS engine just reports\n> that a script has been running for 10 seconds. The browser decides what to\n> do about that. I guess the browser could show a dialog and then let the JS\n> continue to run, but that would be kind of weird because the dialog would be\n> unresponsive while the JS continues to run. \n\nI guess you mean the JS engine is not preemptive; unless the engine pauses running and returns the control to the browser, the browser UI has no way to stop the engine.\n\nMaybe a (dirty) workaround would be to dismiss the dialog automatically a few seconds after the dialog is displayed, and let the script run for another 10 seconds, and show the dialog again, and repeat this until the user finally intervenes or the script finishes. It may appear more confusing sometimes, but it can be more helpful in other cases.\n\n> There was a bug recently about running JS on background threads that is\n> related to this\n\nThat would be very helpful.", "count": 8, "author": "musiphil@bawi.org", "id": 7287422, "bug_id": 707490, "attachment_id": null, "tags": [], "creator": "musiphil@bawi.org", "is_private": false, "creation_time": "2013-04-08T04:44:21Z"}, {"tags": [], "raw_text": "(In reply to Seungbeom Kim from comment #8)\n> Maybe a (dirty) workaround would be to dismiss the dialog automatically a\n> few seconds after the dialog is displayed, and let the script run for\n> another 10 seconds, and show the dialog again, and repeat this until the\n> user finally intervenes or the script finishes. It may appear more confusing\n> sometimes, but it can be more helpful in other cases.\n\nAdditional ideas:\n* Display a timer in the dialog (\"Dismissing the dialog and continuing the script in ## seconds...\").\n* (Possibly) use exponential backoff, up to a certain limit, for the duration of script execution until the next dialog.\n\nIf the user doesn't respond to the dialog, it should be interpreted as having no intention to terminate the script, so the script execution should somehow make progress in the absence of user intervention; the script execution should not be left paused indefinitely.", "attachment_id": null, "time": "2013-09-13T19:27:54Z", "is_private": false, "creation_time": "2013-09-13T19:27:54Z", "id": 7860077, "bug_id": 707490, "count": 9, "text": "(In reply to Seungbeom Kim from comment #8)\n> Maybe a (dirty) workaround would be to dismiss the dialog automatically a\n> few seconds after the dialog is displayed, and let the script run for\n> another 10 seconds, and show the dialog again, and repeat this until the\n> user finally intervenes or the script finishes. It may appear more confusing\n> sometimes, but it can be more helpful in other cases.\n\nAdditional ideas:\n* Display a timer in the dialog (\"Dismissing the dialog and continuing the script in ## seconds...\").\n* (Possibly) use exponential backoff, up to a certain limit, for the duration of script execution until the next dialog.\n\nIf the user doesn't respond to the dialog, it should be interpreted as having no intention to terminate the script, so the script execution should somehow make progress in the absence of user intervention; the script execution should not be left paused indefinitely.", "author": "musiphil@bawi.org", "creator": "musiphil@bawi.org"}, {"tags": [], "time": "2013-09-13T23:04:19Z", "raw_text": "On my system, shortly before the unresponsive script dialogue appears, the system starts slowing to a crawl, and nearly freezes by the time the dialogue appears. This state remains as long as the dialogue box is present. If I choose to terminate the script, few seconds after that the system jumps back to life. This happens irrespective of website. FB, Gmail, take your pick, whatever.\n\nI wish until the root of the problem is fixed, there would be an option to always terminate the script.", "attachment_id": null, "id": 7861047, "bug_id": 707490, "creation_time": "2013-09-13T23:04:19Z", "is_private": false, "creator": "kc.qubit@gmail.com", "count": 10, "text": "On my system, shortly before the unresponsive script dialogue appears, the system starts slowing to a crawl, and nearly freezes by the time the dialogue appears. This state remains as long as the dialogue box is present. If I choose to terminate the script, few seconds after that the system jumps back to life. This happens irrespective of website. FB, Gmail, take your pick, whatever.\n\nI wish until the root of the problem is fixed, there would be an option to always terminate the script.", "author": "kc.qubit@gmail.com"}]}}}