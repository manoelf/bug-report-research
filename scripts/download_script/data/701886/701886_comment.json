{"bugs": {"701886": {"comments": [{"raw_text": "User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:8.0) Gecko/20100101 Firefox/8.0\nBuild ID: 20111111000051\n\nSteps to reproduce:\n\nWhen the system does not play any sound for a while and the sound card goes idle, I can hear the speakers \"clicking\" every time I trigger some event (hover in menu, right click, and so on), indicating that the card wakes up from suspend.\n\n\nActual results:\n\nFurther investigation showed, that firefox calls the PlayEventSound function at each event, even though sound is not enabled and there is no sound to play.\nThis includes the whole sound initialization routine, which causes the issue with clicking on the speakers.\n\nAttached is a full backlog which illustrates the issue in detail, with a breakpoint set to PR_LoadLibrary (mozilla/nsprpub/pr/src/linking/prlink.c). The breakpoint is hit when said type of events happens.\n\n\nExpected results:\n\n1) The PlayEventSound function should not be called at all, when no sound is enabled\n2) The whole initialization routine should not be done at every single event over and over again, but once, e.g. at startup, if sound is enabled\n\nThis is reproducible on the recently released firefox 8, the previous firefox 7 and likely any newer and older revision down to ff 3 or 4. Only linux/gtk based releases should be affected.", "time": "2011-11-11T22:54:57Z", "bug_id": 701886, "id": 5843827, "text": "Created attachment 573927\nff8_soundinit_backtrace01.txt\n\nUser Agent: Mozilla/5.0 (X11; Linux x86_64; rv:8.0) Gecko/20100101 Firefox/8.0\nBuild ID: 20111111000051\n\nSteps to reproduce:\n\nWhen the system does not play any sound for a while and the sound card goes idle, I can hear the speakers \"clicking\" every time I trigger some event (hover in menu, right click, and so on), indicating that the card wakes up from suspend.\n\n\nActual results:\n\nFurther investigation showed, that firefox calls the PlayEventSound function at each event, even though sound is not enabled and there is no sound to play.\nThis includes the whole sound initialization routine, which causes the issue with clicking on the speakers.\n\nAttached is a full backlog which illustrates the issue in detail, with a breakpoint set to PR_LoadLibrary (mozilla/nsprpub/pr/src/linking/prlink.c). The breakpoint is hit when said type of events happens.\n\n\nExpected results:\n\n1) The PlayEventSound function should not be called at all, when no sound is enabled\n2) The whole initialization routine should not be done at every single event over and over again, but once, e.g. at startup, if sound is enabled\n\nThis is reproducible on the recently released firefox 8, the previous firefox 7 and likely any newer and older revision down to ff 3 or 4. Only linux/gtk based releases should be affected.", "count": 0, "author": "thomas@gstaedtner.net", "tags": [], "attachment_id": 573927, "creation_time": "2011-11-11T22:54:57Z", "is_private": false, "creator": "thomas@gstaedtner.net"}]}}, "comments": {}}