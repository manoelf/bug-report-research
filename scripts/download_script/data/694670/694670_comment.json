{"bugs": {"694670": {"comments": [{"attachment_id": null, "tags": [], "creator": "dholbert@mozilla.com", "creation_time": "2011-10-14T21:58:35Z", "is_private": false, "raw_text": "The fix for bug 528444 just landed, which changed our behavior on content like:\n>  <svg:script xlink:href=\"\">\n>    alert(\"FAIL\");\n>  </svg:script>\n\nPreviously, we treated that as if xlink:href weren't set at all.  But now we:\n (a) resolve \"\" as \"this document's URI\", and attempt (& fail) to reparse the document as javascript)\n (b) ignore the inline script, since xlink:href is set\n\nPer bug 528444 comment 1 and bug 528444 comment 16, we definitely want part \"b\" (ignore inline script) but we don't necessarily want part \"a\". (for consistency with our HTML behavior, and also because it's almost certainly not what the author wants/expects)\n\nI'm filing this bug on possibly removing part \"a\" above.", "time": "2011-10-14T21:58:35Z", "author": "dholbert@mozilla.com", "text": "The fix for bug 528444 just landed, which changed our behavior on content like:\n>  <svg:script xlink:href=\"\">\n>    alert(\"FAIL\");\n>  </svg:script>\n\nPreviously, we treated that as if xlink:href weren't set at all.  But now we:\n (a) resolve \"\" as \"this document's URI\", and attempt (& fail) to reparse the document as javascript)\n (b) ignore the inline script, since xlink:href is set\n\nPer bug 528444 comment 1 and bug 528444 comment 16, we definitely want part \"b\" (ignore inline script) but we don't necessarily want part \"a\". (for consistency with our HTML behavior, and also because it's almost certainly not what the author wants/expects)\n\nI'm filing this bug on possibly removing part \"a\" above.", "count": 0, "id": 5783790, "bug_id": 694670}, {"creator": "longsonr@gmail.com", "is_private": false, "creation_time": "2011-10-14T22:03:20Z", "attachment_id": null, "tags": [], "count": 1, "text": "This *is* consistent with out current html behaviour.\n\nvoid\nnsHTMLScriptElement::FreezeUriAsyncDefer()\n{\n  if (mFrozen) {\n    return;\n  }\n  \n  // variation of this code in nsSVGScriptElement - check if changes\n  // need to be transfered when modifying\n  if (HasAttr(kNameSpaceID_None, nsGkAtoms::src)) {\n...\n\nbool\nnsHTMLScriptElement::HasScriptContent()\n{\n  return (mFrozen ? mExternal : HasAttr(kNameSpaceID_None, nsGkAtoms::src)) ||\n         nsContentUtils::HasNonEmptyTextContent(this);\n}\n\nIf it needs fixing then it needs fixing for both SVG and html at the same time and this shouldn't be an SVG bug but some general content bug I expect.", "author": "longsonr@gmail.com", "bug_id": 694670, "id": 5783798, "raw_text": "This *is* consistent with out current html behaviour.\n\nvoid\nnsHTMLScriptElement::FreezeUriAsyncDefer()\n{\n  if (mFrozen) {\n    return;\n  }\n  \n  // variation of this code in nsSVGScriptElement - check if changes\n  // need to be transfered when modifying\n  if (HasAttr(kNameSpaceID_None, nsGkAtoms::src)) {\n...\n\nbool\nnsHTMLScriptElement::HasScriptContent()\n{\n  return (mFrozen ? mExternal : HasAttr(kNameSpaceID_None, nsGkAtoms::src)) ||\n         nsContentUtils::HasNonEmptyTextContent(this);\n}\n\nIf it needs fixing then it needs fixing for both SVG and html at the same time and this shouldn't be an SVG bug but some general content bug I expect.", "time": "2011-10-14T22:03:20Z"}, {"attachment_id": null, "tags": [], "creator": "dholbert@mozilla.com", "creation_time": "2011-10-14T22:08:26Z", "is_private": false, "time": "2011-10-14T22:08:26Z", "raw_text": "OK -- Jonas, so by\n> we have moved towards letting <someelement src=\"\"> not load anything.\nI take it you meant \"we're moving in that direction but haven't made that change for html:script yet?\n\n(and if so, could you suggest a new component for this bug to live in, to be about both html:script and svg:script?)", "author": "dholbert@mozilla.com", "text": "OK -- Jonas, so by\n> we have moved towards letting <someelement src=\"\"> not load anything.\nI take it you meant \"we're moving in that direction but haven't made that change for html:script yet?\n\n(and if so, could you suggest a new component for this bug to live in, to be about both html:script and svg:script?)", "count": 2, "id": 5783809, "bug_id": 694670}, {"text": "We already did it for images perhaps that's what Jonas was thinking of.", "count": 3, "author": "longsonr@gmail.com", "creator": "longsonr@gmail.com", "is_private": false, "creation_time": "2011-10-14T22:09:46Z", "id": 5783810, "bug_id": 694670, "raw_text": "We already did it for images perhaps that's what Jonas was thinking of.", "attachment_id": null, "time": "2011-10-14T22:09:46Z", "tags": []}, {"creator": "jonas@sicking.cc", "creation_time": "2011-10-14T22:24:42Z", "is_private": false, "attachment_id": null, "tags": [], "author": "jonas@sicking.cc", "count": 4, "text": "Yeah, it appears we haven't done this for HTML script elements yet. Feel free to do those in this bug too.\n\nNote that we'll want to mark the script as \"executed\" even if it just has an empty src attribute. So the place to fix this is likely somewhere here:\n\nhttp://mxr.mozilla.org/mozilla-central/source/content/html/content/src/nsHTMLScriptElement.cpp?force=1#306\n\nwhere it should set mUri to null.", "bug_id": 694670, "id": 5783844, "raw_text": "Yeah, it appears we haven't done this for HTML script elements yet. Feel free to do those in this bug too.\n\nNote that we'll want to mark the script as \"executed\" even if it just has an empty src attribute. So the place to fix this is likely somewhere here:\n\nhttp://mxr.mozilla.org/mozilla-central/source/content/html/content/src/nsHTMLScriptElement.cpp?force=1#306\n\nwhere it should set mUri to null.", "time": "2011-10-14T22:24:42Z"}, {"tags": [], "attachment_id": null, "is_private": false, "creation_time": "2018-06-29T04:58:41Z", "creator": "bug-husbandry-bot@mozilla.bugs", "raw_text": "https://bugzilla.mozilla.org/show_bug.cgi?id=1472046\n\nMove all DOM bugs that haven\u2019t been updated in more than 3 years and has no one currently assigned to P5.\n\nIf you have questions, please contact :mdaly.", "time": "2018-06-29T04:58:41Z", "bug_id": 694670, "id": 13436673, "author": "bug-husbandry-bot@mozilla.bugs", "count": 5, "text": "https://bugzilla.mozilla.org/show_bug.cgi?id=1472046\n\nMove all DOM bugs that haven\u2019t been updated in more than 3 years and has no one currently assigned to P5.\n\nIf you have questions, please contact :mdaly."}]}}, "comments": {}}