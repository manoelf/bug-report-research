{"bugs": {"654589": {"comments": [{"is_private": false, "count": 0, "author": "brian@briansmith.org", "time": "2011-05-03T22:46:31Z", "id": 5447107, "attachment_id": null, "tags": [], "creation_time": "2011-05-03T22:46:31Z", "creator": "brian@briansmith.org", "raw_text": "The problem is caused by bad parsing in nsHttpHandler::IsAcceptableEncoding and the fact that all unknown content-codings are treated as being the same as the identity encoding.", "bug_id": 654589, "text": "The problem is caused by bad parsing in nsHttpHandler::IsAcceptableEncoding and the fact that all unknown content-codings are treated as being the same as the identity encoding."}, {"bug_id": 654589, "attachment_id": null, "tags": [], "creation_time": "2011-05-03T22:49:06Z", "id": 5447116, "is_private": false, "author": "brian@briansmith.org", "text": "When fixing this, note also that Content-Encoding could have multiple values (see bug 479266) separated by commas.", "creator": "brian@briansmith.org", "raw_text": "When fixing this, note also that Content-Encoding could have multiple values (see bug 479266) separated by commas.", "count": 1, "time": "2011-05-03T22:49:06Z"}, {"bug_id": 654589, "attachment_id": null, "creation_time": "2011-05-04T00:26:36Z", "tags": [], "id": 5447366, "author": "bzbarsky@mit.edu", "is_private": false, "text": "IsAcceptableEncoding is called on the server-provided value of \"Content-Encoding\".  So it should not be affected by what we send as Accept-Encoding, I would think.", "creator": "bzbarsky@mit.edu", "raw_text": "IsAcceptableEncoding is called on the server-provided value of \"Content-Encoding\".  So it should not be affected by what we send as Accept-Encoding, I would think.", "count": 2, "time": "2011-05-04T00:26:36Z"}, {"creation_time": "2011-05-04T00:37:43Z", "tags": [], "attachment_id": null, "bug_id": 654589, "is_private": false, "author": "brian@briansmith.org", "id": 5447384, "raw_text": "(In reply to comment #2)\n> IsAcceptableEncoding is called on the server-provided value of\n> \"Content-Encoding\".  So it should not be affected by what we send as\n> Accept-Encoding, I would think.\n\nI agree, but it does:\n\n    return nsHttp::FindToken(mAcceptEncodings.get(), enc, HTTP_LWS \",\")\n           != nsnull;\n\nIt should not be using mAcceptEncodings as the base of the comparisons. Instead it should check against all supported encodings, whether they were included in the Accept-Encoding header or not.", "creator": "brian@briansmith.org", "text": "(In reply to comment #2)\n> IsAcceptableEncoding is called on the server-provided value of\n> \"Content-Encoding\".  So it should not be affected by what we send as\n> Accept-Encoding, I would think.\n\nI agree, but it does:\n\n    return nsHttp::FindToken(mAcceptEncodings.get(), enc, HTTP_LWS \",\")\n           != nsnull;\n\nIt should not be using mAcceptEncodings as the base of the comparisons. Instead it should check against all supported encodings, whether they were included in the Accept-Encoding header or not.", "time": "2011-05-04T00:37:43Z", "count": 3}, {"raw_text": "Ah, I see.  mAcceptableEncodings on nsHttpHandler is basically the list of encodings we should be claiming to support; it's the default Accept-Encoding value but the actual Accept-Encoding for any given channel can be different.\n\nI agree that the parsing is broken, but comparing to mAcceptEncodings still sems like the right thing.", "creator": "bzbarsky@mit.edu", "text": "Ah, I see.  mAcceptableEncodings on nsHttpHandler is basically the list of encodings we should be claiming to support; it's the default Accept-Encoding value but the actual Accept-Encoding for any given channel can be different.\n\nI agree that the parsing is broken, but comparing to mAcceptEncodings still sems like the right thing.", "time": "2011-05-04T04:37:41Z", "count": 4, "creation_time": "2011-05-04T04:37:41Z", "tags": [], "attachment_id": null, "bug_id": 654589, "is_private": false, "author": "bzbarsky@mit.edu", "id": 5447609}, {"attachment_id": null, "tags": [], "creation_time": "2011-05-04T08:05:48Z", "creator": "bjarne@runitsoft.com", "raw_text": "(In reply to comment #4)\n>  parsing is broken, but comparing to mAcceptEncodings still\n> sems like the right thing.\n\nDefinitely! Especially if we end up using the Accept-Encoding header actively and somehow make servers respond properly to it.", "bug_id": 654589, "text": "(In reply to comment #4)\n>  parsing is broken, but comparing to mAcceptEncodings still\n> sems like the right thing.\n\nDefinitely! Especially if we end up using the Accept-Encoding header actively and somehow make servers respond properly to it.", "is_private": false, "count": 5, "author": "bjarne@runitsoft.com", "time": "2011-05-04T08:05:48Z", "id": 5447780}, {"time": "2017-09-13T18:41:45Z", "count": 6, "text": "Bulk change to priority: https://bugzilla.mozilla.org/show_bug.cgi?id=1399258", "raw_text": "Bulk change to priority: https://bugzilla.mozilla.org/show_bug.cgi?id=1399258", "creator": "bug-husbandry-bot@mozilla.bugs", "id": 12659148, "author": "bug-husbandry-bot@mozilla.bugs", "is_private": false, "bug_id": 654589, "creation_time": "2017-09-13T18:41:45Z", "tags": [], "attachment_id": null}]}}, "comments": {}}