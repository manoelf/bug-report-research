{"comments": {}, "bugs": {"301869": {"comments": [{"count": 0, "time": "2005-07-23T22:51:34Z", "id": 2560341, "creation_time": "2005-07-23T22:51:34Z", "raw_text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8b3) Gecko/20050712 Firefox/1.0+\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8b3) Gecko/20050712 Firefox/1.0+\n\nWhen rendered with Deer Park alpha 1 or earlier, the page in question at\nhttp://cms2.graphtek.com/example.html hides the textarea and replaces it with a\ngroovy widgets to help author rich text.\n\nStarting with Deer Park alpha 2, the Javascript fails with an error. The suite\nof Javascript scripts aren't of my making (they are instances of the \"Xinha\"\neditor: xinha.python-hosting.com), so ability to diagnose exactly what might be\nhappening isn't going to be amazing, but I think that additional javascripts\nwhich are to be loaded by document.write(\"<script src='..'></script>\") calls\naren't being loaded--or else aren't loaded by the time window.onload fires.\n\nIn any event, Javascript which was once working (well, I cooked up the page to\ndemonstrate a problem I'm having with a non-public page) is now failing.\n\nReproducible: Always\n\nSteps to Reproduce:\n1. Visit http://cms2.graphtek.com/example.html with Firefox 1.0.x or Deer Park\nalpha 1 and see it work.\n2. Visit http://cms2.graphtek.com/example.heml with Deer Park alpha 2 and see it\nfail\n3. 1 and 2 can be repeated on Linux and in XP", "attachment_id": null, "creator": "bucky@mightytikigod.com", "is_private": false, "tags": [], "bug_id": 301869, "author": "bucky@mightytikigod.com", "text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8b3) Gecko/20050712 Firefox/1.0+\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8b3) Gecko/20050712 Firefox/1.0+\n\nWhen rendered with Deer Park alpha 1 or earlier, the page in question at\nhttp://cms2.graphtek.com/example.html hides the textarea and replaces it with a\ngroovy widgets to help author rich text.\n\nStarting with Deer Park alpha 2, the Javascript fails with an error. The suite\nof Javascript scripts aren't of my making (they are instances of the \"Xinha\"\neditor: xinha.python-hosting.com), so ability to diagnose exactly what might be\nhappening isn't going to be amazing, but I think that additional javascripts\nwhich are to be loaded by document.write(\"<script src='..'></script>\") calls\naren't being loaded--or else aren't loaded by the time window.onload fires.\n\nIn any event, Javascript which was once working (well, I cooked up the page to\ndemonstrate a problem I'm having with a non-public page) is now failing.\n\nReproducible: Always\n\nSteps to Reproduce:\n1. Visit http://cms2.graphtek.com/example.html with Firefox 1.0.x or Deer Park\nalpha 1 and see it work.\n2. Visit http://cms2.graphtek.com/example.heml with Deer Park alpha 2 and see it\nfail\n3. 1 and 2 can be repeated on Linux and in XP"}, {"count": 1, "time": "2005-08-26T19:29:37Z", "id": 2592582, "creation_time": "2005-08-26T19:29:37Z", "raw_text": "I am also seeing the behaviour as described by steps one & two above, & can\nreproduce with latest official Xinha demo too", "attachment_id": null, "creator": "simon@mintsource.org", "is_private": false, "tags": [], "bug_id": 301869, "author": "simon@mintsource.org", "text": "I am also seeing the behaviour as described by steps one & two above, & can\nreproduce with latest official Xinha demo too"}, {"is_private": false, "time": "2005-08-29T16:37:22Z", "creation_time": "2005-08-29T16:37:22Z", "raw_text": "This also happens with\nhttp://xinha.gogo.co.nz/xinha-nightly/examples/full_example.html", "attachment_id": null, "creator": "umuff71@email.com", "tags": [], "bug_id": 301869, "author": "umuff71@email.com", "text": "This also happens with\nhttp://xinha.gogo.co.nz/xinha-nightly/examples/full_example.html", "count": 2, "id": 2594549}, {"bug_id": 301869, "tags": [], "text": "This is a blocker for Xinha.", "author": "umuff71@email.com", "id": 2622938, "count": 3, "is_private": false, "time": "2005-09-27T02:45:25Z", "creation_time": "2005-09-27T02:45:25Z", "attachment_id": null, "creator": "umuff71@email.com", "raw_text": "This is a blocker for Xinha."}, {"time": "2005-09-28T13:44:27Z", "creation_time": "2005-09-28T13:44:27Z", "attachment_id": null, "creator": "mbeltzner@gmail.com", "raw_text": "*** Bug 310182 has been marked as a duplicate of this bug. ***", "is_private": false, "id": 2638484, "count": 4, "bug_id": 301869, "tags": [], "text": "*** Bug 310182 has been marked as a duplicate of this bug. ***", "author": "mbeltzner@gmail.com"}, {"text": "(reprinting bug 310182 comment 0 here for reference)\n\nThe Xinha text editor (which uses Midas / design-mode) works in FFx 1.0.x but\nnot in FFx 1.5 (Gecko/20050920 Firefox/1.4). To my untrained eye, it looks like\nthe problem is that the ternary operator in the body frame's source isn't being\nevaluated properly, but I may be wayyy offbase.\n\nEither way, somewhat concerning that JS that worked in previous version doesn't\nwork in the new version.", "author": "mbeltzner@gmail.com", "bug_id": 301869, "tags": [], "id": 2638489, "count": 5, "is_private": false, "attachment_id": null, "creator": "mbeltzner@gmail.com", "raw_text": "(reprinting bug 310182 comment 0 here for reference)\n\nThe Xinha text editor (which uses Midas / design-mode) works in FFx 1.0.x but\nnot in FFx 1.5 (Gecko/20050920 Firefox/1.4). To my untrained eye, it looks like\nthe problem is that the ternary operator in the body frame's source isn't being\nevaluated properly, but I may be wayyy offbase.\n\nEither way, somewhat concerning that JS that worked in previous version doesn't\nwork in the new version.", "time": "2005-09-28T13:46:27Z", "creation_time": "2005-09-28T13:46:27Z"}, {"id": 2643869, "count": 6, "text": "Wit the url testcase, I get a js error:\nError: CharacterMap is not defined\nSource File: http://xinha.gogo.co.nz/xinha-nightly/htmlarea.js\nLine: 5380\n\nwhat also is important to know maybe is that this:\n<script type=\"text/javascript\"\nsrc=\"/includes/xinha/plugins/character-map.js\"></script>\ngives a 404 not found error for the character-map.js\n\nSo maybe it works when you add that file back to the testcase?", "author": "martijn.martijn@gmail.com", "bug_id": 301869, "tags": [], "attachment_id": null, "creator": "martijn.martijn@gmail.com", "raw_text": "Wit the url testcase, I get a js error:\nError: CharacterMap is not defined\nSource File: http://xinha.gogo.co.nz/xinha-nightly/htmlarea.js\nLine: 5380\n\nwhat also is important to know maybe is that this:\n<script type=\"text/javascript\"\nsrc=\"/includes/xinha/plugins/character-map.js\"></script>\ngives a 404 not found error for the character-map.js\n\nSo maybe it works when you add that file back to the testcase?", "time": "2005-10-02T16:37:21Z", "creation_time": "2005-10-02T16:37:21Z", "is_private": false}, {"count": 7, "time": "2005-10-03T15:44:21Z", "creation_time": "2005-10-03T15:44:21Z", "id": 2644730, "raw_text": "I was getting ready for a mea culpa and a thankful mopping of my brow, but alas,\nadding a character-map.js file (a dummy, containing 'var foo=\"\";') didn't do any\ngood.\n\nIt is still the case that Deer Park Alpha 1 and earlier executes this javascript\nwithout errors, but Deer Park Alpha 2 and later produce an error.", "attachment_id": null, "creator": "bucky@mightytikigod.com", "is_private": false, "tags": [], "bug_id": 301869, "author": "bucky@mightytikigod.com", "text": "I was getting ready for a mea culpa and a thankful mopping of my brow, but alas,\nadding a character-map.js file (a dummy, containing 'var foo=\"\";') didn't do any\ngood.\n\nIt is still the case that Deer Park Alpha 1 and earlier executes this javascript\nwithout errors, but Deer Park Alpha 2 and later produce an error."}, {"creation_time": "2005-10-03T15:51:20Z", "time": "2005-10-03T15:51:20Z", "raw_text": "Yes, but you probably need to add the character-map.js from xinha:\nhttp://code.campware.org/projects/campsite/file/tags/CAMPSITE_2_3_1/campsite/implementation/management/javascript/xinha/plugins/CharacterMap/character-map.js?rev=3932\nIt can very well be that older Mozilla versions wrongfully not gave a js error,\nwhile current versions do (I suspect that is the case in this bug).\n\nOr you could try removing 'CharacterMap', from this code:\n  xinha_plugins = xinha_plugins ? xinha_plugins :\n    [\n      'CharacterMap',\n    ];\nsince you don't seem to use it.", "creator": "martijn.martijn@gmail.com", "attachment_id": null, "is_private": false, "count": 8, "id": 2644734, "tags": [], "bug_id": 301869, "author": "martijn.martijn@gmail.com", "text": "Yes, but you probably need to add the character-map.js from xinha:\nhttp://code.campware.org/projects/campsite/file/tags/CAMPSITE_2_3_1/campsite/implementation/management/javascript/xinha/plugins/CharacterMap/character-map.js?rev=3932\nIt can very well be that older Mozilla versions wrongfully not gave a js error,\nwhile current versions do (I suspect that is the case in this bug).\n\nOr you could try removing 'CharacterMap', from this code:\n  xinha_plugins = xinha_plugins ? xinha_plugins :\n    [\n      'CharacterMap',\n    ];\nsince you don't seem to use it."}, {"tags": [], "bug_id": 301869, "author": "bucky@mightytikigod.com", "text": "Aha. But that's just the problem. NONE of the Xinha plugins seem to work\nanymore. Plugins are \"registered\" as part of a window.onload() method (actually\nTHE window.onload method, by my reading of the code--I am not a primary Xinha\ncontributor).\n\nThey are loaded EITHER by a line like this:\n\n    document.write(\"<script type='text/javascript' src='\" + plugin_file +\n\"'></script>\");\n\nOR by code like this:\n\n  var script = document.createElement(\"script\");\n  script.type = \"text/javascript\";\n  script.src = src;\n  head.appendChild(script);\n\nThe only error I get in my javascript console is \"CharacterMap is not defined\".\nCharacterMap is the first function defined in\nincludes/xinha/plugins/CharacterMap/character-map.js, which should have been\nloaded by one of the methods above.\n\nThis USED to work, but now has STOPPED working. Because of the text of the\nerror, I am merely presuming that the loading method is the thing which has\nstopped working.\n\nHopefully, something in my description turns a light on for somebody. I really,\nreally want Xinha to work when the new Firefox comes out, and I really really\nwant to fix whatever it is that needs to be fixed, wherever it is that this\nchange needs to occur.", "count": 9, "id": 2644859, "is_private": false, "creation_time": "2005-10-03T17:51:02Z", "time": "2005-10-03T17:51:02Z", "raw_text": "Aha. But that's just the problem. NONE of the Xinha plugins seem to work\nanymore. Plugins are \"registered\" as part of a window.onload() method (actually\nTHE window.onload method, by my reading of the code--I am not a primary Xinha\ncontributor).\n\nThey are loaded EITHER by a line like this:\n\n    document.write(\"<script type='text/javascript' src='\" + plugin_file +\n\"'></script>\");\n\nOR by code like this:\n\n  var script = document.createElement(\"script\");\n  script.type = \"text/javascript\";\n  script.src = src;\n  head.appendChild(script);\n\nThe only error I get in my javascript console is \"CharacterMap is not defined\".\nCharacterMap is the first function defined in\nincludes/xinha/plugins/CharacterMap/character-map.js, which should have been\nloaded by one of the methods above.\n\nThis USED to work, but now has STOPPED working. Because of the text of the\nerror, I am merely presuming that the loading method is the thing which has\nstopped working.\n\nHopefully, something in my description turns a light on for somebody. I really,\nreally want Xinha to work when the new Firefox comes out, and I really really\nwant to fix whatever it is that needs to be fixed, wherever it is that this\nchange needs to occur.", "creator": "bucky@mightytikigod.com", "attachment_id": null}, {"is_private": false, "time": "2005-10-03T18:04:43Z", "creation_time": "2005-10-03T18:04:43Z", "raw_text": "Alan, if you could attach a zipped file from your example, that would be great.\nIt would allow me to minimise the testcase to see what's going on.", "attachment_id": null, "creator": "martijn.martijn@gmail.com", "tags": [], "bug_id": 301869, "author": "martijn.martijn@gmail.com", "text": "Alan, if you could attach a zipped file from your example, that would be great.\nIt would allow me to minimise the testcase to see what's going on.", "count": 10, "id": 2644893}, {"attachment_id": 198339, "creator": "bucky@mightytikigod.com", "raw_text": "I diddled the paths a little, since the original used absolute paths. Some of\nthe images referenced by the .css file are missing (wget didn't find them, and\nI didn't bother). Several Xinha plug-ins have been deleted to keep it under the\nacceptable attachment size. However, the behavior in question (works in Mozilla\nsuite, etc., but not in Firefox's most recent beta) is demonstrable here.", "time": "2005-10-03T19:57:28Z", "creation_time": "2005-10-03T19:57:28Z", "id": 2645056, "count": 11, "text": "Created attachment 198339\nTest case (mostly) duplicates URL of initial report\n\nI diddled the paths a little, since the original used absolute paths. Some of\nthe images referenced by the .css file are missing (wget didn't find them, and\nI didn't bother). Several Xinha plug-ins have been deleted to keep it under the\nacceptable attachment size. However, the behavior in question (works in Mozilla\nsuite, etc., but not in Firefox's most recent beta) is demonstrable here.", "author": "bucky@mightytikigod.com", "bug_id": 301869, "is_private": false, "tags": []}, {"tags": [], "bug_id": 301869, "author": "martijn.martijn@gmail.com", "text": "Created attachment 198353\ntestcase\n\nThanks Alan!\nWell, basically I can reduce the issue to this.\nOlder builds added an extra newline at the beginning in this case. This was\nfixed with the fix for bug 111816.\n\nSo the code in htmlarea.js needs to be changed to get this working again.\nIn HTMLArea.cloneObject = function(obj) \n\nThis:\nif (obj.constructor.toString().indexOf(\"function Function(\") == 1) {\nyou should change into this:\nif (obj.constructor.toString().indexOf(\"function Function(\") >= 0) {\n\nThen all should work well again.", "count": 12, "id": 2645147, "is_private": false, "time": "2005-10-03T21:07:31Z", "creation_time": "2005-10-03T21:07:31Z", "raw_text": "Thanks Alan!\nWell, basically I can reduce the issue to this.\nOlder builds added an extra newline at the beginning in this case. This was\nfixed with the fix for bug 111816.\n\nSo the code in htmlarea.js needs to be changed to get this working again.\nIn HTMLArea.cloneObject = function(obj) \n\nThis:\nif (obj.constructor.toString().indexOf(\"function Function(\") == 1) {\nyou should change into this:\nif (obj.constructor.toString().indexOf(\"function Function(\") >= 0) {\n\nThen all should work well again.", "attachment_id": 198353, "creator": "martijn.martijn@gmail.com"}, {"author": "martijn.martijn@gmail.com", "text": "You should also change this line:\nif (obj.constructor.toString().indexOf(\"function Array(\") == 1) {\ninto this:\nif (obj.constructor.toString().indexOf(\"function Array(\") >= 0) {\n\nProbably the author of htmlarea should also be notified about this, I guess.", "tags": [], "bug_id": 301869, "count": 13, "id": 2645154, "is_private": false, "raw_text": "You should also change this line:\nif (obj.constructor.toString().indexOf(\"function Array(\") == 1) {\ninto this:\nif (obj.constructor.toString().indexOf(\"function Array(\") >= 0) {\n\nProbably the author of htmlarea should also be notified about this, I guess.", "attachment_id": null, "creator": "martijn.martijn@gmail.com", "time": "2005-10-03T21:12:15Z", "creation_time": "2005-10-03T21:12:15Z"}, {"attachment_id": null, "creator": "bucky@mightytikigod.com", "raw_text": "Thanks!\n\nI'm not sure if \"fixed\" is correct, since ultimately this wasn't a Firefox\nerror, but I now understand the problem and solution.", "time": "2005-10-03T22:35:29Z", "creation_time": "2005-10-03T22:35:29Z", "id": 2645270, "count": 14, "text": "Thanks!\n\nI'm not sure if \"fixed\" is correct, since ultimately this wasn't a Firefox\nerror, but I now understand the problem and solution.", "author": "bucky@mightytikigod.com", "bug_id": 301869, "is_private": false, "tags": []}]}}}