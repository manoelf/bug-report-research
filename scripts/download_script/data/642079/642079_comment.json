{"bugs": {"642079": {"comments": [{"bug_id": 642079, "attachment_id": null, "tags": [], "creation_time": "2011-03-16T08:30:00Z", "id": 5347730, "author": "evsvit@gmail.com", "is_private": false, "text": "User-Agent:       Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0) Gecko/20100101 Firefox/4.0\nBuild Identifier: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0) Gecko/20100101 Firefox/4.0\n\nAutomatic proxy configuration doesn't work in Firefox 4.0. But it works in IE8. Setting debug variable in proxy.pac doesn't show any alert message. \nBelow are parameters that I use:\n\n1) Automatic proxy configuration URL: file:///C:/Users/Vitaliy/AppData/Roaming/proxy.pac\n\n2) Source code for proxy.pac:\n//Turn debug mode on by setting debug variable to any non-empty string\n//Note that \"\" is an empty string, and that \"0\", \"1\" & \"test\" are not empty strings.\n\n\nfunction FindProxyForURL(url, host)\n  {\n    var ip = myIpAddress();\n    var debug = \"\";\n\n    if(debug)\n    {\n        alert(\"proxy.pac IP=\" + ip + \"  HOST=\" + host + \"  URL=\" + url);\n    }\n\n    // Detect if trying to connect to internal/intranet host\n    if(isPlainHostName(host) || dnsDomainIs(host, \"intranet.companyname\"))\n    {\n if(debug)\n {\n            alert(\"Direct for \" + url);    \n     }\n    return \"DIRECT\";   \n    }\n\n    // Detect if trying to connect to URLs on the internal network via internal DNS suffix or IP address\n    if(shExpMatch(url, \"*.companyname\") || shExpMatch(host, \"10.100.*\"))\n    {\n if(debug)\n {\n     alert(\"Direct for \" + url);\n } \n        return \"DIRECT\";    \n    } \n\n     // All client PCs on the internal network will have a 10.10.x.x address, check if I have this\n     if (shExpMatch(ip, \"10.10.*\"))\n     {\n             if(debug)\n          {\n                 alert(\"Proxy for \" + url);\n             }\n     return \"PROXY proxy.companyname:8080\";\n     }\n\n     // If you have a different IP then this isn't the company network\n     else \n     {\n             if(debug)\n          {\n      alert(\"You are not at CompanyName so going direct for \" + url);\n             } \n            return \"DIRECT\";\n     }\n\n  }\n\nReproducible: Always\n\nSteps to Reproduce:\n0. Connect your PC to internal network that is not directly connected to Internet but connected through a proxy only.\n1. Create proxy.pac file with the source specified in Details section. Modify source code according to your internal network and proxy settings.\n2. Go to Firefox network connection settings and specify Automatic proxy configuration URL pointing to your proxy.pac file, similar way as shown in Details section.\n3. Go to URL http://mail.google.com and see that page is not loaded.\nActual Results:  \npage not loaded\n\nExpected Results:  \nFirefox is asking for proxy login and password, page is loaded.", "creator": "evsvit@gmail.com", "raw_text": "User-Agent:       Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0) Gecko/20100101 Firefox/4.0\nBuild Identifier: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0) Gecko/20100101 Firefox/4.0\n\nAutomatic proxy configuration doesn't work in Firefox 4.0. But it works in IE8. Setting debug variable in proxy.pac doesn't show any alert message. \nBelow are parameters that I use:\n\n1) Automatic proxy configuration URL: file:///C:/Users/Vitaliy/AppData/Roaming/proxy.pac\n\n2) Source code for proxy.pac:\n//Turn debug mode on by setting debug variable to any non-empty string\n//Note that \"\" is an empty string, and that \"0\", \"1\" & \"test\" are not empty strings.\n\n\nfunction FindProxyForURL(url, host)\n  {\n    var ip = myIpAddress();\n    var debug = \"\";\n\n    if(debug)\n    {\n        alert(\"proxy.pac IP=\" + ip + \"  HOST=\" + host + \"  URL=\" + url);\n    }\n\n    // Detect if trying to connect to internal/intranet host\n    if(isPlainHostName(host) || dnsDomainIs(host, \"intranet.companyname\"))\n    {\n if(debug)\n {\n            alert(\"Direct for \" + url);    \n     }\n    return \"DIRECT\";   \n    }\n\n    // Detect if trying to connect to URLs on the internal network via internal DNS suffix or IP address\n    if(shExpMatch(url, \"*.companyname\") || shExpMatch(host, \"10.100.*\"))\n    {\n if(debug)\n {\n     alert(\"Direct for \" + url);\n } \n        return \"DIRECT\";    \n    } \n\n     // All client PCs on the internal network will have a 10.10.x.x address, check if I have this\n     if (shExpMatch(ip, \"10.10.*\"))\n     {\n             if(debug)\n          {\n                 alert(\"Proxy for \" + url);\n             }\n     return \"PROXY proxy.companyname:8080\";\n     }\n\n     // If you have a different IP then this isn't the company network\n     else \n     {\n             if(debug)\n          {\n      alert(\"You are not at CompanyName so going direct for \" + url);\n             } \n            return \"DIRECT\";\n     }\n\n  }\n\nReproducible: Always\n\nSteps to Reproduce:\n0. Connect your PC to internal network that is not directly connected to Internet but connected through a proxy only.\n1. Create proxy.pac file with the source specified in Details section. Modify source code according to your internal network and proxy settings.\n2. Go to Firefox network connection settings and specify Automatic proxy configuration URL pointing to your proxy.pac file, similar way as shown in Details section.\n3. Go to URL http://mail.google.com and see that page is not loaded.\nActual Results:  \npage not loaded\n\nExpected Results:  \nFirefox is asking for proxy login and password, page is loaded.", "count": 0, "time": "2011-03-16T08:30:00Z"}, {"text": "I don't think that a PAC file is supposed to display alert's.", "bug_id": 642079, "creator": "jo.hermans@gmail.com", "raw_text": "I don't think that a PAC file is supposed to display alert's.", "attachment_id": null, "tags": [], "creation_time": "2011-03-16T11:31:15Z", "id": 5347889, "count": 1, "author": "jo.hermans@gmail.com", "time": "2011-03-16T11:31:15Z", "is_private": false}, {"is_private": false, "author": "evsvit@gmail.com", "id": 5350312, "attachment_id": null, "tags": [], "creation_time": "2011-03-17T08:20:29Z", "bug_id": 642079, "count": 2, "time": "2011-03-17T08:20:29Z", "creator": "evsvit@gmail.com", "raw_text": "(In reply to comment #1)\n> I don't think that a PAC file is supposed to display alert's.\n\nBut it does display ones in IE8. And the subject of bug is not that.", "text": "(In reply to comment #1)\n> I don't think that a PAC file is supposed to display alert's.\n\nBut it does display ones in IE8. And the subject of bug is not that."}, {"time": "2011-03-17T08:27:12Z", "count": 3, "raw_text": "(In reply to comment #1)\n> I don't think that a PAC file is supposed to display alert's.\n\nI'm sorry. I see now that the subject of bug contains the \"alerts\" thing. I think I should have not mention them, because \"not showing alerts\" could be a specific behavior of Firefox. But overall - the script should work. But it doesn't.", "creator": "evsvit@gmail.com", "text": "(In reply to comment #1)\n> I don't think that a PAC file is supposed to display alert's.\n\nI'm sorry. I see now that the subject of bug contains the \"alerts\" thing. I think I should have not mention them, because \"not showing alerts\" could be a specific behavior of Firefox. But overall - the script should work. But it doesn't.", "is_private": false, "author": "evsvit@gmail.com", "id": 5350316, "creation_time": "2011-03-17T08:27:12Z", "tags": [], "attachment_id": null, "bug_id": 642079}]}}, "comments": {}}