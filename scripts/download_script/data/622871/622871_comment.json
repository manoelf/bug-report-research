{"comments": {}, "bugs": {"622871": {"comments": [{"text": "User-Agent:       Mozilla/5.0 (X11; Linux i686; rv:2.0b8pre) Gecko/20101013 Firefox/4.0b8pre\nBuild Identifier: Mozilla/5.0 (X11; Linux i686; rv:2.0b8pre) Gecko/20101013 Firefox/4.0b8pre\n\nIn some situations, a call to getResponseHeader(\"Content-Type\") in the observer for http-on-examine-response returns the correct content type, but also sends a NS_ERROR_NOT_AVAILABLE to the error console.\n\nReproducible: Sometimes\n\nSteps to Reproduce:\n1. Observe http-on-examine-response from a component\n2. When triggered, call getResponseHeader(\"Content-Type\")\n3. Output the content type\nActual Results:  \nCorrect content type for the response is output, and the error console gets an exception reporting NS_ERROR_NOT_AVAILABLE from the call to getResponseHeader.\n\nExpected Results:  \nReturn the correct content type without error messages.\n\nThis doesn't happen with every request.  The ones where I can get it to happen reliably involve a content type of application/x-bittorrent where a content-disposition header is also present (at btmon.com).  No errors are reported for text/html responses from anywhere that I have seen.  When a call to getResponseHeader has been made on a different web server (no content-disposition header) and returned application/x-bittorrent without error then the original website no longer generates errors.\n\nThe calls that generate errors are on content which would be sent to an external handler or for download.  Calls that are handled internally by Firefox do not generate errors.\n\nIs this another instance of handled exceptions inside C++ generating console messages when results are returned to Javascript?", "is_private": false, "bug_id": 622871, "raw_text": "User-Agent:       Mozilla/5.0 (X11; Linux i686; rv:2.0b8pre) Gecko/20101013 Firefox/4.0b8pre\nBuild Identifier: Mozilla/5.0 (X11; Linux i686; rv:2.0b8pre) Gecko/20101013 Firefox/4.0b8pre\n\nIn some situations, a call to getResponseHeader(\"Content-Type\") in the observer for http-on-examine-response returns the correct content type, but also sends a NS_ERROR_NOT_AVAILABLE to the error console.\n\nReproducible: Sometimes\n\nSteps to Reproduce:\n1. Observe http-on-examine-response from a component\n2. When triggered, call getResponseHeader(\"Content-Type\")\n3. Output the content type\nActual Results:  \nCorrect content type for the response is output, and the error console gets an exception reporting NS_ERROR_NOT_AVAILABLE from the call to getResponseHeader.\n\nExpected Results:  \nReturn the correct content type without error messages.\n\nThis doesn't happen with every request.  The ones where I can get it to happen reliably involve a content type of application/x-bittorrent where a content-disposition header is also present (at btmon.com).  No errors are reported for text/html responses from anywhere that I have seen.  When a call to getResponseHeader has been made on a different web server (no content-disposition header) and returned application/x-bittorrent without error then the original website no longer generates errors.\n\nThe calls that generate errors are on content which would be sent to an external handler or for download.  Calls that are handled internally by Firefox do not generate errors.\n\nIs this another instance of handled exceptions inside C++ generating console messages when results are returned to Javascript?", "creator": "mozilla@virginmedia.com", "id": 5174065, "attachment_id": null, "creation_time": "2011-01-04T18:04:14Z", "count": 0, "time": "2011-01-04T18:04:14Z", "author": "mozilla@virginmedia.com", "tags": []}, {"text": "Experiencing same problem here, when receiving EventSource ack, my observer on http-on-examine-response can't retrieve the 'text/event-stream' header.\nMozilla XULRunner 6.0.2 - 20110902133214", "attachment_id": null, "creator": "clement.desiles@telecomsante.fr", "author": "clement.desiles@telecomsante.fr", "creation_time": "2012-04-17T09:30:30Z", "tags": [], "is_private": false, "bug_id": 622871, "raw_text": "Experiencing same problem here, when receiving EventSource ack, my observer on http-on-examine-response can't retrieve the 'text/event-stream' header.\nMozilla XULRunner 6.0.2 - 20110902133214", "id": 6228770, "time": "2012-04-17T09:30:30Z", "count": 1}]}}}