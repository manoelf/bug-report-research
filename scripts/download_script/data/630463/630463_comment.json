{"bugs": {"630463": {"comments": [{"creator": "jag+mozilla@crivens.net", "attachment_id": null, "text": "See bug 630019 comment 33.\n\nIdeally we can just use DXSDK_DIR when it's there, and otherwise require the path to be specified via --with-directx-sdk.", "tags": [], "creation_time": "2011-02-01T06:02:10Z", "author": "jag+mozilla@crivens.net", "id": 5242089, "bug_id": 630463, "is_private": false, "raw_text": "See bug 630019 comment 33.\n\nIdeally we can just use DXSDK_DIR when it's there, and otherwise require the path to be specified via --with-directx-sdk.", "count": 0, "time": "2011-02-01T06:02:10Z"}, {"tags": [], "creation_time": "2011-02-01T11:18:48Z", "author": "jacob.benoit.1@gmail.com", "creator": "jacob.benoit.1@gmail.com", "attachment_id": null, "text": "I agree with adding a --with-directx-sdk;\n\nI also agree with using DXSDK_DIR *if* it actually works i.e. we should do the check for d3dx9.h and dxguid.lib to validate it;\n\nbut I really think that if both fail we need to keep the current approach using the registry, because in some cases it's the only way to have auto-detection working (like on the build slaves).\n\nI am not too concerned about people having multiple SDK versions: that's a rare case, and even so, we're not very picky about the SDK version (any version >= February 2010 should work equally well). I'm much more concerned about auto-detection working without effort for most people.\n\nI make run a tryserver build to explore why the DXSDK_DIR approach failed on tinderboxes.", "count": 1, "time": "2011-02-01T11:18:48Z", "id": 5242447, "bug_id": 630463, "is_private": false, "raw_text": "I agree with adding a --with-directx-sdk;\n\nI also agree with using DXSDK_DIR *if* it actually works i.e. we should do the check for d3dx9.h and dxguid.lib to validate it;\n\nbut I really think that if both fail we need to keep the current approach using the registry, because in some cases it's the only way to have auto-detection working (like on the build slaves).\n\nI am not too concerned about people having multiple SDK versions: that's a rare case, and even so, we're not very picky about the SDK version (any version >= February 2010 should work equally well). I'm much more concerned about auto-detection working without effort for most people.\n\nI make run a tryserver build to explore why the DXSDK_DIR approach failed on tinderboxes."}, {"tags": [], "creation_time": "2011-02-01T12:17:53Z", "count": 2, "time": "2011-02-01T12:17:53Z", "author": "jag+mozilla@crivens.net", "creator": "jag+mozilla@crivens.net", "id": 5242529, "attachment_id": null, "text": "Yeah, we should absolutely make sure that DXSDK_DIR is set correctly.\n\nThe tinderboxes probably don't have that env var set. I guess I don't mind asking people to make sure DXSDK_DIR is set, especially since the installer should've done that. There's a good chance the tinderboxen are the exception, not the rule.", "is_private": false, "bug_id": 630463, "raw_text": "Yeah, we should absolutely make sure that DXSDK_DIR is set correctly.\n\nThe tinderboxes probably don't have that env var set. I guess I don't mind asking people to make sure DXSDK_DIR is set, especially since the installer should've done that. There's a good chance the tinderboxen are the exception, not the rule."}, {"raw_text": "If we need the directory set on the tinderboxes, we should just get it set in the buildbot environment. If we're going to do registry scraping, we should do that in MozillaBuild where we do the rest of the registry scraping. We shouldn't have to do that in configure.", "is_private": false, "bug_id": 630463, "id": 5242574, "time": "2011-02-01T12:59:11Z", "count": 3, "text": "If we need the directory set on the tinderboxes, we should just get it set in the buildbot environment. If we're going to do registry scraping, we should do that in MozillaBuild where we do the rest of the registry scraping. We shouldn't have to do that in configure.", "attachment_id": null, "creator": "ted@mielczarek.org", "author": "ted@mielczarek.org", "creation_time": "2011-02-01T12:59:11Z", "tags": []}, {"id": 5242602, "attachment_id": null, "creator": "jacob.benoit.1@gmail.com", "bug_id": 630463, "is_private": false, "raw_text": "To be clear, in any case I would like us to keep the registry test, if only as a fall-back if nothing else works. I believe a lot in the importance of making it easy to build firefox, and automatic platform detection is a big part of that.\n\nGiven that, and given that the registry way is currently working on tinderboxes, I don't really see the point of changing environment variables on tinderboxes.\n\nBut yes it's still a good idea to allow people to specify explicitly a patch with --with-directx-sdk and with DXSDK_DIR.", "text": "To be clear, in any case I would like us to keep the registry test, if only as a fall-back if nothing else works. I believe a lot in the importance of making it easy to build firefox, and automatic platform detection is a big part of that.\n\nGiven that, and given that the registry way is currently working on tinderboxes, I don't really see the point of changing environment variables on tinderboxes.\n\nBut yes it's still a good idea to allow people to specify explicitly a patch with --with-directx-sdk and with DXSDK_DIR.", "tags": [], "time": "2011-02-01T13:16:16Z", "author": "jacob.benoit.1@gmail.com", "creation_time": "2011-02-01T13:16:16Z", "count": 4}, {"is_private": false, "bug_id": 630463, "raw_text": "See also: Bug 643732", "id": 5359777, "count": 5, "time": "2011-03-22T14:46:50Z", "text": "See also: Bug 643732", "creator": "swsnyder@snydernet.net", "attachment_id": null, "creation_time": "2011-03-22T14:46:50Z", "author": "swsnyder@snydernet.net", "tags": []}, {"tags": [], "creation_time": "2013-11-13T17:00:07Z", "count": 6, "time": "2013-11-13T17:00:07Z", "author": "dev_oskar@hotmail.com", "creator": "dev_oskar@hotmail.com", "id": 8076389, "attachment_id": 831588, "text": "Created attachment 831588\nadds MOZ_DIRECTX_SDK_PATH_OVERWRITE to overwrite DirectX SDK path\n\nCurrently is not possible to use a separate directory providing a standalone DirectX SDK.\n\nWith this patch it's possible to overwrite the path via.  MOZ_DIRECTX_SDK_PATH_OVERWRITE\n\nThis way I can use the chromium simplified windows toolchain (MSVC10/Platform SDK/DirectX).\n\nMOZ_DIRECTX_SDK_PATH_OVERWRITE is less likely to clash with an already defined environment variable (like DX_SDK) and will overwrite the registry decision in configure.in It doesn't change the overall logic, and currently simply set a fixed version, anyone know how to read the version from the directx sdk directly?", "is_private": false, "bug_id": 630463, "raw_text": "Currently is not possible to use a separate directory providing a standalone DirectX SDK.\n\nWith this patch it's possible to overwrite the path via.  MOZ_DIRECTX_SDK_PATH_OVERWRITE\n\nThis way I can use the chromium simplified windows toolchain (MSVC10/Platform SDK/DirectX).\n\nMOZ_DIRECTX_SDK_PATH_OVERWRITE is less likely to clash with an already defined environment variable (like DX_SDK) and will overwrite the registry decision in configure.in It doesn't change the overall logic, and currently simply set a fixed version, anyone know how to read the version from the directx sdk directly?"}]}}, "comments": {}}