{"comments": {}, "bugs": {"622484": {"comments": [{"text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.16) Gecko/20101123 SeaMonkey/2.0.11\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7\n\nIf I subscribe to a new (new to me) newsgroup that has many messages on my NSP's NNTP server, downloading the headers takes far too long.  This appears to result from running my server-level filters on the downloaded headers.  \n\nAt my server-level, I have 8 named filters with a total of 67 filter conditions.  I subscribed to comp.security.misc, which had over 25,000 messages.  When I opened comp.security.misc, I indicated to download 500 of the messages.  The header counter in the status bar of the Thunderbird window showed that headers were being downloaded in chunks of 100 or more, very quickly.  Then the header counter started again at 1, showing headers were being downloaded 1-4 at a time, very slowly.  Then the counter started again as if Thunderbird were looping.  \n\nThis problem occurred even when I disabled all 8 filters.  The problem did NOT occur when I moved file msgFilterRules.dat from the newsgroup account in the Thunderbird profile directory to a different hard drive.  This indicates that filtering occurs even when all filters are disabled.  This also indicates that filtering is inefficient when applied to a large number of headers.  \n\n\nReproducible: Always", "attachment_id": null, "creator": "david@rossde.com", "author": "david@rossde.com", "creation_time": "2011-01-03T04:38:18Z", "tags": [], "raw_text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.16) Gecko/20101123 SeaMonkey/2.0.11\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7\n\nIf I subscribe to a new (new to me) newsgroup that has many messages on my NSP's NNTP server, downloading the headers takes far too long.  This appears to result from running my server-level filters on the downloaded headers.  \n\nAt my server-level, I have 8 named filters with a total of 67 filter conditions.  I subscribed to comp.security.misc, which had over 25,000 messages.  When I opened comp.security.misc, I indicated to download 500 of the messages.  The header counter in the status bar of the Thunderbird window showed that headers were being downloaded in chunks of 100 or more, very quickly.  Then the header counter started again at 1, showing headers were being downloaded 1-4 at a time, very slowly.  Then the counter started again as if Thunderbird were looping.  \n\nThis problem occurred even when I disabled all 8 filters.  The problem did NOT occur when I moved file msgFilterRules.dat from the newsgroup account in the Thunderbird profile directory to a different hard drive.  This indicates that filtering occurs even when all filters are disabled.  This also indicates that filtering is inefficient when applied to a large number of headers.  \n\n\nReproducible: Always", "is_private": false, "bug_id": 622484, "id": 5170687, "time": "2011-01-03T04:38:18Z", "count": 0}, {"attachment_id": null, "id": 5226924, "creator": "vseerror@lehigh.edu", "raw_text": "David, via procmon, can you confirm whether you see bug 571419 in this bug's behavior? If so, 571419 may be a big part for performance hit.\n\n> This indicates that filtering occurs even when all filters are disabled.\nthat shouldn't be happening either", "is_private": false, "bug_id": 622484, "text": "David, via procmon, can you confirm whether you see bug 571419 in this bug's behavior? If so, 571419 may be a big part for performance hit.\n\n> This indicates that filtering occurs even when all filters are disabled.\nthat shouldn't be happening either", "tags": [], "author": "vseerror@lehigh.edu", "time": "2011-01-25T23:07:25Z", "count": 1, "creation_time": "2011-01-25T23:07:25Z"}, {"creator": "david@rossde.com", "id": 5227147, "attachment_id": null, "text": "I'm on Windows XP and do not have anything called procmon.  As I recall, that is a UNIX tool; but I might be wrong.    \n\nI do have Performance Monitor.  If that will do, tell me which Performance Object and which counters for that Object you want.  \n\nSummary changed to delete \"on New Subscriptions\".  Apparently, this is a problem whenever a large number of headers are downloaded while the applicable filter set is large.", "is_private": false, "bug_id": 622484, "raw_text": "I'm on Windows XP and do not have anything called procmon.  As I recall, that is a UNIX tool; but I might be wrong.    \n\nI do have Performance Monitor.  If that will do, tell me which Performance Object and which counters for that Object you want.  \n\nSummary changed to delete \"on New Subscriptions\".  Apparently, this is a problem whenever a large number of headers are downloaded while the applicable filter set is large.", "tags": [], "creation_time": "2011-01-26T00:19:36Z", "count": 2, "time": "2011-01-26T00:19:36Z", "author": "david@rossde.com"}, {"time": "2011-01-26T11:41:42Z", "author": "vseerror@lehigh.edu", "creation_time": "2011-01-26T11:41:42Z", "count": 3, "tags": [], "is_private": false, "bug_id": 622484, "raw_text": "David, procmon is a small MS tool found at http://technet.microsoft.com/en-us/sysinternals/bb896645", "text": "David, procmon is a small MS tool found at http://technet.microsoft.com/en-us/sysinternals/bb896645", "id": 5228187, "attachment_id": null, "creator": "vseerror@lehigh.edu"}, {"text": "No, I have not yet installed ProcMon; however, I have downloaded it.  I hope to get to this sometime within the coming week.  \n\nToday, when I first opened my news.mozilla.org account in Thunderbird, the mozilla.org newsgroup indicated 62 unread messages.  Since I had either read all previous messages in that group or had marked them as already read, I knew these all had to be new message.  \n\nFrom a prior activity with the news.mozilla.org server, my Server Settings had 50 for \"Ask me before downloading more than nnn messages\".  Thus, I got a dialogue popup in which I changed the 50 to 500 (my usual setting).  Thunderbird immediately downloaded the 62 message headers and then slowly proceeded again to download the headers.  However, this time, it downloaded 500 of the 62!   \n\nObviously, something worse than merely inefficient filtering is involved.", "attachment_id": null, "creator": "david@rossde.com", "author": "david@rossde.com", "creation_time": "2011-02-05T18:40:25Z", "tags": [], "raw_text": "No, I have not yet installed ProcMon; however, I have downloaded it.  I hope to get to this sometime within the coming week.  \n\nToday, when I first opened my news.mozilla.org account in Thunderbird, the mozilla.org newsgroup indicated 62 unread messages.  Since I had either read all previous messages in that group or had marked them as already read, I knew these all had to be new message.  \n\nFrom a prior activity with the news.mozilla.org server, my Server Settings had 50 for \"Ask me before downloading more than nnn messages\".  Thus, I got a dialogue popup in which I changed the 50 to 500 (my usual setting).  Thunderbird immediately downloaded the 62 message headers and then slowly proceeded again to download the headers.  However, this time, it downloaded 500 of the 62!   \n\nObviously, something worse than merely inefficient filtering is involved.", "is_private": false, "bug_id": 622484, "id": 5257834, "time": "2011-02-05T18:40:25Z", "count": 4}, {"tags": [], "author": "david@rossde.com", "creation_time": "2011-02-10T21:47:06Z", "attachment_id": null, "creator": "david@rossde.com", "text": "Okay.  I installed ProcMon and logged about 2-3 minutes of file system activity for Thunderbird filtering new headers for a newsgroup.  I then saved the log as a PML file.  It's over 130 MB.  I don't know what you (Wayne Mery) want filtered or how you want me to send the log.", "time": "2011-02-10T21:47:06Z", "count": 5, "id": 5270779, "raw_text": "Okay.  I installed ProcMon and logged about 2-3 minutes of file system activity for Thunderbird filtering new headers for a newsgroup.  I then saved the log as a PML file.  It's over 130 MB.  I don't know what you (Wayne Mery) want filtered or how you want me to send the log.", "is_private": false, "bug_id": 622484}, {"time": "2011-06-11T13:58:17Z", "author": "vseerror@lehigh.edu", "creation_time": "2011-06-11T13:58:17Z", "count": 6, "tags": [], "bug_id": 622484, "is_private": false, "raw_text": "Given that this is a windows machine, (and despite the issue is localized to Thunderbird), before we proceed further I feel obligated to ask if the symptoms reduce if you temporarily disable antivirus and non-windows firewall software?\n\nAlso before continuing to diagnosis, it would be useful to know if conditions improve using thunderbird version 5\n\nAnd a further thought - can you reproduce this slowness with similar filter conditions but in a newsgroup with far fewer articles?", "text": "Given that this is a windows machine, (and despite the issue is localized to Thunderbird), before we proceed further I feel obligated to ask if the symptoms reduce if you temporarily disable antivirus and non-windows firewall software?\n\nAlso before continuing to diagnosis, it would be useful to know if conditions improve using thunderbird version 5\n\nAnd a further thought - can you reproduce this slowness with similar filter conditions but in a newsgroup with far fewer articles?", "id": 5526682, "attachment_id": null, "creator": "vseerror@lehigh.edu"}, {"is_private": false, "bug_id": 622484, "raw_text": "I'm another which have discussed the issue with David in the newsgroups and have experienced the same before, but using SeaMonkey instead of Thunderbird.  I don't run any anti-virus or firewall software for that matter.\n\nThe issue is steadily reproducible with a single filter with a single rule which references a header which value could only be fetched with a whole message.  The problem is, even when the filter is disabled it continues to cause download of the whole messages.\n\nThe number of new articles in a group surely affects the overall time spent.  The news server seems to matter, also - the news://news.mozilla.org/ is much slower than news://news.eternal-september.org/ for me, for example.\n\nI'm not sure whether this issue targets just fixing the problem with disabled filters causing unnecessary download of the whole messages, or how to improve the download of whole messages.  I guess the later is not something which could be improved significantly.", "id": 5526726, "count": 7, "time": "2011-06-11T15:21:47Z", "text": "I'm another which have discussed the issue with David in the newsgroups and have experienced the same before, but using SeaMonkey instead of Thunderbird.  I don't run any anti-virus or firewall software for that matter.\n\nThe issue is steadily reproducible with a single filter with a single rule which references a header which value could only be fetched with a whole message.  The problem is, even when the filter is disabled it continues to cause download of the whole messages.\n\nThe number of new articles in a group surely affects the overall time spent.  The news server seems to matter, also - the news://news.mozilla.org/ is much slower than news://news.eternal-september.org/ for me, for example.\n\nI'm not sure whether this issue targets just fixing the problem with disabled filters causing unnecessary download of the whole messages, or how to improve the download of whole messages.  I guess the later is not something which could be improved significantly.", "creator": "stanio@yahoo.com", "attachment_id": null, "creation_time": "2011-06-11T15:21:47Z", "author": "stanio@yahoo.com", "tags": []}, {"author": "david@rossde.com", "time": "2011-06-11T17:29:32Z", "count": 8, "creation_time": "2011-06-11T17:29:32Z", "tags": [], "raw_text": "Yes, the slowness is proportional to the number of headers.  A newsgroup with 10 new headers goes an order of magnitude faster than a new newsgroup with 50,000 headers.  The actually downloading is quite fast through my broadband connection.  It's the second pass through the headers -- the filtering pass -- that is slow.  \n\nI suspect there is an inefficiency in how TBird loops through messages and filters.  I once coded such an inefficiency myself when I first started programming almost 50 years ago.  It involved a loop within a loop.  By taking the inner loop and making it the outer loop, a process that would take an hour instead completed in a minute with no real impact on the result.  \n\nIt will be a few days before I have time to try recreating the problem with firewalls and anti-virus disabled.  \n\nI still have the Logfile.PML file from 10 Feb 11.  Does anyone still want it?", "bug_id": 622484, "is_private": false, "text": "Yes, the slowness is proportional to the number of headers.  A newsgroup with 10 new headers goes an order of magnitude faster than a new newsgroup with 50,000 headers.  The actually downloading is quite fast through my broadband connection.  It's the second pass through the headers -- the filtering pass -- that is slow.  \n\nI suspect there is an inefficiency in how TBird loops through messages and filters.  I once coded such an inefficiency myself when I first started programming almost 50 years ago.  It involved a loop within a loop.  By taking the inner loop and making it the outer loop, a process that would take an hour instead completed in a minute with no real impact on the result.  \n\nIt will be a few days before I have time to try recreating the problem with firewalls and anti-virus disabled.  \n\nI still have the Logfile.PML file from 10 Feb 11.  Does anyone still want it?", "attachment_id": null, "id": 5526815, "creator": "david@rossde.com"}, {"time": "2011-06-11T20:40:29Z", "count": 9, "raw_text": "(In reply to comment #6)\n> And a further thought - can you reproduce this slowness with similar filter\n> conditions but in a newsgroup with far fewer articles?\n\nto clarify comment 6 - what I mean is whether the increase in time to process X new headers changes with an increase in Y existing articles. For example\n- if 50 messages downloaded into a newsgroup of 1,000 messages takes 60 seconds\n- then 50 messages downloaded into a newsgroup of 10,000 message should NOT take substantially more than 60 seconds.", "is_private": false, "bug_id": 622484, "id": 5526931, "author": "vseerror@lehigh.edu", "creation_time": "2011-06-11T20:40:29Z", "tags": [], "text": "(In reply to comment #6)\n> And a further thought - can you reproduce this slowness with similar filter\n> conditions but in a newsgroup with far fewer articles?\n\nto clarify comment 6 - what I mean is whether the increase in time to process X new headers changes with an increase in Y existing articles. For example\n- if 50 messages downloaded into a newsgroup of 1,000 messages takes 60 seconds\n- then 50 messages downloaded into a newsgroup of 10,000 message should NOT take substantially more than 60 seconds.", "attachment_id": null, "creator": "vseerror@lehigh.edu"}, {"attachment_id": null, "id": 5526938, "creator": "vseerror@lehigh.edu", "raw_text": "(In reply to comment #7)\n> I'm another which have discussed the issue with David in the newsgroups and\n> have experienced the same before, but using SeaMonkey instead of\n> Thunderbird.  I don't run any anti-virus or firewall software for that\n> matter.\n> \n> The issue is steadily reproducible with a single filter with a single rule\n> which references a header which value could only be fetched with a whole\n> message.  \n\nby whole message, do you mean body of the news article? \n\nD.E.R. has mentioned only headers, and not body, so your issue might need a different bug report.\n\nIs there anything useful in the newsgroup postings you have mode?\n\nxef bug 138208, bug 571419", "is_private": false, "bug_id": 622484, "text": "(In reply to comment #7)\n> I'm another which have discussed the issue with David in the newsgroups and\n> have experienced the same before, but using SeaMonkey instead of\n> Thunderbird.  I don't run any anti-virus or firewall software for that\n> matter.\n> \n> The issue is steadily reproducible with a single filter with a single rule\n> which references a header which value could only be fetched with a whole\n> message.  \n\nby whole message, do you mean body of the news article? \n\nD.E.R. has mentioned only headers, and not body, so your issue might need a different bug report.\n\nIs there anything useful in the newsgroup postings you have mode?\n\nxef bug 138208, bug 571419", "tags": [], "author": "vseerror@lehigh.edu", "time": "2011-06-11T20:54:55Z", "count": 10, "creation_time": "2011-06-11T20:54:55Z"}, {"text": "> by whole message, do you mean body of the news article? \n\nI admit I'm just speculating.  I don't know much of the NNTP mechanics, but I'm aware the protocol has a request type fetching just few basic headers, and for the rest it has to fetch the full headers, if not the full message including body.", "bug_id": 622484, "is_private": false, "raw_text": "> by whole message, do you mean body of the news article? \n\nI admit I'm just speculating.  I don't know much of the NNTP mechanics, but I'm aware the protocol has a request type fetching just few basic headers, and for the rest it has to fetch the full headers, if not the full message including body.", "creator": "stanio@yahoo.com", "id": 5527527, "attachment_id": null, "creation_time": "2011-06-12T09:44:28Z", "count": 11, "time": "2011-06-12T09:44:28Z", "author": "stanio@yahoo.com", "tags": []}, {"creator": "david@rossde.com", "attachment_id": null, "id": 5530322, "text": "I waited and waited, without connecting to a news server that I often use.  I disabled my anti-virus application and both the software (Windows XP) and hardware (Netgear router) firewalls.  Then I went to the server.  There were too few new messages to test this problem.  I will have to repeat the test by subscribing to a really large newsgroup.  That will have to wait.", "raw_text": "I waited and waited, without connecting to a news server that I often use.  I disabled my anti-virus application and both the software (Windows XP) and hardware (Netgear router) firewalls.  Then I went to the server.  There were too few new messages to test this problem.  I will have to repeat the test by subscribing to a really large newsgroup.  That will have to wait.", "is_private": false, "bug_id": 622484, "tags": [], "count": 12, "creation_time": "2011-06-14T00:06:41Z", "author": "david@rossde.com", "time": "2011-06-14T00:06:41Z"}, {"time": "2011-12-30T22:53:23Z", "author": "david@rossde.com", "creation_time": "2011-12-30T22:53:23Z", "count": 13, "tags": [], "is_private": false, "bug_id": 622484, "raw_text": "Today, I ran three tests.  For Test #1, I disabled all filters by changing the name of the msgFilterRules.dat file; for this test, headers downloaded in seconds.  For Test #2, all my filters were enabled.  Test #3 repeated Test #2 but with anti-virus software and firewalls disabled.  For these two, not all headers downloaded even after many minutes.  \n\nDetailed descriptions of these tests are in the attached PDF file.  The file also describes my configuration.", "text": "Created attachment 585056\nTest Procedures and Results for 3 Tests\n\nToday, I ran three tests.  For Test #1, I disabled all filters by changing the name of the msgFilterRules.dat file; for this test, headers downloaded in seconds.  For Test #2, all my filters were enabled.  Test #3 repeated Test #2 but with anti-virus software and firewalls disabled.  For these two, not all headers downloaded even after many minutes.  \n\nDetailed descriptions of these tests are in the attached PDF file.  The file also describes my configuration.", "id": 5947681, "attachment_id": 585056, "creator": "david@rossde.com"}, {"id": 6035518, "bug_id": 622484, "is_private": false, "raw_text": "(In reply to David E. Ross from comment #5)\n> I installed ProcMon and logged about 2-3 minutes of file system\n> activity for Thunderbird filtering new headers for a newsgroup.\n> I then saved the log as a PML file.\n\nIf PML file, Performance Monitor is neded to see log data. Save in .csv file. If .csv file, you can see it by Text Editor, Excell, Lotus 1-2-3 etc.\n\n> It's over 130 MB.\n\nTrace/Log data is usualy huge. Get log for short period first, check .csv file content by text editor, add filter rule to reduce irrelevant logs(limit file name, etc.), stop excess activity(new mail check by Tb etc.), get log for a while again, ...., repeat it.\n\n(In reply to David E. Ross from comment #13)\n> Test Procedures and Results for 3 Tests\n\nTo know what is executed at NNTP protocol level(download of minimum headers, download of full headers, download of body, etc.), and to know how long does it take to execue an action(dwenload of body etc.), Tb's protocol log with timestamp is needed. Get minimum NNTP log for download of small number of news articles(for example, 10 articles only) first, view log file, check NNTP level flow.\n  See bug 402793 comment #28 for getting log.\n    SET NSPR_LOG_MODULES=timestamp,nntp:5\n  Stop automatic new message check of any account, or create new profile,\n  create relevant news account only, subscribe relevant newsgroup only.\n  Get minimum NNTP log for two cases: (same anti-virus/firewall condition)\n    (a) With message filter disabled. (b) With message filter enabled.\nWhat kind of difference is seen in log? Body is fetched in (b) only?\n\nBy the way, as performance related problem, performance data is needed. At least check of difference among following cases is needed.\n>                                    Number of downloaded message \n> (A) With message filter disabled : (A-1) small(100), (A-2) medium(1,000), (A-3) large(10,000)\n> (B) With message filter disabled : (B-1) small(100), (B-2) medium(1,000), (B-3) large(10,000)\n> (number in above is merely example. required number depends on environment or test case)\n> (number of \"large\" case should be carefully chosen. minimum \"large value\" should be chosen in testing.)\nIf time to complete process is O(number of message), it's usually normal,\n Required time per a mail in (A) == Ta,           Number of messages=N,\n   Total time for (A) == Ta * N\n Required time per a mail in (B) == Tb == Ta + X, Number of messages=N,\n   Total time for (B) == Tb * N (== { Ta + X } + N )\nand if X is far larger than our expectation, something wrong may exist in the additional X.\nIf time to complete process is O( {number of message} ** 2 ) or something, it's apparently something wrong exists in multiple news message processsing.", "count": 14, "time": "2012-02-05T06:58:01Z", "creator": "m-wada@usa.com", "attachment_id": null, "text": "(In reply to David E. Ross from comment #5)\n> I installed ProcMon and logged about 2-3 minutes of file system\n> activity for Thunderbird filtering new headers for a newsgroup.\n> I then saved the log as a PML file.\n\nIf PML file, Performance Monitor is neded to see log data. Save in .csv file. If .csv file, you can see it by Text Editor, Excell, Lotus 1-2-3 etc.\n\n> It's over 130 MB.\n\nTrace/Log data is usualy huge. Get log for short period first, check .csv file content by text editor, add filter rule to reduce irrelevant logs(limit file name, etc.), stop excess activity(new mail check by Tb etc.), get log for a while again, ...., repeat it.\n\n(In reply to David E. Ross from comment #13)\n> Test Procedures and Results for 3 Tests\n\nTo know what is executed at NNTP protocol level(download of minimum headers, download of full headers, download of body, etc.), and to know how long does it take to execue an action(dwenload of body etc.), Tb's protocol log with timestamp is needed. Get minimum NNTP log for download of small number of news articles(for example, 10 articles only) first, view log file, check NNTP level flow.\n  See bug 402793 comment #28 for getting log.\n    SET NSPR_LOG_MODULES=timestamp,nntp:5\n  Stop automatic new message check of any account, or create new profile,\n  create relevant news account only, subscribe relevant newsgroup only.\n  Get minimum NNTP log for two cases: (same anti-virus/firewall condition)\n    (a) With message filter disabled. (b) With message filter enabled.\nWhat kind of difference is seen in log? Body is fetched in (b) only?\n\nBy the way, as performance related problem, performance data is needed. At least check of difference among following cases is needed.\n>                                    Number of downloaded message \n> (A) With message filter disabled : (A-1) small(100), (A-2) medium(1,000), (A-3) large(10,000)\n> (B) With message filter disabled : (B-1) small(100), (B-2) medium(1,000), (B-3) large(10,000)\n> (number in above is merely example. required number depends on environment or test case)\n> (number of \"large\" case should be carefully chosen. minimum \"large value\" should be chosen in testing.)\nIf time to complete process is O(number of message), it's usually normal,\n Required time per a mail in (A) == Ta,           Number of messages=N,\n   Total time for (A) == Ta * N\n Required time per a mail in (B) == Tb == Ta + X, Number of messages=N,\n   Total time for (B) == Tb * N (== { Ta + X } + N )\nand if X is far larger than our expectation, something wrong may exist in the additional X.\nIf time to complete process is O( {number of message} ** 2 ) or something, it's apparently something wrong exists in multiple news message processsing.", "tags": [], "creation_time": "2012-02-05T06:58:01Z", "author": "m-wada@usa.com"}, {"raw_text": "I only generated the Procmon log in response to the request from Wayne Mery (comment #1 and comment #3).  If I could view it, I would not know how to use it.  The log would now be a year (and many versions of Thunderbird) old and not likely to be of use today.  It has thus been deleted.  \n\nIn the meantime, I have confirmed (comment #13 and the attachment) that this is indeed a problem with using filters and is not affected by the presence of a firewall or anti-virus scanning.  \n\nI retired from software testing more than 8 years ago and have become somewhat rusty.  When I was a software tester, it was at the system level and not the component level.  Thus, I do not feel adequate to perform the additional testing described in comment #14.  I would hope someone currently active in development or test for Thunderbird would do this.", "bug_id": 622484, "is_private": false, "text": "I only generated the Procmon log in response to the request from Wayne Mery (comment #1 and comment #3).  If I could view it, I would not know how to use it.  The log would now be a year (and many versions of Thunderbird) old and not likely to be of use today.  It has thus been deleted.  \n\nIn the meantime, I have confirmed (comment #13 and the attachment) that this is indeed a problem with using filters and is not affected by the presence of a firewall or anti-virus scanning.  \n\nI retired from software testing more than 8 years ago and have become somewhat rusty.  When I was a software tester, it was at the system level and not the component level.  Thus, I do not feel adequate to perform the additional testing described in comment #14.  I would hope someone currently active in development or test for Thunderbird would do this.", "attachment_id": null, "id": 6035858, "creator": "david@rossde.com", "author": "david@rossde.com", "time": "2012-02-05T16:40:18Z", "count": 15, "creation_time": "2012-02-05T16:40:18Z", "tags": []}, {"tags": [], "count": 16, "creation_time": "2012-02-05T17:05:02Z", "author": "m-wada@usa.com", "time": "2012-02-05T17:05:02Z", "creator": "m-wada@usa.com", "attachment_id": null, "id": 6035873, "text": "(In reply to David E. Ross from comment #15)\n> Thus, I do not feel adequate to perform the additional testing described in comment #14.\n\nI see. \nClosing as INCOMPLETE, because no evidence of \"performance problem due to Tb's bad code actually exists\" will never be provided by opener of this *bug* report at B.M.O.\nPlease note that here is B.M.O to report actual BUG of software called Mozilla to developer and here is never support forum nor Customer Support/Help Center.", "raw_text": "(In reply to David E. Ross from comment #15)\n> Thus, I do not feel adequate to perform the additional testing described in comment #14.\n\nI see. \nClosing as INCOMPLETE, because no evidence of \"performance problem due to Tb's bad code actually exists\" will never be provided by opener of this *bug* report at B.M.O.\nPlease note that here is B.M.O to report actual BUG of software called Mozilla to developer and here is never support forum nor Customer Support/Help Center.", "bug_id": 622484, "is_private": false}, {"bug_id": 622484, "is_private": false, "raw_text": "I am not the only user who has observed this problem; see comment #7.  \n\nI am not an active Mozilla developer or tester.  I believe I have provided sufficient evidence of a real Thunderbird problem.  It is now time for active professionals (volunteer or paid) to resolve it.  \n\nMy attachment provides a test case that indeed shows a major timing difference between downloading 12,000+ headers with and without filters.  This is a Thunderbird problem.  It is not a firewall or anti-virus problem.  Since my test was run all within the same hour, it is not likely a broadband problem.  I strongly doubt this is a news.mozilla.org problem.  \n\nI will not put here what I was really thinking when I saw comment #16.  However, that comment might as well ask me to provide the corrective code as it does explicitly ask for test results beyond my ability.", "text": "I am not the only user who has observed this problem; see comment #7.  \n\nI am not an active Mozilla developer or tester.  I believe I have provided sufficient evidence of a real Thunderbird problem.  It is now time for active professionals (volunteer or paid) to resolve it.  \n\nMy attachment provides a test case that indeed shows a major timing difference between downloading 12,000+ headers with and without filters.  This is a Thunderbird problem.  It is not a firewall or anti-virus problem.  Since my test was run all within the same hour, it is not likely a broadband problem.  I strongly doubt this is a news.mozilla.org problem.  \n\nI will not put here what I was really thinking when I saw comment #16.  However, that comment might as well ask me to provide the corrective code as it does explicitly ask for test results beyond my ability.", "id": 6035941, "attachment_id": null, "creator": "david@rossde.com", "time": "2012-02-05T18:10:29Z", "author": "david@rossde.com", "creation_time": "2012-02-05T18:10:29Z", "count": 17, "tags": []}, {"creator": "vseerror@lehigh.edu", "id": 7513255, "attachment_id": null, "text": "(In reply to David E. Ross from comment #13)\n> Created attachment 585056\n> Test Procedures and Results for 3 Tests\n> \n> Today, I ran three tests.  For Test #1, I disabled all filters by changing\n> the name of the msgFilterRules.dat file; \n\ncan you attach msgFilterRules.dat to the bug report. Or email it?", "is_private": false, "bug_id": 622484, "raw_text": "(In reply to David E. Ross from comment #13)\n> Created attachment 585056\n> Test Procedures and Results for 3 Tests\n> \n> Today, I ran three tests.  For Test #1, I disabled all filters by changing\n> the name of the msgFilterRules.dat file; \n\ncan you attach msgFilterRules.dat to the bug report. Or email it?", "tags": [], "creation_time": "2013-06-08T21:08:58Z", "count": 18, "time": "2013-06-08T21:08:58Z", "author": "vseerror@lehigh.edu"}, {"tags": [], "creation_time": "2013-06-08T23:47:17Z", "count": 19, "time": "2013-06-08T23:47:17Z", "author": "vseerror@lehigh.edu", "creator": "vseerror@lehigh.edu", "id": 7513323, "attachment_id": null, "text": "(In reply to David E. Ross from comment #13)\n> Created attachment 585056\n> Test Procedures and Results for 3 Tests\n> \n> Today, I ran three tests.  For Test #1, I disabled all filters by changing\n> the name of the msgFilterRules.dat file; for this test, headers downloaded\n> in seconds.  For Test #2, all my filters were enabled.  Test #3 repeated\n> Test #2 but with anti-virus software and firewalls disabled.  For these two,\n> not all headers downloaded even after many minutes.  \n\n> Detailed descriptions of these tests are in the attached PDF file.  The file\n> also describes my configuration.\n\nyou *really* should be testing with no addons\n\n\nfrom the pdf ...\n\nSetup for all tests\n1. Thunderbird is not running.\n2. All tests begin without a subscription to for the mozilla.dev.apps.thunderbird\nnewsgroup.\n3. Verify that the Thunderbird profile has no files for the mozilla.dev.apps.thunderbird\nnewsgroup.\nNote: At start of downloading, the indication is there are 12,681 headers.\nTest #1: No filters\n1. Rename file msgFilterRules.dat to be x- msgFilterRules.dat-x to suppress use of\nfilters.\n2. Launch Thunderbird with the account for news.mozilla.org collapsed.\n3. Subscribe to mozilla.dev.apps.thunderbird.\n4. Expand the account for news.mozilla.org.\n5. When the Download Headers popup dialogue appears, select the \u201cDownload all\nheaders\u201d radio button and then the Download button.\n6. Note the time taken to download.\n7. Terminate Thunderbird.\n8. Delete file msgFilterRules.dat and rename file x-msgFilterRules.dat-x to be\nmsgFilterRules.dat to enable the use of filters.\nResult: Downloading required less than 30 seconds.\nTest #2: Filters\n1. Launch Thunderbird with the account for news.mozilla.org collapsed.\n2. Subscribe to mozilla.dev.apps.thunderbird.\n3. Expand the account for news.mozilla.org.\n4. When the Download Headers popup dialogue appears, select the \u201cDownload all\nheaders\u201d radio button and then the Download button.\n5. Note the time at start of download.\n6. Terminate Thunderbird after 20 minutes.\nResult: Less than 1,600 headers downloaded (slower than 80 headers per minute).\nTest #3: Filters with No Anti-Virus or Firewalls\n1. Disable Windows XP and Netgear router firewalls.\n2. Disable AVG Anti-Virus for the maximum allowed duration of 15 minutes.\n3. Launch Thunderbird with the account for news.mozilla.org collapsed.\n4. Subscribe to mozilla.dev.apps.thunderbird.\n5. Expand the account for news.mozilla.org.\n6. When the Download Headers popup dialogue appears, select the \u201cDownload all\nheaders\u201d radio button and then the Download button.\n7. Note the time at start of download.\n8. Terminate Thunderbird after 14 minutes.\n9. Enable Windows XP and Netgear router firewalls.\n10. Enable AVG Anti-Virus for the maximum allowed duration of 15 minutes.\nResult: Less than 800 headers downloaded (slower than 60 headers per minute).\nConfiguration\nWindows XP SP3", "bug_id": 622484, "is_private": false, "raw_text": "(In reply to David E. Ross from comment #13)\n> Created attachment 585056\n> Test Procedures and Results for 3 Tests\n> \n> Today, I ran three tests.  For Test #1, I disabled all filters by changing\n> the name of the msgFilterRules.dat file; for this test, headers downloaded\n> in seconds.  For Test #2, all my filters were enabled.  Test #3 repeated\n> Test #2 but with anti-virus software and firewalls disabled.  For these two,\n> not all headers downloaded even after many minutes.  \n\n> Detailed descriptions of these tests are in the attached PDF file.  The file\n> also describes my configuration.\n\nyou *really* should be testing with no addons\n\n\nfrom the pdf ...\n\nSetup for all tests\n1. Thunderbird is not running.\n2. All tests begin without a subscription to for the mozilla.dev.apps.thunderbird\nnewsgroup.\n3. Verify that the Thunderbird profile has no files for the mozilla.dev.apps.thunderbird\nnewsgroup.\nNote: At start of downloading, the indication is there are 12,681 headers.\nTest #1: No filters\n1. Rename file msgFilterRules.dat to be x- msgFilterRules.dat-x to suppress use of\nfilters.\n2. Launch Thunderbird with the account for news.mozilla.org collapsed.\n3. Subscribe to mozilla.dev.apps.thunderbird.\n4. Expand the account for news.mozilla.org.\n5. When the Download Headers popup dialogue appears, select the \u201cDownload all\nheaders\u201d radio button and then the Download button.\n6. Note the time taken to download.\n7. Terminate Thunderbird.\n8. Delete file msgFilterRules.dat and rename file x-msgFilterRules.dat-x to be\nmsgFilterRules.dat to enable the use of filters.\nResult: Downloading required less than 30 seconds.\nTest #2: Filters\n1. Launch Thunderbird with the account for news.mozilla.org collapsed.\n2. Subscribe to mozilla.dev.apps.thunderbird.\n3. Expand the account for news.mozilla.org.\n4. When the Download Headers popup dialogue appears, select the \u201cDownload all\nheaders\u201d radio button and then the Download button.\n5. Note the time at start of download.\n6. Terminate Thunderbird after 20 minutes.\nResult: Less than 1,600 headers downloaded (slower than 80 headers per minute).\nTest #3: Filters with No Anti-Virus or Firewalls\n1. Disable Windows XP and Netgear router firewalls.\n2. Disable AVG Anti-Virus for the maximum allowed duration of 15 minutes.\n3. Launch Thunderbird with the account for news.mozilla.org collapsed.\n4. Subscribe to mozilla.dev.apps.thunderbird.\n5. Expand the account for news.mozilla.org.\n6. When the Download Headers popup dialogue appears, select the \u201cDownload all\nheaders\u201d radio button and then the Download button.\n7. Note the time at start of download.\n8. Terminate Thunderbird after 14 minutes.\n9. Enable Windows XP and Netgear router firewalls.\n10. Enable AVG Anti-Virus for the maximum allowed duration of 15 minutes.\nResult: Less than 800 headers downloaded (slower than 60 headers per minute).\nConfiguration\nWindows XP SP3"}, {"creator": "vseerror@lehigh.edu", "id": 7513324, "attachment_id": null, "text": "WFM\n\nSummary - I can't reproduce this in my version 24 attempt with a reduced testcase, i.e. fewer filters.  I tested current trunk, not D.E.R.'s version 9.  Several areas including filters have changed between version 9 and my version 24.  Adding any more filters increases download time, but increasing number of filters does not substantially affect download time.\n\nSituation: need D.E.R. restest with version 24, no addons, no AV software - in fact testing with XP in windows safe mode is recommended. If problem still reproduces, determine \na) reduced testcase - for example what is the least number of filters needed to substantially reproduce the problem?\nb) what is the total CPU consumption during the download period? (so we can say whether there is a code efficiency problem)\n\nMy setup:\n24.0a1 (2013-06-08) on vista laptop\ncablemodem via home wireless\nmozilla.support.thunderbird\n13406 articles\n~4.7MB .msf newsgroup file\n\n1. no filter \n18 seconds download\n\n2. 4 filter sets, two each of match=any [1] and match=all [2]\n25 seconds download\nhttp://people.mozilla.com/~bgirard/cleopatra/?1370729030217#report=a05981c03388a0115a3b8febced7cfa959653506\n\n3. 2 filter sets, two match=all [2]\n25 seconds download\n\n4. 2 filter sets, two each of match=any [1] and two match=all [2], plus 5 filters with one subject contains zzzz, and one filter with 50 match any subject contains zzzz\n25 seconds download\n\nrunning test #2 filters on already downloaded newsgroup is 3 seconds cpu, ~3 seconds wall time.  So, there is a disconnect of roughly 4 seconds. But still, overall performance is good.\n\n[1] match=any are both subject contains abcz\n[2] match=all are both subject contains abcz and zz", "bug_id": 622484, "is_private": false, "raw_text": "WFM\n\nSummary - I can't reproduce this in my version 24 attempt with a reduced testcase, i.e. fewer filters.  I tested current trunk, not D.E.R.'s version 9.  Several areas including filters have changed between version 9 and my version 24.  Adding any more filters increases download time, but increasing number of filters does not substantially affect download time.\n\nSituation: need D.E.R. restest with version 24, no addons, no AV software - in fact testing with XP in windows safe mode is recommended. If problem still reproduces, determine \na) reduced testcase - for example what is the least number of filters needed to substantially reproduce the problem?\nb) what is the total CPU consumption during the download period? (so we can say whether there is a code efficiency problem)\n\nMy setup:\n24.0a1 (2013-06-08) on vista laptop\ncablemodem via home wireless\nmozilla.support.thunderbird\n13406 articles\n~4.7MB .msf newsgroup file\n\n1. no filter \n18 seconds download\n\n2. 4 filter sets, two each of match=any [1] and match=all [2]\n25 seconds download\nhttp://people.mozilla.com/~bgirard/cleopatra/?1370729030217#report=a05981c03388a0115a3b8febced7cfa959653506\n\n3. 2 filter sets, two match=all [2]\n25 seconds download\n\n4. 2 filter sets, two each of match=any [1] and two match=all [2], plus 5 filters with one subject contains zzzz, and one filter with 50 match any subject contains zzzz\n25 seconds download\n\nrunning test #2 filters on already downloaded newsgroup is 3 seconds cpu, ~3 seconds wall time.  So, there is a disconnect of roughly 4 seconds. But still, overall performance is good.\n\n[1] match=any are both subject contains abcz\n[2] match=all are both subject contains abcz and zz", "tags": [], "creation_time": "2013-06-08T23:56:08Z", "count": 20, "time": "2013-06-08T23:56:08Z", "author": "vseerror@lehigh.edu"}, {"creation_time": "2013-06-09T00:16:51Z", "count": 21, "time": "2013-06-09T00:16:51Z", "author": "vseerror@lehigh.edu", "tags": [], "text": "(In reply to Stanimir Stamenkov from comment #7)\n> The issue is steadily reproducible with a single filter with a single rule\n> which references a header which value could only be fetched with a whole\n> message.  The problem is, even when the filter is disabled it continues to\n> cause download of the whole messages.\n\nDo you mean a custom header?\nDetails please.\nExample filter definition, etc\n\nThanks", "is_private": false, "bug_id": 622484, "raw_text": "(In reply to Stanimir Stamenkov from comment #7)\n> The issue is steadily reproducible with a single filter with a single rule\n> which references a header which value could only be fetched with a whole\n> message.  The problem is, even when the filter is disabled it continues to\n> cause download of the whole messages.\n\nDo you mean a custom header?\nDetails please.\nExample filter definition, etc\n\nThanks", "creator": "vseerror@lehigh.edu", "id": 7513328, "attachment_id": null}, {"tags": [], "count": 22, "creation_time": "2013-06-09T00:25:54Z", "author": "david@rossde.com", "time": "2013-06-09T00:25:54Z", "creator": "david@rossde.com", "attachment_id": 760162, "id": 7513331, "text": "Created attachment 760162\nMessage Filter Rules for the news.mozilla.org server\n\nPer request in comment #18.", "raw_text": "Per request in comment #18.", "is_private": false, "bug_id": 622484}, {"tags": [], "author": "vseerror@lehigh.edu", "time": "2013-06-09T00:58:50Z", "count": 23, "creation_time": "2013-06-09T00:58:50Z", "attachment_id": null, "id": 7513352, "creator": "vseerror@lehigh.edu", "raw_text": "I can reproduce with attachment 760162.\nKey point is this odd behavior ...\n\nA. I see ALL the headers download quickly.\nB. Then they start downloading again, and status bar increments at rate of 1-2 headers at a time.\n\nAt the end of A mozilla.dev.apps.thunderbird.msf is still 0 bytes.", "is_private": false, "bug_id": 622484, "text": "I can reproduce with attachment 760162.\nKey point is this odd behavior ...\n\nA. I see ALL the headers download quickly.\nB. Then they start downloading again, and status bar increments at rate of 1-2 headers at a time.\n\nAt the end of A mozilla.dev.apps.thunderbird.msf is still 0 bytes."}, {"author": "vseerror@lehigh.edu", "time": "2013-06-09T01:31:50Z", "count": 24, "creation_time": "2013-06-09T01:31:50Z", "tags": [], "raw_text": "D.E.R. you don't state in your setup that you are checking headers for user-agent.\nIn the filter UI, does this filter term show in your Google filter condition?\n\nDefining a minimal testcase here is key...\n\nReproduces with smaller msgfilters.dat and tiny newsgroup mozilla.tools.socorro\n\nversion=\"9\"\nlogging=\"yes\"\nname=\"auto responder\"\nenabled=\"yes\"\ntype=\"20\"\naction=\"Mark read\"\ncondition=\"AND (subject,contains,Schallock, Felix)\"\nname=\"Google\"\nenabled=\"no\"\ntype=\"20\"\naction=\"Mark read\"\ncondition=\"AND (\\\"user-agent\\\",contains,G2/1.0)\"\n\n** Note, the google filter is DISABLED in the testcase.\n** Deleting the google filter avoids the problem.\n\nThe user-agent condition does NOT display in my filter UI\ncondition=\"AND (\\\"user-agent\\\",contains,G2/1.0)\"\n\nAll the google filters in  attachment 760162 are disabled and have a header condition term\n\nSo issue is at least partly that the header condition affects the filtering list and download process even though the filter is disabled.", "bug_id": 622484, "is_private": false, "text": "D.E.R. you don't state in your setup that you are checking headers for user-agent.\nIn the filter UI, does this filter term show in your Google filter condition?\n\nDefining a minimal testcase here is key...\n\nReproduces with smaller msgfilters.dat and tiny newsgroup mozilla.tools.socorro\n\nversion=\"9\"\nlogging=\"yes\"\nname=\"auto responder\"\nenabled=\"yes\"\ntype=\"20\"\naction=\"Mark read\"\ncondition=\"AND (subject,contains,Schallock, Felix)\"\nname=\"Google\"\nenabled=\"no\"\ntype=\"20\"\naction=\"Mark read\"\ncondition=\"AND (\\\"user-agent\\\",contains,G2/1.0)\"\n\n** Note, the google filter is DISABLED in the testcase.\n** Deleting the google filter avoids the problem.\n\nThe user-agent condition does NOT display in my filter UI\ncondition=\"AND (\\\"user-agent\\\",contains,G2/1.0)\"\n\nAll the google filters in  attachment 760162 are disabled and have a header condition term\n\nSo issue is at least partly that the header condition affects the filtering list and download process even though the filter is disabled.", "attachment_id": null, "id": 7513362, "creator": "vseerror@lehigh.edu"}, {"tags": [], "author": "vseerror@lehigh.edu", "time": "2013-06-09T02:19:28Z", "count": 25, "creation_time": "2013-06-09T02:19:28Z", "attachment_id": null, "id": 7513374, "creator": "vseerror@lehigh.edu", "raw_text": "(In reply to Stanimir Stamenkov from comment #11)\n> > by whole message, do you mean body of the news article? \n> \n> I admit I'm just speculating.  I don't know much of the NNTP mechanics, but\n> I'm aware the protocol has a request type fetching just few basic headers,\n> and for the rest it has to fetch the full headers, if not the full message\n> including body.\n\nprecisely correct. it's getting the full headers. Which it should do, if the filter with the condition is enabled.", "bug_id": 622484, "is_private": false, "text": "(In reply to Stanimir Stamenkov from comment #11)\n> > by whole message, do you mean body of the news article? \n> \n> I admit I'm just speculating.  I don't know much of the NNTP mechanics, but\n> I'm aware the protocol has a request type fetching just few basic headers,\n> and for the rest it has to fetch the full headers, if not the full message\n> including body.\n\nprecisely correct. it's getting the full headers. Which it should do, if the filter with the condition is enabled."}, {"creator": "david@rossde.com", "attachment_id": null, "text": "Windows XP SP3\nMozilla/5.0 (Windows NT 5.1; rv:17.0) Gecko/20130509 Thunderbird/17.0.6\n\nRegarding comment #19:  \n\nI ran all three test cases as stated in comment #19, each with a separate launch of Thunderbird in Safe Mode and with all accounts collapsed.  I verified that all extensions and plugins were disabled. During the tests, I avoided other Internet activities.   \n\nI have a 15 Mbps-rated broadband connection via a cable modem (RoadRunner/Time Warner) wired to a Netgear N300 router that, in turn, is wired to my PC.  I am NOT using a wireless Internet connection.  \n\nBefore running Test Case #1, I did not have a subscription for mozilla.dev.apps.thunderbird; nevertheless, I checked and verified no files existed for that newsgroup, including no entry for that newsgroup in file news.mozilla.org.rc.  At the start of Test Case #1, there were 13,696 headers to download.  Downloading took 35 seconds (391 headers per second).  \n\nBefore running Test Case #2, I deleted the subscription for mozilla.dev.apps.thunderbird from Test Case #1 and verified no files remained for that newsgroup, including no entry for that newsgroup in file news.mozilla.org.rc.  At the start, there were still 3,696 headers to download.  I terminated Thunderbird after 20 minutes, at which time 1051 headers had downloaded (0.9 headers per second).  \n\nBefore running Test Case #3, I disabled AVG 2013 until the next reboot, the Windows XP firewall, and the firewall in my Netgear N300 router.  I deleted the subscription for mozilla.dev.apps.thunderbird from Test Case #2 and verified no files remained for that newsgroup, including no entry for that newsgroup in file news.mozilla.org.rc.  At the start, there were still 3,696 headers to download.  I terminated Thunderbird after 14 minutes, at which time 741 headers had downloaded (0.9 headers per second).  \n\nRe comment #24 and comment #25:\n\nYes, I have custom headers in the five Google filters, including UA headers.  In my tests, however, all five Google filters were disabled.  Disabled filters should be ignored and not cause the processing that I have observed.  \n\n---------------------------\n\nPerhaps the filters should be parsed before any downloading.  Then, if a filter requires a full header (e.g., because of a custom header in the filter), full headers should be downloaded ONCE instead of downloading partial headers.  However, a disabled filter does NOT require any header -- full or partial.  \n\nFurthermore, if partial headers can be downloaded at the rate of almost 400 per second, I do not understand why full headers download at the rate of less than one per second.  Surely a full header is not 400 times larger than a partial header.  Is Thunderbird checking each header as it downloads?  Might it be faster to download all the full headers and then check them?", "tags": [], "creation_time": "2013-06-09T03:15:01Z", "author": "david@rossde.com", "id": 7513393, "bug_id": 622484, "is_private": false, "raw_text": "Windows XP SP3\nMozilla/5.0 (Windows NT 5.1; rv:17.0) Gecko/20130509 Thunderbird/17.0.6\n\nRegarding comment #19:  \n\nI ran all three test cases as stated in comment #19, each with a separate launch of Thunderbird in Safe Mode and with all accounts collapsed.  I verified that all extensions and plugins were disabled. During the tests, I avoided other Internet activities.   \n\nI have a 15 Mbps-rated broadband connection via a cable modem (RoadRunner/Time Warner) wired to a Netgear N300 router that, in turn, is wired to my PC.  I am NOT using a wireless Internet connection.  \n\nBefore running Test Case #1, I did not have a subscription for mozilla.dev.apps.thunderbird; nevertheless, I checked and verified no files existed for that newsgroup, including no entry for that newsgroup in file news.mozilla.org.rc.  At the start of Test Case #1, there were 13,696 headers to download.  Downloading took 35 seconds (391 headers per second).  \n\nBefore running Test Case #2, I deleted the subscription for mozilla.dev.apps.thunderbird from Test Case #1 and verified no files remained for that newsgroup, including no entry for that newsgroup in file news.mozilla.org.rc.  At the start, there were still 3,696 headers to download.  I terminated Thunderbird after 20 minutes, at which time 1051 headers had downloaded (0.9 headers per second).  \n\nBefore running Test Case #3, I disabled AVG 2013 until the next reboot, the Windows XP firewall, and the firewall in my Netgear N300 router.  I deleted the subscription for mozilla.dev.apps.thunderbird from Test Case #2 and verified no files remained for that newsgroup, including no entry for that newsgroup in file news.mozilla.org.rc.  At the start, there were still 3,696 headers to download.  I terminated Thunderbird after 14 minutes, at which time 741 headers had downloaded (0.9 headers per second).  \n\nRe comment #24 and comment #25:\n\nYes, I have custom headers in the five Google filters, including UA headers.  In my tests, however, all five Google filters were disabled.  Disabled filters should be ignored and not cause the processing that I have observed.  \n\n---------------------------\n\nPerhaps the filters should be parsed before any downloading.  Then, if a filter requires a full header (e.g., because of a custom header in the filter), full headers should be downloaded ONCE instead of downloading partial headers.  However, a disabled filter does NOT require any header -- full or partial.  \n\nFurthermore, if partial headers can be downloaded at the rate of almost 400 per second, I do not understand why full headers download at the rate of less than one per second.  Surely a full header is not 400 times larger than a partial header.  Is Thunderbird checking each header as it downloads?  Might it be faster to download all the full headers and then check them?", "count": 26, "time": "2013-06-09T03:15:01Z"}, {"creator": "vseerror@lehigh.edu", "attachment_id": null, "id": 7513561, "text": "(In reply to Wayne Mery (:wsmwk) from comment #24)\n> D.E.R. you don't state in your setup that you are checking headers for\n> user-agent.\n> In the filter UI, does this filter term show in your Google filter condition?\n\nI of course know you \"have custom headers in the five Google filters\". My question is different. In the filter *UI*, does this filter term \"user-agent\" *show* in your Google filter condition?", "raw_text": "(In reply to Wayne Mery (:wsmwk) from comment #24)\n> D.E.R. you don't state in your setup that you are checking headers for\n> user-agent.\n> In the filter UI, does this filter term show in your Google filter condition?\n\nI of course know you \"have custom headers in the five Google filters\". My question is different. In the filter *UI*, does this filter term \"user-agent\" *show* in your Google filter condition?", "is_private": false, "bug_id": 622484, "tags": [], "count": 27, "creation_time": "2013-06-09T09:39:17Z", "author": "vseerror@lehigh.edu", "time": "2013-06-09T09:39:17Z"}, {"text": "Wayne, have you added the \"user-agent\" as a custom field in the filter editor?", "is_private": false, "bug_id": 622484, "raw_text": "Wayne, have you added the \"user-agent\" as a custom field in the filter editor?", "creator": "acelists@atlas.sk", "id": 7513598, "attachment_id": null, "creation_time": "2013-06-09T10:37:16Z", "count": 28, "time": "2013-06-09T10:37:16Z", "author": "acelists@atlas.sk", "tags": []}, {"attachment_id": null, "id": 7513792, "creator": "david@rossde.com", "raw_text": "Re comment #27:\n\nSometimes the UA string (header line User-Agent) is merely G2/1.0.  I generally disable this filter because there are often legitimate messages with that.  \n\nSometimes header line User-Agent with G2/1.0 is coupled with the header line X-HTTP-UserAgent with Trident.  I cannot remember if that is the entire value of X-HTTP-UserAgent or a fragment.  \n\nSome spam seems to be associated with particular IP addresses.  Filter Google3 has the header line NNTP-Posting-Host for a number of IP addresses, including some fragments of IP addresses.  \n\nThen there is the filter Google4, which has User-Agent with G2/1.0 and the header line Injection-Info with an IP address.  And filter Google5, again with User-Agent with G2/1.0 and the header line Injection-Info with a fragment of an IP address.  \n\nAll of these filters were constructed by examining the source of spam, flame war, troll, pornography, and other unwanted postings to various news.mozilla.org newsgroups.", "is_private": false, "bug_id": 622484, "text": "Re comment #27:\n\nSometimes the UA string (header line User-Agent) is merely G2/1.0.  I generally disable this filter because there are often legitimate messages with that.  \n\nSometimes header line User-Agent with G2/1.0 is coupled with the header line X-HTTP-UserAgent with Trident.  I cannot remember if that is the entire value of X-HTTP-UserAgent or a fragment.  \n\nSome spam seems to be associated with particular IP addresses.  Filter Google3 has the header line NNTP-Posting-Host for a number of IP addresses, including some fragments of IP addresses.  \n\nThen there is the filter Google4, which has User-Agent with G2/1.0 and the header line Injection-Info with an IP address.  And filter Google5, again with User-Agent with G2/1.0 and the header line Injection-Info with a fragment of an IP address.  \n\nAll of these filters were constructed by examining the source of spam, flame war, troll, pornography, and other unwanted postings to various news.mozilla.org newsgroups.", "tags": [], "author": "david@rossde.com", "time": "2013-06-09T16:46:20Z", "count": 29, "creation_time": "2013-06-09T16:46:20Z"}, {"text": "memory coming back - if my recollection is correct ...\n\nOnce the custom filter is defined it does not matter that the filter is disabled. The specified custom header information is forever associated with the account (filters are per account) so that henceforth the required header data is in the .msf file for potential filtering in the future.  Regardless of account type: imap, nntp, etc", "bug_id": 622484, "is_private": false, "raw_text": "memory coming back - if my recollection is correct ...\n\nOnce the custom filter is defined it does not matter that the filter is disabled. The specified custom header information is forever associated with the account (filters are per account) so that henceforth the required header data is in the .msf file for potential filtering in the future.  Regardless of account type: imap, nntp, etc", "creator": "vseerror@lehigh.edu", "id": 7514095, "attachment_id": null, "creation_time": "2013-06-10T01:02:15Z", "count": 30, "time": "2013-06-10T01:02:15Z", "author": "vseerror@lehigh.edu", "tags": []}]}}}