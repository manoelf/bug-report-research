{"bugs": {"679619": {"comments": [{"raw_text": "User Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_4) AppleWebKit/535.1 (KHTML, like Gecko) Chrome/13.0.782.112 Safari/535.1\n\nSteps to reproduce:\n\n1. Added my Gmail account to Thunderbird.\n2. Selected a message, went to the attachments, and selected \"delete all...\".\n3. Clicked OK when the \"cannot be undone\" prompt was displayed.\n\n\nActual results:\n\nThunderbird showed that the attachments were deleted. BUT when I checked the messages again via Gmail's web interface, it showed:\n\n1. The original e-mail, with a list of attachments that said \"deleted: (filenames of attachment)\"\n2. A duplicate of the original e-mail, with all the attachments intact (see screenshot)\n\n\nExpected results:\n\nNo duplicate e-mails or attachments, just the one e-mail with no attachments.\n\nThis happened with several e-mails, and I only realized it was happening when I saw my \"Using x MB of your y MB\" increasing in Gmail's web interface WHILE I was deleting attachments in Thunderbird, even though I wasn't receiving any new messages.", "attachment_id": 553693, "tags": [], "text": "Created attachment 553693\nScreenshot of duplicates\n\nUser Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_4) AppleWebKit/535.1 (KHTML, like Gecko) Chrome/13.0.782.112 Safari/535.1\n\nSteps to reproduce:\n\n1. Added my Gmail account to Thunderbird.\n2. Selected a message, went to the attachments, and selected \"delete all...\".\n3. Clicked OK when the \"cannot be undone\" prompt was displayed.\n\n\nActual results:\n\nThunderbird showed that the attachments were deleted. BUT when I checked the messages again via Gmail's web interface, it showed:\n\n1. The original e-mail, with a list of attachments that said \"deleted: (filenames of attachment)\"\n2. A duplicate of the original e-mail, with all the attachments intact (see screenshot)\n\n\nExpected results:\n\nNo duplicate e-mails or attachments, just the one e-mail with no attachments.\n\nThis happened with several e-mails, and I only realized it was happening when I saw my \"Using x MB of your y MB\" increasing in Gmail's web interface WHILE I was deleting attachments in Thunderbird, even though I wasn't receiving any new messages.", "bug_id": 679619, "count": 0, "id": 5659014, "is_private": false, "author": "M8R-qbf2b3@mailinator.com", "time": "2011-08-17T07:10:55Z", "creation_time": "2011-08-17T07:10:55Z", "creator": "M8R-qbf2b3@mailinator.com"}, {"is_private": false, "id": 5659819, "count": 1, "author": "vseerror@lehigh.edu", "creator": "vseerror@lehigh.edu", "creation_time": "2011-08-17T16:18:35Z", "time": "2011-08-17T16:18:35Z", "raw_text": "I have not researched, so I can't say if this bug is the same issue originally reported in http://getsatisfaction.com/mozilla_messaging/topics/_detaching_attachment_does_not_delete_original_in_gmail", "attachment_id": null, "text": "I have not researched, so I can't say if this bug is the same issue originally reported in http://getsatisfaction.com/mozilla_messaging/topics/_detaching_attachment_does_not_delete_original_in_gmail", "bug_id": 679619, "tags": []}, {"creator": "rtanglao@mozilla.com", "time": "2011-08-17T20:02:08Z", "creation_time": "2011-08-17T20:02:08Z", "author": "rtanglao@mozilla.com", "is_private": false, "count": 2, "id": 5660583, "tags": [], "bug_id": 679619, "text": "I was able to reproduce using the steps in comment 0", "attachment_id": null, "raw_text": "I was able to reproduce using the steps in comment 0"}, {"raw_text": "This may be related to the unique implementation of Gmail's IMAP to treat Message-IDs as key across multiple folders (mapped from labels). When an attachment is deleted, a copy is created without the attachment and uploaded. Consequently it has the same Message-ID heading as the original message, the latter just being marked as deleted (which is not part of the Gmail model).\n\nThus, I tend to think this is more a limitation in the Gmail IMAP than by Thunderbird itself, given that duplicate messages and deleted status aren't supported by their implementation.", "attachment_id": null, "tags": [], "bug_id": 679619, "text": "This may be related to the unique implementation of Gmail's IMAP to treat Message-IDs as key across multiple folders (mapped from labels). When an attachment is deleted, a copy is created without the attachment and uploaded. Consequently it has the same Message-ID heading as the original message, the latter just being marked as deleted (which is not part of the Gmail model).\n\nThus, I tend to think this is more a limitation in the Gmail IMAP than by Thunderbird itself, given that duplicate messages and deleted status aren't supported by their implementation.", "count": 3, "id": 5660686, "is_private": false, "author": "rsx11m.pub@gmail.com", "creation_time": "2011-08-17T20:32:57Z", "time": "2011-08-17T20:32:57Z", "creator": "rsx11m.pub@gmail.com"}, {"is_private": false, "count": 4, "id": 5661533, "creator": "M8R-qbf2b3@mailinator.com", "creation_time": "2011-08-18T01:56:12Z", "time": "2011-08-18T01:56:12Z", "author": "M8R-qbf2b3@mailinator.com", "attachment_id": null, "raw_text": "Hi, Mr. Mery. Yes, it is the same issue; I'm the Katrina who commented.\n\n(In reply to Wayne Mery (:wsmwk) from comment #1)\n> I have not researched, so I can't say if this bug is the same issue\n> originally reported in\n> http://getsatisfaction.com/mozilla_messaging/topics/\n> _detaching_attachment_does_not_delete_original_in_gmail", "text": "Hi, Mr. Mery. Yes, it is the same issue; I'm the Katrina who commented.\n\n(In reply to Wayne Mery (:wsmwk) from comment #1)\n> I have not researched, so I can't say if this bug is the same issue\n> originally reported in\n> http://getsatisfaction.com/mozilla_messaging/topics/\n> _detaching_attachment_does_not_delete_original_in_gmail", "bug_id": 679619, "tags": []}, {"tags": [], "bug_id": 679619, "text": "Following is IMAP log with Tb 6.0 when \"delete of attachment\" is executed on mail of UID=2 which has flag of \"$label4\"(To Do) and \"nonjunk.\nFor ease of testing, Gmail IMAP's auto-expunge option is disabled and Tb's delete model of \"Just mark it as deleted\" is selected.\n\n> imap.gmail.com:S-B:SendData: 17 append \"B\" (\\Seen $label4 nonjunk) \"17-Dec-2010 18:31:39 +0900\" {2211} \n> (snip)\n>   --------------070301070105060708090100 \n>   Content-Type: text/x-moz-deleted; name=\"Deleted: ECMA-357.pdf\" \n>   Content-Transfer-Encoding: 8bit \n>   Content-Disposition: inline; filename=\"Deleted: ECMA-357.pdf\" \n>   X-Mozilla-Altered: AttachmentDeleted; date=\"Tue Sep 13 13:20:39 2011\" \n>    \n>   You deleted an attachment from this message. The original MIME headers for the attachment were: \n>   Content-Type: application/pdf; \n>    name=\"ECMA-357.pdf\" \n>   Content-Transfer-Encoding: base64 \n>   Content-Disposition: attachment; \n>    filename=\"ECMA-357.pdf\" \n>   --------------070301070105060708090100 \n>\n> imap.gmail.com:S-B:CreateNewLineFromSocket: 17 OK [APPENDUID 602313540 8] (Success) \n>\n> imap.gmail.com:S-B:SendData: 21 UID fetch 8:* (FLAGS) \n> imap.gmail.com:S-B:CreateNewLineFromSocket: * 7 FETCH (UID 8 FLAGS ($label4 NonJunk \\Seen)) \n> imap.gmail.com:S-B:CreateNewLineFromSocket: 21 OK Success \n>\n> imap.gmail.com:S-B:SendData: 22 UID fetch 8 (UID RFC822.SIZE FLAGS BODY.PEEK[HEADER.FIELDS (From To Cc Bcc Subject Date Message-ID Priority X-Priority References Newsgroups In-Reply-To Content-Type received)]) \n>\n> imap.gmail.com:S-B:SendData: 23 uid store 2 +Flags (\\Seen \\Deleted) \n> imap.gmail.com:S-B:CreateNewLineFromSocket: * 1 FETCH (FLAGS (\\Seen \\Deleted $label4 NonJunk) UID 2) \n> imap.gmail.com:S-B:CreateNewLineFromSocket: 23 OK Success \n>\n> imap.gmail.com:S-B:SendData: 24 UID fetch 8 (UID RFC822.SIZE BODY[]) \n> imap.gmail.com:S-B:CreateNewLineFromSocket: * 7 FETCH (UID 8 RFC822.SIZE 2211 BODY[] {2211} \n\nTb appeded new version(UID=8), stored required flags to UID=8, then stored \\Deleted flag to old version(UID=2), as expected.\nAfter it, next is seen:\n  Folder B :\n    UID=2 : Shown with strike-thru line, with trash can icon (\\Deleted is kept) \n    UID=8 : Attachment part is text/x-moz-deleted, as expected.\n  [Gmail]/All Mail :\n    UID=MM : Original mail of UID=2 in folder B (single copy of a mail)\n             This is mail before attachment delete\n    UID=NN : Original mail of UID=8 in folder B (single copy of a mail)\n             This is mail after attachment delete\n\ni.e.\nGmail kept two mails of same mail headers(message-id, subject, from, ... are same) except different headers and data in some parts under multipart/mixed.\n\nAt folder B, \"Mail before attachment delete\"(UID=2) is kept with \\Deleted flag as expected with auto-expunge=Off. The UID=2 is removed from folder B by \"Compact\"(expunge is requested). By expunge, Gmail Label of B is removed from mail of \"UID=MM in All Mail\".\n\nAt Gmail Web Interface, UID=MM(has Gmail Label of \"B\") and UID=NN(has Gmail Label of \"B\") are shown as single conversation(the conversation contains 2 mails).\nAnd, as \"Mail before attachment delete\"(UID=MM) was uploaded to or arrived at Gmail earlier, older \"Mail before attachment delete\"(UID=MM) is shown.\nIf \"Expand All\" is requested, \"Mail before attachment deleted\"(UID=MM) and \"Mail after attachment delete\"(UID=NN) are shown in a conversation.\n\nAbove is same even after \"removal of Gmail Label of B from mail of UID=MM by Compact=expunge at folder B via IMAP\".\nGmail's mail showing at Web Interface looks \"Conversation basis\", intead of \"mail basis\".\nGmail's logic to \"show mails labeled XXX\" at Web Interface seems;\n  Show conversation in which one of member mails has Gmail Label of XXX.\nPlease note that addition of Gmail Label/removal of Gmail Label at Gmail's Web Interface is possible on \"Conversation\" only. \n\nI couldn't observe phenomenon of \"Deleting an attachment in Thunderbird creates a duplicate message WITH the attachment in Gmail\" written as bug summary.\nI could see next phenomenon only;\n  Gmail keeps two versions in All Mail after Tb's detach/delete operation;\n  - mail before detach/delete by Tb, \\Deleted flag is stored  at a mail folder\n  - mail after detach/delete by Tb, appended with modified part\nPhenomenon is merely combination of (a) \"Gmail simply removes Gmail Label from a mail by store flag \\Deleted via IMAP\", (b) Gmail never removes mail from \"All Mail\"([Gmail]/All Mail if via Gmail IMAP) until copy/move of a mail to [Gmail]/Trash or [Gmail]/Spam is requested, (c) Gmail's Web Interface is \"Converstion basis\", is never \"mail basis\", (d) Gmail IMAP is mail basis.\nAll of them is \"Gmail's design\".\n\nWorkaround by mailer:\nDrafts([Gmail]/Drafts) has same problem. However, Gmail looks to have implemented Gmail side workaround for same problem on old draft mail(deleted old version).\n  If \\Draft flag is set, automatically move mail flagged \\Deleted\n  to Trash([Gmail]/Trash via IMAP). See Bug 562748.\nThere is no such workaround for \"original mail of detach/delete by Tb\".\nPoosible workaround by Tb is;\n  Issue \"uid copy XXX [Gmail]/Trash\" instead of \"uid XX store flag \\Deleted\"\n  for old version of detach/delete, if Gmail IMAP.\n\"Deletion of UID=XXX and corresponding mails at mail folders icluding [Gmail]/All Mail by Gmail\" will be notified via IDLE sooner or later, or Tb can know it sooner or later upon next folder access. \nIf a mail is copied/moved to Trash([Gmail]/Trash via IMAP), the mail is removed from \"Conversation at Gmail\" by Gmail.\n\nUser's workaround of Gmail's particularity.\n(1) Move or copy original mail to [Gmail]/Trash.\n(2) Execute detach/delete on a mail at [Gmail]/Trash within 30 days.\n(3) Move new version(detached/deleted) to a folder you want within 30 days.\n    Mail will appear in [Gmail]/All Mail sooner or later.\n(4) If you need to purge old version in [Gmail]/Trash immediately,\n    Shift+Delete(\\Deleted is stored), then Compact(expunge is requested).", "attachment_id": null, "raw_text": "Following is IMAP log with Tb 6.0 when \"delete of attachment\" is executed on mail of UID=2 which has flag of \"$label4\"(To Do) and \"nonjunk.\nFor ease of testing, Gmail IMAP's auto-expunge option is disabled and Tb's delete model of \"Just mark it as deleted\" is selected.\n\n> imap.gmail.com:S-B:SendData: 17 append \"B\" (\\Seen $label4 nonjunk) \"17-Dec-2010 18:31:39 +0900\" {2211} \n> (snip)\n>   --------------070301070105060708090100 \n>   Content-Type: text/x-moz-deleted; name=\"Deleted: ECMA-357.pdf\" \n>   Content-Transfer-Encoding: 8bit \n>   Content-Disposition: inline; filename=\"Deleted: ECMA-357.pdf\" \n>   X-Mozilla-Altered: AttachmentDeleted; date=\"Tue Sep 13 13:20:39 2011\" \n>    \n>   You deleted an attachment from this message. The original MIME headers for the attachment were: \n>   Content-Type: application/pdf; \n>    name=\"ECMA-357.pdf\" \n>   Content-Transfer-Encoding: base64 \n>   Content-Disposition: attachment; \n>    filename=\"ECMA-357.pdf\" \n>   --------------070301070105060708090100 \n>\n> imap.gmail.com:S-B:CreateNewLineFromSocket: 17 OK [APPENDUID 602313540 8] (Success) \n>\n> imap.gmail.com:S-B:SendData: 21 UID fetch 8:* (FLAGS) \n> imap.gmail.com:S-B:CreateNewLineFromSocket: * 7 FETCH (UID 8 FLAGS ($label4 NonJunk \\Seen)) \n> imap.gmail.com:S-B:CreateNewLineFromSocket: 21 OK Success \n>\n> imap.gmail.com:S-B:SendData: 22 UID fetch 8 (UID RFC822.SIZE FLAGS BODY.PEEK[HEADER.FIELDS (From To Cc Bcc Subject Date Message-ID Priority X-Priority References Newsgroups In-Reply-To Content-Type received)]) \n>\n> imap.gmail.com:S-B:SendData: 23 uid store 2 +Flags (\\Seen \\Deleted) \n> imap.gmail.com:S-B:CreateNewLineFromSocket: * 1 FETCH (FLAGS (\\Seen \\Deleted $label4 NonJunk) UID 2) \n> imap.gmail.com:S-B:CreateNewLineFromSocket: 23 OK Success \n>\n> imap.gmail.com:S-B:SendData: 24 UID fetch 8 (UID RFC822.SIZE BODY[]) \n> imap.gmail.com:S-B:CreateNewLineFromSocket: * 7 FETCH (UID 8 RFC822.SIZE 2211 BODY[] {2211} \n\nTb appeded new version(UID=8), stored required flags to UID=8, then stored \\Deleted flag to old version(UID=2), as expected.\nAfter it, next is seen:\n  Folder B :\n    UID=2 : Shown with strike-thru line, with trash can icon (\\Deleted is kept) \n    UID=8 : Attachment part is text/x-moz-deleted, as expected.\n  [Gmail]/All Mail :\n    UID=MM : Original mail of UID=2 in folder B (single copy of a mail)\n             This is mail before attachment delete\n    UID=NN : Original mail of UID=8 in folder B (single copy of a mail)\n             This is mail after attachment delete\n\ni.e.\nGmail kept two mails of same mail headers(message-id, subject, from, ... are same) except different headers and data in some parts under multipart/mixed.\n\nAt folder B, \"Mail before attachment delete\"(UID=2) is kept with \\Deleted flag as expected with auto-expunge=Off. The UID=2 is removed from folder B by \"Compact\"(expunge is requested). By expunge, Gmail Label of B is removed from mail of \"UID=MM in All Mail\".\n\nAt Gmail Web Interface, UID=MM(has Gmail Label of \"B\") and UID=NN(has Gmail Label of \"B\") are shown as single conversation(the conversation contains 2 mails).\nAnd, as \"Mail before attachment delete\"(UID=MM) was uploaded to or arrived at Gmail earlier, older \"Mail before attachment delete\"(UID=MM) is shown.\nIf \"Expand All\" is requested, \"Mail before attachment deleted\"(UID=MM) and \"Mail after attachment delete\"(UID=NN) are shown in a conversation.\n\nAbove is same even after \"removal of Gmail Label of B from mail of UID=MM by Compact=expunge at folder B via IMAP\".\nGmail's mail showing at Web Interface looks \"Conversation basis\", intead of \"mail basis\".\nGmail's logic to \"show mails labeled XXX\" at Web Interface seems;\n  Show conversation in which one of member mails has Gmail Label of XXX.\nPlease note that addition of Gmail Label/removal of Gmail Label at Gmail's Web Interface is possible on \"Conversation\" only. \n\nI couldn't observe phenomenon of \"Deleting an attachment in Thunderbird creates a duplicate message WITH the attachment in Gmail\" written as bug summary.\nI could see next phenomenon only;\n  Gmail keeps two versions in All Mail after Tb's detach/delete operation;\n  - mail before detach/delete by Tb, \\Deleted flag is stored  at a mail folder\n  - mail after detach/delete by Tb, appended with modified part\nPhenomenon is merely combination of (a) \"Gmail simply removes Gmail Label from a mail by store flag \\Deleted via IMAP\", (b) Gmail never removes mail from \"All Mail\"([Gmail]/All Mail if via Gmail IMAP) until copy/move of a mail to [Gmail]/Trash or [Gmail]/Spam is requested, (c) Gmail's Web Interface is \"Converstion basis\", is never \"mail basis\", (d) Gmail IMAP is mail basis.\nAll of them is \"Gmail's design\".\n\nWorkaround by mailer:\nDrafts([Gmail]/Drafts) has same problem. However, Gmail looks to have implemented Gmail side workaround for same problem on old draft mail(deleted old version).\n  If \\Draft flag is set, automatically move mail flagged \\Deleted\n  to Trash([Gmail]/Trash via IMAP). See Bug 562748.\nThere is no such workaround for \"original mail of detach/delete by Tb\".\nPoosible workaround by Tb is;\n  Issue \"uid copy XXX [Gmail]/Trash\" instead of \"uid XX store flag \\Deleted\"\n  for old version of detach/delete, if Gmail IMAP.\n\"Deletion of UID=XXX and corresponding mails at mail folders icluding [Gmail]/All Mail by Gmail\" will be notified via IDLE sooner or later, or Tb can know it sooner or later upon next folder access. \nIf a mail is copied/moved to Trash([Gmail]/Trash via IMAP), the mail is removed from \"Conversation at Gmail\" by Gmail.\n\nUser's workaround of Gmail's particularity.\n(1) Move or copy original mail to [Gmail]/Trash.\n(2) Execute detach/delete on a mail at [Gmail]/Trash within 30 days.\n(3) Move new version(detached/deleted) to a folder you want within 30 days.\n    Mail will appear in [Gmail]/All Mail sooner or later.\n(4) If you need to purge old version in [Gmail]/Trash immediately,\n    Shift+Delete(\\Deleted is stored), then Compact(expunge is requested).", "creator": "m-wada@usa.com", "creation_time": "2011-09-13T07:23:43Z", "time": "2011-09-13T07:23:43Z", "author": "m-wada@usa.com", "is_private": false, "id": 5715119, "count": 5}, {"attachment_id": null, "raw_text": "(retested as part of the June 12, 2013 Thunderbird test day:\nhttps://wiki.mozilla.org/Thunderbird:QA_TestDay:2013-06-12\n)\n\nthis bug can still be reproduced using the steps from comment 0 in thunderbird 24 nightly from June 12, 2013", "bug_id": 679619, "text": "(retested as part of the June 12, 2013 Thunderbird test day:\nhttps://wiki.mozilla.org/Thunderbird:QA_TestDay:2013-06-12\n)\n\nthis bug can still be reproduced using the steps from comment 0 in thunderbird 24 nightly from June 12, 2013", "tags": [], "count": 6, "id": 7527927, "is_private": false, "time": "2013-06-12T22:51:57Z", "creation_time": "2013-06-12T22:51:57Z", "creator": "rtanglao@mozilla.com", "author": "rtanglao@mozilla.com"}, {"attachment_id": null, "raw_text": "In addition to Comment #5.\n\nIf Gmail considers that \"detached/deleted mail\" is same mail as \"original mail\", similar phenomenon to bug 550407 occurs.\nBecause same Message-Id:, same Subject:, same From:, ..., when \"detached/deleted mal\", and because difference is a part of mail payload only, Gmail may consider \"same\".\n\nDecision on \"same or not\"(assign different X-GM-MSGID, or not) is all up to Gmail.\n  1. Full mail (N lines)\n  2. Sub set or Super set of message headers + full mail body\n     (bug 550407)\n  3. full message headers + sub set of mail body (this bug)\n  4. Partial mail (error during upload. upload again)\n     mail of line 1 to line X, where X = 2 to N\nDecision on \"same or not\" by Gmail may depend also on auto-expunge=On/Off.\nBecause action by Gmail/Gmail IMAP on \"stored \\Deleted flag\" is different between auto-expunge=On and auto-expunge=Off, externally observed phenomenon may depend on auto-expunge=On/Off.", "bug_id": 679619, "text": "In addition to Comment #5.\n\nIf Gmail considers that \"detached/deleted mail\" is same mail as \"original mail\", similar phenomenon to bug 550407 occurs.\nBecause same Message-Id:, same Subject:, same From:, ..., when \"detached/deleted mal\", and because difference is a part of mail payload only, Gmail may consider \"same\".\n\nDecision on \"same or not\"(assign different X-GM-MSGID, or not) is all up to Gmail.\n  1. Full mail (N lines)\n  2. Sub set or Super set of message headers + full mail body\n     (bug 550407)\n  3. full message headers + sub set of mail body (this bug)\n  4. Partial mail (error during upload. upload again)\n     mail of line 1 to line X, where X = 2 to N\nDecision on \"same or not\" by Gmail may depend also on auto-expunge=On/Off.\nBecause action by Gmail/Gmail IMAP on \"stored \\Deleted flag\" is different between auto-expunge=On and auto-expunge=Off, externally observed phenomenon may depend on auto-expunge=On/Off.", "tags": [], "id": 7528453, "count": 7, "is_private": false, "time": "2013-06-13T01:40:52Z", "creation_time": "2013-06-13T01:40:52Z", "creator": "m-wada@usa.com", "author": "m-wada@usa.com"}, {"attachment_id": null, "raw_text": "I can reproduce this with an non gmail IMAP Account. Even Thunderbird shows the duplicate mails.", "bug_id": 679619, "text": "I can reproduce this with an non gmail IMAP Account. Even Thunderbird shows the duplicate mails.", "tags": [], "is_private": false, "id": 9833543, "count": 8, "creator": "arctic.donkey@gmx.de", "creation_time": "2015-01-23T10:09:56Z", "time": "2015-01-23T10:09:56Z", "author": "arctic.donkey@gmx.de"}, {"author": "m-wada@usa.com", "creation_time": "2015-01-23T11:04:06Z", "time": "2015-01-23T11:04:06Z", "creator": "m-wada@usa.com", "count": 9, "id": 9833694, "is_private": false, "tags": [], "text": "(In reply to arctic.donkey from comment #8)\n> I can reproduce this with an non gmail IMAP Account. Even Thunderbird shows the duplicate mails.\n\nThis bug is for Gmail IMAP specific issue. This bug is not for generic \"detach/delete doesn't work as you want\".\nFlow of Detach/Delete is pretty simple.\nIf imap,\n  0. Call original mail-x-A, UID=A.\n  1. Create mail data for mail-x-B with attachment Detached/Deleted\n      Upload the data for mail-x-B to imap server (append). Call UID=B\n  2. Delete old mail-x-A, UID=A (uid A store +Flags \\Deleted)\n  That's all.\nBecause it's merely an \"upload of a mail\" + \"delete of other mail\", all is usually up to server.\nGet imap log and look log file content and check imap level flow by yourself.\nBecause of same Message-ID:, same Subject:, same message header, same ..., except Deteched/Deleted part, server may confuse.\n\nAfter it, search B.M.O well for already reported bugs, and open new bug for your problem if and only if actually new problem in Tb, with attaching sufficient data for problem anlysis, please.", "bug_id": 679619, "raw_text": "(In reply to arctic.donkey from comment #8)\n> I can reproduce this with an non gmail IMAP Account. Even Thunderbird shows the duplicate mails.\n\nThis bug is for Gmail IMAP specific issue. This bug is not for generic \"detach/delete doesn't work as you want\".\nFlow of Detach/Delete is pretty simple.\nIf imap,\n  0. Call original mail-x-A, UID=A.\n  1. Create mail data for mail-x-B with attachment Detached/Deleted\n      Upload the data for mail-x-B to imap server (append). Call UID=B\n  2. Delete old mail-x-A, UID=A (uid A store +Flags \\Deleted)\n  That's all.\nBecause it's merely an \"upload of a mail\" + \"delete of other mail\", all is usually up to server.\nGet imap log and look log file content and check imap level flow by yourself.\nBecause of same Message-ID:, same Subject:, same message header, same ..., except Deteched/Deleted part, server may confuse.\n\nAfter it, search B.M.O well for already reported bugs, and open new bug for your problem if and only if actually new problem in Tb, with attaching sufficient data for problem anlysis, please.", "attachment_id": null}, {"author": "john.aaron.rose@gmail.com", "time": "2017-01-26T09:41:22Z", "creation_time": "2017-01-26T09:41:22Z", "creator": "john.aaron.rose@gmail.com", "id": 12012334, "count": 10, "is_private": false, "tags": [], "bug_id": 679619, "text": "Is there a work around for this problem?", "raw_text": "Is there a work around for this problem?", "attachment_id": null}, {"is_private": false, "count": 11, "id": 13457363, "creator": "hello@eco-git.org", "creation_time": "2018-07-09T11:01:59Z", "time": "2018-07-09T11:01:59Z", "author": "hello@eco-git.org", "attachment_id": null, "raw_text": "Unfortunately this problem still persists.\n\nUser agent: Mozilla/5.0 (X11; Linux x86_64; rv:52.0) Gecko/20100101 Thunderbird/52.8.0", "bug_id": 679619, "text": "Unfortunately this problem still persists.\n\nUser agent: Mozilla/5.0 (X11; Linux x86_64; rv:52.0) Gecko/20100101 Thunderbird/52.8.0", "tags": []}, {"is_private": false, "id": 14061700, "count": 12, "author": "justin.salamon@gmail.com", "creator": "justin.salamon@gmail.com", "time": "2019-04-17T23:15:52Z", "creation_time": "2019-04-17T23:15:52Z", "raw_text": "Any updates on this? \n\nStill experiencing this issue: using Thunderbird to delete attachments in a gmail account modifies the original email replacing the attachments with a \"Deleted: <filename>\" placeholder, but also creates a duplicate of the original email with the original attachments still present, the overall outcome being that the attachments are not deleted.\n\nSystem: Thunderbird 60.6.1 (64-bit) running on macOS Mojave 10.14.3\n\nSteps to reproduce:\n* Use Thunderbird to open an email with an attachment from a gmail account (IMAP)\n* In the attachment bar at the bottom, click on down facing arrow and then select \"Delete\" to delete the attachment\n* Search for the same email in gmail and open it\n* The original message will have attachments replaced with \"Deleted: <filename>\" placeholders, but a duplicate of the message containing the original full-size attachments will be created on the same message thread in gmail.\n\nThanks!", "attachment_id": null, "tags": [], "bug_id": 679619, "text": "Any updates on this? \n\nStill experiencing this issue: using Thunderbird to delete attachments in a gmail account modifies the original email replacing the attachments with a \"Deleted: <filename>\" placeholder, but also creates a duplicate of the original email with the original attachments still present, the overall outcome being that the attachments are not deleted.\n\nSystem: Thunderbird 60.6.1 (64-bit) running on macOS Mojave 10.14.3\n\nSteps to reproduce:\n* Use Thunderbird to open an email with an attachment from a gmail account (IMAP)\n* In the attachment bar at the bottom, click on down facing arrow and then select \"Delete\" to delete the attachment\n* Search for the same email in gmail and open it\n* The original message will have attachments replaced with \"Deleted: <filename>\" placeholders, but a duplicate of the message containing the original full-size attachments will be created on the same message thread in gmail.\n\nThanks!"}, {"tags": [], "text": "For those that land here, and want to make the batch cleanups a bit faster, here is a workaround that at least helps with the manual deletion:\n* In Gmail settings make sure \"conversation view\" is turned off so Gmail doesn't who threads\n* In Gmail label the email that you want to detach/delete the attachment of with both \"detach\" and \"detached\" labels\n* In Thunderbird open the detach folder, perform the action you want.\n* In Gmail all duplicates with original attachments will now only be in the detached label, where you can select all and delete it\n\nHope this helps to someone \ud83e\udd37\u200d\u2642\ufe0f", "bug_id": 679619, "attachment_id": null, "raw_text": "For those that land here, and want to make the batch cleanups a bit faster, here is a workaround that at least helps with the manual deletion:\n* In Gmail settings make sure \"conversation view\" is turned off so Gmail doesn't who threads\n* In Gmail label the email that you want to detach/delete the attachment of with both \"detach\" and \"detached\" labels\n* In Thunderbird open the detach folder, perform the action you want.\n* In Gmail all duplicates with original attachments will now only be in the detached label, where you can select all and delete it\n\nHope this helps to someone \ud83e\udd37\u200d\u2642\ufe0f", "creation_time": "2020-10-27T21:54:50Z", "time": "2020-10-27T21:54:50Z", "creator": "emre.b.ergenekon@gmail.com", "author": "emre.b.ergenekon@gmail.com", "id": 15103815, "count": 13, "is_private": false}]}}, "comments": {}}