{"comments": {}, "bugs": {"710499": {"comments": [{"raw_text": "There are only two reasons (lots of things in the purple buffer, we did a GC recently) but it would be nice to see exactly what was the trigger for a particular CC.", "attachment_id": null, "bug_id": 710499, "text": "There are only two reasons (lots of things in the purple buffer, we did a GC recently) but it would be nice to see exactly what was the trigger for a particular CC.", "tags": [], "count": 0, "id": 5914419, "is_private": false, "author": "continuation@gmail.com", "creation_time": "2011-12-14T02:27:19Z", "time": "2011-12-14T02:27:19Z", "creator": "continuation@gmail.com"}, {"time": "2012-02-28T19:45:53Z", "creation_time": "2012-02-28T19:45:53Z", "creator": "continuation@gmail.com", "author": "continuation@gmail.com", "id": 6100080, "count": 1, "is_private": false, "text": "Created attachment 601355\nWIP, on top of bug 728460\n\nThis patch adds telemetry for some of the reasons the cycle collector is invoked.  This only covers the three \"automatic\" reasons it is invoked, not the various places it can be manually invoked.  These three reasons are: we recently did a full GC, we have too many things in the purple buffer, it has been too long since we last did a CC.\n\nBecause it is common for more than one of these reasons to apply at once, I convert the vector of 3 booleans into a value from 1 to 7.\n\nIn my testing with bug 728460, about 70 to 80% of the time the only reason is that we recently had a full GC.  About 7% of the time, the only reason is the purple buffer has too many things in it.  About 20% of the time, both of these conditions apply.  I also saw an instance where the purple buffer was too big and the timer fired.  This is with the current max purple buffer size and timer.  I think the timer should be kicked down to 2 minutes, at least.", "bug_id": 710499, "tags": [], "attachment_id": 601355, "raw_text": "This patch adds telemetry for some of the reasons the cycle collector is invoked.  This only covers the three \"automatic\" reasons it is invoked, not the various places it can be manually invoked.  These three reasons are: we recently did a full GC, we have too many things in the purple buffer, it has been too long since we last did a CC.\n\nBecause it is common for more than one of these reasons to apply at once, I convert the vector of 3 booleans into a value from 1 to 7.\n\nIn my testing with bug 728460, about 70 to 80% of the time the only reason is that we recently had a full GC.  About 7% of the time, the only reason is the purple buffer has too many things in it.  About 20% of the time, both of these conditions apply.  I also saw an instance where the purple buffer was too big and the timer fired.  This is with the current max purple buffer size and timer.  I think the timer should be kicked down to 2 minutes, at least."}, {"count": 2, "id": 6101009, "is_private": false, "time": "2012-02-28T23:45:22Z", "creation_time": "2012-02-28T23:45:22Z", "creator": "continuation@gmail.com", "author": "continuation@gmail.com", "attachment_id": null, "raw_text": "When I change the purple buffer threshold to 200 and set the last ditch timer to 2 minutes, then about 25% of CCs are due to force-GCs, 25% are due to purple buffer, and the rest are due to both.  The average time between CCs is 17 seconds.", "text": "When I change the purple buffer threshold to 200 and set the last ditch timer to 2 minutes, then about 25% of CCs are due to force-GCs, 25% are due to purple buffer, and the rest are due to both.  The average time between CCs is 17 seconds.", "bug_id": 710499, "tags": []}, {"raw_text": "", "attachment_id": 602545, "bug_id": 710499, "text": "Created attachment 602545\nrebased, still a little rough", "tags": [], "count": 3, "id": 6111377, "is_private": false, "author": "continuation@gmail.com", "time": "2012-03-03T01:24:27Z", "creation_time": "2012-03-03T01:24:27Z", "creator": "continuation@gmail.com"}, {"count": 4, "id": 6111378, "is_private": false, "time": "2012-03-03T01:25:31Z", "creation_time": "2012-03-03T01:25:31Z", "creator": "continuation@gmail.com", "author": "continuation@gmail.com", "attachment_id": null, "raw_text": "This needs some cleanup.  I should also probably use reason 0 for the various \"manual\" triggers for the CC, just out of completeness.", "text": "This needs some cleanup.  I should also probably use reason 0 for the various \"manual\" triggers for the CC, just out of completeness.", "bug_id": 710499, "tags": []}]}}}