{"bugs": {"660585": {"comments": [{"bug_id": 660585, "id": 5500947, "count": 0, "is_private": false, "tags": [], "attachment_id": null, "time": "2011-05-30T05:04:03Z", "author": "josh@joshmatthews.net", "creator": "josh@joshmatthews.net", "text": "I don't think the orange spam bugs are a great place to be doing analysis, so I'm going to use this bug instead.  I did some investigation, and came up with a theory for at least one problem that is causing oranges.\n\nLooking at http://tinderbox.mozilla.org/showlog.cgi?log=Try/1306639585.1306639986.25461.gz I can see the problem where the notification that we get in clearIt is not the one we're expecting from 1003, but instead the notification from 506. Notice that 506 claims it succeeds, because we always set the authInfo that's being checked - we don't actually check the login that the login manager stores.  Test 507's notification is wrong, because it just shows us updating the last used time of the login, when we should be resetting from the new value to the old one.  The only reason this could be occurring is that the password change in test 506 is actually triggering a popup as well as a dialog - that's why we don't see a notification until test 1003, which is the first one that attempts to handle popups. The only bit that might not add up with this analysis is the line \n\n>5141 INFO TEST-PASS | /tests/toolkit/components/passwordmgr/test/test_prompt.html | got popup notification\n>5142 INFO TEST-PASS | /tests/toolkit/components/passwordmgr/test/test_prompt.html | Looking for action at index 0\n>5143 INFO TEST-PASS | /tests/toolkit/components/passwordmgr/test/test_prompt.html | at least one notification displayed\n>5144 INFO TEST-PASS | /tests/toolkit/components/passwordmgr/test/test_prompt.html | 1 notifications\n\nwhich seems to say that there is only one password popup in 1003, not two like I would expect. However, I'm not certain precisely what it's counting, so it may not mean anything.", "raw_text": "I don't think the orange spam bugs are a great place to be doing analysis, so I'm going to use this bug instead.  I did some investigation, and came up with a theory for at least one problem that is causing oranges.\n\nLooking at http://tinderbox.mozilla.org/showlog.cgi?log=Try/1306639585.1306639986.25461.gz I can see the problem where the notification that we get in clearIt is not the one we're expecting from 1003, but instead the notification from 506. Notice that 506 claims it succeeds, because we always set the authInfo that's being checked - we don't actually check the login that the login manager stores.  Test 507's notification is wrong, because it just shows us updating the last used time of the login, when we should be resetting from the new value to the old one.  The only reason this could be occurring is that the password change in test 506 is actually triggering a popup as well as a dialog - that's why we don't see a notification until test 1003, which is the first one that attempts to handle popups. The only bit that might not add up with this analysis is the line \n\n>5141 INFO TEST-PASS | /tests/toolkit/components/passwordmgr/test/test_prompt.html | got popup notification\n>5142 INFO TEST-PASS | /tests/toolkit/components/passwordmgr/test/test_prompt.html | Looking for action at index 0\n>5143 INFO TEST-PASS | /tests/toolkit/components/passwordmgr/test/test_prompt.html | at least one notification displayed\n>5144 INFO TEST-PASS | /tests/toolkit/components/passwordmgr/test/test_prompt.html | 1 notifications\n\nwhich seems to say that there is only one password popup in 1003, not two like I would expect. However, I'm not certain precisely what it's counting, so it may not mean anything.", "creation_time": "2011-05-30T05:04:03Z"}, {"creator": "jdinbox@gmail.com", "author": "jdinbox@gmail.com", "count": 1, "is_private": false, "tags": [], "id": 5510272, "bug_id": 660585, "raw_text": "(In reply to comment #0)\n> I don't think the orange spam bugs are a great place to be doing analysis,\n> so I'm going to use this bug instead.\n\nYes, thank you.\n\n\n> Notice that 506 claims it succeeds, because we always set the authInfo\n> that's being checked - we don't actually check the login that the login\n> manager stores.  Test 507's notification is wrong, because it just shows us\n> updating the last used time of the login, when we should be resetting from\n> the new value to the old one.\n\nI'm not sure I'm following.\n\nAre you talking about output generated by the observer? (\"observer for passwordmgr-storage-changed / modifyLogin\") And how the newLogin and oldLogin dumps appear to be identical?\n\nThat is odd.\n\nI'd expect there to be a notification between the output of \"handleDialog running for test 506\" and \"handleDialog running for test 507\", since the password is supposed to be changing. But we don't get a notification until after 507's \"handleDialog done\".\n\nOddly the same thing is happening when the test is green! Could be a different issue, then, but lemme understand this first so that we know we're in a good state for the rest of the test.", "creation_time": "2011-06-03T02:55:55Z", "text": "(In reply to comment #0)\n> I don't think the orange spam bugs are a great place to be doing analysis,\n> so I'm going to use this bug instead.\n\nYes, thank you.\n\n\n> Notice that 506 claims it succeeds, because we always set the authInfo\n> that's being checked - we don't actually check the login that the login\n> manager stores.  Test 507's notification is wrong, because it just shows us\n> updating the last used time of the login, when we should be resetting from\n> the new value to the old one.\n\nI'm not sure I'm following.\n\nAre you talking about output generated by the observer? (\"observer for passwordmgr-storage-changed / modifyLogin\") And how the newLogin and oldLogin dumps appear to be identical?\n\nThat is odd.\n\nI'd expect there to be a notification between the output of \"handleDialog running for test 506\" and \"handleDialog running for test 507\", since the password is supposed to be changing. But we don't get a notification until after 507's \"handleDialog done\".\n\nOddly the same thing is happening when the test is green! Could be a different issue, then, but lemme understand this first so that we know we're in a good state for the rest of the test.", "attachment_id": null, "time": "2011-06-03T02:55:55Z"}, {"attachment_id": null, "time": "2011-06-03T03:37:40Z", "text": "Oooooh. The stored login's password isn't changing because the test doesn't actually try to click the \"change password\" button in the notification (or, really, even look for a notification at all). That's confusing, I probably should have put a comment there!\n\nI think the assumption was that we could just ignore the notification bars, since the main goal was to ensure that the prompt APIs returned the right things (and not so much to see that pwmgr was doing the right thing while prompts were going on).\n\nI wonder if some explicit test logging of what notifications are present would help. Maybe we should wait for (and clear) the notifications. Though I'm not sure that will help with the test failures at hand...", "raw_text": "Oooooh. The stored login's password isn't changing because the test doesn't actually try to click the \"change password\" button in the notification (or, really, even look for a notification at all). That's confusing, I probably should have put a comment there!\n\nI think the assumption was that we could just ignore the notification bars, since the main goal was to ensure that the prompt APIs returned the right things (and not so much to see that pwmgr was doing the right thing while prompts were going on).\n\nI wonder if some explicit test logging of what notifications are present would help. Maybe we should wait for (and clear) the notifications. Though I'm not sure that will help with the test failures at hand...", "creation_time": "2011-06-03T03:37:40Z", "bug_id": 660585, "id": 5510312, "count": 2, "is_private": false, "tags": [], "author": "jdinbox@gmail.com", "creator": "jdinbox@gmail.com"}, {"author": "jdinbox@gmail.com", "creator": "jdinbox@gmail.com", "raw_text": "Pushed http://hg.mozilla.org/mozilla-central/rev/02d683d66b97 to get some more info for debugging.", "creation_time": "2011-06-04T01:14:46Z", "time": "2011-06-04T01:14:46Z", "attachment_id": null, "text": "Pushed http://hg.mozilla.org/mozilla-central/rev/02d683d66b97 to get some more info for debugging.", "id": 5512847, "tags": [], "count": 3, "is_private": false, "bug_id": 660585}, {"author": "jdinbox@gmail.com", "creator": "jdinbox@gmail.com", "attachment_id": null, "time": "2011-06-05T03:29:37Z", "text": "Got a failure with the logging: http://tinderbox.mozilla.org/showlog.cgi?log=Firefox/1307240220.1307240486.31833.gz\n\nSeems that somehow the change-password notification from test 506 is what's getting clicked in 1003's handleLoad(). But that shouldn't be happening because test 1003's handleDialog() is changing the password for a different login (and it's change-password notification should replace the one from 506).\n\nSo either PopupNotifications sometimes isn't replacing the old notification, or it does so too late (ie, race). The only other difference I noticed was the failure log has \"is popup panel open? true\" for 1004's handleLoad(). Not sure if that's significant... Need to ponder that (does it imply anything about when the panel is shown vs when the http auth prompt is shown? does the prompt dismiss the panel?).", "raw_text": "Got a failure with the logging: http://tinderbox.mozilla.org/showlog.cgi?log=Firefox/1307240220.1307240486.31833.gz\n\nSeems that somehow the change-password notification from test 506 is what's getting clicked in 1003's handleLoad(). But that shouldn't be happening because test 1003's handleDialog() is changing the password for a different login (and it's change-password notification should replace the one from 506).\n\nSo either PopupNotifications sometimes isn't replacing the old notification, or it does so too late (ie, race). The only other difference I noticed was the failure log has \"is popup panel open? true\" for 1004's handleLoad(). Not sure if that's significant... Need to ponder that (does it imply anything about when the panel is shown vs when the http auth prompt is shown? does the prompt dismiss the panel?).", "creation_time": "2011-06-05T03:29:37Z", "bug_id": 660585, "id": 5513772, "count": 4, "is_private": false, "tags": []}, {"bug_id": 660585, "id": 5521546, "tags": [], "is_private": false, "count": 5, "author": "ehsan.akhgari@gmail.com", "attachment_id": null, "time": "2011-06-09T02:07:02Z", "text": "OK, I've resisted saying this for a long time, but I think by this point this test is hurting us more than it benefits us.  Justin, how do you feel about me disabling it on mozilla-central until this bug is resolved?  I think by now the issues are well understood, and any trial to get to a fix can be done on the try server with a patch to re-enable the test...\n\n/me is sad :(", "creator": "ehsan.akhgari@gmail.com", "creation_time": "2011-06-09T02:07:02Z", "raw_text": "OK, I've resisted saying this for a long time, but I think by this point this test is hurting us more than it benefits us.  Justin, how do you feel about me disabling it on mozilla-central until this bug is resolved?  I think by now the issues are well understood, and any trial to get to a fix can be done on the try server with a patch to re-enable the test...\n\n/me is sad :("}, {"creator": "philringnalda@gmail.com", "author": "philringnalda@gmail.com", "tags": [], "count": 6, "is_private": false, "id": 5541733, "bug_id": 660585, "creation_time": "2011-06-20T00:03:09Z", "raw_text": "Disabled on Linux in http://hg.mozilla.org/integration/mozilla-inbound/rev/8dd25f69839b", "text": "Disabled on Linux in http://hg.mozilla.org/integration/mozilla-inbound/rev/8dd25f69839b", "time": "2011-06-20T00:03:09Z", "attachment_id": null}, {"author": "mounir@lamouri.fr", "creator": "mounir@lamouri.fr", "attachment_id": null, "time": "2011-06-20T15:49:29Z", "text": "(In reply to comment #6)\n> Disabled on Linux in\n> http://hg.mozilla.org/integration/mozilla-inbound/rev/8dd25f69839b\n\nMerged:\nhttp://hg.mozilla.org/mozilla-central/rev/26f6aa46f70f", "creation_time": "2011-06-20T15:49:29Z", "raw_text": "(In reply to comment #6)\n> Disabled on Linux in\n> http://hg.mozilla.org/integration/mozilla-inbound/rev/8dd25f69839b\n\nMerged:\nhttp://hg.mozilla.org/mozilla-central/rev/26f6aa46f70f", "bug_id": 660585, "id": 5542671, "count": 7, "is_private": false, "tags": []}, {"author": "mozilla+bmo@noorenberghe.ca", "creator": "mozilla+bmo@noorenberghe.ca", "bug_id": 660585, "id": 14458606, "is_private": false, "count": 8, "tags": [], "attachment_id": null, "time": "2019-10-31T07:06:19Z", "text": "This test has been somewhat rewritten years ago so this may be fixed but I didn't attempt a try push on Linux with it enabled.", "raw_text": "This test has been somewhat rewritten years ago so this may be fixed but I didn't attempt a try push on Linux with it enabled.", "creation_time": "2019-10-31T07:06:19Z"}, {"author": "orangefactor@bots.tld", "creator": "orangefactor@bots.tld", "bug_id": 660585, "id": 14780620, "tags": [], "count": 9, "is_private": false, "attachment_id": null, "time": "2020-04-27T06:44:08Z", "text": "2 failures in 5582 pushes (0.0 failures/push) were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* mozilla-beta: 2\n\nPlatform breakdown:\n* windows10-64: 1\n* windows10-64-qr: 1\n\nFor more details, see:\nhttps://treeherder.mozilla.org/intermittent-failures.html#/bugdetails?bug=660585&startday=2020-04-20&endday=2020-04-26&tree=all", "raw_text": "2 failures in 5582 pushes (0.0 failures/push) were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* mozilla-beta: 2\n\nPlatform breakdown:\n* windows10-64: 1\n* windows10-64-qr: 1\n\nFor more details, see:\nhttps://treeherder.mozilla.org/intermittent-failures.html#/bugdetails?bug=660585&startday=2020-04-20&endday=2020-04-26&tree=all", "creation_time": "2020-04-27T06:44:08Z"}, {"creator": "orangefactor@bots.tld", "text": "1 failures in 4327 pushes (0.0 failures/push) were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* autoland: 1\n\nPlatform and build breakdown:\n* windows7-32: 1\n  * opt: 1\n\nFor more details, see:\nhttps://treeherder.mozilla.org/intermittent-failures/bugdetails?bug=660585&startday=2021-02-22&endday=2021-02-28&tree=all", "author": "orangefactor@bots.tld", "time": "2021-03-01T06:40:38Z", "attachment_id": null, "raw_text": "1 failures in 4327 pushes (0.0 failures/push) were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* autoland: 1\n\nPlatform and build breakdown:\n* windows7-32: 1\n  * opt: 1\n\nFor more details, see:\nhttps://treeherder.mozilla.org/intermittent-failures/bugdetails?bug=660585&startday=2021-02-22&endday=2021-02-28&tree=all", "creation_time": "2021-03-01T06:40:38Z", "bug_id": 660585, "tags": [], "count": 10, "is_private": false, "id": 15287751}]}}, "comments": {}}