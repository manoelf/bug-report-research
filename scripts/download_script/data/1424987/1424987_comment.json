{"comments": {}, "bugs": {"1424987": {"comments": [{"count": 0, "attachment_id": null, "id": 12916181, "raw_text": "User Agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36\n\nSteps to reproduce:\n\nSince November 15th we see thousands of additional http requests coming to our SAP webshop server.\n\nThe requests are calling our shop front page via our company webpage (www.hbm.com) which contains a link to the shop.\n\nThis happens also with internal users opening only the internal webpage which also contains a link to the webshop. We have a colleague who opened the internal page for an hour this morning and had over 400 requests to the webshop in our log file. But she did not click on the webshop link at all. She is currently using Firefox 58.0b11 (64bit).\n\nSo it seems that the new Firefox 57/58 is somehow scanning links in the background on our internal and external webpage and connecting the webshop behind hundreds of times. The Firefox user does not see these background connections.\n\nWe have a serious issue with our webshop server as every request causes various connections to our SAP backend systems and slow them down.\n\nPlease send emails answers to owp-support@hbm.com \n\nThank you.\n\nBest regards,\nFrank H\u00f6lscher\n\n\nActual results:\n\nThis are the top ten ip address of a 6 hour log, all using Firefox 57:\n\n116\t80.132.194.196\tp5084c2c4.dip0.t-ipconnect.fr\t\tFirefox 57\n128\t178.15.143.116\tGrob Aircraft  AG\t\tFirefox 57\n148\t160.85.104.70\tsrv-clst-301-data4.zhaw.ch\t\tFirefox 57\n152\t62.180.126.114\t62-180-126-114.business.static.de.bt.net\t\tFirefox 57\n331\t134.147.22.65\truhr-uni-bochum.de\tRange\tFirefox 57\n443\t172.21.128.137\tNB4860\t\tFirefox 57\n463\t91.106.126.79\ts9.rz-nag.de\t\tFirefox 57\n699\t131.246.53.97\tbau14-5-ipv4-0097.misc.uni-kl.de\t\tFirefox 57\n785\t84.160.250.133\tp54a0fa85.dip0.t-ipconnect.de\t\tFirefox 57\n1118\t132.180.189.16\tuni-bayreuth.de\tRange\tFirefox 57", "creator": "owp-support@hbm.com", "author": "owp-support@hbm.com", "bug_id": 1424987, "is_private": false, "time": "2017-12-13T12:15:35Z", "tags": [], "creation_time": "2017-12-13T12:15:35Z", "text": "User Agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36\n\nSteps to reproduce:\n\nSince November 15th we see thousands of additional http requests coming to our SAP webshop server.\n\nThe requests are calling our shop front page via our company webpage (www.hbm.com) which contains a link to the shop.\n\nThis happens also with internal users opening only the internal webpage which also contains a link to the webshop. We have a colleague who opened the internal page for an hour this morning and had over 400 requests to the webshop in our log file. But she did not click on the webshop link at all. She is currently using Firefox 58.0b11 (64bit).\n\nSo it seems that the new Firefox 57/58 is somehow scanning links in the background on our internal and external webpage and connecting the webshop behind hundreds of times. The Firefox user does not see these background connections.\n\nWe have a serious issue with our webshop server as every request causes various connections to our SAP backend systems and slow them down.\n\nPlease send emails answers to owp-support@hbm.com \n\nThank you.\n\nBest regards,\nFrank H\u00f6lscher\n\n\nActual results:\n\nThis are the top ten ip address of a 6 hour log, all using Firefox 57:\n\n116\t80.132.194.196\tp5084c2c4.dip0.t-ipconnect.fr\t\tFirefox 57\n128\t178.15.143.116\tGrob Aircraft  AG\t\tFirefox 57\n148\t160.85.104.70\tsrv-clst-301-data4.zhaw.ch\t\tFirefox 57\n152\t62.180.126.114\t62-180-126-114.business.static.de.bt.net\t\tFirefox 57\n331\t134.147.22.65\truhr-uni-bochum.de\tRange\tFirefox 57\n443\t172.21.128.137\tNB4860\t\tFirefox 57\n463\t91.106.126.79\ts9.rz-nag.de\t\tFirefox 57\n699\t131.246.53.97\tbau14-5-ipv4-0097.misc.uni-kl.de\t\tFirefox 57\n785\t84.160.250.133\tp54a0fa85.dip0.t-ipconnect.de\t\tFirefox 57\n1118\t132.180.189.16\tuni-bayreuth.de\tRange\tFirefox 57"}, {"creation_time": "2017-12-13T16:14:10Z", "text": "(In reply to Frank H\u00f6lscher from comment #0)\n> The requests are calling our shop front page via our company webpage\n> (www.hbm.com) which contains a link to the shop.\n\nDo you have complete headers for some of these requests? Do they show any headers that indicate these are requested e.g. from speculative connections or coming from the background thumbnailer code, or something else? If you open the browser toolbox ( https://developer.mozilla.org/en-US/docs/Tools/Browser_Toolbox ) and the network monitor in there, are you able to see the requests, and identify what the source of the request is?\n\n> This happens also with internal users opening only the internal webpage\n> which also contains a link to the webshop. We have a colleague who opened\n> the internal page for an hour this morning and had over 400 requests to the\n> webshop in our log file. But she did not click on the webshop link at all.\n> She is currently using Firefox 58.0b11 (64bit).\n\nOn the new tab page for that user, does the web shop show up? For the \"tiles\" on the new tab page, we will try to capture screenshots of loaded pages to show. This would be unrelated to whether or not the internal page is open at that point (ie that would be a red herring).\n\nAs a test, you could create a boolean preference in about:config called `browser.pagethumbnails.capturing_disabled` and set it to true, and restart, and see if that improves things (and/or if it goes back to being bad if you remove that preference again).\n\n> We have a serious issue with our webshop server as every request causes\n> various connections to our SAP backend systems and slow them down.\n> \n> Please send emails answers to owp-support@hbm.com \n\nIs it not possible to use bugzilla? This helps establish shared context for engineers when we need to fix stuff on our side, which gets lost if we have individual email conversations with you.\n\n> This are the top ten ip address of a 6 hour log, all using Firefox 57:\n> \n> 116\t80.132.194.196\tp5084c2c4.dip0.t-ipconnect.fr\t\tFirefox 57\n> 128\t178.15.143.116\tGrob Aircraft  AG\t\tFirefox 57\n> 148\t160.85.104.70\tsrv-clst-301-data4.zhaw.ch\t\tFirefox 57\n> 152\t62.180.126.114\t62-180-126-114.business.static.de.bt.net\t\tFirefox 57\n> 331\t134.147.22.65\truhr-uni-bochum.de\tRange\tFirefox 57\n> 443\t172.21.128.137\tNB4860\t\tFirefox 57\n> 463\t91.106.126.79\ts9.rz-nag.de\t\tFirefox 57\n> 699\t131.246.53.97\tbau14-5-ipv4-0097.misc.uni-kl.de\t\tFirefox 57\n> 785\t84.160.250.133\tp54a0fa85.dip0.t-ipconnect.de\t\tFirefox 57\n> 1118\t132.180.189.16\tuni-bayreuth.de\tRange\tFirefox 57\n\nOut of curiosity, I assume these are full HTTP requests, not just TCP connections, given the fact that you have a user agent identified for these connections?", "tags": [], "time": "2017-12-13T16:14:10Z", "creator": "gijskruitbosch+bugs@gmail.com", "author": "gijskruitbosch+bugs@gmail.com", "raw_text": "(In reply to Frank H\u00f6lscher from comment #0)\n> The requests are calling our shop front page via our company webpage\n> (www.hbm.com) which contains a link to the shop.\n\nDo you have complete headers for some of these requests? Do they show any headers that indicate these are requested e.g. from speculative connections or coming from the background thumbnailer code, or something else? If you open the browser toolbox ( https://developer.mozilla.org/en-US/docs/Tools/Browser_Toolbox ) and the network monitor in there, are you able to see the requests, and identify what the source of the request is?\n\n> This happens also with internal users opening only the internal webpage\n> which also contains a link to the webshop. We have a colleague who opened\n> the internal page for an hour this morning and had over 400 requests to the\n> webshop in our log file. But she did not click on the webshop link at all.\n> She is currently using Firefox 58.0b11 (64bit).\n\nOn the new tab page for that user, does the web shop show up? For the \"tiles\" on the new tab page, we will try to capture screenshots of loaded pages to show. This would be unrelated to whether or not the internal page is open at that point (ie that would be a red herring).\n\nAs a test, you could create a boolean preference in about:config called `browser.pagethumbnails.capturing_disabled` and set it to true, and restart, and see if that improves things (and/or if it goes back to being bad if you remove that preference again).\n\n> We have a serious issue with our webshop server as every request causes\n> various connections to our SAP backend systems and slow them down.\n> \n> Please send emails answers to owp-support@hbm.com \n\nIs it not possible to use bugzilla? This helps establish shared context for engineers when we need to fix stuff on our side, which gets lost if we have individual email conversations with you.\n\n> This are the top ten ip address of a 6 hour log, all using Firefox 57:\n> \n> 116\t80.132.194.196\tp5084c2c4.dip0.t-ipconnect.fr\t\tFirefox 57\n> 128\t178.15.143.116\tGrob Aircraft  AG\t\tFirefox 57\n> 148\t160.85.104.70\tsrv-clst-301-data4.zhaw.ch\t\tFirefox 57\n> 152\t62.180.126.114\t62-180-126-114.business.static.de.bt.net\t\tFirefox 57\n> 331\t134.147.22.65\truhr-uni-bochum.de\tRange\tFirefox 57\n> 443\t172.21.128.137\tNB4860\t\tFirefox 57\n> 463\t91.106.126.79\ts9.rz-nag.de\t\tFirefox 57\n> 699\t131.246.53.97\tbau14-5-ipv4-0097.misc.uni-kl.de\t\tFirefox 57\n> 785\t84.160.250.133\tp54a0fa85.dip0.t-ipconnect.de\t\tFirefox 57\n> 1118\t132.180.189.16\tuni-bayreuth.de\tRange\tFirefox 57\n\nOut of curiosity, I assume these are full HTTP requests, not just TCP connections, given the fact that you have a user agent identified for these connections?", "is_private": false, "bug_id": 1424987, "id": 12916634, "attachment_id": null, "count": 1}, {"is_private": false, "author": "owp-support@hbm.com", "attachment_id": null, "text": "(In reply to :Gijs from comment #1)\n> (In reply to Frank H\u00f6lscher from comment #0)\n> > The requests are calling our shop front page via our company webpage\n> > (www.hbm.com) which contains a link to the shop.\n> \n> Do you have complete headers for some of these requests? Do they show any\n> headers that indicate these are requested e.g. from speculative connections\n> or coming from the background thumbnailer code, or something else? If you\n> open the browser toolbox (\n> https://developer.mozilla.org/en-US/docs/Tools/Browser_Toolbox ) and the\n> network monitor in there, are you able to see the requests, and identify\n> what the source of the request is?\n\n-------------------------------------------------------------------------------------------------------------------------------\nWe started the network browser toolbox and opened our local webpage, which contains a link to our webshop.\nThis is exactly the same, what our user did.\nWe checked the browser toolbox, but we did not see any others requests. Only the usual request for our local website. Nothing unusual.\n\nWe checked the log files. Here are two examples of headers:\n\n#2.0#2017 12 15 15:21:13:990#+0100#Debug#com.sap.engine.services.httpserver.HttpTraceRequest.traceHeaders#\n#BC-JAS-WEB#http#C000AC1099142ABE000000000000C72D#406025950000000003##com.sap.engine.services.httpserver.HttpTraceRequest.traceHeaders#Guest#0##32044F01E1A311E7A3EE0000183376DE#32044f01e1a311e7a3ee0000183376de#32044f01e1a311e7a3ee0000183376de#0#Thread[HTTP Worker [@2076072059],5,Dedicated_Application_Thread]#Plain##\nCLIENT: 10869 [172.16.157.163 : 59947], REQUEST:\nGET /myHBM/hbm/CMSEntry.do?scenario.xcm=hbm_b2boccasionalcrm&shop=HBMDEDE&language=de&country=de&hbmentry=home HTTP/1.1\nhost: hbmlxpec.hbm.com:54001\nuser-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:57.0) Gecko/20100101 Firefox/57.0\naccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\naccept-language: de,en-US;q=0.7,en;q=0.3\naccept-encoding: gzip, deflate, br\nupgrade-insecure-requests: 1\npragma: no-cache\ncache-control: no-cache\nx-forwarded-for: 178.174.17.26\nx-forwarded-host: b2bstore.hbm.com\nx-forwarded-server: b2bstore.hbm.com\nconnection: Keep-Alive\n#\n \n#2.0#2017 12 15 15:21:15:005#+0100#Debug#com.sap.engine.services.httpserver.HttpTraceRequest.traceHeaders#\n#BC-JAS-WEB#http#C000AC1099142AC1000000000000C72D#406025950000000003##com.sap.engine.services.httpserver.HttpTraceRequest.traceHeaders#Guest#0##3294A199E1A311E7C4EB0000183376DE#3294a199e1a311e7c4eb0000183376de#3294a199e1a311e7c4eb0000183376de#0#Thread[HTTP Worker [@1573386282],5,Dedicated_Application_Thread]#Plain##\nCLIENT: 10872 [172.16.157.163 : 59947], REQUEST:\nGET /myHBM/hbm/CMSEntry.do?scenario.xcm=hbm_b2boccasionalcrm&shop=HBMDECH&language=de&country=ch&hbmentry=home HTTP/1.1\nhost: hbmlxpec.hbm.com:54001\nuser-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:57.0) Gecko/20100101 Firefox/57.0\naccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\naccept-language: de,en-US;q=0.7,en;q=0.3\naccept-encoding: gzip, deflate, br\nupgrade-insecure-requests: 1\npragma: no-cache\ncache-control: no-cache\nx-forwarded-for: 178.174.17.26\nx-forwarded-host: b2bstore.hbm.com\nx-forwarded-server: b2bstore.hbm.com\nconnection: Keep-Alive\n#\n \n-------------------------------------------------------------------------------------------------------------------------------\n\n\n> > This happens also with internal users opening only the internal webpage\n> > which also contains a link to the webshop. We have a colleague who opened\n> > the internal page for an hour this morning and had over 400 requests to the\n> > webshop in our log file. But she did not click on the webshop link at all.\n> > She is currently using Firefox 58.0b11 (64bit).\n> \n> On the new tab page for that user, does the web shop show up? For the\n> \"tiles\" on the new tab page, we will try to capture screenshots of loaded\n> pages to show. This would be unrelated to whether or not the internal page\n> is open at that point (ie that would be a red herring).\n> \n> As a test, you could create a boolean preference in about:config called\n> `browser.pagethumbnails.capturing_disabled` and set it to true, and restart,\n> and see if that improves things (and/or if it goes back to being bad if you\n> remove that preference again).\n> \n\nThe user did not open a new tab page, so the web shop does not show up.\nThe user only opens our internal page and stays there.\nThe network browser toolbox does not show any unusual request. Only the request for the internal web page and that is ok.\n\n> > We have a serious issue with our webshop server as every request causes\n> > various connections to our SAP backend systems and slow them down.\n> > \n> > Please send emails answers to owp-support@hbm.com \n> \n> Is it not possible to use bugzilla? This helps establish shared context for\n> engineers when we need to fix stuff on our side, which gets lost if we have\n> individual email conversations with you.\n> \n> > This are the top ten ip address of a 6 hour log, all using Firefox 57:\n> > \n> > 116\t80.132.194.196\tp5084c2c4.dip0.t-ipconnect.fr\t\tFirefox 57\n> > 128\t178.15.143.116\tGrob Aircraft  AG\t\tFirefox 57\n> > 148\t160.85.104.70\tsrv-clst-301-data4.zhaw.ch\t\tFirefox 57\n> > 152\t62.180.126.114\t62-180-126-114.business.static.de.bt.net\t\tFirefox 57\n> > 331\t134.147.22.65\truhr-uni-bochum.de\tRange\tFirefox 57\n> > 443\t172.21.128.137\tNB4860\t\tFirefox 57\n> > 463\t91.106.126.79\ts9.rz-nag.de\t\tFirefox 57\n> > 699\t131.246.53.97\tbau14-5-ipv4-0097.misc.uni-kl.de\t\tFirefox 57\n> > 785\t84.160.250.133\tp54a0fa85.dip0.t-ipconnect.de\t\tFirefox 57\n> > 1118\t132.180.189.16\tuni-bayreuth.de\tRange\tFirefox 57\n> \n> Out of curiosity, I assume these are full HTTP requests, not just TCP\n> connections, given the fact that you have a user agent identified for these\n> connections?\nYes, the requests are HTTP requests. Please see the headers above between the \"------\" lines.\n\nMany thanks in advance.", "tags": [], "time": "2017-12-18T09:02:25Z", "bug_id": 1424987, "creator": "owp-support@hbm.com", "raw_text": "(In reply to :Gijs from comment #1)\n> (In reply to Frank H\u00f6lscher from comment #0)\n> > The requests are calling our shop front page via our company webpage\n> > (www.hbm.com) which contains a link to the shop.\n> \n> Do you have complete headers for some of these requests? Do they show any\n> headers that indicate these are requested e.g. from speculative connections\n> or coming from the background thumbnailer code, or something else? If you\n> open the browser toolbox (\n> https://developer.mozilla.org/en-US/docs/Tools/Browser_Toolbox ) and the\n> network monitor in there, are you able to see the requests, and identify\n> what the source of the request is?\n\n-------------------------------------------------------------------------------------------------------------------------------\nWe started the network browser toolbox and opened our local webpage, which contains a link to our webshop.\nThis is exactly the same, what our user did.\nWe checked the browser toolbox, but we did not see any others requests. Only the usual request for our local website. Nothing unusual.\n\nWe checked the log files. Here are two examples of headers:\n\n#2.0#2017 12 15 15:21:13:990#+0100#Debug#com.sap.engine.services.httpserver.HttpTraceRequest.traceHeaders#\n#BC-JAS-WEB#http#C000AC1099142ABE000000000000C72D#406025950000000003##com.sap.engine.services.httpserver.HttpTraceRequest.traceHeaders#Guest#0##32044F01E1A311E7A3EE0000183376DE#32044f01e1a311e7a3ee0000183376de#32044f01e1a311e7a3ee0000183376de#0#Thread[HTTP Worker [@2076072059],5,Dedicated_Application_Thread]#Plain##\nCLIENT: 10869 [172.16.157.163 : 59947], REQUEST:\nGET /myHBM/hbm/CMSEntry.do?scenario.xcm=hbm_b2boccasionalcrm&shop=HBMDEDE&language=de&country=de&hbmentry=home HTTP/1.1\nhost: hbmlxpec.hbm.com:54001\nuser-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:57.0) Gecko/20100101 Firefox/57.0\naccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\naccept-language: de,en-US;q=0.7,en;q=0.3\naccept-encoding: gzip, deflate, br\nupgrade-insecure-requests: 1\npragma: no-cache\ncache-control: no-cache\nx-forwarded-for: 178.174.17.26\nx-forwarded-host: b2bstore.hbm.com\nx-forwarded-server: b2bstore.hbm.com\nconnection: Keep-Alive\n#\n \n#2.0#2017 12 15 15:21:15:005#+0100#Debug#com.sap.engine.services.httpserver.HttpTraceRequest.traceHeaders#\n#BC-JAS-WEB#http#C000AC1099142AC1000000000000C72D#406025950000000003##com.sap.engine.services.httpserver.HttpTraceRequest.traceHeaders#Guest#0##3294A199E1A311E7C4EB0000183376DE#3294a199e1a311e7c4eb0000183376de#3294a199e1a311e7c4eb0000183376de#0#Thread[HTTP Worker [@1573386282],5,Dedicated_Application_Thread]#Plain##\nCLIENT: 10872 [172.16.157.163 : 59947], REQUEST:\nGET /myHBM/hbm/CMSEntry.do?scenario.xcm=hbm_b2boccasionalcrm&shop=HBMDECH&language=de&country=ch&hbmentry=home HTTP/1.1\nhost: hbmlxpec.hbm.com:54001\nuser-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:57.0) Gecko/20100101 Firefox/57.0\naccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\naccept-language: de,en-US;q=0.7,en;q=0.3\naccept-encoding: gzip, deflate, br\nupgrade-insecure-requests: 1\npragma: no-cache\ncache-control: no-cache\nx-forwarded-for: 178.174.17.26\nx-forwarded-host: b2bstore.hbm.com\nx-forwarded-server: b2bstore.hbm.com\nconnection: Keep-Alive\n#\n \n-------------------------------------------------------------------------------------------------------------------------------\n\n\n> > This happens also with internal users opening only the internal webpage\n> > which also contains a link to the webshop. We have a colleague who opened\n> > the internal page for an hour this morning and had over 400 requests to the\n> > webshop in our log file. But she did not click on the webshop link at all.\n> > She is currently using Firefox 58.0b11 (64bit).\n> \n> On the new tab page for that user, does the web shop show up? For the\n> \"tiles\" on the new tab page, we will try to capture screenshots of loaded\n> pages to show. This would be unrelated to whether or not the internal page\n> is open at that point (ie that would be a red herring).\n> \n> As a test, you could create a boolean preference in about:config called\n> `browser.pagethumbnails.capturing_disabled` and set it to true, and restart,\n> and see if that improves things (and/or if it goes back to being bad if you\n> remove that preference again).\n> \n\nThe user did not open a new tab page, so the web shop does not show up.\nThe user only opens our internal page and stays there.\nThe network browser toolbox does not show any unusual request. Only the request for the internal web page and that is ok.\n\n> > We have a serious issue with our webshop server as every request causes\n> > various connections to our SAP backend systems and slow them down.\n> > \n> > Please send emails answers to owp-support@hbm.com \n> \n> Is it not possible to use bugzilla? This helps establish shared context for\n> engineers when we need to fix stuff on our side, which gets lost if we have\n> individual email conversations with you.\n> \n> > This are the top ten ip address of a 6 hour log, all using Firefox 57:\n> > \n> > 116\t80.132.194.196\tp5084c2c4.dip0.t-ipconnect.fr\t\tFirefox 57\n> > 128\t178.15.143.116\tGrob Aircraft  AG\t\tFirefox 57\n> > 148\t160.85.104.70\tsrv-clst-301-data4.zhaw.ch\t\tFirefox 57\n> > 152\t62.180.126.114\t62-180-126-114.business.static.de.bt.net\t\tFirefox 57\n> > 331\t134.147.22.65\truhr-uni-bochum.de\tRange\tFirefox 57\n> > 443\t172.21.128.137\tNB4860\t\tFirefox 57\n> > 463\t91.106.126.79\ts9.rz-nag.de\t\tFirefox 57\n> > 699\t131.246.53.97\tbau14-5-ipv4-0097.misc.uni-kl.de\t\tFirefox 57\n> > 785\t84.160.250.133\tp54a0fa85.dip0.t-ipconnect.de\t\tFirefox 57\n> > 1118\t132.180.189.16\tuni-bayreuth.de\tRange\tFirefox 57\n> \n> Out of curiosity, I assume these are full HTTP requests, not just TCP\n> connections, given the fact that you have a user agent identified for these\n> connections?\nYes, the requests are HTTP requests. Please see the headers above between the \"------\" lines.\n\nMany thanks in advance.", "id": 12924062, "count": 2, "creation_time": "2017-12-18T09:02:25Z"}, {"count": 3, "attachment_id": null, "id": 12924381, "bug_id": 1424987, "is_private": false, "raw_text": "(In reply to Frank H\u00f6lscher from comment #2)\n> We started the network browser toolbox and opened our local webpage, which\n> contains a link to our webshop.\n\nWhere is the local webpage hosted? Is it on the disk, so is it using a file:/// URL, or on a local webhost (so using http) ? If it's on a webhost, is it using https?\n\nI'm asking because the request headers you posted do not contain a referer header, which is surprising, unless your webpage is on a different protocol from the shop, or it indicates explicitly on links or on the page that it shouldn't send referrals.\n\nAlso, you're sure you're using the *browser* toolbox, not the regular developer tools that are shown as a sidebar or underneath the webpage? ( see https://developer.mozilla.org/en-US/docs/Tools/Browser_Toolbox for more details )\n\nI'm very surprised there wouldn't be *any* other requests listed in the browser toolbox. There are usually other requests, if nothing else then for various things Firefox does in the background (update checks, blocklists, etc.).\n\n> GET\n> /myHBM/hbm/CMSEntry.do?scenario.\n> xcm=hbm_b2boccasionalcrm&shop=HBMDEDE&language=de&country=de&hbmentry=home\n\nDoes the internal/local webpage contain a direct link to this page? I don't see any links that go there on your homepage ( https://www.hbm.com/en/ ) - only links to http://www.hbm.com/hbmshop-us or similar (short) URLs, which then redirect to something like:\n\nhttps://b2bstore.hbm.com/myHBM/app/displayApp/(layout=7.01-16_150_6_9_70_34_65_71_131&carea=%24ROOT&xcm=hbm_b2boccasionalcrm)/.do?rf=y\n\nwhich still looks very different to the URL you posted. Are we talking about the same thing? Is there a different shop?\n\n\n> The user did not open a new tab page, so the web shop does not show up.\n> The user only opens our internal page and stays there.\n\nWe preload the new tab page automatically in the background, because opening new tabs is something that happens fairly regularly anyway. That way, once users open a new tab, we can present the new tab page immediately.\n\nIf that user (or you in your test environment) opens the new tab page, does the web shop show up?", "author": "gijskruitbosch+bugs@gmail.com", "creator": "gijskruitbosch+bugs@gmail.com", "time": "2017-12-18T14:51:52Z", "tags": [], "text": "(In reply to Frank H\u00f6lscher from comment #2)\n> We started the network browser toolbox and opened our local webpage, which\n> contains a link to our webshop.\n\nWhere is the local webpage hosted? Is it on the disk, so is it using a file:/// URL, or on a local webhost (so using http) ? If it's on a webhost, is it using https?\n\nI'm asking because the request headers you posted do not contain a referer header, which is surprising, unless your webpage is on a different protocol from the shop, or it indicates explicitly on links or on the page that it shouldn't send referrals.\n\nAlso, you're sure you're using the *browser* toolbox, not the regular developer tools that are shown as a sidebar or underneath the webpage? ( see https://developer.mozilla.org/en-US/docs/Tools/Browser_Toolbox for more details )\n\nI'm very surprised there wouldn't be *any* other requests listed in the browser toolbox. There are usually other requests, if nothing else then for various things Firefox does in the background (update checks, blocklists, etc.).\n\n> GET\n> /myHBM/hbm/CMSEntry.do?scenario.\n> xcm=hbm_b2boccasionalcrm&shop=HBMDEDE&language=de&country=de&hbmentry=home\n\nDoes the internal/local webpage contain a direct link to this page? I don't see any links that go there on your homepage ( https://www.hbm.com/en/ ) - only links to http://www.hbm.com/hbmshop-us or similar (short) URLs, which then redirect to something like:\n\nhttps://b2bstore.hbm.com/myHBM/app/displayApp/(layout=7.01-16_150_6_9_70_34_65_71_131&carea=%24ROOT&xcm=hbm_b2boccasionalcrm)/.do?rf=y\n\nwhich still looks very different to the URL you posted. Are we talking about the same thing? Is there a different shop?\n\n\n> The user did not open a new tab page, so the web shop does not show up.\n> The user only opens our internal page and stays there.\n\nWe preload the new tab page automatically in the background, because opening new tabs is something that happens fairly regularly anyway. That way, once users open a new tab, we can present the new tab page immediately.\n\nIf that user (or you in your test environment) opens the new tab page, does the web shop show up?", "creation_time": "2017-12-18T14:51:52Z"}, {"creation_time": "2017-12-18T14:53:15Z", "count": 4, "id": 12924384, "bug_id": 1424987, "raw_text": "Separately, if you do the following:\n\n1. create a new firefox profile in addition to the default profile on some of the affected machines ( see https://support.mozilla.org/kb/profile-manager-create-and-remove-firefox-profiles for guidance)\n2. start the new profile\n3. navigate to the local webpage with the link to the shop (but don't actually go to the shop)\n4. wait\n\ndo requests *from that user/firefox instance* show up for the shop?", "creator": "gijskruitbosch+bugs@gmail.com", "time": "2017-12-18T14:53:15Z", "tags": [], "text": "Separately, if you do the following:\n\n1. create a new firefox profile in addition to the default profile on some of the affected machines ( see https://support.mozilla.org/kb/profile-manager-create-and-remove-firefox-profiles for guidance)\n2. start the new profile\n3. navigate to the local webpage with the link to the shop (but don't actually go to the shop)\n4. wait\n\ndo requests *from that user/firefox instance* show up for the shop?", "attachment_id": null, "is_private": false, "author": "gijskruitbosch+bugs@gmail.com"}, {"bug_id": 1424987, "is_private": false, "raw_text": "(In reply to :Gijs from comment #4)\n> Separately, if you do the following:\n> \n> 1. create a new firefox profile in addition to the default profile on some\n> of the affected machines ( see\n> https://support.mozilla.org/kb/profile-manager-create-and-remove-firefox-\n> profiles for guidance)\n> 2. start the new profile\n> 3. navigate to the local webpage with the link to the shop (but don't\n> actually go to the shop)\n> 4. wait\n> \n> do requests *from that user/firefox instance* show up for the shop?\n\nI have created a new firefox profile and we checked the server log.\nNo requests showed up.\n\nAnything else I can check or activate?", "creator": "owp-support@hbm.com", "author": "owp-support@hbm.com", "count": 5, "attachment_id": null, "id": 12933623, "text": "(In reply to :Gijs from comment #4)\n> Separately, if you do the following:\n> \n> 1. create a new firefox profile in addition to the default profile on some\n> of the affected machines ( see\n> https://support.mozilla.org/kb/profile-manager-create-and-remove-firefox-\n> profiles for guidance)\n> 2. start the new profile\n> 3. navigate to the local webpage with the link to the shop (but don't\n> actually go to the shop)\n> 4. wait\n> \n> do requests *from that user/firefox instance* show up for the shop?\n\nI have created a new firefox profile and we checked the server log.\nNo requests showed up.\n\nAnything else I can check or activate?", "creation_time": "2017-12-22T12:10:38Z", "time": "2017-12-22T12:10:38Z", "tags": []}, {"text": "Ed, my gut sense is that this seems to be a case of the new tab page making too many requests to do thumbnails or something. Can you help by confirming this, either with the data that's already in this bug or with further questions/debug suggestions for the reporter? Is there some way to figure out why the screenshots are so frequent, and/or can we tone it down a bit, as it were? :-)", "creation_time": "2017-12-22T17:36:38Z", "tags": [], "time": "2017-12-22T17:36:38Z", "is_private": false, "bug_id": 1424987, "author": "gijskruitbosch+bugs@gmail.com", "creator": "gijskruitbosch+bugs@gmail.com", "raw_text": "Ed, my gut sense is that this seems to be a case of the new tab page making too many requests to do thumbnails or something. Can you help by confirming this, either with the data that's already in this bug or with further questions/debug suggestions for the reporter? Is there some way to figure out why the screenshots are so frequent, and/or can we tone it down a bit, as it were? :-)", "attachment_id": null, "id": 12933815, "count": 6}, {"is_private": false, "author": "edilee@mozilla.com", "attachment_id": null, "text": "There's this hidden pref to turn off thumbnails when set to true:\n\nbrowser.pagethumbnails.capturing_disabled\n\n(Right-click the page from about:config to create a new Boolean pref.)\n\nIf it is thumbnails, it could be related to bug 1411637 where failed thumbnails will be attempted again only to fail again. The try-again was made worse in 58 when the data refreshed every 5 minutes instead of based on the user opening tabs.", "time": "2017-12-24T03:13:25Z", "tags": [], "bug_id": 1424987, "raw_text": "There's this hidden pref to turn off thumbnails when set to true:\n\nbrowser.pagethumbnails.capturing_disabled\n\n(Right-click the page from about:config to create a new Boolean pref.)\n\nIf it is thumbnails, it could be related to bug 1411637 where failed thumbnails will be attempted again only to fail again. The try-again was made worse in 58 when the data refreshed every 5 minutes instead of based on the user opening tabs.", "creator": "edilee@mozilla.com", "count": 7, "id": 12934678, "creation_time": "2017-12-24T03:13:25Z"}, {"creation_time": "2018-01-08T10:27:08Z", "bug_id": 1424987, "creator": "andrei.br92@gmail.com", "raw_text": "> The try-again was made worse in 58 when the data refreshed every 5 minutes instead of based on the user opening tabs.\n\nIf the requests are made by the screenshot service then the result should be cached and prevent future connections. Do you suspect screenshots failed or caching does not work as expected?", "id": 12951705, "count": 8, "text": "> The try-again was made worse in 58 when the data refreshed every 5 minutes instead of based on the user opening tabs.\n\nIf the requests are made by the screenshot service then the result should be cached and prevent future connections. Do you suspect screenshots failed or caching does not work as expected?", "tags": [], "time": "2018-01-08T10:27:08Z", "is_private": false, "author": "andrei.br92@gmail.com", "attachment_id": null}, {"id": 12978508, "count": 9, "bug_id": 1424987, "creator": "edilee@mozilla.com", "raw_text": "I was just pointing out that bug 1411637 should have fixed an issue with trying again.\n\nUnclear from the comments so far whether it's thumbnails. And if it is, for top sites or highlights? It looks like the home page does not have the page metadata to be shown as a highlight, but maybe users have bookmarked those pages?", "creation_time": "2018-01-18T09:11:39Z", "attachment_id": null, "is_private": false, "author": "edilee@mozilla.com", "tags": [], "time": "2018-01-18T09:11:39Z", "text": "I was just pointing out that bug 1411637 should have fixed an issue with trying again.\n\nUnclear from the comments so far whether it's thumbnails. And if it is, for top sites or highlights? It looks like the home page does not have the page metadata to be shown as a highlight, but maybe users have bookmarked those pages?"}, {"text": "Yes, I could imagine that some/many users may have bookmarked our webshop page.\n\nBut from the described issue we had with an internal user,\n\n> > This happens also with internal users opening only the internal webpage\n> > which also contains a link to the webshop. We have a colleague who opened\n> > the internal page for an hour this morning and had over 400 requests to the\n> > webshop in our log file. But she did not click on the webshop link at all.\n> > She is currently using Firefox 58.0b11 (64bit).\n\nWe know that she did not had bookmarked the webshop page.", "creation_time": "2018-01-22T15:49:03Z", "tags": [], "time": "2018-01-22T15:49:03Z", "is_private": false, "bug_id": 1424987, "creator": "owp-support@hbm.com", "author": "owp-support@hbm.com", "raw_text": "Yes, I could imagine that some/many users may have bookmarked our webshop page.\n\nBut from the described issue we had with an internal user,\n\n> > This happens also with internal users opening only the internal webpage\n> > which also contains a link to the webshop. We have a colleague who opened\n> > the internal page for an hour this morning and had over 400 requests to the\n> > webshop in our log file. But she did not click on the webshop link at all.\n> > She is currently using Firefox 58.0b11 (64bit).\n\nWe know that she did not had bookmarked the webshop page.", "attachment_id": null, "id": 12986312, "count": 10}, {"tags": [], "time": "2018-01-22T16:01:15Z", "creation_time": "2018-01-22T16:01:15Z", "text": "(In reply to Ed Lee :Mardak from comment #7)\n> There's this hidden pref to turn off thumbnails when set to true:\n> \n> browser.pagethumbnails.capturing_disabled\n> \n> (Right-click the page from about:config to create a new Boolean pref.)\n\nDoes using this preference with the internal user (restart the browser after setting that preference for good measure) resolve the issue for that specific user?", "id": 12986334, "attachment_id": null, "count": 11, "creator": "gijskruitbosch+bugs@gmail.com", "author": "gijskruitbosch+bugs@gmail.com", "raw_text": "(In reply to Ed Lee :Mardak from comment #7)\n> There's this hidden pref to turn off thumbnails when set to true:\n> \n> browser.pagethumbnails.capturing_disabled\n> \n> (Right-click the page from about:config to create a new Boolean pref.)\n\nDoes using this preference with the internal user (restart the browser after setting that preference for good measure) resolve the issue for that specific user?", "is_private": false, "bug_id": 1424987}, {"count": 12, "attachment_id": null, "id": 12987542, "bug_id": 1424987, "is_private": false, "raw_text": "After a similar complaint in bug 1430147 I think that the issue is caused by the Highlights section in AS that does not cache images in 57. The issue is fixed in 58 by https://github.com/mozilla/activity-stream/commit/c365ba1641570a896d72941db4b6cec99ed087e3 which landed in bug 1413550.", "creator": "andrei.br92@gmail.com", "author": "andrei.br92@gmail.com", "time": "2018-01-22T23:01:55Z", "tags": [], "text": "After a similar complaint in bug 1430147 I think that the issue is caused by the Highlights section in AS that does not cache images in 57. The issue is fixed in 58 by https://github.com/mozilla/activity-stream/commit/c365ba1641570a896d72941db4b6cec99ed087e3 which landed in bug 1413550.", "creation_time": "2018-01-22T23:01:55Z"}, {"id": 12988537, "count": 13, "bug_id": 1424987, "creator": "Sebastian.mihm@hbm.com", "raw_text": "Hello all,\n\nwe made another big test on 3 different pc's with Firefox 58 (64bit). \n\nFirst we opened the Intranet (contains a link to the shop) - no Ip-address was found in the log. We replied the test using the website (www.hbm.com the site contains several links to the shop); no Ip-address was found in the log at all.\n\nThe boolean pref. \"browser.pagethumbnails.capturing_disabled\" did not make any difference here.\n\nSo we couldn't reproduce the Issue. We still keep the Website and Intranet opened in the background, so perhaps we can see our IP-Address in our report list.\n\nBest regards,\nSebastian", "creation_time": "2018-01-23T12:36:50Z", "attachment_id": null, "is_private": false, "author": "Sebastian.mihm@hbm.com", "tags": [], "time": "2018-01-23T12:36:50Z", "text": "Hello all,\n\nwe made another big test on 3 different pc's with Firefox 58 (64bit). \n\nFirst we opened the Intranet (contains a link to the shop) - no Ip-address was found in the log. We replied the test using the website (www.hbm.com the site contains several links to the shop); no Ip-address was found in the log at all.\n\nThe boolean pref. \"browser.pagethumbnails.capturing_disabled\" did not make any difference here.\n\nSo we couldn't reproduce the Issue. We still keep the Website and Intranet opened in the background, so perhaps we can see our IP-Address in our report list.\n\nBest regards,\nSebastian"}, {"id": 13008171, "attachment_id": null, "count": 14, "is_private": false, "bug_id": 1424987, "author": "andrei.br92@gmail.com", "creator": "andrei.br92@gmail.com", "raw_text": "Considering comment 12 about what might have caused the bug and comment 13 about not being able to reproduce any more I will close this as fixed.", "tags": [], "time": "2018-01-31T13:32:23Z", "text": "Considering comment 12 about what might have caused the bug and comment 13 about not being able to reproduce any more I will close this as fixed.", "creation_time": "2018-01-31T13:32:23Z"}, {"text": "Hello all,\n\nThe BUG is still available. We cannot reproduce it in our network, somehow the Requests are not logged. But when I checked the TOP 10 List of Requests we only have Users with the newer Firefox in the log:\n\n40\t88.127.121.2\tFirefox 58\t\t\n79\t83.162.142.198\tnot in log anymore\t\t\n92\t140.254.14.133\tFirefox 58\t\t\n93\t172.21.80.73\tFirefox 57\t\t\n94\t129.217.153.85\tFirefox 58\t\t\n136\t141.51.218.63\tFirefox 58\t\t\n224\t185.42.253.29\tFirefox 58\t\t\n225\t138.245.1.1\tFirefox 58\t\t\n335\t84.160.246.64\tFirefox 58\t\t\n654\t78.243.171.206\tFirefox 58\n\n\nWhen I compare this to google Analytics we see that Chrome Version 63.0.3239.132 is used 799 times, Internet Explorer Version 11.0 is used 571 times and Firefox version 58.0 is used 365 times.\n\nLet me try to explain how we noticed the Issue:\nWe are running a SAP online Shop. This Shop itself has problems with hanging connections to the backend. SAP is trying to find a solution here. With the Release of Firefox 57.0 we had so many Connections to the backend, that our online Shop was crashing really often. A Consultant found out, that we have 10 times more Requests than usual. \n\nAt the moment we are caching more Informations in the Online Shop to reduce connections to the backend, but we still need to restart the Shop once or twice a day.\n\nIf you need further Information feel free to contact us.\n\nBest regards,\nSebastian", "creation_time": "2018-02-06T07:28:15Z", "time": "2018-02-06T07:28:15Z", "tags": [], "bug_id": 1424987, "is_private": false, "raw_text": "Hello all,\n\nThe BUG is still available. We cannot reproduce it in our network, somehow the Requests are not logged. But when I checked the TOP 10 List of Requests we only have Users with the newer Firefox in the log:\n\n40\t88.127.121.2\tFirefox 58\t\t\n79\t83.162.142.198\tnot in log anymore\t\t\n92\t140.254.14.133\tFirefox 58\t\t\n93\t172.21.80.73\tFirefox 57\t\t\n94\t129.217.153.85\tFirefox 58\t\t\n136\t141.51.218.63\tFirefox 58\t\t\n224\t185.42.253.29\tFirefox 58\t\t\n225\t138.245.1.1\tFirefox 58\t\t\n335\t84.160.246.64\tFirefox 58\t\t\n654\t78.243.171.206\tFirefox 58\n\n\nWhen I compare this to google Analytics we see that Chrome Version 63.0.3239.132 is used 799 times, Internet Explorer Version 11.0 is used 571 times and Firefox version 58.0 is used 365 times.\n\nLet me try to explain how we noticed the Issue:\nWe are running a SAP online Shop. This Shop itself has problems with hanging connections to the backend. SAP is trying to find a solution here. With the Release of Firefox 57.0 we had so many Connections to the backend, that our online Shop was crashing really often. A Consultant found out, that we have 10 times more Requests than usual. \n\nAt the moment we are caching more Informations in the Online Shop to reduce connections to the backend, but we still need to restart the Shop once or twice a day.\n\nIf you need further Information feel free to contact us.\n\nBest regards,\nSebastian", "creator": "Sebastian.mihm@hbm.com", "author": "Sebastian.mihm@hbm.com", "count": 15, "attachment_id": null, "id": 13020915}]}}}