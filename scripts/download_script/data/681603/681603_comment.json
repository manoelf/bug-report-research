{"comments": {}, "bugs": {"681603": {"comments": [{"creation_time": "2011-08-24T10:54:32Z", "is_private": false, "id": 5674481, "bug_id": 681603, "count": 0, "text": "What I did:\n\nThe system used is Mac OS X 10.6 running Firefox 6.\n\n(1) I unloaded a successfully installed PKCS#11 security device. \n(2) I try to load that same security device (pkcs11.dylib).\n\nWhat happens:\n\nFirefox is unable to add the security module. After firefox is restarted the security module can be added.\n\nAccording to our analysis this is due to the fact that the security module returns CKR_ALREADY_INITIALIZED on Firefoxs call to C_Initialize(). From my point of view the behaviour of the PKCS#11 module is correct since Firefox has neither called C_Finalize() nor unloaded the library (dlclose) when unloading the the security module in step (1).\n\n\nWhat should happen:\n\nFirefox should call C_Finalize() on unloading a PKCS#11 security module.", "author": "markus.heintel@atos.net", "creator": "markus.heintel@atos.net", "tags": [], "raw_text": "What I did:\n\nThe system used is Mac OS X 10.6 running Firefox 6.\n\n(1) I unloaded a successfully installed PKCS#11 security device. \n(2) I try to load that same security device (pkcs11.dylib).\n\nWhat happens:\n\nFirefox is unable to add the security module. After firefox is restarted the security module can be added.\n\nAccording to our analysis this is due to the fact that the security module returns CKR_ALREADY_INITIALIZED on Firefoxs call to C_Initialize(). From my point of view the behaviour of the PKCS#11 module is correct since Firefox has neither called C_Finalize() nor unloaded the library (dlclose) when unloading the the security module in step (1).\n\n\nWhat should happen:\n\nFirefox should call C_Finalize() on unloading a PKCS#11 security module.", "attachment_id": null, "time": "2011-08-24T10:54:32Z"}, {"tags": [], "attachment_id": null, "raw_text": "Can you provide a testcase so we can confirm this bug?", "time": "2011-08-24T18:44:18Z", "is_private": false, "creation_time": "2011-08-24T18:44:18Z", "bug_id": 681603, "id": 5675543, "author": "u279076@disabled.tld", "text": "Can you provide a testcase so we can confirm this bug?", "count": 1, "creator": "u279076@disabled.tld"}, {"creator": "ng.hong.quan@gmail.com", "text": "opensc-pkcs11.so module is an example.", "count": 2, "author": "ng.hong.quan@gmail.com", "id": 6457998, "bug_id": 681603, "creation_time": "2012-07-10T10:20:08Z", "is_private": false, "time": "2012-07-10T10:20:08Z", "raw_text": "opensc-pkcs11.so module is an example.", "attachment_id": null, "tags": []}]}}}