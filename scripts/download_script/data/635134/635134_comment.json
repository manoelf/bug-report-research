{"comments": {}, "bugs": {"635134": {"comments": [{"text": "User-Agent:       Mozilla/5.0 (X11; Linux x86_64; rv:2.0b12pre) Gecko/20110217 Firefox/4.0b12pre\nBuild Identifier: Mozilla/5.0 (X11; Linux x86_64; rv:2.0b12pre) Gecko/20110217 Firefox/4.0b12pre\n\nCurrently, Linux, as well as other FOSS operating systems, uses X. A replacement for X is currently being developed called Wayland. It would be nice if when Wayland comes out, Firefox would be ready and support Wayland without needing X.\n\nReproducible: Always\n\n\n\n\nWayland won't be ready for widespread use for some time. As I understand it (which may be slightly inaccurate), even after it is ready for widespread use, it'll still be used to talk to X in order to speed things up. It'll probably be even longer before Linux desktops are able to ditch X altogether.", "bug_id": 635134, "raw_text": "User-Agent:       Mozilla/5.0 (X11; Linux x86_64; rv:2.0b12pre) Gecko/20110217 Firefox/4.0b12pre\nBuild Identifier: Mozilla/5.0 (X11; Linux x86_64; rv:2.0b12pre) Gecko/20110217 Firefox/4.0b12pre\n\nCurrently, Linux, as well as other FOSS operating systems, uses X. A replacement for X is currently being developed called Wayland. It would be nice if when Wayland comes out, Firefox would be ready and support Wayland without needing X.\n\nReproducible: Always\n\n\n\n\nWayland won't be ready for widespread use for some time. As I understand it (which may be slightly inaccurate), even after it is ready for widespread use, it'll still be used to talk to X in order to speed things up. It'll probably be even longer before Linux desktops are able to ditch X altogether.", "creator": "Prescience500@gmail.com", "creation_time": "2011-02-18T02:47:32Z", "tags": [], "attachment_id": null, "id": 5288539, "time": "2011-02-18T02:47:32Z", "author": "Prescience500@gmail.com", "count": 0, "is_private": false}, {"text": "I think what you are proposing is a really good idea that would make FF even more popular between FOSS users.", "bug_id": 635134, "creator": "george.carstoiu@gmail.com", "raw_text": "I think what you are proposing is a really good idea that would make FF even more popular between FOSS users.", "attachment_id": null, "creation_time": "2011-03-14T12:34:56Z", "tags": [], "id": 5342939, "count": 1, "author": "george.carstoiu@gmail.com", "time": "2011-03-14T12:34:56Z", "is_private": false}, {"bug_id": 635134, "text": "It seems that Google is working on porting Chrome to Wayland according to Phoronix.\nhttp://www.phoronix.com/scan.php?page=news_item&px=OTc4NA\nMozilla will probably have to port it's products at some point in order to stay competitive on Linux.", "attachment_id": null, "creation_time": "2011-09-14T02:45:53Z", "tags": [], "creator": "Prescience500@gmail.com", "raw_text": "It seems that Google is working on porting Chrome to Wayland according to Phoronix.\nhttp://www.phoronix.com/scan.php?page=news_item&px=OTc4NA\nMozilla will probably have to port it's products at some point in order to stay competitive on Linux.", "id": 5716477, "is_private": false, "count": 2, "time": "2011-09-14T02:45:53Z", "author": "Prescience500@gmail.com"}, {"bug_id": 635134, "text": "It looks like firefox uses GTK, which should make this easier.  GTK 3.4 supports wayland 0.85.  The page with instructions to build GTK with wayland support also has a \"Porting your GTK+ application\" section: http://wayland.freedesktop.org/gtk.html\n\nI guess I'll just paste the whole thing here:\n\nThe GTK+ port to Wayland has some major functionality gaps. Porting of applications at this stage should simply be to start identifying where applications makes API calls that will not function under Wayland.\n\n    * Ensure that your application uses gtk+-3.0 for its pkg-config request.\n    * Your application must not use any API in the gdk_x11_ namespace or any raw Xlib calls.\n    * Check the errata below for issues that might affect your application.\n\nAPI to access the underlying wl_surface, wl_shell_surface and wl_display may be available in later versions of the code but are not available right now.", "tags": [], "creation_time": "2012-03-13T20:34:51Z", "attachment_id": null, "raw_text": "It looks like firefox uses GTK, which should make this easier.  GTK 3.4 supports wayland 0.85.  The page with instructions to build GTK with wayland support also has a \"Porting your GTK+ application\" section: http://wayland.freedesktop.org/gtk.html\n\nI guess I'll just paste the whole thing here:\n\nThe GTK+ port to Wayland has some major functionality gaps. Porting of applications at this stage should simply be to start identifying where applications makes API calls that will not function under Wayland.\n\n    * Ensure that your application uses gtk+-3.0 for its pkg-config request.\n    * Your application must not use any API in the gdk_x11_ namespace or any raw Xlib calls.\n    * Check the errata below for issues that might affect your application.\n\nAPI to access the underlying wl_surface, wl_shell_surface and wl_display may be available in later versions of the code but are not available right now.", "creator": "darxus-mozillabug@chaosreigns.com", "id": 6136996, "is_private": false, "author": "darxus-mozillabug@chaosreigns.com", "time": "2012-03-13T20:34:51Z", "count": 3}, {"bug_id": 635134, "text": "Note that a live CD allows to test applications on Wayland http://phoronix.com/forums/showthread.php?69394-Wayland-s-Weston-Lands-In-Ubuntu-12-04-LTS&p=254064#post254064", "tags": [], "creation_time": "2012-03-15T13:44:29Z", "attachment_id": null, "raw_text": "Note that a live CD allows to test applications on Wayland http://phoronix.com/forums/showthread.php?69394-Wayland-s-Weston-Lands-In-Ubuntu-12-04-LTS&p=254064#post254064", "creator": "anti-stress@laposte.net", "id": 6142497, "is_private": false, "author": "anti-stress@laposte.net", "time": "2012-03-15T13:44:29Z", "count": 4}, {"id": 6200683, "author": "darxus-mozillabug@chaosreigns.com", "time": "2012-04-05T16:30:03Z", "count": 5, "is_private": false, "text": "Other gtk applications are handling this by wrapping xlib calls in \"#ifdef GDK_WINDOWING_X11\".  I'm curious how much of the gecko gtk3 work could be handled this easily, and how much would require something more involved.", "bug_id": 635134, "raw_text": "Other gtk applications are handling this by wrapping xlib calls in \"#ifdef GDK_WINDOWING_X11\".  I'm curious how much of the gecko gtk3 work could be handled this easily, and how much would require something more involved.", "creator": "darxus-mozillabug@chaosreigns.com", "creation_time": "2012-04-05T16:30:03Z", "tags": [], "attachment_id": null}, {"id": 6200692, "is_private": false, "count": 6, "author": "darxus-mozillabug@chaosreigns.com", "time": "2012-04-05T16:31:29Z", "bug_id": 635134, "text": "Similar work on gnome-terminal: https://bugzilla.gnome.org/show_bug.cgi?id=673323", "attachment_id": null, "creation_time": "2012-04-05T16:31:29Z", "tags": [], "creator": "darxus-mozillabug@chaosreigns.com", "raw_text": "Similar work on gnome-terminal: https://bugzilla.gnome.org/show_bug.cgi?id=673323"}, {"author": "kairo@kairo.at", "time": "2012-04-05T17:10:26Z", "count": 7, "is_private": false, "id": 6200804, "raw_text": "Mozilla stuff is not a \"gtk application\", we only use GTK for a few specific things like getting the theming of our XUL widgets right. Our work to remove direct usages of X Bitmaps and go for GL for everything is way more relevant to potentially running on Wayland than any GTK stuff is.", "creator": "kairo@kairo.at", "creation_time": "2012-04-05T17:10:26Z", "tags": [], "attachment_id": null, "text": "Mozilla stuff is not a \"gtk application\", we only use GTK for a few specific things like getting the theming of our XUL widgets right. Our work to remove direct usages of X Bitmaps and go for GL for everything is way more relevant to potentially running on Wayland than any GTK stuff is.", "bug_id": 635134}, {"time": "2012-04-05T17:28:11Z", "count": 8, "text": "\"#ifdef GDK_WINDOWING_X11\" is only a build time check, so it's insufficient.  A run time check is also needed, something like \"if (GDK_IS_X11_DISPLAY (display))\", documented here:  http://developer.gnome.org/gtk3/3.3/ch24s02.html#id1502079\n\nThere are also GDK_IS_X11_SCREEN and GDK_IS_X11_WINDOW.", "raw_text": "\"#ifdef GDK_WINDOWING_X11\" is only a build time check, so it's insufficient.  A run time check is also needed, something like \"if (GDK_IS_X11_DISPLAY (display))\", documented here:  http://developer.gnome.org/gtk3/3.3/ch24s02.html#id1502079\n\nThere are also GDK_IS_X11_SCREEN and GDK_IS_X11_WINDOW.", "creator": "darxus-mozillabug@chaosreigns.com", "id": 6200890, "author": "darxus-mozillabug@chaosreigns.com", "is_private": false, "bug_id": 635134, "creation_time": "2012-04-05T17:28:11Z", "tags": [], "attachment_id": null}, {"bug_id": 635134, "attachment_id": null, "tags": [], "creation_time": "2012-04-05T17:29:00Z", "id": 6200896, "is_private": false, "author": "darxus-mozillabug@chaosreigns.com", "text": "Robert: Outputting directly via GL sounds lovely, where can I find more info on that effort?  Is there a bug open?", "creator": "darxus-mozillabug@chaosreigns.com", "raw_text": "Robert: Outputting directly via GL sounds lovely, where can I find more info on that effort?  Is there a bug open?", "count": 9, "time": "2012-04-05T17:29:00Z"}, {"is_private": false, "count": 10, "time": "2012-04-05T17:38:14Z", "author": "kairo@kairo.at", "id": 6200945, "attachment_id": null, "creation_time": "2012-04-05T17:38:14Z", "tags": [], "creator": "kairo@kairo.at", "raw_text": "(In reply to Darxus from comment #9)\n> Robert: Outputting directly via GL sounds lovely, where can I find more info\n> on that effort?  Is there a bug open?\n\nAFAIK there are multiple bug open for that, probably blocking some \"enable OpenGL layers by default\" bug, just search for OpenGL stuff here in Bugzilla and you should find a few.\n(Note that I'm no code, just an interested community member, so I don't know all the details, but I usually have some rough grasp of the overview.)", "bug_id": 635134, "text": "(In reply to Darxus from comment #9)\n> Robert: Outputting directly via GL sounds lovely, where can I find more info\n> on that effort?  Is there a bug open?\n\nAFAIK there are multiple bug open for that, probably blocking some \"enable OpenGL layers by default\" bug, just search for OpenGL stuff here in Bugzilla and you should find a few.\n(Note that I'm no code, just an interested community member, so I don't know all the details, but I usually have some rough grasp of the overview.)"}, {"raw_text": "The ongoing work to stop using X pixmaps directly is an important prerequisite for this. Marking as blockers.", "creator": "jacob.benoit.1@gmail.com", "creation_time": "2012-04-09T17:32:58Z", "tags": [], "attachment_id": null, "text": "The ongoing work to stop using X pixmaps directly is an important prerequisite for this. Marking as blockers.", "bug_id": 635134, "author": "jacob.benoit.1@gmail.com", "time": "2012-04-09T17:32:58Z", "count": 11, "is_private": false, "id": 6207628}, {"time": "2013-10-27T14:08:44Z", "count": 12, "raw_text": "What about starting from Mobile Firefox? On a tablet it's pretty much like a desktop browser (indeed without some of the bloat of classic desktop Firefox), and porting from Android should be simpler than disentangling the X/GTK mess (I bet Android Firefox doesn't use xpixmaps for example!).", "creator": "franck@nenie.org", "text": "What about starting from Mobile Firefox? On a tablet it's pretty much like a desktop browser (indeed without some of the bloat of classic desktop Firefox), and porting from Android should be simpler than disentangling the X/GTK mess (I bet Android Firefox doesn't use xpixmaps for example!).", "author": "franck@nenie.org", "is_private": false, "id": 8008297, "creation_time": "2013-10-27T14:08:44Z", "tags": [], "attachment_id": null, "bug_id": 635134}, {"time": "2014-06-25T09:35:29Z", "author": "pochu27@gmail.com", "count": 13, "is_private": false, "id": 8974923, "raw_text": "I recently looked at this. I tried to get Firefox-gtk3 running on Weston, using hacks wherever needed to avoid X11 calls / paths. After those bunch of hacks (which obviously would need to be done properly), I managed to get Firefox running on Weston, not without issues. More work is needed to turn those hacks into proper checks, to add suitable codepaths for wayland where necessary, and to fix regressions / bugs.\n\nThe attached patch is what I used, which as I said is quite hacky. This was tested on top of r186206. Perhaps various / most of those tests aren't necessary if MOZ_X11 is forced to 0 in configure.ac, I didn't try that. In any case, support for both X11 and Wayland in the same binary would be desirable, with runtime detection checks to pick one path or the other.", "creator": "pochu27@gmail.com", "tags": [], "creation_time": "2014-06-25T09:35:29Z", "attachment_id": 8445763, "text": "Created attachment 8445763\nHacks to get firefox on wayland\n\nI recently looked at this. I tried to get Firefox-gtk3 running on Weston, using hacks wherever needed to avoid X11 calls / paths. After those bunch of hacks (which obviously would need to be done properly), I managed to get Firefox running on Weston, not without issues. More work is needed to turn those hacks into proper checks, to add suitable codepaths for wayland where necessary, and to fix regressions / bugs.\n\nThe attached patch is what I used, which as I said is quite hacky. This was tested on top of r186206. Perhaps various / most of those tests aren't necessary if MOZ_X11 is forced to 0 in configure.ac, I didn't try that. In any case, support for both X11 and Wayland in the same binary would be desirable, with runtime detection checks to pick one path or the other.", "bug_id": 635134}, {"id": 8974928, "author": "pochu27@gmail.com", "is_private": false, "bug_id": 635134, "creation_time": "2014-06-25T09:36:51Z", "tags": [], "attachment_id": 8445765, "time": "2014-06-25T09:36:51Z", "count": 14, "text": "Created attachment 8445765\nScreenshot of firefox running on weston\n\nThis is a screenshot of firefox running on weston.\n\nAlso see http://emilio.pozuelo.org/?p=75", "raw_text": "This is a screenshot of firefox running on weston.\n\nAlso see http://emilio.pozuelo.org/?p=75", "creator": "pochu27@gmail.com"}, {"count": 15, "time": "2014-06-25T11:02:42Z", "creator": "jacob.benoit.1@gmail.com", "raw_text": "\\o/ cheers for that!", "text": "\\o/ cheers for that!", "author": "jacob.benoit.1@gmail.com", "is_private": false, "id": 8975187, "attachment_id": null, "tags": [], "creation_time": "2014-06-25T11:02:42Z", "bug_id": 635134}, {"bug_id": 635134, "tags": [], "creation_time": "2015-02-03T14:11:29Z", "attachment_id": null, "id": 9874542, "author": "stransky@redhat.com", "is_private": false, "text": "Downstream bug - https://bugzilla.redhat.com/show_bug.cgi?id=1054334", "raw_text": "Downstream bug - https://bugzilla.redhat.com/show_bug.cgi?id=1054334", "creator": "stransky@redhat.com", "time": "2015-02-03T14:11:29Z", "count": 16}, {"raw_text": "Karl, can you please check this one? It uses gtkx.h wrapper to provide a GDK_IS_X11_DISPLAY() macro for GTK2 builds.", "creator": "stransky@redhat.com", "text": "Created attachment 8566469\nshaped patch\n\nKarl, can you please check this one? It uses gtkx.h wrapper to provide a GDK_IS_X11_DISPLAY() macro for GTK2 builds.", "time": "2015-02-19T12:50:31Z", "count": 17, "creation_time": "2015-02-19T12:50:31Z", "tags": [], "attachment_id": 8566469, "bug_id": 635134, "author": "stransky@redhat.com", "is_private": false, "id": 9935230}, {"bug_id": 635134, "creation_time": "2015-03-02T03:36:14Z", "tags": [], "attachment_id": 8566469, "id": 9972074, "is_private": false, "author": "karlt@mozbugz.karlt.net", "text": "Comment on attachment 8566469\nshaped patch\n\n>+#include <gtk/gtkx.h>\n> \n> #include \"gfxImageSurface.h\"\n> #ifdef MOZ_X11\n> #include <gdk/gdkx.h>\n\nGDK_IS_X11_DISPLAY should be provided by <gdk/gdkx.h>, so <gtk/gtkx.h> should\nbe unnecessary, here at least.\n\n>+++ b/widget/gtk/compat/gtk/gtkx.h\n>@@ -0,0 +1,14 @@\n>+/* This Source Code Form is subject to the terms of the Mozilla Public\n>+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n>+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n>+\n>+#ifndef GTKX_WRAPPER_H\n>+#define GTKX_WRAPPER_H\n>+\n>+#if (MOZ_WIDGET_GTK == 3)\n>+#include_next <gtk/gtkx.h>\n>+#endif\n>+\n>+#define GDK_IS_X11_DISPLAY(a)   (true)\n\nwidget/gtk/compat/gdk/gdkx.h would be the place to define GDK_IS_X11_DISPLAY.\n\nIt should only be defined if not already defined,\nor only #if (GTK_MAJOR_VERSION == 2).\n\n>+        bool useXlibSurface = (UseXRender() && !UseImageOffscreenSurfaces());\n>+        if (useXlibSurface) {\n>+            useXlibSurface = GDK_IS_X11_DISPLAY(gdk_display_get_default());\n>+        }\n\nAssume that UseXRender() returning true means the default display is an X11\ndisplay.\n\n>+  mGdkDisplay = gdk_display_open(display_name);\n>+  if (!mGdkDisplay) {\n>+    PR_fprintf(PR_STDERR, \"Error: cannot open display: %s\\n\", display_name);\n>+    return 1;\n>+  }\n>+  gdk_display_manager_set_default_display (gdk_display_manager_get(),\n>+                                           mGdkDisplay);    \n> #endif /* MOZ_WIDGET_GTK */\n> \n> #ifdef MOZ_ENABLE_XREMOTE\n>   // handle --remote now that xpcom is fired up\n>   bool newInstance;\n>   {\n>     char *e = PR_GetEnv(\"MOZ_NO_REMOTE\");\n>     mDisableRemote = (e && *e);\n>+#if defined(MOZ_WIDGET_GTK)\n>+    if (!GDK_IS_X11_DISPLAY(mGdkDisplay))\n>+      mDisableRemote = true;\n\nXInitThreads() needs to be called before Xlib is used.\n\nI wonder whether it would be tidier to set mDisableRemote in the\nMOZ_WIDGET_GTK block above and then use\nmDisableRemote = mDisableRemove && e && *e;\n\n>   gdk_window_add_filter(mRootWindow, root_window_event_filter, this);\n> #ifdef MOZ_X11\n>-  mNetWorkareaAtom =\n>-    XInternAtom(GDK_WINDOW_XDISPLAY(mRootWindow), \"_NET_WORKAREA\", False);\n>+  if (GDK_IS_X11_DISPLAY(gdk_display_get_default()))\n>+      mNetWorkareaAtom =\n>+        XInternAtom(GDK_WINDOW_XDISPLAY(mRootWindow), \"_NET_WORKAREA\", False);\n> #endif\n\nI don't know whether Wayland uses properties like _NET_WORKAREA or whether it\nhas its own mechanisms.  If it uses this property then GDK has\ngdk_atom_intern_static_string() for any backend.\nIf Wayland uses another mechanism, then initialize mNetWorkareaAtom to\nsomething so that it won't match in root_window_event_filter.\n\n>     if (synthEvent) {\n> #ifdef MOZ_X11\n>-        event.refPoint.x = nscoord(xevent.xmotion.x);\n>-        event.refPoint.y = nscoord(xevent.xmotion.y);\n>-\n>-        modifierState = xevent.xmotion.state;\n>-\n>-        event.time = xevent.xmotion.time;\n>-#else\n>-        event.refPoint.x = nscoord(aEvent->x);\n>-        event.refPoint.y = nscoord(aEvent->y);\n>-\n>-        modifierState = aEvent->state;\n>-\n>-        event.time = aEvent->time;\n>+        if (isX11Display) {\n>+            event.refPoint.x = nscoord(xevent.xmotion.x);\n>+            event.refPoint.y = nscoord(xevent.xmotion.y);\n>+\n>+            modifierState = xevent.xmotion.state;\n>+\n>+            event.time = xevent.xmotion.time;\n>+        }\n>+        else {\n>+#endif /* MOZ_X11 */\n>+            event.refPoint.x = nscoord(aEvent->x);\n>+            event.refPoint.y = nscoord(aEvent->y);\n>+\n>+            modifierState = aEvent->state;\n>+\n>+            event.time = aEvent->time;\n>+#ifdef MOZ_X11\n>+        }\n> #endif /* MOZ_X11 */\n\nsynthEvent can only be true when MOZ_X11 is defined and\nGDK_IS_X11_DISPLAY(gdk_display_get_default()), so most of this is not needed.", "raw_text": ">+#include <gtk/gtkx.h>\n> \n> #include \"gfxImageSurface.h\"\n> #ifdef MOZ_X11\n> #include <gdk/gdkx.h>\n\nGDK_IS_X11_DISPLAY should be provided by <gdk/gdkx.h>, so <gtk/gtkx.h> should\nbe unnecessary, here at least.\n\n>+++ b/widget/gtk/compat/gtk/gtkx.h\n>@@ -0,0 +1,14 @@\n>+/* This Source Code Form is subject to the terms of the Mozilla Public\n>+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n>+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n>+\n>+#ifndef GTKX_WRAPPER_H\n>+#define GTKX_WRAPPER_H\n>+\n>+#if (MOZ_WIDGET_GTK == 3)\n>+#include_next <gtk/gtkx.h>\n>+#endif\n>+\n>+#define GDK_IS_X11_DISPLAY(a)   (true)\n\nwidget/gtk/compat/gdk/gdkx.h would be the place to define GDK_IS_X11_DISPLAY.\n\nIt should only be defined if not already defined,\nor only #if (GTK_MAJOR_VERSION == 2).\n\n>+        bool useXlibSurface = (UseXRender() && !UseImageOffscreenSurfaces());\n>+        if (useXlibSurface) {\n>+            useXlibSurface = GDK_IS_X11_DISPLAY(gdk_display_get_default());\n>+        }\n\nAssume that UseXRender() returning true means the default display is an X11\ndisplay.\n\n>+  mGdkDisplay = gdk_display_open(display_name);\n>+  if (!mGdkDisplay) {\n>+    PR_fprintf(PR_STDERR, \"Error: cannot open display: %s\\n\", display_name);\n>+    return 1;\n>+  }\n>+  gdk_display_manager_set_default_display (gdk_display_manager_get(),\n>+                                           mGdkDisplay);    \n> #endif /* MOZ_WIDGET_GTK */\n> \n> #ifdef MOZ_ENABLE_XREMOTE\n>   // handle --remote now that xpcom is fired up\n>   bool newInstance;\n>   {\n>     char *e = PR_GetEnv(\"MOZ_NO_REMOTE\");\n>     mDisableRemote = (e && *e);\n>+#if defined(MOZ_WIDGET_GTK)\n>+    if (!GDK_IS_X11_DISPLAY(mGdkDisplay))\n>+      mDisableRemote = true;\n\nXInitThreads() needs to be called before Xlib is used.\n\nI wonder whether it would be tidier to set mDisableRemote in the\nMOZ_WIDGET_GTK block above and then use\nmDisableRemote = mDisableRemove && e && *e;\n\n>   gdk_window_add_filter(mRootWindow, root_window_event_filter, this);\n> #ifdef MOZ_X11\n>-  mNetWorkareaAtom =\n>-    XInternAtom(GDK_WINDOW_XDISPLAY(mRootWindow), \"_NET_WORKAREA\", False);\n>+  if (GDK_IS_X11_DISPLAY(gdk_display_get_default()))\n>+      mNetWorkareaAtom =\n>+        XInternAtom(GDK_WINDOW_XDISPLAY(mRootWindow), \"_NET_WORKAREA\", False);\n> #endif\n\nI don't know whether Wayland uses properties like _NET_WORKAREA or whether it\nhas its own mechanisms.  If it uses this property then GDK has\ngdk_atom_intern_static_string() for any backend.\nIf Wayland uses another mechanism, then initialize mNetWorkareaAtom to\nsomething so that it won't match in root_window_event_filter.\n\n>     if (synthEvent) {\n> #ifdef MOZ_X11\n>-        event.refPoint.x = nscoord(xevent.xmotion.x);\n>-        event.refPoint.y = nscoord(xevent.xmotion.y);\n>-\n>-        modifierState = xevent.xmotion.state;\n>-\n>-        event.time = xevent.xmotion.time;\n>-#else\n>-        event.refPoint.x = nscoord(aEvent->x);\n>-        event.refPoint.y = nscoord(aEvent->y);\n>-\n>-        modifierState = aEvent->state;\n>-\n>-        event.time = aEvent->time;\n>+        if (isX11Display) {\n>+            event.refPoint.x = nscoord(xevent.xmotion.x);\n>+            event.refPoint.y = nscoord(xevent.xmotion.y);\n>+\n>+            modifierState = xevent.xmotion.state;\n>+\n>+            event.time = xevent.xmotion.time;\n>+        }\n>+        else {\n>+#endif /* MOZ_X11 */\n>+            event.refPoint.x = nscoord(aEvent->x);\n>+            event.refPoint.y = nscoord(aEvent->y);\n>+\n>+            modifierState = aEvent->state;\n>+\n>+            event.time = aEvent->time;\n>+#ifdef MOZ_X11\n>+        }\n> #endif /* MOZ_X11 */\n\nsynthEvent can only be true when MOZ_X11 is defined and\nGDK_IS_X11_DISPLAY(gdk_display_get_default()), so most of this is not needed.", "creator": "karlt@mozbugz.karlt.net", "time": "2015-03-02T03:36:14Z", "count": 18}, {"creation_time": "2015-03-04T14:28:13Z", "tags": [], "attachment_id": 8572611, "bug_id": 635134, "is_private": false, "author": "stransky@redhat.com", "id": 9984633, "raw_text": "Thanks, there's an updated one. \n\nAnother check added tp nsWindow::HasPendingInputEvent() which was missing in the original patch.\n\n> XInitThreads() needs to be called before Xlib is used.\n> \n> I wonder whether it would be tidier to set mDisableRemote in the\n> MOZ_WIDGET_GTK block above and then use\n> mDisableRemote = mDisableRemove && e && *e;\n\nI see. I think the correct construction is (mDisableRemove || (e && *e)).\n\n> If Wayland uses another mechanism, then initialize mNetWorkareaAtom to\n> something so that it won't match in root_window_event_filter.\n\nIt does not use _NET_WORKAREA so I initialized it to 0 in class constructor.", "creator": "stransky@redhat.com", "text": "Created attachment 8572611\nwayland v.2\n\nThanks, there's an updated one. \n\nAnother check added tp nsWindow::HasPendingInputEvent() which was missing in the original patch.\n\n> XInitThreads() needs to be called before Xlib is used.\n> \n> I wonder whether it would be tidier to set mDisableRemote in the\n> MOZ_WIDGET_GTK block above and then use\n> mDisableRemote = mDisableRemove && e && *e;\n\nI see. I think the correct construction is (mDisableRemove || (e && *e)).\n\n> If Wayland uses another mechanism, then initialize mNetWorkareaAtom to\n> something so that it won't match in root_window_event_filter.\n\nIt does not use _NET_WORKAREA so I initialized it to 0 in class constructor.", "time": "2015-03-04T14:28:13Z", "count": 19}, {"bug_id": 635134, "creation_time": "2015-03-05T00:05:39Z", "tags": [], "attachment_id": 8572611, "id": 9988128, "is_private": false, "author": "karlt@mozbugz.karlt.net", "text": "Comment on attachment 8572611\nwayland v.2\n\n(In reply to Martin Str\u00e1nsk\u00fd from comment #19)\n> I see. I think the correct construction is (mDisableRemove || (e && *e)).\n\nAh, yes.  Thank you.\n\n>+  if (!GDK_IS_X11_DISPLAY(mGdkDisplay))\n>+    mDisableRemote = true;\n>+# endif\n\nPlease add {} on this conditional block, which is the style we're moving\ntowards (though I don't mind missing {} around jump statements such as\nreturn).\n\nAnd please remove the space in \"# endif\" so that it aligns with the #if above.\n\n>+STUB(gdk_cairo_create)\n\nI don't see this used outside nptest_gtk2.cpp, where the stub should not be\nnecessary.\n\nPlease remove, or is a preprocessing change causing something to depend on\nthis?", "raw_text": "(In reply to Martin Str\u00e1nsk\u00fd from comment #19)\n> I see. I think the correct construction is (mDisableRemove || (e && *e)).\n\nAh, yes.  Thank you.\n\n>+  if (!GDK_IS_X11_DISPLAY(mGdkDisplay))\n>+    mDisableRemote = true;\n>+# endif\n\nPlease add {} on this conditional block, which is the style we're moving\ntowards (though I don't mind missing {} around jump statements such as\nreturn).\n\nAnd please remove the space in \"# endif\" so that it aligns with the #if above.\n\n>+STUB(gdk_cairo_create)\n\nI don't see this used outside nptest_gtk2.cpp, where the stub should not be\nnecessary.\n\nPlease remove, or is a preprocessing change causing something to depend on\nthis?", "creator": "karlt@mozbugz.karlt.net", "time": "2015-03-05T00:05:39Z", "count": 20}, {"count": 21, "time": "2015-03-05T11:56:57Z", "text": "Created attachment 8573204\nwayland for check-in\n\nThanks, there's the one for check-in. try: https://treeherder.mozilla.org/#/jobs?repo=try&revision=04dd5d53450f\n\ngdk_cairo_create is a leftover from my experiments with nsWindow::GetThebesSurface() which need an update but I'd prefer to leave it to another patch.", "creator": "stransky@redhat.com", "raw_text": "Thanks, there's the one for check-in. try: https://treeherder.mozilla.org/#/jobs?repo=try&revision=04dd5d53450f\n\ngdk_cairo_create is a leftover from my experiments with nsWindow::GetThebesSurface() which need an update but I'd prefer to leave it to another patch.", "id": 9990307, "author": "stransky@redhat.com", "is_private": false, "bug_id": 635134, "attachment_id": 8573204, "tags": [], "creation_time": "2015-03-05T11:56:57Z"}, {"bug_id": 635134, "creation_time": "2015-03-05T22:19:20Z", "tags": [], "attachment_id": null, "id": 9993496, "author": "karlt@mozbugz.karlt.net", "is_private": false, "text": "Please file new bugs, blocking this one, for other patches.  A single Bugzilla bug is not good at managing multiple threads, but multiple bugs can organize related information.", "raw_text": "Please file new bugs, blocking this one, for other patches.  A single Bugzilla bug is not good at managing multiple threads, but multiple bugs can organize related information.", "creator": "karlt@mozbugz.karlt.net", "time": "2015-03-05T22:19:20Z", "count": 22}, {"bug_id": 635134, "attachment_id": null, "creation_time": "2015-03-06T13:19:23Z", "tags": [], "id": 9996143, "is_private": false, "author": "cbook@mozilla.com", "text": "https://hg.mozilla.org/integration/mozilla-inbound/rev/53503035a93d", "creator": "cbook@mozilla.com", "raw_text": "https://hg.mozilla.org/integration/mozilla-inbound/rev/53503035a93d", "count": 23, "time": "2015-03-06T13:19:23Z"}, {"id": 10000320, "is_private": false, "time": "2015-03-07T18:14:09Z", "author": "ryanvm@gmail.com", "count": 24, "bug_id": 635134, "text": "https://hg.mozilla.org/mozilla-central/rev/53503035a93d", "tags": [], "creation_time": "2015-03-07T18:14:09Z", "attachment_id": null, "raw_text": "https://hg.mozilla.org/mozilla-central/rev/53503035a93d", "creator": "ryanvm@gmail.com"}, {"creator": "stransky@redhat.com", "raw_text": "There's a followup patch for non X11 bacekends (tested on broadway and wayland).\nI'd like to discuss it here and we can divide it to separate bugs then. It address those issues:\n\n- draw to container window - we can't draw on toplevel window on wayland because it's bigger than the widget and it's used to render widget shadow. So I use mozcontainer window for rendering.\n- create gfxSurface (in GetThebesSurface) as a wrapped one. Is there any better way? Off screen surface or something different?\n- cairo subsurfaces fixes - non-X11 gtk uses cairo subsurface types which are tricky - reported as images but image backend mostly fails. \n- disables GXL support\n- disables OMTC (is it supposed to work somehow on wayland?)\n- try to detect propper backend from ENV variables\n\nThanks!", "text": "Created attachment 8643709\nWIP patch\n\nThere's a followup patch for non X11 bacekends (tested on broadway and wayland).\nI'd like to discuss it here and we can divide it to separate bugs then. It address those issues:\n\n- draw to container window - we can't draw on toplevel window on wayland because it's bigger than the widget and it's used to render widget shadow. So I use mozcontainer window for rendering.\n- create gfxSurface (in GetThebesSurface) as a wrapped one. Is there any better way? Off screen surface or something different?\n- cairo subsurfaces fixes - non-X11 gtk uses cairo subsurface types which are tricky - reported as images but image backend mostly fails. \n- disables GXL support\n- disables OMTC (is it supposed to work somehow on wayland?)\n- try to detect propper backend from ENV variables\n\nThanks!", "count": 25, "time": "2015-08-05T14:22:15Z", "attachment_id": 8643709, "tags": [], "creation_time": "2015-08-05T14:22:15Z", "bug_id": 635134, "is_private": false, "author": "stransky@redhat.com", "id": 10580179}, {"author": "fb+mozdev@quantumedia.de", "is_private": false, "id": 10600222, "attachment_id": null, "tags": [], "creation_time": "2015-08-10T20:21:56Z", "bug_id": 635134, "count": 26, "time": "2015-08-10T20:21:56Z", "creator": "fb+mozdev@quantumedia.de", "raw_text": "Just FYI, switching over to GTK+3 seems to be coming soon, see e.g. Bug 1186748.", "text": "Just FYI, switching over to GTK+3 seems to be coming soon, see e.g. Bug 1186748."}, {"is_private": false, "author": "fb+mozdev@quantumedia.de", "id": 10600422, "tags": [], "creation_time": "2015-08-10T21:00:41Z", "attachment_id": null, "bug_id": 635134, "time": "2015-08-10T21:00:41Z", "count": 27, "raw_text": "Sorry, Bug 1186003 is the one. We have GTK+3 in Fx 42+.", "creator": "fb+mozdev@quantumedia.de", "text": "Sorry, Bug 1186003 is the one. We have GTK+3 in Fx 42+."}, {"time": "2015-08-25T02:19:06Z", "count": 28, "text": "(In reply to Martin Str\u00e1nsk\u00fd from comment #25)\n> - disables OMTC (is it supposed to work somehow on wayland?)\n\nWhat's broken with OMTC? Disabling it isn't going to be an option.", "raw_text": "(In reply to Martin Str\u00e1nsk\u00fd from comment #25)\n> - disables OMTC (is it supposed to work somehow on wayland?)\n\nWhat's broken with OMTC? Disabling it isn't going to be an option.", "creator": "jmuizelaar@mozilla.com", "id": 10653677, "author": "jmuizelaar@mozilla.com", "is_private": false, "bug_id": 635134, "creation_time": "2015-08-25T02:19:06Z", "tags": [], "attachment_id": null}, {"creator": "karlt@mozbugz.karlt.net", "raw_text": "(In reply to Martin Str\u00e1nsk\u00fd from comment #25)\n> - draw to container window - we can't draw on toplevel window on wayland\n> because it's bigger than the widget and it's used to render widget shadow.\n> So I use mozcontainer window for rendering.\n\nThis makes sense.  It is more a CSD issue than a Wayland issue.  The issue\nexists on X11 also (bug 1195002).  I assume Wayland doesn't force compositors\nto depend on clients for decorations.\n\n> - create gfxSurface (in GetThebesSurface) as a wrapped one.\n\nThat seems reasonable to me.  I'm not familiar with the drawing model though.\nIs a swap-buffers required after drawing?\n\n> - cairo subsurfaces fixes - non-X11 gtk uses cairo subsurface types which\n> are tricky - reported as images but image backend mostly fails.\n\nI don't know anything about that.\n\nThese things are going to be easier to review in conceptual chunks with\nreasoning behind them.  If this is working around a cairo bug, then we need to\nconsider why this can't be fixed in cairo.  I suspect we have time before\nthe Wayland port is ready for production.\n\n> - disables GXL support\n\nHaven't really looked at that, but that can be handled separately, I assume.\n\n> - disables OMTC (is it supposed to work somehow on wayland?)\n\nCurrently GetThebesSurface() is used on the compositor thread which is an\nexisting bug because GDK is not designed for multi-thread access.\n\nFor OMTC, I guess it is possible to fetch the surface on the main thread and\nthen return it when requested on the compositor thread.\n\n> - try to detect propper backend from ENV variables\n\nI haven't looked into details there either but that is also an isolated change.", "attachment_id": 8643709, "creation_time": "2015-09-07T06:38:38Z", "tags": [], "text": "Comment on attachment 8643709\nWIP patch\n\n(In reply to Martin Str\u00e1nsk\u00fd from comment #25)\n> - draw to container window - we can't draw on toplevel window on wayland\n> because it's bigger than the widget and it's used to render widget shadow.\n> So I use mozcontainer window for rendering.\n\nThis makes sense.  It is more a CSD issue than a Wayland issue.  The issue\nexists on X11 also (bug 1195002).  I assume Wayland doesn't force compositors\nto depend on clients for decorations.\n\n> - create gfxSurface (in GetThebesSurface) as a wrapped one.\n\nThat seems reasonable to me.  I'm not familiar with the drawing model though.\nIs a swap-buffers required after drawing?\n\n> - cairo subsurfaces fixes - non-X11 gtk uses cairo subsurface types which\n> are tricky - reported as images but image backend mostly fails.\n\nI don't know anything about that.\n\nThese things are going to be easier to review in conceptual chunks with\nreasoning behind them.  If this is working around a cairo bug, then we need to\nconsider why this can't be fixed in cairo.  I suspect we have time before\nthe Wayland port is ready for production.\n\n> - disables GXL support\n\nHaven't really looked at that, but that can be handled separately, I assume.\n\n> - disables OMTC (is it supposed to work somehow on wayland?)\n\nCurrently GetThebesSurface() is used on the compositor thread which is an\nexisting bug because GDK is not designed for multi-thread access.\n\nFor OMTC, I guess it is possible to fetch the surface on the main thread and\nthen return it when requested on the compositor thread.\n\n> - try to detect propper backend from ENV variables\n\nI haven't looked into details there either but that is also an isolated change.", "bug_id": 635134, "count": 29, "author": "karlt@mozbugz.karlt.net", "time": "2015-09-07T06:38:38Z", "is_private": false, "id": 10701565}, {"count": 30, "time": "2015-10-07T00:33:20Z", "creator": "kbrosnan@mozilla.com", "raw_text": "", "text": "*** Bug 1190183 has been marked as a duplicate of this bug. ***", "is_private": false, "author": "kbrosnan@mozilla.com", "id": 10814689, "attachment_id": null, "creation_time": "2015-10-07T00:33:20Z", "tags": [], "bug_id": 635134}, {"bug_id": 635134, "text": "I tested latest nightly and works fine on Wayland, with patches from Bug 1215085 Bug 1215088 and Bug 1215104. So we need just 3 extra patches to make Firefox work on Wayland.", "attachment_id": null, "creation_time": "2016-06-20T14:17:14Z", "tags": [], "creator": "stransky@redhat.com", "raw_text": "I tested latest nightly and works fine on Wayland, with patches from Bug 1215085 Bug 1215088 and Bug 1215104. So we need just 3 extra patches to make Firefox work on Wayland.", "id": 11490211, "is_private": false, "count": 31, "author": "stransky@redhat.com", "time": "2016-06-20T14:17:14Z"}, {"time": "2016-06-20T14:31:59Z", "count": 32, "text": "Created attachment 8763594\npatch\n\nComplete Wayland patch for latest trunk.", "raw_text": "Complete Wayland patch for latest trunk.", "creator": "stransky@redhat.com", "id": 11490263, "author": "stransky@redhat.com", "is_private": false, "bug_id": 635134, "creation_time": "2016-06-20T14:31:59Z", "tags": [], "attachment_id": 8763594}, {"author": "goku21@leeching.net", "is_private": false, "id": 11498132, "attachment_id": null, "tags": [], "creation_time": "2016-06-23T15:25:29Z", "bug_id": 635134, "count": 33, "time": "2016-06-23T15:25:29Z", "creator": "goku21@leeching.net", "raw_text": "Archlinux 64bit. With the above patch Firefox is still broken on Wayland+Weston. E.g content in Firefox window is updated only after focusing on another window and focusing back to the Firefox window. Off Main Thread Compositing is disabled.", "text": "Archlinux 64bit. With the above patch Firefox is still broken on Wayland+Weston. E.g content in Firefox window is updated only after focusing on another window and focusing back to the Firefox window. Off Main Thread Compositing is disabled."}, {"bug_id": 635134, "text": "I created a package which applies the patches to the 47.0 sources: https://aur.archlinux.org/packages/firefox-wayland\nUnfortunately this doesn't work yet ... I guess I have apply this patch to trunk?\nI started firefox with: GDK_BACKEND=wayland firefox", "tags": [], "creation_time": "2016-06-23T20:19:26Z", "attachment_id": null, "raw_text": "I created a package which applies the patches to the 47.0 sources: https://aur.archlinux.org/packages/firefox-wayland\nUnfortunately this doesn't work yet ... I guess I have apply this patch to trunk?\nI started firefox with: GDK_BACKEND=wayland firefox", "creator": "onny@project-insanity.org", "id": 11499219, "is_private": false, "author": "onny@project-insanity.org", "time": "2016-06-23T20:19:26Z", "count": 34}, {"text": "Working packages are here but that's Fedora builds (wayland by default, EGL enabled):\nhttps://copr.fedorainfracloud.org/coprs/stransky/firefox-wayland\n\nThe missing rendering content is caused by enabled OMTC, you need to set:\nlayers.offmainthreadcomposition.force-disabled:true on trunk.", "raw_text": "Working packages are here but that's Fedora builds (wayland by default, EGL enabled):\nhttps://copr.fedorainfracloud.org/coprs/stransky/firefox-wayland\n\nThe missing rendering content is caused by enabled OMTC, you need to set:\nlayers.offmainthreadcomposition.force-disabled:true on trunk.", "creator": "stransky@redhat.com", "time": "2016-06-24T05:50:42Z", "count": 35, "bug_id": 635134, "tags": [], "creation_time": "2016-06-24T05:50:42Z", "attachment_id": null, "id": 11499939, "is_private": false, "author": "stransky@redhat.com"}, {"raw_text": ">>Working packages are here but that's Fedora builds (wayland by default, EGL enabled):\n\nTried these as well, same issue.\n\n>>The missing rendering content is caused by enabled OMTC, you need to set:\n\nOMTC is disabled, also content is not missing but is drawn only on window blur. For example, content is updated after focusing on another window and focusing back to the Firefox window. Also, clicking in the addressbar does not show the cursor, but clicking on the menu and bookmarks icon does show menus.\n\nmozconfig\n\n. $topsrcdir/browser/config/mozconfig\n\nac_add_options --enable-default-toolkit=cairo-gtk3\nac_add_options --with-system-nspr\nac_add_options --with-system-nss\nac_add_options --enable-system-sqlite\nac_add_options --disable-system-cairo\nac_add_options --enable-system-ffi\nac_add_options --disable-debug\nac_add_options --enable-optimize=\"-g -O2\"\nac_add_options --disable-crashreporter\nac_add_options --disable-tests\nac_add_options --without-system-jpeg\nac_add_options --with-system-libvpx\nac_add_options --with-system-icu\nac_add_options --enable-release\nac_add_options --enable-pie\nac_add_options --with-gl-provider=EGL\n\nexport BUILD_OFFICIAL=1\nexport MOZILLA_OFFICIAL=1\nexport MOZILLA_TELEMETRY=0\nmk_add_options BUILD_OFFICIAL=1\nmk_add_options MOZILLA_OFFICIAL=1", "creator": "goku21@leeching.net", "text": ">>Working packages are here but that's Fedora builds (wayland by default, EGL enabled):\n\nTried these as well, same issue.\n\n>>The missing rendering content is caused by enabled OMTC, you need to set:\n\nOMTC is disabled, also content is not missing but is drawn only on window blur. For example, content is updated after focusing on another window and focusing back to the Firefox window. Also, clicking in the addressbar does not show the cursor, but clicking on the menu and bookmarks icon does show menus.\n\nmozconfig\n\n. $topsrcdir/browser/config/mozconfig\n\nac_add_options --enable-default-toolkit=cairo-gtk3\nac_add_options --with-system-nspr\nac_add_options --with-system-nss\nac_add_options --enable-system-sqlite\nac_add_options --disable-system-cairo\nac_add_options --enable-system-ffi\nac_add_options --disable-debug\nac_add_options --enable-optimize=\"-g -O2\"\nac_add_options --disable-crashreporter\nac_add_options --disable-tests\nac_add_options --without-system-jpeg\nac_add_options --with-system-libvpx\nac_add_options --with-system-icu\nac_add_options --enable-release\nac_add_options --enable-pie\nac_add_options --with-gl-provider=EGL\n\nexport BUILD_OFFICIAL=1\nexport MOZILLA_OFFICIAL=1\nexport MOZILLA_TELEMETRY=0\nmk_add_options BUILD_OFFICIAL=1\nmk_add_options MOZILLA_OFFICIAL=1", "time": "2016-06-24T12:35:41Z", "count": 36, "creation_time": "2016-06-24T12:35:41Z", "tags": [], "attachment_id": null, "bug_id": 635134, "is_private": false, "author": "goku21@leeching.net", "id": 11500495}, {"attachment_id": null, "creation_time": "2016-06-25T14:40:15Z", "tags": [], "bug_id": 635134, "author": "goku21@leeching.net", "is_private": false, "id": 11502124, "creator": "goku21@leeching.net", "raw_text": "The nightly on Wayland should now work on Archlinux after these steps.\n\n- gfx/thebes/gfxPlatform.cpp - find LayersOffMainThreadCompositionForceDisabled( and add return false; to  the  top of the function. Setting layers.offmainthreadcomposition.force-disabled instead did not work for me.\n- Uncheck \"Enable multi-process Nightly\" in the preferences and restart. Otherwise, not configuration pages will be empty.\n- When clicking some icons or items in the menu - e.g Zoom In, you have to hold Ctrl.", "text": "The nightly on Wayland should now work on Archlinux after these steps.\n\n- gfx/thebes/gfxPlatform.cpp - find LayersOffMainThreadCompositionForceDisabled( and add return false; to  the  top of the function. Setting layers.offmainthreadcomposition.force-disabled instead did not work for me.\n- Uncheck \"Enable multi-process Nightly\" in the preferences and restart. Otherwise, not configuration pages will be empty.\n- When clicking some icons or items in the menu - e.g Zoom In, you have to hold Ctrl.", "count": 37, "time": "2016-06-25T14:40:15Z"}, {"bug_id": 635134, "text": "all y bags when i start firefox-trunk without xwayland\n\n(firefox-trunk:3588): Gtk-WARNING **: Failed to parse \n/home/x/.config/gtk-3.0/se ttings.ini: Key file does not start with a \ngroup \n\n(firefox-trunk:3588): Gtk-WARNING **: Failed to parse/home/x/.config/gtk-3.0/se ttings.ini: Key file does not start with a \ngroup \n\n(firefox-trunk:3588): GConf-WARNING **: Client failed to connect \nto the D-BUS da emon: Unable to autolaunch a dbus-daemon without a \n$DISPLAY for X11 \n\n(firefox-trunk:3588): GConf-WARNING **: Client failed \nto connect to the D-BUS da emon: Unable to autolaunch a dbus-daemon \nwithout a $DISPLAY for X11 \u009e\u00d1\u0088\u00d0\u00b8\u00d0\u00b1\u00d0\u00ba\u00d0\u00b0 \u00d1\u0081\u00d0\u00b5\u00d0\u00b3\u00d0\u00bc\u00d0\u00b5\u00d0\u00bd\u00d1\u0082\u00d0\u00b8\u00d1\u0080\u00d0\u00be\u00d0\u00b2\u00d0\u00b0\u00d0\u00bd\u00d0\u00b8\u00d1\u008f\n\n\n [Child 4679] ###!!! ABORT: Aborting on channel error.: file \n/build/firefox-tru \nnk-_hskEs/firefox-trunk-50.0~a1~hg20160708r304097/ipc/glue/MessageChannel.cpp, \nl ine 2053 \n\n\n(firefox-trunk:4805): Gtk-WARNING **: Failed to parse \n/home/x/.config/gtk-3.0/se ttings.ini: Key file does not have group \n'Settings'", "attachment_id": null, "creation_time": "2016-07-09T06:47:06Z", "tags": [], "creator": "u575260@disabled.tld", "raw_text": "all y bags when i start firefox-trunk without xwayland\n\n(firefox-trunk:3588): Gtk-WARNING **: Failed to parse \n/home/x/.config/gtk-3.0/se ttings.ini: Key file does not start with a \ngroup \n\n(firefox-trunk:3588): Gtk-WARNING **: Failed to parse/home/x/.config/gtk-3.0/se ttings.ini: Key file does not start with a \ngroup \n\n(firefox-trunk:3588): GConf-WARNING **: Client failed to connect \nto the D-BUS da emon: Unable to autolaunch a dbus-daemon without a \n$DISPLAY for X11 \n\n(firefox-trunk:3588): GConf-WARNING **: Client failed \nto connect to the D-BUS da emon: Unable to autolaunch a dbus-daemon \nwithout a $DISPLAY for X11 \u009e\u00d1\u0088\u00d0\u00b8\u00d0\u00b1\u00d0\u00ba\u00d0\u00b0 \u00d1\u0081\u00d0\u00b5\u00d0\u00b3\u00d0\u00bc\u00d0\u00b5\u00d0\u00bd\u00d1\u0082\u00d0\u00b8\u00d1\u0080\u00d0\u00be\u00d0\u00b2\u00d0\u00b0\u00d0\u00bd\u00d0\u00b8\u00d1\u008f\n\n\n [Child 4679] ###!!! ABORT: Aborting on channel error.: file \n/build/firefox-tru \nnk-_hskEs/firefox-trunk-50.0~a1~hg20160708r304097/ipc/glue/MessageChannel.cpp, \nl ine 2053 \n\n\n(firefox-trunk:4805): Gtk-WARNING **: Failed to parse \n/home/x/.config/gtk-3.0/se ttings.ini: Key file does not have group \n'Settings'", "id": 11535925, "is_private": false, "count": 38, "author": "u575260@disabled.tld", "time": "2016-07-09T06:47:06Z"}, {"is_private": false, "count": 39, "author": "ht990332@gmx.com", "time": "2016-08-05T21:17:55Z", "id": 11603485, "attachment_id": null, "creation_time": "2016-08-05T21:17:55Z", "tags": [], "creator": "ht990332@gmx.com", "raw_text": "This isn't directly related to this bug in particular but I have tried running a regular firefox build in a wayland session using Xwayland. Resizing the window causes the black box window to be drawn behind firefox. It disappears when resizing is done.\nCan that be fixed? This alone would be a huge usability improvement.", "bug_id": 635134, "text": "This isn't directly related to this bug in particular but I have tried running a regular firefox build in a wayland session using Xwayland. Resizing the window causes the black box window to be drawn behind firefox. It disappears when resizing is done.\nCan that be fixed? This alone would be a huge usability improvement."}, {"bug_id": 635134, "text": "ftw mozila 2017!\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=635134", "tags": ["spam"], "creation_time": "2017-02-01T09:24:07Z", "attachment_id": null, "raw_text": "ftw mozila 2017!\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=635134", "creator": "u575260@disabled.tld", "id": 12027107, "is_private": false, "author": "u575260@disabled.tld", "time": "2017-02-01T09:24:07Z", "count": 40}, {"count": 41, "time": "2017-02-01T09:26:17Z", "text": "Latest WIP version is at https://github.com/stransky/gecko-dev", "creator": "stransky@redhat.com", "raw_text": "Latest WIP version is at https://github.com/stransky/gecko-dev", "id": 12027113, "is_private": false, "author": "stransky@redhat.com", "bug_id": 635134, "attachment_id": null, "tags": [], "creation_time": "2017-02-01T09:26:17Z"}, {"id": 12027123, "author": "u575260@disabled.tld", "is_private": false, "bug_id": 635134, "attachment_id": null, "tags": ["advocacy"], "creation_time": "2017-02-01T09:30:07Z", "count": 42, "time": "2017-02-01T09:30:07Z", "text": "i have epiphany browser in pure wayland in ubuntu without xwayland and very good work, hd youtube, soundcloud and more. yu mozilla no want work, no want do good for users.", "creator": "u575260@disabled.tld", "raw_text": "i have epiphany browser in pure wayland in ubuntu without xwayland and very good work, hd youtube, soundcloud and more. yu mozilla no want work, no want do good for users."}, {"time": "2017-02-01T09:31:56Z", "author": "u575260@disabled.tld", "count": 43, "is_private": false, "id": 12027127, "raw_text": "(In reply to Martin Str\u00e1nsk\u00fd from comment #41)\n> Latest WIP version is at https://github.com/stransky/gecko-dev\n\noh man, you can make deb for deban on launchpade?", "creator": "u575260@disabled.tld", "tags": ["advocacy"], "creation_time": "2017-02-01T09:31:56Z", "attachment_id": null, "text": "(In reply to Martin Str\u00e1nsk\u00fd from comment #41)\n> Latest WIP version is at https://github.com/stransky/gecko-dev\n\noh man, you can make deb for deban on launchpade?", "bug_id": 635134}, {"time": "2017-02-01T09:39:06Z", "count": 44, "raw_text": "mozilla, you can make package firefox-x11 like recomendate and insert in all x11 depends, but stay clear firefox which can work on weston wayland. but lol you need 5 years for do it, is very defictli. sry mozilla but i not understand you in it, sry my english.", "creator": "u575260@disabled.tld", "text": "mozilla, you can make package firefox-x11 like recomendate and insert in all x11 depends, but stay clear firefox which can work on weston wayland. but lol you need 5 years for do it, is very defictli. sry mozilla but i not understand you in it, sry my english.", "is_private": false, "author": "u575260@disabled.tld", "id": 12027138, "tags": ["advocacy"], "creation_time": "2017-02-01T09:39:06Z", "attachment_id": null, "bug_id": 635134}, {"id": 12029227, "is_private": false, "author": "onny@project-insanity.org", "bug_id": 635134, "attachment_id": null, "tags": [], "creation_time": "2017-02-01T20:51:01Z", "count": 45, "time": "2017-02-01T20:51:01Z", "text": "@Martin Str\u00e1nsk\u00fd: Thank you for maintaining this repo! I tried to make a buildscript for the ArchLinux user repository here: https://aur.archlinux.org/packages/firefox-wayland-git\n\nUnfortunately I get a compile error, maybe you know why:\n> /usr/bin/g++ -std=gnu++11 -o Unified_cpp_js_src9.o -c  -I/home/onny/projects/firefox-wayland-git/src/gecko-dev/obj-x86_64-pc-linux-gnu/dist/system_wrappers -include /home/onny/projects/firefox-wayland-git/src/gecko-dev/config/gcc_hidden.h -DNDEBUG=1 -DTRIMMED=1 -DENABLE_BINARYDATA -DENABLE_SIMD -DENABLE_SHARED_ARRAY_BUFFER -DEXPORT_JS_API -DJS_HAS_CTYPES '-DDLL_PREFIX=\"lib\"' '-DDLL_SUFFIX=\".so\"' -I/home/onny/projects/firefox-wayland-git/src/gecko-dev/js/src -I/home/onny/projects/firefox-wayland-git/src/gecko-dev/obj-x86_64-pc-linux-gnu/js/src  -I/home/onny/projects/firefox-wayland-git/src/gecko-dev/obj-x86_64-pc-linux-gnu/dist/include  -I/usr/include/nspr        -fPIC  -DMOZILLA_CLIENT -include /home/onny/projects/firefox-wayland-git/src/gecko-dev/obj-x86_64-pc-linux-gnu/js/src/js-confdefs.h -MD -MP -MF .deps/Unified_cpp_js_src9.o.pp -D_FORTIFY_SOURCE=2 -O2 -Wall -Wc++11-compat -Wempty-body -Wignored-qualifiers -Woverloaded-virtual -Wpointer-arith -Wsign-compare -Wtype-limits -Wunreachable-code -Wwrite-strings -Wno-invalid-offsetof -Wc++14-compat -Wno-error=maybe-uninitialized -Wno-error=deprecated-declarations -Wno-error=array-bounds -march=x86-64 -mtune=generic -O2 -pipe -fstack-protector-strong --param=ssp-buffer-size=4 -fno-delete-null-pointer-checks -fno-schedule-insns2 -fno-rtti -ffunction-sections -fdata-sections -fno-exceptions -fno-math-errno -pthread -pipe  -g -freorder-blocks -O3 -fomit-frame-pointer  -I/usr/lib/libffi-3.2.1/include -Wno-shadow -Werror=format  /home/onny/projects/firefox-wayland-git/src/gecko-dev/obj-x86_64-pc-linux-gnu/js/src/Unified_cpp_js_src9.cpp\n> libjs_static.a\n> rm -f libjs_static.a libjs_static.a.desc\n> /home/onny/projects/firefox-wayland-git/src/gecko-dev/obj-x86_64-pc-linux-gnu/_virtualenv/bin/python /home/onny/projects/firefox-wayland-git/src/gecko-dev/config/expandlibs_exec.py --extract -- ar crs libjs_static.a RegExp.o CTypes.o Library.o Parser.o StoreBuffer.o ExecutableAllocatorPosix.o Disassembler-x86-shared.o jsarray.o jsatom.o jsdtoa.o jsmath.o jsutil.o pm_linux.o ConditionVariable.o MutexImpl.o Thread.o Initialization.o TraceLogging.o TraceLoggingGraph.o TraceLoggingTypes.o Unified_cpp_js_src0.o Unified_cpp_js_src1.o Unified_cpp_js_src10.o Unified_cpp_js_src11.o Unified_cpp_js_src12.o Unified_cpp_js_src13.o Unified_cpp_js_src14.o Unified_cpp_js_src15.o Unified_cpp_js_src16.o Unified_cpp_js_src17.o Unified_cpp_js_src18.o Unified_cpp_js_src19.o Unified_cpp_js_src2.o Unified_cpp_js_src20.o Unified_cpp_js_src21.o Unified_cpp_js_src22.o Unified_cpp_js_src23.o Unified_cpp_js_src24.o Unified_cpp_js_src25.o Unified_cpp_js_src26.o Unified_cpp_js_src27.o Unified_cpp_js_src28.o Unified_cpp_js_src29.o Unified_cpp_js_src3.o Unified_cpp_js_src30.o Unified_cpp_js_src31.o Unified_cpp_js_src32.o Unified_cpp_js_src33.o Unified_cpp_js_src34.o Unified_cpp_js_src35.o Unified_cpp_js_src36.o Unified_cpp_js_src37.o Unified_cpp_js_src38.o Unified_cpp_js_src39.o Unified_cpp_js_src4.o Unified_cpp_js_src40.o Unified_cpp_js_src5.o Unified_cpp_js_src6.o Unified_cpp_js_src7.o Unified_cpp_js_src8.o Unified_cpp_js_src9.o ../../config/external/ffi/libconfig_external_ffi.a ../../config/external/icu/libicu.a ../../config/external/fdlibm/libfdlibm.a ../../config/external/nspr/libnspr.a ../../config/external/zlib/libzlib.a \n> make[3]: *** [/home/onny/projects/firefox-wayland-git/src/gecko-dev/config/recurse.mk:33: compile] Error 2\n> make[3]: Leaving directory '/home/onny/projects/firefox-wayland-git/src/gecko-dev/obj-x86_64-pc-linux-gnu'\n> make[2]: *** [/home/onny/projects/firefox-wayland-git/src/gecko-dev/config/rules.mk:523: default] Error 2\n> make[2]: Leaving directory '/home/onny/projects/firefox-wayland-git/src/gecko-dev/obj-x86_64-pc-linux-gnu'\n> make[1]: *** [/home/onny/projects/firefox-wayland-git/src/gecko-dev/client.mk:415: realbuild] Error 2\n> make[1]: Leaving directory '/home/onny/projects/firefox-wayland-git/src/gecko-dev'\n> make: *** [client.mk:170: build] Error 2\n> ==> ERROR: A failure occurred in build().\n>     Aborting...\nIt looks like this command is failing:\n> Executing: ar crs CTypes.o ConditionVariable.o Disassembler-x86-shared.o ExecutableAllocatorPosix.o Initialization.o Library.o MutexImpl.o Parser.o RegExp.o StoreBuffer.o Thread.o TraceLogging.o TraceLoggingGraph.o TraceLoggingTypes.o Unified_cpp_js_src0.o Unified_cpp_js_src1.o Unified_cpp_js_src10.o Unified_cpp_js_src11.o Unified_cpp_js_src12.o Unified_cpp_js_src13.o Unified_cpp_js_src14.o Unified_cpp_js_src15.o Unified_cpp_js_src16.o Unified_cpp_js_src17.o Unified_cpp_js_src18.o Unified_cpp_js_src19.o Unified_cpp_js_src2.o Unified_cpp_js_src20.o Unified_cpp_js_src21.o Unified_cpp_js_src22.o Unified_cpp_js_src23.o Unified_cpp_js_src24.o Unified_cpp_js_src25.o Unified_cpp_js_src26.o Unified_cpp_js_src27.o Unified_cpp_js_src28.o Unified_cpp_js_src29.o Unified_cpp_js_src3.o Unified_cpp_js_src30.o Unified_cpp_js_src31.o Unified_cpp_js_src32.o Unified_cpp_js_src33.o Unified_cpp_js_src34.o Unified_cpp_js_src35.o Unified_cpp_js_src36.o Unified_cpp_js_src37.o Unified_cpp_js_src38.o Unified_cpp_js_src39.o Unified_cpp_js_src4.o Unified_cpp_js_src40.o Unified_cpp_js_src5.o Unified_cpp_js_src6.o Unified_cpp_js_src7.o Unified_cpp_js_src8.o Unified_cpp_js_src9.o jsarray.o jsatom.o jsdtoa.o jsmath.o jsutil.o pm_linux.o tmpj6OdrR/e_acos.o tmpj6OdrR/e_acosh.o tmpj6OdrR/e_asin.o tmpj6OdrR/e_atan2.o tmpj6OdrR/e_atanh.o tmpj6OdrR/e_cosh.o tmpj6OdrR/e_exp.o tmpj6OdrR/e_hypot.o tmpj6OdrR/e_log.o tmpj6OdrR/e_log10.o tmpj6OdrR/e_log2.o tmpj6OdrR/e_pow.o tmpj6OdrR/e_sinh.o tmpj6OdrR/e_sqrt.o tmpj6OdrR/k_exp.o tmpj6OdrR/s_asinh.o tmpj6OdrR/s_atan.o tmpj6OdrR/s_cbrt.o tmpj6OdrR/s_ceil.o tmpj6OdrR/s_ceilf.o tmpj6OdrR/s_copysign.o tmpj6OdrR/s_expm1.o tmpj6OdrR/s_fabs.o tmpj6OdrR/s_floor.o tmpj6OdrR/s_floorf.o tmpj6OdrR/s_log1p.o tmpj6OdrR/s_nearbyint.o tmpj6OdrR/s_rint.o tmpj6OdrR/s_rintf.o tmpj6OdrR/s_scalbn.o tmpj6OdrR/s_tanh.o tmpj6OdrR/s_trunc.o tmpj6OdrR/s_truncf.o RegExp.o CTypes.o Library.o Parser.o StoreBuffer.o ExecutableAllocatorPosix.o Disassembler-x86-shared.o jsarray.o jsatom.o jsdtoa.o jsmath.o jsutil.o pm_linux.o ConditionVariable.o MutexImpl.o Thread.o Initialization.o TraceLogging.o TraceLoggingGraph.o TraceLoggingTypes.o Unified_cpp_js_src0.o Unified_cpp_js_src1.o Unified_cpp_js_src10.o Unified_cpp_js_src11.o Unified_cpp_js_src12.o Unified_cpp_js_src13.o Unified_cpp_js_src14.o Unified_cpp_js_src15.o Unified_cpp_js_src16.o Unified_cpp_js_src17.o Unified_cpp_js_src18.o Unified_cpp_js_src19.o Unified_cpp_js_src2.o Unified_cpp_js_src20.o Unified_cpp_js_src21.o Unified_cpp_js_src22.o Unified_cpp_js_src23.o Unified_cpp_js_src24.o Unified_cpp_js_src25.o Unified_cpp_js_src26.o Unified_cpp_js_src27.o Unified_cpp_js_src28.o Unified_cpp_js_src29.o Unified_cpp_js_src3.o Unified_cpp_js_src30.o Unified_cpp_js_src31.o Unified_cpp_js_src32.o Unified_cpp_js_src33.o Unified_cpp_js_src34.o Unified_cpp_js_src35.o Unified_cpp_js_src36.o Unified_cpp_js_src37.o Unified_cpp_js_src38.o Unified_cpp_js_src39.o Unified_cpp_js_src4.o Unified_cpp_js_src40.o Unified_cpp_js_src5.o Unified_cpp_js_src6.o Unified_cpp_js_src7.o Unified_cpp_js_src8.o Unified_cpp_js_src9.o ../../modules/fdlibm/src/e_acos.o ../../modules/fdlibm/src/e_acosh.o ../../modules/fdlibm/src/e_asin.o ../../modules/fdlibm/src/e_atan2.o ../../modules/fdlibm/src/e_atanh.o ../../modules/fdlibm/src/e_cosh.o ../../modules/fdlibm/src/e_exp.o ../../modules/fdlibm/src/e_hypot.o ../../modules/fdlibm/src/e_log.o ../../modules/fdlibm/src/e_log10.o ../../modules/fdlibm/src/e_log2.o ../../modules/fdlibm/src/e_pow.o ../../modules/fdlibm/src/e_sinh.o ../../modules/fdlibm/src/e_sqrt.o ../../modules/fdlibm/src/k_exp.o ../../modules/fdlibm/src/s_asinh.o ../../modules/fdlibm/src/s_atan.o ../../modules/fdlibm/src/s_cbrt.o ../../modules/fdlibm/src/s_ceil.o ../../modules/fdlibm/src/s_ceilf.o ../../modules/fdlibm/src/s_copysign.o ../../modules/fdlibm/src/s_expm1.o ../../modules/fdlibm/src/s_fabs.o ../../modules/fdlibm/src/s_floor.o ../../modules/fdlibm/src/s_floorf.o ../../modules/fdlibm/src/s_log1p.o ../../modules/fdlibm/src/s_nearbyint.o ../../modules/fdlibm/src/s_rint.o ../../modules/fdlibm/src/s_rintf.o ../../modules/fdlibm/src/s_scalbn.o ../../modules/fdlibm/src/s_tanh.o ../../modules/fdlibm/src/s_trunc.o ../../modules/fdlibm/src/s_truncf.o\n> ar: CTypes.o: File format not recognized\nI would really appreciate any hint :)\nThanks!", "creator": "onny@project-insanity.org", "raw_text": "@Martin Str\u00e1nsk\u00fd: Thank you for maintaining this repo! I tried to make a buildscript for the ArchLinux user repository here: https://aur.archlinux.org/packages/firefox-wayland-git\n\nUnfortunately I get a compile error, maybe you know why:\n> /usr/bin/g++ -std=gnu++11 -o Unified_cpp_js_src9.o -c  -I/home/onny/projects/firefox-wayland-git/src/gecko-dev/obj-x86_64-pc-linux-gnu/dist/system_wrappers -include /home/onny/projects/firefox-wayland-git/src/gecko-dev/config/gcc_hidden.h -DNDEBUG=1 -DTRIMMED=1 -DENABLE_BINARYDATA -DENABLE_SIMD -DENABLE_SHARED_ARRAY_BUFFER -DEXPORT_JS_API -DJS_HAS_CTYPES '-DDLL_PREFIX=\"lib\"' '-DDLL_SUFFIX=\".so\"' -I/home/onny/projects/firefox-wayland-git/src/gecko-dev/js/src -I/home/onny/projects/firefox-wayland-git/src/gecko-dev/obj-x86_64-pc-linux-gnu/js/src  -I/home/onny/projects/firefox-wayland-git/src/gecko-dev/obj-x86_64-pc-linux-gnu/dist/include  -I/usr/include/nspr        -fPIC  -DMOZILLA_CLIENT -include /home/onny/projects/firefox-wayland-git/src/gecko-dev/obj-x86_64-pc-linux-gnu/js/src/js-confdefs.h -MD -MP -MF .deps/Unified_cpp_js_src9.o.pp -D_FORTIFY_SOURCE=2 -O2 -Wall -Wc++11-compat -Wempty-body -Wignored-qualifiers -Woverloaded-virtual -Wpointer-arith -Wsign-compare -Wtype-limits -Wunreachable-code -Wwrite-strings -Wno-invalid-offsetof -Wc++14-compat -Wno-error=maybe-uninitialized -Wno-error=deprecated-declarations -Wno-error=array-bounds -march=x86-64 -mtune=generic -O2 -pipe -fstack-protector-strong --param=ssp-buffer-size=4 -fno-delete-null-pointer-checks -fno-schedule-insns2 -fno-rtti -ffunction-sections -fdata-sections -fno-exceptions -fno-math-errno -pthread -pipe  -g -freorder-blocks -O3 -fomit-frame-pointer  -I/usr/lib/libffi-3.2.1/include -Wno-shadow -Werror=format  /home/onny/projects/firefox-wayland-git/src/gecko-dev/obj-x86_64-pc-linux-gnu/js/src/Unified_cpp_js_src9.cpp\n> libjs_static.a\n> rm -f libjs_static.a libjs_static.a.desc\n> /home/onny/projects/firefox-wayland-git/src/gecko-dev/obj-x86_64-pc-linux-gnu/_virtualenv/bin/python /home/onny/projects/firefox-wayland-git/src/gecko-dev/config/expandlibs_exec.py --extract -- ar crs libjs_static.a RegExp.o CTypes.o Library.o Parser.o StoreBuffer.o ExecutableAllocatorPosix.o Disassembler-x86-shared.o jsarray.o jsatom.o jsdtoa.o jsmath.o jsutil.o pm_linux.o ConditionVariable.o MutexImpl.o Thread.o Initialization.o TraceLogging.o TraceLoggingGraph.o TraceLoggingTypes.o Unified_cpp_js_src0.o Unified_cpp_js_src1.o Unified_cpp_js_src10.o Unified_cpp_js_src11.o Unified_cpp_js_src12.o Unified_cpp_js_src13.o Unified_cpp_js_src14.o Unified_cpp_js_src15.o Unified_cpp_js_src16.o Unified_cpp_js_src17.o Unified_cpp_js_src18.o Unified_cpp_js_src19.o Unified_cpp_js_src2.o Unified_cpp_js_src20.o Unified_cpp_js_src21.o Unified_cpp_js_src22.o Unified_cpp_js_src23.o Unified_cpp_js_src24.o Unified_cpp_js_src25.o Unified_cpp_js_src26.o Unified_cpp_js_src27.o Unified_cpp_js_src28.o Unified_cpp_js_src29.o Unified_cpp_js_src3.o Unified_cpp_js_src30.o Unified_cpp_js_src31.o Unified_cpp_js_src32.o Unified_cpp_js_src33.o Unified_cpp_js_src34.o Unified_cpp_js_src35.o Unified_cpp_js_src36.o Unified_cpp_js_src37.o Unified_cpp_js_src38.o Unified_cpp_js_src39.o Unified_cpp_js_src4.o Unified_cpp_js_src40.o Unified_cpp_js_src5.o Unified_cpp_js_src6.o Unified_cpp_js_src7.o Unified_cpp_js_src8.o Unified_cpp_js_src9.o ../../config/external/ffi/libconfig_external_ffi.a ../../config/external/icu/libicu.a ../../config/external/fdlibm/libfdlibm.a ../../config/external/nspr/libnspr.a ../../config/external/zlib/libzlib.a \n> make[3]: *** [/home/onny/projects/firefox-wayland-git/src/gecko-dev/config/recurse.mk:33: compile] Error 2\n> make[3]: Leaving directory '/home/onny/projects/firefox-wayland-git/src/gecko-dev/obj-x86_64-pc-linux-gnu'\n> make[2]: *** [/home/onny/projects/firefox-wayland-git/src/gecko-dev/config/rules.mk:523: default] Error 2\n> make[2]: Leaving directory '/home/onny/projects/firefox-wayland-git/src/gecko-dev/obj-x86_64-pc-linux-gnu'\n> make[1]: *** [/home/onny/projects/firefox-wayland-git/src/gecko-dev/client.mk:415: realbuild] Error 2\n> make[1]: Leaving directory '/home/onny/projects/firefox-wayland-git/src/gecko-dev'\n> make: *** [client.mk:170: build] Error 2\n> ==> ERROR: A failure occurred in build().\n>     Aborting...\nIt looks like this command is failing:\n> Executing: ar crs CTypes.o ConditionVariable.o Disassembler-x86-shared.o ExecutableAllocatorPosix.o Initialization.o Library.o MutexImpl.o Parser.o RegExp.o StoreBuffer.o Thread.o TraceLogging.o TraceLoggingGraph.o TraceLoggingTypes.o Unified_cpp_js_src0.o Unified_cpp_js_src1.o Unified_cpp_js_src10.o Unified_cpp_js_src11.o Unified_cpp_js_src12.o Unified_cpp_js_src13.o Unified_cpp_js_src14.o Unified_cpp_js_src15.o Unified_cpp_js_src16.o Unified_cpp_js_src17.o Unified_cpp_js_src18.o Unified_cpp_js_src19.o Unified_cpp_js_src2.o Unified_cpp_js_src20.o Unified_cpp_js_src21.o Unified_cpp_js_src22.o Unified_cpp_js_src23.o Unified_cpp_js_src24.o Unified_cpp_js_src25.o Unified_cpp_js_src26.o Unified_cpp_js_src27.o Unified_cpp_js_src28.o Unified_cpp_js_src29.o Unified_cpp_js_src3.o Unified_cpp_js_src30.o Unified_cpp_js_src31.o Unified_cpp_js_src32.o Unified_cpp_js_src33.o Unified_cpp_js_src34.o Unified_cpp_js_src35.o Unified_cpp_js_src36.o Unified_cpp_js_src37.o Unified_cpp_js_src38.o Unified_cpp_js_src39.o Unified_cpp_js_src4.o Unified_cpp_js_src40.o Unified_cpp_js_src5.o Unified_cpp_js_src6.o Unified_cpp_js_src7.o Unified_cpp_js_src8.o Unified_cpp_js_src9.o jsarray.o jsatom.o jsdtoa.o jsmath.o jsutil.o pm_linux.o tmpj6OdrR/e_acos.o tmpj6OdrR/e_acosh.o tmpj6OdrR/e_asin.o tmpj6OdrR/e_atan2.o tmpj6OdrR/e_atanh.o tmpj6OdrR/e_cosh.o tmpj6OdrR/e_exp.o tmpj6OdrR/e_hypot.o tmpj6OdrR/e_log.o tmpj6OdrR/e_log10.o tmpj6OdrR/e_log2.o tmpj6OdrR/e_pow.o tmpj6OdrR/e_sinh.o tmpj6OdrR/e_sqrt.o tmpj6OdrR/k_exp.o tmpj6OdrR/s_asinh.o tmpj6OdrR/s_atan.o tmpj6OdrR/s_cbrt.o tmpj6OdrR/s_ceil.o tmpj6OdrR/s_ceilf.o tmpj6OdrR/s_copysign.o tmpj6OdrR/s_expm1.o tmpj6OdrR/s_fabs.o tmpj6OdrR/s_floor.o tmpj6OdrR/s_floorf.o tmpj6OdrR/s_log1p.o tmpj6OdrR/s_nearbyint.o tmpj6OdrR/s_rint.o tmpj6OdrR/s_rintf.o tmpj6OdrR/s_scalbn.o tmpj6OdrR/s_tanh.o tmpj6OdrR/s_trunc.o tmpj6OdrR/s_truncf.o RegExp.o CTypes.o Library.o Parser.o StoreBuffer.o ExecutableAllocatorPosix.o Disassembler-x86-shared.o jsarray.o jsatom.o jsdtoa.o jsmath.o jsutil.o pm_linux.o ConditionVariable.o MutexImpl.o Thread.o Initialization.o TraceLogging.o TraceLoggingGraph.o TraceLoggingTypes.o Unified_cpp_js_src0.o Unified_cpp_js_src1.o Unified_cpp_js_src10.o Unified_cpp_js_src11.o Unified_cpp_js_src12.o Unified_cpp_js_src13.o Unified_cpp_js_src14.o Unified_cpp_js_src15.o Unified_cpp_js_src16.o Unified_cpp_js_src17.o Unified_cpp_js_src18.o Unified_cpp_js_src19.o Unified_cpp_js_src2.o Unified_cpp_js_src20.o Unified_cpp_js_src21.o Unified_cpp_js_src22.o Unified_cpp_js_src23.o Unified_cpp_js_src24.o Unified_cpp_js_src25.o Unified_cpp_js_src26.o Unified_cpp_js_src27.o Unified_cpp_js_src28.o Unified_cpp_js_src29.o Unified_cpp_js_src3.o Unified_cpp_js_src30.o Unified_cpp_js_src31.o Unified_cpp_js_src32.o Unified_cpp_js_src33.o Unified_cpp_js_src34.o Unified_cpp_js_src35.o Unified_cpp_js_src36.o Unified_cpp_js_src37.o Unified_cpp_js_src38.o Unified_cpp_js_src39.o Unified_cpp_js_src4.o Unified_cpp_js_src40.o Unified_cpp_js_src5.o Unified_cpp_js_src6.o Unified_cpp_js_src7.o Unified_cpp_js_src8.o Unified_cpp_js_src9.o ../../modules/fdlibm/src/e_acos.o ../../modules/fdlibm/src/e_acosh.o ../../modules/fdlibm/src/e_asin.o ../../modules/fdlibm/src/e_atan2.o ../../modules/fdlibm/src/e_atanh.o ../../modules/fdlibm/src/e_cosh.o ../../modules/fdlibm/src/e_exp.o ../../modules/fdlibm/src/e_hypot.o ../../modules/fdlibm/src/e_log.o ../../modules/fdlibm/src/e_log10.o ../../modules/fdlibm/src/e_log2.o ../../modules/fdlibm/src/e_pow.o ../../modules/fdlibm/src/e_sinh.o ../../modules/fdlibm/src/e_sqrt.o ../../modules/fdlibm/src/k_exp.o ../../modules/fdlibm/src/s_asinh.o ../../modules/fdlibm/src/s_atan.o ../../modules/fdlibm/src/s_cbrt.o ../../modules/fdlibm/src/s_ceil.o ../../modules/fdlibm/src/s_ceilf.o ../../modules/fdlibm/src/s_copysign.o ../../modules/fdlibm/src/s_expm1.o ../../modules/fdlibm/src/s_fabs.o ../../modules/fdlibm/src/s_floor.o ../../modules/fdlibm/src/s_floorf.o ../../modules/fdlibm/src/s_log1p.o ../../modules/fdlibm/src/s_nearbyint.o ../../modules/fdlibm/src/s_rint.o ../../modules/fdlibm/src/s_rintf.o ../../modules/fdlibm/src/s_scalbn.o ../../modules/fdlibm/src/s_tanh.o ../../modules/fdlibm/src/s_trunc.o ../../modules/fdlibm/src/s_truncf.o\n> ar: CTypes.o: File format not recognized\nI would really appreciate any hint :)\nThanks!"}, {"bug_id": 635134, "attachment_id": null, "tags": [], "creation_time": "2017-02-01T20:55:04Z", "id": 12029242, "author": "onny@project-insanity.org", "is_private": false, "text": "Further ...\n> % file CTypes.o                                                                :(\n> CTypes.o: ELF 64-bit LSB relocatable, x86-64, version 1 (SYSV), not stripped", "creator": "onny@project-insanity.org", "raw_text": "Further ...\n> % file CTypes.o                                                                :(\n> CTypes.o: ELF 64-bit LSB relocatable, x86-64, version 1 (SYSV), not stripped", "count": 46, "time": "2017-02-01T20:55:04Z"}, {"raw_text": "Following files doesn't seem to exists:\n>  ../../config/external/ffi/libconfig_external_ffi.a ../../config/external/icu/libicu.a ../../config/external/fdlibm/libfdlibm.a ../../config/external/nspr/libnspr.a ../../config/external/zlib/libzlib.a \nSo this command works fine\n> ar crs libjs_static.a RegExp.o CTypes.o Library.o Parser.o StoreBuffer.o ExecutableAllocatorPosix.o Disassembler-x86-shared.o jsarray.o jsatom.o jsdtoa.o jsmath.o jsutil.o pm_linux.o ConditionVariable.o MutexImpl.o Thread.o Initialization.o TraceLogging.o TraceLoggingGraph.o TraceLoggingTypes.o Unified_cpp_js_src0.o Unified_cpp_js_src1.o Unified_cpp_js_src10.o Unified_cpp_js_src11.o Unified_cpp_js_src12.o Unified_cpp_js_src13.o Unified_cpp_js_src14.o Unified_cpp_js_src15.o Unified_cpp_js_src16.o Unified_cpp_js_src17.o Unified_cpp_js_src18.o Unified_cpp_js_src19.o Unified_cpp_js_src2.o Unified_cpp_js_src20.o Unified_cpp_js_src21.o Unified_cpp_js_src22.o Unified_cpp_js_src23.o Unified_cpp_js_src24.o Unified_cpp_js_src25.o Unified_cpp_js_src26.o Unified_cpp_js_src27.o Unified_cpp_js_src28.o Unified_cpp_js_src29.o Unified_cpp_js_src3.o Unified_cpp_js_src30.o Unified_cpp_js_src31.o Unified_cpp_js_src32.o Unified_cpp_js_src33.o Unified_cpp_js_src34.o Unified_cpp_js_src35.o Unified_cpp_js_src36.o Unified_cpp_js_src37.o Unified_cpp_js_src38.o Unified_cpp_js_src39.o Unified_cpp_js_src4.o Unified_cpp_js_src40.o Unified_cpp_js_src5.o Unified_cpp_js_src6.o Unified_cpp_js_src7.o Unified_cpp_js_src8.o Unified_cpp_js_src9.o\nWhere as this command, from the build script, fails\n> % /home/onny/projects/firefox-wayland-git/src/gecko-dev/obj-x86_64-pc-linux-gnu/_virtualenv/bin/python /home/onny/projects/firefox-wayland-git/src/gecko-dev/config/expandlibs_exec.py --extract -- ar crs libjs_static.a RegExp.o CTypes.o Library.o Parser.o StoreBuffer.o ExecutableAllocatorPosix.o Disassembler-x86-shared.o jsarray.o jsatom.o jsdtoa.o jsmath.o jsutil.o pm_linux.o ConditionVariable.o MutexImpl.o Thread.o Initialization.o TraceLogging.o TraceLoggingGraph.o TraceLoggingTypes.o Unified_cpp_js_src0.o Unified_cpp_js_src1.o Unified_cpp_js_src10.o Unified_cpp_js_src11.o Unified_cpp_js_src12.o Unified_cpp_js_src13.o Unified_cpp_js_src14.o Unified_cpp_js_src15.o Unified_cpp_js_src16.o Unified_cpp_js_src17.o Unified_cpp_js_src18.o Unified_cpp_js_src19.o Unified_cpp_js_src2.o Unified_cpp_js_src20.o Unified_cpp_js_src21.o Unified_cpp_js_src22.o Unified_cpp_js_src23.o Unified_cpp_js_src24.o Unified_cpp_js_src25.o Unified_cpp_js_src26.o Unified_cpp_js_src27.o Unified_cpp_js_src28.o Unified_cpp_js_src29.o Unified_cpp_js_src3.o Unified_cpp_js_src30.o Unified_cpp_js_src31.o Unified_cpp_js_src32.o Unified_cpp_js_src33.o Unified_cpp_js_src34.o Unified_cpp_js_src35.o Unified_cpp_js_src36.o Unified_cpp_js_src37.o Unified_cpp_js_src38.o Unified_cpp_js_src39.o Unified_cpp_js_src4.o Unified_cpp_js_src40.o Unified_cpp_js_src5.o Unified_cpp_js_src6.o Unified_cpp_js_src7.o Unified_cpp_js_src8.o Unified_cpp_js_src9.o ../../config/external/ffi/libconfig_external_ffi.a ../../config/external/icu/libicu.a ../../config/external/fdlibm/libfdlibm.a ../../config/external/nspr/libnspr.a ../../config/external/zlib/libzlib.a\n> Executing: ar crs CTypes.o ConditionVariable.o Disassembler-x86-shared.o ExecutableAllocatorPosix.o Initialization.o Library.o MutexImpl.o Parser.o RegExp.o StoreBuffer.o Thread.o TraceLogging.o TraceLoggingGraph.o TraceLoggingTypes.o Unified_cpp_js_src0.o Unified_cpp_js_src1.o Unified_cpp_js_src10.o Unified_cpp_js_src11.o Unified_cpp_js_src12.o Unified_cpp_js_src13.o Unified_cpp_js_src14.o Unified_cpp_js_src15.o Unified_cpp_js_src16.o Unified_cpp_js_src17.o Unified_cpp_js_src18.o Unified_cpp_js_src19.o Unified_cpp_js_src2.o Unified_cpp_js_src20.o Unified_cpp_js_src21.o Unified_cpp_js_src22.o Unified_cpp_js_src23.o Unified_cpp_js_src24.o Unified_cpp_js_src25.o Unified_cpp_js_src26.o Unified_cpp_js_src27.o Unified_cpp_js_src28.o Unified_cpp_js_src29.o Unified_cpp_js_src3.o Unified_cpp_js_src30.o Unified_cpp_js_src31.o Unified_cpp_js_src32.o Unified_cpp_js_src33.o Unified_cpp_js_src34.o Unified_cpp_js_src35.o Unified_cpp_js_src36.o Unified_cpp_js_src37.o Unified_cpp_js_src38.o Unified_cpp_js_src39.o Unified_cpp_js_src4.o Unified_cpp_js_src40.o Unified_cpp_js_src5.o Unified_cpp_js_src6.o Unified_cpp_js_src7.o Unified_cpp_js_src8.o Unified_cpp_js_src9.o jsarray.o jsatom.o jsdtoa.o jsmath.o jsutil.o pm_linux.o tmpRC5Q8O/e_acos.o tmpRC5Q8O/e_acosh.o tmpRC5Q8O/e_asin.o tmpRC5Q8O/e_atan2.o tmpRC5Q8O/e_atanh.o tmpRC5Q8O/e_cosh.o tmpRC5Q8O/e_exp.o tmpRC5Q8O/e_hypot.o tmpRC5Q8O/e_log.o tmpRC5Q8O/e_log10.o tmpRC5Q8O/e_log2.o tmpRC5Q8O/e_pow.o tmpRC5Q8O/e_sinh.o tmpRC5Q8O/e_sqrt.o tmpRC5Q8O/k_exp.o tmpRC5Q8O/s_asinh.o tmpRC5Q8O/s_atan.o tmpRC5Q8O/s_cbrt.o tmpRC5Q8O/s_ceil.o tmpRC5Q8O/s_ceilf.o tmpRC5Q8O/s_copysign.o tmpRC5Q8O/s_expm1.o tmpRC5Q8O/s_fabs.o tmpRC5Q8O/s_floor.o tmpRC5Q8O/s_floorf.o tmpRC5Q8O/s_log1p.o tmpRC5Q8O/s_nearbyint.o tmpRC5Q8O/s_rint.o tmpRC5Q8O/s_rintf.o tmpRC5Q8O/s_scalbn.o tmpRC5Q8O/s_tanh.o tmpRC5Q8O/s_trunc.o tmpRC5Q8O/s_truncf.o RegExp.o CTypes.o Library.o Parser.o StoreBuffer.o ExecutableAllocatorPosix.o Disassembler-x86-shared.o jsarray.o jsatom.o jsdtoa.o jsmath.o jsutil.o pm_linux.o ConditionVariable.o MutexImpl.o Thread.o Initialization.o TraceLogging.o TraceLoggingGraph.o TraceLoggingTypes.o Unified_cpp_js_src0.o Unified_cpp_js_src1.o Unified_cpp_js_src10.o Unified_cpp_js_src11.o Unified_cpp_js_src12.o Unified_cpp_js_src13.o Unified_cpp_js_src14.o Unified_cpp_js_src15.o Unified_cpp_js_src16.o Unified_cpp_js_src17.o Unified_cpp_js_src18.o Unified_cpp_js_src19.o Unified_cpp_js_src2.o Unified_cpp_js_src20.o Unified_cpp_js_src21.o Unified_cpp_js_src22.o Unified_cpp_js_src23.o Unified_cpp_js_src24.o Unified_cpp_js_src25.o Unified_cpp_js_src26.o Unified_cpp_js_src27.o Unified_cpp_js_src28.o Unified_cpp_js_src29.o Unified_cpp_js_src3.o Unified_cpp_js_src30.o Unified_cpp_js_src31.o Unified_cpp_js_src32.o Unified_cpp_js_src33.o Unified_cpp_js_src34.o Unified_cpp_js_src35.o Unified_cpp_js_src36.o Unified_cpp_js_src37.o Unified_cpp_js_src38.o Unified_cpp_js_src39.o Unified_cpp_js_src4.o Unified_cpp_js_src40.o Unified_cpp_js_src5.o Unified_cpp_js_src6.o Unified_cpp_js_src7.o Unified_cpp_js_src8.o Unified_cpp_js_src9.o ../../modules/fdlibm/src/e_acos.o ../../modules/fdlibm/src/e_acosh.o ../../modules/fdlibm/src/e_asin.o ../../modules/fdlibm/src/e_atan2.o ../../modules/fdlibm/src/e_atanh.o ../../modules/fdlibm/src/e_cosh.o ../../modules/fdlibm/src/e_exp.o ../../modules/fdlibm/src/e_hypot.o ../../modules/fdlibm/src/e_log.o ../../modules/fdlibm/src/e_log10.o ../../modules/fdlibm/src/e_log2.o ../../modules/fdlibm/src/e_pow.o ../../modules/fdlibm/src/e_sinh.o ../../modules/fdlibm/src/e_sqrt.o ../../modules/fdlibm/src/k_exp.o ../../modules/fdlibm/src/s_asinh.o ../../modules/fdlibm/src/s_atan.o ../../modules/fdlibm/src/s_cbrt.o ../../modules/fdlibm/src/s_ceil.o ../../modules/fdlibm/src/s_ceilf.o ../../modules/fdlibm/src/s_copysign.o ../../modules/fdlibm/src/s_expm1.o ../../modules/fdlibm/src/s_fabs.o ../../modules/fdlibm/src/s_floor.o ../../modules/fdlibm/src/s_floorf.o ../../modules/fdlibm/src/s_log1p.o ../../modules/fdlibm/src/s_nearbyint.o ../../modules/fdlibm/src/s_rint.o ../../modules/fdlibm/src/s_rintf.o ../../modules/fdlibm/src/s_scalbn.o ../../modules/fdlibm/src/s_tanh.o ../../modules/fdlibm/src/s_trunc.o ../../modules/fdlibm/src/s_truncf.o\n> ar: CTypes.o: File format not recognized", "creator": "onny@project-insanity.org", "creation_time": "2017-02-01T21:02:41Z", "tags": [], "attachment_id": null, "text": "Following files doesn't seem to exists:\n>  ../../config/external/ffi/libconfig_external_ffi.a ../../config/external/icu/libicu.a ../../config/external/fdlibm/libfdlibm.a ../../config/external/nspr/libnspr.a ../../config/external/zlib/libzlib.a \nSo this command works fine\n> ar crs libjs_static.a RegExp.o CTypes.o Library.o Parser.o StoreBuffer.o ExecutableAllocatorPosix.o Disassembler-x86-shared.o jsarray.o jsatom.o jsdtoa.o jsmath.o jsutil.o pm_linux.o ConditionVariable.o MutexImpl.o Thread.o Initialization.o TraceLogging.o TraceLoggingGraph.o TraceLoggingTypes.o Unified_cpp_js_src0.o Unified_cpp_js_src1.o Unified_cpp_js_src10.o Unified_cpp_js_src11.o Unified_cpp_js_src12.o Unified_cpp_js_src13.o Unified_cpp_js_src14.o Unified_cpp_js_src15.o Unified_cpp_js_src16.o Unified_cpp_js_src17.o Unified_cpp_js_src18.o Unified_cpp_js_src19.o Unified_cpp_js_src2.o Unified_cpp_js_src20.o Unified_cpp_js_src21.o Unified_cpp_js_src22.o Unified_cpp_js_src23.o Unified_cpp_js_src24.o Unified_cpp_js_src25.o Unified_cpp_js_src26.o Unified_cpp_js_src27.o Unified_cpp_js_src28.o Unified_cpp_js_src29.o Unified_cpp_js_src3.o Unified_cpp_js_src30.o Unified_cpp_js_src31.o Unified_cpp_js_src32.o Unified_cpp_js_src33.o Unified_cpp_js_src34.o Unified_cpp_js_src35.o Unified_cpp_js_src36.o Unified_cpp_js_src37.o Unified_cpp_js_src38.o Unified_cpp_js_src39.o Unified_cpp_js_src4.o Unified_cpp_js_src40.o Unified_cpp_js_src5.o Unified_cpp_js_src6.o Unified_cpp_js_src7.o Unified_cpp_js_src8.o Unified_cpp_js_src9.o\nWhere as this command, from the build script, fails\n> % /home/onny/projects/firefox-wayland-git/src/gecko-dev/obj-x86_64-pc-linux-gnu/_virtualenv/bin/python /home/onny/projects/firefox-wayland-git/src/gecko-dev/config/expandlibs_exec.py --extract -- ar crs libjs_static.a RegExp.o CTypes.o Library.o Parser.o StoreBuffer.o ExecutableAllocatorPosix.o Disassembler-x86-shared.o jsarray.o jsatom.o jsdtoa.o jsmath.o jsutil.o pm_linux.o ConditionVariable.o MutexImpl.o Thread.o Initialization.o TraceLogging.o TraceLoggingGraph.o TraceLoggingTypes.o Unified_cpp_js_src0.o Unified_cpp_js_src1.o Unified_cpp_js_src10.o Unified_cpp_js_src11.o Unified_cpp_js_src12.o Unified_cpp_js_src13.o Unified_cpp_js_src14.o Unified_cpp_js_src15.o Unified_cpp_js_src16.o Unified_cpp_js_src17.o Unified_cpp_js_src18.o Unified_cpp_js_src19.o Unified_cpp_js_src2.o Unified_cpp_js_src20.o Unified_cpp_js_src21.o Unified_cpp_js_src22.o Unified_cpp_js_src23.o Unified_cpp_js_src24.o Unified_cpp_js_src25.o Unified_cpp_js_src26.o Unified_cpp_js_src27.o Unified_cpp_js_src28.o Unified_cpp_js_src29.o Unified_cpp_js_src3.o Unified_cpp_js_src30.o Unified_cpp_js_src31.o Unified_cpp_js_src32.o Unified_cpp_js_src33.o Unified_cpp_js_src34.o Unified_cpp_js_src35.o Unified_cpp_js_src36.o Unified_cpp_js_src37.o Unified_cpp_js_src38.o Unified_cpp_js_src39.o Unified_cpp_js_src4.o Unified_cpp_js_src40.o Unified_cpp_js_src5.o Unified_cpp_js_src6.o Unified_cpp_js_src7.o Unified_cpp_js_src8.o Unified_cpp_js_src9.o ../../config/external/ffi/libconfig_external_ffi.a ../../config/external/icu/libicu.a ../../config/external/fdlibm/libfdlibm.a ../../config/external/nspr/libnspr.a ../../config/external/zlib/libzlib.a\n> Executing: ar crs CTypes.o ConditionVariable.o Disassembler-x86-shared.o ExecutableAllocatorPosix.o Initialization.o Library.o MutexImpl.o Parser.o RegExp.o StoreBuffer.o Thread.o TraceLogging.o TraceLoggingGraph.o TraceLoggingTypes.o Unified_cpp_js_src0.o Unified_cpp_js_src1.o Unified_cpp_js_src10.o Unified_cpp_js_src11.o Unified_cpp_js_src12.o Unified_cpp_js_src13.o Unified_cpp_js_src14.o Unified_cpp_js_src15.o Unified_cpp_js_src16.o Unified_cpp_js_src17.o Unified_cpp_js_src18.o Unified_cpp_js_src19.o Unified_cpp_js_src2.o Unified_cpp_js_src20.o Unified_cpp_js_src21.o Unified_cpp_js_src22.o Unified_cpp_js_src23.o Unified_cpp_js_src24.o Unified_cpp_js_src25.o Unified_cpp_js_src26.o Unified_cpp_js_src27.o Unified_cpp_js_src28.o Unified_cpp_js_src29.o Unified_cpp_js_src3.o Unified_cpp_js_src30.o Unified_cpp_js_src31.o Unified_cpp_js_src32.o Unified_cpp_js_src33.o Unified_cpp_js_src34.o Unified_cpp_js_src35.o Unified_cpp_js_src36.o Unified_cpp_js_src37.o Unified_cpp_js_src38.o Unified_cpp_js_src39.o Unified_cpp_js_src4.o Unified_cpp_js_src40.o Unified_cpp_js_src5.o Unified_cpp_js_src6.o Unified_cpp_js_src7.o Unified_cpp_js_src8.o Unified_cpp_js_src9.o jsarray.o jsatom.o jsdtoa.o jsmath.o jsutil.o pm_linux.o tmpRC5Q8O/e_acos.o tmpRC5Q8O/e_acosh.o tmpRC5Q8O/e_asin.o tmpRC5Q8O/e_atan2.o tmpRC5Q8O/e_atanh.o tmpRC5Q8O/e_cosh.o tmpRC5Q8O/e_exp.o tmpRC5Q8O/e_hypot.o tmpRC5Q8O/e_log.o tmpRC5Q8O/e_log10.o tmpRC5Q8O/e_log2.o tmpRC5Q8O/e_pow.o tmpRC5Q8O/e_sinh.o tmpRC5Q8O/e_sqrt.o tmpRC5Q8O/k_exp.o tmpRC5Q8O/s_asinh.o tmpRC5Q8O/s_atan.o tmpRC5Q8O/s_cbrt.o tmpRC5Q8O/s_ceil.o tmpRC5Q8O/s_ceilf.o tmpRC5Q8O/s_copysign.o tmpRC5Q8O/s_expm1.o tmpRC5Q8O/s_fabs.o tmpRC5Q8O/s_floor.o tmpRC5Q8O/s_floorf.o tmpRC5Q8O/s_log1p.o tmpRC5Q8O/s_nearbyint.o tmpRC5Q8O/s_rint.o tmpRC5Q8O/s_rintf.o tmpRC5Q8O/s_scalbn.o tmpRC5Q8O/s_tanh.o tmpRC5Q8O/s_trunc.o tmpRC5Q8O/s_truncf.o RegExp.o CTypes.o Library.o Parser.o StoreBuffer.o ExecutableAllocatorPosix.o Disassembler-x86-shared.o jsarray.o jsatom.o jsdtoa.o jsmath.o jsutil.o pm_linux.o ConditionVariable.o MutexImpl.o Thread.o Initialization.o TraceLogging.o TraceLoggingGraph.o TraceLoggingTypes.o Unified_cpp_js_src0.o Unified_cpp_js_src1.o Unified_cpp_js_src10.o Unified_cpp_js_src11.o Unified_cpp_js_src12.o Unified_cpp_js_src13.o Unified_cpp_js_src14.o Unified_cpp_js_src15.o Unified_cpp_js_src16.o Unified_cpp_js_src17.o Unified_cpp_js_src18.o Unified_cpp_js_src19.o Unified_cpp_js_src2.o Unified_cpp_js_src20.o Unified_cpp_js_src21.o Unified_cpp_js_src22.o Unified_cpp_js_src23.o Unified_cpp_js_src24.o Unified_cpp_js_src25.o Unified_cpp_js_src26.o Unified_cpp_js_src27.o Unified_cpp_js_src28.o Unified_cpp_js_src29.o Unified_cpp_js_src3.o Unified_cpp_js_src30.o Unified_cpp_js_src31.o Unified_cpp_js_src32.o Unified_cpp_js_src33.o Unified_cpp_js_src34.o Unified_cpp_js_src35.o Unified_cpp_js_src36.o Unified_cpp_js_src37.o Unified_cpp_js_src38.o Unified_cpp_js_src39.o Unified_cpp_js_src4.o Unified_cpp_js_src40.o Unified_cpp_js_src5.o Unified_cpp_js_src6.o Unified_cpp_js_src7.o Unified_cpp_js_src8.o Unified_cpp_js_src9.o ../../modules/fdlibm/src/e_acos.o ../../modules/fdlibm/src/e_acosh.o ../../modules/fdlibm/src/e_asin.o ../../modules/fdlibm/src/e_atan2.o ../../modules/fdlibm/src/e_atanh.o ../../modules/fdlibm/src/e_cosh.o ../../modules/fdlibm/src/e_exp.o ../../modules/fdlibm/src/e_hypot.o ../../modules/fdlibm/src/e_log.o ../../modules/fdlibm/src/e_log10.o ../../modules/fdlibm/src/e_log2.o ../../modules/fdlibm/src/e_pow.o ../../modules/fdlibm/src/e_sinh.o ../../modules/fdlibm/src/e_sqrt.o ../../modules/fdlibm/src/k_exp.o ../../modules/fdlibm/src/s_asinh.o ../../modules/fdlibm/src/s_atan.o ../../modules/fdlibm/src/s_cbrt.o ../../modules/fdlibm/src/s_ceil.o ../../modules/fdlibm/src/s_ceilf.o ../../modules/fdlibm/src/s_copysign.o ../../modules/fdlibm/src/s_expm1.o ../../modules/fdlibm/src/s_fabs.o ../../modules/fdlibm/src/s_floor.o ../../modules/fdlibm/src/s_floorf.o ../../modules/fdlibm/src/s_log1p.o ../../modules/fdlibm/src/s_nearbyint.o ../../modules/fdlibm/src/s_rint.o ../../modules/fdlibm/src/s_rintf.o ../../modules/fdlibm/src/s_scalbn.o ../../modules/fdlibm/src/s_tanh.o ../../modules/fdlibm/src/s_trunc.o ../../modules/fdlibm/src/s_truncf.o\n> ar: CTypes.o: File format not recognized", "bug_id": 635134, "author": "onny@project-insanity.org", "time": "2017-02-01T21:02:41Z", "count": 47, "is_private": false, "id": 12029285}, {"time": "2017-02-02T04:14:38Z", "count": 48, "text": ">maybe you know why\nyou can use epiphany-browser (i now do it, and perfect, but usabilety no the best, but very good work), this very good browser for wayland weston without xwayland, i no see depend x11-common when install it soft, and have hd yuoutube, soundcloud, and html5test show me 386 from 555. but you no can use stream youtube live (webkit no have support it), and adblock brcouse for it need gvfs, but gvfs need install in system package x11-common.", "raw_text": ">maybe you know why\nyou can use epiphany-browser (i now do it, and perfect, but usabilety no the best, but very good work), this very good browser for wayland weston without xwayland, i no see depend x11-common when install it soft, and have hd yuoutube, soundcloud, and html5test show me 386 from 555. but you no can use stream youtube live (webkit no have support it), and adblock brcouse for it need gvfs, but gvfs need install in system package x11-common.", "creator": "u575260@disabled.tld", "id": 12030376, "author": "u575260@disabled.tld", "is_private": false, "bug_id": 635134, "creation_time": "2017-02-02T04:14:38Z", "tags": ["advocacy"], "attachment_id": null}, {"count": 49, "time": "2017-02-02T04:21:50Z", "author": "yan12125+foss@gmail.com", "is_private": false, "id": 12030382, "creator": "yan12125+foss@gmail.com", "raw_text": "Is it possible to block vsechto? He/she provides no constructive comments. Those who want an alternative can just go whereever they want, but don't leave spams everywhere.", "attachment_id": null, "tags": ["offtopic"], "creation_time": "2017-02-02T04:21:50Z", "text": "Is it possible to block vsechto? He/she provides no constructive comments. Those who want an alternative can just go whereever they want, but don't leave spams everywhere.", "bug_id": 635134}, {"is_private": false, "time": "2017-02-02T04:31:45Z", "author": "yan12125+foss@gmail.com", "count": 50, "id": 12030391, "creation_time": "2017-02-02T04:31:45Z", "tags": [], "attachment_id": null, "raw_text": "This is slightly out-of-topic.  Martin Str\u00e1nsk\u00fd, could you rebase your repo to https://hg.mozilla.org/mozilla-central/rev/ebcbf47a83e7 or backport this changeset? That fixes building on Arch Linux (partially).", "creator": "yan12125+foss@gmail.com", "bug_id": 635134, "text": "This is slightly out-of-topic.  Martin Str\u00e1nsk\u00fd, could you rebase your repo to https://hg.mozilla.org/mozilla-central/rev/ebcbf47a83e7 or backport this changeset? That fixes building on Arch Linux (partially)."}, {"attachment_id": null, "creation_time": "2017-02-02T05:20:57Z", "tags": ["advocacy"], "bug_id": 635134, "author": "u575260@disabled.tld", "is_private": false, "id": 12030444, "creator": "u575260@disabled.tld", "raw_text": "(In reply to Yen Chi-Hsuan [:yan12125] (UTC+8) from comment #49)\n> Is it possible to block vsechto? He/she provides no constructive comments.\n> Those who want an alternative can just go whereever they want, but don't\n> leave spams everywhere.\n\ni think constructive, i say what if remove x11-common from firefox, firefox maybe will can support wayland without xwayland.", "text": "(In reply to Yen Chi-Hsuan [:yan12125] (UTC+8) from comment #49)\n> Is it possible to block vsechto? He/she provides no constructive comments.\n> Those who want an alternative can just go whereever they want, but don't\n> leave spams everywhere.\n\ni think constructive, i say what if remove x11-common from firefox, firefox maybe will can support wayland without xwayland.", "count": 51, "time": "2017-02-02T05:20:57Z"}, {"text": "*** Bug 1332857 has been marked as a duplicate of this bug. ***", "raw_text": "", "creator": "karlt@mozbugz.karlt.net", "time": "2017-02-08T06:45:53Z", "count": 52, "bug_id": 635134, "tags": [], "creation_time": "2017-02-08T06:45:53Z", "attachment_id": null, "id": 12048014, "is_private": false, "author": "karlt@mozbugz.karlt.net"}, {"creator": "onny@project-insanity.org", "raw_text": "I created a Flatpak of @stranskys Firefox Wayland version, so it is easy to try out on all x64 Linux systems without having to compile it https://project-insanity.org/blog/2017/02/14/try-out-firefox-on-wayland-easily/", "attachment_id": null, "tags": [], "creation_time": "2017-02-14T22:45:18Z", "text": "I created a Flatpak of @stranskys Firefox Wayland version, so it is easy to try out on all x64 Linux systems without having to compile it https://project-insanity.org/blog/2017/02/14/try-out-firefox-on-wayland-easily/", "bug_id": 635134, "count": 53, "author": "onny@project-insanity.org", "time": "2017-02-14T22:45:18Z", "is_private": false, "id": 12067590}, {"text": "Hi, I'm working on https://github.com/mozilla-japan/gecko-dev/commits/esr52-wayland-stransky to backport Str\u00e1nsk\u00fd's patches in ESR52 branch.\nNow, this repo is still WIP.", "creator": "cosmo0920.oucc@gmail.com", "raw_text": "Hi, I'm working on https://github.com/mozilla-japan/gecko-dev/commits/esr52-wayland-stransky to backport Str\u00e1nsk\u00fd's patches in ESR52 branch.\nNow, this repo is still WIP.", "count": 54, "time": "2017-03-28T02:45:12Z", "bug_id": 635134, "attachment_id": null, "tags": [], "creation_time": "2017-03-28T02:45:12Z", "id": 12182772, "is_private": false, "author": "cosmo0920.oucc@gmail.com"}, {"id": 12344352, "author": "stransky@redhat.com", "time": "2017-05-24T13:34:36Z", "count": 55, "is_private": false, "text": "The github repo (https://github.com/stransky/gecko-dev) has been synced with latest trunk and contains all available wayland patches. There are tree pre-built options if you're interested in testing the Wayland builds:\n\nFlatpak - https://firefox-flatpak.mojefedora.cz/\nCOPR repo - https://copr.fedorainfracloud.org/coprs/stransky/firefox-wayland/\nsrc.rpm - https://stransky.fedorapeople.org/\n\nI'm also very interested in any crashes / bugs, please report here or at bugzilla.redhat.com.", "bug_id": 635134, "raw_text": "The github repo (https://github.com/stransky/gecko-dev) has been synced with latest trunk and contains all available wayland patches. There are tree pre-built options if you're interested in testing the Wayland builds:\n\nFlatpak - https://firefox-flatpak.mojefedora.cz/\nCOPR repo - https://copr.fedorainfracloud.org/coprs/stransky/firefox-wayland/\nsrc.rpm - https://stransky.fedorapeople.org/\n\nI'm also very interested in any crashes / bugs, please report here or at bugzilla.redhat.com.", "creator": "stransky@redhat.com", "tags": [], "creation_time": "2017-05-24T13:34:36Z", "attachment_id": null}, {"bug_id": 635134, "attachment_id": null, "tags": [], "creation_time": "2017-05-24T17:15:16Z", "id": 12345186, "is_private": false, "author": "tarkasteve@gmail.com", "text": "(In reply to Martin Str\u00e1nsk\u00fd from comment #55)\n> I'm also very interested in any crashes / bugs, please report here or at\n> bugzilla.redhat.com.\n\nThanks for this Martin.\n\nFlatpak Wayland build crashes regularly for me. However building from your source using the flatpak mozconfig is more stable, so it may be a flatpak issue?\n\nThe one major issue I can see with my built version is that the menu when right-clicking a tab is blank (grey rather than white). All other right-click menus appear OK though.", "creator": "tarkasteve@gmail.com", "raw_text": "(In reply to Martin Str\u00e1nsk\u00fd from comment #55)\n> I'm also very interested in any crashes / bugs, please report here or at\n> bugzilla.redhat.com.\n\nThanks for this Martin.\n\nFlatpak Wayland build crashes regularly for me. However building from your source using the flatpak mozconfig is more stable, so it may be a flatpak issue?\n\nThe one major issue I can see with my built version is that the menu when right-clicking a tab is blank (grey rather than white). All other right-click menus appear OK though.", "count": 56, "time": "2017-05-24T17:15:16Z"}, {"author": "stransky@redhat.com", "time": "2017-05-24T19:33:16Z", "count": 57, "is_private": false, "id": 12345645, "raw_text": "(In reply to tarkasteve from comment #56)\n> (In reply to Martin Str\u00e1nsk\u00fd from comment #55)\n> > I'm also very interested in any crashes / bugs, please report here or at\n> > bugzilla.redhat.com.\n> \n> Thanks for this Martin.\n> \n> Flatpak Wayland build crashes regularly for me. However building from your\n> source using the flatpak mozconfig is more stable, so it may be a flatpak\n> issue?\n\nMaybe, backtrace may be more helpful here although flatpak debugging is troublesome. I'd leave that for further investigation.\n\n> The one major issue I can see with my built version is that the menu when\n> right-clicking a tab is blank (grey rather than white). All other\n> right-click menus appear OK though.\n\nThat's caused by missing wl_surface of associated GdkWindow. Needs to be fixed by better popup/seat management.", "creator": "stransky@redhat.com", "tags": [], "creation_time": "2017-05-24T19:33:16Z", "attachment_id": null, "text": "(In reply to tarkasteve from comment #56)\n> (In reply to Martin Str\u00e1nsk\u00fd from comment #55)\n> > I'm also very interested in any crashes / bugs, please report here or at\n> > bugzilla.redhat.com.\n> \n> Thanks for this Martin.\n> \n> Flatpak Wayland build crashes regularly for me. However building from your\n> source using the flatpak mozconfig is more stable, so it may be a flatpak\n> issue?\n\nMaybe, backtrace may be more helpful here although flatpak debugging is troublesome. I'd leave that for further investigation.\n\n> The one major issue I can see with my built version is that the menu when\n> right-clicking a tab is blank (grey rather than white). All other\n> right-click menus appear OK though.\n\nThat's caused by missing wl_surface of associated GdkWindow. Needs to be fixed by better popup/seat management.", "bug_id": 635134}, {"id": 12347560, "author": "tarkasteve@gmail.com", "is_private": false, "bug_id": 635134, "attachment_id": null, "creation_time": "2017-05-25T09:46:35Z", "tags": [], "count": 58, "time": "2017-05-25T09:46:35Z", "text": "(In reply to Martin Str\u00e1nsk\u00fd from comment #55)\n\nI'm seeing issues in HiDPI mode. The window content is scaled outside the window border:\n\n    http://i.imgur.com/zrJXYT1.jpg\n\nThe parts outside the window area are unresponsive, but I can 'control' the UI by clicking inside the windowed area (i.e. the content is scaled up but the input area is not.\n\nDebian Stretch / Gnome 3.22 / Intel HD.", "creator": "tarkasteve@gmail.com", "raw_text": "(In reply to Martin Str\u00e1nsk\u00fd from comment #55)\n\nI'm seeing issues in HiDPI mode. The window content is scaled outside the window border:\n\n    http://i.imgur.com/zrJXYT1.jpg\n\nThe parts outside the window area are unresponsive, but I can 'control' the UI by clicking inside the windowed area (i.e. the content is scaled up but the input area is not.\n\nDebian Stretch / Gnome 3.22 / Intel HD."}, {"bug_id": 635134, "attachment_id": null, "creation_time": "2017-05-25T09:56:32Z", "tags": [], "id": 12347577, "author": "kevincox@kevincox.ca", "is_private": false, "text": "tarkasteve: That appears to be the same issue I reported in https://bugzilla.mozilla.org/show_bug.cgi?id=1345666", "creator": "kevincox@kevincox.ca", "raw_text": "tarkasteve: That appears to be the same issue I reported in https://bugzilla.mozilla.org/show_bug.cgi?id=1345666", "count": 59, "time": "2017-05-25T09:56:32Z"}, {"author": "anti-stress@laposte.net", "is_private": false, "id": 12353990, "creation_time": "2017-05-28T16:17:38Z", "tags": [], "attachment_id": null, "bug_id": 635134, "time": "2017-05-28T16:17:38Z", "count": 60, "raw_text": "Hi, testing latest flatpak version on my Debian Sid GNOME-Wayland 64 bits, I'm not able to customize Firefox using the dedicated button in the hamburger menu : nor the hamburger menu nor the toolbar can be customized.\nThanks !", "creator": "anti-stress@laposte.net", "text": "Hi, testing latest flatpak version on my Debian Sid GNOME-Wayland 64 bits, I'm not able to customize Firefox using the dedicated button in the hamburger menu : nor the hamburger menu nor the toolbar can be customized.\nThanks !"}, {"tags": [], "creation_time": "2017-06-07T12:47:25Z", "attachment_id": null, "bug_id": 635134, "is_private": false, "author": "tarkasteve@gmail.com", "id": 12379049, "raw_text": "(In reply to Martin Str\u00e1nsk\u00fd from comment #55)\n\nPaste (Ctrl-V) in a text box or area causes immediate lockup consistently. This is building from the firefox-wayland-55.7-1 using a production-esque .mozconfig.", "creator": "tarkasteve@gmail.com", "text": "(In reply to Martin Str\u00e1nsk\u00fd from comment #55)\n\nPaste (Ctrl-V) in a text box or area causes immediate lockup consistently. This is building from the firefox-wayland-55.7-1 using a production-esque .mozconfig.", "time": "2017-06-07T12:47:25Z", "count": 61}, {"is_private": false, "count": 62, "time": "2017-06-22T10:08:47Z", "author": "stransky@redhat.com", "id": 12421063, "attachment_id": null, "creation_time": "2017-06-22T10:08:47Z", "tags": [], "creator": "stransky@redhat.com", "raw_text": "(In reply to tarkasteve from comment #61)\n> (In reply to Martin Str\u00e1nsk\u00fd from comment #55)\n> \n> Paste (Ctrl-V) in a text box or area causes immediate lockup consistently.\n> This is building from the firefox-wayland-55.7-1 using a production-esque\n> .mozconfig.\n\nPlease file a new bug for that and assign it to me, this one is for tracking purpose only. Thanks!", "bug_id": 635134, "text": "(In reply to tarkasteve from comment #61)\n> (In reply to Martin Str\u00e1nsk\u00fd from comment #55)\n> \n> Paste (Ctrl-V) in a text box or area causes immediate lockup consistently.\n> This is building from the firefox-wayland-55.7-1 using a production-esque\n> .mozconfig.\n\nPlease file a new bug for that and assign it to me, this one is for tracking purpose only. Thanks!"}, {"raw_text": "Trying create a package for ArchLinux including your patches (https://aur.archlinux.org/packages/firefox-wayland-git). Unfortunately I this error:\n> /home/onny/projects/firefox-wayland-git/src/gecko-dev/obj-x86_64-pc-linux-gnu/_virtualenv/bin/python -m mozbuild.action.file_generate /home/onny/projects/firefox-wayland-git/src/gecko-dev/build/variables.py source_repo_header source-repo.h .deps/source-repo.h.pp\n> Traceback (most recent call last):\n>  File \"/usr/lib64/python2.7/runpy.py\", line 174, in _run_module_as_main\n>    \"__main__\", fname, loader, pkg_name)\n>  File \"/usr/lib64/python2.7/runpy.py\", line 72, in _run_code\n>    exec code in run_globals\n>  File \"/home/onny/projects/firefox-wayland-git/src/gecko-dev/python/mozbuild/mozbuild/action/file_generate.py\", line 108, in <module>\n>    sys.exit(main(sys.argv[1:]))\n>  File \"/home/onny/projects/firefox-wayland-git/src/gecko-dev/python/mozbuild/mozbuild/action/file_generate.py\", line 63, in main\n>    ret = module.__dict__[method](output, *args.additional_arguments)\n>  File \"/home/onny/projects/firefox-wayland-git/src/gecko-dev/build/variables.py\", line 86, in source_repo_header\n>    raise Exception('could not resolve changeset; '\n> Exception: could not resolve changeset; try setting MOZ_SOURCE_CHANGESET\nI guess it's not related to your patches but do you know how to fix this?", "creator": "onny@project-insanity.org", "text": "Trying create a package for ArchLinux including your patches (https://aur.archlinux.org/packages/firefox-wayland-git). Unfortunately I this error:\n> /home/onny/projects/firefox-wayland-git/src/gecko-dev/obj-x86_64-pc-linux-gnu/_virtualenv/bin/python -m mozbuild.action.file_generate /home/onny/projects/firefox-wayland-git/src/gecko-dev/build/variables.py source_repo_header source-repo.h .deps/source-repo.h.pp\n> Traceback (most recent call last):\n>  File \"/usr/lib64/python2.7/runpy.py\", line 174, in _run_module_as_main\n>    \"__main__\", fname, loader, pkg_name)\n>  File \"/usr/lib64/python2.7/runpy.py\", line 72, in _run_code\n>    exec code in run_globals\n>  File \"/home/onny/projects/firefox-wayland-git/src/gecko-dev/python/mozbuild/mozbuild/action/file_generate.py\", line 108, in <module>\n>    sys.exit(main(sys.argv[1:]))\n>  File \"/home/onny/projects/firefox-wayland-git/src/gecko-dev/python/mozbuild/mozbuild/action/file_generate.py\", line 63, in main\n>    ret = module.__dict__[method](output, *args.additional_arguments)\n>  File \"/home/onny/projects/firefox-wayland-git/src/gecko-dev/build/variables.py\", line 86, in source_repo_header\n>    raise Exception('could not resolve changeset; '\n> Exception: could not resolve changeset; try setting MOZ_SOURCE_CHANGESET\nI guess it's not related to your patches but do you know how to fix this?", "time": "2017-07-18T20:45:42Z", "count": 63, "creation_time": "2017-07-18T20:45:42Z", "tags": [], "attachment_id": null, "bug_id": 635134, "is_private": false, "author": "onny@project-insanity.org", "id": 12484314}, {"bug_id": 635134, "text": "(In reply to Jonas Heinrich from comment #63)\n> > Exception: could not resolve changeset; try setting MOZ_SOURCE_CHANGESET\n> I guess it's not related to your patches but do you know how to fix this?\n\nbuild/variables.py doesn't support getting the source changeset from a git checkout.  So you can build from an hg checkout, or you can set MOZ_SOURCE_CHANGESET.", "creation_time": "2017-07-23T21:19:14Z", "tags": [], "attachment_id": null, "raw_text": "(In reply to Jonas Heinrich from comment #63)\n> > Exception: could not resolve changeset; try setting MOZ_SOURCE_CHANGESET\n> I guess it's not related to your patches but do you know how to fix this?\n\nbuild/variables.py doesn't support getting the source changeset from a git checkout.  So you can build from an hg checkout, or you can set MOZ_SOURCE_CHANGESET.", "creator": "froydnj+bz@gmail.com", "id": 12497254, "is_private": false, "author": "froydnj+bz@gmail.com", "time": "2017-07-23T21:19:14Z", "count": 64}, {"is_private": false, "count": 65, "time": "2017-11-10T02:32:24Z", "author": "mihailescu2m@gmail.com", "id": 12832797, "attachment_id": null, "creation_time": "2017-11-10T02:32:24Z", "tags": [], "creator": "mihailescu2m@gmail.com", "raw_text": "A few pointers for others trying to use and compile this branch (as of Nov 2017):\n\n1. native compile on armhf:\n* runs out of memory (with 2GB RAM): use `ac_add_options --disable-debug-symbols`\n* fails because armcpudetect is defined twice (libvpx and libaom): use `ac_add_options --disable-av1` to disable libaom\n* fails compiling webrtc: use `ac_add_options --disable-webrtc`\n\n2. firefox segmentation fault on start\n* no idea why, but using `firefox --no-remote` works\n\n3. could not get WebGL working\n* for some reason, EGL_DEFAULT_DISPLAY was bogus, I had to use this patch:\n\ndiff --git a/gfx/gl/GLLibraryEGL.cpp b/gfx/gl/GLLibraryEGL.cpp\nindex 01bd3a7ff263..5546bd5c9257 100644\n--- a/gfx/gl/GLLibraryEGL.cpp\n+++ b/gfx/gl/GLLibraryEGL.cpp\n@@ -511,7 +511,7 @@ GLLibraryEGL::EnsureInitialized(bool forceAccel, nsACString* const out_failureId\n             mIsWARP = true;\n         }\n     } else {\n-        chosenDisplay = GetAndInitDisplay(*this, EGL_DEFAULT_DISPLAY);\n+        chosenDisplay = GetAndInitDisplay(*this, ((EGLNativeDisplayType)0));\n     }\n\n     if (!chosenDisplay) {\n\n4. video is not working, ffmpeg 3.3.4 installed (libavcodec57 7:3.3.4). any idea how to fix this one?\n\n[Child 1825, MediaPlayback #3] WARNING: Decoder=9d3da380 Decode error: NS_ERROR_DOM_MEDIA_FATAL_ERR (0x806e0005) - mozilla::MediaResult mozilla::FFmpegDataDecoder<57>::InitDecoder(): Couldn't initialise ffmpeg decoder: file /home/odroid/src/firefox/gecko-dev/dom/media/MediaDecoderStateMachine.cpp, line 3350\nJavaScript warning: https://www.youtube.com/yts/jsbin/player-vfl8XKJyP/en_US/base.js, line 3233: Error: This error message will be blank when privacy.resistFingerprinting = true.  If it is really necessary, please add it to the whitelist in MediaError::GetMessage: NS_ERROR_DOM_MEDIA_FATAL_ERR (0x806e0005) - mozilla::MediaResult mozilla::FFmpegDataDecoder<57>::InitDecoder(): Couldn't initialise ffmpeg decoder\nJavaScript warning: https://www.youtube.com/yts/jsbin/player-vfl8XKJyP/en_US/base.js, line 3233: Error: This error message will be blank when privacy.resistFingerprinting = true.  If it is really necessary, please add it to the whitelist in MediaError::GetMessage: NS_ERROR_DOM_MEDIA_FATAL_ERR (0x806e0005) - mozilla::MediaResult mozilla::FFmpegDataDecoder<57>::InitDecoder(): Couldn't initialise ffmpeg decoder\nJavaScript warning: https://www.youtube.com/yts/jsbin/player-vfl8XKJyP/en_US/base.js, line 3233: Error: This error message will be blank when privacy.resistFingerprinting = true.  If it is really necessary, please add it to the whitelist in MediaError::GetMessage: NS_ERROR_DOM_MEDIA_FATAL_ERR (0x806e0005) - mozilla::MediaResult mozilla::FFmpegDataDecoder<57>::InitDecoder(): Couldn't initialise ffmpeg decoder", "bug_id": 635134, "text": "A few pointers for others trying to use and compile this branch (as of Nov 2017):\n\n1. native compile on armhf:\n* runs out of memory (with 2GB RAM): use `ac_add_options --disable-debug-symbols`\n* fails because armcpudetect is defined twice (libvpx and libaom): use `ac_add_options --disable-av1` to disable libaom\n* fails compiling webrtc: use `ac_add_options --disable-webrtc`\n\n2. firefox segmentation fault on start\n* no idea why, but using `firefox --no-remote` works\n\n3. could not get WebGL working\n* for some reason, EGL_DEFAULT_DISPLAY was bogus, I had to use this patch:\n\ndiff --git a/gfx/gl/GLLibraryEGL.cpp b/gfx/gl/GLLibraryEGL.cpp\nindex 01bd3a7ff263..5546bd5c9257 100644\n--- a/gfx/gl/GLLibraryEGL.cpp\n+++ b/gfx/gl/GLLibraryEGL.cpp\n@@ -511,7 +511,7 @@ GLLibraryEGL::EnsureInitialized(bool forceAccel, nsACString* const out_failureId\n             mIsWARP = true;\n         }\n     } else {\n-        chosenDisplay = GetAndInitDisplay(*this, EGL_DEFAULT_DISPLAY);\n+        chosenDisplay = GetAndInitDisplay(*this, ((EGLNativeDisplayType)0));\n     }\n\n     if (!chosenDisplay) {\n\n4. video is not working, ffmpeg 3.3.4 installed (libavcodec57 7:3.3.4). any idea how to fix this one?\n\n[Child 1825, MediaPlayback #3] WARNING: Decoder=9d3da380 Decode error: NS_ERROR_DOM_MEDIA_FATAL_ERR (0x806e0005) - mozilla::MediaResult mozilla::FFmpegDataDecoder<57>::InitDecoder(): Couldn't initialise ffmpeg decoder: file /home/odroid/src/firefox/gecko-dev/dom/media/MediaDecoderStateMachine.cpp, line 3350\nJavaScript warning: https://www.youtube.com/yts/jsbin/player-vfl8XKJyP/en_US/base.js, line 3233: Error: This error message will be blank when privacy.resistFingerprinting = true.  If it is really necessary, please add it to the whitelist in MediaError::GetMessage: NS_ERROR_DOM_MEDIA_FATAL_ERR (0x806e0005) - mozilla::MediaResult mozilla::FFmpegDataDecoder<57>::InitDecoder(): Couldn't initialise ffmpeg decoder\nJavaScript warning: https://www.youtube.com/yts/jsbin/player-vfl8XKJyP/en_US/base.js, line 3233: Error: This error message will be blank when privacy.resistFingerprinting = true.  If it is really necessary, please add it to the whitelist in MediaError::GetMessage: NS_ERROR_DOM_MEDIA_FATAL_ERR (0x806e0005) - mozilla::MediaResult mozilla::FFmpegDataDecoder<57>::InitDecoder(): Couldn't initialise ffmpeg decoder\nJavaScript warning: https://www.youtube.com/yts/jsbin/player-vfl8XKJyP/en_US/base.js, line 3233: Error: This error message will be blank when privacy.resistFingerprinting = true.  If it is really necessary, please add it to the whitelist in MediaError::GetMessage: NS_ERROR_DOM_MEDIA_FATAL_ERR (0x806e0005) - mozilla::MediaResult mozilla::FFmpegDataDecoder<57>::InitDecoder(): Couldn't initialise ffmpeg decoder"}, {"bug_id": 635134, "attachment_id": null, "tags": [], "creation_time": "2017-11-10T08:09:54Z", "id": 12833312, "is_private": false, "author": "stransky@redhat.com", "text": "(In reply to mihailescu2m from comment #65)\n> A few pointers for others trying to use and compile this branch (as of Nov\n> 2017):\n> \n> 1. native compile on armhf:\n> * runs out of memory (with 2GB RAM): use `ac_add_options\n> --disable-debug-symbols`\n> * fails because armcpudetect is defined twice (libvpx and libaom): use\n> `ac_add_options --disable-av1` to disable libaom\n> * fails compiling webrtc: use `ac_add_options --disable-webrtc`\n> \n> 2. firefox segmentation fault on start\n> * no idea why, but using `firefox --no-remote` works\n\nCan you please file #BZ for that and attach a backtrace there?", "creator": "stransky@redhat.com", "raw_text": "(In reply to mihailescu2m from comment #65)\n> A few pointers for others trying to use and compile this branch (as of Nov\n> 2017):\n> \n> 1. native compile on armhf:\n> * runs out of memory (with 2GB RAM): use `ac_add_options\n> --disable-debug-symbols`\n> * fails because armcpudetect is defined twice (libvpx and libaom): use\n> `ac_add_options --disable-av1` to disable libaom\n> * fails compiling webrtc: use `ac_add_options --disable-webrtc`\n> \n> 2. firefox segmentation fault on start\n> * no idea why, but using `firefox --no-remote` works\n\nCan you please file #BZ for that and attach a backtrace there?", "count": 66, "time": "2017-11-10T08:09:54Z"}, {"time": "2017-11-10T11:11:54Z", "count": 67, "raw_text": "(In reply to Martin Str\u00e1nsk\u00fd [:stransky] from comment #66)\n> Can you please file #BZ for that and attach a backtrace there?\n\nBug ID #1416186 https://bugzilla.mozilla.org/show_bug.cgi?id=1416186\nTrace:\n#0  0xb6ec5116 in __libc_do_syscall () at /lib/arm-linux-gnueabihf/libpthread.so.0\n#1  0xb6ec4122 in raise () at /lib/arm-linux-gnueabihf/libpthread.so.0\n#2  0xb2a13cca in nsProfileLock::FatalSignalHandler(int, siginfo_t*, void*) () at /usr/local/lib/firefox/libxul.so\n#3  0xb6c15890 in <signal handler called> () at /lib/arm-linux-gnueabihf/libc.so.6\n#4  0xb61960f4 in XChangeProperty () at /usr/lib/arm-linux-gnueabihf/libX11.so.6\n#5  0xb27fdff6 in XRemoteClient::DoSendCommandLine(unsigned long, int, char**, char const*, char**, bool*, char const*, char const*) () at /usr/local/lib/firefox/libxul.so\n#6  0xb27fe508 in XRemoteClient::SendCommandLine(char const*, char const*, char const*, int, char**, char const*, char**, bool*) () at /usr/local/lib/firefox/libxul.so\n#7  0xb2a192ae in XREMain::XRE_mainStartup(bool*) [clone .part.79] () at /usr/local/lib/firefox/libxul.so\n#8  0xb6f33ab8 in __stack_chk_guard () at /lib/ld-linux-armhf.so.3\n\nSorry there are no details because I used --no-debug-symbols to link it on 2GB RAM.\nPossible linked to #1359634 or #1360566 and #1360560", "creator": "mihailescu2m@gmail.com", "text": "(In reply to Martin Str\u00e1nsk\u00fd [:stransky] from comment #66)\n> Can you please file #BZ for that and attach a backtrace there?\n\nBug ID #1416186 https://bugzilla.mozilla.org/show_bug.cgi?id=1416186\nTrace:\n#0  0xb6ec5116 in __libc_do_syscall () at /lib/arm-linux-gnueabihf/libpthread.so.0\n#1  0xb6ec4122 in raise () at /lib/arm-linux-gnueabihf/libpthread.so.0\n#2  0xb2a13cca in nsProfileLock::FatalSignalHandler(int, siginfo_t*, void*) () at /usr/local/lib/firefox/libxul.so\n#3  0xb6c15890 in <signal handler called> () at /lib/arm-linux-gnueabihf/libc.so.6\n#4  0xb61960f4 in XChangeProperty () at /usr/lib/arm-linux-gnueabihf/libX11.so.6\n#5  0xb27fdff6 in XRemoteClient::DoSendCommandLine(unsigned long, int, char**, char const*, char**, bool*, char const*, char const*) () at /usr/local/lib/firefox/libxul.so\n#6  0xb27fe508 in XRemoteClient::SendCommandLine(char const*, char const*, char const*, int, char**, char const*, char**, bool*) () at /usr/local/lib/firefox/libxul.so\n#7  0xb2a192ae in XREMain::XRE_mainStartup(bool*) [clone .part.79] () at /usr/local/lib/firefox/libxul.so\n#8  0xb6f33ab8 in __stack_chk_guard () at /lib/ld-linux-armhf.so.3\n\nSorry there are no details because I used --no-debug-symbols to link it on 2GB RAM.\nPossible linked to #1359634 or #1360566 and #1360560", "author": "mihailescu2m@gmail.com", "is_private": false, "id": 12833721, "creation_time": "2017-11-10T11:11:54Z", "tags": [], "attachment_id": null, "bug_id": 635134}, {"author": "mihailescu2m@gmail.com", "time": "2017-11-28T05:34:56Z", "count": 68, "is_private": false, "id": 12878867, "raw_text": "As of 28/11/2017 starting FF (armhf build) fails with `Illegal instruction` error (--screenshot however renders ok):\n\n$ ./objdir-wayland/dist/bin/firefox --no-remote --new-instance --safe-mode --browser --new-window google.com\n[Child 5583, Chrome_ChildThread] WARNING: pipe error (20): Connection reset by peer: file /mnt/temp/src/firefox/gecko-dev/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 353\n[Child 5583, Chrome_ChildThread] WARNING: pipe error (17): Connection reset by peer: file /mnt/temp/src/firefox/gecko-dev/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 353\n[Child 5577, Chrome_ChildThread] WARNING: pipe error (20): Connection reset by peer: file /mnt/temp/src/firefox/gecko-dev/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 353\n[Child 5583, Chrome_ChildThread] WARNING: pipe error (16): Connection reset by peer: file /mnt/temp/src/firefox/gecko-dev/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 353\n[Child 5577, Chrome_ChildThread] WARNING: pipe error (17): Connection reset by peer: file /mnt/temp/src/firefox/gecko-dev/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 353\n[Child 5583, Chrome_ChildThread] WARNING: pipe error (15): Connection reset by peer: file /mnt/temp/src/firefox/gecko-dev/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 353\n[Child 5577, Chrome_ChildThread] WARNING: pipe error (16): Connection reset by peer: file /mnt/temp/src/firefox/gecko-dev/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 353\n[Child 5583, Chrome_ChildThread] WARNING: pipe error (3): Connection reset by peer: file /mnt/temp/src/firefox/gecko-dev/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 353\n[Child 5577, Chrome_ChildThread] WARNING: pipe error (15): Connection reset by peer: file /mnt/temp/src/firefox/gecko-dev/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 353\n[Child 5577, Chrome_ChildThread] WARNING: pipe error (3): Connection reset by peer: file /mnt/temp/src/firefox/gecko-dev/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 353\nIllegal instruction (core dumped)\n\n(gdb) bt\n#0  0xb1407352 in mozilla::ipc::MessageChannel::OnChannelErrorFromLink() () at /mnt/temp/src/firefox/gecko-dev/objdir-wayland/dist/bin/libxul.so\n#1  0xb140740c in mozilla::ipc::ProcessLink::OnChannelError() () at /mnt/temp/src/firefox/gecko-dev/objdir-wayland/dist/bin/libxul.so\n#2  0xb13f69e6 in event_process_active_single_queue.isra () at /mnt/temp/src/firefox/gecko-dev/objdir-wayland/dist/bin/libxul.so\n#3  0xb13f6ed2 in event_base_loop () at /mnt/temp/src/firefox/gecko-dev/objdir-wayland/dist/bin/libxul.so\n#4  0xb13e648e in base::MessagePumpLibevent::Run(base::MessagePump::Delegate*) () at /mnt/temp/src/firefox/gecko-dev/objdir-wayland/dist/bin/libxul.so\n#5  0xb13e7e4a in MessageLoop::Run() () at /mnt/temp/src/firefox/gecko-dev/objdir-wayland/dist/bin/libxul.so\n#6  0xb13f0038 in base::Thread::ThreadMain() () at /mnt/temp/src/firefox/gecko-dev/objdir-wayland/dist/bin/libxul.so\n#7  0xb13e6160 in ThreadFunc(void*) () at /mnt/temp/src/firefox/gecko-dev/objdir-wayland/dist/bin/libxul.so\n#8  0xb6f05832 in start_thread () at /lib/arm-linux-gnueabihf/libpthread.so.0\n#9  0xb6cd4aec in  () at /lib/arm-linux-gnueabihf/libc.so.6", "creator": "mihailescu2m@gmail.com", "tags": [], "creation_time": "2017-11-28T05:34:56Z", "attachment_id": null, "text": "As of 28/11/2017 starting FF (armhf build) fails with `Illegal instruction` error (--screenshot however renders ok):\n\n$ ./objdir-wayland/dist/bin/firefox --no-remote --new-instance --safe-mode --browser --new-window google.com\n[Child 5583, Chrome_ChildThread] WARNING: pipe error (20): Connection reset by peer: file /mnt/temp/src/firefox/gecko-dev/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 353\n[Child 5583, Chrome_ChildThread] WARNING: pipe error (17): Connection reset by peer: file /mnt/temp/src/firefox/gecko-dev/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 353\n[Child 5577, Chrome_ChildThread] WARNING: pipe error (20): Connection reset by peer: file /mnt/temp/src/firefox/gecko-dev/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 353\n[Child 5583, Chrome_ChildThread] WARNING: pipe error (16): Connection reset by peer: file /mnt/temp/src/firefox/gecko-dev/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 353\n[Child 5577, Chrome_ChildThread] WARNING: pipe error (17): Connection reset by peer: file /mnt/temp/src/firefox/gecko-dev/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 353\n[Child 5583, Chrome_ChildThread] WARNING: pipe error (15): Connection reset by peer: file /mnt/temp/src/firefox/gecko-dev/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 353\n[Child 5577, Chrome_ChildThread] WARNING: pipe error (16): Connection reset by peer: file /mnt/temp/src/firefox/gecko-dev/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 353\n[Child 5583, Chrome_ChildThread] WARNING: pipe error (3): Connection reset by peer: file /mnt/temp/src/firefox/gecko-dev/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 353\n[Child 5577, Chrome_ChildThread] WARNING: pipe error (15): Connection reset by peer: file /mnt/temp/src/firefox/gecko-dev/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 353\n[Child 5577, Chrome_ChildThread] WARNING: pipe error (3): Connection reset by peer: file /mnt/temp/src/firefox/gecko-dev/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 353\nIllegal instruction (core dumped)\n\n(gdb) bt\n#0  0xb1407352 in mozilla::ipc::MessageChannel::OnChannelErrorFromLink() () at /mnt/temp/src/firefox/gecko-dev/objdir-wayland/dist/bin/libxul.so\n#1  0xb140740c in mozilla::ipc::ProcessLink::OnChannelError() () at /mnt/temp/src/firefox/gecko-dev/objdir-wayland/dist/bin/libxul.so\n#2  0xb13f69e6 in event_process_active_single_queue.isra () at /mnt/temp/src/firefox/gecko-dev/objdir-wayland/dist/bin/libxul.so\n#3  0xb13f6ed2 in event_base_loop () at /mnt/temp/src/firefox/gecko-dev/objdir-wayland/dist/bin/libxul.so\n#4  0xb13e648e in base::MessagePumpLibevent::Run(base::MessagePump::Delegate*) () at /mnt/temp/src/firefox/gecko-dev/objdir-wayland/dist/bin/libxul.so\n#5  0xb13e7e4a in MessageLoop::Run() () at /mnt/temp/src/firefox/gecko-dev/objdir-wayland/dist/bin/libxul.so\n#6  0xb13f0038 in base::Thread::ThreadMain() () at /mnt/temp/src/firefox/gecko-dev/objdir-wayland/dist/bin/libxul.so\n#7  0xb13e6160 in ThreadFunc(void*) () at /mnt/temp/src/firefox/gecko-dev/objdir-wayland/dist/bin/libxul.so\n#8  0xb6f05832 in start_thread () at /lib/arm-linux-gnueabihf/libpthread.so.0\n#9  0xb6cd4aec in  () at /lib/arm-linux-gnueabihf/libc.so.6", "bug_id": 635134}, {"bug_id": 635134, "attachment_id": null, "creation_time": "2017-12-12T12:20:58Z", "tags": [], "id": 12914887, "is_private": false, "author": "greg@unrelenting.technology", "text": "Hi. Thanks for your work. I've compiled the Wayland branch (revision https://github.com/stransky/gecko-dev/commit/caf2a03e5e9e91635f9696e2ba0c9d522d3fc5e4) on my machine (FreeBSD 12-CURRENT, amdgpu, Mesa 17.3.0, Weston master).\n\nIt works with software rendering, with some glitches (some elements on some pages flicker, keyboard input doesn't like to refresh the screen (so like, typing in a text field doesn't show up until scrolling or resizing the window), it's hard to focus items in context menus). But also, HiDPI works (which is the primary reason I want to switch to the Wayland native version ASAP), video playback works (including the AV1 demo).\n\nWhat doesn't work is EGL. In a debug build, the assertion at GLContextProviderEGL.cpp:177 (MOZ_ASSERT(aWindow)) fails. Makes sense, since the GET_NATIVE_WINDOW_\u2026 macros at the top of that file refer to X11 window IDs. In a non-debug build, \"Failed to load EGL library 3\". But after fixing EGL_DEFAULT_DISPLAY as suggested above by mihailescu2m, it's \"Failed to create EGLSurface\".", "creator": "greg@unrelenting.technology", "raw_text": "Hi. Thanks for your work. I've compiled the Wayland branch (revision https://github.com/stransky/gecko-dev/commit/caf2a03e5e9e91635f9696e2ba0c9d522d3fc5e4) on my machine (FreeBSD 12-CURRENT, amdgpu, Mesa 17.3.0, Weston master).\n\nIt works with software rendering, with some glitches (some elements on some pages flicker, keyboard input doesn't like to refresh the screen (so like, typing in a text field doesn't show up until scrolling or resizing the window), it's hard to focus items in context menus). But also, HiDPI works (which is the primary reason I want to switch to the Wayland native version ASAP), video playback works (including the AV1 demo).\n\nWhat doesn't work is EGL. In a debug build, the assertion at GLContextProviderEGL.cpp:177 (MOZ_ASSERT(aWindow)) fails. Makes sense, since the GET_NATIVE_WINDOW_\u2026 macros at the top of that file refer to X11 window IDs. In a non-debug build, \"Failed to load EGL library 3\". But after fixing EGL_DEFAULT_DISPLAY as suggested above by mihailescu2m, it's \"Failed to create EGLSurface\".", "count": 69, "time": "2017-12-12T12:20:58Z"}, {"is_private": false, "author": "greg@unrelenting.technology", "id": 12929549, "attachment_id": null, "tags": [], "creation_time": "2017-12-20T18:17:19Z", "bug_id": 635134, "count": 70, "time": "2017-12-20T18:17:19Z", "creator": "greg@unrelenting.technology", "raw_text": "Looks like the window refresh problem is HiDPI related. It does not happen with scale=1 in Weston.", "text": "Looks like the window refresh problem is HiDPI related. It does not happen with scale=1 in Weston."}, {"bug_id": 635134, "text": "1513879786219\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/activity-stream@mozilla.org.xpi\n1513879786222\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/aushelper@mozilla.org.xpi\n1513879786224\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/firefox@getpocket.com.xpi\n1513879786225\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/followonsearch@mozilla.com.xpi\n1513879786226\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/formautofill@mozilla.org.xpi\n1513879786227\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/onboarding@mozilla.org.xpi\n1513879786229\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/presentation@mozilla.org.xpi\n1513879786230\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/screenshots@mozilla.org.xpi\n1513879786231\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/shield-recipe-client@mozilla.org.xpi\n1513879786231\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/webcompat-reporter@mozilla.org.xpi\n1513879786233\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/webcompat@mozilla.org.xpi\n1513879786236\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/extensions/{972ce4c6-7e08-4474-a285-3208198ce6fd}.xpi\n1513879822805\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/activity-stream@mozilla.org.xpi\n1513879822806\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/aushelper@mozilla.org.xpi\n1513879822806\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/firefox@getpocket.com.xpi\n1513879822807\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/followonsearch@mozilla.com.xpi\n1513879822807\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/formautofill@mozilla.org.xpi\n1513879822807\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/onboarding@mozilla.org.xpi\n1513879822808\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/presentation@mozilla.org.xpi\n1513879822808\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/screenshots@mozilla.org.xpi\n1513879822808\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/shield-recipe-client@mozilla.org.xpi\n1513879822808\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/webcompat-reporter@mozilla.org.xpi\n1513879822809\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/webcompat@mozilla.org.xpi\n1513879822809\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/extensions/{972ce4c6-7e08-4474-a285-3208198ce6fd}.xpi\n(firefox:3): Gtk-WARNING **: cannot open display: \n\nI thought I should report this, because the flatpak version won't run unless I have an X11-based version open first. When I don't have an X11 one open, the above is what is spat out by the terminal. I'm on Antergos running the newest GNOME shell. I don't know why this happens. It's extremely frustrating given the speed boost of wayland.\n\nAny of you know if this should be filed in a separate bug, or is there something I can do separately to make this work? This is so weird...", "attachment_id": null, "tags": [], "creation_time": "2017-12-21T18:18:59Z", "creator": "gagemorgan@outlook.com", "raw_text": "1513879786219\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/activity-stream@mozilla.org.xpi\n1513879786222\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/aushelper@mozilla.org.xpi\n1513879786224\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/firefox@getpocket.com.xpi\n1513879786225\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/followonsearch@mozilla.com.xpi\n1513879786226\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/formautofill@mozilla.org.xpi\n1513879786227\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/onboarding@mozilla.org.xpi\n1513879786229\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/presentation@mozilla.org.xpi\n1513879786230\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/screenshots@mozilla.org.xpi\n1513879786231\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/shield-recipe-client@mozilla.org.xpi\n1513879786231\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/webcompat-reporter@mozilla.org.xpi\n1513879786233\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/webcompat@mozilla.org.xpi\n1513879786236\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/extensions/{972ce4c6-7e08-4474-a285-3208198ce6fd}.xpi\n1513879822805\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/activity-stream@mozilla.org.xpi\n1513879822806\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/aushelper@mozilla.org.xpi\n1513879822806\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/firefox@getpocket.com.xpi\n1513879822807\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/followonsearch@mozilla.com.xpi\n1513879822807\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/formautofill@mozilla.org.xpi\n1513879822807\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/onboarding@mozilla.org.xpi\n1513879822808\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/presentation@mozilla.org.xpi\n1513879822808\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/screenshots@mozilla.org.xpi\n1513879822808\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/shield-recipe-client@mozilla.org.xpi\n1513879822808\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/webcompat-reporter@mozilla.org.xpi\n1513879822809\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/features/webcompat@mozilla.org.xpi\n1513879822809\taddons.xpi\tWARN\tCan't get modified time of /app/lib/firefox-59.0a1/browser/extensions/{972ce4c6-7e08-4474-a285-3208198ce6fd}.xpi\n(firefox:3): Gtk-WARNING **: cannot open display: \n\nI thought I should report this, because the flatpak version won't run unless I have an X11-based version open first. When I don't have an X11 one open, the above is what is spat out by the terminal. I'm on Antergos running the newest GNOME shell. I don't know why this happens. It's extremely frustrating given the speed boost of wayland.\n\nAny of you know if this should be filed in a separate bug, or is there something I can do separately to make this work? This is so weird...", "id": 12932231, "is_private": false, "count": 71, "time": "2017-12-21T18:18:59Z", "author": "gagemorgan@outlook.com"}, {"raw_text": "(In reply to gagemorgan from comment #71)\n\n(the extension warnings are not relevant, you didn't have to paste them all)\n\n> (firefox:3): Gtk-WARNING **: cannot open display: \n\nIt's not finding the display. Can you run other Wayland apps with Flatpak?", "creator": "greg@unrelenting.technology", "tags": [], "creation_time": "2017-12-21T21:45:49Z", "attachment_id": null, "text": "(In reply to gagemorgan from comment #71)\n\n(the extension warnings are not relevant, you didn't have to paste them all)\n\n> (firefox:3): Gtk-WARNING **: cannot open display: \n\nIt's not finding the display. Can you run other Wayland apps with Flatpak?", "bug_id": 635134, "author": "greg@unrelenting.technology", "time": "2017-12-21T21:45:49Z", "count": 72, "is_private": false, "id": 12932852}, {"bug_id": 635134, "attachment_id": null, "tags": [], "creation_time": "2017-12-21T21:59:52Z", "id": 12932878, "author": "gagemorgan@outlook.com", "is_private": false, "text": "Could you give me an example of one? A quick browse through Flathub didn't really reveal which were actually Wayland and which were just XWayland.", "creator": "gagemorgan@outlook.com", "raw_text": "Could you give me an example of one? A quick browse through Flathub didn't really reveal which were actually Wayland and which were just XWayland.", "count": 73, "time": "2017-12-21T21:59:52Z"}, {"attachment_id": null, "tags": [], "creation_time": "2017-12-21T23:47:11Z", "bug_id": 635134, "is_private": false, "author": "anass.1430@gmail.com", "id": 12933117, "creator": "anass.1430@gmail.com", "raw_text": "(In reply to gagemorgan from comment #73)\n> Could you give me an example of one? A quick browse through Flathub didn't\n> really reveal which were actually Wayland and which were just XWayland.\n\nI'm sure any GNOME app would be sufficient, but you can test the de facto example of Flatpak GNOME apps (GNOME Recipes): https://flathub.org/repo/appstream/org.gnome.Recipes.flatpakref", "text": "(In reply to gagemorgan from comment #73)\n> Could you give me an example of one? A quick browse through Flathub didn't\n> really reveal which were actually Wayland and which were just XWayland.\n\nI'm sure any GNOME app would be sufficient, but you can test the de facto example of Flatpak GNOME apps (GNOME Recipes): https://flathub.org/repo/appstream/org.gnome.Recipes.flatpakref", "count": 74, "time": "2017-12-21T23:47:11Z"}, {"time": "2017-12-22T01:12:22Z", "count": 75, "text": "Yeah, Gedit and friends all work just fine. It's only Firefox Nightly on Wayland that has this issue, via Flatpak of course.", "raw_text": "Yeah, Gedit and friends all work just fine. It's only Firefox Nightly on Wayland that has this issue, via Flatpak of course.", "creator": "gagemorgan@outlook.com", "id": 12933210, "author": "gagemorgan@outlook.com", "is_private": false, "bug_id": 635134, "tags": [], "creation_time": "2017-12-22T01:12:22Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "creation_time": "2018-01-01T22:38:15Z", "bug_id": 635134, "author": "nw9165-3201@yahoo.com", "is_private": false, "id": 12939955, "creator": "nw9165-3201@yahoo.com", "raw_text": "Any update on enabling native Wayland support by default?", "text": "Any update on enabling native Wayland support by default?", "count": 76, "time": "2018-01-01T22:38:15Z"}, {"id": 12959090, "author": "jcdawes92@gmail.com", "is_private": false, "bug_id": 635134, "attachment_id": null, "creation_time": "2018-01-10T19:24:12Z", "tags": [], "count": 77, "time": "2018-01-10T19:24:12Z", "text": "I tried the latest NightlyWayland flatpak and although it worked almost completely, for some reason no text would appear in the address bar as I typed.  It was clearly accepting the input, because I could browse to pages, but I couldn't see what I was typing.\n\nIs this a known issue?", "creator": "jcdawes92@gmail.com", "raw_text": "I tried the latest NightlyWayland flatpak and although it worked almost completely, for some reason no text would appear in the address bar as I typed.  It was clearly accepting the input, because I could browse to pages, but I couldn't see what I was typing.\n\nIs this a known issue?"}, {"author": "greg@unrelenting.technology", "is_private": false, "id": 12959164, "creation_time": "2018-01-10T19:45:12Z", "tags": [], "attachment_id": null, "bug_id": 635134, "time": "2018-01-10T19:45:12Z", "count": 78, "raw_text": "(In reply to jcdawes92 from comment #77)\n> for some reason no text would appear in the address bar as I\n> typed.  It was clearly accepting the input, because I could browse to pages,\n> but I couldn't see what I was typing.\n\nAre you on a HiDPI display? When the compositor is at 2x scale, I see this. Text often only appears when you do some other action. Repaint/damage is broken on HiDPI :(\n\nAlso EGL doesn't work for me.", "creator": "greg@unrelenting.technology", "text": "(In reply to jcdawes92 from comment #77)\n> for some reason no text would appear in the address bar as I\n> typed.  It was clearly accepting the input, because I could browse to pages,\n> but I couldn't see what I was typing.\n\nAre you on a HiDPI display? When the compositor is at 2x scale, I see this. Text often only appears when you do some other action. Repaint/damage is broken on HiDPI :(\n\nAlso EGL doesn't work for me."}, {"count": 79, "time": "2018-01-11T10:01:39Z", "text": "(In reply to greg from comment #78)\n> (In reply to jcdawes92 from comment #77)\n> > for some reason no text would appear in the address bar as I\n> > typed.  It was clearly accepting the input, because I could browse to pages,\n> > but I couldn't see what I was typing.\n> \n> Are you on a HiDPI display? When the compositor is at 2x scale, I see this.\n> Text often only appears when you do some other action. Repaint/damage is\n> broken on HiDPI :(\n> \n> Also EGL doesn't work for me.\n\nYes, I know that. Filed as Bug 1429717. Thanks.", "creator": "stransky@redhat.com", "raw_text": "(In reply to greg from comment #78)\n> (In reply to jcdawes92 from comment #77)\n> > for some reason no text would appear in the address bar as I\n> > typed.  It was clearly accepting the input, because I could browse to pages,\n> > but I couldn't see what I was typing.\n> \n> Are you on a HiDPI display? When the compositor is at 2x scale, I see this.\n> Text often only appears when you do some other action. Repaint/damage is\n> broken on HiDPI :(\n> \n> Also EGL doesn't work for me.\n\nYes, I know that. Filed as Bug 1429717. Thanks.", "id": 12960738, "is_private": false, "author": "stransky@redhat.com", "bug_id": 635134, "attachment_id": null, "creation_time": "2018-01-11T10:01:39Z", "tags": []}, {"bug_id": 635134, "text": "Sorry for the delay in getting back to you.  Yes, I am running HiDPI with scale 2.", "creation_time": "2018-01-12T10:47:18Z", "tags": [], "attachment_id": null, "raw_text": "Sorry for the delay in getting back to you.  Yes, I am running HiDPI with scale 2.", "creator": "jcdawes92@gmail.com", "id": 12964143, "is_private": false, "author": "jcdawes92@gmail.com", "time": "2018-01-12T10:47:18Z", "count": 80}, {"count": 81, "time": "2018-01-17T12:22:34Z", "text": "All base patches are in tree which means the wayland port can be built/run now. (on glibc systems only due to Bug 1409707).\n\nAll you need is to build trunk with:\n\nac_add_options --enable-default-toolkit=cairo-gtk3-wayland", "creator": "stransky@redhat.com", "raw_text": "All base patches are in tree which means the wayland port can be built/run now. (on glibc systems only due to Bug 1409707).\n\nAll you need is to build trunk with:\n\nac_add_options --enable-default-toolkit=cairo-gtk3-wayland", "id": 12975983, "author": "stransky@redhat.com", "is_private": false, "bug_id": 635134, "attachment_id": null, "tags": [], "creation_time": "2018-01-17T12:22:34Z"}, {"id": 12976196, "count": 82, "author": "barz621@gmail.com", "time": "2018-01-17T13:58:59Z", "is_private": false, "text": "@Martin\n\nBuilding it with this option means that it will run on both X and WL like all gtk apps do?", "bug_id": 635134, "creator": "barz621@gmail.com", "raw_text": "@Martin\n\nBuilding it with this option means that it will run on both X and WL like all gtk apps do?", "attachment_id": null, "creation_time": "2018-01-17T13:58:59Z", "tags": []}, {"count": 83, "time": "2018-01-17T14:00:50Z", "creator": "stransky@redhat.com", "raw_text": "(In reply to ApB from comment #82)\n> @Martin\n> \n> Building it with this option means that it will run on both X and WL like\n> all gtk apps do?\n\nYes.", "text": "(In reply to ApB from comment #82)\n> @Martin\n> \n> Building it with this option means that it will run on both X and WL like\n> all gtk apps do?\n\nYes.", "author": "stransky@redhat.com", "is_private": false, "id": 12976201, "attachment_id": null, "creation_time": "2018-01-17T14:00:50Z", "tags": [], "bug_id": 635134}, {"text": "(In reply to Martin Str\u00e1nsk\u00fd [:stransky] from comment #83)\n> (In reply to ApB from comment #82)\n> > @Martin\n> > \n> > Building it with this option means that it will run on both X and WL like\n> > all gtk apps do?\n> \n> Yes.\n\nMakes sense to be made default then. At least for trunk.", "bug_id": 635134, "raw_text": "(In reply to Martin Str\u00e1nsk\u00fd [:stransky] from comment #83)\n> (In reply to ApB from comment #82)\n> > @Martin\n> > \n> > Building it with this option means that it will run on both X and WL like\n> > all gtk apps do?\n> \n> Yes.\n\nMakes sense to be made default then. At least for trunk.", "creator": "barz621@gmail.com", "creation_time": "2018-01-17T14:36:16Z", "tags": [], "attachment_id": null, "id": 12976284, "author": "barz621@gmail.com", "time": "2018-01-17T14:36:16Z", "count": 84, "is_private": false}, {"author": "sledru@mozilla.com", "time": "2018-01-25T17:15:02Z", "count": 85, "is_private": false, "id": 12995035, "raw_text": "\"Target Milestone: --- \u2192 mozilla59\"\nare you considering Wayland to be stable for 59?", "creator": "sledru@mozilla.com", "tags": [], "creation_time": "2018-01-25T17:15:02Z", "attachment_id": null, "text": "\"Target Milestone: --- \u2192 mozilla59\"\nare you considering Wayland to be stable for 59?", "bug_id": 635134}, {"count": 86, "time": "2018-01-25T18:08:40Z", "creator": "stransky@redhat.com", "raw_text": "(In reply to Sylvestre Ledru [:sylvestre] from comment #85)\n> \"Target Milestone: --- \u2192 mozilla59\"\n> are you considering Wayland to be stable for 59?\n\nSorry If set the flag wrongly. I mean 59 has a basic support and it's roughly functional but not good enough for general audience. I'm going to file another bug \"Ship wayland builds to user\" like we had for Gtk3 (Bug 1193807) and manage the stable status there.", "text": "(In reply to Sylvestre Ledru [:sylvestre] from comment #85)\n> \"Target Milestone: --- \u2192 mozilla59\"\n> are you considering Wayland to be stable for 59?\n\nSorry If set the flag wrongly. I mean 59 has a basic support and it's roughly functional but not good enough for general audience. I'm going to file another bug \"Ship wayland builds to user\" like we had for Gtk3 (Bug 1193807) and manage the stable status there.", "is_private": false, "author": "stransky@redhat.com", "id": 12995197, "attachment_id": null, "tags": [], "creation_time": "2018-01-25T18:08:40Z", "bug_id": 635134}, {"id": 12995699, "is_private": false, "author": "evilpies@gmail.com", "time": "2018-01-25T20:42:54Z", "count": 87, "bug_id": 635134, "text": "Thanks for clarification. I reset the flag. Meta bugs usually should only have a target milestone when the feature completely shipped.", "creation_time": "2018-01-25T20:42:54Z", "tags": [], "attachment_id": null, "raw_text": "Thanks for clarification. I reset the flag. Meta bugs usually should only have a target milestone when the feature completely shipped.", "creator": "evilpies@gmail.com"}, {"time": "2018-01-31T10:51:48Z", "count": 88, "raw_text": "Just wanted to say thanks to everyone working to move this forward, it's really important work!  Hopefully cheerleading isn't too offtopic!", "creator": "tek@castyour.net", "text": "Just wanted to say thanks to everyone working to move this forward, it's really important work!  Hopefully cheerleading isn't too offtopic!", "is_private": false, "author": "tek@castyour.net", "id": 13007873, "creation_time": "2018-01-31T10:51:48Z", "tags": [], "attachment_id": null, "bug_id": 635134}, {"raw_text": "(In reply to Martin Str\u00e1nsk\u00fd [:stransky] (Back on Feb 12) from comment #81)\n> All base patches are in tree...\n\n(In reply to Martin Str\u00e1nsk\u00fd [:stransky] (Back on Feb 12) from comment #86)\n> ... 59 has a basic support and it's\n> roughly functional but not good enough for general audience.\n\nDoes the current Nightly ship with Wayland support enabled already? I have tried it just now, but it does not seem to work:\n\n$ GDK_BACKEND=wayland firefox\nError: no DISPLAY environment variable specified\n\nBTW, is there a simple way to see the build-time configuration of a firefox binary?", "creator": "pbasista@gmail.com", "text": "(In reply to Martin Str\u00e1nsk\u00fd [:stransky] (Back on Feb 12) from comment #81)\n> All base patches are in tree...\n\n(In reply to Martin Str\u00e1nsk\u00fd [:stransky] (Back on Feb 12) from comment #86)\n> ... 59 has a basic support and it's\n> roughly functional but not good enough for general audience.\n\nDoes the current Nightly ship with Wayland support enabled already? I have tried it just now, but it does not seem to work:\n\n$ GDK_BACKEND=wayland firefox\nError: no DISPLAY environment variable specified\n\nBTW, is there a simple way to see the build-time configuration of a firefox binary?", "time": "2018-02-07T22:55:59Z", "count": 89, "tags": [], "creation_time": "2018-02-07T22:55:59Z", "attachment_id": null, "bug_id": 635134, "is_private": false, "author": "pbasista@gmail.com", "id": 13026196}, {"tags": [], "creation_time": "2018-02-07T22:58:32Z", "attachment_id": null, "bug_id": 635134, "is_private": false, "author": "grayshade@gmail.com", "id": 13026203, "raw_text": "(In reply to pbasista from comment #89)\n> BTW, is there a simple way to see the build-time configuration of a firefox\n> binary?\n\nMaybe about:buildconfig?", "creator": "grayshade@gmail.com", "text": "(In reply to pbasista from comment #89)\n> BTW, is there a simple way to see the build-time configuration of a firefox\n> binary?\n\nMaybe about:buildconfig?", "time": "2018-02-07T22:58:32Z", "count": 90}, {"id": 13026303, "is_private": false, "count": 91, "author": "pbasista@gmail.com", "time": "2018-02-07T23:39:23Z", "bug_id": 635134, "text": "(In reply to Laurentiu Nicola from comment #90)\n> Maybe about:buildconfig?\nThanks, I did not know about it. I was expecting some command-line way, in case the GUI is not available. Anyway...\n\nIt contains the configure options:\n\nMOZ_AUTOMATION=1 --enable-update-channel=nightly MOZILLA_OFFICIAL=1 MOZ_PGO=1 CC=/builds/worker/workspace/build/src/gcc/bin/gcc CXX=/builds/worker/workspace/build/src/gcc/bin/g++ MOZ_STDCXX_COMPAT=1 --enable-js-shell RUSTC=/builds/worker/workspace/build/src/rustc/bin/rustc CARGO=/builds/worker/workspace/build/src/rustc/bin/cargo --with-mozilla-api-keyfile=/builds/mozilla-desktop-geoloc-api.key --with-google-api-keyfile=/builds/gapi.data LLVM_CONFIG=/builds/worker/workspace/build/src/clang/bin/llvm-config --enable-rust-simd MAKE=/usr/bin/make --enable-crashreporter --enable-verify-mar --with-branding=browser/branding/nightly\n\nBut I am not able to use that info for determining whether the Wayland support is built-in or not.", "attachment_id": null, "tags": [], "creation_time": "2018-02-07T23:39:23Z", "creator": "pbasista@gmail.com", "raw_text": "(In reply to Laurentiu Nicola from comment #90)\n> Maybe about:buildconfig?\nThanks, I did not know about it. I was expecting some command-line way, in case the GUI is not available. Anyway...\n\nIt contains the configure options:\n\nMOZ_AUTOMATION=1 --enable-update-channel=nightly MOZILLA_OFFICIAL=1 MOZ_PGO=1 CC=/builds/worker/workspace/build/src/gcc/bin/gcc CXX=/builds/worker/workspace/build/src/gcc/bin/g++ MOZ_STDCXX_COMPAT=1 --enable-js-shell RUSTC=/builds/worker/workspace/build/src/rustc/bin/rustc CARGO=/builds/worker/workspace/build/src/rustc/bin/cargo --with-mozilla-api-keyfile=/builds/mozilla-desktop-geoloc-api.key --with-google-api-keyfile=/builds/gapi.data LLVM_CONFIG=/builds/worker/workspace/build/src/clang/bin/llvm-config --enable-rust-simd MAKE=/usr/bin/make --enable-crashreporter --enable-verify-mar --with-branding=browser/branding/nightly\n\nBut I am not able to use that info for determining whether the Wayland support is built-in or not."}, {"creator": "jhorak@redhat.com", "raw_text": "(In reply to pbasista from comment #89)\n> Does the current Nightly ship with Wayland support enabled already? I have\n> tried it just now, but it does not seem to work:\n> \nNo, it doesn't. You need to add --enable-default-toolkit=cairo-gtk3-wayland to the build options to do so.", "attachment_id": null, "tags": [], "creation_time": "2018-02-08T13:20:09Z", "text": "(In reply to pbasista from comment #89)\n> Does the current Nightly ship with Wayland support enabled already? I have\n> tried it just now, but it does not seem to work:\n> \nNo, it doesn't. You need to add --enable-default-toolkit=cairo-gtk3-wayland to the build options to do so.", "bug_id": 635134, "count": 92, "author": "jhorak@redhat.com", "time": "2018-02-08T13:20:09Z", "is_private": false, "id": 13027437}, {"id": 13027546, "author": "pbasista@gmail.com", "is_private": false, "bug_id": 635134, "attachment_id": null, "creation_time": "2018-02-08T14:13:46Z", "tags": [], "count": 93, "time": "2018-02-08T14:13:46Z", "text": "(In reply to Jan Horak [:jhorak] from comment #92)\n> (In reply to pbasista from comment #89)\n> > Does the current Nightly ship with Wayland support enabled already? I have\n> > tried it just now, but it does not seem to work:\n> > \n> No, it doesn't. You need to add --enable-default-toolkit=cairo-gtk3-wayland\n> to the build options to do so.\nOk, thanks. Do you know why it has not been enabled?\n\nBTW, how can one, in general, verify whether a particular build-time configuration option is currently used for building the official Nightly binaries?", "creator": "pbasista@gmail.com", "raw_text": "(In reply to Jan Horak [:jhorak] from comment #92)\n> (In reply to pbasista from comment #89)\n> > Does the current Nightly ship with Wayland support enabled already? I have\n> > tried it just now, but it does not seem to work:\n> > \n> No, it doesn't. You need to add --enable-default-toolkit=cairo-gtk3-wayland\n> to the build options to do so.\nOk, thanks. Do you know why it has not been enabled?\n\nBTW, how can one, in general, verify whether a particular build-time configuration option is currently used for building the official Nightly binaries?"}, {"bug_id": 635134, "text": "(In reply to pbasista from comment #93)\n> Ok, thanks. Do you know why it has not been enabled?\n\nBecause there are 14 open bugs that block this one. You can see them at the top right on the Dependency list.\n \n> BTW, how can one, in general, verify whether a particular build-time\n> configuration option is currently used for building the official Nightly\n> binaries?\n\nabout:buildconfig shows you the options.", "creation_time": "2018-02-08T17:16:52Z", "tags": [], "attachment_id": null, "raw_text": "(In reply to pbasista from comment #93)\n> Ok, thanks. Do you know why it has not been enabled?\n\nBecause there are 14 open bugs that block this one. You can see them at the top right on the Dependency list.\n \n> BTW, how can one, in general, verify whether a particular build-time\n> configuration option is currently used for building the official Nightly\n> binaries?\n\nabout:buildconfig shows you the options.", "creator": "zibi@braniecki.net", "id": 13028080, "is_private": false, "author": "zibi@braniecki.net", "time": "2018-02-08T17:16:52Z", "count": 94}, {"id": 13029123, "count": 95, "author": "mail@rainer-finke.de", "time": "2018-02-08T22:55:42Z", "is_private": false, "text": "On Plasma 5.12 on Wayland only a blank page is rendered, mouse input is not accepted and the mouse cursor is invisible.", "bug_id": 635134, "creator": "mail@rainer-finke.de", "raw_text": "On Plasma 5.12 on Wayland only a blank page is rendered, mouse input is not accepted and the mouse cursor is invisible.", "attachment_id": null, "tags": [], "creation_time": "2018-02-08T22:55:42Z"}, {"is_private": false, "author": "pbasista@gmail.com", "id": 13031654, "creation_time": "2018-02-09T20:20:04Z", "tags": [], "attachment_id": null, "bug_id": 635134, "time": "2018-02-09T20:20:04Z", "count": 96, "raw_text": "I have just tried a custom build of Firefox Nightly on Wayland, with no additional custom configure options, and it works more or less fine in Gnome 3 on a non-hidpi display (from what I could see). In Weston, there are some strange issues:\n\n1. Unable to click on any main menu item (Add-ons, Preferences, Customize) or buttons in the pop-up dialogs (e.g. to confirm installation of an add-on). Trying to \"click\" the highlighted option by pressing Enter does not seem to have any effect either.\n2. Crash when switching YouTube from fullscreen back to normal mode.\n\nThere is still no opengl compositing on Linux, which is unfortunate, because of a massive positive impact it would have - i.e. a \"smooth\" user experience.\n\nBut the fact that Wayland part seems to be on its way to work fine is definitely great.", "creator": "pbasista@gmail.com", "text": "I have just tried a custom build of Firefox Nightly on Wayland, with no additional custom configure options, and it works more or less fine in Gnome 3 on a non-hidpi display (from what I could see). In Weston, there are some strange issues:\n\n1. Unable to click on any main menu item (Add-ons, Preferences, Customize) or buttons in the pop-up dialogs (e.g. to confirm installation of an add-on). Trying to \"click\" the highlighted option by pressing Enter does not seem to have any effect either.\n2. Crash when switching YouTube from fullscreen back to normal mode.\n\nThere is still no opengl compositing on Linux, which is unfortunate, because of a massive positive impact it would have - i.e. a \"smooth\" user experience.\n\nBut the fact that Wayland part seems to be on its way to work fine is definitely great."}, {"text": "Yeah, about OpenGL compositing (and WebGL, and WebRender). That needs Wayland-EGL support.\n\nLooks like the first problem is that EGL initialization is called with EGL_DEFAULT_DISPLAY instead of a wl_display. I've attempted to fix that: https://gist.github.com/myfreeweb/99f2df1a29652c0b75f2799e4b1aad38 but that's not enough. A wl_egl_window should be created to render EGL to a surface. I'm not familiar with Firefox code at all, so I couldn't make all that stuff work.", "raw_text": "Yeah, about OpenGL compositing (and WebGL, and WebRender). That needs Wayland-EGL support.\n\nLooks like the first problem is that EGL initialization is called with EGL_DEFAULT_DISPLAY instead of a wl_display. I've attempted to fix that: https://gist.github.com/myfreeweb/99f2df1a29652c0b75f2799e4b1aad38 but that's not enough. A wl_egl_window should be created to render EGL to a surface. I'm not familiar with Firefox code at all, so I couldn't make all that stuff work.", "creator": "greg@unrelenting.technology", "time": "2018-02-09T21:45:47Z", "count": 97, "bug_id": 635134, "creation_time": "2018-02-09T21:45:47Z", "tags": [], "attachment_id": null, "id": 13031900, "is_private": false, "author": "greg@unrelenting.technology"}, {"raw_text": "(In reply to greg from comment #97)\n> Yeah, about OpenGL compositing (and WebGL, and WebRender). That needs\n> Wayland-EGL support.\n> \n> Looks like the first problem is that EGL initialization is called with\n> EGL_DEFAULT_DISPLAY instead of a wl_display. I've attempted to fix that:\n> https://gist.github.com/myfreeweb/99f2df1a29652c0b75f2799e4b1aad38 but\n> that's not enough. A wl_egl_window should be created to render EGL to a\n> surface. I'm not familiar with Firefox code at all, so I couldn't make all\n> that stuff work.\n\nCan you please file a new bug for it? To have it properly tracked.", "creator": "stransky@redhat.com", "text": "(In reply to greg from comment #97)\n> Yeah, about OpenGL compositing (and WebGL, and WebRender). That needs\n> Wayland-EGL support.\n> \n> Looks like the first problem is that EGL initialization is called with\n> EGL_DEFAULT_DISPLAY instead of a wl_display. I've attempted to fix that:\n> https://gist.github.com/myfreeweb/99f2df1a29652c0b75f2799e4b1aad38 but\n> that's not enough. A wl_egl_window should be created to render EGL to a\n> surface. I'm not familiar with Firefox code at all, so I couldn't make all\n> that stuff work.\n\nCan you please file a new bug for it? To have it properly tracked.", "time": "2018-02-14T11:06:35Z", "count": 98, "tags": [], "creation_time": "2018-02-14T11:06:35Z", "attachment_id": null, "bug_id": 635134, "is_private": false, "author": "stransky@redhat.com", "id": 13041202}, {"raw_text": "Any updates on bug 1438144 and bug 1429717?", "creator": "greg@unrelenting.technology", "text": "Any updates on bug 1438144 and bug 1429717?", "time": "2018-03-07T14:36:31Z", "count": 99, "tags": [], "creation_time": "2018-03-07T14:36:31Z", "attachment_id": null, "bug_id": 635134, "is_private": false, "author": "greg@unrelenting.technology", "id": 13110985}, {"bug_id": 635134, "text": "hm, after recent changes, my build fails with '/usr/bin/ld: error: undefined symbol: mozilla::gl::sGLXLibrary'", "tags": [], "creation_time": "2018-05-27T13:47:03Z", "attachment_id": null, "raw_text": "hm, after recent changes, my build fails with '/usr/bin/ld: error: undefined symbol: mozilla::gl::sGLXLibrary'", "creator": "greg@unrelenting.technology", "id": 13366579, "is_private": false, "author": "greg@unrelenting.technology", "time": "2018-05-27T13:47:03Z", "count": 100}, {"is_private": false, "author": "david@ixit.cz", "time": "2018-05-27T18:39:40Z", "count": 101, "id": 13366745, "tags": [], "creation_time": "2018-05-27T18:39:40Z", "attachment_id": null, "raw_text": "@greg Confirming, same issue.", "creator": "david@ixit.cz", "bug_id": 635134, "text": "@greg Confirming, same issue."}, {"time": "2018-05-27T18:41:07Z", "author": "david@ixit.cz", "count": 102, "is_private": false, "id": 13366748, "raw_text": "", "creator": "david@ixit.cz", "tags": [], "creation_time": "2018-05-27T18:41:07Z", "attachment_id": null, "text": "*** Bug 1464692 has been marked as a duplicate of this bug. ***", "bug_id": 635134}, {"id": 13368655, "author": "stransky@redhat.com", "is_private": false, "bug_id": 635134, "tags": [], "creation_time": "2018-05-28T08:34:30Z", "attachment_id": null, "time": "2018-05-28T08:34:30Z", "count": 103, "text": "(In reply to greg from comment #100)\n> hm, after recent changes, my build fails with '/usr/bin/ld: error: undefined\n> symbol: mozilla::gl::sGLXLibrary'\n\nThat's because missing patches from Bug 1460255 - I'll post updated ones there.", "raw_text": "(In reply to greg from comment #100)\n> hm, after recent changes, my build fails with '/usr/bin/ld: error: undefined\n> symbol: mozilla::gl::sGLXLibrary'\n\nThat's because missing patches from Bug 1460255 - I'll post updated ones there.", "creator": "stransky@redhat.com"}, {"creator": "hertzog@debian.org", "raw_text": "Hi, I'm not sure where to report it, but since a few days ago visiting maps.google.com with Firefox 60.0.2 on Linux (Debian unstable of today, Linux 4.16.16-2) under Wayland (1.15.0-2, xwayland 1.20.0-2) crashes Firefox and my whole computer with it. There's nothing in logs written to disk during this crash. I would have to setup some remote logging to have a chance to see something. This is on a laptop with an Intel video controller.", "attachment_id": null, "tags": [], "creation_time": "2018-06-27T20:38:33Z", "text": "Hi, I'm not sure where to report it, but since a few days ago visiting maps.google.com with Firefox 60.0.2 on Linux (Debian unstable of today, Linux 4.16.16-2) under Wayland (1.15.0-2, xwayland 1.20.0-2) crashes Firefox and my whole computer with it. There's nothing in logs written to disk during this crash. I would have to setup some remote logging to have a chance to see something. This is on a laptop with an Intel video controller.", "bug_id": 635134, "count": 104, "time": "2018-06-27T20:38:33Z", "author": "hertzog@debian.org", "is_private": false, "id": 13431535}, {"bug_id": 635134, "attachment_id": null, "tags": [], "creation_time": "2018-06-27T20:41:48Z", "id": 13431542, "author": "grayshade@gmail.com", "is_private": false, "text": "@Rapha\u00ebl Hertzog Can you check if there's anything in about:crashes?\n\nYou should probably look for, or file a new issue for this.", "creator": "grayshade@gmail.com", "raw_text": "@Rapha\u00ebl Hertzog Can you check if there's anything in about:crashes?\n\nYou should probably look for, or file a new issue for this.", "count": 105, "time": "2018-06-27T20:41:48Z"}, {"id": 13440309, "is_private": false, "author": "rbf@castyour.net", "time": "2018-06-30T23:02:36Z", "count": 106, "bug_id": 635134, "text": "##### begin offtopic to this thread #####\n\n@Raphael, Hertzog, you've hit an xwayland mesa bug.  Here is the bug I filed against mozilla https://bugzilla.mozilla.org/show_bug.cgi?id=1468930, but it's not firefox's problem, they are just triggering it.\n\nThe real issue was found and is already fixed in arch and Redhat linux.\nhttps://bugzilla.redhat.com/show_bug.cgi?id=1579067\n\nDebian users are hitting the bug:\nhttps://bugs.debian.org/cgi-bin/bugreport.cgi?bug=901928\nhttps://bugs.debian.org/cgi-bin/bugreport.cgi?bug=901883\nhttps://bugs.debian.org/cgi-bin/bugreport.cgi?bug=901497\n\nTo fix someone at Debian X-strikeforce has to also patch xwayland and rebuild.  Looks like that just happened:\nhttps://salsa.debian.org/xorg-team/xserver/xorg-server/merge_requests/2\nThe changes have been built but have not yet been pushed into the unstable repo yet though as of when I just checked. It should be something like 1.20.0-3 when someone pushes it.\n\nIf you are antsy, or dont want to run Chrome for a couple days, or don't want to switch back to X.org without wayland for a couple days, you CAN learn how to build the debian X.org packages after applying the two needed patches using deb-src (that's what I am running the last few days, and no crashes).  It's not really that hard, like 4 terminal commands.\n\n###### end offtopic to this thread #####", "tags": [], "creation_time": "2018-06-30T23:02:36Z", "attachment_id": null, "raw_text": "##### begin offtopic to this thread #####\n\n@Raphael, Hertzog, you've hit an xwayland mesa bug.  Here is the bug I filed against mozilla https://bugzilla.mozilla.org/show_bug.cgi?id=1468930, but it's not firefox's problem, they are just triggering it.\n\nThe real issue was found and is already fixed in arch and Redhat linux.\nhttps://bugzilla.redhat.com/show_bug.cgi?id=1579067\n\nDebian users are hitting the bug:\nhttps://bugs.debian.org/cgi-bin/bugreport.cgi?bug=901928\nhttps://bugs.debian.org/cgi-bin/bugreport.cgi?bug=901883\nhttps://bugs.debian.org/cgi-bin/bugreport.cgi?bug=901497\n\nTo fix someone at Debian X-strikeforce has to also patch xwayland and rebuild.  Looks like that just happened:\nhttps://salsa.debian.org/xorg-team/xserver/xorg-server/merge_requests/2\nThe changes have been built but have not yet been pushed into the unstable repo yet though as of when I just checked. It should be something like 1.20.0-3 when someone pushes it.\n\nIf you are antsy, or dont want to run Chrome for a couple days, or don't want to switch back to X.org without wayland for a couple days, you CAN learn how to build the debian X.org packages after applying the two needed patches using deb-src (that's what I am running the last few days, and no crashes).  It's not really that hard, like 4 terminal commands.\n\n###### end offtopic to this thread #####", "creator": "rbf@castyour.net"}, {"is_private": false, "author": "hdevalence@hdevalence.ca", "time": "2018-07-02T20:36:01Z", "count": 107, "id": 13444354, "tags": [], "creation_time": "2018-07-02T20:36:01Z", "attachment_id": null, "raw_text": "Hi, thanks to everyone who has been working on this feature.\n\nAs far as I can tell from reading the bug comments, the current state is that (preliminary) Wayland support has been merged into the source tree but is not enabled on Nightly builds. What would have to happen to enable this feature in Nightly builds? Is there a plan to do so in the near future, or is that a longer-term item?", "creator": "hdevalence@hdevalence.ca", "bug_id": 635134, "text": "Hi, thanks to everyone who has been working on this feature.\n\nAs far as I can tell from reading the bug comments, the current state is that (preliminary) Wayland support has been merged into the source tree but is not enabled on Nightly builds. What would have to happen to enable this feature in Nightly builds? Is there a plan to do so in the near future, or is that a longer-term item?"}, {"is_private": false, "author": "greg@unrelenting.technology", "id": 13444696, "creation_time": "2018-07-02T22:42:16Z", "tags": [], "attachment_id": null, "bug_id": 635134, "time": "2018-07-02T22:42:16Z", "count": 108, "raw_text": "@hdevalence I'm pretty sure it's been enabled by default in Nightly since bug 1460255 landed. I used to have 'ac_add_options --with-gl-provider=EGL' in .mozconfig, but I've commented it out a while ago and and rebuilt many times and Wayland support does work.", "creator": "greg@unrelenting.technology", "text": "@hdevalence I'm pretty sure it's been enabled by default in Nightly since bug 1460255 landed. I used to have 'ac_add_options --with-gl-provider=EGL' in .mozconfig, but I've commented it out a while ago and and rebuilt many times and Wayland support does work."}, {"raw_text": "@greg I don't think so. The nightlies are still using Xwayland.", "creator": "grayshade@gmail.com", "tags": [], "creation_time": "2018-07-03T05:48:12Z", "attachment_id": null, "text": "@greg I don't think so. The nightlies are still using Xwayland.", "bug_id": 635134, "time": "2018-07-03T05:48:12Z", "author": "grayshade@gmail.com", "count": 109, "is_private": false, "id": 13445138}, {"id": 13445165, "count": 110, "time": "2018-07-03T06:07:43Z", "author": "stransky@redhat.com", "is_private": false, "text": "(In reply to hdevalence from comment #107)\n> Hi, thanks to everyone who has been working on this feature.\n> \n> As far as I can tell from reading the bug comments, the current state is\n> that (preliminary) Wayland support has been merged into the source tree but\n> is not enabled on Nightly builds. What would have to happen to enable this\n> feature in Nightly builds? Is there a plan to do so in the near future, or\n> is that a longer-term item?\n\nThat's a good question, IMHO there are still some outstanding issues which need to be fixed first, for instance Bug 1430775 Bug 1431399 Bug 1466295 Bug 1466444 Bug 1467132 Bug 1468911 Bug 1470047", "bug_id": 635134, "creator": "stransky@redhat.com", "raw_text": "(In reply to hdevalence from comment #107)\n> Hi, thanks to everyone who has been working on this feature.\n> \n> As far as I can tell from reading the bug comments, the current state is\n> that (preliminary) Wayland support has been merged into the source tree but\n> is not enabled on Nightly builds. What would have to happen to enable this\n> feature in Nightly builds? Is there a plan to do so in the near future, or\n> is that a longer-term item?\n\nThat's a good question, IMHO there are still some outstanding issues which need to be fixed first, for instance Bug 1430775 Bug 1431399 Bug 1466295 Bug 1466444 Bug 1467132 Bug 1468911 Bug 1470047", "attachment_id": null, "creation_time": "2018-07-03T06:07:43Z", "tags": []}, {"id": 13445279, "count": 111, "time": "2018-07-03T07:48:16Z", "author": "mail@rainer-finke.de", "is_private": false, "text": "@Martin: As long as the the normal Nightly builds are not are not providing Wayland, can we continue to use the Nightly builds from https://firefox-flatpak.mojefedora.cz/? I had the feeling my flatpak build (org.mozilla.FirefoxNightly) didn't get updated anymore, but this could be an issue on my end. From my point of view as a normal user I don't see features like WebRTC, which is still WIP in Gnome and KDE, as essential for providing Wayland with the normal builds, some limitations are expected. Thanks", "bug_id": 635134, "creator": "mail@rainer-finke.de", "raw_text": "@Martin: As long as the the normal Nightly builds are not are not providing Wayland, can we continue to use the Nightly builds from https://firefox-flatpak.mojefedora.cz/? I had the feeling my flatpak build (org.mozilla.FirefoxNightly) didn't get updated anymore, but this could be an issue on my end. From my point of view as a normal user I don't see features like WebRTC, which is still WIP in Gnome and KDE, as essential for providing Wayland with the normal builds, some limitations are expected. Thanks", "attachment_id": null, "tags": [], "creation_time": "2018-07-03T07:48:16Z"}, {"author": "stransky@redhat.com", "is_private": false, "id": 13445341, "attachment_id": null, "tags": [], "creation_time": "2018-07-03T08:38:24Z", "bug_id": 635134, "count": 112, "time": "2018-07-03T08:38:24Z", "creator": "stransky@redhat.com", "raw_text": "(In reply to rainer from comment #111)\n> @Martin: As long as the the normal Nightly builds are not are not providing\n> Wayland, can we continue to use the Nightly builds from\n> https://firefox-flatpak.mojefedora.cz/? I had the feeling my flatpak build\n> (org.mozilla.FirefoxNightly) didn't get updated anymore, but this could be\n\nFlatpak at https://firefox-flatpak.mojefedora.cz/ is active and should be updated, I'll check that. Also Fedora provides Wayland enabled Firefox as an option by firefox-wayland package.", "text": "(In reply to rainer from comment #111)\n> @Martin: As long as the the normal Nightly builds are not are not providing\n> Wayland, can we continue to use the Nightly builds from\n> https://firefox-flatpak.mojefedora.cz/? I had the feeling my flatpak build\n> (org.mozilla.FirefoxNightly) didn't get updated anymore, but this could be\n\nFlatpak at https://firefox-flatpak.mojefedora.cz/ is active and should be updated, I'll check that. Also Fedora provides Wayland enabled Firefox as an option by firefox-wayland package."}, {"text": "Mark one more vote from me for going ahead and building nightly with Wayland support -- behind a commandline switch of course at first.  Most linux users are capable of setting and environment variable, or typing a commandline switch, but even most experienced users are going to balk at building firefox themselves because of the build environment complexity.  Jumping over to a second install via flatpack is a possible solution, but you'd get a lot more testing by letting the whole Nightly community opt in when they want to.  After all, the idea with Nightly is the ability to help with the latest features, and getting the new code every day.  I'd join the testing team then.", "creator": "rbf@castyour.net", "raw_text": "Mark one more vote from me for going ahead and building nightly with Wayland support -- behind a commandline switch of course at first.  Most linux users are capable of setting and environment variable, or typing a commandline switch, but even most experienced users are going to balk at building firefox themselves because of the build environment complexity.  Jumping over to a second install via flatpack is a possible solution, but you'd get a lot more testing by letting the whole Nightly community opt in when they want to.  After all, the idea with Nightly is the ability to help with the latest features, and getting the new code every day.  I'd join the testing team then.", "count": 113, "time": "2018-07-03T09:34:41Z", "bug_id": 635134, "attachment_id": null, "creation_time": "2018-07-03T09:34:41Z", "tags": [], "id": 13445475, "author": "rbf@castyour.net", "is_private": false}, {"time": "2018-07-03T09:58:31Z", "count": 114, "raw_text": "Not sure if this would be feasible at all, but how about a flag that can be easily set under about:config and gets checked for at startup? If I understand correctly this will be the eventual goal anyway, to check on startup whether Wayland is available or not and then accordingly start either with Xorg or Wayland backend.", "creator": "pe44@gmx.de", "text": "Not sure if this would be feasible at all, but how about a flag that can be easily set under about:config and gets checked for at startup? If I understand correctly this will be the eventual goal anyway, to check on startup whether Wayland is available or not and then accordingly start either with Xorg or Wayland backend.", "is_private": false, "author": "pe44@gmx.de", "id": 13445507, "creation_time": "2018-07-03T09:58:31Z", "tags": [], "attachment_id": null, "bug_id": 635134}, {"bug_id": 635134, "attachment_id": null, "tags": [], "creation_time": "2018-07-03T16:44:16Z", "id": 13446386, "is_private": false, "author": "maggu2810@gmail.com", "text": "Do we really need a new option that needs to be set in \"about:config\"? Why not rely on XDG_SESSION_TYPE and a simple logic to use a fallback if this environment variable is not set...", "creator": "maggu2810@gmail.com", "raw_text": "Do we really need a new option that needs to be set in \"about:config\"? Why not rely on XDG_SESSION_TYPE and a simple logic to use a fallback if this environment variable is not set...", "count": 115, "time": "2018-07-03T16:44:16Z"}, {"id": 13446398, "is_private": false, "author": "mail@rainer-finke.de", "bug_id": 635134, "creation_time": "2018-07-03T16:48:31Z", "tags": [], "attachment_id": null, "time": "2018-07-03T16:48:31Z", "count": 116, "text": "Not sure if I make something wrong, but my Firefox-nightly flatpak is not getting updated anymore.\n$ flatpak run org.mozilla.FirefoxNightly -v\nMozilla Firefox 62.0a1", "raw_text": "Not sure if I make something wrong, but my Firefox-nightly flatpak is not getting updated anymore.\n$ flatpak run org.mozilla.FirefoxNightly -v\nMozilla Firefox 62.0a1", "creator": "mail@rainer-finke.de"}, {"id": 13446529, "is_private": false, "author": "moz@genodeftest.de", "bug_id": 635134, "attachment_id": null, "creation_time": "2018-07-03T17:47:09Z", "tags": [], "count": 117, "time": "2018-07-03T17:47:09Z", "text": "(In reply to Markus Rathgeb from comment #115)\n> Do we really need a new option that needs to be set in \"about:config\"? Why\n> not rely on XDG_SESSION_TYPE and a simple logic to use a fallback if this\n> environment variable is not set...\n\nMaybe because it's too experimental to be enabled in nightly by default?\n\n(In reply to rainer from comment #116)\n> Not sure if I make something wrong, but my Firefox-nightly flatpak is not\n> getting updated anymore.\n> $ flatpak run org.mozilla.FirefoxNightly -v\n> Mozilla Firefox 62.0a1\n\nSee comment #112. The nightly repo hasn't seen regular builds in a while.", "creator": "moz@genodeftest.de", "raw_text": "(In reply to Markus Rathgeb from comment #115)\n> Do we really need a new option that needs to be set in \"about:config\"? Why\n> not rely on XDG_SESSION_TYPE and a simple logic to use a fallback if this\n> environment variable is not set...\n\nMaybe because it's too experimental to be enabled in nightly by default?\n\n(In reply to rainer from comment #116)\n> Not sure if I make something wrong, but my Firefox-nightly flatpak is not\n> getting updated anymore.\n> $ flatpak run org.mozilla.FirefoxNightly -v\n> Mozilla Firefox 62.0a1\n\nSee comment #112. The nightly repo hasn't seen regular builds in a while."}, {"bug_id": 635134, "attachment_id": null, "tags": [], "creation_time": "2018-07-03T18:49:22Z", "id": 13446694, "author": "rbf@castyour.net", "is_private": false, "text": "would love just setting XDG_SESSION_TYPE to try the pure wayland builds.", "creator": "rbf@castyour.net", "raw_text": "would love just setting XDG_SESSION_TYPE to try the pure wayland builds.", "count": 118, "time": "2018-07-03T18:49:22Z"}, {"is_private": false, "time": "2018-07-04T09:17:48Z", "author": "pe44@gmx.de", "count": 119, "id": 13448010, "creation_time": "2018-07-04T09:17:48Z", "tags": [], "attachment_id": null, "raw_text": "(In reply to Christian Stadelmann from comment #117)\n> Maybe because it's too experimental to be enabled in nightly by default?\nYes, that was the thought process. Using XDG_SESSION_TYPE would make it the default for everyone running a Wayland session, which reasonably does not seem to be desired according to comment #110. However more people can be reached, since it is (even) simpler than installing the flatpak version.", "creator": "pe44@gmx.de", "bug_id": 635134, "text": "(In reply to Christian Stadelmann from comment #117)\n> Maybe because it's too experimental to be enabled in nightly by default?\nYes, that was the thought process. Using XDG_SESSION_TYPE would make it the default for everyone running a Wayland session, which reasonably does not seem to be desired according to comment #110. However more people can be reached, since it is (even) simpler than installing the flatpak version."}, {"text": "ah, well then let's make it a commandline switch or a different variable untill the feature is stable.", "creator": "rbf@castyour.net", "raw_text": "ah, well then let's make it a commandline switch or a different variable untill the feature is stable.", "count": 120, "time": "2018-07-05T19:45:31Z", "bug_id": 635134, "attachment_id": null, "creation_time": "2018-07-05T19:45:31Z", "tags": [], "id": 13451461, "author": "rbf@castyour.net", "is_private": false}, {"time": "2018-07-07T14:20:44Z", "count": 121, "raw_text": "As the flatpak builds are quite outdated, I would welcome if Firefox-nightly would provide Wayland support by default for testing. I don't think that there is a need for any other switch than what is used by Gtk other applications. Something like \"GDK_BACKEND=wayland firefox-nightly\" or \"GDK_BACKEND=x11 firefox-nightly\" should be enough.", "creator": "mail@rainer-finke.de", "text": "As the flatpak builds are quite outdated, I would welcome if Firefox-nightly would provide Wayland support by default for testing. I don't think that there is a need for any other switch than what is used by Gtk other applications. Something like \"GDK_BACKEND=wayland firefox-nightly\" or \"GDK_BACKEND=x11 firefox-nightly\" should be enough.", "author": "mail@rainer-finke.de", "is_private": false, "id": 13454810, "creation_time": "2018-07-07T14:20:44Z", "tags": [], "attachment_id": null, "bug_id": 635134}, {"time": "2018-07-13T11:14:09Z", "count": 122, "raw_text": "I'd like to reference #1474281 as blocker, as we shouldn't turn on the wayland-backend by default before it is tackled.", "creator": "robert.mader@posteo.de", "text": "I'd like to reference #1474281 as blocker, as we shouldn't turn on the wayland-backend by default before it is tackled.", "is_private": false, "author": "robert.mader@posteo.de", "id": 13468734, "creation_time": "2018-07-13T11:14:09Z", "tags": [], "attachment_id": null, "bug_id": 635134}, {"id": 13487330, "is_private": false, "author": "mihailescu2m@gmail.com", "bug_id": 635134, "creation_time": "2018-07-22T01:43:11Z", "tags": [], "attachment_id": null, "time": "2018-07-22T01:43:11Z", "count": 123, "text": "Anyone else getting similar crashes?\n\n#0  0xb5001282 in get_window_target_buffer () at /usr/lib/arm-linux-gnueabihf/libwayland-egl.so.1\n#1  0xb4ff8cf4 in eglp_window_next_render_target () at /usr/lib/arm-linux-gnueabihf/libwayland-egl.so.1\n#2  0xb4ff8f6c in eglp_first_operation_cb () at /usr/lib/arm-linux-gnueabihf/libwayland-egl.so.1\n#3  0xb5019522 in gles_fbp_prepare_to_render () at /usr/lib/arm-linux-gnueabihf/libwayland-egl.so.1\n#4  0xb501c3e4 in gles_fbp_clear () at /usr/lib/arm-linux-gnueabihf/libwayland-egl.so.1\n#5  0xb50171a2 in gles_fb_clear () at /usr/lib/arm-linux-gnueabihf/libwayland-egl.so.1\n#6  0xb12da900 in mozilla::layers::CompositorOGL::BeginFrame(mozilla::gfx::IntRegionTyped<mozilla::gfx::UnknownUnits> const&, mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits> const*, mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits> const&, mozilla::gfx::IntRegionTyped<mozilla::gfx::UnknownUnits> const&, mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits>*, mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits>*) () at /mnt/disk1/src/firefox-62.0/debian/tmp/usr/lib/firefox/libxul.so\n#7  0xb12da6f0 in mozilla::layers::CompositorOGL::BeginFrame(mozilla::gfx::IntRegionTyped<mozilla::gfx::UnknownUnits> const&, mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits> const*, mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits> const&, mozilla::gfx::IntRegionTyped<mozilla::gfx::UnknownUnits> const&, mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits>*, mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits>*) () at /mnt/disk1/src/firefox-62.0/debian/tmp/usr/lib/firefox/libxul.so\n#8  0xb1369670 in mozilla::layers::LayerManagerComposite::Render(mozilla::gfx::IntRegionTyped<mozilla::gfx::UnknownUnits> const&, mozilla::gfx::IntRegionTyped<mozilla::gfx::UnknownUnits> const&) () at /mnt/disk1/src/firefox-62.0/debian/tmp/usr/lib/firefox/libxul.so\n#9  0x00000000 in  ()\n\nfirefox 62, armhf, mali T628 drivers r12p0", "raw_text": "Anyone else getting similar crashes?\n\n#0  0xb5001282 in get_window_target_buffer () at /usr/lib/arm-linux-gnueabihf/libwayland-egl.so.1\n#1  0xb4ff8cf4 in eglp_window_next_render_target () at /usr/lib/arm-linux-gnueabihf/libwayland-egl.so.1\n#2  0xb4ff8f6c in eglp_first_operation_cb () at /usr/lib/arm-linux-gnueabihf/libwayland-egl.so.1\n#3  0xb5019522 in gles_fbp_prepare_to_render () at /usr/lib/arm-linux-gnueabihf/libwayland-egl.so.1\n#4  0xb501c3e4 in gles_fbp_clear () at /usr/lib/arm-linux-gnueabihf/libwayland-egl.so.1\n#5  0xb50171a2 in gles_fb_clear () at /usr/lib/arm-linux-gnueabihf/libwayland-egl.so.1\n#6  0xb12da900 in mozilla::layers::CompositorOGL::BeginFrame(mozilla::gfx::IntRegionTyped<mozilla::gfx::UnknownUnits> const&, mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits> const*, mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits> const&, mozilla::gfx::IntRegionTyped<mozilla::gfx::UnknownUnits> const&, mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits>*, mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits>*) () at /mnt/disk1/src/firefox-62.0/debian/tmp/usr/lib/firefox/libxul.so\n#7  0xb12da6f0 in mozilla::layers::CompositorOGL::BeginFrame(mozilla::gfx::IntRegionTyped<mozilla::gfx::UnknownUnits> const&, mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits> const*, mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits> const&, mozilla::gfx::IntRegionTyped<mozilla::gfx::UnknownUnits> const&, mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits>*, mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits>*) () at /mnt/disk1/src/firefox-62.0/debian/tmp/usr/lib/firefox/libxul.so\n#8  0xb1369670 in mozilla::layers::LayerManagerComposite::Render(mozilla::gfx::IntRegionTyped<mozilla::gfx::UnknownUnits> const&, mozilla::gfx::IntRegionTyped<mozilla::gfx::UnknownUnits> const&) () at /mnt/disk1/src/firefox-62.0/debian/tmp/usr/lib/firefox/libxul.so\n#9  0x00000000 in  ()\n\nfirefox 62, armhf, mali T628 drivers r12p0", "creator": "mihailescu2m@gmail.com"}, {"id": 13487463, "author": "david@ixit.cz", "is_private": false, "bug_id": 635134, "tags": ["advocacy"], "creation_time": "2018-07-22T11:55:04Z", "attachment_id": null, "time": "2018-07-22T11:55:04Z", "count": 124, "text": "I'd expect that Mozilla dedicate at least one additional developer for Wayland support these days. It seems that Wayland quickly taking over Linux desktop..\n\nI must say, it generally works with Wayland, but still has some issues when using it on two 4K displays (Laptop and 34\" screen) where DPI is different. Other GNOME applications works flawlessly in these cases.\n\nAnyway, thank you for your good work Martin!", "raw_text": "I'd expect that Mozilla dedicate at least one additional developer for Wayland support these days. It seems that Wayland quickly taking over Linux desktop..\n\nI must say, it generally works with Wayland, but still has some issues when using it on two 4K displays (Laptop and 34\" screen) where DPI is different. Other GNOME applications works flawlessly in these cases.\n\nAnyway, thank you for your good work Martin!", "creator": "david@ixit.cz"}, {"id": 13487483, "is_private": false, "author": "barz621@gmail.com", "bug_id": 635134, "tags": ["advocacy"], "creation_time": "2018-07-22T13:42:45Z", "attachment_id": null, "time": "2018-07-22T13:42:45Z", "count": 125, "text": "(In reply to David Heidelberg from comment #124)\n> I'd expect that Mozilla dedicate at least one additional developer for\n> Wayland support these days. It seems that Wayland quickly taking over Linux\n> desktop..\n> \n> I must say, it generally works with Wayland, but still has some issues when\n> using it on two 4K displays (Laptop and 34\" screen) where DPI is different.\n> Other GNOME applications works flawlessly in these cases.\n> \n> Anyway, thank you for your good work Martin!\n\nMozilla doesn't care much about linux. All props to Red Hat which AFAIK employs Martin and Martin himself.", "raw_text": "(In reply to David Heidelberg from comment #124)\n> I'd expect that Mozilla dedicate at least one additional developer for\n> Wayland support these days. It seems that Wayland quickly taking over Linux\n> desktop..\n> \n> I must say, it generally works with Wayland, but still has some issues when\n> using it on two 4K displays (Laptop and 34\" screen) where DPI is different.\n> Other GNOME applications works flawlessly in these cases.\n> \n> Anyway, thank you for your good work Martin!\n\nMozilla doesn't care much about linux. All props to Red Hat which AFAIK employs Martin and Martin himself.", "creator": "barz621@gmail.com"}, {"creator": "greg@unrelenting.technology", "raw_text": "Anyone working on HiDPI+EGL support?", "text": "Anyone working on HiDPI+EGL support?", "count": 126, "time": "2018-11-02T22:15:05Z", "attachment_id": null, "tags": [], "creation_time": "2018-11-02T22:15:05Z", "bug_id": 635134, "is_private": false, "author": "greg@unrelenting.technology", "id": 13732181}, {"attachment_id": null, "creation_time": "2018-11-03T08:58:59Z", "tags": [], "bug_id": 635134, "author": "gashish4all@gmail.com", "is_private": false, "id": 13732472, "creator": "gashish4all@gmail.com", "raw_text": "(In reply to greg from comment #126)\n> Anyone working on HiDPI+EGL support?\n\nI have investigated to a issue with windows rendering. On HIDPI screens with enabled OGL compositor firefox displays one fourth of windows/popups only. Here my simple patch, which solve the issue https://gist.github.com/IShashkin/ad33a8fd55290065fabfcf174db3ebd5 But i need help with upstreaming the patch, because i'm new in a contributing to firefox.", "text": "(In reply to greg from comment #126)\n> Anyone working on HiDPI+EGL support?\n\nI have investigated to a issue with windows rendering. On HIDPI screens with enabled OGL compositor firefox displays one fourth of windows/popups only. Here my simple patch, which solve the issue https://gist.github.com/IShashkin/ad33a8fd55290065fabfcf174db3ebd5 But i need help with upstreaming the patch, because i'm new in a contributing to firefox.", "count": 127, "time": "2018-11-03T08:58:59Z"}, {"attachment_id": null, "creation_time": "2018-11-05T01:55:57Z", "tags": [], "creator": "ashie@clear-code.com", "raw_text": "> I have investigated to a issue with windows rendering. On HIDPI screens with enabled OGL compositor firefox displays one fourth of windows/popups only. Here my simple patch, which solve the issue https://gist.github.com/IShashkin/ad33a8fd55290065fabfcf174db3ebd5 \n\nGood Job!\n\n> But i need help with upstreaming the patch, because i'm new in a contributing to firefox.\n\nPlease read this:\n\n  https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Introduction\n\nProbably the first thing you need to do is finding or creating a bug for this issue.\nNext, attach your patch to the bug, or post it to Mozilla's Phabricator:\n\n  https://moz-conduit.readthedocs.io/en/latest/phabricator-user.html\n\nThen send a review request (assign a reviewer for the patch).\nProbably stransky or jhorak are suitable reviewers for this patch if you follow the precedent commits around this code.", "bug_id": 635134, "text": "> I have investigated to a issue with windows rendering. On HIDPI screens with enabled OGL compositor firefox displays one fourth of windows/popups only. Here my simple patch, which solve the issue https://gist.github.com/IShashkin/ad33a8fd55290065fabfcf174db3ebd5 \n\nGood Job!\n\n> But i need help with upstreaming the patch, because i'm new in a contributing to firefox.\n\nPlease read this:\n\n  https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Introduction\n\nProbably the first thing you need to do is finding or creating a bug for this issue.\nNext, attach your patch to the bug, or post it to Mozilla's Phabricator:\n\n  https://moz-conduit.readthedocs.io/en/latest/phabricator-user.html\n\nThen send a review request (assign a reviewer for the patch).\nProbably stransky or jhorak are suitable reviewers for this patch if you follow the precedent commits around this code.", "is_private": false, "count": 128, "author": "ashie@clear-code.com", "time": "2018-11-05T01:55:57Z", "id": 13733498}, {"bug_id": 635134, "attachment_id": null, "tags": [], "creation_time": "2018-11-05T11:00:15Z", "id": 13735111, "is_private": false, "author": "stransky@redhat.com", "text": "Sure, I'm keen to review it.", "creator": "stransky@redhat.com", "raw_text": "Sure, I'm keen to review it.", "count": 129, "time": "2018-11-05T11:00:15Z"}, {"author": "greg@unrelenting.technology", "is_private": false, "id": 13736940, "attachment_id": null, "creation_time": "2018-11-05T16:40:09Z", "tags": [], "bug_id": 635134, "count": 130, "time": "2018-11-05T16:40:09Z", "creator": "greg@unrelenting.technology", "raw_text": "(In reply to gashish4all from comment #127)\n> I have investigated to a issue with windows rendering. On HIDPI screens with\n> enabled OGL compositor firefox displays one fourth of windows/popups only.\n> Here my simple patch, which solve the issue\n> https://gist.github.com/IShashkin/ad33a8fd55290065fabfcf174db3ebd5 But i\n> need help with upstreaming the patch, because i'm new in a contributing to\n> firefox.\n\nThanks! Unfortunately it's still very buggy, especially with multiple monitors (one 1x scale, one 2x) and with popovers..", "text": "(In reply to gashish4all from comment #127)\n> I have investigated to a issue with windows rendering. On HIDPI screens with\n> enabled OGL compositor firefox displays one fourth of windows/popups only.\n> Here my simple patch, which solve the issue\n> https://gist.github.com/IShashkin/ad33a8fd55290065fabfcf174db3ebd5 But i\n> need help with upstreaming the patch, because i'm new in a contributing to\n> firefox.\n\nThanks! Unfortunately it's still very buggy, especially with multiple monitors (one 1x scale, one 2x) and with popovers.."}, {"is_private": false, "author": "gashish4all@gmail.com", "time": "2018-11-06T15:24:19Z", "count": 131, "id": 13739288, "tags": [], "creation_time": "2018-11-06T15:24:19Z", "attachment_id": null, "raw_text": "(In reply to Takuro Ashie [:ashie] from comment #128)\nThanks for the advice!\n\n(In reply to greg from comment #130)\n> Thanks! Unfortunately it's still very buggy, especially with multiple\n> monitors (one 1x scale, one 2x) and with popovers..\nOh, then i'll continue a debug of the issue.", "creator": "gashish4all@gmail.com", "bug_id": 635134, "text": "(In reply to Takuro Ashie [:ashie] from comment #128)\nThanks for the advice!\n\n(In reply to greg from comment #130)\n> Thanks! Unfortunately it's still very buggy, especially with multiple\n> monitors (one 1x scale, one 2x) and with popovers..\nOh, then i'll continue a debug of the issue."}, {"id": 13764583, "author": "rbf@castyour.net", "time": "2018-11-19T11:49:32Z", "count": 132, "is_private": false, "text": "Thanks, just saw https://www.phoronix.com/scan.php?page=news_item&px=Firefox-Nightly-Ships-Wayland and updated nightly, and set  GDK_BACKEND=wayland to try it.  So far everything works great, but how do I confirm that I am running under nativ Wayland?  xeyes for instance still moves its eyes when I hover the mouse, over nightly, so I am suspicious...", "bug_id": 635134, "raw_text": "Thanks, just saw https://www.phoronix.com/scan.php?page=news_item&px=Firefox-Nightly-Ships-Wayland and updated nightly, and set  GDK_BACKEND=wayland to try it.  So far everything works great, but how do I confirm that I am running under nativ Wayland?  xeyes for instance still moves its eyes when I hover the mouse, over nightly, so I am suspicious...", "creator": "rbf@castyour.net", "tags": [], "creation_time": "2018-11-19T11:49:32Z", "attachment_id": null}, {"bug_id": 635134, "creation_time": "2018-11-19T11:56:30Z", "tags": [], "attachment_id": null, "id": 13764590, "author": "rbf@castyour.net", "is_private": false, "text": "So to answer my own question, Got this from here:  https://glandium.org/blog/?p=3899\n\n\"To verify whether Wayland support is enabled, go to about:support, and check \u201cWebGL 1 Driver WSI Info\u201d and/or \u201cWebGL 2 Driver WSI Info\u201d. If they say something about GLX, Wayland support is not enabled. If they say something about EGL, it is. I filed a bug to make it more obvious what is being used.\"", "raw_text": "So to answer my own question, Got this from here:  https://glandium.org/blog/?p=3899\n\n\"To verify whether Wayland support is enabled, go to about:support, and check \u201cWebGL 1 Driver WSI Info\u201d and/or \u201cWebGL 2 Driver WSI Info\u201d. If they say something about GLX, Wayland support is not enabled. If they say something about EGL, it is. I filed a bug to make it more obvious what is being used.\"", "creator": "rbf@castyour.net", "time": "2018-11-19T11:56:30Z", "count": 133}, {"author": "stransky@redhat.com", "time": "2018-11-19T12:30:42Z", "count": 134, "is_private": false, "id": 13764620, "raw_text": "(In reply to yareckon from comment #133)\n> So to answer my own question, Got this from here: \n> https://glandium.org/blog/?p=3899\n> \n> \"To verify whether Wayland support is enabled, go to about:support, and\n> check \u201cWebGL 1 Driver WSI Info\u201d and/or \u201cWebGL 2 Driver WSI Info\u201d. If they\n> say something about GLX, Wayland support is not enabled. If they say\n> something about EGL, it is. I filed a bug to make it more obvious what is\n> being used.\"\n\nOn Wayland you'll see EGL_WL_bind_wayland_display or similar Wayland extensions available at about:support.", "creator": "stransky@redhat.com", "tags": [], "creation_time": "2018-11-19T12:30:42Z", "attachment_id": null, "text": "(In reply to yareckon from comment #133)\n> So to answer my own question, Got this from here: \n> https://glandium.org/blog/?p=3899\n> \n> \"To verify whether Wayland support is enabled, go to about:support, and\n> check \u201cWebGL 1 Driver WSI Info\u201d and/or \u201cWebGL 2 Driver WSI Info\u201d. If they\n> say something about GLX, Wayland support is not enabled. If they say\n> something about EGL, it is. I filed a bug to make it more obvious what is\n> being used.\"\n\nOn Wayland you'll see EGL_WL_bind_wayland_display or similar Wayland extensions available at about:support.", "bug_id": 635134}, {"count": 135, "author": "grayshade@gmail.com", "time": "2018-11-19T13:24:25Z", "is_private": false, "id": 13764710, "creator": "grayshade@gmail.com", "raw_text": "> how do I confirm that I am running under nativ Wayland\n\nIn Gnome Shell, you can press ALT-F2, type \"lg\", click on \"Windows\", look for Firefox, click on it, then check if the first line says MetaWindowWayland (good) or MetaWindowXwayland (bad).\n\nUnder Wayland you'll also notice that wheel scrolling is smoother (pixel instead of line-based).\n\n:stransky, is it possible that some part of Firefox makes XWayland start? I tried to run it, noticed the smoother scrolling, but didn't check what Gnome says about the window. I'm not going to use the Wayland support until it plays well with HW compositing.", "attachment_id": null, "creation_time": "2018-11-19T13:24:25Z", "tags": [], "text": "> how do I confirm that I am running under nativ Wayland\n\nIn Gnome Shell, you can press ALT-F2, type \"lg\", click on \"Windows\", look for Firefox, click on it, then check if the first line says MetaWindowWayland (good) or MetaWindowXwayland (bad).\n\nUnder Wayland you'll also notice that wheel scrolling is smoother (pixel instead of line-based).\n\n:stransky, is it possible that some part of Firefox makes XWayland start? I tried to run it, noticed the smoother scrolling, but didn't check what Gnome says about the window. I'm not going to use the Wayland support until it plays well with HW compositing.", "bug_id": 635134}, {"attachment_id": null, "tags": [], "creation_time": "2018-11-19T15:01:23Z", "bug_id": 635134, "author": "stransky@redhat.com", "is_private": false, "id": 13764893, "creator": "stransky@redhat.com", "raw_text": "(In reply to Laurentiu Nicola from comment #135)\n> :stransky, is it possible that some part of Firefox makes XWayland start? I\n> tried to run it, noticed the smoother scrolling, but didn't check what Gnome\n> says about the window. I'm not going to use the Wayland support until it\n> plays well with HW compositing.\n\nI guess flash-plugin would need that but you may have Xwayland by default, check your DISPLAY env variable. Wayland uses WAYLAND_DISPLAY.", "text": "(In reply to Laurentiu Nicola from comment #135)\n> :stransky, is it possible that some part of Firefox makes XWayland start? I\n> tried to run it, noticed the smoother scrolling, but didn't check what Gnome\n> says about the window. I'm not going to use the Wayland support until it\n> plays well with HW compositing.\n\nI guess flash-plugin would need that but you may have Xwayland by default, check your DISPLAY env variable. Wayland uses WAYLAND_DISPLAY.", "count": 136, "time": "2018-11-19T15:01:23Z"}, {"tags": [], "creation_time": "2018-11-19T15:10:29Z", "attachment_id": null, "raw_text": "> I'm not going to use the Wayland support until it plays well with HW compositing.\n\nbug 1474281 might help with that.", "creator": "robert.mader@posteo.de", "bug_id": 635134, "text": "> I'm not going to use the Wayland support until it plays well with HW compositing.\n\nbug 1474281 might help with that.", "is_private": false, "author": "robert.mader@posteo.de", "time": "2018-11-19T15:10:29Z", "count": 137, "id": 13764916}, {"author": "oigevald+mozilla@gmail.com", "time": "2018-11-19T19:07:09Z", "count": 138, "is_private": false, "id": 13766841, "raw_text": "(In reply to yareckon from comment #132)\n> Thanks, just saw\n> https://www.phoronix.com/scan.php?page=news_item&px=Firefox-Nightly-Ships-\n> Wayland and updated nightly, and set  GDK_BACKEND=wayland to try it.  So far\n> everything works great, but how do I confirm that I am running under nativ\n> Wayland?  xeyes for instance still moves its eyes when I hover the mouse,\n> over nightly, so I am suspicious...\n\nAnother way to differentiate - run xwininfo. You won't be able to click on Wayland windows. The cursor will change to a crosshair over xwayland windows and you'll be able to click them in order to get their properties.", "creator": "oigevald+mozilla@gmail.com", "tags": [], "creation_time": "2018-11-19T19:07:09Z", "attachment_id": null, "text": "(In reply to yareckon from comment #132)\n> Thanks, just saw\n> https://www.phoronix.com/scan.php?page=news_item&px=Firefox-Nightly-Ships-\n> Wayland and updated nightly, and set  GDK_BACKEND=wayland to try it.  So far\n> everything works great, but how do I confirm that I am running under nativ\n> Wayland?  xeyes for instance still moves its eyes when I hover the mouse,\n> over nightly, so I am suspicious...\n\nAnother way to differentiate - run xwininfo. You won't be able to click on Wayland windows. The cursor will change to a crosshair over xwayland windows and you'll be able to click them in order to get their properties.", "bug_id": 635134}, {"raw_text": "(In reply to ame from comment #138)\n> Another way to differentiate - run xwininfo.\n\nIf you're in the command-line, `xlsclients` is probably simpler. Firefox shouldn't be listed.", "creator": "tarkasteve@gmail.com", "text": "(In reply to ame from comment #138)\n> Another way to differentiate - run xwininfo.\n\nIf you're in the command-line, `xlsclients` is probably simpler. Firefox shouldn't be listed.", "time": "2018-11-19T22:00:35Z", "count": 139, "tags": [], "creation_time": "2018-11-19T22:00:35Z", "attachment_id": null, "bug_id": 635134, "author": "tarkasteve@gmail.com", "is_private": false, "id": 13767222}, {"text": "Not *directly* related to Wayland (works on X11 too), but would be very very nice for Wayland users with touchpads:\n\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=1213601\n\ncan someone please implement the conversion from GDK scroll events to APZ events in order to get us kinetic (inertial) scrolling?", "bug_id": 635134, "creator": "greg@unrelenting.technology", "raw_text": "Not *directly* related to Wayland (works on X11 too), but would be very very nice for Wayland users with touchpads:\n\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=1213601\n\ncan someone please implement the conversion from GDK scroll events to APZ events in order to get us kinetic (inertial) scrolling?", "attachment_id": null, "tags": [], "creation_time": "2018-12-04T21:55:40Z", "id": 13796856, "count": 140, "author": "greg@unrelenting.technology", "time": "2018-12-04T21:55:40Z", "is_private": false}, {"id": 13813013, "count": 141, "author": "barz621@gmail.com", "time": "2018-12-14T10:26:13Z", "is_private": false, "text": "Could someone confirm that using nightly without a titlebar works on Wayland?? Tried on weston and the titlebar wasn't going away neither the images for the buttons were working.", "bug_id": 635134, "creator": "barz621@gmail.com", "raw_text": "Could someone confirm that using nightly without a titlebar works on Wayland?? Tried on weston and the titlebar wasn't going away neither the images for the buttons were working.", "attachment_id": null, "tags": [], "creation_time": "2018-12-14T10:26:13Z"}, {"is_private": false, "author": "stransky@redhat.com", "id": 13813174, "attachment_id": null, "tags": [], "creation_time": "2018-12-14T12:10:56Z", "bug_id": 635134, "count": 142, "time": "2018-12-14T12:10:56Z", "creator": "stransky@redhat.com", "raw_text": "(In reply to ApB from comment #141)\n> Could someone confirm that using nightly without a titlebar works on\n> Wayland?? Tried on weston and the titlebar wasn't going away neither the\n> images for the buttons were working.\n\nPlease file that as Weston specific bug - I don't see any such issue on mutter/gnome-shell.", "text": "(In reply to ApB from comment #141)\n> Could someone confirm that using nightly without a titlebar works on\n> Wayland?? Tried on weston and the titlebar wasn't going away neither the\n> images for the buttons were working.\n\nPlease file that as Weston specific bug - I don't see any such issue on mutter/gnome-shell."}, {"author": "barz621@gmail.com", "is_private": false, "id": 13814642, "tags": [], "creation_time": "2018-12-14T21:25:23Z", "attachment_id": null, "bug_id": 635134, "time": "2018-12-14T21:25:23Z", "count": 143, "raw_text": "(In reply to Martin Str\u00e1nsk\u00fd [:stransky] from comment #142)\n> (In reply to ApB from comment #141)\n> > Could someone confirm that using nightly without a titlebar works on\n> > Wayland?? Tried on weston and the titlebar wasn't going away neither the\n> > images for the buttons were working.\n> \n> Please file that as Weston specific bug - I don't see any such issue on\n> mutter/gnome-shell.\n\nI see the same thing in Enlightenment also.", "creator": "barz621@gmail.com", "text": "(In reply to Martin Str\u00e1nsk\u00fd [:stransky] from comment #142)\n> (In reply to ApB from comment #141)\n> > Could someone confirm that using nightly without a titlebar works on\n> > Wayland?? Tried on weston and the titlebar wasn't going away neither the\n> > images for the buttons were working.\n> \n> Please file that as Weston specific bug - I don't see any such issue on\n> mutter/gnome-shell.\n\nI see the same thing in Enlightenment also."}, {"time": "2018-12-15T13:06:50Z", "count": 144, "text": "I've been using it without a titlebar for a long time, with the MOZ_GTK_TITLEBAR_DECORATION=client environment variable", "raw_text": "I've been using it without a titlebar for a long time, with the MOZ_GTK_TITLEBAR_DECORATION=client environment variable", "creator": "greg@unrelenting.technology", "id": 13815527, "is_private": false, "author": "greg@unrelenting.technology", "bug_id": 635134, "creation_time": "2018-12-15T13:06:50Z", "tags": [], "attachment_id": null}, {"id": 13815529, "author": "greg@unrelenting.technology", "is_private": false, "bug_id": 635134, "creation_time": "2018-12-15T13:09:21Z", "tags": [], "attachment_id": null, "time": "2018-12-15T13:09:21Z", "count": 145, "text": "(on Weston)\n\nMaybe there's some \"desktop environment detection\" that enables CSD automatically without the environment variable?", "raw_text": "(on Weston)\n\nMaybe there's some \"desktop environment detection\" that enables CSD automatically without the environment variable?", "creator": "greg@unrelenting.technology"}, {"time": "2018-12-15T13:40:15Z", "count": 146, "text": "(In reply to greg from comment #144)\n> I've been using it without a titlebar for a long time, with the\n> MOZ_GTK_TITLEBAR_DECORATION=client environment variable\n\nYep. Works with that both on E and Weston. No idea what mutter does differently and doesn't require an env there. But anyway shouldn't this be the default behavior on all wayland desktops since AFAIK wayland is client side only??", "raw_text": "(In reply to greg from comment #144)\n> I've been using it without a titlebar for a long time, with the\n> MOZ_GTK_TITLEBAR_DECORATION=client environment variable\n\nYep. Works with that both on E and Weston. No idea what mutter does differently and doesn't require an env there. But anyway shouldn't this be the default behavior on all wayland desktops since AFAIK wayland is client side only??", "creator": "barz621@gmail.com", "id": 13815540, "is_private": false, "author": "barz621@gmail.com", "bug_id": 635134, "creation_time": "2018-12-15T13:40:15Z", "tags": [], "attachment_id": null}, {"id": 13815546, "is_private": false, "author": "greg@unrelenting.technology", "bug_id": 635134, "attachment_id": null, "creation_time": "2018-12-15T13:54:48Z", "tags": [], "count": 147, "time": "2018-12-15T13:54:48Z", "text": "(In reply to ApB from comment #146)\n> No idea what mutter does differently and doesn't require an env there.\n\nMaybe Firefox specifically checks whether it's running in GNOME.\n\nI recently reported a bug to LibreOffice \u2014 without GDK_BACKEND=wayland, it would try to detect the desktop environment, and if running without a known DE it would just go into batch server mode and not draw a GUI at all :D\n\n> AFAIK wayland is client side only??\n\nWayland doesn't dictate this at all, but the general convention has been \"client side by default\".\n\nKDE has introduced a negotiation protocol: https://github.com/KDE/kwayland/blob/master/src/client/protocols/server-decoration.xml (supported in KWin and Sway at least)\n\nGTK supports it since 3.22.25: https://gitlab.gnome.org/GNOME/gtk/commit/f2adaba237519642b88ccb42b47a95cf539a2a12", "creator": "greg@unrelenting.technology", "raw_text": "(In reply to ApB from comment #146)\n> No idea what mutter does differently and doesn't require an env there.\n\nMaybe Firefox specifically checks whether it's running in GNOME.\n\nI recently reported a bug to LibreOffice \u2014 without GDK_BACKEND=wayland, it would try to detect the desktop environment, and if running without a known DE it would just go into batch server mode and not draw a GUI at all :D\n\n> AFAIK wayland is client side only??\n\nWayland doesn't dictate this at all, but the general convention has been \"client side by default\".\n\nKDE has introduced a negotiation protocol: https://github.com/KDE/kwayland/blob/master/src/client/protocols/server-decoration.xml (supported in KWin and Sway at least)\n\nGTK supports it since 3.22.25: https://gitlab.gnome.org/GNOME/gtk/commit/f2adaba237519642b88ccb42b47a95cf539a2a12"}, {"time": "2018-12-15T14:07:33Z", "count": 148, "raw_text": "(In reply to greg from comment #147)\n> (In reply to ApB from comment #146)\n> > No idea what mutter does differently and doesn't require an env there.\n> \n> Maybe Firefox specifically checks whether it's running in GNOME.\n> \n\nIt should have the same behavior across all wayland desktops. It is a bug if it doesn't.", "creator": "barz621@gmail.com", "text": "(In reply to greg from comment #147)\n> (In reply to ApB from comment #146)\n> > No idea what mutter does differently and doesn't require an env there.\n> \n> Maybe Firefox specifically checks whether it's running in GNOME.\n> \n\nIt should have the same behavior across all wayland desktops. It is a bug if it doesn't.", "is_private": false, "author": "barz621@gmail.com", "id": 13815551, "creation_time": "2018-12-15T14:07:33Z", "tags": [], "attachment_id": null, "bug_id": 635134}, {"time": "2018-12-17T18:10:56Z", "count": 149, "text": "(In reply to ApB from comment #148)\n> (In reply to greg from comment #147)\n> > (In reply to ApB from comment #146)\n> > > No idea what mutter does differently and doesn't require an env there.\n> > \n> > Maybe Firefox specifically checks whether it's running in GNOME.\n> > \n> \n> It should have the same behavior across all wayland desktops. It is a bug if\n> it doesn't.\n\nFiled as Bug 1514828.", "raw_text": "(In reply to ApB from comment #148)\n> (In reply to greg from comment #147)\n> > (In reply to ApB from comment #146)\n> > > No idea what mutter does differently and doesn't require an env there.\n> > \n> > Maybe Firefox specifically checks whether it's running in GNOME.\n> > \n> \n> It should have the same behavior across all wayland desktops. It is a bug if\n> it doesn't.\n\nFiled as Bug 1514828.", "creator": "stransky@redhat.com", "id": 13819044, "author": "stransky@redhat.com", "is_private": false, "bug_id": 635134, "creation_time": "2018-12-17T18:10:56Z", "tags": [], "attachment_id": null}, {"id": 13879772, "count": 150, "time": "2019-01-23T15:24:12Z", "author": "x3ask@hotmail.com", "is_private": false, "text": "(In reply to ApB from comment #141)\n> Could someone confirm that using nightly without a titlebar works on\n> Wayland?? Tried on weston and the titlebar wasn't going away neither the\n> images for the buttons were working.\n\nyes CSD has worked in weston for a long time, not even nightly\n\npath=GTK_THEME=Adwaita MOZ_GTK_TITLEBAR_DECORATION=client firefox", "bug_id": 635134, "creator": "x3ask@hotmail.com", "raw_text": "(In reply to ApB from comment #141)\n> Could someone confirm that using nightly without a titlebar works on\n> Wayland?? Tried on weston and the titlebar wasn't going away neither the\n> images for the buttons were working.\n\nyes CSD has worked in weston for a long time, not even nightly\n\npath=GTK_THEME=Adwaita MOZ_GTK_TITLEBAR_DECORATION=client firefox", "attachment_id": null, "creation_time": "2019-01-23T15:24:12Z", "tags": []}, {"creator": "hoshiyamazaki01@gmail.com", "raw_text": "Seems that there is still context menu bug under Sway/Gnome when using mixed dpi monitors, I have flicker menu on Sway and not properly scaled on Gnome on HiDPI display (also Firefox is not interpreting right side of window clicks correctly).\n\nBut yes there are no wrong positioning anymore.", "attachment_id": null, "creation_time": "2019-05-02T01:35:48Z", "tags": [], "text": "Seems that there is still context menu bug under Sway/Gnome when using mixed dpi monitors, I have flicker menu on Sway and not properly scaled on Gnome on HiDPI display (also Firefox is not interpreting right side of window clicks correctly).\n\nBut yes there are no wrong positioning anymore.", "bug_id": 635134, "count": 151, "time": "2019-05-02T01:35:48Z", "author": "hoshiyamazaki01@gmail.com", "is_private": false, "id": 14090724}, {"raw_text": "(In reply to hoshiyamazaki01 from comment #151)\n> Seems that there is still context menu bug under Sway/Gnome when using mixed\n> dpi monitors, I have flicker menu on Sway and not properly scaled on Gnome\n> on HiDPI display (also Firefox is not interpreting right side of window\n> clicks correctly).\n> \n> But yes there are no wrong positioning anymore.\n\nCan you please file a new bug for it and also attach a reproduction steps? Thanks.", "creator": "stransky@redhat.com", "text": "(In reply to hoshiyamazaki01 from comment #151)\n> Seems that there is still context menu bug under Sway/Gnome when using mixed\n> dpi monitors, I have flicker menu on Sway and not properly scaled on Gnome\n> on HiDPI display (also Firefox is not interpreting right side of window\n> clicks correctly).\n> \n> But yes there are no wrong positioning anymore.\n\nCan you please file a new bug for it and also attach a reproduction steps? Thanks.", "time": "2019-05-02T08:37:05Z", "count": 152, "creation_time": "2019-05-02T08:37:05Z", "tags": [], "attachment_id": null, "bug_id": 635134, "author": "stransky@redhat.com", "is_private": false, "id": 14091054}, {"count": 153, "time": "2019-06-01T16:25:51Z", "creator": "michal.merta.spk@gmail.com", "raw_text": "Just a question:\n\nGnome shell works with EGL support,\nWeston fails with GLXtest failed, unable to open connection to X server.\nHW_COMPOSITING blocked by default: Acceleration blocked by platform.\n\nShould wayland port work on Weston with EGL now? Is there some way to turn the EGL on? Am I missing some environment variables?\nIf not, will this work in future? Is there some bug that I should read and watch?\nThank You!", "text": "Just a question:\n\nGnome shell works with EGL support,\nWeston fails with GLXtest failed, unable to open connection to X server.\nHW_COMPOSITING blocked by default: Acceleration blocked by platform.\n\nShould wayland port work on Weston with EGL now? Is there some way to turn the EGL on? Am I missing some environment variables?\nIf not, will this work in future? Is there some bug that I should read and watch?\nThank You!", "author": "michal.merta.spk@gmail.com", "is_private": false, "id": 14153669, "attachment_id": null, "creation_time": "2019-06-01T16:25:51Z", "tags": [], "bug_id": 635134}, {"id": 14153717, "is_private": false, "author": "greg@unrelenting.technology", "time": "2019-06-01T18:15:53Z", "count": 154, "bug_id": 635134, "text": "(In reply to michal.merta.spk from comment #153)\n> Weston fails with GLXtest failed, unable to open connection to X server.\n> HW_COMPOSITING blocked by default: Acceleration blocked by platform.\n> \n> Should wayland port work on Weston with EGL now? Is there some way to turn the EGL on? Am I missing some environment variables?\n\nLooks like you don't have Xwayland enabled in Weston's config file, and Firefox still relies on X11 for testing whether acceleration works (ugh, this should really be fixed along with any other attempts to touch X11). Try `MOZ_ACCELERATED=1` or `layers.acceleration.force-enabled` in `about:config`.", "creation_time": "2019-06-01T18:15:53Z", "tags": [], "attachment_id": null, "raw_text": "(In reply to michal.merta.spk from comment #153)\n> Weston fails with GLXtest failed, unable to open connection to X server.\n> HW_COMPOSITING blocked by default: Acceleration blocked by platform.\n> \n> Should wayland port work on Weston with EGL now? Is there some way to turn the EGL on? Am I missing some environment variables?\n\nLooks like you don't have Xwayland enabled in Weston's config file, and Firefox still relies on X11 for testing whether acceleration works (ugh, this should really be fixed along with any other attempts to touch X11). Try `MOZ_ACCELERATED=1` or `layers.acceleration.force-enabled` in `about:config`.", "creator": "greg@unrelenting.technology"}, {"attachment_id": null, "tags": [], "creation_time": "2019-06-01T18:37:27Z", "bug_id": 635134, "is_private": false, "author": "jan@ikenmeyer.eu", "id": 14153725, "creator": "jan@ikenmeyer.eu", "raw_text": "(In reply to greg v [:myfreeweb] from comment #154)\n> Firefox still relies on X11 for testing whether acceleration works\n\nbug 1548911 was fixed 3 days ago.\n> Try `MOZ_ACCELERATED=1` or `layers.acceleration.force-enabled` in `about:config`.\n\nYou only need to set gfx.webrender.all to true to force-enable WebRender.", "text": "(In reply to greg v [:myfreeweb] from comment #154)\n> Firefox still relies on X11 for testing whether acceleration works\n\nbug 1548911 was fixed 3 days ago.\n> Try `MOZ_ACCELERATED=1` or `layers.acceleration.force-enabled` in `about:config`.\n\nYou only need to set gfx.webrender.all to true to force-enable WebRender.", "count": 155, "time": "2019-06-01T18:37:27Z"}, {"creation_time": "2019-06-01T19:28:59Z", "tags": [], "attachment_id": null, "bug_id": 635134, "is_private": false, "author": "michal.merta.spk@gmail.com", "id": 14153745, "raw_text": "Had the gfx.webrender.all set to true, but ended with\nFailed to create EGLContext\nNevermind, I don't need it to work right now :). At this moment, I'm happy, that in future it probably will work on clean Weston.\n\nThank both of You!", "creator": "michal.merta.spk@gmail.com", "text": "Had the gfx.webrender.all set to true, but ended with\nFailed to create EGLContext\nNevermind, I don't need it to work right now :). At this moment, I'm happy, that in future it probably will work on clean Weston.\n\nThank both of You!", "time": "2019-06-01T19:28:59Z", "count": 156}, {"count": 157, "time": "2019-06-01T22:48:38Z", "creator": "greg@unrelenting.technology", "raw_text": "(In reply to Jan Andre Ikenmeyer [:darkspirit] from comment #155)\n> bug 1548911 was fixed 3 days ago.\n\nThat's about driver detection, did it also change the GLX test?\n\n(In reply to michal.merta.spk from comment #156)\n> Had the gfx.webrender.all set to true, but ended with\n> Failed to create EGLContext\n\nhmmm, maybe you're running with pixman software rendering instead of a GPU? Weston on a real GPU definitely works fine with Firefox EGL", "text": "(In reply to Jan Andre Ikenmeyer [:darkspirit] from comment #155)\n> bug 1548911 was fixed 3 days ago.\n\nThat's about driver detection, did it also change the GLX test?\n\n(In reply to michal.merta.spk from comment #156)\n> Had the gfx.webrender.all set to true, but ended with\n> Failed to create EGLContext\n\nhmmm, maybe you're running with pixman software rendering instead of a GPU? Weston on a real GPU definitely works fine with Firefox EGL", "author": "greg@unrelenting.technology", "is_private": false, "id": 14153829, "attachment_id": null, "tags": [], "creation_time": "2019-06-01T22:48:38Z", "bug_id": 635134}, {"is_private": false, "time": "2019-06-03T06:39:33Z", "author": "stransky@redhat.com", "count": 158, "id": 14155744, "creation_time": "2019-06-03T06:39:33Z", "tags": [], "attachment_id": null, "raw_text": "(In reply to michal.merta.spk from comment #153)\n> Just a question:\n> \n> Gnome shell works with EGL support,\n> Weston fails with GLXtest failed, unable to open connection to X server.\n> HW_COMPOSITING blocked by default: Acceleration blocked by platform.\n> \n> Should wayland port work on Weston with EGL now? Is there some way to turn\n> the EGL on? Am I missing some environment variables?\n> If not, will this work in future? Is there some bug that I should read and\n> watch?\n> Thank You!\n\nFiled as Bug 1556301.", "creator": "stransky@redhat.com", "bug_id": 635134, "text": "(In reply to michal.merta.spk from comment #153)\n> Just a question:\n> \n> Gnome shell works with EGL support,\n> Weston fails with GLXtest failed, unable to open connection to X server.\n> HW_COMPOSITING blocked by default: Acceleration blocked by platform.\n> \n> Should wayland port work on Weston with EGL now? Is there some way to turn\n> the EGL on? Am I missing some environment variables?\n> If not, will this work in future? Is there some bug that I should read and\n> watch?\n> Thank You!\n\nFiled as Bug 1556301."}, {"id": 14165476, "is_private": false, "author": "michal.merta.spk@gmail.com", "bug_id": 635134, "attachment_id": null, "tags": [], "creation_time": "2019-06-06T19:09:39Z", "count": 159, "time": "2019-06-06T19:09:39Z", "text": "(In reply to greg v [:myfreeweb] from comment #157)\n> hmmm, maybe you're running with pixman software rendering instead of a GPU? Weston on a real GPU definitely works fine with Firefox EGL\n\nTried today on Fedora with latest firefox-wayland. Weston log shows that I'm using drm-backend.so, gl-renderer.so. GL vendor is Intel,  EGL Wayland extension: yes.\nAnd still getting error:\n\nCrash Annotation GraphicsCriticalError: |[0][GFX1-]: Failed to create EGLContext", "creator": "michal.merta.spk@gmail.com", "raw_text": "(In reply to greg v [:myfreeweb] from comment #157)\n> hmmm, maybe you're running with pixman software rendering instead of a GPU? Weston on a real GPU definitely works fine with Firefox EGL\n\nTried today on Fedora with latest firefox-wayland. Weston log shows that I'm using drm-backend.so, gl-renderer.so. GL vendor is Intel,  EGL Wayland extension: yes.\nAnd still getting error:\n\nCrash Annotation GraphicsCriticalError: |[0][GFX1-]: Failed to create EGLContext"}, {"id": 14337579, "is_private": false, "author": "robert.mader@posteo.de", "time": "2019-09-02T17:36:18Z", "count": 160, "bug_id": 635134, "text": "A note to GNOME Shell users who already use this: if you experienced artefacts during window animations or took window screenshots which turned out to be empty, this has just been fixed and will be part of GNOME 3.34.\n\nSee https://gitlab.gnome.org/GNOME/gnome-shell/merge_requests/692", "creation_time": "2019-09-02T17:36:18Z", "tags": [], "attachment_id": null, "raw_text": "A note to GNOME Shell users who already use this: if you experienced artefacts during window animations or took window screenshots which turned out to be empty, this has just been fixed and will be part of GNOME 3.34.\n\nSee https://gitlab.gnome.org/GNOME/gnome-shell/merge_requests/692", "creator": "robert.mader@posteo.de"}, {"count": 161, "time": "2019-09-26T10:43:42Z", "creator": "rbf@castyour.net", "raw_text": "Hey, I know cheerleading is a bit off topic, but wanted to log in to  thank you for all the work that's happened in the last few weeks on wayland compatibility -- there has been a huge jump in usability now that the worst bugs have been bashed with window positions, drawing artifacts etc.  Keep up the good work!", "text": "Hey, I know cheerleading is a bit off topic, but wanted to log in to  thank you for all the work that's happened in the last few weeks on wayland compatibility -- there has been a huge jump in usability now that the worst bugs have been bashed with window positions, drawing artifacts etc.  Keep up the good work!", "author": "rbf@castyour.net", "is_private": false, "id": 14385211, "attachment_id": null, "creation_time": "2019-09-26T10:43:42Z", "tags": [], "bug_id": 635134}, {"raw_text": "Hi guys, \nGreat job on firefox on wayland ! On Gnome 3.34, I actually loose the mouse cursor on \"Activities overview\".\nThanks again !", "creator": "frague59@gmail.com", "tags": [], "creation_time": "2019-10-23T20:40:39Z", "attachment_id": null, "text": "Hi guys, \nGreat job on firefox on wayland ! On Gnome 3.34, I actually loose the mouse cursor on \"Activities overview\".\nThanks again !", "bug_id": 635134, "time": "2019-10-23T20:40:39Z", "author": "frague59@gmail.com", "count": 162, "is_private": false, "id": 14442615}, {"is_private": false, "author": "romulasry@protonmail.com", "id": 14899985, "attachment_id": null, "tags": [], "creation_time": "2020-06-24T19:29:07Z", "bug_id": 635134, "count": 163, "time": "2020-06-24T19:29:07Z", "creator": "romulasry@protonmail.com", "raw_text": "What version will have this enabled by default?", "text": "What version will have this enabled by default?"}, {"author": "romulasry@protonmail.com", "is_private": false, "id": 14900049, "creation_time": "2020-06-24T19:58:44Z", "tags": [], "attachment_id": null, "bug_id": 635134, "time": "2020-06-24T19:58:44Z", "count": 164, "raw_text": "(In reply to romulasry from comment #163)\n> What version will have this enabled by default?\n\nFound the bug: 1543600", "creator": "romulasry@protonmail.com", "text": "(In reply to romulasry from comment #163)\n> What version will have this enabled by default?\n\nFound the bug: 1543600"}, {"is_private": false, "author": "romulasry@protonmail.com", "id": 14900051, "tags": [], "creation_time": "2020-06-24T19:59:27Z", "attachment_id": null, "bug_id": 635134, "time": "2020-06-24T19:59:27Z", "count": 165, "raw_text": "(In reply to romulasry from comment #163)\n> What version will have this enabled by default?\n\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=1543600", "creator": "romulasry@protonmail.com", "text": "(In reply to romulasry from comment #163)\n> What version will have this enabled by default?\n\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=1543600"}, {"text": "Also https://bugzilla.mozilla.org/show_bug.cgi?id=1700340, in case it went under your radar.", "bug_id": 635134, "raw_text": "Also https://bugzilla.mozilla.org/show_bug.cgi?id=1700340, in case it went under your radar.", "creator": "mvdan@mvdan.cc", "tags": [], "creation_time": "2021-04-10T11:22:47Z", "attachment_id": null, "id": 15353930, "time": "2021-04-10T11:22:47Z", "author": "mvdan@mvdan.cc", "count": 166, "is_private": false}, {"raw_text": "Maybe https://bugzilla.mozilla.org/show_bug.cgi?id=1672591 should be added as a dependency? It impacts the usability of the bookmark popup when fractional scaling on wayland is enabled.", "creator": "filip.hejsek@gmail.com", "text": "Maybe https://bugzilla.mozilla.org/show_bug.cgi?id=1672591 should be added as a dependency? It impacts the usability of the bookmark popup when fractional scaling on wayland is enabled.", "time": "2021-05-10T12:17:20Z", "count": 167, "tags": [], "creation_time": "2021-05-10T12:17:20Z", "attachment_id": null, "bug_id": 635134, "author": "filip.hejsek@gmail.com", "is_private": false, "id": 15402646}, {"author": "hugo@barrera.io", "time": "2022-01-14T16:26:28Z", "count": 168, "is_private": false, "id": 15733230, "raw_text": "I believe [#1750237](https://bugzilla.mozilla.org/show_bug.cgi?id=1750237) belongs here too.", "creator": "hugo@barrera.io", "tags": [], "creation_time": "2022-01-14T16:26:28Z", "attachment_id": null, "text": "I believe [#1750237](https://bugzilla.mozilla.org/show_bug.cgi?id=1750237) belongs here too.", "bug_id": 635134}]}}}