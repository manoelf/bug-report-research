{"comments": {}, "bugs": {"627640": {"comments": [{"creator": "jdecaron@gmail.com", "creation_time": "2011-01-21T07:10:47Z", "is_private": false, "time": "2011-01-21T07:10:47Z", "text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13\nBuild Identifier: 0.9.86-rdmsoft\n\nindex 7480c4e..fc4d94e 100755\n--- a/content/chatzilla/handlers.js\n+++ b/content/chatzilla/handlers.js\n@@ -111,6 +111,7 @@ function initHandlers()\n     node.active = false;\n     node = document.getElementById(\"security-button\");\n     node.addEventListener(\"dblclick\", onSecurityIconDblClick, false);\n+    document.addEventListener(\"keypress\", onDocumentKeyPress, false);\n\n     window.onkeypress = onWindowKeyPress;\n\n@@ -357,6 +358,16 @@ function onTooltip(event)\n     return false;\n }\n\n+function onDocumentKeyPress(e)\n+{\n+    if(document.activeElement.tagName == 'browser')\n+    {\n+        var input = document.getElementById('input');\n+        input.focus();\n+        input.value += String.fromCharCode(e.charCode));\n+    }\n+}\n+\n\nReproducible: Always\n\nSteps to Reproduce:\n1. Give the focus to any window on your desktop.\n2. Click back on Chatzilla on the main chat element or anywhere that you doesn't necessary need to type.\nActual Results:  \nYour text input lose focus, if you don't pay close attention you can easily type 10-15 characters before you realize that you weren't typing anything.\n\nExpected Results:  \nFill the typed characters into the input box.", "id": 5216200, "author": "jdecaron@gmail.com", "tags": [], "bug_id": 627640, "attachment_id": null, "raw_text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13\nBuild Identifier: 0.9.86-rdmsoft\n\nindex 7480c4e..fc4d94e 100755\n--- a/content/chatzilla/handlers.js\n+++ b/content/chatzilla/handlers.js\n@@ -111,6 +111,7 @@ function initHandlers()\n     node.active = false;\n     node = document.getElementById(\"security-button\");\n     node.addEventListener(\"dblclick\", onSecurityIconDblClick, false);\n+    document.addEventListener(\"keypress\", onDocumentKeyPress, false);\n\n     window.onkeypress = onWindowKeyPress;\n\n@@ -357,6 +358,16 @@ function onTooltip(event)\n     return false;\n }\n\n+function onDocumentKeyPress(e)\n+{\n+    if(document.activeElement.tagName == 'browser')\n+    {\n+        var input = document.getElementById('input');\n+        input.focus();\n+        input.value += String.fromCharCode(e.charCode));\n+    }\n+}\n+\n\nReproducible: Always\n\nSteps to Reproduce:\n1. Give the focus to any window on your desktop.\n2. Click back on Chatzilla on the main chat element or anywhere that you doesn't necessary need to type.\nActual Results:  \nYour text input lose focus, if you don't pay close attention you can easily type 10-15 characters before you realize that you weren't typing anything.\n\nExpected Results:  \nFill the typed characters into the input box.", "count": 0}, {"tags": [], "author": "jdecaron@gmail.com", "attachment_id": null, "bug_id": 627640, "raw_text": "This code does add 2 bugs that has been found already, I fixed one (Ctrl+C wasn't working in the main window). But it still breaks the title modification for channels.\n\ndiff --git a/content/chatzilla/handlers.js b/content/chatzilla/handlers.js\nindex 7480c4e..6f0abe6 100755\n--- a/content/chatzilla/handlers.js\n+++ b/content/chatzilla/handlers.js\n@@ -111,6 +111,7 @@ function initHandlers()\n     node.active = false;\n     node = document.getElementById(\"security-button\");\n     node.addEventListener(\"dblclick\", onSecurityIconDblClick, false);\n+    document.addEventListener(\"keypress\", onDocumentKeyPress, false);\n\n     window.onkeypress = onWindowKeyPress;\n\n@@ -357,6 +358,16 @@ function onTooltip(event)\n     return false;\n }\n\n+function onDocumentKeyPress(e)\n+{\n+    if(document.activeElement.tagName == 'browser' && !(e.ctrlKey || e.altKey))\n+    {\n+        var input = document.getElementById('input');\n+        input.focus();\n+        input.value += String.fromCharCode(e.charCode);\n+    }\n+}\n+\n function onInputKeyPress (e)\n {\n     if (client.prefs[\"outgoing.colorCodes\"])", "count": 1, "creator": "jdecaron@gmail.com", "creation_time": "2011-01-21T08:32:31Z", "is_private": false, "text": "This code does add 2 bugs that has been found already, I fixed one (Ctrl+C wasn't working in the main window). But it still breaks the title modification for channels.\n\ndiff --git a/content/chatzilla/handlers.js b/content/chatzilla/handlers.js\nindex 7480c4e..6f0abe6 100755\n--- a/content/chatzilla/handlers.js\n+++ b/content/chatzilla/handlers.js\n@@ -111,6 +111,7 @@ function initHandlers()\n     node.active = false;\n     node = document.getElementById(\"security-button\");\n     node.addEventListener(\"dblclick\", onSecurityIconDblClick, false);\n+    document.addEventListener(\"keypress\", onDocumentKeyPress, false);\n\n     window.onkeypress = onWindowKeyPress;\n\n@@ -357,6 +358,16 @@ function onTooltip(event)\n     return false;\n }\n\n+function onDocumentKeyPress(e)\n+{\n+    if(document.activeElement.tagName == 'browser' && !(e.ctrlKey || e.altKey))\n+    {\n+        var input = document.getElementById('input');\n+        input.focus();\n+        input.value += String.fromCharCode(e.charCode);\n+    }\n+}\n+\n function onInputKeyPress (e)\n {\n     if (client.prefs[\"outgoing.colorCodes\"])", "id": 5216280, "time": "2011-01-21T08:32:31Z"}, {"author": "jdecaron@gmail.com", "tags": [], "creator": "jdecaron@gmail.com", "creation_time": "2011-01-21T08:40:41Z", "bug_id": 627640, "attachment_id": null, "is_private": false, "time": "2011-01-21T08:40:41Z", "raw_text": "It's possible to fix the title bug by doing a document search \"document.getElementByTagName('textbox')\" and not focus the input box if there's already an textbox that has the focus somewhere.", "id": 5216297, "text": "It's possible to fix the title bug by doing a document search \"document.getElementByTagName('textbox')\" and not focus the input box if there's already an textbox that has the focus somewhere.", "count": 2}, {"tags": [], "creator": "glenjamin+bmo@gmail.com", "author": "glenjamin+bmo@gmail.com", "creation_time": "2011-01-23T14:19:54Z", "attachment_id": null, "bug_id": 627640, "is_private": false, "raw_text": "ChatZilla has a \"vi style\" shortcut key, pressing the escape key will always focus the input box.\n\nBash escape a few times before you begin typing - Trying to catch all the edge cases with some sort of key press handler on elements that are not the input box will be a nightmare.", "text": "ChatZilla has a \"vi style\" shortcut key, pressing the escape key will always focus the input box.\n\nBash escape a few times before you begin typing - Trying to catch all the edge cases with some sort of key press handler on elements that are not the input box will be a nightmare.", "id": 5220404, "time": "2011-01-23T14:19:54Z", "count": 3}]}}}