{"comments": {}, "bugs": {"680250": {"comments": [{"is_private": false, "creator": "kaie@kuix.de", "text": "Received this report:\n- user uses device manager to unload a pkcs#11 driver\n- using the pcsc daemon in debug mode, it can be seen that device doesn't power down.\n\nI look at our code, PSM does this:\n\n  SECStatus srv = SECMOD_DeleteModule(modName, &modType);\n  if (srv == SECSuccess) {\n    SECMODModule *module = SECMOD_FindModule(modName);\n    if (module) {\n      nssComponent->ShutdownSmartCardThread(module);\n      SECMOD_DestroyModule(module);\n    }\n\nIs this sufficient to power down?\n\n\nOr, repeating the initial question by the user who reported this issue:\n\nIs this behaviour a bug or expected?", "time": "2011-08-18T21:15:29Z", "tags": [], "creation_time": "2011-08-18T21:15:29Z", "author": "kaie@kuix.de", "raw_text": "Received this report:\n- user uses device manager to unload a pkcs#11 driver\n- using the pcsc daemon in debug mode, it can be seen that device doesn't power down.\n\nI look at our code, PSM does this:\n\n  SECStatus srv = SECMOD_DeleteModule(modName, &modType);\n  if (srv == SECSuccess) {\n    SECMODModule *module = SECMOD_FindModule(modName);\n    if (module) {\n      nssComponent->ShutdownSmartCardThread(module);\n      SECMOD_DestroyModule(module);\n    }\n\nIs this sufficient to power down?\n\n\nOr, repeating the initial question by the user who reported this issue:\n\nIs this behaviour a bug or expected?", "attachment_id": null, "id": 5663711, "count": 0, "bug_id": 680250}, {"raw_text": "Linux 32 bit.\nProbably happened with NSS 3.12.x ?", "attachment_id": null, "id": 5663717, "count": 1, "is_private": false, "creator": "kaie@kuix.de", "text": "Linux 32 bit.\nProbably happened with NSS 3.12.x ?", "time": "2011-08-18T21:16:29Z", "tags": [], "bug_id": 680250, "creation_time": "2011-08-18T21:16:29Z", "author": "kaie@kuix.de"}, {"count": 2, "bug_id": 680250, "creator": "rrelyea@redhat.com", "is_private": false, "author": "rrelyea@redhat.com", "creation_time": "2011-08-18T22:07:55Z", "tags": [], "time": "2011-08-18T22:07:55Z", "text": "1. It's necessary, but not sufficient. You also need to free up any references to keys or certs stored in that token.\n\n2. the actual power down to the pcsc daemon depends on when the module sends a power down request. One would expect it to do so on C_Finalize(), but that's not guarrenteed.\n\nbob", "attachment_id": null, "raw_text": "1. It's necessary, but not sufficient. You also need to free up any references to keys or certs stored in that token.\n\n2. the actual power down to the pcsc daemon depends on when the module sends a power down request. One would expect it to do so on C_Finalize(), but that's not guarrenteed.\n\nbob", "id": 5663859}]}}}