{"bugs": {"685192": {"comments": [{"creator": "julian.reschke@gmx.de", "is_private": false, "count": 0, "author": "julian.reschke@gmx.de", "creation_time": "2011-09-07T16:33:48Z", "time": "2011-09-07T16:33:48Z", "bug_id": 685192, "tags": [], "text": "See \n\n  http://greenbytes.de/tech/tc2231/#attwithfn2231noc\n\nwhich tests\n\n   Content-Disposition: attachment; filename*=''foo-%c3%a4-%e2%82%ac.html\n\nHere, the charset field is missing; apparently FF falls back to UTF-8. Opera falls back to something else. IE9, Chrome, and Konqueror ignore the parameter.\n\nI think it would be good to align with IE, Chrome, and Konqueror.", "attachment_id": null, "raw_text": "See \n\n  http://greenbytes.de/tech/tc2231/#attwithfn2231noc\n\nwhich tests\n\n   Content-Disposition: attachment; filename*=''foo-%c3%a4-%e2%82%ac.html\n\nHere, the charset field is missing; apparently FF falls back to UTF-8. Opera falls back to something else. IE9, Chrome, and Konqueror ignore the parameter.\n\nI think it would be good to align with IE, Chrome, and Konqueror.", "id": 5705116}, {"bug_id": 685192, "time": "2011-09-08T00:08:59Z", "tags": [], "text": "once bug 589292 lands, this should be a matter of fixing NS_GetFilenameFromDisposition() to not pass the channel's fallback charset, nor pass true for aTryLocaleCharset, and perhaps removing the call to IsUTF8() from nsMIMEHeaderParamImpl::GetParameter().  To do the latter we'd need to make sure we don't break mail header parsing.", "author": "jduell.mcbugs@gmail.com", "creation_time": "2011-09-08T00:08:59Z", "count": 1, "creator": "jduell.mcbugs@gmail.com", "is_private": false, "id": 5706449, "raw_text": "once bug 589292 lands, this should be a matter of fixing NS_GetFilenameFromDisposition() to not pass the channel's fallback charset, nor pass true for aTryLocaleCharset, and perhaps removing the call to IsUTF8() from nsMIMEHeaderParamImpl::GetParameter().  To do the latter we'd need to make sure we don't break mail header parsing.", "attachment_id": null}, {"tags": [], "time": "2011-09-08T06:26:56Z", "text": "This might be one of the cases where we need to distinguish MIME and HTTP.", "author": "julian.reschke@gmx.de", "creation_time": "2011-09-08T06:26:56Z", "creator": "julian.reschke@gmx.de", "is_private": false, "id": 5706926, "raw_text": "This might be one of the cases where we need to distinguish MIME and HTTP.", "attachment_id": null, "bug_id": 685192, "count": 2}, {"count": 3, "bug_id": 685192, "attachment_id": null, "raw_text": "(In reply to Jason Duell (:jduell) from comment #1)\n> once bug 589292 lands, this should be a matter of fixing\n> NS_GetFilenameFromDisposition() to not pass the channel's fallback charset,\n> nor pass true for aTryLocaleCharset, and perhaps removing the call to\n> IsUTF8() from nsMIMEHeaderParamImpl::GetParameter().  To do the latter we'd\n> need to make sure we don't break mail header parsing.\n\nMaybe. We can also change the 2231/5987 parsing code to just skip values where the charset is missing; that should be less intrusive.\n\nOn the other hand, it would be cool if we heuristics like aTryLocaleCharset -- maybe we can do that as part of a separate bug? I also have no idea how this will affect mail as opposed to http...", "id": 5774746, "creator": "julian.reschke@gmx.de", "is_private": false, "author": "julian.reschke@gmx.de", "creation_time": "2011-10-11T16:24:33Z", "tags": [], "time": "2011-10-11T16:24:33Z", "text": "(In reply to Jason Duell (:jduell) from comment #1)\n> once bug 589292 lands, this should be a matter of fixing\n> NS_GetFilenameFromDisposition() to not pass the channel's fallback charset,\n> nor pass true for aTryLocaleCharset, and perhaps removing the call to\n> IsUTF8() from nsMIMEHeaderParamImpl::GetParameter().  To do the latter we'd\n> need to make sure we don't break mail header parsing.\n\nMaybe. We can also change the 2231/5987 parsing code to just skip values where the charset is missing; that should be less intrusive.\n\nOn the other hand, it would be cool if we heuristics like aTryLocaleCharset -- maybe we can do that as part of a separate bug? I also have no idea how this will affect mail as opposed to http..."}, {"attachment_id": 566315, "raw_text": "Applies on top of patch for bug 692574", "id": 5775588, "creator": "julian.reschke@gmx.de", "is_private": false, "count": 4, "author": "julian.reschke@gmx.de", "creation_time": "2011-10-11T20:21:22Z", "tags": [], "time": "2011-10-11T20:21:22Z", "bug_id": 685192, "text": "Created attachment 566315\nProposed patch, incl test case\n\nApplies on top of patch for bug 692574"}, {"creator": "bzbarsky@mit.edu", "is_private": false, "author": "bzbarsky@mit.edu", "creation_time": "2011-10-12T03:46:41Z", "tags": [], "time": "2011-10-12T03:46:41Z", "text": "Comment on attachment 566315\nProposed patch, incl test case\n\nr=me", "attachment_id": 566315, "raw_text": "r=me", "id": 5776590, "count": 5, "bug_id": 685192}, {"count": 6, "is_private": false, "creator": "julian.reschke@gmx.de", "text": "Created attachment 566581\nProposed patch, incl test case\n\nUpdated to that it applies on top of bug 692574", "tags": [], "bug_id": 685192, "time": "2011-10-12T17:25:59Z", "creation_time": "2011-10-12T17:25:59Z", "author": "julian.reschke@gmx.de", "raw_text": "Updated to that it applies on top of bug 692574", "attachment_id": 566581, "id": 5777864}, {"bug_id": 685192, "count": 7, "id": 5777893, "attachment_id": 566581, "raw_text": "r=me", "creation_time": "2011-10-12T17:36:13Z", "author": "bzbarsky@mit.edu", "text": "Comment on attachment 566581\nProposed patch, incl test case\n\nr=me", "time": "2011-10-12T17:36:13Z", "tags": [], "is_private": false, "creator": "bzbarsky@mit.edu"}, {"author": "emorley@mozilla.com", "creation_time": "2011-10-15T14:20:25Z", "bug_id": 685192, "tags": [], "time": "2011-10-15T14:20:25Z", "text": "Missing patch author added locally, now in my queue with a few other bits that are being sent to try first and then onto inbound :-)\n\nhttps://tbpl.mozilla.org/?tree=Try&rev=488d4a5f274a", "creator": "emorley@mozilla.com", "is_private": false, "count": 8, "id": 5784586, "attachment_id": null, "raw_text": "Missing patch author added locally, now in my queue with a few other bits that are being sent to try first and then onto inbound :-)\n\nhttps://tbpl.mozilla.org/?tree=Try&rev=488d4a5f274a"}, {"creation_time": "2011-10-15T20:09:19Z", "author": "emorley@mozilla.com", "text": "https://hg.mozilla.org/integration/mozilla-inbound/rev/fa04ab6995e5", "tags": [], "time": "2011-10-15T20:09:19Z", "bug_id": 685192, "is_private": false, "creator": "emorley@mozilla.com", "count": 9, "id": 5784767, "attachment_id": null, "raw_text": "https://hg.mozilla.org/integration/mozilla-inbound/rev/fa04ab6995e5"}, {"is_private": false, "creator": "ehsan.akhgari@gmail.com", "count": 10, "creation_time": "2011-10-16T17:39:25Z", "author": "ehsan.akhgari@gmail.com", "text": "https://hg.mozilla.org/mozilla-central/rev/fa04ab6995e5", "time": "2011-10-16T17:39:25Z", "bug_id": 685192, "tags": [], "attachment_id": null, "raw_text": "https://hg.mozilla.org/mozilla-central/rev/fa04ab6995e5", "id": 5785262}, {"id": 5875284, "raw_text": "Reopened because the change was backed out for now due to bug 704989.", "attachment_id": null, "bug_id": 685192, "time": "2011-11-28T12:50:36Z", "tags": [], "text": "Reopened because the change was backed out for now due to bug 704989.", "author": "julian.reschke@gmx.de", "creation_time": "2011-11-28T12:50:36Z", "count": 11, "creator": "julian.reschke@gmx.de", "is_private": false}, {"bug_id": 685192, "count": 12, "time": "2017-09-13T18:38:55Z", "tags": [], "text": "Bulk change to priority: https://bugzilla.mozilla.org/show_bug.cgi?id=1399258", "author": "bug-husbandry-bot@mozilla.bugs", "creation_time": "2017-09-13T18:38:55Z", "creator": "bug-husbandry-bot@mozilla.bugs", "is_private": false, "id": 12658684, "raw_text": "Bulk change to priority: https://bugzilla.mozilla.org/show_bug.cgi?id=1399258", "attachment_id": null}]}}, "comments": {}}