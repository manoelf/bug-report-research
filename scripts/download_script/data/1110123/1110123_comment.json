{"bugs": {"1110123": {"comments": [{"bug_id": 1110123, "id": 9682599, "count": 0, "attachment_id": null, "time": "2014-12-11T13:44:58Z", "is_private": false, "raw_text": "User Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:34.0) Gecko/20100101 Firefox/34.0\nBuild ID: 20141126041045\n\nSteps to reproduce:\n\nIn Firefox extension:\nWhen e10s is enabled in Nightly I try to embed .xul page in extension html page by IFRAME.\n\nExample:\n\n<iframe src=\"chrome://addon/page.xul\" type=\"chrome\"></iframe>\n\n\nActual results:\n\nI am getting blank frame. I also tried to register XUL urls as \"about:addonpage\" url, but getting \"URL is incorrect error\", but this url works fine when entered in urlbar directly.\n\n\nExpected results:\n\nIframe should be loaded?\nWith e10s disabled iframe loads properly. There is any way to embed XUL into HTML by IFRAME when e10 is activated?", "creator": "awcalibr@gmail.com", "creation_time": "2014-12-11T13:44:58Z", "text": "User Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:34.0) Gecko/20100101 Firefox/34.0\nBuild ID: 20141126041045\n\nSteps to reproduce:\n\nIn Firefox extension:\nWhen e10s is enabled in Nightly I try to embed .xul page in extension html page by IFRAME.\n\nExample:\n\n<iframe src=\"chrome://addon/page.xul\" type=\"chrome\"></iframe>\n\n\nActual results:\n\nI am getting blank frame. I also tried to register XUL urls as \"about:addonpage\" url, but getting \"URL is incorrect error\", but this url works fine when entered in urlbar directly.\n\n\nExpected results:\n\nIframe should be loaded?\nWith e10s disabled iframe loads properly. There is any way to embed XUL into HTML by IFRAME when e10 is activated?", "author": "awcalibr@gmail.com", "tags": []}, {"raw_text": "Mike, do you have answers here? :-)", "creator": "gijskruitbosch+bugs@gmail.com", "text": "Mike, do you have answers here? :-)", "creation_time": "2014-12-11T15:08:20Z", "author": "gijskruitbosch+bugs@gmail.com", "tags": [], "bug_id": 1110123, "id": 9682978, "attachment_id": null, "time": "2014-12-11T15:08:20Z", "count": 1, "is_private": false}, {"is_private": false, "count": 2, "attachment_id": null, "time": "2014-12-11T15:21:31Z", "bug_id": 1110123, "id": 9683049, "author": "mconley@mozilla.com", "raw_text": "It's not entirely unsurprising that you're having a hard time display add-on provided XUL in content in an iframe. XUL in content is something that we're likely only going to support minimally, and there are certain bits of it (popups, for example) that simply will not work (and might cause tab crashes!).\n\nThe about: page problem is interesting, because we do have a shim that makes it so that add-ons can register about: pages and access them from the content process. The reason why you'd be able to access it from the URL bar is because we special-case most about: pages in the URL bar so that they open in the chrome process (notice that the underline goes away in the tab title - that means that the browser is no longer running in a remote process).\n\nI actually just landed a test to ensure that the about: shimming works and can be accessed in the content process, so this is particularly interesting for me.\n\nCan you attach your add-on, or a minimal add-on, that registers the about: page, and has the problem you describe?", "creation_time": "2014-12-11T15:21:31Z", "text": "It's not entirely unsurprising that you're having a hard time display add-on provided XUL in content in an iframe. XUL in content is something that we're likely only going to support minimally, and there are certain bits of it (popups, for example) that simply will not work (and might cause tab crashes!).\n\nThe about: page problem is interesting, because we do have a shim that makes it so that add-ons can register about: pages and access them from the content process. The reason why you'd be able to access it from the URL bar is because we special-case most about: pages in the URL bar so that they open in the chrome process (notice that the underline goes away in the tab title - that means that the browser is no longer running in a remote process).\n\nI actually just landed a test to ensure that the about: shimming works and can be accessed in the content process, so this is particularly interesting for me.\n\nCan you attach your add-on, or a minimal add-on, that registers the about: page, and has the problem you describe?", "creator": "mconley@mozilla.com", "tags": []}, {"author": "awcalibr@gmail.com", "raw_text": "", "creation_time": "2014-12-11T15:31:10Z", "text": "Created attachment 8535004\nextension", "creator": "awcalibr@gmail.com", "is_private": false, "time": "2014-12-11T15:31:10Z", "attachment_id": 8535004, "count": 3, "bug_id": 1110123, "id": 9683091, "tags": []}, {"tags": [], "author": "awcalibr@gmail.com", "creator": "awcalibr@gmail.com", "text": "Thank you for response, attachment added. You can see behaviour by accessing url chrome://fvd.speeddial/content/fvd_about_blank.html.", "creation_time": "2014-12-11T15:32:51Z", "raw_text": "Thank you for response, attachment added. You can see behaviour by accessing url chrome://fvd.speeddial/content/fvd_about_blank.html.", "time": "2014-12-11T15:32:51Z", "count": 4, "attachment_id": null, "is_private": false, "id": 9683096, "bug_id": 1110123}, {"id": 9695530, "bug_id": 1110123, "count": 5, "attachment_id": null, "time": "2014-12-15T18:09:40Z", "is_private": false, "creator": "mconley@mozilla.com", "creation_time": "2014-12-15T18:09:40Z", "text": "Ok, yes, I'm seeing this bug with your add-on. I have a feeling we're not shimming your about: handler because it's being registered via a chrome.manifest.\n\nI'm going to try to put together a minimal test case.", "raw_text": "Ok, yes, I'm seeing this bug with your add-on. I have a feeling we're not shimming your about: handler because it's being registered via a chrome.manifest.\n\nI'm going to try to put together a minimal test case.", "author": "mconley@mozilla.com", "tags": []}, {"author": "mconley@mozilla.com", "tags": [], "raw_text": "Added minimal testcase add-on. Install add-on, and then visit chrome://bug1110123/content/test.html.\n\nER: iframe should load about:bug1110123 (which should display a \"success\" message)\n\nAR: iframe should address isn't valid error.\n\nIt looks to me as if multiprocessShims.js doesn't try to interpose the nsIAboutModule defined in components/about_bug1110123.js, and registered in chrome.manifest.", "creator": "mconley@mozilla.com", "text": "Created attachment 8536698\nbug-1110123-test-addon.xpi\n\nAdded minimal testcase add-on. Install add-on, and then visit chrome://bug1110123/content/test.html.\n\nER: iframe should load about:bug1110123 (which should display a \"success\" message)\n\nAR: iframe should address isn't valid error.\n\nIt looks to me as if multiprocessShims.js doesn't try to interpose the nsIAboutModule defined in components/about_bug1110123.js, and registered in chrome.manifest.", "creation_time": "2014-12-15T18:35:29Z", "attachment_id": 8536698, "count": 6, "time": "2014-12-15T18:35:29Z", "is_private": false, "bug_id": 1110123, "id": 9695694}, {"author": "a.m.naaktgeboren@gmail.com", "tags": [], "raw_text": "..we only shim in js. this would be c++", "creation_time": "2014-12-16T21:20:40Z", "text": "..we only shim in js. this would be c++", "creator": "a.m.naaktgeboren@gmail.com", "is_private": false, "count": 7, "time": "2014-12-16T21:20:40Z", "attachment_id": null, "bug_id": 1110123, "id": 9701336}, {"count": 8, "attachment_id": null, "time": "2015-01-12T17:48:15Z", "is_private": false, "bug_id": 1110123, "id": 9782781, "author": "pavel.sherbakov@gmail.com", "tags": [], "raw_text": "Did you fix it or it's in process? We can't make support of es10 in our extension having this bug. This extension is of the highest ranked extensions on Mozilla.", "creator": "pavel.sherbakov@gmail.com", "creation_time": "2015-01-12T17:48:15Z", "text": "Did you fix it or it's in process? We can't make support of es10 in our extension having this bug. This extension is of the highest ranked extensions on Mozilla."}, {"text": "Chris, problem with that extension which is also mine.\nhttps://addons.mozilla.org/en-US/firefox/addon/fvd-speed-dial/", "creation_time": "2015-01-13T00:11:14Z", "creator": "pavel.sherbakov@gmail.com", "raw_text": "Chris, problem with that extension which is also mine.\nhttps://addons.mozilla.org/en-US/firefox/addon/fvd-speed-dial/", "tags": [], "author": "pavel.sherbakov@gmail.com", "id": 9784835, "bug_id": 1110123, "is_private": false, "time": "2015-01-13T00:11:14Z", "attachment_id": null, "count": 9}, {"count": 10, "attachment_id": null, "time": "2015-06-01T12:40:57Z", "is_private": false, "id": 10331226, "bug_id": 1110123, "author": "gkrizsanits@mozilla.com", "creator": "gkrizsanits@mozilla.com", "text": "(In reply to Pavel Scherbakov from comment #8)\n> Did you fix it or it's in process? We can't make support of es10 in our\n> extension having this bug. This extension is of the highest ranked\n> extensions on Mozilla.\n\nI'm looking into this but it seems like a very hard problem. What you can do for sure and it should work already is to register your protocol from script instead of using the chrome.manifest. So something like Components.manager.nsIComponentRegistrar.registerFactory(CLASS_ID, CLASS_NAME, CONTRACT_ID, FACTORY);\n\nThat will trigger the shim layer to take care of your protocol from the content process as well.", "creation_time": "2015-06-01T12:40:57Z", "raw_text": "(In reply to Pavel Scherbakov from comment #8)\n> Did you fix it or it's in process? We can't make support of es10 in our\n> extension having this bug. This extension is of the highest ranked\n> extensions on Mozilla.\n\nI'm looking into this but it seems like a very hard problem. What you can do for sure and it should work already is to register your protocol from script instead of using the chrome.manifest. So something like Components.manager.nsIComponentRegistrar.registerFactory(CLASS_ID, CLASS_NAME, CONTRACT_ID, FACTORY);\n\nThat will trigger the shim layer to take care of your protocol from the content process as well.", "tags": []}, {"tags": [], "author": "gkrizsanits@mozilla.com", "creator": "gkrizsanits@mozilla.com", "creation_time": "2015-06-01T12:52:16Z", "text": "Whoops hit enter accidentally, and sent the needinfo too soon. Anyway, I looked into the chrome.manifest usage among add-ons and it worries me quite a bit. I see tons of about protocol usages (for which the above mentioned workaround should work in most cases I guess) but there are other interesting cases. There are about 2-300 add-ons that registers some contract that we might care about (more than half of them are protocol related).\n\nHere are the types of contracts we might care about from the content process:\n\n- other network protocols (irc,ircs,geolocater,mailto,etc) actually even totally custom ones, one might use the add-on for injecting an iframe with that protocol in the src...\n- content-policy\n- streamconv\n- uriloader\n- calendar\n- mime\n\nHonestly, I don't see an easy way to fix this problem, so I'm kind of stuck here. Will keep thinking about what we could do about all these, but was wondering about your opinion too.", "raw_text": "Whoops hit enter accidentally, and sent the needinfo too soon. Anyway, I looked into the chrome.manifest usage among add-ons and it worries me quite a bit. I see tons of about protocol usages (for which the above mentioned workaround should work in most cases I guess) but there are other interesting cases. There are about 2-300 add-ons that registers some contract that we might care about (more than half of them are protocol related).\n\nHere are the types of contracts we might care about from the content process:\n\n- other network protocols (irc,ircs,geolocater,mailto,etc) actually even totally custom ones, one might use the add-on for injecting an iframe with that protocol in the src...\n- content-policy\n- streamconv\n- uriloader\n- calendar\n- mime\n\nHonestly, I don't see an easy way to fix this problem, so I'm kind of stuck here. Will keep thinking about what we could do about all these, but was wondering about your opinion too.", "time": "2015-06-01T12:52:16Z", "count": 11, "attachment_id": null, "is_private": false, "id": 10331271, "bug_id": 1110123}, {"author": "gkrizsanits@mozilla.com", "raw_text": "Maybe when we parse the manifest, and register the factories, we could check the factory object if it implements some special interface. The interface would have a function that sends out a message to the child processes to register a placeholder factory. This special factory would return a proxy object around a CPOW. So each time someone creates a new instance in the content process, we create one in the chrome process as well, and since native methods can't deal with CPOWs we just wrap the CPOW in a proxy object. It's quite crazy but I don't really have any better ideas... It's also somewhat limiting, but might be better than what we have...", "text": "Maybe when we parse the manifest, and register the factories, we could check the factory object if it implements some special interface. The interface would have a function that sends out a message to the child processes to register a placeholder factory. This special factory would return a proxy object around a CPOW. So each time someone creates a new instance in the content process, we create one in the chrome process as well, and since native methods can't deal with CPOWs we just wrap the CPOW in a proxy object. It's quite crazy but I don't really have any better ideas... It's also somewhat limiting, but might be better than what we have...", "creation_time": "2015-06-01T18:24:22Z", "creator": "gkrizsanits@mozilla.com", "is_private": false, "time": "2015-06-01T18:24:22Z", "count": 12, "attachment_id": null, "bug_id": 1110123, "id": 10332423, "tags": []}, {"raw_text": "I think these add-ons will just have to be fixed manually.", "text": "I think these add-ons will just have to be fixed manually.", "creation_time": "2015-06-02T23:43:10Z", "creator": "bill.mccloskey@gmail.com", "author": "bill.mccloskey@gmail.com", "tags": [], "bug_id": 1110123, "id": 10338643, "is_private": false, "time": "2015-06-02T23:43:10Z", "attachment_id": null, "count": 13}, {"author": "gkrizsanits@mozilla.com", "tags": [], "raw_text": "(In reply to Bill McCloskey (:billm) from comment #13)\n> I think these add-ons will just have to be fixed manually.\n\nI guess then we should write some docs about this. CC-ing Will to put this on his radar. I think both the chrome.manifest docs and the limitation of frame scripts should be updated. An example of how to get around this problem would be nice too. In a nutshell add-ons cannot use the chrome.manifest to register anything that is available from the content process. For that the factory has to be registered manually from a process script.", "creation_time": "2015-06-03T09:54:03Z", "text": "(In reply to Bill McCloskey (:billm) from comment #13)\n> I think these add-ons will just have to be fixed manually.\n\nI guess then we should write some docs about this. CC-ing Will to put this on his radar. I think both the chrome.manifest docs and the limitation of frame scripts should be updated. An example of how to get around this problem would be nice too. In a nutshell add-ons cannot use the chrome.manifest to register anything that is available from the content process. For that the factory has to be registered manually from a process script.", "creator": "gkrizsanits@mozilla.com", "is_private": false, "count": 14, "time": "2015-06-03T09:54:03Z", "attachment_id": null, "bug_id": 1110123, "id": 10340029}, {"author": "multirevenue@gmail.com", "tags": [], "raw_text": "Hi, We just uploaded new version compatible with es10. It fully redesigned. Please check ASP.", "text": "Hi, We just uploaded new version compatible with es10. It fully redesigned. Please check ASP.", "creation_time": "2016-09-06T19:49:39Z", "creator": "multirevenue@gmail.com", "is_private": false, "count": 15, "time": "2016-09-06T19:49:39Z", "attachment_id": null, "bug_id": 1110123, "id": 11689652}]}}, "comments": {}}