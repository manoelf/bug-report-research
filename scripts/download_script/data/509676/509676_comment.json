{"comments": {}, "bugs": {"509676": {"comments": [{"raw_text": "Mozilla/5.0 (X11; U; SunOS i86pc; en-US; rv:1.9.1.1) Gecko/20090803 Firefox/3.5.1\n\n\nSteps to Perform:\n\n   1. Go to Bookmarks | Organize Bookmarks\n   2. Add a tag to a bookmark or set of bookmarks within the library.\n   3. Go to the newly created tag folder, via the left pane, and drag-and-drop it to the Bookmarks Toolbar folder. View the contents of the newly added instance.\n   4. Repeat step 3 for the Bookmarks menu.\n\n\t\nExpected Results:\n\nAfter step 3 and 4, a new instance of step 2's tag folder should be added to the standard point. It's contents should include the tagged bookmark(s) and the original tag folder should not be removed from the general Tags folder.\n\nActual Results:\nNothing happened.\nIn error console, there is an error as below:\nError: uncaught exception: [Exception... \"Component returned failure code: 0x80070057 (NS_ERROR_ILLEGAL_VALUE) [nsINavBookmarksService.getFolderIdForItem]\"  nsresult: \"0x80070057 (NS_ERROR_ILLEGAL_VALUE)\"  location: \"JS frame :: file:///usr/lib/firefox/components/nsPlacesTransactionsService.js :: placesMoveItemTransactions :: line 570\"  data: no]", "is_private": false, "creation_time": "2009-08-11T09:42:43Z", "author": "vicky.sun@sun.com", "count": 0, "attachment_id": null, "creator": "vicky.sun@sun.com", "bug_id": 509676, "id": 4242047, "text": "Mozilla/5.0 (X11; U; SunOS i86pc; en-US; rv:1.9.1.1) Gecko/20090803 Firefox/3.5.1\n\n\nSteps to Perform:\n\n   1. Go to Bookmarks | Organize Bookmarks\n   2. Add a tag to a bookmark or set of bookmarks within the library.\n   3. Go to the newly created tag folder, via the left pane, and drag-and-drop it to the Bookmarks Toolbar folder. View the contents of the newly added instance.\n   4. Repeat step 3 for the Bookmarks menu.\n\n\t\nExpected Results:\n\nAfter step 3 and 4, a new instance of step 2's tag folder should be added to the standard point. It's contents should include the tagged bookmark(s) and the original tag folder should not be removed from the general Tags folder.\n\nActual Results:\nNothing happened.\nIn error console, there is an error as below:\nError: uncaught exception: [Exception... \"Component returned failure code: 0x80070057 (NS_ERROR_ILLEGAL_VALUE) [nsINavBookmarksService.getFolderIdForItem]\"  nsresult: \"0x80070057 (NS_ERROR_ILLEGAL_VALUE)\"  location: \"JS frame :: file:///usr/lib/firefox/components/nsPlacesTransactionsService.js :: placesMoveItemTransactions :: line 570\"  data: no]", "time": "2009-08-11T09:42:43Z", "tags": []}, {"bug_id": 509676, "tags": [], "time": "2009-08-11T10:18:04Z", "id": 4242072, "text": "also reproducible with mozilla-central HEAD.", "author": "ginnchen+exoracle@gmail.com", "creation_time": "2009-08-11T10:18:04Z", "is_private": false, "raw_text": "also reproducible with mozilla-central HEAD.", "creator": "ginnchen+exoracle@gmail.com", "attachment_id": null, "count": 1}, {"text": "Also broken on Linux.\n\n372       case PlacesUtils.TYPE_X_MOZ_PLACE:\n373         if (data.id <= 0) // non-bookmark item\n374           return this._getURIItemCopyTransaction(data, container, index);\n375   \n376         if (copy) {\n377           // Copying a child of a live-bookmark by itself should result\n378           // as a new normal bookmark item (bug 376731)\n379           return this._getBookmarkItemCopyTransaction(data, container, index,\n380                                                       [\"livemark/bookmarkFeedURI\"]);\n381         }\n382         else\n383           return this.ptm.moveItem(data.id, container, index);\n\ndata.id is undefined.\ncopy is false on GNOME, because drop effect is \"link\" not \"copy\".\n\nOn Mac, data.id is also undefined, but drop effect is \"copy\".", "id": 4242117, "tags": [], "time": "2009-08-11T11:04:01Z", "bug_id": 509676, "attachment_id": null, "count": 2, "creator": "ginnchen+exoracle@gmail.com", "is_private": false, "raw_text": "Also broken on Linux.\n\n372       case PlacesUtils.TYPE_X_MOZ_PLACE:\n373         if (data.id <= 0) // non-bookmark item\n374           return this._getURIItemCopyTransaction(data, container, index);\n375   \n376         if (copy) {\n377           // Copying a child of a live-bookmark by itself should result\n378           // as a new normal bookmark item (bug 376731)\n379           return this._getBookmarkItemCopyTransaction(data, container, index,\n380                                                       [\"livemark/bookmarkFeedURI\"]);\n381         }\n382         else\n383           return this.ptm.moveItem(data.id, container, index);\n\ndata.id is undefined.\ncopy is false on GNOME, because drop effect is \"link\" not \"copy\".\n\nOn Mac, data.id is also undefined, but drop effect is \"copy\".", "author": "ginnchen+exoracle@gmail.com", "creation_time": "2009-08-11T11:04:01Z"}, {"author": "ginnchen+exoracle@gmail.com", "creation_time": "2009-08-11T11:54:01Z", "is_private": false, "raw_text": "This might be a regression of Bug 371823.\n\nI guess, if (data.id <= 0) should be if (typeof data.id == 'undefined' || data.id <= 0)", "creator": "ginnchen+exoracle@gmail.com", "attachment_id": null, "count": 3, "bug_id": 509676, "tags": [], "time": "2009-08-11T11:54:01Z", "id": 4242171, "text": "This might be a regression of Bug 371823.\n\nI guess, if (data.id <= 0) should be if (typeof data.id == 'undefined' || data.id <= 0)"}, {"count": 4, "attachment_id": null, "creator": "adw@mozilla.com", "raw_text": "Probably related: bug 502192, bug 484489", "is_private": false, "creation_time": "2009-08-11T16:38:48Z", "author": "adw@mozilla.com", "text": "Probably related: bug 502192, bug 484489", "id": 4242559, "time": "2009-08-11T16:38:48Z", "tags": [], "bug_id": 509676}, {"creation_time": "2009-08-11T17:06:12Z", "author": "ginnchen+exoracle@gmail.com", "raw_text": "", "is_private": false, "creator": "ginnchen+exoracle@gmail.com", "count": 5, "attachment_id": null, "bug_id": 509676, "time": "2009-08-11T17:06:12Z", "tags": [], "id": 4242645, "text": "*** Bug 502192 has been marked as a duplicate of this bug. ***"}, {"raw_text": "", "is_private": false, "creation_time": "2009-08-11T17:06:16Z", "author": "ginnchen+exoracle@gmail.com", "count": 6, "attachment_id": null, "creator": "ginnchen+exoracle@gmail.com", "bug_id": 509676, "id": 4242647, "text": "*** Bug 484489 has been marked as a duplicate of this bug. ***", "time": "2009-08-11T17:06:16Z", "tags": []}, {"raw_text": "can i get a better description of steps 3 and 4?\ni should drag a tag container from library to the toolbar, and then also drag a tag container to bookmarks menu?\n\nAnd this is reproduceable only in Linux and SunOS?", "is_private": false, "creation_time": "2009-09-05T12:08:21Z", "author": "mak@mozilla.com", "count": 7, "attachment_id": null, "creator": "mak@mozilla.com", "bug_id": 509676, "id": 4284838, "text": "can i get a better description of steps 3 and 4?\ni should drag a tag container from library to the toolbar, and then also drag a tag container to bookmarks menu?\n\nAnd this is reproduceable only in Linux and SunOS?", "time": "2009-09-05T12:08:21Z", "tags": []}, {"count": 8, "attachment_id": null, "creator": "vicky.sun@sun.com", "raw_text": "(In reply to comment #7)\n> i should drag a tag container from library to the toolbar, and then also drag a\n> tag container to bookmarks menu?\nNo, the step3 and step4 are not precedence relationship. the purpose of the test case is to prove the tag folder can be copied to Bookmark toolbar or Bookmark menu\n> \n> And this is reproduceable only in Linux and SunOS?\nI haven't other OS at hand now. But I know Mac is ok.", "is_private": false, "creation_time": "2009-09-07T05:37:21Z", "author": "vicky.sun@sun.com", "text": "(In reply to comment #7)\n> i should drag a tag container from library to the toolbar, and then also drag a\n> tag container to bookmarks menu?\nNo, the step3 and step4 are not precedence relationship. the purpose of the test case is to prove the tag folder can be copied to Bookmark toolbar or Bookmark menu\n> \n> And this is reproduceable only in Linux and SunOS?\nI haven't other OS at hand now. But I know Mac is ok.", "id": 4286015, "time": "2009-09-07T05:37:21Z", "tags": [], "bug_id": 509676}, {"attachment_id": null, "count": 9, "creator": "ginnchen+exoracle@gmail.com", "is_private": false, "raw_text": "(In reply to comment #7)\n> can i get a better description of steps 3 and 4?\n> i should drag a tag container from library to the toolbar, and then also drag a\n> tag container to bookmarks menu?\n> \n> And this is reproduceable only in Linux and SunOS?\n\nDrag it to either toolbar or bookmark menu or bookmark folder would fail on Linux and SunOS.\n\nComment #2 and comment #3 explained why it fails, and why it doesn't on Mac OS X.", "author": "ginnchen+exoracle@gmail.com", "creation_time": "2009-09-08T07:26:05Z", "text": "(In reply to comment #7)\n> can i get a better description of steps 3 and 4?\n> i should drag a tag container from library to the toolbar, and then also drag a\n> tag container to bookmarks menu?\n> \n> And this is reproduceable only in Linux and SunOS?\n\nDrag it to either toolbar or bookmark menu or bookmark folder would fail on Linux and SunOS.\n\nComment #2 and comment #3 explained why it fails, and why it doesn't on Mac OS X.", "id": 4287151, "tags": [], "time": "2009-09-08T07:26:05Z", "bug_id": 509676}, {"attachment_id": null, "count": 10, "creator": "mak@mozilla.com", "is_private": false, "raw_text": "yeah, data.id is undefined on windows too, so that's not the problem (still a bug though), the copy does not happen due to the \"link\" dropEffect issue.", "author": "mak@mozilla.com", "creation_time": "2009-09-08T23:28:55Z", "id": 4288783, "text": "yeah, data.id is undefined on windows too, so that's not the problem (still a bug though), the copy does not happen due to the \"link\" dropEffect issue.", "tags": [], "time": "2009-09-08T23:28:55Z", "bug_id": 509676}, {"bug_id": 509676, "tags": [], "time": "2009-09-09T01:46:02Z", "id": 4289002, "text": "Created attachment 399378\npatch v1.0\n\nOur utils are so complex to follow, they are doing fancy loops and calls to accomplish quite easy tasks. They really need a cleanup, fixing a bug like this takes a lot of time just to follow all serialization calls.", "author": "mak@mozilla.com", "creation_time": "2009-09-09T01:46:02Z", "is_private": false, "raw_text": "Our utils are so complex to follow, they are doing fancy loops and calls to accomplish quite easy tasks. They really need a cleanup, fixing a bug like this takes a lot of time just to follow all serialization calls.", "creator": "mak@mozilla.com", "attachment_id": 399378, "count": 11}, {"tags": [], "time": "2009-09-09T01:58:21Z", "text": "Comment on attachment 399378\npatch v1.0\n\nforgot something", "id": 4289014, "bug_id": 509676, "creator": "mak@mozilla.com", "attachment_id": 399378, "count": 12, "author": "mak@mozilla.com", "creation_time": "2009-09-09T01:58:21Z", "is_private": false, "raw_text": "forgot something"}, {"attachment_id": 399384, "count": 13, "is_private": false, "author": "mak@mozilla.com", "creation_time": "2009-09-09T02:20:10Z", "creator": "mak@mozilla.com", "raw_text": "this one is correct", "text": "Created attachment 399384\npatch v1.1\n\nthis one is correct", "id": 4289045, "tags": [], "time": "2009-09-09T02:20:10Z", "bug_id": 509676}, {"author": "hzbz@pm.me", "creation_time": "2009-09-09T19:48:54Z", "is_private": false, "raw_text": "\n>+          // Mark root folders.\n>+          if (aJSNode.id == self.bookmarks.placesRoot)\n>+            aJSNode.root = \"placesRoot\";\n>+          else if (aJSNode.id == self.bookmarks.bookmarksMenuFolder)\n>+            aJSNode.root = \"bookmarksMenuFolder\";\n>+          else if (aJSNode.id == self.bookmarks.tagsFolder)\n>+            aJSNode.root = \"tagsFolder\";\n>+          else if (aJSNode.id == self.bookmarks.unfiledBookmarksFolder)\n>+            aJSNode.root = \"unfiledBookmarksFolder\";\n>+          else if (aJSNode.id == self.bookmarks.toolbarFolder)\n>+            aJSNode.root = \"toolbarFolder\";\n>+        }\n\nwe should probably make the roots into consts for all of utils.js to reduce all the xpconnect traversals. please file a followup for this, or fix here.\n\nr=me otherwise.", "creator": "hzbz@pm.me", "attachment_id": 399384, "count": 14, "bug_id": 509676, "tags": [], "time": "2009-09-09T19:48:54Z", "text": "Comment on attachment 399384\npatch v1.1\n\n\n>+          // Mark root folders.\n>+          if (aJSNode.id == self.bookmarks.placesRoot)\n>+            aJSNode.root = \"placesRoot\";\n>+          else if (aJSNode.id == self.bookmarks.bookmarksMenuFolder)\n>+            aJSNode.root = \"bookmarksMenuFolder\";\n>+          else if (aJSNode.id == self.bookmarks.tagsFolder)\n>+            aJSNode.root = \"tagsFolder\";\n>+          else if (aJSNode.id == self.bookmarks.unfiledBookmarksFolder)\n>+            aJSNode.root = \"unfiledBookmarksFolder\";\n>+          else if (aJSNode.id == self.bookmarks.toolbarFolder)\n>+            aJSNode.root = \"toolbarFolder\";\n>+        }\n\nwe should probably make the roots into consts for all of utils.js to reduce all the xpconnect traversals. please file a followup for this, or fix here.\n\nr=me otherwise.", "id": 4290440}, {"creation_time": "2009-09-11T12:49:07Z", "author": "mak@mozilla.com", "raw_text": "addressed comments, replaced some instance of PU.bookmarks.some_root, that is bad.", "is_private": false, "creator": "mak@mozilla.com", "count": 15, "attachment_id": 400012, "bug_id": 509676, "time": "2009-09-11T12:49:07Z", "tags": [], "id": 4294063, "text": "Created attachment 400012\npatch v1.2\n\naddressed comments, replaced some instance of PU.bookmarks.some_root, that is bad."}, {"attachment_id": null, "count": 16, "creator": "mak@mozilla.com", "is_private": false, "raw_text": "http://hg.mozilla.org/mozilla-central/rev/bcca5bf83070", "author": "mak@mozilla.com", "creation_time": "2009-09-11T13:28:06Z", "text": "http://hg.mozilla.org/mozilla-central/rev/bcca5bf83070", "id": 4294127, "tags": [], "time": "2009-09-11T13:28:06Z", "bug_id": 509676}, {"is_private": false, "author": "mak@mozilla.com", "creation_time": "2009-09-11T14:13:31Z", "attachment_id": 400012, "count": 17, "raw_text": "asking approval, hard to test automatically, but small change.", "creator": "mak@mozilla.com", "bug_id": 509676, "id": 4294207, "text": "Comment on attachment 400012\npatch v1.2\n\nasking approval, hard to test automatically, but small change.", "tags": [], "time": "2009-09-11T14:13:31Z"}, {"creator": "mbeltzner@gmail.com", "raw_text": "a192=beltzner, if we do this, needs to be for beta", "id": 4309895, "text": "Comment on attachment 400012\npatch v1.2\n\na192=beltzner, if we do this, needs to be for beta", "tags": [], "time": "2009-09-21T16:14:36Z", "bug_id": 509676, "attachment_id": 400012, "count": 18, "is_private": false, "author": "mbeltzner@gmail.com", "creation_time": "2009-09-21T16:14:36Z"}, {"id": 4311596, "text": "http://hg.mozilla.org/releases/mozilla-1.9.2/rev/79ae4d37ab67", "tags": [], "time": "2009-09-22T10:06:46Z", "bug_id": 509676, "attachment_id": null, "count": 19, "creator": "mak@mozilla.com", "is_private": false, "raw_text": "http://hg.mozilla.org/releases/mozilla-1.9.2/rev/79ae4d37ab67", "author": "mak@mozilla.com", "creation_time": "2009-09-22T10:06:46Z"}, {"creator": "ginnchen+exoracle@gmail.com", "count": 20, "attachment_id": null, "creation_time": "2009-10-15T05:04:08Z", "author": "ginnchen+exoracle@gmail.com", "raw_text": "", "is_private": false, "time": "2009-10-15T05:04:08Z", "tags": [], "id": 4347310, "text": "*** Bug 521739 has been marked as a duplicate of this bug. ***", "bug_id": 509676}, {"attachment_id": null, "count": 21, "creator": "gerv@mozilla.org", "is_private": false, "raw_text": "Bug 451915 - move Firefox/Places bugs to Firefox/Bookmarks and History. Remove all bugspam from this move by filtering for the string \"places-to-b-and-h\".\n\nIn Thunderbird 3.0b, you do that as follows:\nTools | Message Filters\nMake sure the correct account is selected. Click \"New\"\nConditions: Body   contains   places-to-b-and-h\nChange the action to \"Delete Message\".\nSelect \"Manually Run\" from the dropdown at the top.\nClick OK.\n\nSelect the filter in the list, make sure \"Inbox\" is selected at the bottom, and click \"Run Now\". This should delete all the bugspam. You can then delete the filter.\n\nGerv", "author": "gerv@mozilla.org", "creation_time": "2009-11-26T15:19:32Z", "text": "Bug 451915 - move Firefox/Places bugs to Firefox/Bookmarks and History. Remove all bugspam from this move by filtering for the string \"places-to-b-and-h\".\n\nIn Thunderbird 3.0b, you do that as follows:\nTools | Message Filters\nMake sure the correct account is selected. Click \"New\"\nConditions: Body   contains   places-to-b-and-h\nChange the action to \"Delete Message\".\nSelect \"Manually Run\" from the dropdown at the top.\nClick OK.\n\nSelect the filter in the list, make sure \"Inbox\" is selected at the bottom, and click \"Run Now\". This should delete all the bugspam. You can then delete the filter.\n\nGerv", "id": 4423823, "tags": [], "time": "2009-11-26T15:19:32Z", "bug_id": 509676}]}}}