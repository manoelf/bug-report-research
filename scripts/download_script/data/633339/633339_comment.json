{"bugs": {"633339": {"comments": [{"creation_time": "2011-02-10T23:07:32Z", "author": "hskupin@gmail.com", "text": "Created attachment 511528\nTest profile\n\nMozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:2.0b12pre) Gecko/20110209 Firefox/4.0b12pre ID:20110209030359\n\nIf you are trying to migrate the Sage add-on (https://addons.mozilla.org/de/firefox/addon/sage/) by placing it's XPI file (named as {a6ca9b3b-5e52-4f47-85d8-cca35bb57596}.xpi) into the extensions folder, Firefox completely locks up after the one and only window magically disappeared.\n\nSteps:\n1. Create a fresh profile\n2. Download the sage add-on and rename the file to {a6ca9b3b-5e52-4f47-85d8-cca35bb57596}.xpi\n3. Copy the file into the extensions folder of the new profile\n4. Start Firefox\n\nThe modal dialog for the default browser comes up, but you are not able to close it. Firefox doesn't respond, and after some seconds the window magically disappears. After that the application isn't responding anymore.\n\nI have attached a default profile which can be used for testing.", "creator": "hskupin@gmail.com", "attachment_id": 511528, "id": 5271059, "count": 0, "bug_id": 633339, "raw_text": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:2.0b12pre) Gecko/20110209 Firefox/4.0b12pre ID:20110209030359\n\nIf you are trying to migrate the Sage add-on (https://addons.mozilla.org/de/firefox/addon/sage/) by placing it's XPI file (named as {a6ca9b3b-5e52-4f47-85d8-cca35bb57596}.xpi) into the extensions folder, Firefox completely locks up after the one and only window magically disappeared.\n\nSteps:\n1. Create a fresh profile\n2. Download the sage add-on and rename the file to {a6ca9b3b-5e52-4f47-85d8-cca35bb57596}.xpi\n3. Copy the file into the extensions folder of the new profile\n4. Start Firefox\n\nThe modal dialog for the default browser comes up, but you are not able to close it. Firefox doesn't respond, and after some seconds the window magically disappears. After that the application isn't responding anymore.\n\nI have attached a default profile which can be used for testing.", "tags": [], "is_private": false, "time": "2011-02-10T23:07:32Z"}, {"creation_time": "2011-02-10T23:10:46Z", "text": "Does this happen while updating Firefox to 4.0 or installing Sage the usual way?", "creator": "fryn@frankyan.com", "attachment_id": null, "id": 5271070, "author": "fryn@frankyan.com", "bug_id": 633339, "raw_text": "Does this happen while updating Firefox to 4.0 or installing Sage the usual way?", "count": 1, "time": "2011-02-10T23:10:46Z", "tags": [], "is_private": false}, {"creation_time": "2011-02-10T23:23:17Z", "author": "dtownsend@mozilla.com", "attachment_id": null, "id": 5271107, "creator": "dtownsend@mozilla.com", "text": "I can't reproduce this on my machine, can we get a stack from the hang?", "count": 2, "raw_text": "I can't reproduce this on my machine, can we get a stack from the hang?", "bug_id": 633339, "is_private": false, "tags": [], "time": "2011-02-10T23:23:17Z"}, {"time": "2011-02-10T23:25:18Z", "is_private": false, "tags": [], "raw_text": "Oh, yes! It does indeed. Install Sage via the Add-ons Manager search feature and it will result in the same situation after the restart.", "bug_id": 633339, "count": 3, "attachment_id": null, "id": 5271112, "text": "Oh, yes! It does indeed. Install Sage via the Add-ons Manager search feature and it will result in the same situation after the restart.", "creator": "hskupin@gmail.com", "author": "hskupin@gmail.com", "creation_time": "2011-02-10T23:25:18Z"}, {"bug_id": 633339, "count": 4, "time": "2011-02-10T23:31:20Z", "creator": "hskupin@gmail.com", "author": "hskupin@gmail.com", "raw_text": "Ok, more testing shows that this hang only happens when the default browser check is shown after the restart. Here updated steps:\n\n1. Register Firefox as default browser\n2. Start Minefield with a fresh profile and hit escape to close the default browser dialog\n3. Install Sage via the add-ons manager\n4. Restart Minefield\n\nAfter the restart the modal dialog should appear again, and you should see the hang.", "tags": [], "is_private": false, "creation_time": "2011-02-10T23:31:20Z", "text": "Ok, more testing shows that this hang only happens when the default browser check is shown after the restart. Here updated steps:\n\n1. Register Firefox as default browser\n2. Start Minefield with a fresh profile and hit escape to close the default browser dialog\n3. Install Sage via the add-ons manager\n4. Restart Minefield\n\nAfter the restart the modal dialog should appear again, and you should see the hang.", "attachment_id": null, "id": 5271126}, {"creator": "hskupin@gmail.com", "author": "hskupin@gmail.com", "time": "2011-02-10T23:45:10Z", "bug_id": 633339, "count": 5, "text": "Same behavior is visible for older branches. It also seems to be a mac only bug.", "id": 5271167, "attachment_id": null, "creation_time": "2011-02-10T23:45:10Z", "tags": [], "is_private": false, "raw_text": "Same behavior is visible for older branches. It also seems to be a mac only bug."}, {"bug_id": 633339, "raw_text": "A simplified testcase is this JS attached to the main window:\n\nwindow.addEventListener(\"load\", function() {\n  Cc[\"@mozilla.org/toolkit/app-startup;1\"]\n    .getService(Ci.nsIAppStartup)\n    .quit(Ci.nsIAppStartup.eForceQuit | Ci.nsIAppStartup.eRestart);\n}, false);\n\nAs long as the browser shows the default browser UI on startup and something tried to restart with eForceQuit then we hang (eAttemptQuit works ok). The stacks I managed to find suggest we are getting stuck in an event loop somewhere.", "count": 6, "time": "2011-02-10T23:54:17Z", "tags": [], "is_private": false, "creation_time": "2011-02-10T23:54:17Z", "creator": "dtownsend@mozilla.com", "text": "A simplified testcase is this JS attached to the main window:\n\nwindow.addEventListener(\"load\", function() {\n  Cc[\"@mozilla.org/toolkit/app-startup;1\"]\n    .getService(Ci.nsIAppStartup)\n    .quit(Ci.nsIAppStartup.eForceQuit | Ci.nsIAppStartup.eRestart);\n}, false);\n\nAs long as the browser shows the default browser UI on startup and something tried to restart with eForceQuit then we hang (eAttemptQuit works ok). The stacks I managed to find suggest we are getting stuck in an event loop somewhere.", "attachment_id": null, "id": 5271194, "author": "dtownsend@mozilla.com"}, {"time": "2011-02-10T23:55:04Z", "bug_id": 633339, "count": 7, "creator": "dtownsend@mozilla.com", "author": "dtownsend@mozilla.com", "is_private": false, "tags": [], "raw_text": "This is a simplified testcase", "attachment_id": 511549, "id": 5271195, "text": "Created attachment 511549\ntestcase\n\nThis is a simplified testcase", "creation_time": "2011-02-10T23:55:04Z"}, {"time": "2011-02-10T23:56:43Z", "is_private": false, "tags": [], "raw_text": "Not a regression and only for mac users who have the default browser dialog showing on the first startup with this add-on installed so I don't think this blocks. We should reach out to the add-on author to see if they can fix the issue on their side though.", "bug_id": 633339, "count": 8, "attachment_id": null, "id": 5271201, "creator": "dtownsend@mozilla.com", "text": "Not a regression and only for mac users who have the default browser dialog showing on the first startup with this add-on installed so I don't think this blocks. We should reach out to the add-on author to see if they can fix the issue on their side though.", "author": "dtownsend@mozilla.com", "creation_time": "2011-02-10T23:56:43Z"}, {"count": 9, "bug_id": 633339, "time": "2011-02-11T16:42:08Z", "author": "jorgev@fastmail.fm", "creator": "jorgev@fastmail.fm", "raw_text": "Adding author to CC list.", "tags": [], "is_private": false, "creation_time": "2011-02-11T16:42:08Z", "text": "Adding author to CC list.", "attachment_id": null, "id": 5272877}, {"time": "2011-03-18T04:33:18Z", "tags": [], "is_private": false, "bug_id": 633339, "raw_text": "Thanks for the heads up.  I'll see if I can do something about this in the next release.\n\nhttp://code.google.com/p/sage/issues/detail?id=52", "count": 10, "creator": "petea@jhu.edu", "text": "Thanks for the heads up.  I'll see if I can do something about this in the next release.\n\nhttp://code.google.com/p/sage/issues/detail?id=52", "id": 5352713, "attachment_id": null, "author": "petea@jhu.edu", "creation_time": "2011-03-18T04:33:18Z"}, {"time": "2011-03-23T08:03:19Z", "is_private": false, "tags": [], "raw_text": "I've switched to using eAttemptQuit in Sage 1.4.10 (currently pending AMO approval) and this seems to prevent the hang in Firefox 4.  However, Firefox 3.6 on Mac still hangs in this scenario.", "bug_id": 633339, "count": 11, "attachment_id": null, "id": 5361967, "text": "I've switched to using eAttemptQuit in Sage 1.4.10 (currently pending AMO approval) and this seems to prevent the hang in Firefox 4.  However, Firefox 3.6 on Mac still hangs in this scenario.", "creator": "petea@jhu.edu", "author": "petea@jhu.edu", "creation_time": "2011-03-23T08:03:19Z"}, {"author": "passfree@gmail.com", "id": 5874355, "attachment_id": null, "text": "Any news on this one?", "creator": "passfree@gmail.com", "creation_time": "2011-11-27T18:01:00Z", "is_private": false, "tags": [], "time": "2011-11-27T18:01:00Z", "count": 12, "raw_text": "Any news on this one?", "bug_id": 633339}, {"creation_time": "2012-05-04T02:46:09Z", "id": 6279097, "attachment_id": null, "text": "This should no longer be an issue for Sage on recent releases of Firefox.", "raw_text": "This should no longer be an issue for Sage on recent releases of Firefox.", "is_private": false, "tags": [], "author": "petea@jhu.edu", "creator": "petea@jhu.edu", "count": 13, "bug_id": 633339, "time": "2012-05-04T02:46:09Z"}]}}, "comments": {}}