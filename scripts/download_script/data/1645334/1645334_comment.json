{"bugs": {"1645334": {"comments": [{"creation_time": "2020-06-12T09:59:16Z", "text": "The `WatcherActor`  does have specific code to handle watching resources in parent process ([devtools/server/actors/descriptors/watcher/watcher.js#188-200](https://searchfox.org/mozilla-central/rev/0e09b9191c02097034e46b193930f91c45b7885d/devtools/server/actors/descriptors/watcher/watcher.js#188-200)), by retrieving the `browsingContextID` from the `browser` option passed when instantiating it ([devtools/server/actors/descriptors/watcher/watcher.js#35,57-59](https://searchfox.org/mozilla-central/rev/0e09b9191c02097034e46b193930f91c45b7885d/devtools/server/actors/descriptors/watcher/watcher.js#35,57-59)).\n\nUnfortunately, in [devtools/server/actors/descriptors/process.js#145](https://searchfox.org/mozilla-central/rev/0e09b9191c02097034e46b193930f91c45b7885d/devtools/server/actors/descriptors/process.js#145), we're creating the `WatcherActor` for the `ProcessDescriptorActor` without the `browser` option, which means the watcherActor won't be able to retrieve the targetActor.\nAs a result, we won't watch resources in parent processes (you can see that by flipping the `[Resources.TYPES.CONSOLE_MESSAGE]` trait, opening the browser toolbox and evaluating `console.log(\"bloup\")`; the `bloup` message won't appear).", "attachment_id": null, "author": "nchevobbe@mozilla.com", "tags": [], "raw_text": "The `WatcherActor`  does have specific code to handle watching resources in parent process ([devtools/server/actors/descriptors/watcher/watcher.js#188-200](https://searchfox.org/mozilla-central/rev/0e09b9191c02097034e46b193930f91c45b7885d/devtools/server/actors/descriptors/watcher/watcher.js#188-200)), by retrieving the `browsingContextID` from the `browser` option passed when instantiating it ([devtools/server/actors/descriptors/watcher/watcher.js#35,57-59](https://searchfox.org/mozilla-central/rev/0e09b9191c02097034e46b193930f91c45b7885d/devtools/server/actors/descriptors/watcher/watcher.js#35,57-59)).\n\nUnfortunately, in [devtools/server/actors/descriptors/process.js#145](https://searchfox.org/mozilla-central/rev/0e09b9191c02097034e46b193930f91c45b7885d/devtools/server/actors/descriptors/process.js#145), we're creating the `WatcherActor` for the `ProcessDescriptorActor` without the `browser` option, which means the watcherActor won't be able to retrieve the targetActor.\nAs a result, we won't watch resources in parent processes (you can see that by flipping the `[Resources.TYPES.CONSOLE_MESSAGE]` trait, opening the browser toolbox and evaluating `console.log(\"bloup\")`; the `bloup` message won't appear).", "time": "2020-06-12T09:59:16Z", "is_private": false, "count": 0, "bug_id": 1645334, "id": 14878277, "creator": "nchevobbe@mozilla.com"}, {"id": 14878291, "bug_id": 1645334, "tags": [], "author": "nchevobbe@mozilla.com", "attachment_id": 9156198, "creator": "nchevobbe@mozilla.com", "is_private": false, "time": "2020-06-12T10:10:18Z", "creation_time": "2020-06-12T10:10:18Z", "text": "Created attachment 9156198\nBug 1645334 - Handle parentProcessTargetActor in WatcherActor. r=jdescottes,ochameau.\n\n\nThe WatcherActor already has code to handle ParentProcessTargetActor, but since\nthe browsing context wasn't passed to the watcher actor when we were creating\nit in the ProcessDescriptorActor, nothing was done (and we weren't watching\nfor resources on that target).\nThis patch fixes that, and also changes what the WatcherActor expects. It used\nto take a whole `browser` object, but was only using it to retrieve the\nbrowsing context id, so directly passing the id seems more straightforward.\n\nDepends on D79294", "raw_text": "\nThe WatcherActor already has code to handle ParentProcessTargetActor, but since\nthe browsing context wasn't passed to the watcher actor when we were creating\nit in the ProcessDescriptorActor, nothing was done (and we weren't watching\nfor resources on that target).\nThis patch fixes that, and also changes what the WatcherActor expects. It used\nto take a whole `browser` object, but was only using it to retrieve the\nbrowsing context id, so directly passing the id seems more straightforward.\n\nDepends on D79294", "count": 1}, {"attachment_id": null, "creator": "pulsebot@bots.tld", "tags": [], "author": "pulsebot@bots.tld", "bug_id": 1645334, "id": 14885157, "count": 2, "text": "Pushed by nchevobbe@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/c124c1c7b2a4\nHandle parentProcessTargetActor in WatcherActor. r=jdescottes,ochameau.", "time": "2020-06-16T16:40:29Z", "creation_time": "2020-06-16T16:40:29Z", "raw_text": "Pushed by nchevobbe@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/c124c1c7b2a4\nHandle parentProcessTargetActor in WatcherActor. r=jdescottes,ochameau.", "is_private": false}, {"bug_id": 1645334, "id": 14886355, "attachment_id": null, "creator": "rmaries@mozilla.com", "tags": ["bugherder"], "author": "rmaries@mozilla.com", "creation_time": "2020-06-17T03:46:02Z", "text": "https://hg.mozilla.org/mozilla-central/rev/c124c1c7b2a4", "time": "2020-06-17T03:46:02Z", "raw_text": "https://hg.mozilla.org/mozilla-central/rev/c124c1c7b2a4", "is_private": false, "count": 3}]}}, "comments": {}}