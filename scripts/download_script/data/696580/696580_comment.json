{"comments": {}, "bugs": {"696580": {"comments": [{"attachment_id": 568868, "raw_text": "User Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:7.0.1) Gecko/20100101 Firefox/7.0.1\nBuild ID: 20110928134238\n\nSteps to reproduce:\n\nI have 4 Imap Accounts + SMTP for each\n1.) open inbox of an account\n2.) write an email with the smtp from another account.\n3.) send the email\n\n\nActual results:\n\n1.) Email was send (OK)\n2.) Thunderbird try to save it to draft folder of the account i send from. (fail)\n3.) Thunderbird save my Mail to draft folder of active imap account. (even if he say saving failed)\n\n\nExpected results:\n\nThunderbird should save the mail to imap account i choosed to send.", "bug_id": 696580, "text": "Created attachment 568868\nabbout:support summary of my Thunderbird (german version)\n\nUser Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:7.0.1) Gecko/20100101 Firefox/7.0.1\nBuild ID: 20110928134238\n\nSteps to reproduce:\n\nI have 4 Imap Accounts + SMTP for each\n1.) open inbox of an account\n2.) write an email with the smtp from another account.\n3.) send the email\n\n\nActual results:\n\n1.) Email was send (OK)\n2.) Thunderbird try to save it to draft folder of the account i send from. (fail)\n3.) Thunderbird save my Mail to draft folder of active imap account. (even if he say saving failed)\n\n\nExpected results:\n\nThunderbird should save the mail to imap account i choosed to send.", "tags": [], "count": 0, "id": 5798617, "is_private": false, "time": "2011-10-22T14:00:34Z", "creation_time": "2011-10-22T14:00:34Z", "creator": "stefangrossmann@freenet.de", "author": "stefangrossmann@freenet.de"}, {"tags": [], "bug_id": 696580, "text": "(In reply to Stefan Grossmann from comment #0)\nPlease report the error from Tools -> Error console just after you send the e-mail.", "raw_text": "(In reply to Stefan Grossmann from comment #0)\nPlease report the error from Tools -> Error console just after you send the e-mail.", "attachment_id": null, "author": "wraithlike@gmail.com", "creator": "wraithlike@gmail.com", "creation_time": "2011-10-27T07:59:54Z", "time": "2011-10-27T07:59:54Z", "is_private": false, "count": 1, "id": 5808373}, {"raw_text": "(In reply to Stefan Grossmann from comment #0)\n> 2.) Thunderbird try to save it to draft folder of the account i send from. (fail)\n\n\"Auto-save tries to save to Drafts even after send is requested\" is known problem.\nDo you enable auto-save? What is your auto-save interval setting?\n\n\"Save to Drafts fail\" is a phenomenon when you don't create folder to save draft mail which is set at Copies&Folders setting by you.  \nCan you manually save draft mail to folder which is set as \"folder to save draft mail\" at Copies&Folders setting by you for each identity of each account? \n\n> 3.) Thunderbird save my Mail to draft folder of active imap account. (even\n> if he say saving failed)\n\nTb selects SMTP server by your SMTP server choice at identity sentting(From: address) which is used by the mail, and saves draft mail to folder selected at Copies&Folders setting of the identity, and saves sent mail copy to folder which is selected by you at Copies&Folders setting of the identity if \"keep copy\" is requested by you at the setting.\nThis is independent from currently active account at folder pane.  \n\nWhich identity(From: address) did you use in mail sending?\nIs your each identity's setting in Tb same as your thought or expectation of Tb's behavior?  \n\n> Thunderbird should save the mail to imap account i choosed to send.\n\nWhat definition/setting in Tb's Account Settings do you call by your \"imap account i choosed to send\"?", "attachment_id": null, "tags": [], "bug_id": 696580, "text": "(In reply to Stefan Grossmann from comment #0)\n> 2.) Thunderbird try to save it to draft folder of the account i send from. (fail)\n\n\"Auto-save tries to save to Drafts even after send is requested\" is known problem.\nDo you enable auto-save? What is your auto-save interval setting?\n\n\"Save to Drafts fail\" is a phenomenon when you don't create folder to save draft mail which is set at Copies&Folders setting by you.  \nCan you manually save draft mail to folder which is set as \"folder to save draft mail\" at Copies&Folders setting by you for each identity of each account? \n\n> 3.) Thunderbird save my Mail to draft folder of active imap account. (even\n> if he say saving failed)\n\nTb selects SMTP server by your SMTP server choice at identity sentting(From: address) which is used by the mail, and saves draft mail to folder selected at Copies&Folders setting of the identity, and saves sent mail copy to folder which is selected by you at Copies&Folders setting of the identity if \"keep copy\" is requested by you at the setting.\nThis is independent from currently active account at folder pane.  \n\nWhich identity(From: address) did you use in mail sending?\nIs your each identity's setting in Tb same as your thought or expectation of Tb's behavior?  \n\n> Thunderbird should save the mail to imap account i choosed to send.\n\nWhat definition/setting in Tb's Account Settings do you call by your \"imap account i choosed to send\"?", "id": 5813612, "count": 2, "is_private": false, "author": "m-wada@usa.com", "time": "2011-10-30T01:43:48Z", "creation_time": "2011-10-30T01:43:48Z", "creator": "m-wada@usa.com"}, {"id": 5818310, "count": 3, "is_private": false, "time": "2011-11-01T17:26:32Z", "creation_time": "2011-11-01T17:26:32Z", "creator": "bugzilla2007@duellmann24.net", "author": "bugzilla2007@duellmann24.net", "attachment_id": null, "raw_text": "Comment 0 is not very clear, and I suspect in Actual Results, 3., the mail was saved to Sent folder, not draft folder. Trying to clarify the fuzzy summary, pls correct me if I'm wrong. Otherwise, let's wait for Stefan's (reporter's) response to Wada's comment 1.", "tags": [], "bug_id": 696580, "text": "Comment 0 is not very clear, and I suspect in Actual Results, 3., the mail was saved to Sent folder, not draft folder. Trying to clarify the fuzzy summary, pls correct me if I'm wrong. Otherwise, let's wait for Stefan's (reporter's) response to Wada's comment 1."}, {"attachment_id": null, "raw_text": "i can't recreate the problem, but to answer your questions:\n1) autosave has 5 minutes interval\n2) Draft folder is created on every account.\n3) i figured out, thunderbird saves in draft folder which i selected before i write a new mail. maybe it's better to save in that draft folder you created the smtp account for. e.g. from stefangrossmann@freenet.de SMTP should be saved in draft folder of my freenet account.(that was what i expected)\ni used stefangrossmann@freenet.de - it saved to skybird@t-online.de draft folder and error was after i send the mail. so while he try to save it to sent folder of my freenet.de account.\n\n>What definition/setting in Tb's Account Settings do you call by your \"imap account i choosed to send\"?\nif i choose \"stefangrossmann@freenet.de\" as \"from adress\" it should save to \"stefangrossmann@freenet.de\" draft folder while writing this email.\n\n//excuse my poor english. i'm from germany :)", "text": "i can't recreate the problem, but to answer your questions:\n1) autosave has 5 minutes interval\n2) Draft folder is created on every account.\n3) i figured out, thunderbird saves in draft folder which i selected before i write a new mail. maybe it's better to save in that draft folder you created the smtp account for. e.g. from stefangrossmann@freenet.de SMTP should be saved in draft folder of my freenet account.(that was what i expected)\ni used stefangrossmann@freenet.de - it saved to skybird@t-online.de draft folder and error was after i send the mail. so while he try to save it to sent folder of my freenet.de account.\n\n>What definition/setting in Tb's Account Settings do you call by your \"imap account i choosed to send\"?\nif i choose \"stefangrossmann@freenet.de\" as \"from adress\" it should save to \"stefangrossmann@freenet.de\" draft folder while writing this email.\n\n//excuse my poor english. i'm from germany :)", "bug_id": 696580, "tags": [], "is_private": false, "count": 4, "id": 5818483, "creator": "stefangrossmann@freenet.de", "creation_time": "2011-11-01T18:15:25Z", "time": "2011-11-01T18:15:25Z", "author": "stefangrossmann@freenet.de"}, {"creator": "m-wada@usa.com", "time": "2011-11-02T01:58:50Z", "creation_time": "2011-11-02T01:58:50Z", "author": "m-wada@usa.com", "is_private": false, "id": 5819885, "count": 5, "tags": [], "text": "(In reply to Stefan Grossmann from comment #4)\n> 3) i figured out, thunderbird saves in draft folder which i selected before\n> i write a new mail.\n\n(i) Tb saves draft to a folder which is selected at Copies&Folders of identity for current From: address.\n(ii) When new mail composition, Tb sets \"mail address of main identity of curretly selected account\" as pre-set From: of composed mail(if Local Folders, main identity of default account is used).\n(iii) So, if you change From: address during mail composition, different draft mail is saved in different draft folder.\n\nDo next, and see where draft is saved.\n(1) Enable \"dialog after draft save\".\n    At Copies&Folders setting of each identity, check next setting.\n    [X] Show confirmation dialog when messages are saved\n(2) Compose a new mail(from-1 is set as From: which is defined as identity-1). \n    Save as draft(within 5 minutes) => Dialog is shown, OK\n(3) Change From: to from-2 which is defined as identity-2.\n    Save as draft(within 5 minutes) => Dialog is shown, OK\n\n> i used stefangrossmann@freenet.de - it saved to skybird@t-online.de draft\n> folder and error was after i send the mail. so while he try to save it to\n> sent folder of my freenet.de account.\n\nIt's probably a phenomenon due to contension between auto-save and \"send while auto-save is in progress\". For example;\n(1) When From: from-1, auto-save saves draft-v1 to Drafts-1 folder, UID=11.\n(2) When From: from-1, auto-save tries to save draft-v2 to Drafts-1 folder.\n    (2-1) draft-v2 is UID=12 in Drafts-1 folder.\n    (2-2) auto-save tries to delete last draft(draft-v1, UID=11 in Drafts-1).\n(3) While (2) is running, change to \"From: from-2\", and execute Send.\n    (3-1) Send mail via SMTP-2 associated to from-2, and send completes.\n    (3-2) Tries to delete last draft(draft-v1, UID=11 in Drafts-1). \n    (3-3) Save sent mail copy to Sent-2 folder associated to from-2.\n(4) Because (2-2) and (3-3) are concurrent operations to same mail in same folder by different processes, internal error occurs in one of the two processes. If winner is (3-2) by mail send process, internal error occurs at (2-2) by auto-save, then \"draft save error to Drafts-1 folder which is associated to from-1\" is reported by auto-save.\n\nBoth of next are already known bugs.\n(A) auto-save is invoked even after mail send is requested.\n    auto-save shouldn't be invoked if mail send is already requested. \n(B) mail send is immediately executed even though auto-save is in progress.\n    mail send should wait for end of auto-save, or should kill running auto-save,\n    unless problem due to contension like above will be completely resolved.", "bug_id": 696580, "attachment_id": null, "raw_text": "(In reply to Stefan Grossmann from comment #4)\n> 3) i figured out, thunderbird saves in draft folder which i selected before\n> i write a new mail.\n\n(i) Tb saves draft to a folder which is selected at Copies&Folders of identity for current From: address.\n(ii) When new mail composition, Tb sets \"mail address of main identity of curretly selected account\" as pre-set From: of composed mail(if Local Folders, main identity of default account is used).\n(iii) So, if you change From: address during mail composition, different draft mail is saved in different draft folder.\n\nDo next, and see where draft is saved.\n(1) Enable \"dialog after draft save\".\n    At Copies&Folders setting of each identity, check next setting.\n    [X] Show confirmation dialog when messages are saved\n(2) Compose a new mail(from-1 is set as From: which is defined as identity-1). \n    Save as draft(within 5 minutes) => Dialog is shown, OK\n(3) Change From: to from-2 which is defined as identity-2.\n    Save as draft(within 5 minutes) => Dialog is shown, OK\n\n> i used stefangrossmann@freenet.de - it saved to skybird@t-online.de draft\n> folder and error was after i send the mail. so while he try to save it to\n> sent folder of my freenet.de account.\n\nIt's probably a phenomenon due to contension between auto-save and \"send while auto-save is in progress\". For example;\n(1) When From: from-1, auto-save saves draft-v1 to Drafts-1 folder, UID=11.\n(2) When From: from-1, auto-save tries to save draft-v2 to Drafts-1 folder.\n    (2-1) draft-v2 is UID=12 in Drafts-1 folder.\n    (2-2) auto-save tries to delete last draft(draft-v1, UID=11 in Drafts-1).\n(3) While (2) is running, change to \"From: from-2\", and execute Send.\n    (3-1) Send mail via SMTP-2 associated to from-2, and send completes.\n    (3-2) Tries to delete last draft(draft-v1, UID=11 in Drafts-1). \n    (3-3) Save sent mail copy to Sent-2 folder associated to from-2.\n(4) Because (2-2) and (3-3) are concurrent operations to same mail in same folder by different processes, internal error occurs in one of the two processes. If winner is (3-2) by mail send process, internal error occurs at (2-2) by auto-save, then \"draft save error to Drafts-1 folder which is associated to from-1\" is reported by auto-save.\n\nBoth of next are already known bugs.\n(A) auto-save is invoked even after mail send is requested.\n    auto-save shouldn't be invoked if mail send is already requested. \n(B) mail send is immediately executed even though auto-save is in progress.\n    mail send should wait for end of auto-save, or should kill running auto-save,\n    unless problem due to contension like above will be completely resolved."}, {"author": "bugzilla2007@duellmann24.net", "creator": "bugzilla2007@duellmann24.net", "time": "2011-11-02T07:45:42Z", "creation_time": "2011-11-02T07:45:42Z", "is_private": false, "count": 6, "id": 5820154, "bug_id": 696580, "text": "Wada, thanks for your detailed and valuable support. Based on your comment 5, do you think this could be closed as a duplicate of A or B?", "tags": [], "raw_text": "Wada, thanks for your detailed and valuable support. Based on your comment 5, do you think this could be closed as a duplicate of A or B?", "attachment_id": null}, {"raw_text": "I think dup of B(if bug is really already opened for the problem of B), because \"draft folder on which error occurs while auto-save running\" should be Drafts-2 associated to from-2(mail address after From: change) instead of Drafts-1 associated to from-1(mail address before From: change) if problem of A. In this bug's case, error occurred on Drafts-1 associated to from-1(mail address before From: change).", "attachment_id": null, "tags": [], "text": "I think dup of B(if bug is really already opened for the problem of B), because \"draft folder on which error occurs while auto-save running\" should be Drafts-2 associated to from-2(mail address after From: change) instead of Drafts-1 associated to from-1(mail address before From: change) if problem of A. In this bug's case, error occurred on Drafts-1 associated to from-1(mail address before From: change).", "bug_id": 696580, "id": 5820268, "count": 7, "is_private": false, "author": "m-wada@usa.com", "time": "2011-11-02T09:54:02Z", "creation_time": "2011-11-02T09:54:02Z", "creator": "m-wada@usa.com"}, {"id": 5828222, "count": 8, "is_private": false, "author": "m-wada@usa.com", "time": "2011-11-05T08:37:12Z", "creation_time": "2011-11-05T08:37:12Z", "creator": "m-wada@usa.com", "raw_text": "I couldn't reach specfig bug for problem of (B). Confirming this bug.", "attachment_id": null, "tags": [], "bug_id": 696580, "text": "I couldn't reach specfig bug for problem of (B). Confirming this bug."}, {"author": "m-wada@usa.com", "time": "2011-11-05T08:51:53Z", "creation_time": "2011-11-05T08:51:53Z", "creator": "m-wada@usa.com", "id": 5828231, "count": 9, "is_private": false, "tags": [], "bug_id": 696580, "text": "Nnote:\nIf \"error in draft save by auto-save or last draft delete by auto-save\" doesn't occur(if auto-save ends before delete of last draft by mail sending, no error occurs), and if \"error in last draft delete by mail send process\" doesn't occur(if aleady deleted by auto-save, no error occurs), \"excess draft(undeleted draft) generated by auto-save\" always remain even after successful mail sending and deletion of last draft mail.\nMany of bug reports which involves problem of (A) or problem (B) are report for this phenomenon of \"excess draft(undeleted draft) generated by auto-save remains\".", "raw_text": "Nnote:\nIf \"error in draft save by auto-save or last draft delete by auto-save\" doesn't occur(if auto-save ends before delete of last draft by mail sending, no error occurs), and if \"error in last draft delete by mail send process\" doesn't occur(if aleady deleted by auto-save, no error occurs), \"excess draft(undeleted draft) generated by auto-save\" always remain even after successful mail sending and deletion of last draft mail.\nMany of bug reports which involves problem of (A) or problem (B) are report for this phenomenon of \"excess draft(undeleted draft) generated by auto-save remains\".", "attachment_id": null}]}}}