{"comments": {}, "bugs": {"652222": {"comments": [{"creator": "mail@phoboslab.org", "attachment_id": null, "text": "User-Agent:       Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\nBuild Identifier: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\n\nWhen drawing an area of a large image (>2048px) to a canvas, without scaling it, some pixels get drawn slightly interpolated, when they should be the exact same as in the source image.\n\nReproducible: Always\n\nSteps to Reproduce:\nVisit: \nhttp://www.phoboslab.org/crap/pixel-bug/fail/\nLook at the pink lines on the Target Canvas\n\nActual Results:  \nFor the second yellow row, some of the pink lines, marking transparent pixels, are missing.\n\n\n\nExpected Results:  \nThe pink lines under both yellow pixel rows should be exactly identical.\n\nThe source image is drawn to the Canvas two times: first in full and then just the last row of pixels of the image (second yellow row on the target canvas).\n\nBoth yellow rows (the one from the full image and from just drawing the last row) are then analyzed for transparent pixels (alpha = 0) and marked with a pink line. Some of the pixels for the second yellow row are NOT completely transparent as they should be.\n\nNote that this only seems to happen for large images (>2048px on my machine). Here is a test case with a smaller image that works fine:\nhttp://www.phoboslab.org/crap/pixel-bug/ok/\n\nThis doesn't:\nhttp://www.phoboslab.org/crap/pixel-bug/fail/\n\nThis fails in Firefox4 and Internet Explorer 9. Both test cases work fine in Opera, Chrome and Safari.\n\nScreenshots:\nhttp://www.phoboslab.org/crap/pixel-bug/screenshots/firefox-large.png <- FAILED\nhttp://www.phoboslab.org/crap/pixel-bug/screenshots/firefox-small.png\nhttp://www.phoboslab.org/crap/pixel-bug/screenshots/ie9-large.png <- FAILED\nhttp://www.phoboslab.org/crap/pixel-bug/screenshots/ie9-small.png\nhttp://www.phoboslab.org/crap/pixel-bug/screenshots/chrome-large.png\nhttp://www.phoboslab.org/crap/pixel-bug/screenshots/chrome-small.png\nhttp://www.phoboslab.org/crap/pixel-bug/screenshots/opera-large.png\nhttp://www.phoboslab.org/crap/pixel-bug/screenshots/opera-small.png", "count": 0, "author": "mail@phoboslab.org", "creation_time": "2011-04-22T21:29:03Z", "bug_id": 652222, "raw_text": "User-Agent:       Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\nBuild Identifier: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\n\nWhen drawing an area of a large image (>2048px) to a canvas, without scaling it, some pixels get drawn slightly interpolated, when they should be the exact same as in the source image.\n\nReproducible: Always\n\nSteps to Reproduce:\nVisit: \nhttp://www.phoboslab.org/crap/pixel-bug/fail/\nLook at the pink lines on the Target Canvas\n\nActual Results:  \nFor the second yellow row, some of the pink lines, marking transparent pixels, are missing.\n\n\n\nExpected Results:  \nThe pink lines under both yellow pixel rows should be exactly identical.\n\nThe source image is drawn to the Canvas two times: first in full and then just the last row of pixels of the image (second yellow row on the target canvas).\n\nBoth yellow rows (the one from the full image and from just drawing the last row) are then analyzed for transparent pixels (alpha = 0) and marked with a pink line. Some of the pixels for the second yellow row are NOT completely transparent as they should be.\n\nNote that this only seems to happen for large images (>2048px on my machine). Here is a test case with a smaller image that works fine:\nhttp://www.phoboslab.org/crap/pixel-bug/ok/\n\nThis doesn't:\nhttp://www.phoboslab.org/crap/pixel-bug/fail/\n\nThis fails in Firefox4 and Internet Explorer 9. Both test cases work fine in Opera, Chrome and Safari.\n\nScreenshots:\nhttp://www.phoboslab.org/crap/pixel-bug/screenshots/firefox-large.png <- FAILED\nhttp://www.phoboslab.org/crap/pixel-bug/screenshots/firefox-small.png\nhttp://www.phoboslab.org/crap/pixel-bug/screenshots/ie9-large.png <- FAILED\nhttp://www.phoboslab.org/crap/pixel-bug/screenshots/ie9-small.png\nhttp://www.phoboslab.org/crap/pixel-bug/screenshots/chrome-large.png\nhttp://www.phoboslab.org/crap/pixel-bug/screenshots/chrome-small.png\nhttp://www.phoboslab.org/crap/pixel-bug/screenshots/opera-large.png\nhttp://www.phoboslab.org/crap/pixel-bug/screenshots/opera-small.png", "tags": [], "is_private": false, "time": "2011-04-22T21:29:03Z", "id": 5427081}, {"id": 5427570, "time": "2011-04-23T01:21:42Z", "author": "bzbarsky@mit.edu", "count": 1, "text": "Worksforme on Mac.\n\nGiven that it also fails in IE9, sounds like it might be a d2d issue.  Does disabling direct2d in about:config make the problem go away?", "attachment_id": null, "is_private": false, "tags": [], "creator": "bzbarsky@mit.edu", "bug_id": 652222, "creation_time": "2011-04-23T01:21:42Z", "raw_text": "Worksforme on Mac.\n\nGiven that it also fails in IE9, sounds like it might be a d2d issue.  Does disabling direct2d in about:config make the problem go away?"}, {"text": "Yes, disabling Direct2d \"fixes\" the problem.\n\nI wouldn't care if it was just a visual problem, but in my case a bitmap font was \"missing\" some characters because the font image wasn't analyzed correctly. This prevented a game from loading at all.\n\nDrawing the whole image - instead of just the last row of pixels - to a canvas seems to be a valid workaround for now.", "count": 2, "id": 5427871, "time": "2011-04-23T11:14:42Z", "author": "mail@phoboslab.org", "tags": [], "creator": "mail@phoboslab.org", "creation_time": "2011-04-23T11:14:42Z", "bug_id": 652222, "raw_text": "Yes, disabling Direct2d \"fixes\" the problem.\n\nI wouldn't care if it was just a visual problem, but in my case a bitmap font was \"missing\" some characters because the font image wasn't analyzed correctly. This prevented a game from loading at all.\n\nDrawing the whole image - instead of just the last row of pixels - to a canvas seems to be a valid workaround for now.", "attachment_id": null, "is_private": false}, {"attachment_id": null, "creator": "bzbarsky@mit.edu", "author": "bzbarsky@mit.edu", "count": 3, "text": "> Yes, disabling Direct2d \"fixes\" the problem.\n\nOK, good to know.\n\nBas, can you take a look?", "is_private": false, "bug_id": 652222, "creation_time": "2011-04-28T03:44:54Z", "raw_text": "> Yes, disabling Direct2d \"fixes\" the problem.\n\nOK, good to know.\n\nBas, can you take a look?", "tags": [], "time": "2011-04-28T03:44:54Z", "id": 5436464}]}}}