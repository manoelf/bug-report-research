{"comments": {}, "bugs": {"702495": {"comments": [{"is_private": false, "id": 5848393, "count": 0, "creator": "bill.mccloskey@gmail.com", "time": "2011-11-15T01:42:31Z", "creation_time": "2011-11-15T01:42:31Z", "author": "bill.mccloskey@gmail.com", "attachment_id": null, "raw_text": "The goal of this bug is to find web sites where we have really long pauses for garbage collection or cycle collection. Then we can use these sites as tests for incremental garbage collection.\n\nHere's the basic procedure:\n\n1. Set the javascript.options.mem.log option to true in about:config.\n2. Visit a web site.\n3. Open the error console and hit Clear and then Messages.\n4. Messages that start with \"CC(T+...)\" and \"GC(T+...)\" should accumulate.\n5. The time for a GC is listed under \"Total\". It is in milliseconds. The time for a CC is given as \"duration\".\n\nThere isn't a clear threshold for what is too long. Mostly, we want to find sites where the user experience is negatively affected by long GCs or CCs. Usually it's easy to determine this. The site will seem to pause for moment, and immediately after there will be a new CC or GC entry appearing in the error console.\n\nHere are some sites that we know we do poorly on:\n\nhttp://ro.me: A Chrome experiment with lots of video and ~500ms GCs. Also, I sometimes get a 10 second CC when I close the site.\n\nFlight of the Navigator (http://videos.mozilla.org/serv/mozhacks/flight-of-the-navigator/): GCs are shorter, but they cause noticeable pauses\n\nMozilla Graph Server (graphs.mozilla.org): This site takes a lot of memory, so GCs take a long time. The site is not very interactive, so you usually don't notice unless you're doing something in another tab.\n\nJS realtime raytracer (http://29a.ch/2010/6/2/realtime-raytracing-in-javascript): This site has long GCs that really mess up the animation.\n\nA good start would be to look at more Chrome experiments, and also look for sites with lots of animation. It might also be good to search bugzilla for reproducible cases.", "tags": [], "bug_id": 702495, "text": "The goal of this bug is to find web sites where we have really long pauses for garbage collection or cycle collection. Then we can use these sites as tests for incremental garbage collection.\n\nHere's the basic procedure:\n\n1. Set the javascript.options.mem.log option to true in about:config.\n2. Visit a web site.\n3. Open the error console and hit Clear and then Messages.\n4. Messages that start with \"CC(T+...)\" and \"GC(T+...)\" should accumulate.\n5. The time for a GC is listed under \"Total\". It is in milliseconds. The time for a CC is given as \"duration\".\n\nThere isn't a clear threshold for what is too long. Mostly, we want to find sites where the user experience is negatively affected by long GCs or CCs. Usually it's easy to determine this. The site will seem to pause for moment, and immediately after there will be a new CC or GC entry appearing in the error console.\n\nHere are some sites that we know we do poorly on:\n\nhttp://ro.me: A Chrome experiment with lots of video and ~500ms GCs. Also, I sometimes get a 10 second CC when I close the site.\n\nFlight of the Navigator (http://videos.mozilla.org/serv/mozhacks/flight-of-the-navigator/): GCs are shorter, but they cause noticeable pauses\n\nMozilla Graph Server (graphs.mozilla.org): This site takes a lot of memory, so GCs take a long time. The site is not very interactive, so you usually don't notice unless you're doing something in another tab.\n\nJS realtime raytracer (http://29a.ch/2010/6/2/realtime-raytracing-in-javascript): This site has long GCs that really mess up the animation.\n\nA good start would be to look at more Chrome experiments, and also look for sites with lots of animation. It might also be good to search bugzilla for reproducible cases."}, {"raw_text": "In emails from dmandelin, here are two more:\n\nGoogle Reader: Blizzard says he confirmed that long pauses on his Mac are causes by CC or GC. This seems to be workload-dependent since I can't reproduce it easily.\n\nThis demo from Damon:\nhttp://alteredqualia.com/three/examples/webgl_terrain_dynamic.html\n\nThe latter runs at ~1fps on my laptop, so I wasn't able to check whether GC or CC are at fault.", "attachment_id": null, "text": "In emails from dmandelin, here are two more:\n\nGoogle Reader: Blizzard says he confirmed that long pauses on his Mac are causes by CC or GC. This seems to be workload-dependent since I can't reproduce it easily.\n\nThis demo from Damon:\nhttp://alteredqualia.com/three/examples/webgl_terrain_dynamic.html\n\nThe latter runs at ~1fps on my laptop, so I wasn't able to check whether GC or CC are at fault.", "bug_id": 702495, "tags": [], "is_private": false, "count": 1, "id": 5851403, "author": "bill.mccloskey@gmail.com", "creator": "bill.mccloskey@gmail.com", "time": "2011-11-16T02:03:16Z", "creation_time": "2011-11-16T02:03:16Z"}, {"count": 2, "id": 5852982, "is_private": false, "author": "bill.mccloskey@gmail.com", "creation_time": "2011-11-16T18:22:41Z", "time": "2011-11-16T18:22:41Z", "creator": "bill.mccloskey@gmail.com", "raw_text": "(In reply to Bill McCloskey (:billm) from comment #1)\n> This demo from Damon:\n> http://alteredqualia.com/three/examples/webgl_terrain_dynamic.html\n\nI tested this site from work, and there are noticeable pauses caused by garbage collection. In a fresh browser, the GC pauses are ~80ms and the CC pauses are about 10ms.\n\nI should emphasize that GC and CC times will get worse the more tabs you have open. I think this bug should focus on single pages that lead to bad pauses (i.e., with no other tabs loaded). Otherwise it's much harder to reproduce the problems.", "attachment_id": null, "bug_id": 702495, "text": "(In reply to Bill McCloskey (:billm) from comment #1)\n> This demo from Damon:\n> http://alteredqualia.com/three/examples/webgl_terrain_dynamic.html\n\nI tested this site from work, and there are noticeable pauses caused by garbage collection. In a fresh browser, the GC pauses are ~80ms and the CC pauses are about 10ms.\n\nI should emphasize that GC and CC times will get worse the more tabs you have open. I think this bug should focus on single pages that lead to bad pauses (i.e., with no other tabs loaded). Otherwise it's much harder to reproduce the problems.", "tags": []}, {"creation_time": "2011-11-16T18:32:54Z", "time": "2011-11-16T18:32:54Z", "creator": "justin.lebar+bug@gmail.com", "author": "justin.lebar+bug@gmail.com", "count": 3, "id": 5853026, "is_private": false, "tags": [], "bug_id": 702495, "text": "See also bug 702813, which has a synthetic testcase which causes long CC pauses.", "attachment_id": null, "raw_text": "See also bug 702813, which has a synthetic testcase which causes long CC pauses."}, {"id": 5858906, "count": 4, "is_private": false, "attachment_id": null, "raw_text": "http://lights.elliegoulding.com/\n\nI get around 40ms with FF 8 but 75ms with todays nightly.", "time": "2011-11-18T19:39:39Z", "creation_time": "2011-11-18T19:39:39Z", "creator": "anygregor@gmail.com", "tags": [], "text": "http://lights.elliegoulding.com/\n\nI get around 40ms with FF 8 but 75ms with todays nightly.", "bug_id": 702495, "author": "anygregor@gmail.com"}, {"tags": [], "bug_id": 702495, "text": "http://s\u00f8rver.no/Projects/Origami3D/examples/mode7.html\n\nThe GC duration is something like 236ms in FF8. This causes noticable delays in the animation.", "attachment_id": null, "raw_text": "http://s\u00f8rver.no/Projects/Origami3D/examples/mode7.html\n\nThe GC duration is something like 236ms in FF8. This causes noticable delays in the animation.", "creator": "gundersen@gmail.com", "time": "2011-11-30T09:34:08Z", "creation_time": "2011-11-30T09:34:08Z", "author": "gundersen@gmail.com", "is_private": false, "count": 5, "id": 5881545}, {"author": "joolsa@gmail.com", "creator": "joolsa@gmail.com", "time": "2011-11-30T13:59:23Z", "creation_time": "2011-11-30T13:59:23Z", "is_private": false, "id": 5881895, "count": 6, "bug_id": 702495, "text": "WebGL seems to have large enough memory throughput to cause frequent GC pauses. On MacBook Pro / Sandybridge GPU / Aurora FF 10:\n\nWebGLASS http://possan.se/junk/webglass/index.html frequent 28ms or so pauses a couple of times a second.\n\nRome interactive music video: http://ro.me 300-2000ms pauses while loading, lots of pauses while running of 0.5-4s, including one GC Timestamp which lists a duration of 78019ms!", "tags": [], "raw_text": "WebGL seems to have large enough memory throughput to cause frequent GC pauses. On MacBook Pro / Sandybridge GPU / Aurora FF 10:\n\nWebGLASS http://possan.se/junk/webglass/index.html frequent 28ms or so pauses a couple of times a second.\n\nRome interactive music video: http://ro.me 300-2000ms pauses while loading, lots of pauses while running of 0.5-4s, including one GC Timestamp which lists a duration of 78019ms!", "attachment_id": null}, {"attachment_id": null, "raw_text": "The WebGL video: http://lights.elliegoulding.com/ causes GC pauses of 40-60ms every couple of seconds.", "tags": [], "text": "The WebGL video: http://lights.elliegoulding.com/ causes GC pauses of 40-60ms every couple of seconds.", "bug_id": 702495, "is_private": false, "id": 5881903, "count": 7, "creator": "joolsa@gmail.com", "creation_time": "2011-11-30T14:03:04Z", "time": "2011-11-30T14:03:04Z", "author": "joolsa@gmail.com"}, {"is_private": false, "count": 8, "id": 5882060, "creator": "u279076@disabled.tld", "time": "2011-11-30T15:12:01Z", "creation_time": "2011-11-30T15:12:01Z", "author": "u279076@disabled.tld", "attachment_id": null, "raw_text": "Adding [qa+] and in-litmus? to this bug. QA should really keep track of the test sites found in this bug and put them into a regression test suite.", "text": "Adding [qa+] and in-litmus? to this bug. QA should really keep track of the test sites found in this bug and put them into a regression test suite.", "bug_id": 702495, "tags": []}, {"author": "mcastelluccio@mozilla.com", "creator": "mcastelluccio@mozilla.com", "creation_time": "2011-11-30T18:37:02Z", "time": "2011-11-30T18:37:02Z", "is_private": false, "count": 9, "id": 5882783, "tags": [], "text": "I get several ~80ms pauses on Google Maps.", "bug_id": 702495, "raw_text": "I get several ~80ms pauses on Google Maps.", "attachment_id": null}, {"raw_text": "Let's focus on repeatable test cases here. That is, ones where it's possible to visit the same site with a clean profile and no other tabs open and get a long GC pause, every time.", "attachment_id": null, "text": "Let's focus on repeatable test cases here. That is, ones where it's possible to visit the same site with a clean profile and no other tabs open and get a long GC pause, every time.", "bug_id": 702495, "tags": [], "count": 10, "id": 5882810, "is_private": false, "author": "bill.mccloskey@gmail.com", "creation_time": "2011-11-30T18:43:50Z", "time": "2011-11-30T18:43:50Z", "creator": "bill.mccloskey@gmail.com"}, {"author": "dmandelin@mozilla.com", "time": "2011-11-30T18:55:33Z", "creation_time": "2011-11-30T18:55:33Z", "creator": "dmandelin@mozilla.com", "id": 5882844, "count": 11, "is_private": false, "text": "An email reply to my blog post:\n\n>The games I made at http://gamesalad.com/arcade tended to have garbage collection >pauses. Try air supply for example.", "bug_id": 702495, "tags": [], "raw_text": "An email reply to my blog post:\n\n>The games I made at http://gamesalad.com/arcade tended to have garbage collection >pauses. Try air supply for example.", "attachment_id": null}, {"attachment_id": null, "raw_text": "ammo.js is a good one:\n\nhttp://syntensity.com/static/ammo.html\n\nI just tried it in Larch and it's much better than Nightly, but there is still a bit of pausing. Not sure if it's the 20ms min vs. 60fps, or some CC getting thrown in there.", "tags": [], "bug_id": 702495, "text": "ammo.js is a good one:\n\nhttp://syntensity.com/static/ammo.html\n\nI just tried it in Larch and it's much better than Nightly, but there is still a bit of pausing. Not sure if it's the 20ms min vs. 60fps, or some CC getting thrown in there.", "count": 12, "id": 5883011, "is_private": false, "time": "2011-11-30T19:38:02Z", "creation_time": "2011-11-30T19:38:02Z", "creator": "dmandelin@mozilla.com", "author": "dmandelin@mozilla.com"}, {"attachment_id": null, "raw_text": "Running the PDF.JS[1] test suite results in quite some GC pauses, that sometimes take longer then 200ms.\n\n[1]: https://github.com/mozilla/pdf.js", "tags": [], "text": "Running the PDF.JS[1] test suite results in quite some GC pauses, that sometimes take longer then 200ms.\n\n[1]: https://github.com/mozilla/pdf.js", "bug_id": 702495, "is_private": false, "id": 5883247, "count": 13, "creator": "julian.viereck@gmail.com", "creation_time": "2011-11-30T20:34:44Z", "time": "2011-11-30T20:34:44Z", "author": "julian.viereck@gmail.com"}, {"count": 14, "id": 5883917, "is_private": false, "author": "dmandelin@mozilla.com", "time": "2011-12-01T00:15:50Z", "creation_time": "2011-12-01T00:15:50Z", "creator": "dmandelin@mozilla.com", "raw_text": "From blog comment:\n\n>I don\u2019t know if it\u2019s GC related but http://www.pirateslovedaisies.com seems to \n>perform worse in Firefox 8 and 9 as compared to Firefox 7. It has lots of small \n>pauses in 8 and 9.", "attachment_id": null, "bug_id": 702495, "text": "From blog comment:\n\n>I don\u2019t know if it\u2019s GC related but http://www.pirateslovedaisies.com seems to \n>perform worse in Firefox 8 and 9 as compared to Firefox 7. It has lots of small \n>pauses in 8 and 9.", "tags": []}, {"time": "2011-12-01T18:31:10Z", "creation_time": "2011-12-01T18:31:10Z", "creator": "anygregor@gmail.com", "author": "anygregor@gmail.com", "count": 15, "id": 5885645, "is_private": false, "bug_id": 702495, "text": "(In reply to gundersen@gmail.com from comment #5)\n> http://s\u00f8rver.no/Projects/Origami3D/examples/mode7.html\n> \n> The GC duration is something like 236ms in FF8. This causes noticable delays\n> in the animation.\n\nWe only perform global GCs here because of bug 679026", "tags": [], "attachment_id": null, "raw_text": "(In reply to gundersen@gmail.com from comment #5)\n> http://s\u00f8rver.no/Projects/Origami3D/examples/mode7.html\n> \n> The GC duration is something like 236ms in FF8. This causes noticable delays\n> in the animation.\n\nWe only perform global GCs here because of bug 679026"}, {"author": "continuation@gmail.com", "creation_time": "2011-12-01T21:11:35Z", "time": "2011-12-01T21:11:35Z", "creator": "continuation@gmail.com", "id": 5886345, "count": 16, "is_private": false, "bug_id": 702495, "text": "When you load IRCcloud, the whole browser hangs for 4-10 seconds.  When I measured GC times, I saw there was a 1.6 second compartmental GC, and a few other 600ms GCs in there, so it might be something to look at.", "tags": [], "raw_text": "When you load IRCcloud, the whole browser hangs for 4-10 seconds.  When I measured GC times, I saw there was a 1.6 second compartmental GC, and a few other 600ms GCs in there, so it might be something to look at.", "attachment_id": null}, {"id": 5897709, "count": 17, "is_private": false, "time": "2011-12-07T17:49:24Z", "creation_time": "2011-12-07T17:49:24Z", "creator": "joolsa@gmail.com", "author": "joolsa@gmail.com", "attachment_id": null, "raw_text": "leave this running for a minute or so and the gc times rises to 30ms every few seconds:\n\nhttp://airtightinteractive.com/demos/js/snowbox/\n\n(Aurora / FF10 / OSX)", "text": "leave this running for a minute or so and the gc times rises to 30ms every few seconds:\n\nhttp://airtightinteractive.com/demos/js/snowbox/\n\n(Aurora / FF10 / OSX)", "bug_id": 702495, "tags": []}, {"tags": [], "bug_id": 702495, "text": "(In reply to Julian Adams from comment #17)\n> leave this running for a minute or so and the gc times rises to 30ms every\n> few seconds:\n> \n> http://airtightinteractive.com/demos/js/snowbox/\n> \n> (Aurora / FF10 / OSX)\n\nOn Nightly, with my patch from bug 694883 applied, the GC pause time is only degrading slightly, from about 14.5ms to 16.5ms, after running it for 5 or so minutes.  The GC's are all global GCs, triggered by \"many waiting for GC\", which I think means that it is triggered because the CC freed about 1200 things each time.\n\nCC(T+609.9) collected: 1294 (1294 waiting for GC), suspected: 1361, duration: 8 ms.\nGC(T+613.9) Type:Glob, Total:16.9, Wait:0.1, Mark:12.7, Sweep:4.0, FinObj:0.3, FinStr:0.0, FinScr:0.1, FinShp:0.2, DisCod:0.9, DisAnl:1.7, XPCnct:0.5, Destry:0.0, End:0.5, +Chu:0, -Chu:0, Reason:many waiting for GC\n\nI don't know if difference is because I'm on nightly or because of my patch.", "raw_text": "(In reply to Julian Adams from comment #17)\n> leave this running for a minute or so and the gc times rises to 30ms every\n> few seconds:\n> \n> http://airtightinteractive.com/demos/js/snowbox/\n> \n> (Aurora / FF10 / OSX)\n\nOn Nightly, with my patch from bug 694883 applied, the GC pause time is only degrading slightly, from about 14.5ms to 16.5ms, after running it for 5 or so minutes.  The GC's are all global GCs, triggered by \"many waiting for GC\", which I think means that it is triggered because the CC freed about 1200 things each time.\n\nCC(T+609.9) collected: 1294 (1294 waiting for GC), suspected: 1361, duration: 8 ms.\nGC(T+613.9) Type:Glob, Total:16.9, Wait:0.1, Mark:12.7, Sweep:4.0, FinObj:0.3, FinStr:0.0, FinScr:0.1, FinShp:0.2, DisCod:0.9, DisAnl:1.7, XPCnct:0.5, Destry:0.0, End:0.5, +Chu:0, -Chu:0, Reason:many waiting for GC\n\nI don't know if difference is because I'm on nightly or because of my patch.", "attachment_id": null, "author": "continuation@gmail.com", "creation_time": "2011-12-07T18:02:44Z", "time": "2011-12-07T18:02:44Z", "creator": "continuation@gmail.com", "count": 18, "id": 5897742, "is_private": false}, {"id": 5930811, "count": 19, "is_private": false, "time": "2011-12-20T21:20:47Z", "creation_time": "2011-12-20T21:20:47Z", "creator": "mcote@mozilla.bugs", "author": "mcote@mozilla.bugs", "attachment_id": 583268, "raw_text": "I wrote a couple peptests (https://wiki.mozilla.org/Auto-tools/Projects/peptest) to get some numbers on unresponsiveness for some of these sites.  They're just very simple tests that open a page and wait for a short while; I attached one (for ammo.js).\n\nHere are the results with today's nightly on Ubuntu 11.10 on a MacBook Pro.  Note that peptest only records instances in which the event loop is stuck for more than 50 ms.\n\nammo.js\n\nLong unresponsive period (> 1 s) and a few shorter ones when loading page.  A few short unresponsive periods during the 20 seconds that the test waits after the page loads.\n\nPEP TEST-START | test_ammo.js\nPEP WARNING    | test_ammo.js | open_page | unresponsive time: 135 ms\nPEP WARNING    | test_ammo.js | open_page | unresponsive time: 82 ms\nPEP WARNING    | test_ammo.js | open_page | unresponsive time: 1138 ms\nPEP WARNING    | test_ammo.js | open_page | unresponsive time: 446 ms\nPEP WARNING    | test_ammo.js | open_page | unresponsive time: 87 ms\nPEP WARNING    | test_ammo.js | wait | unresponsive time: 100 ms\nPEP WARNING    | test_ammo.js | wait | unresponsive time: 219 ms\nPEP WARNING    | test_ammo.js | wait | unresponsive time: 116 ms\nPEP TEST-UNEXPECTED-FAIL | test_ammo.js | fail threshold: 0.0 < metric: 1597.895\nPEP TEST-END   | test_ammo.js | finished in: 26517 ms\n\nwebgl_terrain_dynamic.html\n\nMuch like ammo.js, there's a big delay, and a few short/medium-sized ones, when loading the page.  Then there are regular short delays while the demo is displaying.\n\nPEP TEST-START | test_webgl_terrain.js\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 60 ms\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 1054 ms\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 135 ms\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 307 ms\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 130 ms\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 658 ms\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 118 ms\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 278 ms\nPEP WARNING    | test_webgl_terrain.js | wait | unresponsive time: 70 ms\nPEP WARNING    | test_webgl_terrain.js | wait | unresponsive time: 54 ms\nPEP WARNING    | test_webgl_terrain.js | wait | unresponsive time: 56 ms\nPEP WARNING    | test_webgl_terrain.js | wait | unresponsive time: 56 ms\nPEP WARNING    | test_webgl_terrain.js | wait | unresponsive time: 58 ms\nPEP TEST-UNEXPECTED-FAIL | test_webgl_terrain.js | fail threshold: 0.0 < metric: 1785.514\nPEP TEST-END   | test_webgl_terrain.js | finished in: 29473 ms", "tags": [], "bug_id": 702495, "text": "Created attachment 583268\nPeptest for ammo.js\n\nI wrote a couple peptests (https://wiki.mozilla.org/Auto-tools/Projects/peptest) to get some numbers on unresponsiveness for some of these sites.  They're just very simple tests that open a page and wait for a short while; I attached one (for ammo.js).\n\nHere are the results with today's nightly on Ubuntu 11.10 on a MacBook Pro.  Note that peptest only records instances in which the event loop is stuck for more than 50 ms.\n\nammo.js\n\nLong unresponsive period (> 1 s) and a few shorter ones when loading page.  A few short unresponsive periods during the 20 seconds that the test waits after the page loads.\n\nPEP TEST-START | test_ammo.js\nPEP WARNING    | test_ammo.js | open_page | unresponsive time: 135 ms\nPEP WARNING    | test_ammo.js | open_page | unresponsive time: 82 ms\nPEP WARNING    | test_ammo.js | open_page | unresponsive time: 1138 ms\nPEP WARNING    | test_ammo.js | open_page | unresponsive time: 446 ms\nPEP WARNING    | test_ammo.js | open_page | unresponsive time: 87 ms\nPEP WARNING    | test_ammo.js | wait | unresponsive time: 100 ms\nPEP WARNING    | test_ammo.js | wait | unresponsive time: 219 ms\nPEP WARNING    | test_ammo.js | wait | unresponsive time: 116 ms\nPEP TEST-UNEXPECTED-FAIL | test_ammo.js | fail threshold: 0.0 < metric: 1597.895\nPEP TEST-END   | test_ammo.js | finished in: 26517 ms\n\nwebgl_terrain_dynamic.html\n\nMuch like ammo.js, there's a big delay, and a few short/medium-sized ones, when loading the page.  Then there are regular short delays while the demo is displaying.\n\nPEP TEST-START | test_webgl_terrain.js\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 60 ms\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 1054 ms\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 135 ms\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 307 ms\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 130 ms\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 658 ms\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 118 ms\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 278 ms\nPEP WARNING    | test_webgl_terrain.js | wait | unresponsive time: 70 ms\nPEP WARNING    | test_webgl_terrain.js | wait | unresponsive time: 54 ms\nPEP WARNING    | test_webgl_terrain.js | wait | unresponsive time: 56 ms\nPEP WARNING    | test_webgl_terrain.js | wait | unresponsive time: 56 ms\nPEP WARNING    | test_webgl_terrain.js | wait | unresponsive time: 58 ms\nPEP TEST-UNEXPECTED-FAIL | test_webgl_terrain.js | fail threshold: 0.0 < metric: 1785.514\nPEP TEST-END   | test_webgl_terrain.js | finished in: 29473 ms"}, {"author": "mcote@mozilla.bugs", "creator": "mcote@mozilla.bugs", "time": "2011-12-22T17:22:25Z", "creation_time": "2011-12-22T17:22:25Z", "is_private": false, "id": 5935559, "count": 20, "tags": [], "text": "Created attachment 583826\nPeptest for ammo.js, with GC output enabled\n\nI modified the peptest to enable JS memory logging and output the error console messages.\n\nHere's the new output from ammo.js (page loaded + 20 seconds of run time):\n\nPEP TEST-START | test_ammo.js\nPEP WARNING    | test_ammo.js | open_page | unresponsive time: 57 ms\nPEP WARNING    | test_ammo.js | open_page | unresponsive time: 1123 ms\nPEP INFO       | GC(T+0.0) Type:Glob, Total:42.2, Wait:6.9, Mark:22.1, Sweep:11.2, FinObj:3.3, FinStr:0.2, FinScr:0.4, FinShp:2.0, DisCod:1.1, DisAnl:1.6, XPCnct:1.0, Destry:0.0, End:2.9, +Chu:15, -Chu:0, Reason:Mallc\nPEP WARNING    | test_ammo.js | open_page | unresponsive time: 405 ms\nPEP WARNING    | test_ammo.js | open_page | unresponsive time: 73 ms\nPEP INFO       | GC(T+4.0) Type:Glob, Total:44.5, Wait:0.1, Mark:28.8, Sweep:12.5, FinObj:3.4, FinStr:0.0, FinScr:0.4, FinShp:1.0, DisCod:1.6, DisAnl:4.8, XPCnct:0.6, Destry:0.1, End:3.6, +Chu:19, -Chu:0, Reason:  API\nPEP WARNING    | test_ammo.js | wait | unresponsive time: 89 ms\nPEP WARNING    | test_ammo.js | wait | unresponsive time: 187 ms\nPEP INFO       | GC(T+8.1) Type:Glob, Total:38.6, Wait:0.1, Mark:29.3, Sweep:9.2, FinObj:3.4, FinStr:0.0, FinScr:0.2, FinShp:0.7, DisCod:1.4, DisAnl:2.3, XPCnct:0.4, Destry:0.0, End:0.5, +Chu:4, -Chu:0, Reason:  API\nPEP INFO       | CC(T+9.1) collected: 1057 (1057 waiting for GC), suspected: 4506, duration: 5 ms.\nPEP INFO       | GC(T+12.1) Type:Glob, Total:39.0, Wait:0.1, Mark:29.0, Sweep:9.8, FinObj:4.0, FinStr:0.0, FinScr:0.2, FinShp:0.7, DisCod:1.4, DisAnl:2.4, XPCnct:0.4, Destry:0.0, End:0.5, +Chu:1, -Chu:0, Reason:  API\nPEP INFO       | GC(T+16.2) Type:Glob, Total:38.8, Wait:0.1, Mark:28.7, Sweep:10.0, FinObj:4.1, FinStr:0.0, FinScr:0.2, FinShp:0.7, DisCod:1.4, DisAnl:2.4, XPCnct:0.5, Destry:0.0, End:0.5, +Chu:1, -Chu:0, Reason:  API\nPEP INFO       | CC(T+17.1) collected: 48 (48 waiting for GC), suspected: 75, duration: 2 ms.\nPEP INFO       | GC(T+20.2) Type:Glob, Total:39.2, Wait:0.1, Mark:28.9, Sweep:10.2, FinObj:4.2, FinStr:0.0, FinScr:0.2, FinShp:0.7, DisCod:1.4, DisAnl:2.4, XPCnct:0.4, Destry:0.0, End:0.4, +Chu:0, -Chu:0, Reason:  API\nPEP TEST-UNEXPECTED-FAIL | test_ammo.js | fail threshold: 0.0 < metric: 1476.622\nPEP TEST-END   | test_ammo.js | finished in: 22896 ms\nPEP INFO       | Test Suite Finished\nPEP INFO       | GC(T+22.3) Type:Glob, Total:24.1, Wait:0.1, Mark:9.5, Sweep:13.1, FinObj:2.9, FinStr:0.0, FinScr:3.0, FinShp:1.5, DisCod:1.3, DisAnl:2.5, XPCnct:1.0, Destry:0.0, End:2.4, +Chu:0, -Chu:0, Reason:  API", "bug_id": 702495, "raw_text": "I modified the peptest to enable JS memory logging and output the error console messages.\n\nHere's the new output from ammo.js (page loaded + 20 seconds of run time):\n\nPEP TEST-START | test_ammo.js\nPEP WARNING    | test_ammo.js | open_page | unresponsive time: 57 ms\nPEP WARNING    | test_ammo.js | open_page | unresponsive time: 1123 ms\nPEP INFO       | GC(T+0.0) Type:Glob, Total:42.2, Wait:6.9, Mark:22.1, Sweep:11.2, FinObj:3.3, FinStr:0.2, FinScr:0.4, FinShp:2.0, DisCod:1.1, DisAnl:1.6, XPCnct:1.0, Destry:0.0, End:2.9, +Chu:15, -Chu:0, Reason:Mallc\nPEP WARNING    | test_ammo.js | open_page | unresponsive time: 405 ms\nPEP WARNING    | test_ammo.js | open_page | unresponsive time: 73 ms\nPEP INFO       | GC(T+4.0) Type:Glob, Total:44.5, Wait:0.1, Mark:28.8, Sweep:12.5, FinObj:3.4, FinStr:0.0, FinScr:0.4, FinShp:1.0, DisCod:1.6, DisAnl:4.8, XPCnct:0.6, Destry:0.1, End:3.6, +Chu:19, -Chu:0, Reason:  API\nPEP WARNING    | test_ammo.js | wait | unresponsive time: 89 ms\nPEP WARNING    | test_ammo.js | wait | unresponsive time: 187 ms\nPEP INFO       | GC(T+8.1) Type:Glob, Total:38.6, Wait:0.1, Mark:29.3, Sweep:9.2, FinObj:3.4, FinStr:0.0, FinScr:0.2, FinShp:0.7, DisCod:1.4, DisAnl:2.3, XPCnct:0.4, Destry:0.0, End:0.5, +Chu:4, -Chu:0, Reason:  API\nPEP INFO       | CC(T+9.1) collected: 1057 (1057 waiting for GC), suspected: 4506, duration: 5 ms.\nPEP INFO       | GC(T+12.1) Type:Glob, Total:39.0, Wait:0.1, Mark:29.0, Sweep:9.8, FinObj:4.0, FinStr:0.0, FinScr:0.2, FinShp:0.7, DisCod:1.4, DisAnl:2.4, XPCnct:0.4, Destry:0.0, End:0.5, +Chu:1, -Chu:0, Reason:  API\nPEP INFO       | GC(T+16.2) Type:Glob, Total:38.8, Wait:0.1, Mark:28.7, Sweep:10.0, FinObj:4.1, FinStr:0.0, FinScr:0.2, FinShp:0.7, DisCod:1.4, DisAnl:2.4, XPCnct:0.5, Destry:0.0, End:0.5, +Chu:1, -Chu:0, Reason:  API\nPEP INFO       | CC(T+17.1) collected: 48 (48 waiting for GC), suspected: 75, duration: 2 ms.\nPEP INFO       | GC(T+20.2) Type:Glob, Total:39.2, Wait:0.1, Mark:28.9, Sweep:10.2, FinObj:4.2, FinStr:0.0, FinScr:0.2, FinShp:0.7, DisCod:1.4, DisAnl:2.4, XPCnct:0.4, Destry:0.0, End:0.4, +Chu:0, -Chu:0, Reason:  API\nPEP TEST-UNEXPECTED-FAIL | test_ammo.js | fail threshold: 0.0 < metric: 1476.622\nPEP TEST-END   | test_ammo.js | finished in: 22896 ms\nPEP INFO       | Test Suite Finished\nPEP INFO       | GC(T+22.3) Type:Glob, Total:24.1, Wait:0.1, Mark:9.5, Sweep:13.1, FinObj:2.9, FinStr:0.0, FinScr:3.0, FinShp:1.5, DisCod:1.3, DisAnl:2.5, XPCnct:1.0, Destry:0.0, End:2.4, +Chu:0, -Chu:0, Reason:  API", "attachment_id": 583826}, {"id": 5935568, "count": 21, "is_private": false, "author": "mcote@mozilla.bugs", "time": "2011-12-22T17:26:34Z", "creation_time": "2011-12-22T17:26:34Z", "creator": "mcote@mozilla.bugs", "raw_text": "And for webgl_terrain_dynamic.html:\n\nPEP TEST-START | test_webgl_terrain.js\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 57 ms\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 1073 ms\nPEP INFO       | GC(T+0.0) Type:Glob, Total:51.2, Wait:1.1, Mark:39.5, Sweep:9.3, FinObj:3.1, FinStr:0.2, FinScr:0.4, FinShp:1.9, DisCod:0.4, DisAnl:1.2, XPCnct:0.8, Destry:0.0, End:2.2, +Chu:102, -Chu:0, Reason:Alloc\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 116 ms\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 69 ms\nPEP INFO       | GC(T+4.1) Type:Glob, Total:73.5, Wait:0.1, Mark:68.2, Sweep:5.1, FinObj:0.5, FinStr:0.0, FinScr:0.1, FinShp:0.7, DisCod:0.4, DisAnl:2.1, XPCnct:0.5, Destry:0.1, End:0.6, +Chu:50, -Chu:0, Reason:  API\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 313 ms\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 123 ms\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 524 ms\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 79 ms\nPEP WARNING    | test_webgl_terrain.js | wait | unresponsive time: 176 ms\nPEP WARNING    | test_webgl_terrain.js | wait | unresponsive time: 74 ms\nPEP INFO       | GC(T+8.1) Type:Glob, Total:58.9, Wait:0.1, Mark:54.8, Sweep:3.9, FinObj:0.5, FinStr:0.0, FinScr:0.1, FinShp:0.7, DisCod:0.6, DisAnl:1.1, XPCnct:0.5, Destry:0.0, End:0.6, +Chu:0, -Chu:0, Reason:  API\nPEP WARNING    | test_webgl_terrain.js | wait | unresponsive time: 68 ms\nPEP INFO       | CC(T+9.1) collected: 1989 (1989 waiting for GC), suspected: 5453, duration: 15 ms.\nPEP WARNING    | test_webgl_terrain.js | wait | unresponsive time: 57 ms\nPEP INFO       | GC(T+12.2) Type:Glob, Total:59.0, Wait:0.1, Mark:54.7, Sweep:3.9, FinObj:0.7, FinStr:0.0, FinScr:0.1, FinShp:0.6, DisCod:0.6, DisAnl:1.0, XPCnct:0.5, Destry:0.0, End:0.8, +Chu:0, -Chu:0, Reason:  API\nPEP WARNING    | test_webgl_terrain.js | wait | unresponsive time: 51 ms\nPEP INFO       | GC(T+16.3) Type:Glob, Total:56.7, Wait:0.1, Mark:52.6, Sweep:4.0, FinObj:0.7, FinStr:0.0, FinScr:0.1, FinShp:0.7, DisCod:0.6, DisAnl:1.0, XPCnct:0.4, Destry:0.0, End:0.5, +Chu:0, -Chu:0, Reason:  API\nPEP INFO       | CC(T+17.2) collected: 826 (826 waiting for GC), suspected: 878, duration: 3 ms.\nPEP INFO       | GC(T+20.3) Type:Glob, Total:56.9, Wait:0.1, Mark:52.6, Sweep:4.2, FinObj:0.9, FinStr:0.0, FinScr:0.1, FinShp:0.6, DisCod:0.6, DisAnl:1.0, XPCnct:0.4, Destry:0.0, End:0.5, +Chu:0, -Chu:0, Reason:  API\nPEP WARNING    | test_webgl_terrain.js | wait | unresponsive time: 55 ms\nPEP INFO       | GC(T+24.4) Type:Glob, Total:60.3, Wait:0.1, Mark:56.0, Sweep:4.2, FinObj:0.9, FinStr:0.0, FinScr:0.1, FinShp:0.6, DisCod:0.6, DisAnl:1.0, XPCnct:0.4, Destry:0.0, End:0.5, +Chu:0, -Chu:13, Reason:  API\nPEP INFO       | CC(T+25.4) collected: 818 (818 waiting for GC), suspected: 851, duration: 4 ms.\nPEP TEST-UNEXPECTED-FAIL | test_webgl_terrain.js | fail threshold: 0.0 < metric: 1616.661\nPEP TEST-END   | test_webgl_terrain.js | finished in: 28869 ms\nPEP INFO       | Test Suite Finished\nPEP INFO       | GC(T+28.7) Type:Glob, Total:80.6, Wait:0.1, Mark:71.3, Sweep:6.3, FinObj:1.8, FinStr:0.0, FinScr:0.1, FinShp:1.1, DisCod:0.6, DisAnl:1.1, XPCnct:0.6, Destry:0.0, End:3.6, +Chu:0, -Chu:0, Reason:  API\n\nWe can clearly see the GC/CC running at every > 50 ms pause.\n\nLet me know if anyone wants similar output from other sites.", "attachment_id": null, "bug_id": 702495, "text": "And for webgl_terrain_dynamic.html:\n\nPEP TEST-START | test_webgl_terrain.js\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 57 ms\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 1073 ms\nPEP INFO       | GC(T+0.0) Type:Glob, Total:51.2, Wait:1.1, Mark:39.5, Sweep:9.3, FinObj:3.1, FinStr:0.2, FinScr:0.4, FinShp:1.9, DisCod:0.4, DisAnl:1.2, XPCnct:0.8, Destry:0.0, End:2.2, +Chu:102, -Chu:0, Reason:Alloc\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 116 ms\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 69 ms\nPEP INFO       | GC(T+4.1) Type:Glob, Total:73.5, Wait:0.1, Mark:68.2, Sweep:5.1, FinObj:0.5, FinStr:0.0, FinScr:0.1, FinShp:0.7, DisCod:0.4, DisAnl:2.1, XPCnct:0.5, Destry:0.1, End:0.6, +Chu:50, -Chu:0, Reason:  API\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 313 ms\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 123 ms\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 524 ms\nPEP WARNING    | test_webgl_terrain.js | open_page | unresponsive time: 79 ms\nPEP WARNING    | test_webgl_terrain.js | wait | unresponsive time: 176 ms\nPEP WARNING    | test_webgl_terrain.js | wait | unresponsive time: 74 ms\nPEP INFO       | GC(T+8.1) Type:Glob, Total:58.9, Wait:0.1, Mark:54.8, Sweep:3.9, FinObj:0.5, FinStr:0.0, FinScr:0.1, FinShp:0.7, DisCod:0.6, DisAnl:1.1, XPCnct:0.5, Destry:0.0, End:0.6, +Chu:0, -Chu:0, Reason:  API\nPEP WARNING    | test_webgl_terrain.js | wait | unresponsive time: 68 ms\nPEP INFO       | CC(T+9.1) collected: 1989 (1989 waiting for GC), suspected: 5453, duration: 15 ms.\nPEP WARNING    | test_webgl_terrain.js | wait | unresponsive time: 57 ms\nPEP INFO       | GC(T+12.2) Type:Glob, Total:59.0, Wait:0.1, Mark:54.7, Sweep:3.9, FinObj:0.7, FinStr:0.0, FinScr:0.1, FinShp:0.6, DisCod:0.6, DisAnl:1.0, XPCnct:0.5, Destry:0.0, End:0.8, +Chu:0, -Chu:0, Reason:  API\nPEP WARNING    | test_webgl_terrain.js | wait | unresponsive time: 51 ms\nPEP INFO       | GC(T+16.3) Type:Glob, Total:56.7, Wait:0.1, Mark:52.6, Sweep:4.0, FinObj:0.7, FinStr:0.0, FinScr:0.1, FinShp:0.7, DisCod:0.6, DisAnl:1.0, XPCnct:0.4, Destry:0.0, End:0.5, +Chu:0, -Chu:0, Reason:  API\nPEP INFO       | CC(T+17.2) collected: 826 (826 waiting for GC), suspected: 878, duration: 3 ms.\nPEP INFO       | GC(T+20.3) Type:Glob, Total:56.9, Wait:0.1, Mark:52.6, Sweep:4.2, FinObj:0.9, FinStr:0.0, FinScr:0.1, FinShp:0.6, DisCod:0.6, DisAnl:1.0, XPCnct:0.4, Destry:0.0, End:0.5, +Chu:0, -Chu:0, Reason:  API\nPEP WARNING    | test_webgl_terrain.js | wait | unresponsive time: 55 ms\nPEP INFO       | GC(T+24.4) Type:Glob, Total:60.3, Wait:0.1, Mark:56.0, Sweep:4.2, FinObj:0.9, FinStr:0.0, FinScr:0.1, FinShp:0.6, DisCod:0.6, DisAnl:1.0, XPCnct:0.4, Destry:0.0, End:0.5, +Chu:0, -Chu:13, Reason:  API\nPEP INFO       | CC(T+25.4) collected: 818 (818 waiting for GC), suspected: 851, duration: 4 ms.\nPEP TEST-UNEXPECTED-FAIL | test_webgl_terrain.js | fail threshold: 0.0 < metric: 1616.661\nPEP TEST-END   | test_webgl_terrain.js | finished in: 28869 ms\nPEP INFO       | Test Suite Finished\nPEP INFO       | GC(T+28.7) Type:Glob, Total:80.6, Wait:0.1, Mark:71.3, Sweep:6.3, FinObj:1.8, FinStr:0.0, FinScr:0.1, FinShp:1.1, DisCod:0.6, DisAnl:1.1, XPCnct:0.6, Destry:0.0, End:3.6, +Chu:0, -Chu:0, Reason:  API\n\nWe can clearly see the GC/CC running at every > 50 ms pause.\n\nLet me know if anyone wants similar output from other sites.", "tags": []}, {"author": "cameron@dawsoncode.com", "creation_time": "2011-12-23T19:59:11Z", "time": "2011-12-23T19:59:11Z", "creator": "cameron@dawsoncode.com", "count": 22, "id": 5937809, "is_private": false, "tags": [], "bug_id": 702495, "text": "I ran across this test site yesterday: http://gregor-wagner.com/tmp/mem\nIt may be useful in tracking down this bug.  Sure stresses the browser nicely.\n\nI'll try playing with this if I get a chance over the holidays.  But if anyone else wants to see if it illuminates something, please feel free.  :)", "raw_text": "I ran across this test site yesterday: http://gregor-wagner.com/tmp/mem\nIt may be useful in tracking down this bug.  Sure stresses the browser nicely.\n\nI'll try playing with this if I get a chance over the holidays.  But if anyone else wants to see if it illuminates something, please feel free.  :)", "attachment_id": null}, {"id": 5950405, "count": 23, "is_private": false, "creation_time": "2012-01-03T09:02:34Z", "time": "2012-01-03T09:02:34Z", "creator": "rakshithbekal@gmail.com", "author": "rakshithbekal@gmail.com", "attachment_id": null, "raw_text": "http://oos.moxiecode.com/js_webgl/xwing/index.html stresses my browser a lot", "tags": [], "text": "http://oos.moxiecode.com/js_webgl/xwing/index.html stresses my browser a lot", "bug_id": 702495}, {"attachment_id": null, "raw_text": "Starting sync can causes 400ms stops.", "text": "Starting sync can causes 400ms stops.", "bug_id": 702495, "tags": [], "is_private": false, "id": 7038384, "count": 24, "creator": "kami911@gmail.com", "creation_time": "2013-01-25T12:39:26Z", "time": "2013-01-25T12:39:26Z", "author": "kami911@gmail.com"}, {"is_private": false, "id": 7038387, "count": 25, "creator": "kami911@gmail.com", "time": "2013-01-25T12:40:33Z", "creation_time": "2013-01-25T12:40:33Z", "author": "kami911@gmail.com", "attachment_id": 706345, "raw_text": "", "text": "Created attachment 706345\nStarting new sync can cause 400ms gaps.", "bug_id": 702495, "tags": []}]}}}