{"bugs": {"677590": {"comments": [{"attachment_id": null, "raw_text": "When mailnews.sendInBackground is in effect and a user replies to or forwards a message, the message should be marked replied to or forwarded before the message is delivered, not afterward.\n\nThis is consistent with the behavior of other mail clients and fixes an important use case that is currently broken... if you reply to or forward a message and then move the message into another folder before the reply / forward has finished being delivered, it won't get the replied / forwarded flag as it should.\n\nFile > Send Later has the same problem and should probably be fixed in the same way.", "id": 5642674, "creator": "jik@kamens.us", "is_private": false, "count": 0, "author": "jik@kamens.us", "creation_time": "2011-08-09T17:28:58Z", "bug_id": 677590, "time": "2011-08-09T17:28:58Z", "tags": [], "text": "When mailnews.sendInBackground is in effect and a user replies to or forwards a message, the message should be marked replied to or forwarded before the message is delivered, not afterward.\n\nThis is consistent with the behavior of other mail clients and fixes an important use case that is currently broken... if you reply to or forward a message and then move the message into another folder before the reply / forward has finished being delivered, it won't get the replied / forwarded flag as it should.\n\nFile > Send Later has the same problem and should probably be fixed in the same way."}, {"is_private": false, "creator": "vseerror@lehigh.edu", "text": "Mark what are your thoughts \n\na) stay with current behavior, with delayed marking of message until successful smtp send - but may cause user confusion because the UI does not show message sent upon closing of compose.  (AND morph this to fix message not marked replied if message has been moved to another folder.  Note this is less of an issue if settings put replies in same folder as original)\n\nb) change behavior (perhaps not even technically feasible for imap?), immediately mark message as replied to so that user sees it in UI, but may lead to confusion if ultimately the smtp message send fails (example failed due to message size too large).\n\n\n> File > Send Later has the same problem and should probably be fixed in the\n> same way.\nThanks for pointing this out - yes, it is essentially same issue as mailnews.sendInBackground = true\n\nJonathan, I've revised the bug summary in part to help avoid confusion on some technical points. But I suspect \"a\" is what developers will want. Do you care which behavior is chosen, a or b?", "tags": [], "time": "2014-02-23T21:45:23Z", "creation_time": "2014-02-23T21:45:23Z", "author": "vseerror@lehigh.edu", "raw_text": "Mark what are your thoughts \n\na) stay with current behavior, with delayed marking of message until successful smtp send - but may cause user confusion because the UI does not show message sent upon closing of compose.  (AND morph this to fix message not marked replied if message has been moved to another folder.  Note this is less of an issue if settings put replies in same folder as original)\n\nb) change behavior (perhaps not even technically feasible for imap?), immediately mark message as replied to so that user sees it in UI, but may lead to confusion if ultimately the smtp message send fails (example failed due to message size too large).\n\n\n> File > Send Later has the same problem and should probably be fixed in the\n> same way.\nThanks for pointing this out - yes, it is essentially same issue as mailnews.sendInBackground = true\n\nJonathan, I've revised the bug summary in part to help avoid confusion on some technical points. But I suspect \"a\" is what developers will want. Do you care which behavior is chosen, a or b?", "attachment_id": null, "id": 8452879, "count": 1, "bug_id": 677590}, {"id": 8453564, "attachment_id": null, "raw_text": "I wonder if the ideal wouldn't be to mark as replied instantly, but clear the replied flag if send fails.", "creation_time": "2014-02-24T07:17:45Z", "author": "mkmelin+mozilla@iki.fi", "text": "I wonder if the ideal wouldn't be to mark as replied instantly, but clear the replied flag if send fails.", "tags": [], "time": "2014-02-24T07:17:45Z", "bug_id": 677590, "is_private": false, "creator": "mkmelin+mozilla@iki.fi", "count": 2}, {"count": 3, "bug_id": 677590, "raw_text": "The requirement, in my mind, is that if someone sends a reply, then whether that reply is delivered in the foreground, in the background, or later with Send Unsent Messages, the message that was replied to needs to get the flag, even if it is moved to a different folder before the message is actually delivered.\n\nIf the delivery subsequently fails, then it would be nice to undo the flag, but I don't think that's essential, because that's the edge case, whereas successful delivery is the normal case that should be optimized for.\n\nIn my add-on, Send Later, I add the forwarded or replied flag to the original message as soon as the user schedules the message for later delivery.", "attachment_id": null, "id": 8455092, "creator": "jik@kamens.us", "is_private": false, "time": "2014-02-24T16:44:48Z", "tags": [], "text": "The requirement, in my mind, is that if someone sends a reply, then whether that reply is delivered in the foreground, in the background, or later with Send Unsent Messages, the message that was replied to needs to get the flag, even if it is moved to a different folder before the message is actually delivered.\n\nIf the delivery subsequently fails, then it would be nice to undo the flag, but I don't think that's essential, because that's the edge case, whereas successful delivery is the normal case that should be optimized for.\n\nIn my add-on, Send Later, I add the forwarded or replied flag to the original message as soon as the user schedules the message for later delivery.", "author": "jik@kamens.us", "creation_time": "2014-02-24T16:44:48Z"}, {"id": 8459045, "raw_text": "I think adding the flag straight away would be fine (it also gives the user a visual indication that they did reply to the message).\n\nIt would be conceivable that we could use gloda to track the message, and flag it in the appropriate place (or unflag it), but like Jonathan says, that's probably not too critical.", "attachment_id": null, "text": "I think adding the flag straight away would be fine (it also gives the user a visual indication that they did reply to the message).\n\nIt would be conceivable that we could use gloda to track the message, and flag it in the appropriate place (or unflag it), but like Jonathan says, that's probably not too critical.", "tags": [], "time": "2014-02-25T09:11:10Z", "bug_id": 677590, "creation_time": "2014-02-25T09:11:10Z", "author": "standard8@mozilla.com", "count": 4, "is_private": false, "creator": "standard8@mozilla.com"}, {"creation_time": "2014-02-25T12:30:41Z", "author": "vseerror@lehigh.edu", "text": "Thanks for the feedback. I trust the bug summary matches the desired behavior", "tags": [], "time": "2014-02-25T12:30:41Z", "is_private": false, "creator": "vseerror@lehigh.edu", "id": 8459649, "attachment_id": null, "raw_text": "Thanks for the feedback. I trust the bug summary matches the desired behavior", "bug_id": 677590, "count": 5}]}}, "comments": {}}