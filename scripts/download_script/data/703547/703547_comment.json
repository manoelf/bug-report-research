{"comments": {}, "bugs": {"703547": {"comments": [{"creation_time": "2011-11-18T11:48:17Z", "is_private": false, "creator": "bnord01@gmail.com", "tags": [], "attachment_id": null, "bug_id": 703547, "id": 5857858, "author": "bnord01@gmail.com", "count": 0, "text": "User Agent: Mozilla/5.0 (X11; Linux i686 on x86_64; rv:8.0) Gecko/20100101 Firefox/8.0\nBuild ID: 20111104165243\n\nSteps to reproduce:\n\nChanged alerts.totalOpenTime in about:config from 3000 to 600000, restarted Thunderbird, received E-Mail.\n\n\nActual results:\n\nThe notification window popped up and closed after a few seconds (3 would be my guess).\n\n\nExpected results:\n\nThe notification window should have stayed open for 10 minutes.", "time": "2011-11-18T11:48:17Z", "raw_text": "User Agent: Mozilla/5.0 (X11; Linux i686 on x86_64; rv:8.0) Gecko/20100101 Firefox/8.0\nBuild ID: 20111104165243\n\nSteps to reproduce:\n\nChanged alerts.totalOpenTime in about:config from 3000 to 600000, restarted Thunderbird, received E-Mail.\n\n\nActual results:\n\nThe notification window popped up and closed after a few seconds (3 would be my guess).\n\n\nExpected results:\n\nThe notification window should have stayed open for 10 minutes."}, {"attachment_id": null, "tags": [], "creator": "wraithlike@gmail.com", "is_private": false, "creation_time": "2011-11-19T09:18:50Z", "raw_text": "(In reply to bnord01 from comment #0)\nI changed the configuration in question and it stays longer than 3 seconds. I didn' try for 10 minutes, but the notification stays until I close it.\nUser Agent: Mozilla/5.0 (X11; Linux i686; rv:8.0) Gecko/20111105 Thunderbird/8.0\nBuild ID: 20111105021619", "time": "2011-11-19T09:18:50Z", "author": "wraithlike@gmail.com", "text": "(In reply to bnord01 from comment #0)\nI changed the configuration in question and it stays longer than 3 seconds. I didn' try for 10 minutes, but the notification stays until I close it.\nUser Agent: Mozilla/5.0 (X11; Linux i686; rv:8.0) Gecko/20111105 Thunderbird/8.0\nBuild ID: 20111105021619", "count": 1, "bug_id": 703547, "id": 5860141}, {"creator": "ludovic@hirlimann.net", "creation_time": "2011-12-01T12:56:15Z", "is_private": false, "attachment_id": null, "tags": [], "author": "ludovic@hirlimann.net", "count": 2, "text": "Bnord01 ; do you see the same issue if you start with addon disabled ?", "bug_id": 703547, "id": 5884917, "raw_text": "Bnord01 ; do you see the same issue if you start with addon disabled ?", "time": "2011-12-01T12:56:15Z"}, {"id": 5884945, "bug_id": 703547, "is_private": false, "creation_time": "2011-12-01T13:28:39Z", "creator": "bnord01@gmail.com", "author": "bnord01@gmail.com", "text": "Yes disabling all addons didn't change the behavior.", "count": 3, "tags": [], "time": "2011-12-01T13:28:39Z", "attachment_id": null, "raw_text": "Yes disabling all addons didn't change the behavior."}, {"time": "2011-12-09T13:09:14Z", "raw_text": "(In reply to bnord01 from comment #3)\n> Yes disabling all addons didn't change the behavior.\n\nIf you launch Thunderbird from the command line do you see any errors when this happens on the terminal you launched Thunderbird from ?", "id": 5903904, "bug_id": 703547, "count": 4, "text": "(In reply to bnord01 from comment #3)\n> Yes disabling all addons didn't change the behavior.\n\nIf you launch Thunderbird from the command line do you see any errors when this happens on the terminal you launched Thunderbird from ?", "author": "ludovic@hirlimann.net", "tags": [], "attachment_id": null, "is_private": false, "creation_time": "2011-12-09T13:09:14Z", "creator": "ludovic@hirlimann.net"}, {"id": 5904401, "bug_id": 703547, "author": "bnord01@gmail.com", "count": 5, "text": "(In reply to Ludovic Hirlimann [:Usul] from comment #4)\n> If you launch Thunderbird from the command line do you see any errors when\n> this happens on the terminal you launched Thunderbird from ?\nNo, no errors at all.", "time": "2011-12-09T16:28:08Z", "raw_text": "(In reply to Ludovic Hirlimann [:Usul] from comment #4)\n> If you launch Thunderbird from the command line do you see any errors when\n> this happens on the terminal you launched Thunderbird from ?\nNo, no errors at all.", "is_private": false, "creation_time": "2011-12-09T16:28:08Z", "creator": "bnord01@gmail.com", "tags": [], "attachment_id": null}, {"tags": [], "time": "2012-01-26T12:28:09Z", "raw_text": "I have the same problem with TB10b4 on RHEL5 (Xfce 4.4.2)\n\nThe notification-mechanism that is used here allows to specify an \"expiration time\" afaics, e.g. I can do\n\n notification-send -t 1000 'new mail arrived' 'Wake up'\n\nwhich will vanish after 1000ms.", "attachment_id": null, "id": 6010768, "bug_id": 703547, "is_private": false, "creation_time": "2012-01-26T12:28:09Z", "creator": "Martin.Schuster1@infineon.com", "text": "I have the same problem with TB10b4 on RHEL5 (Xfce 4.4.2)\n\nThe notification-mechanism that is used here allows to specify an \"expiration time\" afaics, e.g. I can do\n\n notification-send -t 1000 'new mail arrived' 'Wake up'\n\nwhich will vanish after 1000ms.", "count": 6, "author": "Martin.Schuster1@infineon.com"}, {"tags": [], "attachment_id": null, "raw_text": "toolkit/system/gnome/nsAlertsIconListener.cpp creates this notification,\nhttps://mxr.mozilla.org/comm-central/source/mozilla/toolkit/system/gnome/nsAlertsIconListener.cpp#218\nbut nowhere is notify_notification_set_timeout() being used\n(which allows to set the timeout for the notification :),\nhttp://developer.gnome.org/libnotify/0.7/NotifyNotification.html#notify-notification-set-timeout )", "time": "2012-01-26T12:46:39Z", "is_private": false, "creation_time": "2012-01-26T12:46:39Z", "id": 6010807, "bug_id": 703547, "author": "Martin.Schuster1@infineon.com", "count": 7, "text": "toolkit/system/gnome/nsAlertsIconListener.cpp creates this notification,\nhttps://mxr.mozilla.org/comm-central/source/mozilla/toolkit/system/gnome/nsAlertsIconListener.cpp#218\nbut nowhere is notify_notification_set_timeout() being used\n(which allows to set the timeout for the notification :),\nhttp://developer.gnome.org/libnotify/0.7/NotifyNotification.html#notify-notification-set-timeout )", "creator": "Martin.Schuster1@infineon.com"}, {"text": "I would expect the libnotify functionality and interfaces should allow the user to set notification timeouts, so I suggest looking around in your user preferences for your OS.\n\n(for example, growl on Mac lets me set timeouts generally and on a per-application basis).", "count": 8, "author": "standard8@mozilla.com", "creator": "standard8@mozilla.com", "is_private": false, "creation_time": "2012-01-26T13:11:16Z", "bug_id": 703547, "id": 6010842, "raw_text": "I would expect the libnotify functionality and interfaces should allow the user to set notification timeouts, so I suggest looking around in your user preferences for your OS.\n\n(for example, growl on Mac lets me set timeouts generally and on a per-application basis).", "attachment_id": null, "time": "2012-01-26T13:11:16Z", "tags": []}, {"attachment_id": null, "tags": [], "creator": "Martin.Schuster1@infineon.com", "creation_time": "2012-01-26T15:45:42Z", "is_private": false, "time": "2012-01-26T15:45:42Z", "raw_text": "I just checked the available settings for the notification-applet of Xfce (basically the recipient of the notifications) -- it only allows to set a default timeout, not an application-based one.\n\nI haven't checked the underlying protocol that libnotify is using (maybe dbus?), so I don't know if application-based timeouts are even possible -- but even if they are, as long as the notification-applets aren't supporting it, it's of no use.", "author": "Martin.Schuster1@infineon.com", "text": "I just checked the available settings for the notification-applet of Xfce (basically the recipient of the notifications) -- it only allows to set a default timeout, not an application-based one.\n\nI haven't checked the underlying protocol that libnotify is using (maybe dbus?), so I don't know if application-based timeouts are even possible -- but even if they are, as long as the notification-applets aren't supporting it, it's of no use.", "count": 9, "bug_id": 703547, "id": 6011168}, {"id": 6990495, "bug_id": 703547, "author": "Martin.Schuster1@infineon.com", "count": 10, "text": "Created attachment 701044\nuse alerts.totalOpenTime as notification timeout\n\nSimple fix that looks if the user has set alerts.totalOpenTime (i.e. it's not at its default value of 3000), and if so, use notify_notification_set_timeout() to set the timeout accordingly.\n\nThis is my very first patch to Mozilla source, and I'm not used to C++, so I apologize in advance if my code violates https://developer.mozilla.org/en-US/docs/Developer_Guide/Coding_Style -- I tried real hard :)", "raw_text": "Simple fix that looks if the user has set alerts.totalOpenTime (i.e. it's not at its default value of 3000), and if so, use notify_notification_set_timeout() to set the timeout accordingly.\n\nThis is my very first patch to Mozilla source, and I'm not used to C++, so I apologize in advance if my code violates https://developer.mozilla.org/en-US/docs/Developer_Guide/Coding_Style -- I tried real hard :)", "time": "2013-01-11T13:58:16Z", "is_private": false, "creation_time": "2013-01-11T13:58:16Z", "creator": "Martin.Schuster1@infineon.com", "tags": [], "attachment_id": 701044}, {"id": 6990867, "bug_id": 703547, "is_private": false, "creation_time": "2013-01-11T15:08:36Z", "creator": "ludovic@hirlimann.net", "author": "ludovic@hirlimann.net", "count": 11, "text": "Comment on attachment 701044\nuse alerts.totalOpenTime as notification timeout\n\nIn order to get traction you need to request reviews. Doing it for you right now.", "tags": [], "time": "2013-01-11T15:08:36Z", "attachment_id": 701044, "raw_text": "In order to get traction you need to request reviews. Doing it for you right now."}, {"id": 7028839, "bug_id": 703547, "author": "karlt@mozbugz.karlt.net", "text": "Comment on attachment 701044\nuse alerts.totalOpenTime as notification timeout\n\nGenerally, I think the right approach would be to set the category on the\nalert and the notification daemon should then be configurable according to\ncategory and/or application name.  (See also bug 686956.)\n\nHowever, I recognize that probably most notification daemons are not that\nconfigurable, and this is mostly harmless because it only takes effect when\nthe pref is not at the default value.\n\nSee https://developer.mozilla.org/en-US/docs/Mercurial_FAQ#How_can_I_generate_a_patch_for_somebody_else_to_check-in_for_me.3F\nfor information on how to prepare a patch for check-in, if you can, please.\n\n>+  // Check if user has set alerts.totalOpenTime (see bug #703547,\n>+  //   \"Setting alerts.totalOpenTime has no effect [...]\"), and if so, use\n>+  // that value as timeout for the notification\n>+  // -- Martin.Schuster1@infineon.com 2013-01-11\n\nDon't bother with the comment here, as the intended behaviour is clear enough\nfrom the code.\n\n>+  nsresult rv;\n>+  nsCOMPtr<nsIPrefBranch> prefs = do_GetService(NS_PREFSERVICE_CONTRACTID, &rv);\n>+  if (NS_SUCCEEDED(rv)) {\n\nShould really check that prefs is not NULL.  (It would be NULL if\ndo_GetService returned something that didn't support the nsIPrefBranch\ninterface.)  The NULL check is actually sufficient, so rv is not needed here.\ni.e.\n\n  nsCOMPtr<nsIPrefBranch> prefs = do_GetService(NS_PREFSERVICE_CONTRACTID);\n  if (prefs) {\n\n>+    bool hasUserValue;\n>+    prefs->PrefHasUserValue(\"alerts.totalOpenTime\", &hasUserValue);\n\nEither the return value of PrefHasUserValue should be checked or hasUserValue\nshould be initialized.  Simplest to initialize hasUserValue to false, I think.\n\n>+    if (hasUserValue) {\n>+      int32_t timeout;\n>+      rv = prefs->GetIntPref(\"alerts.totalOpenTime\", &timeout);\n\nThis rv is still needed, so\n\n  nsresult rv = prefs->GetIntPref(\"alerts.totalOpenTime\", &timeout);\n\n>+      if (NS_SUCCEEDED(rv)) {\n>+        notify_notification_set_timeout(mNotification, (gint)timeout);\n\nI expect the explicit (gint) cast is not necessary, so please remove that.", "count": 12, "raw_text": "Generally, I think the right approach would be to set the category on the\nalert and the notification daemon should then be configurable according to\ncategory and/or application name.  (See also bug 686956.)\n\nHowever, I recognize that probably most notification daemons are not that\nconfigurable, and this is mostly harmless because it only takes effect when\nthe pref is not at the default value.\n\nSee https://developer.mozilla.org/en-US/docs/Mercurial_FAQ#How_can_I_generate_a_patch_for_somebody_else_to_check-in_for_me.3F\nfor information on how to prepare a patch for check-in, if you can, please.\n\n>+  // Check if user has set alerts.totalOpenTime (see bug #703547,\n>+  //   \"Setting alerts.totalOpenTime has no effect [...]\"), and if so, use\n>+  // that value as timeout for the notification\n>+  // -- Martin.Schuster1@infineon.com 2013-01-11\n\nDon't bother with the comment here, as the intended behaviour is clear enough\nfrom the code.\n\n>+  nsresult rv;\n>+  nsCOMPtr<nsIPrefBranch> prefs = do_GetService(NS_PREFSERVICE_CONTRACTID, &rv);\n>+  if (NS_SUCCEEDED(rv)) {\n\nShould really check that prefs is not NULL.  (It would be NULL if\ndo_GetService returned something that didn't support the nsIPrefBranch\ninterface.)  The NULL check is actually sufficient, so rv is not needed here.\ni.e.\n\n  nsCOMPtr<nsIPrefBranch> prefs = do_GetService(NS_PREFSERVICE_CONTRACTID);\n  if (prefs) {\n\n>+    bool hasUserValue;\n>+    prefs->PrefHasUserValue(\"alerts.totalOpenTime\", &hasUserValue);\n\nEither the return value of PrefHasUserValue should be checked or hasUserValue\nshould be initialized.  Simplest to initialize hasUserValue to false, I think.\n\n>+    if (hasUserValue) {\n>+      int32_t timeout;\n>+      rv = prefs->GetIntPref(\"alerts.totalOpenTime\", &timeout);\n\nThis rv is still needed, so\n\n  nsresult rv = prefs->GetIntPref(\"alerts.totalOpenTime\", &timeout);\n\n>+      if (NS_SUCCEEDED(rv)) {\n>+        notify_notification_set_timeout(mNotification, (gint)timeout);\n\nI expect the explicit (gint) cast is not necessary, so please remove that.", "time": "2013-01-23T06:20:04Z", "is_private": false, "creation_time": "2013-01-23T06:20:04Z", "creator": "karlt@mozbugz.karlt.net", "tags": [], "attachment_id": 701044}, {"attachment_id": null, "raw_text": "I just upgraded from 10.0.11esr to 24.1.0esr and it is no longer using either of these preferences\nalerts.totalOpenTime=10000\nalerts.disableSlidingEffect=false\n\nI have it set to slide up for 10 seconds and it is not sliding and closing in about 3 seconds.\n\nThis ticket is fairly old.  Let me know if I should open a separate bug.", "time": "2013-11-11T19:53:22Z", "tags": [], "author": "dkleppinger@squaretwofinancial.com", "count": 13, "text": "I just upgraded from 10.0.11esr to 24.1.0esr and it is no longer using either of these preferences\nalerts.totalOpenTime=10000\nalerts.disableSlidingEffect=false\n\nI have it set to slide up for 10 seconds and it is not sliding and closing in about 3 seconds.\n\nThis ticket is fairly old.  Let me know if I should open a separate bug.", "creator": "dkleppinger@squaretwofinancial.com", "is_private": false, "creation_time": "2013-11-11T19:53:22Z", "id": 8067126, "bug_id": 703547}]}}}