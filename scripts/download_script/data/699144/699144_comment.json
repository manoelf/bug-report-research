{"bugs": {"699144": {"comments": [{"bug_id": 699144, "id": 5821297, "count": 0, "is_private": false, "tags": [], "attachment_id": null, "time": "2011-11-02T17:49:47Z", "text": "The new gmail scrolls really slow on OS X. It works fine in Safari.", "raw_text": "The new gmail scrolls really slow on OS X. It works fine in Safari.", "creation_time": "2011-11-02T17:49:47Z", "author": "jmuizelaar@mozilla.com", "creator": "jmuizelaar@mozilla.com"}, {"creator": "jmuizelaar@mozilla.com", "author": "jmuizelaar@mozilla.com", "text": "Some profiling:\n\n10% in DisplayList construction stuff\n58% in painting (most of this seems to be spent in places not doing real work)\n13% is CGBitmapContextCreateImage\n\n\n5.4% is memcpy on texture upload\n\nThe vm crazyness of CGBitmapContextCreateImage is really hurting us here.", "attachment_id": null, "time": "2011-11-02T18:07:58Z", "creation_time": "2011-11-02T18:07:58Z", "raw_text": "Some profiling:\n\n10% in DisplayList construction stuff\n58% in painting (most of this seems to be spent in places not doing real work)\n13% is CGBitmapContextCreateImage\n\n\n5.4% is memcpy on texture upload\n\nThe vm crazyness of CGBitmapContextCreateImage is really hurting us here.", "bug_id": 699144, "count": 1, "is_private": false, "tags": [], "id": 5821361}, {"id": 5822099, "tags": [], "count": 2, "is_private": false, "bug_id": 699144, "raw_text": "Scrolls awful on Win7 as well w/ D2D enabled.", "creation_time": "2011-11-02T22:03:45Z", "time": "2011-11-02T22:03:45Z", "attachment_id": null, "text": "Scrolls awful on Win7 as well w/ D2D enabled.", "author": "ryanvm@gmail.com", "creator": "ryanvm@gmail.com"}, {"bug_id": 699144, "tags": [], "count": 3, "is_private": false, "id": 5822237, "creator": "roc@ocallahan.org", "text": "Hmm, I actually thought it was good on Windows with D2D.\n\nWhat exactly are you scrolling?", "author": "roc@ocallahan.org", "attachment_id": null, "time": "2011-11-02T22:41:24Z", "creation_time": "2011-11-02T22:41:24Z", "raw_text": "Hmm, I actually thought it was good on Windows with D2D.\n\nWhat exactly are you scrolling?"}, {"text": "and I assume you're using a build with the fix for bug 681867?", "creator": "roc@ocallahan.org", "author": "roc@ocallahan.org", "time": "2011-11-02T22:41:50Z", "attachment_id": null, "creation_time": "2011-11-02T22:41:50Z", "raw_text": "and I assume you're using a build with the fix for bug 681867?", "bug_id": 699144, "tags": [], "is_private": false, "count": 4, "id": 5822240}, {"author": "ryanvm@gmail.com", "creator": "ryanvm@gmail.com", "id": 5822258, "tags": [], "is_private": false, "count": 5, "bug_id": 699144, "creation_time": "2011-11-02T22:45:23Z", "raw_text": "Yes, my build includes bug 681867. I'm running a 10/31 trunk build. I find a lot of jerkiness when scrolling through an expanded conversation with the down arrow. Also, there's an initial lag in scrolling when I first the arrow that's very noticeable.", "time": "2011-11-02T22:45:23Z", "attachment_id": null, "text": "Yes, my build includes bug 681867. I'm running a 10/31 trunk build. I find a lot of jerkiness when scrolling through an expanded conversation with the down arrow. Also, there's an initial lag in scrolling when I first the arrow that's very noticeable."}, {"tags": [], "count": 6, "is_private": false, "id": 5822260, "bug_id": 699144, "raw_text": "(In reply to Jeff Muizelaar [:jrmuizel] from comment #1)\n> The vm crazyness of CGBitmapContextCreateImage is really hurting us here.\n\nSo bug 665293 again. Sounds like somebody needs to bite the bullet and do the things outlined in bug 665293 comment 17.", "creation_time": "2011-11-02T22:46:14Z", "text": "(In reply to Jeff Muizelaar [:jrmuizel] from comment #1)\n> The vm crazyness of CGBitmapContextCreateImage is really hurting us here.\n\nSo bug 665293 again. Sounds like somebody needs to bite the bullet and do the things outlined in bug 665293 comment 17.", "time": "2011-11-02T22:46:14Z", "attachment_id": null, "creator": "mstange.moz@gmail.com", "author": "mstange.moz@gmail.com"}, {"text": "I don't have a Mac at the moment, so if Jeff could do that, I'd love to review it :-).", "attachment_id": null, "time": "2011-11-02T23:13:13Z", "creation_time": "2011-11-02T23:13:13Z", "raw_text": "I don't have a Mac at the moment, so if Jeff could do that, I'd love to review it :-).", "bug_id": 699144, "is_private": false, "count": 7, "tags": [], "id": 5822362, "creator": "roc@ocallahan.org", "author": "roc@ocallahan.org"}, {"bug_id": 699144, "is_private": false, "count": 8, "tags": [], "id": 5822425, "creator": "harshid@gmail.com", "text": "I can confirm the jerkiness that Ryan is seeing, but again only when using the down arrow. Scrolling with the mouse wheel feels really smooth.\n\n[Latest Nightly x64 on Windows 7 x64 with D2D]", "time": "2011-11-02T23:40:00Z", "attachment_id": null, "author": "harshid@gmail.com", "creation_time": "2011-11-02T23:40:00Z", "raw_text": "I can confirm the jerkiness that Ryan is seeing, but again only when using the down arrow. Scrolling with the mouse wheel feels really smooth.\n\n[Latest Nightly x64 on Windows 7 x64 with D2D]"}, {"creator": "roc@ocallahan.org", "author": "roc@ocallahan.org", "text": "If someone with a clean tree could try an experiment? Set GENERATION_MS in LayerActivityTracker in nsFrame.cpp to something really large, say 100000, and see if that helps.", "time": "2011-11-02T23:45:03Z", "attachment_id": null, "creation_time": "2011-11-02T23:45:03Z", "raw_text": "If someone with a clean tree could try an experiment? Set GENERATION_MS in LayerActivityTracker in nsFrame.cpp to something really large, say 100000, and see if that helps.", "bug_id": 699144, "tags": [], "count": 9, "is_private": false, "id": 5822443}, {"text": "I'm still not really seeing this on Windows. My machine is pretty fast though.\n\nDo you get dev.planning in email? if so, can you give me a dev.planning thread to view and exact steps to reproduce (which view, which messages are expanded etc)? Maybe a screenshot to illustrate so I'm doing it right?\n\nIn bug 681867 I gave a bookmarklet that can be used to run specific tests to get a reproducible number. What I'd like most of all here is specific steps to reproduce that end up running that bookmarklet, and numbers showing us slower than other browsers.", "attachment_id": null, "time": "2011-11-03T01:52:45Z", "raw_text": "I'm still not really seeing this on Windows. My machine is pretty fast though.\n\nDo you get dev.planning in email? if so, can you give me a dev.planning thread to view and exact steps to reproduce (which view, which messages are expanded etc)? Maybe a screenshot to illustrate so I'm doing it right?\n\nIn bug 681867 I gave a bookmarklet that can be used to run specific tests to get a reproducible number. What I'd like most of all here is specific steps to reproduce that end up running that bookmarklet, and numbers showing us slower than other browsers.", "creation_time": "2011-11-03T01:52:45Z", "bug_id": 699144, "tags": [], "count": 10, "is_private": false, "id": 5822700, "creator": "roc@ocallahan.org", "author": "roc@ocallahan.org"}, {"id": 5826268, "count": 11, "is_private": false, "tags": [], "bug_id": 699144, "raw_text": "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:10.0a1) Gecko/20111103 Firefox/10.0a1\nCPU: Intel E6300 (1.86GHz dual core)\nRAM: 6GB\nVGA: ATI 3650 (Catalyst driver 11.10)\n\nGmail is affecting autoscrolling of other tabs as well.\n\nStep to reproduce:\n1. Use a new profile and enable autoscrolling;\n2. Open a long page (I use https://bugzilla.mozilla.org/show_bug.cgi?id=94199);\n3. Autoscroll the page. CPU usage is at most 5% even autoscrolling at high speed;\n4. Log in to Gmail on a new tab;\n5. Switch back to previous page and autoscroll. CPU usage is now around 15% to 30%;\n6. Close Gmail (and wait for a few minutes). Autoscrolling in other pages is still using more CPU than usual, and sometimes periodic pauses.\n\nAutoscrolling performance restores only if I restart Firefox and avoid visiting Gmail again.\n\nFWIW, CPU usages within Gmail when autoscrolling are around 30% in Nightly (and Release), IE 9.0.3, and Chrome 15. However autoscrolling is fine in other tabs in IE and Chrome.\n\nFWIW(2), both new and old gmail interface affect autoscrolling performance.", "creation_time": "2011-11-04T13:41:38Z", "attachment_id": null, "time": "2011-11-04T13:41:38Z", "author": "Fanolian+BMO@gmail.com", "text": "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:10.0a1) Gecko/20111103 Firefox/10.0a1\nCPU: Intel E6300 (1.86GHz dual core)\nRAM: 6GB\nVGA: ATI 3650 (Catalyst driver 11.10)\n\nGmail is affecting autoscrolling of other tabs as well.\n\nStep to reproduce:\n1. Use a new profile and enable autoscrolling;\n2. Open a long page (I use https://bugzilla.mozilla.org/show_bug.cgi?id=94199);\n3. Autoscroll the page. CPU usage is at most 5% even autoscrolling at high speed;\n4. Log in to Gmail on a new tab;\n5. Switch back to previous page and autoscroll. CPU usage is now around 15% to 30%;\n6. Close Gmail (and wait for a few minutes). Autoscrolling in other pages is still using more CPU than usual, and sometimes periodic pauses.\n\nAutoscrolling performance restores only if I restart Firefox and avoid visiting Gmail again.\n\nFWIW, CPU usages within Gmail when autoscrolling are around 30% in Nightly (and Release), IE 9.0.3, and Chrome 15. However autoscrolling is fine in other tabs in IE and Chrome.\n\nFWIW(2), both new and old gmail interface affect autoscrolling performance.", "creator": "Fanolian+BMO@gmail.com"}, {"count": 12, "is_private": false, "tags": [], "id": 5826462, "bug_id": 699144, "creation_time": "2011-11-04T15:18:56Z", "raw_text": "After some more testings I find that my issue stated in comment#11 is caused by the plugin-contatiner.exe controlling Flash, which Gmail uses it for the chat function.\n\nKilling the plugin-container.exe or setting dom.ipc.plugins.enabled to false restores the scrolling performance of other tabs. But scrolling within Gmail is still using more CPU than other sites.", "text": "After some more testings I find that my issue stated in comment#11 is caused by the plugin-contatiner.exe controlling Flash, which Gmail uses it for the chat function.\n\nKilling the plugin-container.exe or setting dom.ipc.plugins.enabled to false restores the scrolling performance of other tabs. But scrolling within Gmail is still using more CPU than other sites.", "time": "2011-11-04T15:18:56Z", "attachment_id": null, "creator": "Fanolian+BMO@gmail.com", "author": "Fanolian+BMO@gmail.com"}, {"creator": "ryanvm@gmail.com", "author": "ryanvm@gmail.com", "text": "(In reply to Robert O'Callahan (:roc) (Mozilla Corporation) from comment #9)\n> If someone with a clean tree could try an experiment? Set GENERATION_MS in\n> LayerActivityTracker in nsFrame.cpp to something really large, say 100000,\n> and see if that helps.\n\nFinally did a build today with this change. Still very jerky when scrolling with the down arrow. The easiest way I've found to reproduce is to set Gmail to display 100 messages at a time, click the All Mail link, and then scroll with the up/down arrow. It stutters badly.\n\nLet me know if you want me to try something else.", "attachment_id": null, "time": "2011-11-12T20:24:12Z", "raw_text": "(In reply to Robert O'Callahan (:roc) (Mozilla Corporation) from comment #9)\n> If someone with a clean tree could try an experiment? Set GENERATION_MS in\n> LayerActivityTracker in nsFrame.cpp to something really large, say 100000,\n> and see if that helps.\n\nFinally did a build today with this change. Still very jerky when scrolling with the down arrow. The easiest way I've found to reproduce is to set Gmail to display 100 messages at a time, click the All Mail link, and then scroll with the up/down arrow. It stutters badly.\n\nLet me know if you want me to try something else.", "creation_time": "2011-11-12T20:24:12Z", "bug_id": 699144, "tags": [], "is_private": false, "count": 13, "id": 5844868}, {"count": 14, "is_private": false, "tags": [], "id": 5904102, "bug_id": 699144, "creation_time": "2011-12-09T14:53:18Z", "raw_text": "This shouldn't be a Snappy bug as we have bug 675866 to track improvements for scrolling and bug 100951 to track slow scrolling testcases.", "text": "This shouldn't be a Snappy bug as we have bug 675866 to track improvements for scrolling and bug 100951 to track slow scrolling testcases.", "attachment_id": null, "time": "2011-12-09T14:53:18Z", "creator": "mcastelluccio@mozilla.com", "author": "mcastelluccio@mozilla.com"}]}}, "comments": {}}