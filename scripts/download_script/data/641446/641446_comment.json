{"bugs": {"641446": {"comments": [{"text": "With some message, when I click on \"Open in conversation\" I have this error in error console (and no message is open in conversation):\n\nError: Couldn't find a collection for msg: [xpconnect wrapped nsIMsgDBHdr]\nSource File: chrome://messenger/content/msgHdrViewOverlay.js\nLine: 2287\n\nMozilla/5.0 (Windows NT 6.1; rv:2.0b13pre) Gecko/20110313 Thunderbird/3.3a3pre", "count": 0, "id": 5342755, "time": "2011-03-14T09:56:07Z", "author": "euryalus.0@gmail.com", "tags": [], "creator": "euryalus.0@gmail.com", "creation_time": "2011-03-14T09:56:07Z", "bug_id": 641446, "raw_text": "With some message, when I click on \"Open in conversation\" I have this error in error console (and no message is open in conversation):\n\nError: Couldn't find a collection for msg: [xpconnect wrapped nsIMsgDBHdr]\nSource File: chrome://messenger/content/msgHdrViewOverlay.js\nLine: 2287\n\nMozilla/5.0 (Windows NT 6.1; rv:2.0b13pre) Gecko/20110313 Thunderbird/3.3a3pre", "is_private": false, "attachment_id": null}, {"attachment_id": null, "creator": "bugmail@asutherland.org", "author": "bugmail@asutherland.org", "count": 1, "text": "This means the gloda index for the message is out-of-date for the message.  For this situation to happen:\n\n- Gloda must have previously indexed the message, setting a gloda-id property on the nsIMsgDBHdr as a result.\n\n- The message must have changed folders or had its messageKey change without gloda either hearing about it or managing to persist that to the database.  The circumstances by which this happen are unknown.\n\nThe general phenomenon of gloda's index having inaccuracies is not really new, but I think this may be the first bug to log the error console message.  This may want to be duped or have things duped to it.", "is_private": false, "raw_text": "This means the gloda index for the message is out-of-date for the message.  For this situation to happen:\n\n- Gloda must have previously indexed the message, setting a gloda-id property on the nsIMsgDBHdr as a result.\n\n- The message must have changed folders or had its messageKey change without gloda either hearing about it or managing to persist that to the database.  The circumstances by which this happen are unknown.\n\nThe general phenomenon of gloda's index having inaccuracies is not really new, but I think this may be the first bug to log the error console message.  This may want to be duped or have things duped to it.", "bug_id": 641446, "creation_time": "2011-03-14T11:45:13Z", "tags": [], "time": "2011-03-14T11:45:13Z", "id": 5342874}, {"creator": "ludovic@hirlimann.net", "attachment_id": null, "text": "(In reply to comment #1)\n \n> The general phenomenon of gloda's index having inaccuracies is not really new,\n> but I think this may be the first bug to log the error console message.  This\n> may want to be duped or have things duped to it.\n\nAs the bug opener is a very good duper, could you extend what general feeling we should be looking for in bugs to dup to this one ?", "count": 2, "author": "ludovic@hirlimann.net", "tags": [], "raw_text": "(In reply to comment #1)\n \n> The general phenomenon of gloda's index having inaccuracies is not really new,\n> but I think this may be the first bug to log the error console message.  This\n> may want to be duped or have things duped to it.\n\nAs the bug opener is a very good duper, could you extend what general feeling we should be looking for in bugs to dup to this one ?", "bug_id": 641446, "creation_time": "2011-03-14T12:31:01Z", "is_private": false, "id": 5342931, "time": "2011-03-14T12:31:01Z"}, {"tags": [], "creator": "jonathan.protzenko@gmail.com", "creation_time": "2011-03-14T12:53:55Z", "bug_id": 641446, "raw_text": "Is it a message you sent? I've seen messages being NOT indexed for minutes, in spite of them having just arrived and sitting in an opened folder. I think this might be related to :bienvenu's latest patch that adds fake message headers. After the fake message header was replaced with the new, freshly downloaded \"real\" header, the real header was not found in my Gloda queries...", "attachment_id": null, "is_private": false, "text": "Is it a message you sent? I've seen messages being NOT indexed for minutes, in spite of them having just arrived and sitting in an opened folder. I think this might be related to :bienvenu's latest patch that adds fake message headers. After the fake message header was replaced with the new, freshly downloaded \"real\" header, the real header was not found in my Gloda queries...", "count": 3, "id": 5342959, "time": "2011-03-14T12:53:55Z", "author": "jonathan.protzenko@gmail.com"}, {"id": 5343246, "time": "2011-03-14T15:42:20Z", "author": "euryalus.0@gmail.com", "text": "(In reply to comment #3)\n> Is it a message you sent? \n\nNo! It is a message in my Inbox", "count": 4, "attachment_id": null, "is_private": false, "tags": [], "creator": "euryalus.0@gmail.com", "creation_time": "2011-03-14T15:42:20Z", "bug_id": 641446, "raw_text": "(In reply to comment #3)\n> Is it a message you sent? \n\nNo! It is a message in my Inbox"}, {"time": "2011-03-15T02:05:45Z", "id": 5344964, "is_private": false, "creation_time": "2011-03-15T02:05:45Z", "bug_id": 641446, "raw_text": "This type of gloda database inaccuracy might also manifest itself as ye 'ole \"global search tells me about a message, but when I click on it to see it, gloda can't find it.\"\n\nprotz, this should only happen if there is a \"gloda-id\" attribute on the nsIMsgDBHdr, which should not be the case if gloda has never been told about the message.  Of course, in the event that gloda does index the fake header, and the actual resulting header ends up with a different message key, but gloda's msgKeyChanged event does not handle it correctly, that could result in this problem.  But that is on the less likely end of the spectrum because we have an xpcshell test for that and the complexity level is such that I would expect that to consistently never work if it had a bug.", "tags": [], "author": "bugmail@asutherland.org", "text": "This type of gloda database inaccuracy might also manifest itself as ye 'ole \"global search tells me about a message, but when I click on it to see it, gloda can't find it.\"\n\nprotz, this should only happen if there is a \"gloda-id\" attribute on the nsIMsgDBHdr, which should not be the case if gloda has never been told about the message.  Of course, in the event that gloda does index the fake header, and the actual resulting header ends up with a different message key, but gloda's msgKeyChanged event does not handle it correctly, that could result in this problem.  But that is on the less likely end of the spectrum because we have an xpcshell test for that and the complexity level is such that I would expect that to consistently never work if it had a bug.", "count": 5, "attachment_id": null, "creator": "bugmail@asutherland.org"}]}}, "comments": {}}