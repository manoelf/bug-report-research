{"bugs": {"709644": {"comments": [{"tags": [], "time": "2011-12-12T03:15:17Z", "attachment_id": null, "raw_text": "It should be possible to ensure SMIL animations do not tick as much when they are in a background tab page, for example it could only tick for times where the animation would be ending, causing other animations to start/end due to syncbase times, firing repeat events, etc.  Script might be inspecting animated values in the DOM, so we'd need to ensure we could tick the animation if it is out of date when script does this.\n\nBrian says we already keep a track of \"significant milestones\" in an animation, which might help.", "id": 5907786, "bug_id": 709644, "is_private": false, "creation_time": "2011-12-12T03:15:17Z", "creator": "cam@mcc.id.au", "author": "cam@mcc.id.au", "count": 0, "text": "It should be possible to ensure SMIL animations do not tick as much when they are in a background tab page, for example it could only tick for times where the animation would be ending, causing other animations to start/end due to syncbase times, firing repeat events, etc.  Script might be inspecting animated values in the DOM, so we'd need to ensure we could tick the animation if it is out of date when script does this.\n\nBrian says we already keep a track of \"significant milestones\" in an animation, which might help."}, {"time": "2011-12-12T04:19:56Z", "raw_text": "Is there a tick here separate from the refresh driver?", "text": "Is there a tick here separate from the refresh driver?", "count": 1, "author": "bzbarsky@mit.edu", "bug_id": 709644, "id": 5907852, "attachment_id": null, "tags": [], "creator": "bzbarsky@mit.edu", "is_private": false, "creation_time": "2011-12-12T04:19:56Z"}, {"tags": [], "time": "2011-12-12T05:02:34Z", "attachment_id": null, "raw_text": "(In reply to Boris Zbarsky (:bz) from comment #1)\n> Is there a tick here separate from the refresh driver?\n\nNo. Animation samples are based off the refresh driver so we should benefit at least from throttling of the refresh driver. But this bug is about being more aggressive still. Perhaps we could skip samples altogether if:\n\na) we are in a background tab, and\nb) we haven't reached the next milestone yet, and\nc) we haven't add any explicit requests for a refresh (from SVG)", "bug_id": 709644, "id": 5907871, "is_private": false, "creation_time": "2011-12-12T05:02:34Z", "creator": "brian@birchill.co.jp", "author": "brian@birchill.co.jp", "count": 2, "text": "(In reply to Boris Zbarsky (:bz) from comment #1)\n> Is there a tick here separate from the refresh driver?\n\nNo. Animation samples are based off the refresh driver so we should benefit at least from throttling of the refresh driver. But this bug is about being more aggressive still. Perhaps we could skip samples altogether if:\n\na) we are in a background tab, and\nb) we haven't reached the next milestone yet, and\nc) we haven't add any explicit requests for a refresh (from SVG)"}, {"tags": [], "attachment_id": null, "is_private": false, "creation_time": "2011-12-12T05:14:29Z", "creator": "bzbarsky@mit.edu", "raw_text": "I'm considering turning off the refresh driver altogether in background tabs, actually...  I just need to convince roc.  ;)\n\nBut even as it is, we do exponential backoff right now.  So once a page goes in a background tab we set the refresh driver to 1s, and after N seconds have elapsed it won't tick more often than about every N seconds.  Which means that in practice you don't get much ticking going on in background tabs.", "time": "2011-12-12T05:14:29Z", "bug_id": 709644, "id": 5907881, "count": 3, "text": "I'm considering turning off the refresh driver altogether in background tabs, actually...  I just need to convince roc.  ;)\n\nBut even as it is, we do exponential backoff right now.  So once a page goes in a background tab we set the refresh driver to 1s, and after N seconds have elapsed it won't tick more often than about every N seconds.  Which means that in practice you don't get much ticking going on in background tabs.", "author": "bzbarsky@mit.edu"}]}}, "comments": {}}