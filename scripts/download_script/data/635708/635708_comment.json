{"bugs": {"635708": {"comments": [{"creator": "ondras@zarovi.cz", "author": "ondras@zarovi.cz", "time": "2011-02-21T14:40:16Z", "bug_id": 635708, "count": 0, "attachment_id": null, "id": 5294077, "text": "User-Agent:       Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.13) Gecko/20101206 Ubuntu/10.10 (maverick) Firefox/3.6.13\nBuild Identifier: \n\nThe \"@mozilla.org/wifi/monitor;1\" component does not work properly. No access points are reported (empty array), although the machine can clearly see them. \n\nThis might be specific to OS version, will try to confirm later.\n\nReproducible: Always\n\nSteps to Reproduce:\ncall the \"startWatching\" method on instance of nsIWifimonitor\n\n\nActual Results:  \nthe onChange handler is called once, with an empty array as an argument\n\n\n\nThis corresponds to code executed within extension chrome. The behavior is the same when trying the code at https://developer.mozilla.org/En/Monitoring_WiFi_access_points (the sample site has the UniversalXPConnect permission).\n\nnavigator.geolocation works (returns relatively good approximation). My OS (64bit Kubuntu Maverick) sees many APs (checked with NetworkManager and \"iwlist wlan0 scan\").", "creation_time": "2011-02-21T14:40:16Z", "is_private": false, "tags": [], "raw_text": "User-Agent:       Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.13) Gecko/20101206 Ubuntu/10.10 (maverick) Firefox/3.6.13\nBuild Identifier: \n\nThe \"@mozilla.org/wifi/monitor;1\" component does not work properly. No access points are reported (empty array), although the machine can clearly see them. \n\nThis might be specific to OS version, will try to confirm later.\n\nReproducible: Always\n\nSteps to Reproduce:\ncall the \"startWatching\" method on instance of nsIWifimonitor\n\n\nActual Results:  \nthe onChange handler is called once, with an empty array as an argument\n\n\n\nThis corresponds to code executed within extension chrome. The behavior is the same when trying the code at https://developer.mozilla.org/En/Monitoring_WiFi_access_points (the sample site has the UniversalXPConnect permission).\n\nnavigator.geolocation works (returns relatively good approximation). My OS (64bit Kubuntu Maverick) sees many APs (checked with NetworkManager and \"iwlist wlan0 scan\")."}, {"creation_time": "2011-02-21T14:41:12Z", "text": "Forgot to mention that this behavior happens on FF4b11.", "creator": "ondras@zarovi.cz", "id": 5294079, "attachment_id": null, "author": "ondras@zarovi.cz", "bug_id": 635708, "raw_text": "Forgot to mention that this behavior happens on FF4b11.", "count": 1, "time": "2011-02-21T14:41:12Z", "tags": [], "is_private": false}, {"creation_time": "2011-02-24T22:47:26Z", "author": "u279076@disabled.tld", "attachment_id": 514928, "id": 5302813, "text": "Created attachment 514928\nTest case", "creator": "u279076@disabled.tld", "count": 2, "raw_text": "", "bug_id": 635708, "is_private": false, "tags": [], "time": "2011-02-24T22:47:26Z"}, {"is_private": false, "tags": [], "raw_text": "I've attached the testcase you were referring to.  Can you please confirm what results you get with:\n\n* Firefox 3.6.13\n* Firefox 4.0b10\n* Firefox 4.0b11\n* Firefox 4.0b12pre\n\nThanks", "id": 5302821, "attachment_id": null, "text": "I've attached the testcase you were referring to.  Can you please confirm what results you get with:\n\n* Firefox 3.6.13\n* Firefox 4.0b10\n* Firefox 4.0b11\n* Firefox 4.0b12pre\n\nThanks", "creation_time": "2011-02-24T22:51:01Z", "time": "2011-02-24T22:51:01Z", "count": 3, "bug_id": 635708, "author": "u279076@disabled.tld", "creator": "u279076@disabled.tld"}, {"author": "ondras@zarovi.cz", "attachment_id": null, "id": 5304653, "text": "Results with 3.6.13:\n\n- Ubuntu Maverick 64bit: only one AP found (the one currently used; many APs visible by the OS), only one onChange callback execution during page lifetime. Reloading page shows varying signal levels.\n\n- Windows 7 64bit: many APs found, only one onChange callback execution during page lifetime. Reloading page shows the SAME (!!) signal levels, all the time. Signal levels change only when the wireless device is turned off and on again.\n\nResults with 4.0b11:\n\n- Kubuntu Maverick 64bit: no APs found (OS sees many of them).\n\n\nWill continue testing.", "creator": "ondras@zarovi.cz", "creation_time": "2011-02-25T19:28:00Z", "is_private": false, "tags": [], "time": "2011-02-25T19:28:00Z", "count": 4, "raw_text": "Results with 3.6.13:\n\n- Ubuntu Maverick 64bit: only one AP found (the one currently used; many APs visible by the OS), only one onChange callback execution during page lifetime. Reloading page shows varying signal levels.\n\n- Windows 7 64bit: many APs found, only one onChange callback execution during page lifetime. Reloading page shows the SAME (!!) signal levels, all the time. Signal levels change only when the wireless device is turned off and on again.\n\nResults with 4.0b11:\n\n- Kubuntu Maverick 64bit: no APs found (OS sees many of them).\n\n\nWill continue testing.", "bug_id": 635708}, {"creator": "ondras@zarovi.cz", "text": "Results with 4.0b11:\n\n- Windows 7 64bit: the same as 3.6.13; many APs found, onChange executed only once, page reload does not change signl levels.", "id": 5306025, "attachment_id": null, "author": "ondras@zarovi.cz", "creation_time": "2011-02-26T09:35:39Z", "time": "2011-02-26T09:35:39Z", "tags": [], "is_private": false, "bug_id": 635708, "raw_text": "Results with 4.0b11:\n\n- Windows 7 64bit: the same as 3.6.13; many APs found, onChange executed only once, page reload does not change signl levels.", "count": 5}, {"creator": "u279076@disabled.tld", "author": "u279076@disabled.tld", "time": "2011-03-05T01:31:03Z", "bug_id": 635708, "count": 6, "text": "cc'ing Doug Turner as he's somewhat familiar with the Geolocation code.\n\nDoug, if you're not the right person to assist on this bug, please cc someone who might be able to help.  I'm guessing this is more of an API level bug.\n\nI defer to you, Doug.", "attachment_id": null, "id": 5323262, "creation_time": "2011-03-05T01:31:03Z", "tags": [], "is_private": false, "raw_text": "cc'ing Doug Turner as he's somewhat familiar with the Geolocation code.\n\nDoug, if you're not the right person to assist on this bug, please cc someone who might be able to help.  I'm guessing this is more of an API level bug.\n\nI defer to you, Doug."}, {"id": 10427153, "attachment_id": null, "text": "This is likely still true. The wifi network scanning code isn't the most robust or well tested.", "creation_time": "2015-06-26T23:37:22Z", "is_private": false, "tags": [], "raw_text": "This is likely still true. The wifi network scanning code isn't the most robust or well tested.", "author": "hschlichting@mozilla.com", "creator": "hschlichting@mozilla.com", "time": "2015-06-26T23:37:22Z", "count": 7, "bug_id": 635708}, {"id": 10436315, "attachment_id": null, "text": "ni myself to fire up a windows VM and try this case. I don't have wifi scanning working in my linux vm.", "creation_time": "2015-06-30T18:01:13Z", "is_private": false, "tags": [], "raw_text": "ni myself to fire up a windows VM and try this case. I don't have wifi scanning working in my linux vm.", "creator": "gkeeley@mozilla.com", "author": "gkeeley@mozilla.com", "time": "2015-06-30T18:01:13Z", "bug_id": 635708, "count": 8}, {"creator": "gkeeley@mozilla.com", "author": "gkeeley@mozilla.com", "time": "2015-08-31T18:26:27Z", "bug_id": 635708, "count": 9, "text": "No longer have a license for Windows VM to check this, gah.\nTelemetry for geolocation on Windows isn't showing any problems in terms of Wifi scanning, although the report on Windows is that the APs are not changing when they should, so I suppose that won't show on telemetry.", "attachment_id": null, "id": 10678556, "creation_time": "2015-08-31T18:26:27Z", "tags": [], "is_private": false, "raw_text": "No longer have a license for Windows VM to check this, gah.\nTelemetry for geolocation on Windows isn't showing any problems in terms of Wifi scanning, although the report on Windows is that the APs are not changing when they should, so I suppose that won't show on telemetry."}, {"creation_time": "2016-06-27T19:31:16Z", "author": "doug.turner@gmail.com", "text": "Marking as WFM.  ondra zara, if you can still reproduce, happy to debug with you.", "creator": "doug.turner@gmail.com", "attachment_id": null, "id": 11505556, "count": 10, "bug_id": 635708, "raw_text": "Marking as WFM.  ondra zara, if you can still reproduce, happy to debug with you.", "tags": [], "is_private": false, "time": "2016-06-27T19:31:16Z"}, {"time": "2016-10-24T11:55:01Z", "tags": [], "is_private": false, "bug_id": 635708, "raw_text": "This is still broken, Ubuntu, Firefox 49. The only thing that happens after `startWatching` is the `onError` callback being executed with \"2147500037\" as its argument (NS_ERROR_FAILURE).", "count": 11, "text": "This is still broken, Ubuntu, Firefox 49. The only thing that happens after `startWatching` is the `onError` callback being executed with \"2147500037\" as its argument (NS_ERROR_FAILURE).", "creator": "ondras@zarovi.cz", "attachment_id": null, "id": 11808132, "author": "ondras@zarovi.cz", "creation_time": "2016-10-24T11:55:01Z"}]}}, "comments": {}}