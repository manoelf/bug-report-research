{"comments": {}, "bugs": {"702658": {"comments": [{"bug_id": 702658, "id": 5849691, "is_private": false, "creation_time": "2011-11-15T17:32:00Z", "creator": "zackw@panix.com", "text": "Created attachment 574607\ntest case (XUL)\n\nThe attached test case (you will have to insert it into the mochitest-chrome harness to get it to run, unfortunately; see bug 702648) throws a JS exception from the ctx.drawWindow call, with an alarming warning message printed before that in a debug build:\n\nWARNING: NS_ENSURE_TRUE(presShell) failed: file /home/zack/src/mozilla/S-mc/content/canvas/src/nsCanvasRenderingContext2D.cpp, line 3704\n\nJavaScript error: , line 0: uncaught exception: [Exception... \"Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsIDOMCanvasRenderingContext2D.drawWindow]\"  nsresult: \"0x80004005 (NS_ERROR_FAILURE)\"  location: \"JS frame :: chrome://mochitests/content/chrome/layout/base/test/chrome/test_printpreview_canvas_bad_prescontext.xul :: <TOP_LEVEL> :: line 35\"  data: no]\n\nCorrect me if I'm wrong, but I was under the impression that it was no longer possible for a pres context to have a null pres shell (hm, bug 229080 and bug 154119 pop up in the \"possible duplicates\" list...)\n\nThe problem vanishes if you replace preview.globalPrintSettings with a print settings object obtained from the print settings service and whose .showPrintProgress attribute is set to false.  Setting preview.globalPrintSettings.showPrintProgress = false before the call to preview.printPreview does *not* make the problem go away, which is probably another instance of \"print settings don't work reliably\".", "count": 0, "author": "zackw@panix.com", "tags": [], "time": "2011-11-15T17:32:00Z", "raw_text": "The attached test case (you will have to insert it into the mochitest-chrome harness to get it to run, unfortunately; see bug 702648) throws a JS exception from the ctx.drawWindow call, with an alarming warning message printed before that in a debug build:\n\nWARNING: NS_ENSURE_TRUE(presShell) failed: file /home/zack/src/mozilla/S-mc/content/canvas/src/nsCanvasRenderingContext2D.cpp, line 3704\n\nJavaScript error: , line 0: uncaught exception: [Exception... \"Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsIDOMCanvasRenderingContext2D.drawWindow]\"  nsresult: \"0x80004005 (NS_ERROR_FAILURE)\"  location: \"JS frame :: chrome://mochitests/content/chrome/layout/base/test/chrome/test_printpreview_canvas_bad_prescontext.xul :: <TOP_LEVEL> :: line 35\"  data: no]\n\nCorrect me if I'm wrong, but I was under the impression that it was no longer possible for a pres context to have a null pres shell (hm, bug 229080 and bug 154119 pop up in the \"possible duplicates\" list...)\n\nThe problem vanishes if you replace preview.globalPrintSettings with a print settings object obtained from the print settings service and whose .showPrintProgress attribute is set to false.  Setting preview.globalPrintSettings.showPrintProgress = false before the call to preview.printPreview does *not* make the problem go away, which is probably another instance of \"print settings don't work reliably\".", "attachment_id": 574607}, {"bug_id": 702658, "id": 5849692, "author": "zackw@panix.com", "text": "Nng. Bug 154199.", "count": 1, "raw_text": "Nng. Bug 154199.", "time": "2011-11-15T17:32:43Z", "creation_time": "2011-11-15T17:32:43Z", "is_private": false, "creator": "zackw@panix.com", "tags": [], "attachment_id": null}]}}}