{"comments": {}, "bugs": {"1631258": {"comments": [{"text": "I'd like to reorganize and rename the headers a little bit for Stencil.\n\n- `StencilEnums.h`\n  - Rename the current `TryNoteKinds.h`\n  - This would contain just the enum values and their documentation.\n  - We split this out for use by parts deep inside the parsers that use their own data structures but want to have the same meanings.\n- `StencilShared.h`\n  - Rename the current `SharedStencil.h`\n  - This is data structures shared between the VM and Stencil. We should reduce the number of dependencies needed where possible. These structures are candidates for direct memory sharing between the VM and Stencil.\n- `Stencil.h`\n  - These are the structures for completing the Stencil representation, but that cannot be directly used by the VM. This includes things like `ScriptStencil` that is analagous to the `BaseScript` of the VM but not directly compatible.\n\nIn the future we can consider moving the first files to rust and using bindings generation.", "author": "tcampbell@mozilla.com", "id": 14763665, "attachment_id": null, "bug_id": 1631258, "is_private": false, "count": 0, "creation_time": "2020-04-19T14:30:05Z", "raw_text": "I'd like to reorganize and rename the headers a little bit for Stencil.\n\n- `StencilEnums.h`\n  - Rename the current `TryNoteKinds.h`\n  - This would contain just the enum values and their documentation.\n  - We split this out for use by parts deep inside the parsers that use their own data structures but want to have the same meanings.\n- `StencilShared.h`\n  - Rename the current `SharedStencil.h`\n  - This is data structures shared between the VM and Stencil. We should reduce the number of dependencies needed where possible. These structures are candidates for direct memory sharing between the VM and Stencil.\n- `Stencil.h`\n  - These are the structures for completing the Stencil representation, but that cannot be directly used by the VM. This includes things like `ScriptStencil` that is analagous to the `BaseScript` of the VM but not directly compatible.\n\nIn the future we can consider moving the first files to rust and using bindings generation.", "time": "2020-04-19T14:30:05Z", "creator": "tcampbell@mozilla.com", "tags": []}, {"id": 14763670, "author": "arai.unmht@gmail.com", "attachment_id": null, "raw_text": "bug 1629741 is going to move some more function-related enums into their own header.", "text": "bug 1629741 is going to move some more function-related enums into their own header.", "count": 1, "creation_time": "2020-04-19T14:33:31Z", "is_private": false, "bug_id": 1631258, "tags": [], "creator": "arai.unmht@gmail.com", "time": "2020-04-19T14:33:31Z"}, {"time": "2020-04-19T14:59:26Z", "creator": "tcampbell@mozilla.com", "tags": [], "count": 2, "creation_time": "2020-04-19T14:59:26Z", "raw_text": "(In reply to Tooru Fujisawa [:arai] from comment #1)\n> bug 1629741 is going to move some more function-related enums into their own header.\n\nThat makes sense. I don't think there is any conflict with what I'm trying to do here and I don't touch any JSFunction-related types.", "bug_id": 1631258, "is_private": false, "text": "(In reply to Tooru Fujisawa [:arai] from comment #1)\n> bug 1629741 is going to move some more function-related enums into their own header.\n\nThat makes sense. I don't think there is any conflict with what I'm trying to do here and I don't touch any JSFunction-related types.", "author": "tcampbell@mozilla.com", "id": 14763685, "attachment_id": null}, {"author": "tcampbell@mozilla.com", "id": 14763693, "raw_text": "\nSubsequent patches will move more of the enums from SharedStencil.h to this\nfile.", "attachment_id": 9141534, "count": 3, "text": "Created attachment 9141534\nBug 1631258 - Rename TryNoteKind.h to StencilEnums.h. r?arai\n\n\nSubsequent patches will move more of the enums from SharedStencil.h to this\nfile.", "creation_time": "2020-04-19T15:13:31Z", "is_private": false, "bug_id": 1631258, "tags": [], "time": "2020-04-19T15:13:31Z", "creator": "tcampbell@mozilla.com"}, {"author": "tcampbell@mozilla.com", "id": 14763694, "attachment_id": 9141535, "text": "Created attachment 9141535\nBug 1631258 - Move Immutable/MutableScriptDataEnum to StencilEnums.h. r?arai\n\n\nMove the flag definitions to the enums header, but leave the wrapper types in\nSharedStencil.h since they are less universal.\n\nDepends on D71466", "is_private": false, "bug_id": 1631258, "raw_text": "\nMove the flag definitions to the enums header, but leave the wrapper types in\nSharedStencil.h since they are less universal.\n\nDepends on D71466", "count": 4, "creation_time": "2020-04-19T15:13:34Z", "tags": [], "creator": "tcampbell@mozilla.com", "time": "2020-04-19T15:13:34Z"}, {"is_private": false, "bug_id": 1631258, "text": "Created attachment 9141539\nBug 1631258 - Reduce ImmutableScriptData dependencies in SharedStencil.h. r?arai\n\n\nCleanup the visibility of members and methods to better reflect what is and\nisn't internal details. Move the XDR signature to exist only within the\nJSScript.cpp file.\n\nDepends on D71467", "attachment_id": 9141539, "author": "tcampbell@mozilla.com", "id": 14763730, "creator": "tcampbell@mozilla.com", "time": "2020-04-19T15:55:48Z", "tags": [], "creation_time": "2020-04-19T15:55:48Z", "count": 5, "raw_text": "\nCleanup the visibility of members and methods to better reflect what is and\nisn't internal details. Move the XDR signature to exist only within the\nJSScript.cpp file.\n\nDepends on D71467"}, {"author": "tcampbell@mozilla.com", "id": 14763731, "attachment_id": 9141540, "text": "Created attachment 9141540\nBug 1631258 - Cleanup SharedStencil.h header. r?arai\n\n\nFix the set of includes to be more precise, and remove references to\nBaseScript type.\n\nDepends on D71469", "bug_id": 1631258, "is_private": false, "raw_text": "\nFix the set of includes to be more precise, and remove references to\nBaseScript type.\n\nDepends on D71469", "count": 6, "creation_time": "2020-04-19T15:55:52Z", "tags": [], "creator": "tcampbell@mozilla.com", "time": "2020-04-19T15:55:52Z"}, {"bug_id": 1631258, "is_private": false, "attachment_id": 9141541, "id": 14763732, "author": "tcampbell@mozilla.com", "text": "Created attachment 9141541\nBug 1631258 - Cleanup includes and type decls for Stencil.h/BCEScriptStencil.h r?arai\n\n\n\nDepends on D71470", "tags": [], "time": "2020-04-19T15:56:00Z", "creator": "tcampbell@mozilla.com", "raw_text": "\n\nDepends on D71470", "creation_time": "2020-04-19T15:56:00Z", "count": 7}, {"is_private": false, "bug_id": 1631258, "id": 14764060, "author": "pulsebot@bots.tld", "attachment_id": null, "text": "Pushed by tcampbell@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/852e5e5b52c8\nRename TryNoteKind.h to StencilEnums.h. r=arai\nhttps://hg.mozilla.org/integration/autoland/rev/63079381fda8\nMove Immutable/MutableScriptDataEnum to StencilEnums.h. r=arai\nhttps://hg.mozilla.org/integration/autoland/rev/9563bae1436b\nReduce ImmutableScriptData dependencies in SharedStencil.h. r=arai\nhttps://hg.mozilla.org/integration/autoland/rev/d2d13a121352\nCleanup SharedStencil.h header. r=arai\nhttps://hg.mozilla.org/integration/autoland/rev/304fa5bdb8b6\nCleanup includes and type decls for Stencil.h/BCEScriptStencil.h r=arai", "tags": [], "creator": "pulsebot@bots.tld", "time": "2020-04-20T03:26:56Z", "raw_text": "Pushed by tcampbell@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/852e5e5b52c8\nRename TryNoteKind.h to StencilEnums.h. r=arai\nhttps://hg.mozilla.org/integration/autoland/rev/63079381fda8\nMove Immutable/MutableScriptDataEnum to StencilEnums.h. r=arai\nhttps://hg.mozilla.org/integration/autoland/rev/9563bae1436b\nReduce ImmutableScriptData dependencies in SharedStencil.h. r=arai\nhttps://hg.mozilla.org/integration/autoland/rev/d2d13a121352\nCleanup SharedStencil.h header. r=arai\nhttps://hg.mozilla.org/integration/autoland/rev/304fa5bdb8b6\nCleanup includes and type decls for Stencil.h/BCEScriptStencil.h r=arai", "count": 8, "creation_time": "2020-04-20T03:26:56Z"}, {"count": 9, "text": "https://hg.mozilla.org/mozilla-central/rev/852e5e5b52c8\nhttps://hg.mozilla.org/mozilla-central/rev/63079381fda8\nhttps://hg.mozilla.org/mozilla-central/rev/9563bae1436b\nhttps://hg.mozilla.org/mozilla-central/rev/d2d13a121352\nhttps://hg.mozilla.org/mozilla-central/rev/304fa5bdb8b6", "creation_time": "2020-04-20T10:00:30Z", "id": 14766053, "author": "apavel@mozilla.com", "raw_text": "https://hg.mozilla.org/mozilla-central/rev/852e5e5b52c8\nhttps://hg.mozilla.org/mozilla-central/rev/63079381fda8\nhttps://hg.mozilla.org/mozilla-central/rev/9563bae1436b\nhttps://hg.mozilla.org/mozilla-central/rev/d2d13a121352\nhttps://hg.mozilla.org/mozilla-central/rev/304fa5bdb8b6", "attachment_id": null, "time": "2020-04-20T10:00:30Z", "creator": "apavel@mozilla.com", "bug_id": 1631258, "is_private": false, "tags": ["bugherder"]}]}}}