{"comments": {}, "bugs": {"687386": {"comments": [{"raw_text": "When downloading a file on OS X, you sometimes get MIME type information like \"StuffIt Expander\" or \"wyciwyg resource\" (e.g. bug 521918).\n\n__________________________\n\nbz wrote:\n\nIn the \"Clean up file type mappings\" section of http://limi.net/articles/improving-download-behaviors-web-browsers you mention a few things that are not actually precisely Firefox's fault:\n\n1)  The \"Stuffit Expander\" thing.  That string comes from the OS, not\n   from us.\n2)  The MP3 thing... again that information about QuickTime comes from\n   the OS.\n\nThe issue is that OSX has two different sources of MIME information, as far as I can tell, and that the interaction of the two is entirely undocumented.  Sometimes the OS uses one, sometimes the other, sometimes both.  We try to make sense of it as much as we can, but I can readily believe there are cases where we pick the wrong source....\n\nIf you have any apple contacts who happen to know how this stuff actually works, I'm all ears.\n__________________________\n\nHere's the reply from an Apple engineer:\n\nHere are the selection criteria for LaunchServices, from http://developer.apple.com/mac/library/DOCUMENTATION/Carbon/Conceptual/LaunchServicesConcepts/LSCConcepts/LSCConcepts.html#//apple_ref/doc/uid/TP30000999-CH202-BABBJJEF:\n\n> Preferred Application for a Document\n> For individual document files (whether specified by a file-system reference or a URL with scheme file), the criteria are as follows:\n>\n> 1. If the user has specified an explicit binding for the document (or for the entire document type to which it belongs), the preferred application is the one the user has specified.\n> 2. If the document has a filename extension (or if one has been specified as a parameter to LSGetApplicationForInfo), find all applications in the Launch Services database that claim to accept documents with that extension.\n> 3. If the document carries a four-character file type (or if one has been specified as a parameter), find all applications that claim to accept files of that type.\n> 4. If more than one application has been found as a result of steps 2\u20133, apply the following criteria in the order shown:\n> a. If the document carries a four-character creator signature (or if one has been specified as a parameter), give preference to any application that claims to accept documents with that signature (typically the application to which the signature belongs).\n> b. Give preference to native OS X applications over those that run in the Classic emulation environment.\n> c. Give preference to applications residing on the boot volume over those residing on other file-system volumes.\n> d. Give preference to applications residing on a local volume over those residing on a remote volume.\n> e. If two or more versions of the same application have been found, give preference to the one with the latest version number.\n\n\nI'm betting the reason StuffIt Expander shows up as the owner for a ZIP file is because that's preloaded into Mac OS X's MIME type database as the preferred handler for a ZIP file. But in reality, when you open one, it gets handled by Archive Utility. The LSGetApplicationForItem() and LSGetApplicationForURL() methods should return this information for you.\n\n(It's worth noting that LaunchServices no longer considers the four-character creator code on Snow Leopard and later.)", "attachment_id": null, "id": 5722368, "count": 0, "creator": "limi@mozilla.com", "is_private": false, "time": "2011-09-18T23:57:54Z", "tags": [], "bug_id": 687386, "text": "When downloading a file on OS X, you sometimes get MIME type information like \"StuffIt Expander\" or \"wyciwyg resource\" (e.g. bug 521918).\n\n__________________________\n\nbz wrote:\n\nIn the \"Clean up file type mappings\" section of http://limi.net/articles/improving-download-behaviors-web-browsers you mention a few things that are not actually precisely Firefox's fault:\n\n1)  The \"Stuffit Expander\" thing.  That string comes from the OS, not\n   from us.\n2)  The MP3 thing... again that information about QuickTime comes from\n   the OS.\n\nThe issue is that OSX has two different sources of MIME information, as far as I can tell, and that the interaction of the two is entirely undocumented.  Sometimes the OS uses one, sometimes the other, sometimes both.  We try to make sense of it as much as we can, but I can readily believe there are cases where we pick the wrong source....\n\nIf you have any apple contacts who happen to know how this stuff actually works, I'm all ears.\n__________________________\n\nHere's the reply from an Apple engineer:\n\nHere are the selection criteria for LaunchServices, from http://developer.apple.com/mac/library/DOCUMENTATION/Carbon/Conceptual/LaunchServicesConcepts/LSCConcepts/LSCConcepts.html#//apple_ref/doc/uid/TP30000999-CH202-BABBJJEF:\n\n> Preferred Application for a Document\n> For individual document files (whether specified by a file-system reference or a URL with scheme file), the criteria are as follows:\n>\n> 1. If the user has specified an explicit binding for the document (or for the entire document type to which it belongs), the preferred application is the one the user has specified.\n> 2. If the document has a filename extension (or if one has been specified as a parameter to LSGetApplicationForInfo), find all applications in the Launch Services database that claim to accept documents with that extension.\n> 3. If the document carries a four-character file type (or if one has been specified as a parameter), find all applications that claim to accept files of that type.\n> 4. If more than one application has been found as a result of steps 2\u20133, apply the following criteria in the order shown:\n> a. If the document carries a four-character creator signature (or if one has been specified as a parameter), give preference to any application that claims to accept documents with that signature (typically the application to which the signature belongs).\n> b. Give preference to native OS X applications over those that run in the Classic emulation environment.\n> c. Give preference to applications residing on the boot volume over those residing on other file-system volumes.\n> d. Give preference to applications residing on a local volume over those residing on a remote volume.\n> e. If two or more versions of the same application have been found, give preference to the one with the latest version number.\n\n\nI'm betting the reason StuffIt Expander shows up as the owner for a ZIP file is because that's preloaded into Mac OS X's MIME type database as the preferred handler for a ZIP file. But in reality, when you open one, it gets handled by Archive Utility. The LSGetApplicationForItem() and LSGetApplicationForURL() methods should return this information for you.\n\n(It's worth noting that LaunchServices no longer considers the four-character creator code on Snow Leopard and later.)", "author": "limi@mozilla.com", "creation_time": "2011-09-18T23:57:54Z"}, {"count": 1, "bug_id": 687386, "creator": "bzbarsky@mit.edu", "is_private": false, "author": "bzbarsky@mit.edu", "creation_time": "2011-09-19T03:40:38Z", "time": "2011-09-19T03:40:38Z", "tags": [], "text": "Ccing some mac folks...", "attachment_id": null, "raw_text": "Ccing some mac folks...", "id": 5722461}, {"id": 6251528, "raw_text": "I'm seeing this in Windows 7 with Firefox 12.0.  I have an email that has links to two PDFs.  They open right up in Chrome, but I get the \"wyciwyg resource\" listed as the type when I download to Firefox.\n\nSo this is not isolated to Mac OS X, for what it's worth.", "attachment_id": null, "tags": [], "bug_id": 687386, "time": "2012-04-25T01:11:39Z", "text": "I'm seeing this in Windows 7 with Firefox 12.0.  I have an email that has links to two PDFs.  They open right up in Chrome, but I get the \"wyciwyg resource\" listed as the type when I download to Firefox.\n\nSo this is not isolated to Mac OS X, for what it's worth.", "author": "bugzilla@sundog2000.endjunk.com", "creation_time": "2012-04-25T01:11:39Z", "count": 2, "creator": "bugzilla@sundog2000.endjunk.com", "is_private": false}]}}}