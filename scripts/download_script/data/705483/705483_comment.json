{"bugs": {"705483": {"comments": [{"tags": [], "raw_text": "User Agent: Mozilla/5.0 (Windows NT 5.2; WOW64; rv:9.0) Gecko/20100101 Firefox/9.0\nBuild ID: 20111116091359\n\nSteps to reproduce:\n\nEnvironment is a local server used for web development and a Windows XP x64 box with local hosts file referring to that server. 2500 test host names in the form test.domain.com are pointed to a local server.\n\n\nActual results:\n\nDNS requests for test server host names are not reliably found from hosts file and are sent to DNS servers instead where they do not exist. This results in significant delays.\n\nAccess to the hosts files is visible in procmon, so the file lookup is occuring.\nOccurs with network.dns.disablePrefetch true or false\n\n\n\n\n\n\n\n\nExpected results:\n\nDNS lookup results from hosts file should be resolved properly. \nIE and Chrome resolve from local hosts file 100%, so the Windows lookup process appears to be functioning properly. Problem occurs in Firefox sporadically and the position of the test host name in the file does not affect the problem.", "attachment_id": null, "time": "2011-11-26T22:20:48Z", "creation_time": "2011-11-26T22:20:48Z", "is_private": false, "bug_id": 705483, "id": 5873895, "text": "User Agent: Mozilla/5.0 (Windows NT 5.2; WOW64; rv:9.0) Gecko/20100101 Firefox/9.0\nBuild ID: 20111116091359\n\nSteps to reproduce:\n\nEnvironment is a local server used for web development and a Windows XP x64 box with local hosts file referring to that server. 2500 test host names in the form test.domain.com are pointed to a local server.\n\n\nActual results:\n\nDNS requests for test server host names are not reliably found from hosts file and are sent to DNS servers instead where they do not exist. This results in significant delays.\n\nAccess to the hosts files is visible in procmon, so the file lookup is occuring.\nOccurs with network.dns.disablePrefetch true or false\n\n\n\n\n\n\n\n\nExpected results:\n\nDNS lookup results from hosts file should be resolved properly. \nIE and Chrome resolve from local hosts file 100%, so the Windows lookup process appears to be functioning properly. Problem occurs in Firefox sporadically and the position of the test host name in the file does not affect the problem.", "count": 0, "author": "alanc@tech-world.com", "creator": "alanc@tech-world.com"}, {"creator": "bzbarsky@mit.edu", "author": "bzbarsky@mit.edu", "text": "What sort of DNS requests are you seeing?  Requests for A records or AAAA records?", "count": 1, "bug_id": 705483, "id": 5876264, "is_private": false, "creation_time": "2011-11-28T18:58:06Z", "time": "2011-11-28T18:58:06Z", "attachment_id": null, "raw_text": "What sort of DNS requests are you seeing?  Requests for A records or AAAA records?", "tags": []}, {"raw_text": "I see both cases.\nIf a IPV4 format entry is in the hosts file, it hangs looking up AAAA records for 30 seconds.\nIf a IPV6 format entry is in the hosts file, it hangs looking up A records for 30 seconds. \nIf both entries are in the file, it returns immediately.\n\nFirefox queries all the DNS servers before connecting to the host provided address. When the domain exists, but no DNS records have been configured for it in DNS, this is a lengthy process.\n\nAs mentioned earlier, IE and Chrome are not delayed and appear to be taking the first match. This is introducing significant slowdowns to Firefox in certain circumstances. Not just with the test environment, but for any site where the domain exists, but no DNS zone exists on the server.\n\nLooks like Firefox is requiring both IPV4 and IPV6 address resolution before displaying a page. (I haven't looked at the code) But, it should act on either address. If there's some overriding reason to retrieve both formats, could it be done in the background?\n\n\n\nMore info on the test box:\nThe Microsoft IPV6 stack is not installed on the test box.\nBut a 6to4 tunnel is installed by XP service pack 2, though not reflected in the network control panel.\n\nd:\\data>netsh interface ipv6 show interface\nQuerying active state...\n\nIdx  Met   MTU    State         Name\n---  ----  -----  ------------  -----\n  4     2   1280  Disconnected  Teredo Tunneling Pseudo-Interface\n  3     1   1280  Connected     6to4 Pseudo-Interface\n  2     1   1280  Connected     Automatic Tunneling Pseudo-Interface\n  1     0   1500  Connected     Loopback Pseudo-Interface\n\nd:\\data>netsh interface ipv6 show address level=verbose\nQuerying active state...\n\n\nInterface 4: Teredo Tunneling Pseudo-Interface\n\nUnicast Address   : fe80::ffff:ffff:fffd\nType              : Link\nDAD State         : Preferred\nValid lifetime    : infinite\nPreferred lifetime: infinite\nScope             : Link\nPrefix Origin     : Well-known\nSuffix Origin     : Link-Layer Address\n\nInterface 2: Automatic Tunneling Pseudo-Interface\n\nUnicast Address   : fe80::5efe:192.168.1.3\nType              : Link\nDAD State         : Preferred\nValid lifetime    : infinite\nPreferred lifetime: infinite\nScope             : Link\nPrefix Origin     : Well-known\nSuffix Origin     : Link-Layer Address\n\nInterface 1: Loopback Pseudo-Interface\n\nUnicast Address   : ::1\nType              : Loopback\nDAD State         : Preferred\nValid lifetime    : infinite\nPreferred lifetime: infinite\nScope             : Link\nPrefix Origin     : Well-known\nSuffix Origin     : Well-known\n\nUnicast Address   : fe80::1\nType              : Link\nDAD State         : Preferred\nValid lifetime    : infinite\nPreferred lifetime: infinite\nScope             : Link\nPrefix Origin     : Well-known\nSuffix Origin     : Link-Layer Address", "attachment_id": null, "time": "2011-12-06T06:58:14Z", "tags": [], "text": "I see both cases.\nIf a IPV4 format entry is in the hosts file, it hangs looking up AAAA records for 30 seconds.\nIf a IPV6 format entry is in the hosts file, it hangs looking up A records for 30 seconds. \nIf both entries are in the file, it returns immediately.\n\nFirefox queries all the DNS servers before connecting to the host provided address. When the domain exists, but no DNS records have been configured for it in DNS, this is a lengthy process.\n\nAs mentioned earlier, IE and Chrome are not delayed and appear to be taking the first match. This is introducing significant slowdowns to Firefox in certain circumstances. Not just with the test environment, but for any site where the domain exists, but no DNS zone exists on the server.\n\nLooks like Firefox is requiring both IPV4 and IPV6 address resolution before displaying a page. (I haven't looked at the code) But, it should act on either address. If there's some overriding reason to retrieve both formats, could it be done in the background?\n\n\n\nMore info on the test box:\nThe Microsoft IPV6 stack is not installed on the test box.\nBut a 6to4 tunnel is installed by XP service pack 2, though not reflected in the network control panel.\n\nd:\\data>netsh interface ipv6 show interface\nQuerying active state...\n\nIdx  Met   MTU    State         Name\n---  ----  -----  ------------  -----\n  4     2   1280  Disconnected  Teredo Tunneling Pseudo-Interface\n  3     1   1280  Connected     6to4 Pseudo-Interface\n  2     1   1280  Connected     Automatic Tunneling Pseudo-Interface\n  1     0   1500  Connected     Loopback Pseudo-Interface\n\nd:\\data>netsh interface ipv6 show address level=verbose\nQuerying active state...\n\n\nInterface 4: Teredo Tunneling Pseudo-Interface\n\nUnicast Address   : fe80::ffff:ffff:fffd\nType              : Link\nDAD State         : Preferred\nValid lifetime    : infinite\nPreferred lifetime: infinite\nScope             : Link\nPrefix Origin     : Well-known\nSuffix Origin     : Link-Layer Address\n\nInterface 2: Automatic Tunneling Pseudo-Interface\n\nUnicast Address   : fe80::5efe:192.168.1.3\nType              : Link\nDAD State         : Preferred\nValid lifetime    : infinite\nPreferred lifetime: infinite\nScope             : Link\nPrefix Origin     : Well-known\nSuffix Origin     : Link-Layer Address\n\nInterface 1: Loopback Pseudo-Interface\n\nUnicast Address   : ::1\nType              : Loopback\nDAD State         : Preferred\nValid lifetime    : infinite\nPreferred lifetime: infinite\nScope             : Link\nPrefix Origin     : Well-known\nSuffix Origin     : Well-known\n\nUnicast Address   : fe80::1\nType              : Link\nDAD State         : Preferred\nValid lifetime    : infinite\nPreferred lifetime: infinite\nScope             : Link\nPrefix Origin     : Well-known\nSuffix Origin     : Link-Layer Address", "count": 2, "author": "alanc@tech-world.com", "creator": "alanc@tech-world.com", "creation_time": "2011-12-06T06:58:14Z", "is_private": false, "id": 5894203, "bug_id": 705483}, {"author": "mcmanus@ducksong.com", "text": "this is windows\nbug 1093788 is android\nbug 930736 is os x\nbug 1147547 is xubuntu\nbug 1222838 is ubuntu\nbug 1226770 is ubuntu\n\nthere are a few differences, so its worth researching them - but for project purposes I'm going mark them as a dup of this one.", "count": 3, "creator": "mcmanus@ducksong.com", "is_private": false, "creation_time": "2016-02-29T18:46:54Z", "id": 11204338, "bug_id": 705483, "attachment_id": null, "raw_text": "this is windows\nbug 1093788 is android\nbug 930736 is os x\nbug 1147547 is xubuntu\nbug 1222838 is ubuntu\nbug 1226770 is ubuntu\n\nthere are a few differences, so its worth researching them - but for project purposes I'm going mark them as a dup of this one.", "time": "2016-02-29T18:46:54Z", "tags": []}, {"text": "*** Bug 1093788 has been marked as a duplicate of this bug. ***", "count": 4, "author": "mcmanus@ducksong.com", "id": 11204342, "bug_id": 705483, "time": "2016-02-29T18:47:19Z", "raw_text": "", "creator": "mcmanus@ducksong.com", "is_private": false, "creation_time": "2016-02-29T18:47:19Z", "attachment_id": null, "tags": []}, {"tags": [], "time": "2016-02-29T18:47:38Z", "raw_text": "", "attachment_id": null, "id": 11204346, "bug_id": 705483, "creation_time": "2016-02-29T18:47:38Z", "is_private": false, "creator": "mcmanus@ducksong.com", "count": 5, "text": "*** Bug 930736 has been marked as a duplicate of this bug. ***", "author": "mcmanus@ducksong.com"}, {"id": 11204349, "bug_id": 705483, "author": "mcmanus@ducksong.com", "count": 6, "text": "*** Bug 1147547 has been marked as a duplicate of this bug. ***", "raw_text": "", "time": "2016-02-29T18:47:49Z", "creation_time": "2016-02-29T18:47:49Z", "is_private": false, "creator": "mcmanus@ducksong.com", "tags": [], "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "mcmanus@ducksong.com", "is_private": false, "creation_time": "2016-02-29T18:47:58Z", "time": "2016-02-29T18:47:58Z", "raw_text": "", "author": "mcmanus@ducksong.com", "text": "*** Bug 1222838 has been marked as a duplicate of this bug. ***", "count": 7, "id": 11204353, "bug_id": 705483}, {"tags": [], "attachment_id": null, "creation_time": "2016-02-29T18:48:10Z", "is_private": false, "creator": "mcmanus@ducksong.com", "time": "2016-02-29T18:48:10Z", "raw_text": "", "id": 11204355, "bug_id": 705483, "count": 8, "text": "*** Bug 1226770 has been marked as a duplicate of this bug. ***", "author": "mcmanus@ducksong.com"}, {"tags": [], "attachment_id": null, "raw_text": "Shouldn't Status be \"NEW\" rather than \"UNCONFIRMED\"?", "time": "2017-06-24T12:26:51Z", "creation_time": "2017-06-24T12:26:51Z", "is_private": false, "bug_id": 705483, "id": 12427058, "author": "moz@jeka.info", "count": 9, "text": "Shouldn't Status be \"NEW\" rather than \"UNCONFIRMED\"?", "creator": "moz@jeka.info"}, {"id": 12461210, "bug_id": 705483, "author": "bzbarsky@mit.edu", "text": "Patrick, why would this be happening?  I thought we just used OS APIs for DNS resolution...\n\nBug 1226770 maybe provide a means of reproducing, at least on Linux.", "count": 10, "raw_text": "Patrick, why would this be happening?  I thought we just used OS APIs for DNS resolution...\n\nBug 1226770 maybe provide a means of reproducing, at least on Linux.", "time": "2017-07-10T20:29:07Z", "is_private": false, "creation_time": "2017-07-10T20:29:07Z", "creator": "bzbarsky@mit.edu", "tags": [], "attachment_id": null}, {"raw_text": "I ever reproduced the scenario of bug 1226770 on Ubuntu 14.04, but not longer reproducible after upgraded to Ubuntu 16.04.  Junior has a Ubuntu 14.04 desktop and said he can reproduce it.  Could you take a look at it?  Thanks!", "attachment_id": null, "time": "2017-07-13T11:35:56Z", "tags": [], "count": 11, "text": "I ever reproduced the scenario of bug 1226770 on Ubuntu 14.04, but not longer reproducible after upgraded to Ubuntu 16.04.  Junior has a Ubuntu 14.04 desktop and said he can reproduce it.  Could you take a look at it?  Thanks!", "author": "swu@mozilla.com", "creator": "swu@mozilla.com", "is_private": false, "creation_time": "2017-07-13T11:35:56Z", "bug_id": 705483, "id": 12470190}, {"raw_text": "Bulk change to priority: https://bugzilla.mozilla.org/show_bug.cgi?id=1399258", "attachment_id": null, "time": "2017-09-13T18:29:35Z", "tags": [], "text": "Bulk change to priority: https://bugzilla.mozilla.org/show_bug.cgi?id=1399258", "count": 12, "author": "bug-husbandry-bot@mozilla.bugs", "creator": "bug-husbandry-bot@mozilla.bugs", "creation_time": "2017-09-13T18:29:35Z", "is_private": false, "id": 12657586, "bug_id": 705483}, {"text": "Can not reproduce in ubuntu 18.04", "count": 13, "author": "CuveeHsu@gmail.com", "id": 13544562, "bug_id": 705483, "raw_text": "Can not reproduce in ubuntu 18.04", "time": "2018-08-14T20:33:14Z", "creator": "CuveeHsu@gmail.com", "is_private": false, "creation_time": "2018-08-14T20:33:14Z", "attachment_id": null, "tags": []}, {"tags": [], "time": "2020-10-27T12:18:55Z", "raw_text": "Still reproducible, at least for Thunderbird. Firefox seems to work but only after a few hours.", "attachment_id": null, "id": 15102553, "bug_id": 705483, "is_private": false, "creation_time": "2020-10-27T12:18:55Z", "creator": "mz@th0m.nl", "text": "Still reproducible, at least for Thunderbird. Firefox seems to work but only after a few hours.", "count": 14, "author": "mz@th0m.nl"}]}}, "comments": {}}