{"comments": {}, "bugs": {"700325": {"comments": [{"creation_time": "2011-11-07T16:50:01Z", "raw_text": "I would like to completely rewrite our error reporting system.\nAlso try to avoid edge cases and the weird Error <-> Exception split. There are also quite a few indirections till we actually report a error. I am still looking into how to do this properly, but there is a lot of stuff we could abstract away. I imagine that error reporting once could look like this ThrowError(JSContext *cx, CallArgs args, ErrorType type).\nI am not sure how to make vararg errors messages look good.\n\nThrowError(cx, args, WrongThis);\nThrowError(cx, args, NotEnoughArguments, 3);\nThrowError(cx, args, NotObject, val);\n\nMaybe we could even create translatable error messages ? :)", "time": "2011-11-07T16:50:01Z", "attachment_id": null, "text": "I would like to completely rewrite our error reporting system.\nAlso try to avoid edge cases and the weird Error <-> Exception split. There are also quite a few indirections till we actually report a error. I am still looking into how to do this properly, but there is a lot of stuff we could abstract away. I imagine that error reporting once could look like this ThrowError(JSContext *cx, CallArgs args, ErrorType type).\nI am not sure how to make vararg errors messages look good.\n\nThrowError(cx, args, WrongThis);\nThrowError(cx, args, NotEnoughArguments, 3);\nThrowError(cx, args, NotObject, val);\n\nMaybe we could even create translatable error messages ? :)", "id": 5831057, "count": 0, "is_private": false, "tags": [], "bug_id": 700325, "author": "evilpies@gmail.com", "creator": "evilpies@gmail.com"}, {"creator": "mail@lukewagner.name", "author": "mail@lukewagner.name", "text": "Error reporting code is severely underloved and I have wasted no small amount of time stepping through the morass while debugging so I applaud your goal.  I would only advise that you take time to understand the exact interaction with the browser (via JSErrorReporter) regarding when things are reported vs. thrown.", "time": "2011-11-07T17:43:33Z", "attachment_id": null, "raw_text": "Error reporting code is severely underloved and I have wasted no small amount of time stepping through the morass while debugging so I applaud your goal.  I would only advise that you take time to understand the exact interaction with the browser (via JSErrorReporter) regarding when things are reported vs. thrown.", "creation_time": "2011-11-07T17:43:33Z", "bug_id": 700325, "count": 1, "is_private": false, "tags": [], "id": 5831277}, {"count": 2, "is_private": false, "tags": [], "id": 5831304, "bug_id": 700325, "raw_text": "Currently error messages and formats are tied to the type of the error -- TypeError, RangeError, SyntaxError, and so on.  We should remove this conflation, at least internally if not (immediately) externally.  In particular the code at the location where an error is thrown should make it immediately clear what sort of error will be thrown.  I suspect we have lingering wrong-error bugs now because of this extra level of indirection.", "creation_time": "2011-11-07T17:51:01Z", "text": "Currently error messages and formats are tied to the type of the error -- TypeError, RangeError, SyntaxError, and so on.  We should remove this conflation, at least internally if not (immediately) externally.  In particular the code at the location where an error is thrown should make it immediately clear what sort of error will be thrown.  I suspect we have lingering wrong-error bugs now because of this extra level of indirection.", "time": "2011-11-07T17:51:01Z", "attachment_id": null, "creator": "jwalden@mit.edu", "author": "jwalden@mit.edu"}, {"attachment_id": null, "time": "2011-11-10T15:08:06Z", "text": "So well, I hope i can break the API to make some changes. Should we still have a error struct and only create the error object lazily? I kind of like the idea of only passing around one error object. The think is we expose even more via JSErrorReporter, but the only thing that i see being used in our code, is the actually line of code that threw the error. Maybe we could solve that some other way?", "creation_time": "2011-11-10T15:08:06Z", "raw_text": "So well, I hope i can break the API to make some changes. Should we still have a error struct and only create the error object lazily? I kind of like the idea of only passing around one error object. The think is we expose even more via JSErrorReporter, but the only thing that i see being used in our code, is the actually line of code that threw the error. Maybe we could solve that some other way?", "bug_id": 700325, "id": 5839965, "tags": [], "count": 3, "is_private": false, "author": "evilpies@gmail.com", "creator": "evilpies@gmail.com"}]}}}