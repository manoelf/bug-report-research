{"comments": {}, "bugs": {"521116": {"comments": [{"tags": [], "attachment_id": null, "raw_text": "From Madhava's bug 514220 comment 7:\n\nWe get row-highlighting immediately now, which is helpful, but it still takes a\nnumber of seconds to bring up the bookmarks list when you have a lot of\nbookmarks (as you do after a weave sync with your desktop set).  I think that\nwe need something more than just immediate row-highlighting to give the user a\nsense that something is actually happening.  There was an idea in the original\nbug summary to replace the > indicator with a throbber when we're waiting for\nthe list to come up.\n\nAlso - is there any way to speed up bringing up the list?", "creation_time": "2009-10-07T22:46:28Z", "text": "From Madhava's bug 514220 comment 7:\n\nWe get row-highlighting immediately now, which is helpful, but it still takes a\nnumber of seconds to bring up the bookmarks list when you have a lot of\nbookmarks (as you do after a weave sync with your desktop set).  I think that\nwe need something more than just immediate row-highlighting to give the user a\nsense that something is actually happening.  There was an idea in the original\nbug summary to replace the > indicator with a throbber when we're waiting for\nthe list to come up.\n\nAlso - is there any way to speed up bringing up the list?", "id": 4336723, "bug_id": 521116, "count": 0, "creator": "gavin.sharp@gmail.com", "time": "2009-10-07T22:46:28Z", "author": "gavin.sharp@gmail.com", "is_private": false}, {"text": "(In reply to comment #0)\n> From Madhava's bug 514220 comment 7:\n> \n> We get row-highlighting immediately now, which is helpful, but it still takes a\n> number of seconds to bring up the bookmarks list when you have a lot of\n> bookmarks (as you do after a weave sync with your desktop set).  I think that\n> we need something more than just immediate row-highlighting to give the user a\n> sense that something is actually happening.  There was an idea in the original\n> bug summary to replace the > indicator with a throbber when we're waiting for\n> the list to come up.\n\nThat would be cool!\n\n> Also - is there any way to speed up bringing up the list?\n\nWhat I'm doing when I have a bunch of elements to quickly display is the following:\n * clone the container\n * set display:none to the clone\n * append the bunch of items into the clone\n * replace the container by the clone\n * remove display:none on the clone (aka the new container)\n\nI'm doing that to display thousands of items in a custom filemanager in XUL and it works great.\n\nI can do a wip to test that on our bookmarks and see how long it takes.", "creation_time": "2009-10-10T16:23:03Z", "bug_id": 521116, "id": 4340702, "tags": [], "attachment_id": null, "raw_text": "(In reply to comment #0)\n> From Madhava's bug 514220 comment 7:\n> \n> We get row-highlighting immediately now, which is helpful, but it still takes a\n> number of seconds to bring up the bookmarks list when you have a lot of\n> bookmarks (as you do after a weave sync with your desktop set).  I think that\n> we need something more than just immediate row-highlighting to give the user a\n> sense that something is actually happening.  There was an idea in the original\n> bug summary to replace the > indicator with a throbber when we're waiting for\n> the list to come up.\n\nThat would be cool!\n\n> Also - is there any way to speed up bringing up the list?\n\nWhat I'm doing when I have a bunch of elements to quickly display is the following:\n * clone the container\n * set display:none to the clone\n * append the bunch of items into the clone\n * replace the container by the clone\n * remove display:none on the clone (aka the new container)\n\nI'm doing that to display thousands of items in a custom filemanager in XUL and it works great.\n\nI can do a wip to test that on our bookmarks and see how long it takes.", "count": 1, "time": "2009-10-10T16:23:03Z", "creator": "21@vingtetun.org", "author": "21@vingtetun.org", "is_private": false}, {"time": "2009-10-10T17:26:13Z", "creator": "21@vingtetun.org", "author": "21@vingtetun.org", "is_private": false, "id": 4340748, "bug_id": 521116, "text": "Created attachment 405674\nwip\n\nOk. The wip allow a small speedup but not as much as I've expected.\nThe icons loading kill us a bit and the complicated structure of the bookmarks\ntoo.", "creation_time": "2009-10-10T17:26:13Z", "attachment_id": 405674, "raw_text": "Ok. The wip allow a small speedup but not as much as I've expected.\nThe icons loading kill us a bit and the complicated structure of the bookmarks\ntoo.", "tags": [], "count": 2}, {"count": 3, "tags": [], "raw_text": "We should also not make the screen unresponsive when the user is waiting for the bookmarks list to come up.  Tapping on another row should go to the tapped site, and hitting the \"back out\" button in the upper right should back out of the screen.", "attachment_id": null, "text": "We should also not make the screen unresponsive when the user is waiting for the bookmarks list to come up.  Tapping on another row should go to the tapped site, and hitting the \"back out\" button in the upper right should back out of the screen.", "creation_time": "2009-10-13T17:16:42Z", "id": 4343957, "bug_id": 521116, "is_private": false, "author": "madhava.enros@gmail.com", "creator": "madhava.enros@gmail.com", "time": "2009-10-13T17:16:42Z"}, {"time": "2009-10-13T17:44:02Z", "creator": "mark.finkle@gmail.com", "author": "mark.finkle@gmail.com", "is_private": false, "id": 4344005, "bug_id": 521116, "text": "(In reply to comment #3)\n> We should also not make the screen unresponsive when the user is waiting for\n> the bookmarks list to come up.  Tapping on another row should go to the tapped\n> site, and hitting the \"back out\" button in the upper right should back out of\n> the screen.\n\nThat's an entirely different bug, which you should file.", "creation_time": "2009-10-13T17:44:02Z", "attachment_id": null, "raw_text": "(In reply to comment #3)\n> We should also not make the screen unresponsive when the user is waiting for\n> the bookmarks list to come up.  Tapping on another row should go to the tapped\n> site, and hitting the \"back out\" button in the upper right should back out of\n> the screen.\n\nThat's an entirely different bug, which you should file.", "tags": [], "count": 4}, {"count": 5, "creation_time": "2009-10-13T17:49:41Z", "text": "opened as Bug 522066", "id": 4344018, "bug_id": 521116, "tags": [], "attachment_id": null, "raw_text": "opened as Bug 522066", "is_private": false, "author": "madhava.enros@gmail.com", "time": "2009-10-13T17:49:41Z", "creator": "madhava.enros@gmail.com"}, {"author": "mark.finkle@gmail.com", "time": "2009-11-04T17:14:36Z", "creator": "mark.finkle@gmail.com", "is_private": false, "count": 6, "bug_id": 521116, "id": 4380023, "creation_time": "2009-11-04T17:14:36Z", "text": "*** Bug 526511 has been marked as a duplicate of this bug. ***", "raw_text": "", "attachment_id": null, "tags": []}, {"creator": "jmaher@mozilla.com", "time": "2009-11-04T17:34:42Z", "author": "jmaher@mozilla.com", "is_private": false, "attachment_id": null, "raw_text": "lets make sure that panning of bookmarks work good with the long list.", "tags": [], "id": 4380085, "bug_id": 521116, "text": "lets make sure that panning of bookmarks work good with the long list.", "creation_time": "2009-11-04T17:34:42Z", "count": 7}, {"is_private": false, "author": "21@vingtetun.org", "time": "2009-11-20T01:40:07Z", "creator": "21@vingtetun.org", "count": 8, "id": 4409139, "bug_id": 521116, "text": "Created attachment 413488\npatch for speeding up a bit the display of the list\n\nThis patch did not adress all the bug part (the throbber one as example) but speed up a bit the display of the list:\n\nThis is the result I have on a n810:\nbookmarks : 17\n\nCurrent       : 669, 662, 662, 653, 660 (AVG: 661.2)\nPatch applied : 376, 383, 385, 385, 376 (AVG: 381)\n\n~ 42% gain\n\nI guess the benefit will depends on the number of items", "creation_time": "2009-11-20T01:40:07Z", "raw_text": "This patch did not adress all the bug part (the throbber one as example) but speed up a bit the display of the list:\n\nThis is the result I have on a n810:\nbookmarks : 17\n\nCurrent       : 669, 662, 662, 653, 660 (AVG: 661.2)\nPatch applied : 376, 383, 385, 385, 376 (AVG: 381)\n\n~ 42% gain\n\nI guess the benefit will depends on the number of items", "attachment_id": 413488, "tags": []}, {"creation_time": "2009-11-20T05:15:01Z", "text": "Comment on attachment 413488\npatch for speeding up a bit the display of the list\n\n>diff -r 882f33509828 chrome/content/bindings.xml\n\n>-      <field name=\"_ioService\" readonly=\"true\">\n>-        Components.classes[\"@mozilla.org/network/io-service;1\"]\n>-                  .getService(Components.interfaces.nsIIOService);\n>-      </field>\n\nWe should keep the ioservice field. <field>s are lazily evaluated and are only evaluated once, not each time they are accessed. So it's faster than requesting the service each time, like you do below.\n\n>+              // XXX don't forget to change that\n>               // If the URI was updated change it in the bookmark, but don't\n>               // allow a blank URI. Revert to previous URI if blank.\n\nWhat does the XXX refer too?\n\n>diff -r 882f33509828 themes/hildon/browser.css\n\n>+placeitem[src=\"\"] .bookmark-item-label > image {\n>+  list-style-image: url(chrome://mozapps/skin/places/defaultFavicon.png);\n\nWe have our own default favicon at images/favicon-default-30.png\n\nHmm, I guess we need to make that 32px now that bookmarks have 32px images. File a bug since we use the default for the URLBar too. The current 30px image will just be stretched for now.\n\n>diff -r 882f33509828 themes/wince/browser.css\n\n>+placeitem[src=\"\"] .bookmark-item-label > image {\n>+  list-style-image: url(chrome://mozapps/skin/places/defaultFavicon.png);\n>+}\n>+\n\nMove to browser-low (24px) and browser-high (32px like hildon)\n\nNice refactor. Removing the init method and it's use of the favicon service + the document fragment seemed to help a lot.\n\nShould be ready to land soon!", "id": 4409425, "bug_id": 521116, "tags": [], "raw_text": ">diff -r 882f33509828 chrome/content/bindings.xml\n\n>-      <field name=\"_ioService\" readonly=\"true\">\n>-        Components.classes[\"@mozilla.org/network/io-service;1\"]\n>-                  .getService(Components.interfaces.nsIIOService);\n>-      </field>\n\nWe should keep the ioservice field. <field>s are lazily evaluated and are only evaluated once, not each time they are accessed. So it's faster than requesting the service each time, like you do below.\n\n>+              // XXX don't forget to change that\n>               // If the URI was updated change it in the bookmark, but don't\n>               // allow a blank URI. Revert to previous URI if blank.\n\nWhat does the XXX refer too?\n\n>diff -r 882f33509828 themes/hildon/browser.css\n\n>+placeitem[src=\"\"] .bookmark-item-label > image {\n>+  list-style-image: url(chrome://mozapps/skin/places/defaultFavicon.png);\n\nWe have our own default favicon at images/favicon-default-30.png\n\nHmm, I guess we need to make that 32px now that bookmarks have 32px images. File a bug since we use the default for the URLBar too. The current 30px image will just be stretched for now.\n\n>diff -r 882f33509828 themes/wince/browser.css\n\n>+placeitem[src=\"\"] .bookmark-item-label > image {\n>+  list-style-image: url(chrome://mozapps/skin/places/defaultFavicon.png);\n>+}\n>+\n\nMove to browser-low (24px) and browser-high (32px like hildon)\n\nNice refactor. Removing the init method and it's use of the favicon service + the document fragment seemed to help a lot.\n\nShould be ready to land soon!", "attachment_id": 413488, "count": 9, "time": "2009-11-20T05:15:01Z", "creator": "mark.finkle@gmail.com", "author": "mark.finkle@gmail.com", "is_private": false}, {"is_private": false, "time": "2009-11-20T14:06:40Z", "creator": "21@vingtetun.org", "author": "21@vingtetun.org", "text": "(In reply to comment #9)\n> (From update of attachment 413488 [details])\n> >diff -r 882f33509828 chrome/content/bindings.xml\n> \n> >+              // XXX don't forget to change that\n> >               // If the URI was updated change it in the bookmark, but don't\n> >               // allow a blank URI. Revert to previous URI if blank.\n> \n> What does the XXX refer too?\n\nIt was related to the ioService changed but it was more for remind it to change it for myself.\n\n> \n> >diff -r 882f33509828 themes/hildon/browser.css\n> \n> >+placeitem[src=\"\"] .bookmark-item-label > image {\n> >+  list-style-image: url(chrome://mozapps/skin/places/defaultFavicon.png);\n> \n> We have our own default favicon at images/favicon-default-30.png\n\nI have used this one because that's the one places use for giving us the result in the awesomebar.\nI've let the defaultFavicon.png in this patch - I can change if it is really needed.\n\n \n> Hmm, I guess we need to make that 32px now that bookmarks have 32px images.\n> File a bug since we use the default for the URLBar too. The current 30px image\n> will just be stretched for now.\n\nFiled bug 530062", "creation_time": "2009-11-20T14:06:40Z", "bug_id": 521116, "id": 4410007, "tags": [], "raw_text": "(In reply to comment #9)\n> (From update of attachment 413488 [details])\n> >diff -r 882f33509828 chrome/content/bindings.xml\n> \n> >+              // XXX don't forget to change that\n> >               // If the URI was updated change it in the bookmark, but don't\n> >               // allow a blank URI. Revert to previous URI if blank.\n> \n> What does the XXX refer too?\n\nIt was related to the ioService changed but it was more for remind it to change it for myself.\n\n> \n> >diff -r 882f33509828 themes/hildon/browser.css\n> \n> >+placeitem[src=\"\"] .bookmark-item-label > image {\n> >+  list-style-image: url(chrome://mozapps/skin/places/defaultFavicon.png);\n> \n> We have our own default favicon at images/favicon-default-30.png\n\nI have used this one because that's the one places use for giving us the result in the awesomebar.\nI've let the defaultFavicon.png in this patch - I can change if it is really needed.\n\n \n> Hmm, I guess we need to make that 32px now that bookmarks have 32px images.\n> File a bug since we use the default for the URLBar too. The current 30px image\n> will just be stretched for now.\n\nFiled bug 530062", "attachment_id": null, "count": 10}, {"tags": [], "raw_text": "oups, i've forgot the patch!", "attachment_id": 413598, "text": "Created attachment 413598\nPatch v0.2 for display boost\n\noups, i've forgot the patch!", "creation_time": "2009-11-20T14:08:40Z", "id": 4410010, "bug_id": 521116, "count": 11, "creator": "21@vingtetun.org", "time": "2009-11-20T14:08:40Z", "author": "21@vingtetun.org", "is_private": false}, {"time": "2009-11-23T07:46:18Z", "creator": "gavin.sharp@gmail.com", "author": "gavin.sharp@gmail.com", "is_private": false, "bug_id": 521116, "id": 4413141, "text": "Comment on attachment 413598\nPatch v0.2 for display boost\n\n>diff -r f305d4de5ece chrome/content/bindings.xml\n\n>+      <property name=\"uri\">\n\n>+          if (!this._uri && this._getAttribute(\"uri\")) {\n>+            this._uri = this._ioService.newURI(this._uri, null, null);\n\nThis doesn't look right...", "creation_time": "2009-11-23T07:46:18Z", "raw_text": ">diff -r f305d4de5ece chrome/content/bindings.xml\n\n>+      <property name=\"uri\">\n\n>+          if (!this._uri && this._getAttribute(\"uri\")) {\n>+            this._uri = this._ioService.newURI(this._uri, null, null);\n\nThis doesn't look right...", "attachment_id": 413598, "tags": [], "count": 12}, {"count": 13, "tags": [], "attachment_id": 414020, "raw_text": "(In reply to comment #12)\n> (From update of attachment 413598 [details])\n> >diff -r f305d4de5ece chrome/content/bindings.xml\n> \n> >+      <property name=\"uri\">\n> \n> >+          if (!this._uri && this._getAttribute(\"uri\")) {\n> >+            this._uri = this._ioService.newURI(this._uri, null, null);\n> \n> This doesn't look right...\n\ntrue...\n\n\nI've updated the patch and made it pass all browser-chrome tests.\n\nI've also change one line in the browser_bookmarks.js test, otherwise the click is not dispatched to the bookmark for some reason.\n\nThere is also a bug on the textbox.xml binding which cause some test to fail in some case (and throw an error in normal too), I've filed bug 530496 for that.", "text": "Created attachment 414020\nPatch\n\n(In reply to comment #12)\n> (From update of attachment 413598 [details])\n> >diff -r f305d4de5ece chrome/content/bindings.xml\n> \n> >+      <property name=\"uri\">\n> \n> >+          if (!this._uri && this._getAttribute(\"uri\")) {\n> >+            this._uri = this._ioService.newURI(this._uri, null, null);\n> \n> This doesn't look right...\n\ntrue...\n\n\nI've updated the patch and made it pass all browser-chrome tests.\n\nI've also change one line in the browser_bookmarks.js test, otherwise the click is not dispatched to the bookmark for some reason.\n\nThere is also a bug on the textbox.xml binding which cause some test to fail in some case (and throw an error in normal too), I've filed bug 530496 for that.", "creation_time": "2009-11-23T11:02:42Z", "bug_id": 521116, "id": 4413249, "author": "21@vingtetun.org", "creator": "21@vingtetun.org", "time": "2009-11-23T11:02:42Z", "is_private": false}, {"text": "pushed:\nhttps://hg.mozilla.org/mobile-browser/rev/597af8186228", "creation_time": "2009-11-23T16:45:40Z", "bug_id": 521116, "id": 4413619, "tags": [], "raw_text": "pushed:\nhttps://hg.mozilla.org/mobile-browser/rev/597af8186228", "attachment_id": null, "count": 14, "time": "2009-11-23T16:45:40Z", "creator": "mark.finkle@gmail.com", "author": "mark.finkle@gmail.com", "is_private": false}]}}}