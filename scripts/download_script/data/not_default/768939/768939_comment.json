{
  "bugs": {
    "768939": {
      "comments": [
        {
          "count": 0,
          "time": "2012-06-27T16:33:57Z",
          "creation_time": "2012-06-27T16:33:57Z",
          "creator": "smalolepszy@gmail.com",
          "tags": [],
          "is_private": false,
          "text": "We need a way to show localized net error messages (e.g. \"Server not found\") to the user, for instance in the Browser app.\n\nIf I understand correctly, these messages are currently displayed directly by Gecko and Gaia's Browser app doesn't know about the fact that a network error has occurred.\n\nSee http://mxr.mozilla.org/mozilla-central/source/b2g/locales/en-US/chrome/overrides/netError for examples of error messages.\n\nPossible solutions include:\n\na) Run Gecko in a certain locale (via -UILocale?) and bundle all toolkit localization with b2g.  All errors will be displayed localized, but the restartless locale change will no longer be possible.  We will also need to choose a version of Gecko to base on (or a release train or channel) and bundle corresponding translations with b2g.\n\nb) Have Gecko bubble up error events and Gaia intercept them and show custom error messages.  All errors would need to be reimplemented in Gaia.  For localization,  ideally we would reuse the existing translations, although that might mean, again, choosing a specific version of Gecko to base on.\n\n  b1) We could use DTDs (like we currently do in toolkit) and reuse exactly the same files in Gaia.  Restartless locale change will not be possible then.\n\n  b2) We could reimplement (or convert) toolkit's netError.dtd to .properties and use standard Gaia localization library. \n\nc) other ideas?",
          "raw_text": "We need a way to show localized net error messages (e.g. \"Server not found\") to the user, for instance in the Browser app.\n\nIf I understand correctly, these messages are currently displayed directly by Gecko and Gaia's Browser app doesn't know about the fact that a network error has occurred.\n\nSee http://mxr.mozilla.org/mozilla-central/source/b2g/locales/en-US/chrome/overrides/netError for examples of error messages.\n\nPossible solutions include:\n\na) Run Gecko in a certain locale (via -UILocale?) and bundle all toolkit localization with b2g.  All errors will be displayed localized, but the restartless locale change will no longer be possible.  We will also need to choose a version of Gecko to base on (or a release train or channel) and bundle corresponding translations with b2g.\n\nb) Have Gecko bubble up error events and Gaia intercept them and show custom error messages.  All errors would need to be reimplemented in Gaia.  For localization,  ideally we would reuse the existing translations, although that might mean, again, choosing a specific version of Gecko to base on.\n\n  b1) We could use DTDs (like we currently do in toolkit) and reuse exactly the same files in Gaia.  Restartless locale change will not be possible then.\n\n  b2) We could reimplement (or convert) toolkit's netError.dtd to .properties and use standard Gaia localization library. \n\nc) other ideas?",
          "id": 6427496,
          "author": "smalolepszy@gmail.com",
          "bug_id": 768939,
          "attachment_id": null
        },
        {
          "creator": "justin.lebar+bug@gmail.com",
          "creation_time": "2012-06-27T22:25:33Z",
          "time": "2012-06-27T22:25:33Z",
          "count": 1,
          "author": "justin.lebar+bug@gmail.com",
          "bug_id": 768939,
          "attachment_id": null,
          "id": 6428775,
          "raw_text": "FWIW, these error pages are actually quite complex.  There are 25 different error codes handled in [1], and that's likely not all of the errors we care about.  I don't want us to fall down a rat-hole here.\n\n[1] http://hg.mozilla.org/mozilla-central/file/5b3bf49ce3cf/docshell/base/nsDocShell.cpp#l3930",
          "text": "FWIW, these error pages are actually quite complex.  There are 25 different error codes handled in [1], and that's likely not all of the errors we care about.  I don't want us to fall down a rat-hole here.\n\n[1] http://hg.mozilla.org/mozilla-central/file/5b3bf49ce3cf/docshell/base/nsDocShell.cpp#l3930",
          "is_private": false,
          "tags": []
        },
        {
          "creation_time": "2012-07-03T14:45:49Z",
          "creator": "mgalli@telasocial.com",
          "count": 2,
          "time": "2012-07-03T14:45:49Z",
          "raw_text": "Would be good to keep under a radar for \"all messages\" that Gecko creates ( or events ) that could eventually receive a UX treat ( = be part of UX review discussion .) As an example, we have the discussion (https://groups.google.com/forum/#!topic/mozilla.dev.b2g/FB-hspd-ekg/discussion) that talks about Window trust level. I feel that a way to move UX discussion is first to keep all in a meta bug perhaps or a wiki page. Do you guys know of such a documentation and/or is this important?",
          "text": "Would be good to keep under a radar for \"all messages\" that Gecko creates ( or events ) that could eventually receive a UX treat ( = be part of UX review discussion .) As an example, we have the discussion (https://groups.google.com/forum/#!topic/mozilla.dev.b2g/FB-hspd-ekg/discussion) that talks about Window trust level. I feel that a way to move UX discussion is first to keep all in a meta bug perhaps or a wiki page. Do you guys know of such a documentation and/or is this important?",
          "id": 6441447,
          "attachment_id": null,
          "bug_id": 768939,
          "author": "mgalli@telasocial.com",
          "tags": [],
          "is_private": false
        },
        {
          "creator": "justin.lebar+bug@gmail.com",
          "creation_time": "2012-08-13T19:16:44Z",
          "time": "2012-08-13T19:16:44Z",
          "count": 3,
          "author": "justin.lebar+bug@gmail.com",
          "bug_id": 768939,
          "attachment_id": null,
          "id": 6551359,
          "text": "No longer blocking browser-api because we decided to do this without the browser API's help.\n\nBut I think this is an obvious basecamp blocker.",
          "raw_text": "No longer blocking browser-api because we decided to do this without the browser API's help.\n\nBut I think this is an obvious basecamp blocker.",
          "is_private": false,
          "tags": []
        },
        {
          "id": 6557178,
          "text": "Justin, how is the browser app working around this?\n\nCan we use the same workaround from the system app?",
          "raw_text": "Justin, how is the browser app working around this?\n\nCan we use the same workaround from the system app?",
          "bug_id": 768939,
          "attachment_id": null,
          "author": "cjones.bugs@gmail.com",
          "tags": [],
          "is_private": false,
          "creation_time": "2012-08-15T17:20:38Z",
          "creator": "cjones.bugs@gmail.com",
          "time": "2012-08-15T17:20:38Z",
          "count": 4
        },
        {
          "tags": [],
          "is_private": false,
          "id": 6557222,
          "text": "(In reply to Chris Jones [:cjones] [:warhammer] from comment #4)\n> Justin, how is the browser app working around this?\n> \n> Can we use the same workaround from the system app?\n\nI don't know if the browser app currently works around this, but the plan was for someone who understands l10n to set the correct env vars (or whatever) so that we showed localized Gecko error messages.\n\nWe could use the same workaround for the system app, although of course that would mean showing Gecko error messages for apps, we might not want to do.",
          "raw_text": "(In reply to Chris Jones [:cjones] [:warhammer] from comment #4)\n> Justin, how is the browser app working around this?\n> \n> Can we use the same workaround from the system app?\n\nI don't know if the browser app currently works around this, but the plan was for someone who understands l10n to set the correct env vars (or whatever) so that we showed localized Gecko error messages.\n\nWe could use the same workaround for the system app, although of course that would mean showing Gecko error messages for apps, we might not want to do.",
          "attachment_id": null,
          "bug_id": 768939,
          "author": "justin.lebar+bug@gmail.com",
          "time": "2012-08-15T17:32:31Z",
          "count": 5,
          "creation_time": "2012-08-15T17:32:31Z",
          "creator": "justin.lebar+bug@gmail.com"
        },
        {
          "creator": "overholt@mozilla.com",
          "creation_time": "2012-08-15T18:04:23Z",
          "time": "2012-08-15T18:04:23Z",
          "count": 6,
          "bug_id": 768939,
          "attachment_id": null,
          "author": "overholt@mozilla.com",
          "id": 6557371,
          "text": "Chris Lee, we'd love your input on whether or not this should be a Basecamp blocker.",
          "raw_text": "Chris Lee, we'd love your input on whether or not this should be a Basecamp blocker.",
          "is_private": false,
          "tags": []
        },
        {
          "bug_id": 768939,
          "attachment_id": null,
          "author": "justin.lebar+bug@gmail.com",
          "id": 6557520,
          "raw_text": "(In reply to Andrew Overholt [:overholt] from comment #6)\n> Chris Lee, we'd love your input on whether or not this should be a Basecamp\n> blocker.\n\nIf this is not a basecamp blocker, that means we're willing to ship a device with English \"server not found\", \"network not available\" etc. error messages in all locales.",
          "text": "(In reply to Andrew Overholt [:overholt] from comment #6)\n> Chris Lee, we'd love your input on whether or not this should be a Basecamp\n> blocker.\n\nIf this is not a basecamp blocker, that means we're willing to ship a device with English \"server not found\", \"network not available\" etc. error messages in all locales.",
          "is_private": false,
          "tags": [],
          "creator": "justin.lebar+bug@gmail.com",
          "creation_time": "2012-08-15T18:42:49Z",
          "time": "2012-08-15T18:42:49Z",
          "count": 7
        },
        {
          "is_private": false,
          "tags": [],
          "bug_id": 768939,
          "attachment_id": null,
          "author": "overholt@mozilla.com",
          "text": "Chris Jones, could you repeat your comments here regarding app localization vs. browser localization (that's what you alluded to during triage IIRC).  Thanks.",
          "raw_text": "Chris Jones, could you repeat your comments here regarding app localization vs. browser localization (that's what you alluded to during triage IIRC).  Thanks.",
          "id": 6557531,
          "count": 8,
          "time": "2012-08-15T18:44:29Z",
          "creator": "overholt@mozilla.com",
          "creation_time": "2012-08-15T18:44:29Z"
        },
        {
          "creation_time": "2012-08-15T18:46:13Z",
          "creator": "cjones.bugs@gmail.com",
          "count": 9,
          "time": "2012-08-15T18:46:13Z",
          "text": "... when apps fail to load from the network.  Part of the input data is what's currently in the marketplace: if the apps are mostly \"link apps\" (which is the case last I heard), meaning network errors will be common, then I think this should block.\n\nBut it sounds like the workaround for browser will apply here out of the box.  Justin, is this the bug for the l10n magic env var or whatever?",
          "raw_text": "... when apps fail to load from the network.  Part of the input data is what's currently in the marketplace: if the apps are mostly \"link apps\" (which is the case last I heard), meaning network errors will be common, then I think this should block.\n\nBut it sounds like the workaround for browser will apply here out of the box.  Justin, is this the bug for the l10n magic env var or whatever?",
          "id": 6557545,
          "author": "cjones.bugs@gmail.com",
          "attachment_id": null,
          "bug_id": 768939,
          "tags": [],
          "is_private": false
        },
        {
          "tags": [],
          "is_private": false,
          "text": "Sorry, mid-aired: the \"... \" in comment 9 was continuing on from comment 7.",
          "raw_text": "Sorry, mid-aired: the \"... \" in comment 9 was continuing on from comment 7.",
          "id": 6557547,
          "author": "cjones.bugs@gmail.com",
          "bug_id": 768939,
          "attachment_id": null,
          "count": 10,
          "time": "2012-08-15T18:46:45Z",
          "creation_time": "2012-08-15T18:46:45Z",
          "creator": "cjones.bugs@gmail.com"
        },
        {
          "creator": "justin.lebar+bug@gmail.com",
          "creation_time": "2012-08-15T18:48:29Z",
          "time": "2012-08-15T18:48:29Z",
          "count": 11,
          "attachment_id": null,
          "bug_id": 768939,
          "author": "justin.lebar+bug@gmail.com",
          "id": 6557558,
          "text": "> But it sounds like the workaround for browser will apply here out of the box.\n\nYes, that's my understanding.  You get localized Gecko error messages in apps for free, if you have them in the browser.\n\n> Justin, is this the bug for the l10n magic env var or whatever?\n\nThat's what I thought; maybe stas knows better.",
          "raw_text": "> But it sounds like the workaround for browser will apply here out of the box.\n\nYes, that's my understanding.  You get localized Gecko error messages in apps for free, if you have them in the browser.\n\n> Justin, is this the bug for the l10n magic env var or whatever?\n\nThat's what I thought; maybe stas knows better.",
          "is_private": false,
          "tags": []
        },
        {
          "attachment_id": null,
          "bug_id": 768939,
          "author": "l10n@mozilla.com",
          "text": "Let's add more questions:\n\nDo we need to deal with multi-process/e10s?\n\nWhat does the settings app do when you select a language? Right now, and \"should\"?",
          "raw_text": "Let's add more questions:\n\nDo we need to deal with multi-process/e10s?\n\nWhat does the settings app do when you select a language? Right now, and \"should\"?",
          "id": 6563066,
          "is_private": false,
          "tags": [],
          "creator": "l10n@mozilla.com",
          "creation_time": "2012-08-17T17:10:05Z",
          "count": 12,
          "time": "2012-08-17T17:10:05Z"
        },
        {
          "count": 13,
          "time": "2012-08-17T17:21:01Z",
          "creator": "justin.lebar+bug@gmail.com",
          "creation_time": "2012-08-17T17:21:01Z",
          "is_private": false,
          "tags": [],
          "author": "justin.lebar+bug@gmail.com",
          "attachment_id": null,
          "bug_id": 768939,
          "raw_text": "> Do we need to deal with multi-process/e10s?\n\nYes.  Many of our apps are currently OOP, and we're working towards making more of them run out-of-process.",
          "text": "> Do we need to deal with multi-process/e10s?\n\nYes.  Many of our apps are currently OOP, and we're working towards making more of them run out-of-process.",
          "id": 6563112
        },
        {
          "creator": "21@vingtetun.org",
          "creation_time": "2012-08-17T17:24:29Z",
          "count": 14,
          "time": "2012-08-17T17:24:29Z",
          "bug_id": 768939,
          "attachment_id": null,
          "author": "21@vingtetun.org",
          "text": "(In reply to Axel Hecht [:Pike] from comment #12)\n> Let's add more questions:\n> \n> Do we need to deal with multi-process/e10s?\n\nGaia application are run OOP. Web content is run OOP. so I would say yes :)\n\n> \n> What does the settings app do when you select a language?\n\nIt change the value of a mozSetting that itself update the value of the preference used by navigator.language. See http://mxr.mozilla.org/mozilla-central/source/b2g/chrome/content/settings.js#60",
          "raw_text": "(In reply to Axel Hecht [:Pike] from comment #12)\n> Let's add more questions:\n> \n> Do we need to deal with multi-process/e10s?\n\nGaia application are run OOP. Web content is run OOP. so I would say yes :)\n\n> \n> What does the settings app do when you select a language?\n\nIt change the value of a mozSetting that itself update the value of the preference used by navigator.language. See http://mxr.mozilla.org/mozilla-central/source/b2g/chrome/content/settings.js#60",
          "id": 6563125,
          "is_private": false,
          "tags": []
        },
        {
          "creation_time": "2012-08-17T17:43:19Z",
          "creator": "l10n@mozilla.com",
          "count": 15,
          "time": "2012-08-17T17:43:19Z",
          "text": "OK, the current behaviour is bad for the web.\n\nRephrasing:\n\nWhen changing the selected locale in gaia settings, all gecko process should change their prefs to either\n\n- LOCALE set to lang, or it's POSIX variant (TBD)\n- or general.useragent.locale is set to lang\n\nThe accept-lang pref should remain to be a localized pref in the gecko backend, yielding navigator.language to pick up the first of those.\n\nSetting accept-lang directly breaks language fallback when surfing the web from the device, and that's bad.\n\nI don't think it matters much if we're using process variables or pref values inside the process, whichever is easier. But we do need to communicate this across all processes, and verify if we need to flush xul cashes for stuff or not.",
          "raw_text": "OK, the current behaviour is bad for the web.\n\nRephrasing:\n\nWhen changing the selected locale in gaia settings, all gecko process should change their prefs to either\n\n- LOCALE set to lang, or it's POSIX variant (TBD)\n- or general.useragent.locale is set to lang\n\nThe accept-lang pref should remain to be a localized pref in the gecko backend, yielding navigator.language to pick up the first of those.\n\nSetting accept-lang directly breaks language fallback when surfing the web from the device, and that's bad.\n\nI don't think it matters much if we're using process variables or pref values inside the process, whichever is easier. But we do need to communicate this across all processes, and verify if we need to flush xul cashes for stuff or not.",
          "id": 6563179,
          "attachment_id": null,
          "bug_id": 768939,
          "author": "l10n@mozilla.com",
          "tags": [],
          "is_private": false
        },
        {
          "tags": [],
          "is_private": false,
          "text": "Should this bug be also about restarting Gecko with -UILocale to complete the locale change?",
          "raw_text": "Should this bug be also about restarting Gecko with -UILocale to complete the locale change?",
          "id": 6566905,
          "author": "smalolepszy@gmail.com",
          "bug_id": 768939,
          "attachment_id": null,
          "count": 16,
          "time": "2012-08-20T11:47:49Z",
          "creation_time": "2012-08-20T11:47:49Z",
          "creator": "smalolepszy@gmail.com"
        },
        {
          "tags": [],
          "is_private": false,
          "raw_text": "no restart required",
          "text": "no restart required",
          "id": 6566950,
          "author": "l10n@mozilla.com",
          "attachment_id": null,
          "bug_id": 768939,
          "count": 17,
          "time": "2012-08-20T12:11:57Z",
          "creation_time": "2012-08-20T12:11:57Z",
          "creator": "l10n@mozilla.com"
        },
        {
          "creator": "kairo@kairo.at",
          "creation_time": "2012-08-20T12:17:56Z",
          "count": 18,
          "time": "2012-08-20T12:17:56Z",
          "bug_id": 768939,
          "attachment_id": null,
          "author": "kairo@kairo.at",
          "raw_text": "Sta\u015b, I though -UILocale does only set general.useragent.locale anyhow (and trigger the locale switch/setting this implies)? We can probably do that all dynamically at runtime, esp. when changing L10n of displayed XUL isn't a problem, as it was in the past with dynamic UI locale switching.",
          "text": "Sta\u015b, I though -UILocale does only set general.useragent.locale anyhow (and trigger the locale switch/setting this implies)? We can probably do that all dynamically at runtime, esp. when changing L10n of displayed XUL isn't a problem, as it was in the past with dynamic UI locale switching.",
          "id": 6566958,
          "is_private": false,
          "tags": []
        },
        {
          "creator": "l10n@mozilla.com",
          "creation_time": "2012-10-02T10:54:28Z",
          "count": 19,
          "time": "2012-10-02T10:54:28Z",
          "author": "l10n@mozilla.com",
          "attachment_id": null,
          "bug_id": 768939,
          "raw_text": "I think that the road from gaia settings to gecko is covered by bug 796079.\n\nI don't know if that would work the other way around, ie, make UILocale work. There's a dedicated bug 796335 for that way. Whether we need that or not depends a bit on where the settings app is actually getting the list of langauges from in the end, right now that's hardcoded. Is there a bug on that?",
          "text": "I think that the road from gaia settings to gecko is covered by bug 796079.\n\nI don't know if that would work the other way around, ie, make UILocale work. There's a dedicated bug 796335 for that way. Whether we need that or not depends a bit on where the settings app is actually getting the list of langauges from in the end, right now that's hardcoded. Is there a bug on that?",
          "id": 6688342,
          "is_private": false,
          "tags": []
        },
        {
          "time": "2012-10-22T09:52:17Z",
          "count": 20,
          "creation_time": "2012-10-22T09:52:17Z",
          "creator": "21@vingtetun.org",
          "tags": [],
          "is_private": false,
          "id": 6750577,
          "raw_text": "Stealing.",
          "text": "Stealing.",
          "author": "21@vingtetun.org",
          "bug_id": 768939,
          "attachment_id": null
        },
        {
          "time": "2012-10-26T13:14:47Z",
          "count": 21,
          "creation_time": "2012-10-26T13:14:47Z",
          "creator": "21@vingtetun.org",
          "tags": [],
          "is_private": false,
          "id": 6766501,
          "raw_text": "Should have been resolved by bug 768939.",
          "text": "Should have been resolved by bug 768939.",
          "attachment_id": null,
          "bug_id": 768939,
          "author": "21@vingtetun.org"
        },
        {
          "is_private": false,
          "tags": [],
          "author": "ryanvm@gmail.com",
          "bug_id": 768939,
          "attachment_id": null,
          "raw_text": "(In reply to Vivien Nicolas (:vingtetun) from comment #21)\n> Should have been resolved by bug 768939.\n\nGoing to guess you meant bug 796079.",
          "text": "(In reply to Vivien Nicolas (:vingtetun) from comment #21)\n> Should have been resolved by bug 768939.\n\nGoing to guess you meant bug 796079.",
          "id": 6768898,
          "count": 22,
          "time": "2012-10-27T02:53:43Z",
          "creator": "ryanvm@gmail.com",
          "creation_time": "2012-10-27T02:53:43Z"
        }
      ]
    }
  },
  "comments": {}
}
