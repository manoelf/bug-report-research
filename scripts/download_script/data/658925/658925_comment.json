{"comments": {}, "bugs": {"658925": {"comments": [{"bug_id": 658925, "count": 0, "time": "2011-05-23T01:29:52Z", "creator": "dholbert@mozilla.com", "author": "dholbert@mozilla.com", "raw_text": "While writing a mochitest for another imagelib bug, I happened to notice that the mochitest modules/libpr0n/test/mochitest/test_bug490949.html triggers **two** calls to SimpleTest.finish(), resulting in two test-results printouts (with different numbers of successes reported).\n\nSee attached screenshot.\n\nThe finish() calls are ultimately triggered by the main method \"checkLoad\", which is called in two places:\n> <body onload=\"checkFirst()\">\n[...]\n> remoteCanvas.load(checkFirst);\n\nI don't know which of those we want to keep or remove (maybe we need both, but then the test needs tweaking to avoid duplicate finish calls...?)\n\nReference to source:\nhttp://mxr.mozilla.org/mozilla-central/source/modules/libpr0n/test/mochitest/test_bug490949.html?force=1", "is_private": false, "tags": [], "creation_time": "2011-05-23T01:29:52Z", "attachment_id": 534340, "id": 5485678, "text": "Created attachment 534340\nscreenshot\n\nWhile writing a mochitest for another imagelib bug, I happened to notice that the mochitest modules/libpr0n/test/mochitest/test_bug490949.html triggers **two** calls to SimpleTest.finish(), resulting in two test-results printouts (with different numbers of successes reported).\n\nSee attached screenshot.\n\nThe finish() calls are ultimately triggered by the main method \"checkLoad\", which is called in two places:\n> <body onload=\"checkFirst()\">\n[...]\n> remoteCanvas.load(checkFirst);\n\nI don't know which of those we want to keep or remove (maybe we need both, but then the test needs tweaking to avoid duplicate finish calls...?)\n\nReference to source:\nhttp://mxr.mozilla.org/mozilla-central/source/modules/libpr0n/test/mochitest/test_bug490949.html?force=1"}]}}}