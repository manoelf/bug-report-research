{"comments": {}, "bugs": {"646302": {"comments": [{"raw_text": "ran across several crashes like this\n\nhttps://crash-stats.mozilla.com/report/index/9dde3ef9-6d89-48ee-8c92-e7f792110328\n\n0 \t\t@0x12fa37 \t\n1 \t\t@0x12fb03 \t\n2 \tnss3.dll \tPKIX_RevocationChecker_Create \tsecurity/nss/lib/libpkix/pkix/checker/pkix_revocationchecker.c:228\n3 \tmozcrt19.dll \tarena_dalloc_small \tobj-firefox/memory/jemalloc/crtsrc/jemalloc.c:4162\n4 \tmozcrt19.dll \tfree \tobj-firefox/memory/jemalloc/crtsrc/jemalloc.c:6130\n5 \txul.dll \tCommandLine::Init \tipc/chromium/src/base/command_line.cc:175\n\nmore reports like this at\nhttps://crash-stats.mozilla.com/report/list?product=Firefox&query_search=signature&query_type=exact&query=Kazahook.dll%400x12f83&date=03%2F29%2F2011%2017%3A47%3A18&range_value=1&range_unit=weeks&hang_type=any&process_type=any&plugin_field=&plugin_query_type=&plugin_query=&do_query=1&admin=1&signature=Kazahook.dll%400x12f83\n\n\nand some other that have nearby code close to the top of the stack.\n\n\nhttps://crash-stats.mozilla.com/report/index/19cc1d3f-6e00-421a-a97f-3a1242110325\n\n0 \tKazahook.dll \tKazahook.dll@0x12f83 \t\n1 \toleaut32.dll \tGetAppData \t\n2 \tKazahook.dll \tKazahook.dll@0x87fc \t\n3 \tKazahook.dll \tKazahook.dll@0x215d3 \t\n4 \txul.dll \txul.dll@0xeacbf \t\n5 \tnss3.dll \tPKIX_RevocationChecker_Create \tsecurity/nss/lib/libpkix/pkix/checker/pkix_revocationchecker.c:221\n6 \tnss3.dll \tPK11_InitPin \tsecurity/nss/lib/pk11wrap/pk11auth.c:472\n7 \tmozjs.dll \tjs::NodeBuilder::comprehensionExpression \tjs/src/jsreflect.cpp:1209\n8 \tKazahook.dll \tKazahook.dll@0x1ea90\n\nmore reports like this at https://crash-stats.mozilla.com/report/list?product=Firefox&query_search=signature&query_type=exact&query=Kazahook.dll%400x12f83&date=03%2F29%2F2011%2017%3A47%3A18&range_value=1&range_unit=weeks&hang_type=any&process_type=any&plugin_field=&plugin_query_type=&plugin_query=&do_query=1&admin=1&signature=Kazahook.dll%400x12f83", "bug_id": 646302, "count": 0, "time": "2011-03-30T00:54:58Z", "is_private": false, "tags": [], "creation_time": "2011-03-30T00:54:58Z", "attachment_id": null, "id": 5379305, "text": "ran across several crashes like this\n\nhttps://crash-stats.mozilla.com/report/index/9dde3ef9-6d89-48ee-8c92-e7f792110328\n\n0 \t\t@0x12fa37 \t\n1 \t\t@0x12fb03 \t\n2 \tnss3.dll \tPKIX_RevocationChecker_Create \tsecurity/nss/lib/libpkix/pkix/checker/pkix_revocationchecker.c:228\n3 \tmozcrt19.dll \tarena_dalloc_small \tobj-firefox/memory/jemalloc/crtsrc/jemalloc.c:4162\n4 \tmozcrt19.dll \tfree \tobj-firefox/memory/jemalloc/crtsrc/jemalloc.c:6130\n5 \txul.dll \tCommandLine::Init \tipc/chromium/src/base/command_line.cc:175\n\nmore reports like this at\nhttps://crash-stats.mozilla.com/report/list?product=Firefox&query_search=signature&query_type=exact&query=Kazahook.dll%400x12f83&date=03%2F29%2F2011%2017%3A47%3A18&range_value=1&range_unit=weeks&hang_type=any&process_type=any&plugin_field=&plugin_query_type=&plugin_query=&do_query=1&admin=1&signature=Kazahook.dll%400x12f83\n\n\nand some other that have nearby code close to the top of the stack.\n\n\nhttps://crash-stats.mozilla.com/report/index/19cc1d3f-6e00-421a-a97f-3a1242110325\n\n0 \tKazahook.dll \tKazahook.dll@0x12f83 \t\n1 \toleaut32.dll \tGetAppData \t\n2 \tKazahook.dll \tKazahook.dll@0x87fc \t\n3 \tKazahook.dll \tKazahook.dll@0x215d3 \t\n4 \txul.dll \txul.dll@0xeacbf \t\n5 \tnss3.dll \tPKIX_RevocationChecker_Create \tsecurity/nss/lib/libpkix/pkix/checker/pkix_revocationchecker.c:221\n6 \tnss3.dll \tPK11_InitPin \tsecurity/nss/lib/pk11wrap/pk11auth.c:472\n7 \tmozjs.dll \tjs::NodeBuilder::comprehensionExpression \tjs/src/jsreflect.cpp:1209\n8 \tKazahook.dll \tKazahook.dll@0x1ea90\n\nmore reports like this at https://crash-stats.mozilla.com/report/list?product=Firefox&query_search=signature&query_type=exact&query=Kazahook.dll%400x12f83&date=03%2F29%2F2011%2017%3A47%3A18&range_value=1&range_unit=weeks&hang_type=any&process_type=any&plugin_field=&plugin_query_type=&plugin_query=&do_query=1&admin=1&signature=Kazahook.dll%400x12f83", "creator": "chofmann@gmail.com", "author": "chofmann@gmail.com"}, {"is_private": false, "tags": [], "time": "2011-03-30T01:07:11Z", "count": 1, "raw_text": "more complete list of all the signatures where code from libpkix/pkix/checker/pkix_revocationchecker.c is near the top of the stack.\n\nif these aren't all the same bug or sets of bugs we can turn this into a tracker and spin off other bugs.\n\nmost of these don't have comments so code inspection might be the best place to start.\n\nnot sure if the urls will be useful either. its a wide set of user facing sites\nand \n\n   4 www.google.com\n   4 www.facebook.com\n   2 www.youtube.com\n   2 vkontakte.ru\n   2 services.addons.mozilla.org\n   2 googleads.g.doubleclick.net\n   1 xartinos.gr\n   1 www.zumi.pl\n   1 www.yatra.com\n   1 www.yahoo.co.jp\n   1 www.thaicuties.net\n   1 www.teamliquid.net\n   1 www.sbs6.nl\n   1 www.roberthalf.com\n   1 www.papuaweb.org\n   1 www.ngc.pro.vn\n   1 www.net.hr\n   1 www.moddedmustangs.com\n   1 www.mocospace.com\n   1 www.miniclip.com\n   1 www.kaskus.us\n   1 www.intel.com\n   1 www.hotmail.com\n   1 www.hao123.com\n   1 www.habbo.com.br\n   1 www.google.co.jp\n   1 www.goo.ne.jp\n   1 www.disney.ro\n   1 www.declaration.urssaf.fr\n   1 www.debeka.de\n   1 www.connect.facebook.com\n   1 www.bobtv.fr\n   1 www.bild.de\n   1 www.bankofamerica.com", "bug_id": 646302, "author": "chofmann@gmail.com", "id": 5379331, "attachment_id": 522899, "text": "Created attachment 522899\nsignatures where revocation check is top source line in the stack\n\nmore complete list of all the signatures where code from libpkix/pkix/checker/pkix_revocationchecker.c is near the top of the stack.\n\nif these aren't all the same bug or sets of bugs we can turn this into a tracker and spin off other bugs.\n\nmost of these don't have comments so code inspection might be the best place to start.\n\nnot sure if the urls will be useful either. its a wide set of user facing sites\nand \n\n   4 www.google.com\n   4 www.facebook.com\n   2 www.youtube.com\n   2 vkontakte.ru\n   2 services.addons.mozilla.org\n   2 googleads.g.doubleclick.net\n   1 xartinos.gr\n   1 www.zumi.pl\n   1 www.yatra.com\n   1 www.yahoo.co.jp\n   1 www.thaicuties.net\n   1 www.teamliquid.net\n   1 www.sbs6.nl\n   1 www.roberthalf.com\n   1 www.papuaweb.org\n   1 www.ngc.pro.vn\n   1 www.net.hr\n   1 www.moddedmustangs.com\n   1 www.mocospace.com\n   1 www.miniclip.com\n   1 www.kaskus.us\n   1 www.intel.com\n   1 www.hotmail.com\n   1 www.hao123.com\n   1 www.habbo.com.br\n   1 www.google.co.jp\n   1 www.goo.ne.jp\n   1 www.disney.ro\n   1 www.declaration.urssaf.fr\n   1 www.debeka.de\n   1 www.connect.facebook.com\n   1 www.bobtv.fr\n   1 www.bild.de\n   1 www.bankofamerica.com", "creator": "chofmann@gmail.com", "creation_time": "2011-03-30T01:07:11Z"}, {"creator": "chofmann@gmail.com", "text": "revised list of sites with the protocol added.  looks like many of these are mixed content or http\n\n   4    1 http:www.facebook.com\n   3    1 http:www.google.com\n   2    1 https:services.addons.mozilla.org\n   2    1 http:www.youtube.com\n   2    1 http:vkontakte.ru\n   2    1 http:googleads.g.doubleclick.net\n   1   37 \\N\n   1   11 \n   1    4 jar:file:\n   1    4 about:blank\n   1    2 file:\n   1    2 about:sessionrestore\n   1    1 https:www.google.com\n   1    1 https:www.declaration.urssaf.fr\n   1    1 https:www.bankofamerica.com\n   1    1 https:webmailstaff.kmutt.ac.th\n   1    1 https:mail.google.com\n   1    1 https:addons.mozilla.org\n   1    1 http:xartinos.gr\n   1    1 http:www.zumi.pl\n   1    1 http:www.yatra.com\n   1    1 http:www.yahoo.co.jp\n   1    1 http:www.thaicuties.net\n   1    1 http:www.teamliquid.net\n   1    1 http:www.sbs6.nl\n   1    1 http:www.roberthalf.com\n   1    1 http:www.papuaweb.org\n   1    1 http:www.ngc.pro.vn\n   1    1 http:www.net.hr\n   1    1 http:www.moddedmustangs.com\n   1    1 http:www.mocospace.com\n   1    1 http:www.miniclip.com\n   1    1 http:www.kaskus.us\n   1    1 http:www.intel.com\n   1    1 http:www.hotmail.com\n   1    1 http:www.hao123.com\n   1    1 http:www.habbo.com.br\n   1    1 http:www.google.co.jp\n   1    1 http:www.goo.ne.jp\n   1    1 http:www.disney.ro\n   1    1 http:www.debeka.de\n   1    1 http:www.connect.facebook.com\n   1    1 http:www.bobtv.fr\n   1    1 http:www.bild.de\n   1    1 http:us.mg4.mail.yahoo.com\n   1    1 http:tieba.baidu.com\n   1    1 http:seg.sharethis.com\n   1    1 http:reviews.cnet.com\n   1    1 http:radiow.ourtoolbar.com\n   1    1 http:poczta.interia.pl\n   1    1 http:phim.kenh56.biz\n   1    1 http:likeidea.info\n   1    1 http:headlines.yahoo.co.jp\n   1    1 http:fpdownload.adobe.com\n   1    1 http:fb.me\n   1    1 http:fast.cam.demdex.net\n   1    1 http:download.pinyin.sogou.com", "id": 5379335, "attachment_id": null, "author": "chofmann@gmail.com", "creation_time": "2011-03-30T01:11:41Z", "time": "2011-03-30T01:11:41Z", "tags": [], "is_private": false, "bug_id": 646302, "raw_text": "revised list of sites with the protocol added.  looks like many of these are mixed content or http\n\n   4    1 http:www.facebook.com\n   3    1 http:www.google.com\n   2    1 https:services.addons.mozilla.org\n   2    1 http:www.youtube.com\n   2    1 http:vkontakte.ru\n   2    1 http:googleads.g.doubleclick.net\n   1   37 \\N\n   1   11 \n   1    4 jar:file:\n   1    4 about:blank\n   1    2 file:\n   1    2 about:sessionrestore\n   1    1 https:www.google.com\n   1    1 https:www.declaration.urssaf.fr\n   1    1 https:www.bankofamerica.com\n   1    1 https:webmailstaff.kmutt.ac.th\n   1    1 https:mail.google.com\n   1    1 https:addons.mozilla.org\n   1    1 http:xartinos.gr\n   1    1 http:www.zumi.pl\n   1    1 http:www.yatra.com\n   1    1 http:www.yahoo.co.jp\n   1    1 http:www.thaicuties.net\n   1    1 http:www.teamliquid.net\n   1    1 http:www.sbs6.nl\n   1    1 http:www.roberthalf.com\n   1    1 http:www.papuaweb.org\n   1    1 http:www.ngc.pro.vn\n   1    1 http:www.net.hr\n   1    1 http:www.moddedmustangs.com\n   1    1 http:www.mocospace.com\n   1    1 http:www.miniclip.com\n   1    1 http:www.kaskus.us\n   1    1 http:www.intel.com\n   1    1 http:www.hotmail.com\n   1    1 http:www.hao123.com\n   1    1 http:www.habbo.com.br\n   1    1 http:www.google.co.jp\n   1    1 http:www.goo.ne.jp\n   1    1 http:www.disney.ro\n   1    1 http:www.debeka.de\n   1    1 http:www.connect.facebook.com\n   1    1 http:www.bobtv.fr\n   1    1 http:www.bild.de\n   1    1 http:us.mg4.mail.yahoo.com\n   1    1 http:tieba.baidu.com\n   1    1 http:seg.sharethis.com\n   1    1 http:reviews.cnet.com\n   1    1 http:radiow.ourtoolbar.com\n   1    1 http:poczta.interia.pl\n   1    1 http:phim.kenh56.biz\n   1    1 http:likeidea.info\n   1    1 http:headlines.yahoo.co.jp\n   1    1 http:fpdownload.adobe.com\n   1    1 http:fb.me\n   1    1 http:fast.cam.demdex.net\n   1    1 http:download.pinyin.sogou.com", "count": 2}, {"author": "kaie@kuix.de", "creator": "kaie@kuix.de", "time": "2011-04-15T03:58:41Z", "count": 3, "bug_id": 646302, "text": "The crashing line at\n\n2     nss3.dll     PKIX_RevocationChecker_Create    \nsecurity/nss/lib/libpkix/pkix/checker/pkix_revocationchecker.c:228\n\nhas this code:\n\ncleanup:\n    PKIX_DECREF(checker);\n\nHowever, the stack looks unexpected.\nIs it ever possible that jemalloc makes a direct call to PKIX_RevocationChecker_Create?\n\nThe implementation of PKIX_DECREF does a null check.", "id": 5411231, "attachment_id": null, "creation_time": "2011-04-15T03:58:41Z", "tags": [], "is_private": false, "raw_text": "The crashing line at\n\n2     nss3.dll     PKIX_RevocationChecker_Create    \nsecurity/nss/lib/libpkix/pkix/checker/pkix_revocationchecker.c:228\n\nhas this code:\n\ncleanup:\n    PKIX_DECREF(checker);\n\nHowever, the stack looks unexpected.\nIs it ever possible that jemalloc makes a direct call to PKIX_RevocationChecker_Create?\n\nThe implementation of PKIX_DECREF does a null check."}, {"raw_text": "Is kazahook a malware?\nThis stack looks like the flow of execution is redirected through kazahook each time we make a function call.\n\n  14 PKIX_RevocationChecker_Create hg:\n   9 Kazahook.dll@0x141d1 hg:\n   7 PKIX_RevocationChecker_Check hg:\n   5 Kazahook.dll@0x12f83 hg:\n   4 normaliz.dll@0x4efa hg:\n   4 kazahook.dll@0x1420b hg:\n   4 AcroForm.api@0x245ac1 hg:\n   3 vlsp.dll@0x7a46 hg:\n   3 GrabXpcom.dll@0x25a53 hg:\n   2 nss3.dll@0x80077 hg:\n   1 xul.dll@0x496658 hg:", "tags": [], "is_private": false, "creation_time": "2011-04-15T04:02:53Z", "text": "Is kazahook a malware?\nThis stack looks like the flow of execution is redirected through kazahook each time we make a function call.\n\n  14 PKIX_RevocationChecker_Create hg:\n   9 Kazahook.dll@0x141d1 hg:\n   7 PKIX_RevocationChecker_Check hg:\n   5 Kazahook.dll@0x12f83 hg:\n   4 normaliz.dll@0x4efa hg:\n   4 kazahook.dll@0x1420b hg:\n   4 AcroForm.api@0x245ac1 hg:\n   3 vlsp.dll@0x7a46 hg:\n   3 GrabXpcom.dll@0x25a53 hg:\n   2 nss3.dll@0x80077 hg:\n   1 xul.dll@0x496658 hg:", "id": 5411237, "attachment_id": null, "count": 4, "bug_id": 646302, "time": "2011-04-15T04:02:53Z", "author": "kaie@kuix.de", "creator": "kaie@kuix.de"}, {"tags": [], "is_private": false, "time": "2011-04-15T04:35:47Z", "count": 5, "bug_id": 646302, "raw_text": "> Is it ever possible that jemalloc makes a direct call to\n> PKIX_RevocationChecker_Create?\n\nGiven that jemalloc is not part of NSS, and PKIX_RevocationChecker_Create \nis a private internal NSS function, I'm confident that jemalloc does not \ncall the PKIX function directly.", "author": "nelson@bolyard.me", "text": "> Is it ever possible that jemalloc makes a direct call to\n> PKIX_RevocationChecker_Create?\n\nGiven that jemalloc is not part of NSS, and PKIX_RevocationChecker_Create \nis a private internal NSS function, I'm confident that jemalloc does not \ncall the PKIX function directly.", "creator": "nelson@bolyard.me", "id": 5411274, "attachment_id": null, "creation_time": "2011-04-15T04:35:47Z"}, {"author": "timeless@bemail.org", "id": 5414013, "attachment_id": null, "creator": "timeless@bemail.org", "text": "kazahook is third party code for which we don't have symbols, there's no requirement that the stack trace past its frames is remotely valid...", "creation_time": "2011-04-16T21:32:22Z", "is_private": false, "tags": [], "time": "2011-04-16T21:32:22Z", "count": 6, "raw_text": "kazahook is third party code for which we don't have symbols, there's no requirement that the stack trace past its frames is remotely valid...", "bug_id": 646302}]}}}