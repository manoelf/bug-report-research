{"bugs": {"660511": {"comments": [{"id": 5500247, "bug_id": 660511, "author": "extensiondevelopment@gmail.com", "text": "User-Agent:       Mozilla/5.0 (Windows NT 5.1; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\nBuild Identifier: \n\nHi, \n\nThe problem is that when a menuitem is disabled... a text-shadow is applied on that item... the text-shadow is making the menuitem transparent and that allows pass events to elements behind of our disabled menuitem.\n\nFor example:\n\n1 - A menupopup has a \"onmouseover\" listener.\n2 - that menupopup has a \"context\" menu.\n3 - we open the context menu.\n4 - the opened context menu has a disabled item.\n5 - when hovering the disabled item of our context menu the listener of our menupopup fires! :/\n\n\nIf by an style we remove the text-shadow... the element is hovered and no listener is fire from our behind menupopup. \nI believe the problem is the text-shadow.\n\n\nReproducible: Always\n\nSteps to Reproduce:\nPaste this into a JavaScript evaluator:\n\nvar menupopup = document.createElement('menupopup');\n\tmenupopup.setAttribute('id', 'thetoppopup1');\nfor(var i=0;i<10;i++)\n{\n  var menuitem = document.createElement('menuitem');\n\t  menuitem.setAttribute('label', 'this is the top popup'+i);\n  if(i==3)\n  {\n\tmenuitem.setAttribute('disabled', true);\n  }\nif(i==4)\n{\n\tmenuitem.setAttribute('disabled', true);\t\nmenuitem.setAttribute('style', 'text-shadow: none !important;');\n}\n  menupopup.appendChild(menuitem);\n}\n\ndocument.getElementById('main-window').appendChild(menupopup);\n\n\nwindow.content.document.body.innerHTML = '';\n\nvar menupopup = document.createElement('menupopup');\n\tmenupopup.setAttribute('onmouseover', 'window.content.document.body.innerHTML += \"lala\"');\n  for(var i=0;i<10;i++)\n  {\n\tvar menuitem = document.createElement('menuitem');\n\t\tmenuitem.setAttribute('label', 'this is the behind popup'+i);\n\t\tmenupopup.appendChild(menuitem);\n}\nmenupopup.setAttribute('context', 'thetoppopup1');\n\n\ndocument.getElementById('main-window').appendChild(menupopup);\n\nmenupopup.openPopup(document.getElementById('main-window'), '', 0,0, false);\n\n\n\n\n\nActual Results:  \nThis opens a menupopup at the topleft with some items, it has a mouseup listener that writes \"lala\" to the document body. \n\nWhen you hover the menupopup some \"lala\" are written to the document.\n\nWhen you right-click some item another menupopup opens with two items disabled.\n\nYou will notice that \"lala\" is written to the document when you hover the disabled item of the context menu.\nThere is another menuitem without text-shadow that is not firing the \"mouseup\" of the popup below.\n\n\nI tested this only on windows.", "count": 0, "raw_text": "User-Agent:       Mozilla/5.0 (Windows NT 5.1; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\nBuild Identifier: \n\nHi, \n\nThe problem is that when a menuitem is disabled... a text-shadow is applied on that item... the text-shadow is making the menuitem transparent and that allows pass events to elements behind of our disabled menuitem.\n\nFor example:\n\n1 - A menupopup has a \"onmouseover\" listener.\n2 - that menupopup has a \"context\" menu.\n3 - we open the context menu.\n4 - the opened context menu has a disabled item.\n5 - when hovering the disabled item of our context menu the listener of our menupopup fires! :/\n\n\nIf by an style we remove the text-shadow... the element is hovered and no listener is fire from our behind menupopup. \nI believe the problem is the text-shadow.\n\n\nReproducible: Always\n\nSteps to Reproduce:\nPaste this into a JavaScript evaluator:\n\nvar menupopup = document.createElement('menupopup');\n\tmenupopup.setAttribute('id', 'thetoppopup1');\nfor(var i=0;i<10;i++)\n{\n  var menuitem = document.createElement('menuitem');\n\t  menuitem.setAttribute('label', 'this is the top popup'+i);\n  if(i==3)\n  {\n\tmenuitem.setAttribute('disabled', true);\n  }\nif(i==4)\n{\n\tmenuitem.setAttribute('disabled', true);\t\nmenuitem.setAttribute('style', 'text-shadow: none !important;');\n}\n  menupopup.appendChild(menuitem);\n}\n\ndocument.getElementById('main-window').appendChild(menupopup);\n\n\nwindow.content.document.body.innerHTML = '';\n\nvar menupopup = document.createElement('menupopup');\n\tmenupopup.setAttribute('onmouseover', 'window.content.document.body.innerHTML += \"lala\"');\n  for(var i=0;i<10;i++)\n  {\n\tvar menuitem = document.createElement('menuitem');\n\t\tmenuitem.setAttribute('label', 'this is the behind popup'+i);\n\t\tmenupopup.appendChild(menuitem);\n}\nmenupopup.setAttribute('context', 'thetoppopup1');\n\n\ndocument.getElementById('main-window').appendChild(menupopup);\n\nmenupopup.openPopup(document.getElementById('main-window'), '', 0,0, false);\n\n\n\n\n\nActual Results:  \nThis opens a menupopup at the topleft with some items, it has a mouseup listener that writes \"lala\" to the document body. \n\nWhen you hover the menupopup some \"lala\" are written to the document.\n\nWhen you right-click some item another menupopup opens with two items disabled.\n\nYou will notice that \"lala\" is written to the document when you hover the disabled item of the context menu.\nThere is another menuitem without text-shadow that is not firing the \"mouseup\" of the popup below.\n\n\nI tested this only on windows.", "time": "2011-05-29T03:40:19Z", "creation_time": "2011-05-29T03:40:19Z", "is_private": false, "creator": "extensiondevelopment@gmail.com", "tags": [], "attachment_id": null}, {"time": "2011-05-29T03:52:16Z", "raw_text": "Another way to test this bug.\n\nFirefox 4:\n\nClick into the \"Bookmarks\" at the menubar.\n\nThe context menu of some items there contains \"Cut\" and \"Delete\" disabled.\n\nMove the mouse hover \"Cut\" or \"Delete\" and notices that the background of that disabled items blinks quickly some seconds.", "author": "extensiondevelopment@gmail.com", "count": 1, "text": "Another way to test this bug.\n\nFirefox 4:\n\nClick into the \"Bookmarks\" at the menubar.\n\nThe context menu of some items there contains \"Cut\" and \"Delete\" disabled.\n\nMove the mouse hover \"Cut\" or \"Delete\" and notices that the background of that disabled items blinks quickly some seconds.", "id": 5500252, "bug_id": 660511, "attachment_id": null, "tags": [], "creator": "extensiondevelopment@gmail.com", "is_private": false, "creation_time": "2011-05-29T03:52:16Z"}]}}, "comments": {}}