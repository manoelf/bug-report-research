{"comments": {}, "bugs": {"690805": {"comments": [{"author": "rlefevre@gmail.com", "creator": "rlefevre@gmail.com", "bug_id": 690805, "id": 5749784, "tags": [], "count": 0, "is_private": false, "attachment_id": 563761, "time": "2011-09-30T16:49:03Z", "text": "Created attachment 563761\nlightning-notify-attendees.patch\n\nUser Agent: Mozilla/5.0 (X11; Linux i686; rv:7.0) Gecko/20100101 Firefox/7.0\nBuild ID: 20110925183332\n\nSteps to reproduce:\n\nUsing lightning-exchange-provider:\nhttp://gitorious.org/lightning-exchange-provider/pages/Home\n\n- Create an event\n- Add attendees\n\n\nActual results:\n\nOnce attendees are added, the \"Notify Attendees\" checkbox is checked, but disabled (grayed out). When saving and closing the event, no notification email is sent.\n\n\nExpected results:\n\n- \"Notify checkbox\" should be enabled\n- Notification emails should be sent if the checkbox is checked when the event is saved\n\nAfter having checked the lightning-exchange-provider source code, it seems that the issue comes from lightning: lightning disables the checkbox if the add-on returns true to canNotifyAttendees(). The attached patch fixes the problem with this addon, it has not been tested with other providers.", "raw_text": "User Agent: Mozilla/5.0 (X11; Linux i686; rv:7.0) Gecko/20100101 Firefox/7.0\nBuild ID: 20110925183332\n\nSteps to reproduce:\n\nUsing lightning-exchange-provider:\nhttp://gitorious.org/lightning-exchange-provider/pages/Home\n\n- Create an event\n- Add attendees\n\n\nActual results:\n\nOnce attendees are added, the \"Notify Attendees\" checkbox is checked, but disabled (grayed out). When saving and closing the event, no notification email is sent.\n\n\nExpected results:\n\n- \"Notify checkbox\" should be enabled\n- Notification emails should be sent if the checkbox is checked when the event is saved\n\nAfter having checked the lightning-exchange-provider source code, it seems that the issue comes from lightning: lightning disables the checkbox if the add-on returns true to canNotifyAttendees(). The attached patch fixes the problem with this addon, it has not been tested with other providers.", "creation_time": "2011-09-30T16:49:03Z"}, {"creator": "rlefevre@gmail.com", "author": "rlefevre@gmail.com", "text": "Or do I misunderstand the sense of canNotifyAttendees() function and the add-on should return false if it can handle itself the notification (as this is the case for this add-on) ?", "time": "2011-09-30T17:24:50Z", "attachment_id": null, "creation_time": "2011-09-30T17:24:50Z", "raw_text": "Or do I misunderstand the sense of canNotifyAttendees() function and the add-on should return false if it can handle itself the notification (as this is the case for this add-on) ?", "bug_id": 690805, "count": 1, "is_private": false, "tags": [], "id": 5749901}, {"author": "ssitter@gmail.com", "creator": "ssitter@gmail.com", "time": "2011-09-30T22:48:45Z", "attachment_id": null, "text": "You can search and read the Lightning source code at http://mxr.mozilla.org/comm-central/\n\nFrom a quick view it seems that canNotifyAttendees()==true means that the calendar provider/server will take care of sending the ivitations. Therefore the Lightning option is disabled. canNotifyAttendees()==false means that Lightning itself will send the invitation message.", "raw_text": "You can search and read the Lightning source code at http://mxr.mozilla.org/comm-central/\n\nFrom a quick view it seems that canNotifyAttendees()==true means that the calendar provider/server will take care of sending the ivitations. Therefore the Lightning option is disabled. canNotifyAttendees()==false means that Lightning itself will send the invitation message.", "creation_time": "2011-09-30T22:48:45Z", "bug_id": 690805, "id": 5750985, "tags": [], "count": 2, "is_private": false}, {"author": "mozilla@felixmoeller.de", "creator": "mozilla@felixmoeller.de", "creation_time": "2011-10-02T10:20:29Z", "raw_text": "I am not sure if this patch is correct.\n\nMy understanding:\nIf the provider says canNotifyAttendees() -> true, then the checkbox is grayed out, as it is not within the power of lightning to handle the situation.\n\nHowever if canNotifyAttendees() -> false, then Lightning can decide wether to send or not to send the invitation and therefore it is not disabled.", "time": "2011-10-02T10:20:29Z", "attachment_id": null, "text": "I am not sure if this patch is correct.\n\nMy understanding:\nIf the provider says canNotifyAttendees() -> true, then the checkbox is grayed out, as it is not within the power of lightning to handle the situation.\n\nHowever if canNotifyAttendees() -> false, then Lightning can decide wether to send or not to send the invitation and therefore it is not disabled.", "id": 5752575, "tags": [], "is_private": false, "count": 3, "bug_id": 690805}, {"creator": "rlefevre@gmail.com", "author": "rlefevre@gmail.com", "tags": [], "is_private": false, "count": 4, "id": 5753132, "bug_id": 690805, "creation_time": "2011-10-02T22:09:58Z", "raw_text": "Ok, so this patch is obviously not correct.\n\nI got it wrong because of the lightning-exchange-provider add-on expectations.\nIt correctly returns \"true\" to canNotifyAttendees() because it can handle itself notifications. It however checks for X-MOZ-SEND-INVITATIONS property before sending notifications, and sends them only if it is set to \"TRUE\". This does not work as lightning deletes this property if canNotifyAttendees() returns true (more exactly if the notifyCheckbox is disabled, which happens once canNotifyAttendees() returns true).\n\nBut the add-on behavior still seems to make sense. Whatever sends the notification, lightning or the add-on itself, the user should be able to choose with the checkbox if he wants them or not. By returning true to canNotifyAttendees(), the checkbox is disabled (grayed out), preventing the user to choose (but still see it).\n\nI therefore don't understand why the canNotifyAttendees() is linked to the notifyCheckbox. If an add-on cannot rely on it to know if a user wants notifications, how is it supposed to get this information ? (relying on X-MOZ-SEND-INVITATIONS is however probably wrong as it implies that imip.identify is also defined, which is probably not required if the add-on handles itself notifications).\n\nWhy not always let this checkbox enabled, whatever the canNotifyAttendees() status, and let lightning or an add-on use its status. (The only corner case I see then is if an add-on handles notifications, but cannot prevent them, the checkbox is then meaningless, but does such an addon exist ?)\n\nWhat do you think ?", "text": "Ok, so this patch is obviously not correct.\n\nI got it wrong because of the lightning-exchange-provider add-on expectations.\nIt correctly returns \"true\" to canNotifyAttendees() because it can handle itself notifications. It however checks for X-MOZ-SEND-INVITATIONS property before sending notifications, and sends them only if it is set to \"TRUE\". This does not work as lightning deletes this property if canNotifyAttendees() returns true (more exactly if the notifyCheckbox is disabled, which happens once canNotifyAttendees() returns true).\n\nBut the add-on behavior still seems to make sense. Whatever sends the notification, lightning or the add-on itself, the user should be able to choose with the checkbox if he wants them or not. By returning true to canNotifyAttendees(), the checkbox is disabled (grayed out), preventing the user to choose (but still see it).\n\nI therefore don't understand why the canNotifyAttendees() is linked to the notifyCheckbox. If an add-on cannot rely on it to know if a user wants notifications, how is it supposed to get this information ? (relying on X-MOZ-SEND-INVITATIONS is however probably wrong as it implies that imip.identify is also defined, which is probably not required if the add-on handles itself notifications).\n\nWhy not always let this checkbox enabled, whatever the canNotifyAttendees() status, and let lightning or an add-on use its status. (The only corner case I see then is if an add-on handles notifications, but cannot prevent them, the checkbox is then meaningless, but does such an addon exist ?)\n\nWhat do you think ?", "attachment_id": null, "time": "2011-10-02T22:09:58Z"}, {"raw_text": "Note: this seems similar to bug #580787 request.", "creation_time": "2011-10-04T22:27:04Z", "text": "Note: this seems similar to bug #580787 request.", "time": "2011-10-04T22:27:04Z", "attachment_id": null, "is_private": false, "count": 5, "tags": [], "id": 5758877, "bug_id": 690805, "creator": "rlefevre@gmail.com", "author": "rlefevre@gmail.com"}, {"author": "philipp@bugzilla.kewis.ch", "creator": "philipp@bugzilla.kewis.ch", "bug_id": 690805, "id": 5760339, "tags": [], "is_private": false, "count": 6, "attachment_id": null, "time": "2011-10-05T15:17:03Z", "text": "We do not want to be setting our X-Prop on more events than needed. If at all possible, I'd rather see it go away.\n\nCould you elaborate if this is something that needs to be fixed in Lightning or in the exchange provider?\n\nIf we want to make broader use of the notify attendees checkbox, then we need to make sure it works for all cases (all providers, server vs client side scheduling, etc)", "creation_time": "2011-10-05T15:17:03Z", "raw_text": "We do not want to be setting our X-Prop on more events than needed. If at all possible, I'd rather see it go away.\n\nCould you elaborate if this is something that needs to be fixed in Lightning or in the exchange provider?\n\nIf we want to make broader use of the notify attendees checkbox, then we need to make sure it works for all cases (all providers, server vs client side scheduling, etc)"}, {"author": "rlefevre@gmail.com", "creator": "rlefevre@gmail.com", "bug_id": 690805, "id": 5761841, "count": 7, "is_private": false, "tags": [], "attachment_id": null, "time": "2011-10-05T22:21:45Z", "text": "Actually both Lightning and providers need to be fixed:\n- Lightning to offer a proper way for providers to know if notification is wanted when they want to handle it themselves\n- providers to correctly use this information\n\nAs I'm new to lightning source code, I have to dive deeper in it in the hope to be able to propose an acceptable solution. X-MOZ-SEND-INVITATIONS use and/or interpretation seems confused at this time, and I agree that it would not be regrettable to see it disappear. From the current repository status, it seems useless to providers (as it is always set to null when they handle notification), but at least iTIP may have a proper use for it.", "raw_text": "Actually both Lightning and providers need to be fixed:\n- Lightning to offer a proper way for providers to know if notification is wanted when they want to handle it themselves\n- providers to correctly use this information\n\nAs I'm new to lightning source code, I have to dive deeper in it in the hope to be able to propose an acceptable solution. X-MOZ-SEND-INVITATIONS use and/or interpretation seems confused at this time, and I agree that it would not be regrettable to see it disappear. From the current repository status, it seems useless to providers (as it is always set to null when they handle notification), but at least iTIP may have a proper use for it.", "creation_time": "2011-10-05T22:21:45Z"}, {"creator": "philipp@bugzilla.kewis.ch", "author": "philipp@bugzilla.kewis.ch", "text": "IIRC then the notify attendees checkbox was mainly used by the WCAP provider. You might want to check there. If you'd like to chat about this via IRC, you can find me on irc.mozilla.org in the #calendar channel. My nickname is Fallen.", "attachment_id": null, "time": "2011-10-06T07:04:34Z", "creation_time": "2011-10-06T07:04:34Z", "raw_text": "IIRC then the notify attendees checkbox was mainly used by the WCAP provider. You might want to check there. If you'd like to chat about this via IRC, you can find me on irc.mozilla.org in the #calendar channel. My nickname is Fallen.", "bug_id": 690805, "tags": [], "count": 8, "is_private": false, "id": 5762695}, {"creator": "mozilla@felixmoeller.de", "author": "mozilla@felixmoeller.de", "bug_id": 690805, "count": 9, "is_private": false, "tags": [], "id": 5886112, "text": "This is pretty much the same as #580787 and for WCAP there is #571377 ...\n\nI am not sure if the CalDAV provider has any chance to influence my Apple Calendar Server in sending the message ...", "time": "2011-12-01T20:06:37Z", "attachment_id": null, "raw_text": "This is pretty much the same as #580787 and for WCAP there is #571377 ...\n\nI am not sure if the CalDAV provider has any chance to influence my Apple Calendar Server in sending the message ...", "creation_time": "2011-12-01T20:06:37Z"}, {"tags": [], "count": 10, "is_private": false, "id": 5886115, "bug_id": 690805, "creation_time": "2011-12-01T20:07:05Z", "raw_text": "This is pretty much the same as bug #580787 and for WCAP there is bug #571377 ...", "text": "This is pretty much the same as bug #580787 and for WCAP there is bug #571377 ...", "time": "2011-12-01T20:07:05Z", "attachment_id": null, "creator": "mozilla@felixmoeller.de", "author": "mozilla@felixmoeller.de"}, {"bug_id": 690805, "id": 9394149, "is_private": false, "count": 11, "tags": [], "attachment_id": null, "time": "2014-10-02T14:48:29Z", "text": "Still reproducible with Thunderbird 31.1.2, Lightning 3.3.1, and Provider for Google Calendar 0.32\n\nI need to be able to UNCHECK the \"Notify Attendees\" box, so that all participants on an event don't get spammed.", "creation_time": "2014-10-02T14:48:29Z", "raw_text": "Still reproducible with Thunderbird 31.1.2, Lightning 3.3.1, and Provider for Google Calendar 0.32\n\nI need to be able to UNCHECK the \"Notify Attendees\" box, so that all participants on an event don't get spammed.", "author": "dan224@gmail.com", "creator": "dan224@gmail.com"}, {"raw_text": "Same here. Interacting with Tine2.0 iCal backend, I'm not able at all to send notifications (\"Notify attendees box greyed and checked... but no email is sent).", "creation_time": "2014-11-24T13:21:08Z", "time": "2014-11-24T13:21:08Z", "attachment_id": null, "text": "Same here. Interacting with Tine2.0 iCal backend, I'm not able at all to send notifications (\"Notify attendees box greyed and checked... but no email is sent).", "id": 9628760, "tags": [], "count": 12, "is_private": false, "bug_id": 690805, "author": "emmanuel@engelhart.org", "creator": "emmanuel@engelhart.org"}, {"creator": "jorohr@gmail.com", "author": "jorohr@gmail.com", "raw_text": "Seeing the same her, with a caldav calendar (Netxcloud), other Caldav clients have no problems with it. Until recently it has been working though.", "creation_time": "2017-04-20T15:47:03Z", "text": "Seeing the same her, with a caldav calendar (Netxcloud), other Caldav clients have no problems with it. Until recently it has been working though.", "attachment_id": null, "time": "2017-04-20T15:47:03Z", "is_private": false, "count": 13, "tags": [], "id": 12251333, "bug_id": 690805}]}}}