{"bugs": {"1148032": {"comments": [{"count": 0, "tags": [], "creation_time": "2015-03-26T18:43:24Z", "id": 10082838, "time": "2015-03-26T18:43:24Z", "bug_id": 1148032, "is_private": false, "author": "sdna.muneaki.nishimura@gmail.com", "text": "User Agent: Mozilla/5.0 (Windows NT 6.2; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2342.2 Safari/537.36\n\nSteps to reproduce:\n\n1. Open Firefox Nightly and open following two pages on both normal browsing mode and private browsing mode.\n    Sender: http://csrf.jp/bc/sender.html\n    Receiver: http://csrf.jp/bc/receiver.html\n2. Push 'Send Message' button of Sender on normal mode. Then, the message is sent to Receiver on private mode.\n3. On the contrary, push 'Send Message' button of Sender on private mode. Then, the message is sent to Receiver on normal mode.\n\n\n\nActual results:\n\nBroadcastChannel message is sent with bypassing private browsing mode.\n\n\n\nExpected results:\n\nThe message sent from Browser app should not be delivered beyond private mode context.\nNote that this bug was origiinally reported in [Issue 2] in Bug 1147778.", "attachment_id": null, "creator": "sdna.muneaki.nishimura@gmail.com", "raw_text": "User Agent: Mozilla/5.0 (Windows NT 6.2; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2342.2 Safari/537.36\n\nSteps to reproduce:\n\n1. Open Firefox Nightly and open following two pages on both normal browsing mode and private browsing mode.\n    Sender: http://csrf.jp/bc/sender.html\n    Receiver: http://csrf.jp/bc/receiver.html\n2. Push 'Send Message' button of Sender on normal mode. Then, the message is sent to Receiver on private mode.\n3. On the contrary, push 'Send Message' button of Sender on private mode. Then, the message is sent to Receiver on normal mode.\n\n\n\nActual results:\n\nBroadcastChannel message is sent with bypassing private browsing mode.\n\n\n\nExpected results:\n\nThe message sent from Browser app should not be delivered beyond private mode context.\nNote that this bug was origiinally reported in [Issue 2] in Bug 1147778."}, {"creation_time": "2015-03-30T15:03:10Z", "id": 10095630, "count": 1, "tags": [], "creator": "ehsan.akhgari@gmail.com", "raw_text": "I don't think this bug is security sensitive, but we should definitely fix it, by ensuring that broadcasts from private windows are sandboxed from non-private ones, and vice versa.\n\nAndrea, do you have cycles for this?", "attachment_id": null, "text": "I don't think this bug is security sensitive, but we should definitely fix it, by ensuring that broadcasts from private windows are sandboxed from non-private ones, and vice versa.\n\nAndrea, do you have cycles for this?", "is_private": false, "author": "ehsan.akhgari@gmail.com", "bug_id": 1148032, "time": "2015-03-30T15:03:10Z"}, {"attachment_id": 8585602, "raw_text": "", "creator": "amarchesini@mozilla.com", "time": "2015-03-30T17:37:27Z", "bug_id": 1148032, "text": "Created attachment 8585602\nbc.patch", "author": "amarchesini@mozilla.com", "is_private": false, "id": 10096466, "creation_time": "2015-03-30T17:37:27Z", "tags": [], "count": 2}, {"is_private": false, "author": "ehsan.akhgari@gmail.com", "text": "Comment on attachment 8585602\nbc.patch\n\nReview of attachment 8585602:\n-----------------------------------------------------------------\n\nThis also needs tests.\n\n::: dom/broadcastchannel/BroadcastChannelChild.h\n@@ +36,5 @@\n>      return mActorDestroyed;\n>    }\n>  \n>  private:\n> +  BroadcastChannelChild(const nsAString& aOrigin);\n\nThis looks mostly good, but I don't understand this part.  Why are you dropping the channel argument here?", "tags": [], "time": "2015-03-30T17:44:19Z", "bug_id": 1148032, "count": 3, "raw_text": "Review of attachment 8585602:\n-----------------------------------------------------------------\n\nThis also needs tests.\n\n::: dom/broadcastchannel/BroadcastChannelChild.h\n@@ +36,5 @@\n>      return mActorDestroyed;\n>    }\n>  \n>  private:\n> +  BroadcastChannelChild(const nsAString& aOrigin);\n\nThis looks mostly good, but I don't understand this part.  Why are you dropping the channel argument here?", "id": 10096504, "creator": "ehsan.akhgari@gmail.com", "creation_time": "2015-03-30T17:44:19Z", "attachment_id": 8585602}, {"time": "2015-03-31T13:51:58Z", "bug_id": 1148032, "count": 4, "tags": [], "author": "amarchesini@mozilla.com", "is_private": false, "text": "> > +  BroadcastChannelChild(const nsAString& aOrigin);\n> \n> This looks mostly good, but I don't understand this part.  Why are you\n> dropping the channel argument here?\n\nbecause this object doesn't use it. So why have it as argument?", "attachment_id": null, "id": 10100411, "creation_time": "2015-03-31T13:51:58Z", "creator": "amarchesini@mozilla.com", "raw_text": "> > +  BroadcastChannelChild(const nsAString& aOrigin);\n> \n> This looks mostly good, but I don't understand this part.  Why are you\n> dropping the channel argument here?\n\nbecause this object doesn't use it. So why have it as argument?"}, {"text": "Comment on attachment 8585602\nbc.patch\n\nI promise I'll write a mochitest. I tried but I'm having problems to have 2 windows opened at the same time and keep 2 broadcastchannel objects alive at the same time.\nThe test will come in a separate patch.", "author": "amarchesini@mozilla.com", "is_private": false, "count": 5, "time": "2015-03-31T16:01:13Z", "bug_id": 1148032, "tags": [], "creator": "amarchesini@mozilla.com", "id": 10101143, "creation_time": "2015-03-31T16:01:13Z", "raw_text": "I promise I'll write a mochitest. I tried but I'm having problems to have 2 windows opened at the same time and keep 2 broadcastchannel objects alive at the same time.\nThe test will come in a separate patch.", "attachment_id": 8585602}, {"creator": "amarchesini@mozilla.com", "raw_text": "test included", "attachment_id": 8586171, "text": "Created attachment 8586171\nbc.patch\n\ntest included", "author": "amarchesini@mozilla.com", "is_private": false, "time": "2015-03-31T16:21:58Z", "bug_id": 1148032, "id": 10101234, "creation_time": "2015-03-31T16:21:58Z", "count": 6, "tags": []}, {"tags": [], "count": 7, "creation_time": "2015-03-31T18:00:57Z", "id": 10101788, "time": "2015-03-31T18:00:57Z", "bug_id": 1148032, "is_private": false, "author": "ehsan.akhgari@gmail.com", "text": "Comment on attachment 8586171\nbc.patch\n\nReview of attachment 8586171:\n-----------------------------------------------------------------\n\n::: dom/broadcastchannel/tests/test_broadcastchannel_private_browsing.html\n@@ +52,5 @@\n> +\n> +function check(msg, private) {\n> +  is(msg, private ? \"private\" : \"public\", \"Correct context!\");\n> +  gCounter++;\n> +info(gCounter);\n\nStray debugging line?", "attachment_id": 8586171, "raw_text": "Review of attachment 8586171:\n-----------------------------------------------------------------\n\n::: dom/broadcastchannel/tests/test_broadcastchannel_private_browsing.html\n@@ +52,5 @@\n> +\n> +function check(msg, private) {\n> +  is(msg, private ? \"private\" : \"public\", \"Correct context!\");\n> +  gCounter++;\n> +info(gCounter);\n\nStray debugging line?", "creator": "ehsan.akhgari@gmail.com"}, {"bug_id": 1148032, "time": "2015-03-31T19:15:47Z", "author": "amarchesini@mozilla.com", "is_private": false, "text": "https://treeherder.mozilla.org/#/jobs?repo=try&revision=eeec4b2f0249", "attachment_id": null, "creator": "amarchesini@mozilla.com", "raw_text": "https://treeherder.mozilla.org/#/jobs?repo=try&revision=eeec4b2f0249", "count": 8, "tags": [], "id": 10102305, "creation_time": "2015-03-31T19:15:47Z"}, {"tags": [], "count": 9, "bug_id": 1148032, "time": "2015-03-31T19:36:40Z", "text": "*** Bug 1147778 has been marked as a duplicate of this bug. ***", "is_private": false, "author": "amarchesini@mozilla.com", "attachment_id": null, "raw_text": "", "id": 10102408, "creation_time": "2015-03-31T19:36:40Z", "creator": "amarchesini@mozilla.com"}, {"tags": [], "count": 10, "id": 10102741, "creation_time": "2015-03-31T20:37:40Z", "text": "I fixed the oth failure and here the push:\n\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/976f64497fbc", "author": "amarchesini@mozilla.com", "is_private": false, "time": "2015-03-31T20:37:40Z", "bug_id": 1148032, "raw_text": "I fixed the oth failure and here the push:\n\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/976f64497fbc", "creator": "amarchesini@mozilla.com", "attachment_id": null}, {"tags": [], "count": 11, "id": 10103303, "creation_time": "2015-03-31T21:08:24Z", "time": "2015-03-31T21:08:24Z", "bug_id": 1148032, "text": "I had to back this out for static analysis bustage: https://hg.mozilla.org/integration/mozilla-inbound/rev/75f95cbc0530\n\nhttps://treeherder.mozilla.org/logviewer.html#?job_id=8305451&repo=mozilla-inbound", "is_private": false, "author": "kwierso@gmail.com", "attachment_id": null, "raw_text": "I had to back this out for static analysis bustage: https://hg.mozilla.org/integration/mozilla-inbound/rev/75f95cbc0530\n\nhttps://treeherder.mozilla.org/logviewer.html#?job_id=8305451&repo=mozilla-inbound", "creator": "kwierso@gmail.com"}, {"creation_time": "2015-03-31T21:13:21Z", "id": 10103334, "tags": [], "count": 12, "raw_text": "https://hg.mozilla.org/integration/mozilla-inbound/rev/6b886fbb3e48", "creator": "amarchesini@mozilla.com", "attachment_id": null, "is_private": false, "author": "amarchesini@mozilla.com", "text": "https://hg.mozilla.org/integration/mozilla-inbound/rev/6b886fbb3e48", "bug_id": 1148032, "time": "2015-03-31T21:13:21Z"}, {"attachment_id": null, "raw_text": "And out again for mochitest-chrome orange on b2g emulators: https://hg.mozilla.org/integration/mozilla-inbound/rev/522cf568a364\n\nhttps://treeherder.mozilla.org/logviewer.html#?job_id=8312535&repo=mozilla-inbound", "creator": "kwierso@gmail.com", "id": 10103795, "creation_time": "2015-03-31T22:49:00Z", "tags": [], "time": "2015-03-31T22:49:00Z", "bug_id": 1148032, "count": 13, "is_private": false, "author": "kwierso@gmail.com", "text": "And out again for mochitest-chrome orange on b2g emulators: https://hg.mozilla.org/integration/mozilla-inbound/rev/522cf568a364\n\nhttps://treeherder.mozilla.org/logviewer.html#?job_id=8312535&repo=mozilla-inbound"}, {"creator": "amarchesini@mozilla.com", "raw_text": "https://treeherder.mozilla.org/#/jobs?repo=try&revision=249ddd79d9e2\n\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/128b6d47fe8a", "attachment_id": null, "text": "https://treeherder.mozilla.org/#/jobs?repo=try&revision=249ddd79d9e2\n\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/128b6d47fe8a", "is_private": false, "author": "amarchesini@mozilla.com", "bug_id": 1148032, "time": "2015-04-01T11:42:34Z", "creation_time": "2015-04-01T11:42:34Z", "id": 10105562, "count": 14, "tags": []}, {"bug_id": 1148032, "time": "2015-04-01T16:55:31Z", "author": "ryanvm@gmail.com", "is_private": false, "text": "https://hg.mozilla.org/mozilla-central/rev/128b6d47fe8a\n\nDo we want this on Aurora/Beta?", "attachment_id": null, "raw_text": "https://hg.mozilla.org/mozilla-central/rev/128b6d47fe8a\n\nDo we want this on Aurora/Beta?", "creator": "ryanvm@gmail.com", "tags": [], "count": 15, "id": 10106876, "creation_time": "2015-04-01T16:55:31Z"}, {"attachment_id": 8586171, "raw_text": "Approval Request Comment\n[Feature/regressing bug #]: 966439\n[User impact if declined]: BroadcastChannel messages bypass the private browsing sandbox.\n[Describe test coverage new/current, TreeHerder]: treeharder tests are included.\n[Risks and why]: the patch is quite simple.\n[String/UUID change made/needed]: none", "creator": "amarchesini@mozilla.com", "bug_id": 1148032, "time": "2015-04-01T20:05:56Z", "is_private": false, "author": "amarchesini@mozilla.com", "text": "Comment on attachment 8586171\nbc.patch\n\nApproval Request Comment\n[Feature/regressing bug #]: 966439\n[User impact if declined]: BroadcastChannel messages bypass the private browsing sandbox.\n[Describe test coverage new/current, TreeHerder]: treeharder tests are included.\n[Risks and why]: the patch is quite simple.\n[String/UUID change made/needed]: none", "id": 10107839, "creation_time": "2015-04-01T20:05:56Z", "tags": [], "count": 16}, {"text": "Comment on attachment 8586171\nbc.patch\n\nshould be in 38b2", "is_private": false, "author": "sledru@mozilla.com", "bug_id": 1148032, "time": "2015-04-02T19:20:47Z", "creator": "sledru@mozilla.com", "raw_text": "should be in 38b2", "attachment_id": 8586171, "count": 17, "tags": [], "id": 10112902, "creation_time": "2015-04-02T19:20:47Z"}, {"tags": [], "count": 18, "creation_time": "2015-04-02T20:07:29Z", "id": 10113125, "author": "ryanvm@gmail.com", "is_private": false, "text": "https://hg.mozilla.org/releases/mozilla-aurora/rev/9ededdba9f92", "bug_id": 1148032, "time": "2015-04-02T20:07:29Z", "raw_text": "https://hg.mozilla.org/releases/mozilla-aurora/rev/9ededdba9f92", "creator": "ryanvm@gmail.com", "attachment_id": null}, {"attachment_id": null, "raw_text": "https://hg.mozilla.org/releases/mozilla-beta/rev/125623fcc804", "creation_time": "2015-04-03T20:37:25Z", "creator": "ryanvm@gmail.com", "id": 10117430, "tags": [], "count": 19, "time": "2015-04-03T20:37:25Z", "bug_id": 1148032, "text": "https://hg.mozilla.org/releases/mozilla-beta/rev/125623fcc804", "author": "ryanvm@gmail.com", "is_private": false}, {"id": 10122524, "creation_time": "2015-04-06T20:13:05Z", "tags": [], "count": 20, "attachment_id": null, "raw_text": "Minusing this for bounty because it is a low rated security issue.", "creator": "albill@gmail.com", "bug_id": 1148032, "time": "2015-04-06T20:13:05Z", "author": "albill@gmail.com", "is_private": false, "text": "Minusing this for bounty because it is a low rated security issue."}, {"text": "If bug 966439 is the regressor, this is Firefox 38 and higher only, isn't it?", "author": "albill@gmail.com", "is_private": false, "bug_id": 1148032, "time": "2015-05-05T22:09:20Z", "creator": "albill@gmail.com", "raw_text": "If bug 966439 is the regressor, this is Firefox 38 and higher only, isn't it?", "attachment_id": null, "count": 21, "tags": [], "creation_time": "2015-05-05T22:09:20Z", "id": 10234483}, {"count": 22, "tags": [], "creation_time": "2015-05-05T22:10:16Z", "id": 10234488, "time": "2015-05-05T22:10:16Z", "bug_id": 1148032, "author": "albill@gmail.com", "is_private": false, "text": "As in, we never shipped this publicly in Firefox 37...", "attachment_id": null, "creator": "albill@gmail.com", "raw_text": "As in, we never shipped this publicly in Firefox 37..."}, {"attachment_id": null, "id": 10234644, "creator": "sdna.muneaki.nishimura@gmail.com", "creation_time": "2015-05-05T22:49:41Z", "raw_text": "(In reply to Al Billings [:abillings] from comment #21)\n> If bug 966439 is the regressor, this is Firefox 38 and higher only, isn't it?\n\nYes, correct.\nAs far as I investigated, The BroadcastChannel API is available from Firefox 38+.\nIt cannot be activated in Firefox 37 and there seems not to be any flags for enabling it in about:config.", "count": 23, "time": "2015-05-05T22:49:41Z", "bug_id": 1148032, "tags": [], "text": "(In reply to Al Billings [:abillings] from comment #21)\n> If bug 966439 is the regressor, this is Firefox 38 and higher only, isn't it?\n\nYes, correct.\nAs far as I investigated, The BroadcastChannel API is available from Firefox 38+.\nIt cannot be activated in Firefox 37 and there seems not to be any flags for enabling it in about:config.", "author": "sdna.muneaki.nishimura@gmail.com", "is_private": false}, {"time": "2015-05-05T23:07:34Z", "bug_id": 1148032, "author": "albill@gmail.com", "is_private": false, "text": "Thanks.", "attachment_id": null, "creator": "albill@gmail.com", "raw_text": "Thanks.", "count": 24, "tags": [], "creation_time": "2015-05-05T23:07:34Z", "id": 10234710}]}}, "comments": {}}