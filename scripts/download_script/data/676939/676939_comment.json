{"comments": {}, "bugs": {"676939": {"comments": [{"author": "jmuizelaar@mozilla.com", "creator": "jmuizelaar@mozilla.com", "creation_time": "2011-08-05T21:01:07Z", "raw_text": "I was looking in about:memory and saw 13MB for mjit code for tbpl.mozilla.org. I expect this was because I had a lot of tbpl tabs open. It would be nice if these tabs could share what's likely the same mjit code.\n\nI talked with shaver and he had some idea about how this might be possible.", "attachment_id": null, "time": "2011-08-05T21:01:07Z", "text": "I was looking in about:memory and saw 13MB for mjit code for tbpl.mozilla.org. I expect this was because I had a lot of tbpl tabs open. It would be nice if these tabs could share what's likely the same mjit code.\n\nI talked with shaver and he had some idea about how this might be possible.", "id": 5636732, "is_private": false, "count": 0, "tags": [], "bug_id": 676939}, {"creation_time": "2011-08-05T21:26:28Z", "raw_text": "We share jitted code within a compartment so, assuming all your tbpl.mozilla.org tabs are being properly put in the same compartment (which it sounds like they are), then we should be reusing those compiled scripts.  A separate question is why tbpl generates 13MB of mjit code.", "attachment_id": null, "time": "2011-08-05T21:26:28Z", "text": "We share jitted code within a compartment so, assuming all your tbpl.mozilla.org tabs are being properly put in the same compartment (which it sounds like they are), then we should be reusing those compiled scripts.  A separate question is why tbpl generates 13MB of mjit code.", "id": 5636784, "tags": [], "is_private": false, "count": 1, "bug_id": 676939, "author": "mail@lukewagner.name", "creator": "mail@lukewagner.name"}, {"attachment_id": null, "time": "2011-08-05T21:28:37Z", "text": "Oh wait, I'm totally wrong.  Each of those pages will compile its own copy of the JSScript so while compartment-per-domain doesn't *prevent* sharing code, we aren't.", "creation_time": "2011-08-05T21:28:37Z", "raw_text": "Oh wait, I'm totally wrong.  Each of those pages will compile its own copy of the JSScript so while compartment-per-domain doesn't *prevent* sharing code, we aren't.", "bug_id": 676939, "id": 5636788, "is_private": false, "count": 2, "tags": [], "author": "mail@lukewagner.name", "creator": "mail@lukewagner.name"}, {"text": "So the biggest issue I ran into last time I looked at this stuff was COMPILE_N_GO...", "time": "2011-08-06T02:00:55Z", "attachment_id": null, "raw_text": "So the biggest issue I ran into last time I looked at this stuff was COMPILE_N_GO...", "creation_time": "2011-08-06T02:00:55Z", "bug_id": 676939, "count": 3, "is_private": false, "tags": [], "id": 5637225, "creator": "bzbarsky@mit.edu", "author": "bzbarsky@mit.edu"}, {"id": 5637260, "count": 4, "is_private": false, "tags": [], "bug_id": 676939, "creation_time": "2011-08-06T02:51:36Z", "raw_text": "I don't know much about this stuff. But if COMPILE_N_GO is an issue, then I assume the tabs have different global objects. And if that's the case, then pretty soon all these scripts will be in different compartments (when we have compartment-per-global). And that will make this a lot harder.", "attachment_id": null, "time": "2011-08-06T02:51:36Z", "text": "I don't know much about this stuff. But if COMPILE_N_GO is an issue, then I assume the tabs have different global objects. And if that's the case, then pretty soon all these scripts will be in different compartments (when we have compartment-per-global). And that will make this a lot harder.", "author": "bill.mccloskey@gmail.com", "creator": "bill.mccloskey@gmail.com"}, {"author": "bzbarsky@mit.edu", "creator": "bzbarsky@mit.edu", "time": "2011-08-06T03:00:12Z", "attachment_id": null, "text": "Yes, the tabs very much have different global objects.", "raw_text": "Yes, the tabs very much have different global objects.", "creation_time": "2011-08-06T03:00:12Z", "bug_id": 676939, "id": 5637267, "tags": [], "count": 5, "is_private": false}]}}}