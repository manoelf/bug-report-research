{"comments": {}, "bugs": {"708276": {"comments": [{"creation_time": "2011-12-07T17:18:02Z", "time": "2011-12-07T17:18:02Z", "creator": "adamw@happyassassin.net", "author": "adamw@happyassassin.net", "id": 5897564, "count": 0, "is_private": false, "tags": [], "bug_id": 708276, "text": "User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:8.0) Gecko/20100101 Firefox/8.0\nBuild ID: 20111108090055\n\nSteps to reproduce:\n\nI run tt-rss on my server, it's an RSS feed-reading webapp. It uses the Dijit UI library - http://dojotoolkit.org/reference-guide/dijit/index.html .\n\nSeveral times, after I upgraded tt-rss on the server end, I've started getting errors from the Dijit stuff when accessing tt-rss via Firefox. The last one was quite similar to http://tt-rss.org/redmine/issues/378#change-1264 .\n\nAs explained in that bug by the reporter and the tt-rss author, the problem appears to be that Firefox caches dijit components too aggressively and keeps using the cached versions even if the newer tt-rss comes with changes to dijit.\n\nRemoving all cache files related to dijit - I did grep -Rl dijit * | xargs rm -f in Firefox's Cache directory and restarted Firefox - resolves the issue.\n\n\nActual results:\n\nAs explained in that bug by the reporter and the tt-rss author, the problem appears to be that Firefox caches dijit components too aggressively and keeps using the cached versions even if the newer tt-rss comes with changes to dijit.\n\nRemoving all cache files related to dijit - I did grep -Rl dijit * | xargs rm -f in Firefox's Cache directory and restarted Firefox - resolves the issue.\n\n\nExpected results:\n\nFirefox should fix its caching so updating a Dijit-using webapp on the server does not cause errors at the client end.", "attachment_id": null, "raw_text": "User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:8.0) Gecko/20100101 Firefox/8.0\nBuild ID: 20111108090055\n\nSteps to reproduce:\n\nI run tt-rss on my server, it's an RSS feed-reading webapp. It uses the Dijit UI library - http://dojotoolkit.org/reference-guide/dijit/index.html .\n\nSeveral times, after I upgraded tt-rss on the server end, I've started getting errors from the Dijit stuff when accessing tt-rss via Firefox. The last one was quite similar to http://tt-rss.org/redmine/issues/378#change-1264 .\n\nAs explained in that bug by the reporter and the tt-rss author, the problem appears to be that Firefox caches dijit components too aggressively and keeps using the cached versions even if the newer tt-rss comes with changes to dijit.\n\nRemoving all cache files related to dijit - I did grep -Rl dijit * | xargs rm -f in Firefox's Cache directory and restarted Firefox - resolves the issue.\n\n\nActual results:\n\nAs explained in that bug by the reporter and the tt-rss author, the problem appears to be that Firefox caches dijit components too aggressively and keeps using the cached versions even if the newer tt-rss comes with changes to dijit.\n\nRemoving all cache files related to dijit - I did grep -Rl dijit * | xargs rm -f in Firefox's Cache directory and restarted Firefox - resolves the issue.\n\n\nExpected results:\n\nFirefox should fix its caching so updating a Dijit-using webapp on the server does not cause errors at the client end."}, {"author": "bugzilla@mversen.de", "creator": "bugzilla@mversen.de", "time": "2011-12-07T18:00:25Z", "creation_time": "2011-12-07T18:00:25Z", "is_private": false, "id": 5897737, "count": 1, "tags": [], "bug_id": 708276, "text": "Firefox caches based on the http specification.\nWhat http headers are send by the server for those URLs ?", "raw_text": "Firefox caches based on the http specification.\nWhat http headers are send by the server for those URLs ?", "attachment_id": null}, {"raw_text": "Attaching the headers captured by the 'Live HTTP Headers' extension for Firefox when loading the main tt-rss page.\n\nThere may be some 'sensitive' data in here, but tt-rss is just an RSS reader. All you're going to discover if you use this to access my tt-rss server is what web sites I read. It's not worth the effort :)", "attachment_id": null, "bug_id": 708276, "text": "Attaching the headers captured by the 'Live HTTP Headers' extension for Firefox when loading the main tt-rss page.\n\nThere may be some 'sensitive' data in here, but tt-rss is just an RSS reader. All you're going to discover if you use this to access my tt-rss server is what web sites I read. It's not worth the effort :)", "tags": [], "is_private": false, "id": 5897862, "count": 2, "author": "adamw@happyassassin.net", "creator": "adamw@happyassassin.net", "creation_time": "2011-12-07T18:38:24Z", "time": "2011-12-07T18:38:24Z"}, {"tags": [], "bug_id": 708276, "text": "Created attachment 579744\nhttp headers from a load of the main tt-rss page", "attachment_id": 579744, "raw_text": "", "creation_time": "2011-12-07T18:38:50Z", "time": "2011-12-07T18:38:50Z", "creator": "adamw@happyassassin.net", "author": "adamw@happyassassin.net", "id": 5897863, "count": 3, "is_private": false}, {"raw_text": "...sigh. and I just hastily killed my WP and roundcube sessions, so don't bother trying to break into those either. darn cookies.", "attachment_id": null, "tags": [], "text": "...sigh. and I just hastily killed my WP and roundcube sessions, so don't bother trying to break into those either. darn cookies.", "bug_id": 708276, "is_private": false, "count": 4, "id": 5897870, "author": "adamw@happyassassin.net", "creator": "adamw@happyassassin.net", "creation_time": "2011-12-07T18:40:51Z", "time": "2011-12-07T18:40:51Z"}, {"attachment_id": null, "raw_text": "You could edit out the cookies and the actual host....\nNow the question: Which exact URL is cached too long ?\n\nFor example this URL \n>GET /tt-rss/lib/dijit/dijit.js HTTP/1.1\nGecko revalidates this URL with \n>If-Modified-Since: Tue, 22 Nov 2011 10:30:55 GMT\n>If-None-Match: \"23249-455-4b2504c5af5c0\"\n\nThe server answer is \n\"HTTP/1.1 304 Not Modified\"\n\nIt have to be a 200 ok if the file had changed and gecko wouldn't use the cached copy.\n\nThe problem with LiveHttpheaders is that you are seeing only the actual requests and not things that are coming from the cache.", "tags": [], "bug_id": 708276, "text": "You could edit out the cookies and the actual host....\nNow the question: Which exact URL is cached too long ?\n\nFor example this URL \n>GET /tt-rss/lib/dijit/dijit.js HTTP/1.1\nGecko revalidates this URL with \n>If-Modified-Since: Tue, 22 Nov 2011 10:30:55 GMT\n>If-None-Match: \"23249-455-4b2504c5af5c0\"\n\nThe server answer is \n\"HTTP/1.1 304 Not Modified\"\n\nIt have to be a 200 ok if the file had changed and gecko wouldn't use the cached copy.\n\nThe problem with LiveHttpheaders is that you are seeing only the actual requests and not things that are coming from the cache.", "is_private": false, "count": 5, "id": 5897968, "creator": "bugzilla@mversen.de", "creation_time": "2011-12-07T19:06:58Z", "time": "2011-12-07T19:06:58Z", "author": "bugzilla@mversen.de"}, {"is_private": false, "count": 6, "id": 5898062, "creator": "adamw@happyassassin.net", "time": "2011-12-07T19:34:04Z", "creation_time": "2011-12-07T19:34:04Z", "author": "adamw@happyassassin.net", "attachment_id": null, "raw_text": "Problem is I've 'fixed' the issue now and there are no further updates of tt-rss available, so I can't give you an example of a header in the 'problematic' case. What I'm showing you now is a working case.\n\nI guess I'll have to try and remember to capture the headers next time it breaks, before fixing it?", "tags": [], "bug_id": 708276, "text": "Problem is I've 'fixed' the issue now and there are no further updates of tt-rss available, so I can't give you an example of a header in the 'problematic' case. What I'm showing you now is a working case.\n\nI guess I'll have to try and remember to capture the headers next time it breaks, before fixing it?"}, {"id": 5898396, "count": 7, "is_private": false, "time": "2011-12-07T20:52:04Z", "creation_time": "2011-12-07T20:52:04Z", "creator": "bugzilla@mversen.de", "author": "bugzilla@mversen.de", "attachment_id": null, "raw_text": "A Mozilla http log would be great if you get the problem again.\n- https://developer.mozilla.org/en/HTTP_Logging\nnsHttp:5 is enough in this case.\n\nThis is very likely not a bug in Gecko (from my experience).\nThere are explicit rules for caching in the http rfc.\n- http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html", "bug_id": 708276, "text": "A Mozilla http log would be great if you get the problem again.\n- https://developer.mozilla.org/en/HTTP_Logging\nnsHttp:5 is enough in this case.\n\nThis is very likely not a bug in Gecko (from my experience).\nThere are explicit rules for caching in the http rfc.\n- http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html", "tags": []}]}}}