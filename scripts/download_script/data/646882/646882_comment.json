{"comments": {}, "bugs": {"646882": {"comments": [{"bug_id": 646882, "attachment_id": null, "creation_time": "2011-03-31T17:01:59Z", "tags": [], "id": 5383548, "is_private": false, "author": "dbaron@dbaron.org", "text": "layout/style/test/test_initial_computation.html\nlayout/style/test/test_value_computation.html\nfail in Japanese locale, and I suspect in any other locales where the default serif/sans-serif preference differs from Western locales.\n\nI thought maybe the underlying problem is that nsPresContext::UpdateCharSet needs to call RebuildAllStyleData() after calling GetFontPreferences, but that doesn't seem to be it.  (Though it's possible that it does -- if we ever have any style data to rebuild when UpdateCharSet is called.)\n\nSteps to reproduce:\nLANG=ja_JP.UTF-8 LC_ALL=ja_JP.UTF-8 TEST_PATH=layout/style make mochitest-plain", "creator": "dbaron@dbaron.org", "raw_text": "layout/style/test/test_initial_computation.html\nlayout/style/test/test_value_computation.html\nfail in Japanese locale, and I suspect in any other locales where the default serif/sans-serif preference differs from Western locales.\n\nI thought maybe the underlying problem is that nsPresContext::UpdateCharSet needs to call RebuildAllStyleData() after calling GetFontPreferences, but that doesn't seem to be it.  (Though it's possible that it does -- if we ever have any style data to rebuild when UpdateCharSet is called.)\n\nSteps to reproduce:\nLANG=ja_JP.UTF-8 LC_ALL=ja_JP.UTF-8 TEST_PATH=layout/style make mochitest-plain", "count": 0, "time": "2011-03-31T17:01:59Z"}, {"is_private": false, "count": 1, "time": "2011-08-15T21:48:21Z", "author": "dbaron@dbaron.org", "id": 5655301, "attachment_id": null, "creation_time": "2011-08-15T21:48:21Z", "tags": [], "creator": "dbaron@dbaron.org", "raw_text": "Could also be another instance of bug 416581.", "bug_id": 646882, "text": "Could also be another instance of bug 416581."}, {"text": "This seems to be fixed by the patch is bug 416581.", "bug_id": 646882, "creator": "jwatt@jwatt.org", "raw_text": "This seems to be fixed by the patch is bug 416581.", "attachment_id": null, "creation_time": "2012-01-31T14:03:02Z", "tags": [], "id": 6022412, "count": 2, "time": "2012-01-31T14:03:02Z", "author": "jwatt@jwatt.org", "is_private": false}, {"id": 6022419, "author": "jwatt@jwatt.org", "time": "2012-01-31T14:09:29Z", "count": 3, "is_private": false, "text": "Wait. I ran the command from comment 0 in the wrong tree (one without the patch from bug 416581). Did something else fix this bug?", "bug_id": 646882, "raw_text": "Wait. I ran the command from comment 0 in the wrong tree (one without the patch from bug 416581). Did something else fix this bug?", "creator": "jwatt@jwatt.org", "creation_time": "2012-01-31T14:09:29Z", "tags": [], "attachment_id": null}, {"creator": "dbaron@dbaron.org", "raw_text": "On what platform?  The locale codes for Japanese might be different.  Does:\nLANG=ja_JP.UTF-8 LC_ALL=ja_JP.UTF-8 date\nproduce output like:\n2012\u5e74  1\u6708 31\u65e5 \u706b\u66dc\u65e5 15:16:39 CET\n?", "attachment_id": null, "creation_time": "2012-01-31T14:17:22Z", "tags": [], "text": "On what platform?  The locale codes for Japanese might be different.  Does:\nLANG=ja_JP.UTF-8 LC_ALL=ja_JP.UTF-8 date\nproduce output like:\n2012\u5e74  1\u6708 31\u65e5 \u706b\u66dc\u65e5 15:16:39 CET\n?", "bug_id": 646882, "count": 4, "author": "dbaron@dbaron.org", "time": "2012-01-31T14:17:22Z", "is_private": false, "id": 6022434}, {"creation_time": "2012-01-31T14:21:54Z", "tags": [], "attachment_id": null, "bug_id": 646882, "is_private": false, "author": "dbaron@dbaron.org", "id": 6022441, "raw_text": "(And that particular command works on one of my two Ubuntu 11.10 machines and not the other -- and I don't know what the difference is other than guessing it's related to a package that's installed on one and not the other.)", "creator": "dbaron@dbaron.org", "text": "(And that particular command works on one of my two Ubuntu 11.10 machines and not the other -- and I don't know what the difference is other than guessing it's related to a package that's installed on one and not the other.)", "time": "2012-01-31T14:21:54Z", "count": 5}, {"time": "2012-01-31T14:22:29Z", "count": 6, "text": "(To be clear, I wasn't able to try the mochitest command, since the one with the development environment is the one where that command doesn't work.)", "raw_text": "(To be clear, I wasn't able to try the mochitest command, since the one with the development environment is the one where that command doesn't work.)", "creator": "dbaron@dbaron.org", "id": 6022443, "is_private": false, "author": "dbaron@dbaron.org", "bug_id": 646882, "creation_time": "2012-01-31T14:22:29Z", "tags": [], "attachment_id": null}, {"bug_id": 646882, "text": "jwatt$ LANG=ja_JP.UTF-8 LC_ALL=ja_JP.UTF-8 date\n2012\u5e74 1\u670831\u65e5 \u706b\u66dc\u65e5 14\u664235\u520616\u79d2 GMT\n\nSo it seems to work for me. This is on OS X 10.7, recent m-c, debug build created using Xcode 4.2.", "attachment_id": null, "tags": [], "creation_time": "2012-01-31T14:37:15Z", "creator": "jwatt@jwatt.org", "raw_text": "jwatt$ LANG=ja_JP.UTF-8 LC_ALL=ja_JP.UTF-8 date\n2012\u5e74 1\u670831\u65e5 \u706b\u66dc\u65e5 14\u664235\u520616\u79d2 GMT\n\nSo it seems to work for me. This is on OS X 10.7, recent m-c, debug build created using Xcode 4.2.", "id": 6022472, "is_private": false, "count": 7, "author": "jwatt@jwatt.org", "time": "2012-01-31T14:37:15Z"}, {"tags": [], "creation_time": "2012-01-31T14:53:01Z", "attachment_id": null, "raw_text": "Though it's possible that locale stuff on Mac OS X is controlled by something less Unixish than environment variables...", "creator": "dbaron@dbaron.org", "bug_id": 646882, "text": "Though it's possible that locale stuff on Mac OS X is controlled by something less Unixish than environment variables...", "is_private": false, "author": "dbaron@dbaron.org", "time": "2012-01-31T14:53:01Z", "count": 8, "id": 6022517}]}}}