{"bugs": {"1637430": {"comments": [{"count": 0, "is_private": false, "tags": [], "bug_id": 1637430, "author": "rhunt@eqrion.net", "time": "2020-05-12T21:31:01Z", "raw_text": "The decoder for ref.func in wasm globals doesn't bounds check the function index and later code assumes that it's valid [1] [2].\n\nBeing a bit paranoid here, I'm not sure if this could be exploited. This code is nightly only and this is a recent regression.\n\n[1] https://searchfox.org/mozilla-central/rev/0688ffdef223dac527c2fcdb25560118c4e4df51/js/src/wasm/WasmValidate.cpp#2309\n[2] https://searchfox.org/mozilla-central/rev/0688ffdef223dac527c2fcdb25560118c4e4df51/js/src/wasm/WasmGenerator.cpp#401", "text": "The decoder for ref.func in wasm globals doesn't bounds check the function index and later code assumes that it's valid [1] [2].\n\nBeing a bit paranoid here, I'm not sure if this could be exploited. This code is nightly only and this is a recent regression.\n\n[1] https://searchfox.org/mozilla-central/rev/0688ffdef223dac527c2fcdb25560118c4e4df51/js/src/wasm/WasmValidate.cpp#2309\n[2] https://searchfox.org/mozilla-central/rev/0688ffdef223dac527c2fcdb25560118c4e4df51/js/src/wasm/WasmGenerator.cpp#401", "id": 14815493, "attachment_id": null, "creator": "rhunt@eqrion.net", "creation_time": "2020-05-12T21:31:01Z"}, {"time": "2020-05-12T21:39:32Z", "raw_text": "", "count": 1, "is_private": false, "bug_id": 1637430, "tags": [], "author": "rhunt@eqrion.net", "creator": "rhunt@eqrion.net", "attachment_id": 9147791, "creation_time": "2020-05-12T21:39:32Z", "text": "Created attachment 9147791\nBug 1637430 - Validate ref.func indices in global initializers. r?lth", "id": 14815517}, {"id": 14815518, "text": "Created attachment 9147792\nBug 1637430 - Add tests. r?lth\n\n\n\nDepends on D74970", "creation_time": "2020-05-12T21:39:53Z", "creator": "rhunt@eqrion.net", "attachment_id": 9147792, "author": "rhunt@eqrion.net", "tags": [], "bug_id": 1637430, "is_private": false, "count": 2, "raw_text": "\n\nDepends on D74970", "time": "2020-05-12T21:39:53Z"}, {"author": "release-mgmt-account-bot@mozilla.tld", "count": 3, "is_private": false, "tags": [], "bug_id": 1637430, "raw_text": "Set release status flags based on info from the regressing bug 1612804", "time": "2020-05-13T12:19:29Z", "id": 14816545, "text": "Set release status flags based on info from the regressing bug 1612804", "creation_time": "2020-05-13T12:19:29Z", "creator": "release-mgmt-account-bot@mozilla.tld", "attachment_id": null}, {"is_private": false, "count": 4, "bug_id": 1637430, "tags": [], "id": 14816555, "text": "Per comment 0 this is nightly only.", "author": "jcristau@mozilla.com", "attachment_id": null, "creator": "jcristau@mozilla.com", "time": "2020-05-13T12:22:00Z", "creation_time": "2020-05-13T12:22:00Z", "raw_text": "Per comment 0 this is nightly only."}, {"time": "2020-05-14T17:29:20Z", "raw_text": "Being equally paranoid we'll call this sec-high. We should never ever trust wasm to be well formed.", "bug_id": 1637430, "tags": [], "count": 5, "is_private": false, "author": "dveditz@mozilla.com", "creator": "dveditz@mozilla.com", "attachment_id": null, "creation_time": "2020-05-14T17:29:20Z", "text": "Being equally paranoid we'll call this sec-high. We should never ever trust wasm to be well formed.", "id": 14820488}, {"tags": [], "bug_id": 1637430, "is_private": false, "count": 6, "text": "https://hg.mozilla.org/integration/autoland/rev/51706a543abf9fd2ad8812eb145db67f81c39217\nhttps://hg.mozilla.org/mozilla-central/rev/51706a543abf", "id": 14825243, "author": "aryx.bugmail@gmx-topmail.de", "time": "2020-05-16T09:42:02Z", "attachment_id": null, "creator": "aryx.bugmail@gmx-topmail.de", "creation_time": "2020-05-16T09:42:02Z", "raw_text": "https://hg.mozilla.org/integration/autoland/rev/51706a543abf9fd2ad8812eb145db67f81c39217\nhttps://hg.mozilla.org/mozilla-central/rev/51706a543abf"}, {"id": 14874532, "text": "As part of a security bug pattern analysis, we are requesting your help with a high level analysis of this bug. It is our hope to develop static analysis (or potentially runtime/dynamic analysis) in the future to identify classes of bugs.\n\nPlease visit [this google form](https://docs.google.com/forms/d/e/1FAIpQLSe9uRXuoMK6tRglbNL5fpXbun_oEb6_xC2zpuE_CKA_GUjrvA/viewform?usp=pp_url&entry.2124261401=https%3A%2F%2Fbugzilla.mozilla.org%2Fshow_bug.cgi%3Fid%3D1637430) to reply.", "author": "release-mgmt-account-bot@mozilla.tld", "tags": [], "bug_id": 1637430, "is_private": false, "count": 7, "creation_time": "2020-06-10T17:00:16Z", "raw_text": "As part of a security bug pattern analysis, we are requesting your help with a high level analysis of this bug. It is our hope to develop static analysis (or potentially runtime/dynamic analysis) in the future to identify classes of bugs.\n\nPlease visit [this google form](https://docs.google.com/forms/d/e/1FAIpQLSe9uRXuoMK6tRglbNL5fpXbun_oEb6_xC2zpuE_CKA_GUjrvA/viewform?usp=pp_url&entry.2124261401=https%3A%2F%2Fbugzilla.mozilla.org%2Fshow_bug.cgi%3Fid%3D1637430) to reply.", "time": "2020-06-10T17:00:16Z", "attachment_id": null, "creator": "release-mgmt-account-bot@mozilla.tld"}, {"creator": "rhunt@eqrion.net", "attachment_id": null, "creation_time": "2020-06-11T18:44:47Z", "text": "Submitted.", "id": 14876847, "time": "2020-06-11T18:44:47Z", "raw_text": "Submitted.", "tags": [], "bug_id": 1637430, "count": 8, "is_private": false, "author": "rhunt@eqrion.net"}, {"count": 9, "is_private": false, "bug_id": 1637430, "tags": [], "author": "lhansen@mozilla.com", "time": "2021-01-13T13:45:05Z", "raw_text": "Test case has bitrotted: file moved from .../gc/... to .../ref-types/... and when suitably fixed it fails with a bunch of unrelated assertions, but this looks like it's localized to the test runner (conflicting definitions of globalSection).  Will update and land.", "id": 15214281, "text": "Test case has bitrotted: file moved from .../gc/... to .../ref-types/... and when suitably fixed it fails with a bunch of unrelated assertions, but this looks like it's localized to the test runner (conflicting definitions of globalSection).  Will update and land.", "creator": "lhansen@mozilla.com", "attachment_id": null, "creation_time": "2021-01-13T13:45:05Z"}, {"raw_text": "Actually, Ryan - did this land, but without closing the patch?  There's code at the bottom of ref-types/ref-func.js that looks a lot like this, but some of the names are changed.", "time": "2021-01-13T13:50:08Z", "author": "lhansen@mozilla.com", "bug_id": 1637430, "tags": [], "is_private": false, "count": 10, "creation_time": "2021-01-13T13:50:08Z", "attachment_id": null, "creator": "lhansen@mozilla.com", "id": 15214285, "text": "Actually, Ryan - did this land, but without closing the patch?  There's code at the bottom of ref-types/ref-func.js that looks a lot like this, but some of the names are changed."}, {"tags": [], "bug_id": 1637430, "count": 11, "is_private": false, "author": "rhunt@eqrion.net", "time": "2021-01-14T17:04:42Z", "raw_text": "I don't think this landed, which code are you looking at? This code [1] doesn't seem to be it.\n\nAlso, I can rebase the patch and land it now.\n\n[1] https://searchfox.org/mozilla-central/rev/2a24205479519e70c0574929f45730d285141584/js/src/jit-test/tests/wasm/ref-types/ref-func.js#210", "id": 15216160, "text": "I don't think this landed, which code are you looking at? This code [1] doesn't seem to be it.\n\nAlso, I can rebase the patch and land it now.\n\n[1] https://searchfox.org/mozilla-central/rev/2a24205479519e70c0574929f45730d285141584/js/src/jit-test/tests/wasm/ref-types/ref-func.js#210", "creator": "rhunt@eqrion.net", "attachment_id": null, "creation_time": "2021-01-14T17:04:42Z"}, {"author": "pulsebot@bots.tld", "tags": [], "bug_id": 1637430, "is_private": false, "count": 12, "raw_text": "Pushed by rhunt@eqrion.net:\nhttps://hg.mozilla.org/integration/autoland/rev/cc2974e9876d\nAdd tests. r=lth", "time": "2021-01-14T17:45:05Z", "text": "Pushed by rhunt@eqrion.net:\nhttps://hg.mozilla.org/integration/autoland/rev/cc2974e9876d\nAdd tests. r=lth", "id": 15216227, "creation_time": "2021-01-14T17:45:05Z", "creator": "pulsebot@bots.tld", "attachment_id": null}, {"id": 15216387, "text": "Backed out for SM bustages on asserts.js\n\nBackout link: https://hg.mozilla.org/integration/autoland/rev/6cfaa4fa1c1f3478074a0fec28155d28fa301345\nLog link: https://treeherder.mozilla.org/logviewer?job_id=326706819&repo=autoland&lineNumber=11245", "creator": "nbeleuzu@mozilla.com", "attachment_id": null, "creation_time": "2021-01-14T19:23:35Z", "bug_id": 1637430, "tags": [], "is_private": false, "count": 13, "author": "nbeleuzu@mozilla.com", "time": "2021-01-14T19:23:35Z", "raw_text": "Backed out for SM bustages on asserts.js\n\nBackout link: https://hg.mozilla.org/integration/autoland/rev/6cfaa4fa1c1f3478074a0fec28155d28fa301345\nLog link: https://treeherder.mozilla.org/logviewer?job_id=326706819&repo=autoland&lineNumber=11245"}, {"text": "Ah, Cranelift uses a different failure message here and I didn't test on ARM64.", "id": 15218102, "author": "rhunt@eqrion.net", "tags": [], "bug_id": 1637430, "is_private": false, "count": 14, "creation_time": "2021-01-15T16:52:03Z", "raw_text": "Ah, Cranelift uses a different failure message here and I didn't test on ARM64.", "time": "2021-01-15T16:52:03Z", "creator": "rhunt@eqrion.net", "attachment_id": null}, {"id": 15227230, "text": "Pushed by rhunt@eqrion.net:\nhttps://hg.mozilla.org/integration/autoland/rev/b95d22164a9f\nAdd tests. r=lth", "author": "pulsebot@bots.tld", "tags": [], "bug_id": 1637430, "is_private": false, "count": 15, "raw_text": "Pushed by rhunt@eqrion.net:\nhttps://hg.mozilla.org/integration/autoland/rev/b95d22164a9f\nAdd tests. r=lth", "creation_time": "2021-01-21T20:25:21Z", "time": "2021-01-21T20:25:21Z", "creator": "pulsebot@bots.tld", "attachment_id": null}, {"time": "2021-01-22T04:40:41Z", "raw_text": "https://hg.mozilla.org/mozilla-central/rev/b95d22164a9f", "bug_id": 1637430, "tags": ["bugherder"], "count": 16, "is_private": false, "author": "btara@mozilla.com", "attachment_id": null, "creator": "btara@mozilla.com", "creation_time": "2021-01-22T04:40:41Z", "text": "https://hg.mozilla.org/mozilla-central/rev/b95d22164a9f", "id": 15227740}]}}, "comments": {}}