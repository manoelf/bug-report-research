{"bugs": {"705082": {"comments": [{"bug_id": 705082, "text": "User Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:8.0) Gecko/20100101 Firefox/8.0\nBuild ID: 20111104165243\n\nSteps to reproduce:\n\nWhen a card/token is inserted, there are several functions that should be invoked to know the token features. Among them C_GetMechanismInfo to know if the token support key generation.\n\nUsually, when a card is inserted BEFORE starting firefox and i start a certificate request using <keygen> and a pkcs#11 device, i can see on trace log there's a C_GetMechanismInfo call to know my card supports RSA Key Pair generation, and then Firefox invokes C_GenerateKeyPair\n\nI have noticed, sometimes when a card is inserted AFTER starting firefox, when i start the request, the C_CreateObject method is called instead of C_GenerateKeyPair.\n\nThat seems to be caused 'cause C_GetMechanismInfo is never called, and then Firefox doesnt know our token generate key pairs.\n\nWe are actually working to implement C_CreateObject on our token to bypass this error, but we consider it should behave like this, cause the keys arent kept secret on card.\n\n\nActual results:\n\nC_CreateObject method is called instead of C_GenerateKeyPair\n\n\nExpected results:\n\nC_GenerateKeyPair should be invoked to create the key pair within the card", "tags": [], "raw_text": "User Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:8.0) Gecko/20100101 Firefox/8.0\nBuild ID: 20111104165243\n\nSteps to reproduce:\n\nWhen a card/token is inserted, there are several functions that should be invoked to know the token features. Among them C_GetMechanismInfo to know if the token support key generation.\n\nUsually, when a card is inserted BEFORE starting firefox and i start a certificate request using <keygen> and a pkcs#11 device, i can see on trace log there's a C_GetMechanismInfo call to know my card supports RSA Key Pair generation, and then Firefox invokes C_GenerateKeyPair\n\nI have noticed, sometimes when a card is inserted AFTER starting firefox, when i start the request, the C_CreateObject method is called instead of C_GenerateKeyPair.\n\nThat seems to be caused 'cause C_GetMechanismInfo is never called, and then Firefox doesnt know our token generate key pairs.\n\nWe are actually working to implement C_CreateObject on our token to bypass this error, but we consider it should behave like this, cause the keys arent kept secret on card.\n\n\nActual results:\n\nC_CreateObject method is called instead of C_GenerateKeyPair\n\n\nExpected results:\n\nC_GenerateKeyPair should be invoked to create the key pair within the card", "attachment_id": null, "author": "pavrw@hotmail.com", "time": "2011-11-24T11:22:29Z", "creation_time": "2011-11-24T11:22:29Z", "creator": "pavrw@hotmail.com", "id": 5870491, "count": 0, "is_private": false}]}}, "comments": {}}