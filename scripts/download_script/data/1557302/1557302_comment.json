{"bugs": {"1557302": {"comments": [{"text": "Created attachment 9070244\nissue.gif\n\n**Affected versions**\n* Firefox 68.0b7 (BuildId:20190603181408).\n* Firefox 69.0a1 (BuildId:20190605215957)\n\n**Unaffected versions**\n* Firefox 60.7.0 esr (BuildId:20190514153425)\n* Firefox 67.0.1 (BuildId:20190529130856)\n\n**Affected platforms**\n* Windows 10 64bit\n* Ubuntu 18.04 64bit\n* macOS 10.14\n\n**Steps to reproduce**\n1. Launch Firefox.\n2. Type @google inside the url input bar.\n3. Press the enter key \n\n**Expected result**\n* An extra space is generated after the @google string and the user can enter additional information inside the url bar.\n\n**Actual result**\n* No extra space is generated and the user has to manually press the spacebar button.\n\n**Regression range**\n\n* Pushlog:\nhttps://hg.mozilla.org/integration/autoland/pushloghtml?fromchange=38a326f813f6b1fd1400d215730e0105f62eb9c5&tochange=725cc368d14453980d6e0b112edc263a12463ffe\n* Potential regressor: Bug 1548031\n\n**Additional Information**\n* I have attached a screencast for this issue", "time": "2019-06-06T13:06:08Z", "tags": [], "author": "emil.ghitta@softvision.com", "is_private": false, "attachment_id": 9070244, "creation_time": "2019-06-06T13:06:08Z", "raw_text": "**Affected versions**\n* Firefox 68.0b7 (BuildId:20190603181408).\n* Firefox 69.0a1 (BuildId:20190605215957)\n\n**Unaffected versions**\n* Firefox 60.7.0 esr (BuildId:20190514153425)\n* Firefox 67.0.1 (BuildId:20190529130856)\n\n**Affected platforms**\n* Windows 10 64bit\n* Ubuntu 18.04 64bit\n* macOS 10.14\n\n**Steps to reproduce**\n1. Launch Firefox.\n2. Type @google inside the url input bar.\n3. Press the enter key \n\n**Expected result**\n* An extra space is generated after the @google string and the user can enter additional information inside the url bar.\n\n**Actual result**\n* No extra space is generated and the user has to manually press the spacebar button.\n\n**Regression range**\n\n* Pushlog:\nhttps://hg.mozilla.org/integration/autoland/pushloghtml?fromchange=38a326f813f6b1fd1400d215730e0105f62eb9c5&tochange=725cc368d14453980d6e0b112edc263a12463ffe\n* Potential regressor: Bug 1548031\n\n**Additional Information**\n* I have attached a screencast for this issue", "creator": "emil.ghitta@softvision.com", "bug_id": 1557302, "count": 0, "id": 14164643}, {"creation_time": "2019-06-06T13:08:21Z", "text": "Hi Marco,\n\nIt seems that the patch for Bug 1548031 may have caused this regression.\n\nCan you please have a look?\n\nThanks!", "time": "2019-06-06T13:08:21Z", "tags": [], "raw_text": "Hi Marco,\n\nIt seems that the patch for Bug 1548031 may have caused this regression.\n\nCan you please have a look?\n\nThanks!", "author": "emil.ghitta@softvision.com", "creator": "emil.ghitta@softvision.com", "bug_id": 1557302, "is_private": false, "count": 1, "id": 14164646, "attachment_id": null}, {"id": 14164759, "count": 2, "bug_id": 1557302, "creator": "mak@mozilla.com", "raw_text": "It looks like an edge case I did not handle in bug 1555277.", "creation_time": "2019-06-06T14:11:05Z", "attachment_id": null, "is_private": false, "author": "mak@mozilla.com", "tags": [], "time": "2019-06-06T14:11:05Z", "text": "It looks like an edge case I did not handle in bug 1555277."}, {"raw_text": "I think the problem is that in unifiedcomplete we exit earlier in _matchSearchEngineAlias, thus we don't reach _matchSearchEngineTokenAliasForAutofill. As a consequence the unifiecomplete provider doesn't fill any value in match.autofill.\n\nI wonder where's the best point to address this, probably _matchSearchEngineAlias should not handle this and leave it to _matchSearchEngineTokenAliasForAutofill. There is also an edge case we don't handle, having 2 aliases where one contains the other, like @google and @google-two, we should not autofill the latter until - is typed, but aliases are not sorted, we just pick the first engine that matches. Changing the current code may thus autofill the wrong one, while until now we were bailing out. This must be taken into account.", "creator": "mak@mozilla.com", "author": "mak@mozilla.com", "bug_id": 1557302, "is_private": false, "count": 3, "id": 14173450, "attachment_id": null, "creation_time": "2019-06-11T08:57:24Z", "text": "I think the problem is that in unifiedcomplete we exit earlier in _matchSearchEngineAlias, thus we don't reach _matchSearchEngineTokenAliasForAutofill. As a consequence the unifiecomplete provider doesn't fill any value in match.autofill.\n\nI wonder where's the best point to address this, probably _matchSearchEngineAlias should not handle this and leave it to _matchSearchEngineTokenAliasForAutofill. There is also an edge case we don't handle, having 2 aliases where one contains the other, like @google and @google-two, we should not autofill the latter until - is typed, but aliases are not sorted, we just pick the first engine that matches. Changing the current code may thus autofill the wrong one, while until now we were bailing out. This must be taken into account.", "time": "2019-06-11T08:57:24Z", "tags": []}, {"creation_time": "2019-06-11T15:05:53Z", "raw_text": "(In reply to Marco Bonardo [::mak] from comment #3)\n> There is also an edge case we don't handle, having 2 aliases where one contains the other, like @google and @google-two, we should not autofill the latter until - is typed, but aliases are not sorted, we just pick the first engine that matches. \n\nRethinking about this, the user has control over the order of engines, and we get the list of engines from the search service in that order, so doing internal sorting may break expectations, we can just rely on the user's choice.", "creator": "mak@mozilla.com", "bug_id": 1557302, "count": 4, "id": 14174176, "text": "(In reply to Marco Bonardo [::mak] from comment #3)\n> There is also an edge case we don't handle, having 2 aliases where one contains the other, like @google and @google-two, we should not autofill the latter until - is typed, but aliases are not sorted, we just pick the first engine that matches. \n\nRethinking about this, the user has control over the order of engines, and we get the list of engines from the search service in that order, so doing internal sorting may break expectations, we can just rely on the user's choice.", "time": "2019-06-11T15:05:53Z", "tags": [], "author": "mak@mozilla.com", "is_private": false, "attachment_id": null}, {"creation_time": "2019-06-13T16:41:39Z", "text": "Created attachment 9071940\n* Bug 1557302 - Enter on a fully typed @alias should move the caret at the end. r=adw", "time": "2019-06-13T16:41:39Z", "tags": [], "raw_text": "", "creator": "mak@mozilla.com", "author": "mak@mozilla.com", "bug_id": 1557302, "is_private": false, "count": 5, "id": 14179299, "attachment_id": 9071940}, {"attachment_id": null, "id": 14179770, "count": 6, "is_private": false, "bug_id": 1557302, "author": "pulsebot@bots.tld", "creator": "pulsebot@bots.tld", "raw_text": "Pushed by mak77@bonardo.net:\nhttps://hg.mozilla.org/integration/autoland/rev/0cb2bef9b251\n* Bug 1557302 - Enter on a fully typed @alias should move the caret at the end. r=adw", "tags": [], "time": "2019-06-13T20:27:22Z", "text": "Pushed by mak77@bonardo.net:\nhttps://hg.mozilla.org/integration/autoland/rev/0cb2bef9b251\n* Bug 1557302 - Enter on a fully typed @alias should move the caret at the end. r=adw", "creation_time": "2019-06-13T20:27:22Z"}, {"tags": ["bugherder"], "time": "2019-06-14T03:43:26Z", "text": "https://hg.mozilla.org/mozilla-central/rev/0cb2bef9b251", "attachment_id": null, "author": "shindli@mozilla.com", "is_private": false, "creation_time": "2019-06-14T03:43:26Z", "id": 14180343, "count": 7, "creator": "shindli@mozilla.com", "raw_text": "https://hg.mozilla.org/mozilla-central/rev/0cb2bef9b251", "bug_id": 1557302}, {"tags": [], "time": "2019-06-14T20:42:09Z", "creation_time": "2019-06-14T20:42:09Z", "text": "Please nominate this for Beta approval when you get a chance. Thanks for including a new test too!", "attachment_id": null, "id": 14181853, "count": 8, "author": "ryanvm@gmail.com", "creator": "ryanvm@gmail.com", "raw_text": "Please nominate this for Beta approval when you get a chance. Thanks for including a new test too!", "is_private": false, "bug_id": 1557302}, {"text": "Comment on attachment 9071940\n* Bug 1557302 - Enter on a fully typed @alias should move the caret at the end. r=adw\n\n### Beta/Release Uplift Approval Request\n* **User impact if declined**: typing an @alias and pressing Enter doesn't move the cursor to the end\n* **Is this code covered by automated tests?**: Yes\n* **Has the fix been verified in Nightly?**: No\n* **Needs manual test from QE?**: Yes\n* **If yes, steps to reproduce**: type @google and press Enter, the curso should move 1 space after @google, allowing to immediately type a search string\n* **List of other uplifts needed**: None\n* **Risk to taking this patch**: Low\n* **Why is the change risky/not risky? (and alternatives if risky)**: Simplifies the patch previously landed in Bug 1555277, trivial change\n* **String changes made/needed**:", "creation_time": "2019-06-14T20:43:07Z", "tags": [], "time": "2019-06-14T20:43:07Z", "is_private": false, "bug_id": 1557302, "author": "mak@mozilla.com", "creator": "mak@mozilla.com", "raw_text": "### Beta/Release Uplift Approval Request\n* **User impact if declined**: typing an @alias and pressing Enter doesn't move the cursor to the end\n* **Is this code covered by automated tests?**: Yes\n* **Has the fix been verified in Nightly?**: No\n* **Needs manual test from QE?**: Yes\n* **If yes, steps to reproduce**: type @google and press Enter, the curso should move 1 space after @google, allowing to immediately type a search string\n* **List of other uplifts needed**: None\n* **Risk to taking this patch**: Low\n* **Why is the change risky/not risky? (and alternatives if risky)**: Simplifies the patch previously landed in Bug 1555277, trivial change\n* **String changes made/needed**:", "id": 14181855, "attachment_id": 9071940, "count": 9}, {"tags": [], "time": "2019-06-15T02:41:01Z", "text": "Comment on attachment 9071940\n* Bug 1557302 - Enter on a fully typed @alias should move the caret at the end. r=adw\n\napproved for 68.0b11", "attachment_id": 9071940, "is_private": false, "author": "jcristau@mozilla.com", "creation_time": "2019-06-15T02:41:01Z", "id": 14182314, "count": 10, "bug_id": 1557302, "creator": "jcristau@mozilla.com", "raw_text": "approved for 68.0b11"}, {"tags": ["bugherder", "uplift"], "time": "2019-06-15T09:08:44Z", "text": "https://hg.mozilla.org/releases/mozilla-beta/rev/291429454e74", "creation_time": "2019-06-15T09:08:44Z", "attachment_id": null, "id": 14182503, "count": 11, "is_private": false, "bug_id": 1557302, "creator": "apavel@mozilla.com", "author": "apavel@mozilla.com", "raw_text": "https://hg.mozilla.org/releases/mozilla-beta/rev/291429454e74"}]}}, "comments": {}}