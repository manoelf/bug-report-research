{"comments": {}, "bugs": {"680311": {"comments": [{"creator": "doug.turner@gmail.com", "author": "doug.turner@gmail.com", "text": "In Bug #661978, we found that under certain conditions, we can deadlock the gecko thread.  We solve this by nesting an event loop to process incoming messages.\n\nThis bug is to investigate other sync messages queues we use.", "time": "2011-08-19T02:29:52Z", "attachment_id": null, "creation_time": "2011-08-19T02:29:52Z", "raw_text": "In Bug #661978, we found that under certain conditions, we can deadlock the gecko thread.  We solve this by nesting an event loop to process incoming messages.\n\nThis bug is to investigate other sync messages queues we use.", "bug_id": 680311, "tags": [], "is_private": false, "count": 0, "id": 5664422}, {"author": "lassey@chromium.org", "creator": "lassey@chromium.org", "bug_id": 680311, "id": 5671095, "is_private": false, "count": 1, "tags": [], "attachment_id": 555016, "time": "2011-08-23T02:42:44Z", "text": "Created attachment 555016\npatch", "raw_text": "", "creation_time": "2011-08-23T02:42:44Z"}, {"author": "doug.turner@gmail.com", "creator": "doug.turner@gmail.com", "id": 5736153, "tags": [], "count": 2, "is_private": false, "bug_id": 680311, "creation_time": "2011-09-25T20:57:14Z", "raw_text": "brad and i discuss this a bit last week.  I don't like the idea of changing all of these call sites over to spinning a nested loop.  I filed the bug mostly to investigate other call sites for similar deadlocking conditions.  We should only spin a nested loop when we completely understand the events that trigger a deadlock.\n\nHe suggested that in cases we do not completely understand the event loop (every cases but the file picker dialog), the initial wait would be >= 1s.  Then we would spin a event loop.  If we did this, we should add logging to see how often this is hit and we should use that to investigate further.", "attachment_id": null, "time": "2011-09-25T20:57:14Z", "text": "brad and i discuss this a bit last week.  I don't like the idea of changing all of these call sites over to spinning a nested loop.  I filed the bug mostly to investigate other call sites for similar deadlocking conditions.  We should only spin a nested loop when we completely understand the events that trigger a deadlock.\n\nHe suggested that in cases we do not completely understand the event loop (every cases but the file picker dialog), the initial wait would be >= 1s.  Then we would spin a event loop.  If we did this, we should add logging to see how often this is hit and we should use that to investigate further."}, {"creator": "lassey@chromium.org", "author": "lassey@chromium.org", "bug_id": 680311, "is_private": false, "count": 3, "tags": [], "id": 5741066, "text": "Created attachment 562843\npatch\n\nthis implements what dougt and I discussed. Essentially, behavior is unchanged unless we block for more than 1s, in which case we'll spin up the gecko message loop", "attachment_id": 562843, "time": "2011-09-27T20:05:00Z", "creation_time": "2011-09-27T20:05:00Z", "raw_text": "this implements what dougt and I discussed. Essentially, behavior is unchanged unless we block for more than 1s, in which case we'll spin up the gecko message loop"}, {"creator": "doug.turner@gmail.com", "author": "doug.turner@gmail.com", "creation_time": "2011-09-30T22:06:23Z", "raw_text": "so, for the file input case, we really don't want to wait 1 second first.", "text": "Comment on attachment 562843\npatch\n\nso, for the file input case, we really don't want to wait 1 second first.", "attachment_id": 562843, "time": "2011-09-30T22:06:23Z", "count": 4, "is_private": false, "tags": [], "id": 5750865, "bug_id": 680311}, {"count": 5, "is_private": false, "tags": [], "id": 5833065, "bug_id": 680311, "raw_text": "I am not tall enough to review this code", "creation_time": "2011-11-08T03:15:59Z", "text": "Comment on attachment 562843\npatch\n\nI am not tall enough to review this code", "attachment_id": 562843, "time": "2011-11-08T03:15:59Z", "creator": "mark.finkle@gmail.com", "author": "mark.finkle@gmail.com"}, {"author": "doug.turner@gmail.com", "creator": "doug.turner@gmail.com", "attachment_id": 562843, "time": "2011-11-15T03:53:08Z", "text": "Comment on attachment 562843\npatch\n\nReview of attachment 562843:\n-----------------------------------------------------------------\n\ndon't do that first 1s wait. always just loop for 1ms.  sorry for the long delay at reviewing this.", "raw_text": "Review of attachment 562843:\n-----------------------------------------------------------------\n\ndon't do that first 1s wait. always just loop for 1ms.  sorry for the long delay at reviewing this.", "creation_time": "2011-11-15T03:53:08Z", "bug_id": 680311, "id": 5848618, "tags": [], "is_private": false, "count": 6}, {"id": 5848623, "tags": [], "count": 7, "is_private": false, "bug_id": 680311, "raw_text": "also, keep in mind, that I am not sure why we'd need to spin any loop other than for the filepicker.  in that case we know that we have reentrancy.  doing the rest, seems to be overkill, but if it makes flash better..", "creation_time": "2011-11-15T03:57:43Z", "attachment_id": null, "time": "2011-11-15T03:57:43Z", "text": "also, keep in mind, that I am not sure why we'd need to spin any loop other than for the filepicker.  in that case we know that we have reentrancy.  doing the rest, seems to be overkill, but if it makes flash better..", "author": "doug.turner@gmail.com", "creator": "doug.turner@gmail.com"}, {"creator": "kbrosnan@mozilla.com", "author": "kbrosnan@mozilla.com", "creation_time": "2012-06-19T01:07:55Z", "raw_text": "Is this patch/bug still useful for Native? I see the file still exists in hg and looks like the sections of code it modifies still exist.", "text": "Is this patch/bug still useful for Native? I see the file still exists in hg and looks like the sections of code it modifies still exist.", "time": "2012-06-19T01:07:55Z", "attachment_id": null, "tags": [], "count": 8, "is_private": false, "id": 6401846, "bug_id": 680311}, {"author": "lassey@chromium.org", "creator": "lassey@chromium.org", "bug_id": 680311, "id": 6417574, "count": 9, "is_private": false, "tags": [], "time": "2012-06-24T03:42:06Z", "attachment_id": null, "text": "yes, still relevant to native fennec", "creation_time": "2012-06-24T03:42:06Z", "raw_text": "yes, still relevant to native fennec"}, {"author": "lassey@chromium.org", "creator": "lassey@chromium.org", "bug_id": 680311, "id": 9470705, "count": 10, "is_private": false, "tags": [], "attachment_id": null, "time": "2014-10-20T15:28:37Z", "text": "filter on [mass-p5]", "creation_time": "2014-10-20T15:28:37Z", "raw_text": "filter on [mass-p5]"}, {"raw_text": "Moving all open Core::Widget: Android bugs to GeckoView::General (then the triage owner of GeckoView will decide which ones are valuable and which ones should be closed).", "creation_time": "2021-11-04T17:48:23Z", "time": "2021-11-04T17:48:23Z", "attachment_id": null, "text": "Moving all open Core::Widget: Android bugs to GeckoView::General (then the triage owner of GeckoView will decide which ones are valuable and which ones should be closed).", "id": 15642761, "tags": [], "count": 11, "is_private": false, "bug_id": 680311, "author": "dkl@mozilla.com", "creator": "dkl@mozilla.com"}]}}}