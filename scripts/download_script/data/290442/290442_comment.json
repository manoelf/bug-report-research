{"bugs": {"290442": {"comments": [{"raw_text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0\n\nLet's consider this code :\n//////////////////////////////////\n<HTML>\n<HEAD>\n<TITLE> New Document </TITLE>\n</HEAD>\n<BODY>\n<SCRIPT LANGUAGE=\"JavaScript\">\n<!--\nvar myimg;\n\nvar j=0;\nvar nbMaxDisplayedItems = 1000;\n\nfunction dumpPropsOnScreen(objstr, maxlevel) {\n\tif (maxlevel==0) { document.write(\"****** Reached maximum search level\n******<BR>\"); return;}\n\tmaxlevel--;\n\tobj = eval(objstr);\n\tfor (var i in obj) {\n\t\ttype = typeof(obj[i]);\n\t\tmsg = objstr + \".\" + i;\n\t\tprintmsg = msg+\"=\"+obj[i]+\"<br>   - NbElements = \"+j;\n\t\tdocument.write(printmsg+'<BR>');//(1)\n\t\tj++;\n\t\tif (j>nbMaxDisplayedItems) { document.write(\"****** Reached maximum displayed\nitems ******<BR>\"); return;}\n\t\tif (type == \"object\" && obj[i]!=null && isNaN(i)) { \n\t\t\tdumpPropsOnScreen(msg, maxlevel);\n\t\t\tobj = eval(objstr);\n\t\t}\n\t}\n}\n\nmyimg = new Image();\n\nif (confirm('Start scripting...'))\n{\n\talert(\"Confirm is OK\");\n\tdumpPropsOnScreen(\"myimg\",15);\n}\n\n//-->\n</SCRIPT>\n</BODY>\n</HTML>\n///////////////////////////////////\n\nThis javascript code writes on the screen all the properties of the \"myimg\" object\nAt the 330th \"document.write\" (1), this javascript code restarts from the\nbeginning ?!??\nWe can see the confirm msgbox 'Start scripting...' appearing again\nI suppose that this is a software stack issue - If I remove the \"maxlevel\"\nparameter from my function, I can go up to 3000 items.\n\n\nReproducible: Always\n\nSteps to Reproduce:\n1.Load the web page in Firefox\n2.Answer 'OK' to the confirm msgbox 'Start scripting'\n3.You will see the msgbox 'Confirm is OK'\n4.You will see again the confirm msgbox 'Start scripting' (the code is being\nreloaded)\n\nActual Results:  \nIf you answer 'Cancel', you will see again the confirm msgbox 'Start scripting'\nAfter 15 times answering 'Cancel', the page will finish loading because it stops\non an exception :\nError: uncaught exception: [Exception... \"Component returned failure code:\n0x80004001 (NS_ERROR_NOT_IMPLEMENTED) [nsIDOM3Document.domConfig]\"  nsresult:\n\"0x80004001 (NS_ERROR_NOT_IMPLEMENTED)\"  location: \"JS frame ::\nfile:///I:/Mozilla%20Page%20Restart%20Bug.html :: dumpPropsOnScreen :: line 25\"\n data: no]\nThis exception is another issue : please note that the access to\n\"myimg.textContent\" and \"myimg.ownerDocument.domConfig\" return an error.\n\n\n\nExpected Results:  \nNot restart the javascript code - exception because of a software stack limitation.", "time": "2005-04-15T09:03:46Z", "id": 2476070, "bug_id": 290442, "count": 0, "text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0\n\nLet's consider this code :\n//////////////////////////////////\n<HTML>\n<HEAD>\n<TITLE> New Document </TITLE>\n</HEAD>\n<BODY>\n<SCRIPT LANGUAGE=\"JavaScript\">\n<!--\nvar myimg;\n\nvar j=0;\nvar nbMaxDisplayedItems = 1000;\n\nfunction dumpPropsOnScreen(objstr, maxlevel) {\n\tif (maxlevel==0) { document.write(\"****** Reached maximum search level\n******<BR>\"); return;}\n\tmaxlevel--;\n\tobj = eval(objstr);\n\tfor (var i in obj) {\n\t\ttype = typeof(obj[i]);\n\t\tmsg = objstr + \".\" + i;\n\t\tprintmsg = msg+\"=\"+obj[i]+\"<br>   - NbElements = \"+j;\n\t\tdocument.write(printmsg+'<BR>');//(1)\n\t\tj++;\n\t\tif (j>nbMaxDisplayedItems) { document.write(\"****** Reached maximum displayed\nitems ******<BR>\"); return;}\n\t\tif (type == \"object\" && obj[i]!=null && isNaN(i)) { \n\t\t\tdumpPropsOnScreen(msg, maxlevel);\n\t\t\tobj = eval(objstr);\n\t\t}\n\t}\n}\n\nmyimg = new Image();\n\nif (confirm('Start scripting...'))\n{\n\talert(\"Confirm is OK\");\n\tdumpPropsOnScreen(\"myimg\",15);\n}\n\n//-->\n</SCRIPT>\n</BODY>\n</HTML>\n///////////////////////////////////\n\nThis javascript code writes on the screen all the properties of the \"myimg\" object\nAt the 330th \"document.write\" (1), this javascript code restarts from the\nbeginning ?!??\nWe can see the confirm msgbox 'Start scripting...' appearing again\nI suppose that this is a software stack issue - If I remove the \"maxlevel\"\nparameter from my function, I can go up to 3000 items.\n\n\nReproducible: Always\n\nSteps to Reproduce:\n1.Load the web page in Firefox\n2.Answer 'OK' to the confirm msgbox 'Start scripting'\n3.You will see the msgbox 'Confirm is OK'\n4.You will see again the confirm msgbox 'Start scripting' (the code is being\nreloaded)\n\nActual Results:  \nIf you answer 'Cancel', you will see again the confirm msgbox 'Start scripting'\nAfter 15 times answering 'Cancel', the page will finish loading because it stops\non an exception :\nError: uncaught exception: [Exception... \"Component returned failure code:\n0x80004001 (NS_ERROR_NOT_IMPLEMENTED) [nsIDOM3Document.domConfig]\"  nsresult:\n\"0x80004001 (NS_ERROR_NOT_IMPLEMENTED)\"  location: \"JS frame ::\nfile:///I:/Mozilla%20Page%20Restart%20Bug.html :: dumpPropsOnScreen :: line 25\"\n data: no]\nThis exception is another issue : please note that the access to\n\"myimg.textContent\" and \"myimg.ownerDocument.domConfig\" return an error.\n\n\n\nExpected Results:  \nNot restart the javascript code - exception because of a software stack limitation.", "attachment_id": null, "creator": "anthony.groyer@parrot.fr", "is_private": false, "author": "anthony.groyer@parrot.fr", "tags": [], "creation_time": "2005-04-15T09:03:46Z"}, {"creator": "m-wada@usa.com", "attachment_id": null, "time": "2005-04-15T11:11:33Z", "raw_text": "This is probably caused by yourself - \"eval(objstr)\" and changing \"obj\" content\nwhile execution of \"for(i in obj)\".\n\nSee what is returned to \"for(i in obj){obj[i];}\".\n msg=''; myimage = new Image();\n for (i in myimage) { msg=msg+myimage[i]+\"<\"+\"br>\" ; }\n document.writeln(\"<\"+\"p\"+msg;\"<\"+\"/p\">) ;\n\nobj[i] becomes \"HTML document element\".\nAnd since you change content of obj while execution of \"for(i in obj)\", this is\ndone on higher element object than \"myimage\" object(\"HTML document object\"\netc.), and obj[i] becomes your script text in your HTML.\nThen your script is executed again by your \"eval(objstr)\".", "id": 2476114, "bug_id": 290442, "count": 1, "text": "This is probably caused by yourself - \"eval(objstr)\" and changing \"obj\" content\nwhile execution of \"for(i in obj)\".\n\nSee what is returned to \"for(i in obj){obj[i];}\".\n msg=''; myimage = new Image();\n for (i in myimage) { msg=msg+myimage[i]+\"<\"+\"br>\" ; }\n document.writeln(\"<\"+\"p\"+msg;\"<\"+\"/p\">) ;\n\nobj[i] becomes \"HTML document element\".\nAnd since you change content of obj while execution of \"for(i in obj)\", this is\ndone on higher element object than \"myimage\" object(\"HTML document object\"\netc.), and obj[i] becomes your script text in your HTML.\nThen your script is executed again by your \"eval(objstr)\".", "author": "m-wada@usa.com", "creation_time": "2005-04-15T11:11:33Z", "tags": [], "is_private": false}, {"is_private": false, "author": "m-wada@usa.com", "creation_time": "2005-04-15T11:14:11Z", "tags": [], "raw_text": "Correction.(Sorry for spam)\n document.writeln(\"<\"+\"p>\"+msg+\"<\"+\"/p>\") ;", "time": "2005-04-15T11:14:11Z", "id": 2476117, "bug_id": 290442, "count": 2, "text": "Correction.(Sorry for spam)\n document.writeln(\"<\"+\"p>\"+msg+\"<\"+\"/p>\") ;", "attachment_id": null, "creator": "m-wada@usa.com"}, {"count": 3, "text": "In fact, restoring \"obj\" by doing \"eval(objstr)\" works perfectly.\n\nAfter more investigation, I found that this behaviour is caused by a\n\"document.write\" of the \"innerHTML\" property.\nIn fact, I write again the actual contents of the HTML page, including the\nJavascript code. This Javascript code is immediately interpreted that causes to\nrestart my code with the \"confirm\" dialog box.\n\nEverything is clear now. \nThis bug is not a bug. It should be resolved.", "bug_id": 290442, "id": 2478576, "time": "2005-04-18T07:29:57Z", "raw_text": "In fact, restoring \"obj\" by doing \"eval(objstr)\" works perfectly.\n\nAfter more investigation, I found that this behaviour is caused by a\n\"document.write\" of the \"innerHTML\" property.\nIn fact, I write again the actual contents of the HTML page, including the\nJavascript code. This Javascript code is immediately interpreted that causes to\nrestart my code with the \"confirm\" dialog box.\n\nEverything is clear now. \nThis bug is not a bug. It should be resolved.", "creator": "anthony.groyer@parrot.fr", "attachment_id": null, "is_private": false, "creation_time": "2005-04-18T07:29:57Z", "tags": [], "author": "anthony.groyer@parrot.fr"}, {"creator": "m-wada@usa.com", "attachment_id": null, "raw_text": "(In reply to comment #3)\n> Everything is clear now. \nCongraturations.\nClosing as INVALID.\n\nBy the way, Bugzila.mozilla.org is NOT Help Center.\nPlease check at least whether user error is involved or not before open bug.", "time": "2005-04-18T09:35:59Z", "id": 2478635, "bug_id": 290442, "text": "(In reply to comment #3)\n> Everything is clear now. \nCongraturations.\nClosing as INVALID.\n\nBy the way, Bugzila.mozilla.org is NOT Help Center.\nPlease check at least whether user error is involved or not before open bug.", "count": 4, "author": "m-wada@usa.com", "creation_time": "2005-04-18T09:35:59Z", "tags": [], "is_private": false}]}}, "comments": {}}