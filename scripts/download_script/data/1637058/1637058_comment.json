{"bugs": {"1637058": {"comments": [{"author": "gmierz2@outlook.com", "tags": [], "attachment_id": null, "text": "This bug is for implementing what was discussed here: https://bugzilla.mozilla.org/show_bug.cgi?id=1633890#c5\n\nSpecifically, the `browsertime` specific code needs to be moved out of the core perfdocs code (which is where it is now [2]) and into the Raptor framework gatherer [3].\n\nTo do this, we need to implement a `build_test_descriptions` method in the framework gatherers that takes as arguments a test name and a description and returns a document section/chunk for that test.\n\nThe method should look something like:\n```\ndef build_test_description(test_name, test_description=None):\n    # Build test description, or modify the given description into a document chunk\n    return <DOCUMENT-CHUNK>\n```\n\nFor example, if we call it like: `build_test_description(\"amazon\", \"Browsertime amazon desktop test\")`\n\nThen, it would return:\n```\n>> ret = build_test_description(\"amazon\", \"Browsertime amazon desktop test.\")\n>> ret\nBrowsertime amazon\n^^^^^^^^^^^^^^^^^\nBrowsertime amazon desktop test.\n```\n\nNote that the `_append_rst_section` function [1] will also need to be moved into the framework gatherer along with the browsertime specific code below it [2].\n\n[1]: https://searchfox.org/mozilla-central/source/tools/lint/perfdocs/generator.py#62-76\n[2]: https://searchfox.org/mozilla-central/source/tools/lint/perfdocs/generator.py#98-112\n[3]: https://searchfox.org/mozilla-central/source/tools/lint/perfdocs/framework_gatherers.py#69", "creation_time": "2020-05-11T19:43:51Z", "id": 14810508, "bug_id": 1637058, "creator": "gmierz2@outlook.com", "is_private": false, "raw_text": "This bug is for implementing what was discussed here: https://bugzilla.mozilla.org/show_bug.cgi?id=1633890#c5\n\nSpecifically, the `browsertime` specific code needs to be moved out of the core perfdocs code (which is where it is now [2]) and into the Raptor framework gatherer [3].\n\nTo do this, we need to implement a `build_test_descriptions` method in the framework gatherers that takes as arguments a test name and a description and returns a document section/chunk for that test.\n\nThe method should look something like:\n```\ndef build_test_description(test_name, test_description=None):\n    # Build test description, or modify the given description into a document chunk\n    return <DOCUMENT-CHUNK>\n```\n\nFor example, if we call it like: `build_test_description(\"amazon\", \"Browsertime amazon desktop test\")`\n\nThen, it would return:\n```\n>> ret = build_test_description(\"amazon\", \"Browsertime amazon desktop test.\")\n>> ret\nBrowsertime amazon\n^^^^^^^^^^^^^^^^^\nBrowsertime amazon desktop test.\n```\n\nNote that the `_append_rst_section` function [1] will also need to be moved into the framework gatherer along with the browsertime specific code below it [2].\n\n[1]: https://searchfox.org/mozilla-central/source/tools/lint/perfdocs/generator.py#62-76\n[2]: https://searchfox.org/mozilla-central/source/tools/lint/perfdocs/generator.py#98-112\n[3]: https://searchfox.org/mozilla-central/source/tools/lint/perfdocs/framework_gatherers.py#69", "time": "2020-05-11T19:43:51Z", "count": 0}, {"creation_time": "2020-05-12T06:38:07Z", "text": "Sparky, by what [_append_rst_section](https://searchfox.org/mozilla-central/source/tools/lint/perfdocs/generator.py#62-76) does it's part of the generation of the document, not gathering. I would keep all the info inside the [list of dictionaries self._perfdocs_tree](https://searchfox.org/mozilla-central/source/tools/lint/perfdocs/gatherer.py#36) and do it inside the generator to keep gatherer and generator functions separate. If there a good reason why we are doing this?", "tags": [], "author": "aionescu@mozilla.com", "attachment_id": null, "count": 1, "is_private": false, "time": "2020-05-12T06:38:07Z", "raw_text": "Sparky, by what [_append_rst_section](https://searchfox.org/mozilla-central/source/tools/lint/perfdocs/generator.py#62-76) does it's part of the generation of the document, not gathering. I would keep all the info inside the [list of dictionaries self._perfdocs_tree](https://searchfox.org/mozilla-central/source/tools/lint/perfdocs/gatherer.py#36) and do it inside the generator to keep gatherer and generator functions separate. If there a good reason why we are doing this?", "creator": "aionescu@mozilla.com", "id": 14813515, "bug_id": 1637058}, {"author": "gmierz2@outlook.com", "tags": [], "creator": "gmierz2@outlook.com", "attachment_id": null, "id": 14813803, "bug_id": 1637058, "count": 2, "is_private": false, "raw_text": "Appending to the document is part of the core (so that would need to stay), but building the chunk of text that is appended isn't. We should probably rename the raptor gatherer to something like RaptorDocs to make it clearer that it will contain methods that are specific to a particular framework, and not specifically for gathering.\n\nWe need to remove the browsertime-specific code out of the core code, it shouldn't be there and this is the best way we could do this. Furthermore, it's possible that other frameworks won't want to use the same style and with this they would be able to modify the test description portion of the document.", "creation_time": "2020-05-12T11:21:34Z", "time": "2020-05-12T11:21:34Z", "text": "Appending to the document is part of the core (so that would need to stay), but building the chunk of text that is appended isn't. We should probably rename the raptor gatherer to something like RaptorDocs to make it clearer that it will contain methods that are specific to a particular framework, and not specifically for gathering.\n\nWe need to remove the browsertime-specific code out of the core code, it shouldn't be there and this is the best way we could do this. Furthermore, it's possible that other frameworks won't want to use the same style and with this they would be able to modify the test description portion of the document."}, {"creation_time": "2020-05-18T15:38:14Z", "text": "Created attachment 9149880\nBug 1637058 - Move raptor-specific code out of the core perfdocs code r=sparky", "author": "myeongjun.ko@gmail.com", "tags": [], "attachment_id": 9149880, "is_private": false, "raw_text": "", "time": "2020-05-18T15:38:14Z", "count": 3, "id": 14828723, "bug_id": 1637058, "creator": "myeongjun.ko@gmail.com"}, {"bug_id": 1637058, "id": 14842407, "attachment_id": null, "creator": "pulsebot@bots.tld", "tags": [], "author": "pulsebot@bots.tld", "creation_time": "2020-05-25T16:16:14Z", "time": "2020-05-25T16:16:14Z", "text": "Pushed by gmierz2@outlook.com:\nhttps://hg.mozilla.org/integration/autoland/rev/7bb713b8b059\nMove raptor-specific code out of the core perfdocs code r=sparky", "raw_text": "Pushed by gmierz2@outlook.com:\nhttps://hg.mozilla.org/integration/autoland/rev/7bb713b8b059\nMove raptor-specific code out of the core perfdocs code r=sparky", "is_private": false, "count": 4}, {"count": 5, "is_private": false, "raw_text": "https://hg.mozilla.org/mozilla-central/rev/7bb713b8b059", "time": "2020-05-26T02:42:35Z", "creator": "ncsoregi@mozilla.com", "id": 14843055, "bug_id": 1637058, "creation_time": "2020-05-26T02:42:35Z", "text": "https://hg.mozilla.org/mozilla-central/rev/7bb713b8b059", "author": "ncsoregi@mozilla.com", "tags": ["bugherder"], "attachment_id": null}]}}, "comments": {}}