{"comments": {}, "bugs": {"1634626": {"comments": [{"tags": [], "count": 0, "time": "2020-05-01T05:05:52Z", "creation_time": "2020-05-01T05:05:52Z", "creator": "lina@yakshaving.ninja", "bug_id": 1634626, "attachment_id": null, "is_private": false, "raw_text": "The commit messages have more details!", "text": "The commit messages have more details!", "author": "lina@yakshaving.ninja", "id": 14790540}, {"creator": "lina@yakshaving.ninja", "creation_time": "2020-05-01T05:17:31Z", "count": 1, "tags": [], "time": "2020-05-01T05:17:31Z", "raw_text": "This will need https://github.com/mozilla/application-services/pull/3063 to land first, and then vendored.", "text": "This will need https://github.com/mozilla/application-services/pull/3063 to land first, and then vendored.", "is_private": false, "author": "lina@yakshaving.ninja", "id": 14790547, "bug_id": 1634626, "attachment_id": null}, {"raw_text": "\nThis commit removes the `nsICancelable` return values from all\n`mozIBridgedSyncEngine` methods, and replaces them with a\n`mozIInterruptible` interface that can be implemented by store\nclasses that support interrupting.\n\nThe `nsICancelable` pattern was intended to make each operation\ninterruptible, without affecting the others. But we can't guarantee\nthat with SQLite, because it only has a way to interrupt all\nrunning statements on a connection, not specific ones. Further,\nthis pattern doesn't match what we currently do in a-s, where we\ncreate an internal \"interrupt scope\" for each operation, and hand\nout an \"interrupt handle\" for interrupting all in-progress\noperations.\n\nStorage classes like `StorageSyncArea` can opt in to interruption\nby implementing `mozIInterruptible`. It's a separate interface to\nprotect against accidental misuse: because it interrupts all\nstatements on the connection, it might lose writes if the current\noperation is a `set`, for example. But it's useful for testing and\ndebugging, so we still expose it.\n\nThis commit also changes Golden Gate ferries to hold weak references to\nthe `BridgedEngine`, so that they don't block teardown.", "text": "Created attachment 9144952\nBug 1634626 - Refactor interruption in Golden Gate. r?markh!,tcsc\n\n\nThis commit removes the `nsICancelable` return values from all\n`mozIBridgedSyncEngine` methods, and replaces them with a\n`mozIInterruptible` interface that can be implemented by store\nclasses that support interrupting.\n\nThe `nsICancelable` pattern was intended to make each operation\ninterruptible, without affecting the others. But we can't guarantee\nthat with SQLite, because it only has a way to interrupt all\nrunning statements on a connection, not specific ones. Further,\nthis pattern doesn't match what we currently do in a-s, where we\ncreate an internal \"interrupt scope\" for each operation, and hand\nout an \"interrupt handle\" for interrupting all in-progress\noperations.\n\nStorage classes like `StorageSyncArea` can opt in to interruption\nby implementing `mozIInterruptible`. It's a separate interface to\nprotect against accidental misuse: because it interrupts all\nstatements on the connection, it might lose writes if the current\noperation is a `set`, for example. But it's useful for testing and\ndebugging, so we still expose it.\n\nThis commit also changes Golden Gate ferries to hold weak references to\nthe `BridgedEngine`, so that they don't block teardown.", "is_private": false, "author": "lina@yakshaving.ninja", "id": 14790548, "bug_id": 1634626, "attachment_id": 9144952, "creator": "lina@yakshaving.ninja", "creation_time": "2020-05-01T05:18:50Z", "count": 2, "tags": [], "time": "2020-05-01T05:18:50Z"}, {"attachment_id": 9144953, "bug_id": 1634626, "author": "lina@yakshaving.ninja", "id": 14790549, "is_private": false, "text": "Created attachment 9144953\nBug 1634626 - Add interrupt support for `StorageSyncArea`. r?markh!,tcsc\n\n\nThis commit adds a `mozIInterruptible` implementation to\n`StorageSyncArea`, and changes `LazyStore` to get an a-s interrupt\nhandle and interrupt pending operations.\n\nDepends on D73413", "raw_text": "\nThis commit adds a `mozIInterruptible` implementation to\n`StorageSyncArea`, and changes `LazyStore` to get an a-s interrupt\nhandle and interrupt pending operations.\n\nDepends on D73413", "time": "2020-05-01T05:19:09Z", "tags": [], "count": 3, "creation_time": "2020-05-01T05:19:09Z", "creator": "lina@yakshaving.ninja"}, {"text": "https://treeherder.mozilla.org/#/jobs?repo=try&revision=6322af166c0a7bce23c829c28972978782c596b8", "raw_text": "https://treeherder.mozilla.org/#/jobs?repo=try&revision=6322af166c0a7bce23c829c28972978782c596b8", "is_private": false, "creator": "lina@yakshaving.ninja", "author": "lina@yakshaving.ninja", "creation_time": "2020-05-04T21:53:11Z", "id": 14796704, "bug_id": 1634626, "count": 4, "tags": [], "time": "2020-05-04T21:53:11Z", "attachment_id": null}, {"is_private": false, "raw_text": "Pushed by kcambridge@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/21428ee332e8\nRefactor interruption in Golden Gate. r=markh,tcsc\nhttps://hg.mozilla.org/integration/autoland/rev/55299ca145f3\nAdd interrupt support for `StorageSyncArea`. r=markh,tcsc", "text": "Pushed by kcambridge@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/21428ee332e8\nRefactor interruption in Golden Gate. r=markh,tcsc\nhttps://hg.mozilla.org/integration/autoland/rev/55299ca145f3\nAdd interrupt support for `StorageSyncArea`. r=markh,tcsc", "author": "pulsebot@bots.tld", "id": 14796706, "bug_id": 1634626, "attachment_id": null, "creation_time": "2020-05-04T21:53:58Z", "creator": "pulsebot@bots.tld", "tags": [], "count": 5, "time": "2020-05-04T21:53:58Z"}, {"creator": "ccoroiu@mozilla.com", "id": 14797067, "creation_time": "2020-05-05T03:55:22Z", "author": "ccoroiu@mozilla.com", "raw_text": "https://hg.mozilla.org/mozilla-central/rev/21428ee332e8\nhttps://hg.mozilla.org/mozilla-central/rev/55299ca145f3", "text": "https://hg.mozilla.org/mozilla-central/rev/21428ee332e8\nhttps://hg.mozilla.org/mozilla-central/rev/55299ca145f3", "is_private": false, "time": "2020-05-05T03:55:22Z", "attachment_id": null, "bug_id": 1634626, "count": 6, "tags": ["bugherder"]}, {"attachment_id": 9167949, "time": "2020-08-04T17:07:56Z", "count": 7, "bug_id": 1634626, "tags": [], "creator": "pulgasaur@mozilla.bugs", "id": 14972013, "creation_time": "2020-08-04T17:07:56Z", "author": "pulgasaur@mozilla.bugs", "text": "Created attachment 9167949\nLink to GitHub pull-request: https://github.com/mozilla/glean/pull/1126", "raw_text": "", "is_private": false}, {"creator": "jrediger@mozilla.com", "creation_time": "2020-08-05T09:16:11Z", "count": 8, "tags": [], "time": "2020-08-05T09:16:11Z", "text": "Comment on attachment 9167949\nLink to GitHub pull-request: https://github.com/mozilla/glean/pull/1126\n\n(sorry for the noise, the PR was attached here by accident)", "raw_text": "(sorry for the noise, the PR was attached here by accident)", "is_private": false, "author": "jrediger@mozilla.com", "id": 14973147, "bug_id": 1634626, "attachment_id": 9167949}]}}}