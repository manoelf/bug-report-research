{"bugs": {"695856": {"comments": [{"creation_time": "2011-10-19T21:06:03Z", "is_private": false, "creator": "bholley@mozilla.com", "tags": [], "attachment_id": null, "bug_id": 695856, "id": 5792990, "text": "When the headers for references are generated, XPIDL will always convert:\n\n[ref] T foo;\n\nto\n\nT & foo;\n\nUnfortunately, the calling convention dictates that we use an extra level of indirection for outparams. So XPConnect will pass the callee a T**, and the callee will interpret it as a T&, leading to crashes. This happened to me when I tried to do an out nsIDRef.\n\nWe could fix this in various ways, but it seems simplest just to forbid it in the compiler.\n\nAssigning to khuey since that seems to be how we roll. ;-)", "count": 0, "author": "bholley@mozilla.com", "raw_text": "When the headers for references are generated, XPIDL will always convert:\n\n[ref] T foo;\n\nto\n\nT & foo;\n\nUnfortunately, the calling convention dictates that we use an extra level of indirection for outparams. So XPConnect will pass the callee a T**, and the callee will interpret it as a T&, leading to crashes. This happened to me when I tried to do an out nsIDRef.\n\nWe could fix this in various ways, but it seems simplest just to forbid it in the compiler.\n\nAssigning to khuey since that seems to be how we roll. ;-)", "time": "2011-10-19T21:06:03Z"}]}}, "comments": {}}