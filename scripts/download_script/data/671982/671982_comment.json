{"comments": {}, "bugs": {"671982": {"comments": [{"is_private": false, "creator": "adw@mozilla.com", "count": 0, "creation_time": "2011-07-15T22:32:38Z", "author": "adw@mozilla.com", "text": "Scratchpad's \"Open File\" command is great for me, since I like to edit in Emacs, and it lets me keep long-lived scratch work.  But whenever I modify my file and want to run it, I have to open it all over again, which involves navigating a file picker.  It would be great if Scratchpad somehow saw that my file had changed on disk and automatically reloaded it.\n\nTwo suggested designs -- both would become \"active\" only after a file has been opened:\n\nOption 1: A \"Reload and Run\" command (say, Cmd+Shift+R).  If the text in Scratchpad's UI hasn't been modified, then \"Reload and Run\" re-opens the file, updates the UI, and runs it.  If the text has been modified, then it warns the user that his modifications will be lost and asks if he wants to continue.\n\nOption 2: Detect when the currently opened file has changed on disk.  When that happens, if the text in Scratchpad's UI hasn't been modified, silently update the UI with the contents of the file.  If the text has been modified, then ask the user what to do: either update the UI or not.  This is how Apple's Xcode works, and it works well IMO.\n\nIs this something you guys would accept?  If so, I'd like to work on it.", "bug_id": 671982, "tags": [], "time": "2011-07-15T22:32:38Z", "attachment_id": null, "raw_text": "Scratchpad's \"Open File\" command is great for me, since I like to edit in Emacs, and it lets me keep long-lived scratch work.  But whenever I modify my file and want to run it, I have to open it all over again, which involves navigating a file picker.  It would be great if Scratchpad somehow saw that my file had changed on disk and automatically reloaded it.\n\nTwo suggested designs -- both would become \"active\" only after a file has been opened:\n\nOption 1: A \"Reload and Run\" command (say, Cmd+Shift+R).  If the text in Scratchpad's UI hasn't been modified, then \"Reload and Run\" re-opens the file, updates the UI, and runs it.  If the text has been modified, then it warns the user that his modifications will be lost and asks if he wants to continue.\n\nOption 2: Detect when the currently opened file has changed on disk.  When that happens, if the text in Scratchpad's UI hasn't been modified, silently update the UI with the contents of the file.  If the text has been modified, then ask the user what to do: either update the UI or not.  This is how Apple's Xcode works, and it works well IMO.\n\nIs this something you guys would accept?  If so, I'd like to work on it.", "id": 5594397}, {"id": 5597064, "raw_text": "We would absolutely accept something like this.\n\nOne possibility for Option 2 could be to stat the file on opening, and store the last-modified timestamp for the file.\n\nLater, on scratchpad focus, restat the file and compare the timestamps. If it's been touched, ask or automatically update the file.\n\nThis could be awesome for allowing external editing of scratchpad files in the editor of your choice.\n\nNice.", "attachment_id": null, "text": "We would absolutely accept something like this.\n\nOne possibility for Option 2 could be to stat the file on opening, and store the last-modified timestamp for the file.\n\nLater, on scratchpad focus, restat the file and compare the timestamps. If it's been touched, ask or automatically update the file.\n\nThis could be awesome for allowing external editing of scratchpad files in the editor of your choice.\n\nNice.", "time": "2011-07-18T18:32:34Z", "tags": [], "bug_id": 671982, "creation_time": "2011-07-18T18:32:34Z", "author": "rcampbell@mozilla.com", "count": 1, "is_private": false, "creator": "rcampbell@mozilla.com"}, {"attachment_id": null, "raw_text": "(In reply to comment #1)\n\n> This could be awesome for allowing external editing of scratchpad files in\n> the editor of your choice.\n\n+1 \n\nPerhaps along with this another key command for 'reload from disk' so you can toggle between emacs and firefox and not have to always edit in the scratchpad, which would speed up the workflow at times.", "id": 5597281, "is_private": false, "creator": "bugzilla@nulltxt.se", "count": 2, "creation_time": "2011-07-18T19:25:48Z", "author": "bugzilla@nulltxt.se", "text": "(In reply to comment #1)\n\n> This could be awesome for allowing external editing of scratchpad files in\n> the editor of your choice.\n\n+1 \n\nPerhaps along with this another key command for 'reload from disk' so you can toggle between emacs and firefox and not have to always edit in the scratchpad, which would speed up the workflow at times.", "time": "2011-07-18T19:25:48Z", "tags": [], "bug_id": 671982}, {"id": 5597291, "raw_text": "I did a bit of research on this a while ago and it appears we do not have the inotify-like multiplatform xpcom interface that would be required for efficient implementation of this feature.\n\nShould we open a separate bug?", "attachment_id": null, "text": "I did a bit of research on this a while ago and it appears we do not have the inotify-like multiplatform xpcom interface that would be required for efficient implementation of this feature.\n\nShould we open a separate bug?", "tags": [], "bug_id": 671982, "time": "2011-07-18T19:29:07Z", "creation_time": "2011-07-18T19:29:07Z", "author": "cedricv@neonux.com", "count": 3, "is_private": false, "creator": "cedricv@neonux.com"}, {"creator": "adw@mozilla.com", "is_private": false, "count": 4, "author": "adw@mozilla.com", "creation_time": "2011-07-18T19:32:12Z", "bug_id": 671982, "time": "2011-07-18T19:32:12Z", "tags": [], "text": "I have a patch that just stats the file (actually, it's just using nsILocalFile) each time that Scratchpad's window is focused.  Kind of cheating, but it works OK, assuming an actual human is externally editing the file using the same desktop as the one Scratchpad's running in.", "attachment_id": null, "raw_text": "I have a patch that just stats the file (actually, it's just using nsILocalFile) each time that Scratchpad's window is focused.  Kind of cheating, but it works OK, assuming an actual human is externally editing the file using the same desktop as the one Scratchpad's running in.", "id": 5597301}, {"attachment_id": null, "raw_text": "Will not work when Scratchpad is integrated in the browser... or would require also to use nsIWindowWatcher to check the browser window focus moreover the scratchpad focused for the current tab.", "id": 5597331, "creator": "cedricv@neonux.com", "is_private": false, "author": "cedricv@neonux.com", "creation_time": "2011-07-18T19:39:49Z", "tags": [], "time": "2011-07-18T19:39:49Z", "text": "Will not work when Scratchpad is integrated in the browser... or would require also to use nsIWindowWatcher to check the browser window focus moreover the scratchpad focused for the current tab.", "count": 5, "bug_id": 671982}, {"attachment_id": null, "raw_text": "I think the proper response to my comment is, \"Wow, that's a clever hack.\"\n\nEven if Scratchpad were inside a tab or browser window, tabs and browser windows are focused too.  Actually, it would probably be better to check for focus on the textbox.", "id": 5597368, "creator": "adw@mozilla.com", "is_private": false, "count": 6, "author": "adw@mozilla.com", "creation_time": "2011-07-18T19:56:05Z", "time": "2011-07-18T19:56:05Z", "bug_id": 671982, "tags": [], "text": "I think the proper response to my comment is, \"Wow, that's a clever hack.\"\n\nEven if Scratchpad were inside a tab or browser window, tabs and browser windows are focused too.  Actually, it would probably be better to check for focus on the textbox."}, {"raw_text": "Right, listening 'focus' on the scratchpad textbox might work great in most cases.\nI'm sorry if I forgot a \"probably\" or a \"might\" and/or my comment sounded rude, it was not intended ;)", "attachment_id": null, "id": 5597381, "count": 7, "is_private": false, "creator": "cedricv@neonux.com", "text": "Right, listening 'focus' on the scratchpad textbox might work great in most cases.\nI'm sorry if I forgot a \"probably\" or a \"might\" and/or my comment sounded rude, it was not intended ;)", "tags": [], "time": "2011-07-18T20:05:37Z", "bug_id": 671982, "creation_time": "2011-07-18T20:05:37Z", "author": "cedricv@neonux.com"}, {"id": 5597399, "raw_text": "Might need a combination of checking focus and blur though.\nThe user would otherwise have to be careful to use \"Alt-Tab\" or click directly in the Scratchpad's textbox in order to put the browser window to foreground again.\n\nAlso on a dual-screen setup, this whole focus dance looks weird/unnecessary.\n\nNot that the hack is not clever and certainly is nice meanwhile but I guess we both agree this is not \"the right way (tm)\".", "attachment_id": null, "bug_id": 671982, "time": "2011-07-18T20:13:37Z", "tags": [], "text": "Might need a combination of checking focus and blur though.\nThe user would otherwise have to be careful to use \"Alt-Tab\" or click directly in the Scratchpad's textbox in order to put the browser window to foreground again.\n\nAlso on a dual-screen setup, this whole focus dance looks weird/unnecessary.\n\nNot that the hack is not clever and certainly is nice meanwhile but I guess we both agree this is not \"the right way (tm)\".", "author": "cedricv@neonux.com", "creation_time": "2011-07-18T20:13:37Z", "count": 8, "creator": "cedricv@neonux.com", "is_private": false}, {"id": 5597700, "attachment_id": null, "raw_text": "(In reply to comment #4)\n> I have a patch that just stats the file (actually, it's just using\n> nsILocalFile) each time that Scratchpad's window is focused.  Kind of\n> cheating, but it works OK, assuming an actual human is externally editing\n> the file using the same desktop as the one Scratchpad's running in.\n\nwow, that's a clever hack! ;)\n\nkinda sounds like what I suggested in comment 1.\n\nIn any case, I think when we embed the scratchpad, I'm not sure we'll provide a full file menu. Embedded scratchpads will likely be more simplistic.", "creation_time": "2011-07-18T21:44:43Z", "author": "rcampbell@mozilla.com", "text": "(In reply to comment #4)\n> I have a patch that just stats the file (actually, it's just using\n> nsILocalFile) each time that Scratchpad's window is focused.  Kind of\n> cheating, but it works OK, assuming an actual human is externally editing\n> the file using the same desktop as the one Scratchpad's running in.\n\nwow, that's a clever hack! ;)\n\nkinda sounds like what I suggested in comment 1.\n\nIn any case, I think when we embed the scratchpad, I'm not sure we'll provide a full file menu. Embedded scratchpads will likely be more simplistic.", "time": "2011-07-18T21:44:43Z", "bug_id": 671982, "tags": [], "is_private": false, "creator": "rcampbell@mozilla.com", "count": 9}, {"bug_id": 671982, "time": "2012-01-17T16:18:31Z", "tags": [], "text": "filter on PEGASUS.", "author": "rcampbell@mozilla.com", "creation_time": "2012-01-17T16:18:31Z", "count": 10, "creator": "rcampbell@mozilla.com", "is_private": false, "id": 5985439, "raw_text": "filter on PEGASUS.", "attachment_id": null}, {"id": 8562855, "attachment_id": null, "raw_text": "", "creation_time": "2014-03-21T14:05:19Z", "author": "yfdyh000@gmail.com", "text": "*** Bug 986035 has been marked as a duplicate of this bug. ***", "bug_id": 671982, "time": "2014-03-21T14:05:19Z", "tags": [], "is_private": false, "creator": "yfdyh000@gmail.com", "count": 11}]}}}