{"comments": {}, "bugs": {"689284": {"comments": [{"creation_time": "2011-09-26T20:57:14Z", "is_private": false, "bug_id": 689284, "id": 5738021, "author": "jdemooij@mozilla.com", "count": 0, "text": "Analysis and compilation time can be a serious problem for very large scripts. For instance, sqlite.js (bug 687127) contains a function with ~15,000 lines (_sqlite3VdbeExec). Analyzing + compiling this function takes more than 3 seconds and we do this multiple times.\n\nQuote from IRC:\n\n<bhackett> the large-time-for-a-single-analyze/compile thing is just inefficient algorithms in the SSA/compiler", "creator": "jdemooij@mozilla.com", "tags": [], "attachment_id": null, "raw_text": "Analysis and compilation time can be a serious problem for very large scripts. For instance, sqlite.js (bug 687127) contains a function with ~15,000 lines (_sqlite3VdbeExec). Analyzing + compiling this function takes more than 3 seconds and we do this multiple times.\n\nQuote from IRC:\n\n<bhackett> the large-time-for-a-single-analyze/compile thing is just inefficient algorithms in the SSA/compiler", "time": "2011-09-26T20:57:14Z"}, {"raw_text": "bhackett: is this something you could mentor a volunteer to fix? I forget how to mark up such a bug, but Luke knows.\n\n/be", "attachment_id": null, "time": "2011-09-26T22:24:26Z", "tags": [], "text": "bhackett: is this something you could mentor a volunteer to fix? I forget how to mark up such a bug, but Luke knows.\n\n/be", "count": 1, "author": "brendan@mozilla.org", "creator": "brendan@mozilla.org", "is_private": false, "creation_time": "2011-09-26T22:24:26Z", "id": 5738344, "bug_id": 689284}, {"bug_id": 689284, "id": 5738365, "count": 2, "text": "Possibly.  There are a couple issues here (which should probably be different bugs): fix inefficient algorithms that make analysis/compilation of large scripts slow, and fix the compiler so that recompilations are much less expensive (piecemeal compilation).  The latter will be harder than the former, though the former probably isn't all that easy either.  If someone wants to work on this that would be great, otherwise I want to start working on doing this and getting it right sometime in the next few weeks (after shape and partial object shrinking).  What we learn here about efficiently compiling large scripts will feed into IonMonkey.", "author": "bhackett1024@gmail.com", "raw_text": "Possibly.  There are a couple issues here (which should probably be different bugs): fix inefficient algorithms that make analysis/compilation of large scripts slow, and fix the compiler so that recompilations are much less expensive (piecemeal compilation).  The latter will be harder than the former, though the former probably isn't all that easy either.  If someone wants to work on this that would be great, otherwise I want to start working on doing this and getting it right sometime in the next few weeks (after shape and partial object shrinking).  What we learn here about efficiently compiling large scripts will feed into IonMonkey.", "time": "2011-09-26T22:33:36Z", "creation_time": "2011-09-26T22:33:36Z", "is_private": false, "creator": "bhackett1024@gmail.com", "tags": [], "attachment_id": null}, {"creator": "n.nethercote@gmail.com", "count": 3, "text": "> bhackett: is this something you could mentor a volunteer to fix? I forget\n> how to mark up such a bug, but Luke knows.\n\n\"[mentor=bhackett]\" and maybe a \"[good first bug]\" for good luck, though the latter is gradually being phased out.", "author": "n.nethercote@gmail.com", "bug_id": 689284, "id": 5745015, "is_private": false, "creation_time": "2011-09-29T01:36:13Z", "time": "2011-09-29T01:36:13Z", "raw_text": "> bhackett: is this something you could mentor a volunteer to fix? I forget\n> how to mark up such a bug, but Luke knows.\n\n\"[mentor=bhackett]\" and maybe a \"[good first bug]\" for good luck, though the latter is gradually being phased out.", "attachment_id": null, "tags": []}, {"author": "bugzilla.mozilla.org@infinite-source.de", "count": 4, "text": "If a script is sufficiently large/complex that the compilation overhead is noticeable, wouldn't it make sense to move the compilation to a background thread? \n\nThe java hotspot VM does that and runs the code in interepreter mode while its compiling. This way it makes (slow) progress instead of having to wait.", "bug_id": 689284, "id": 5949132, "time": "2012-01-01T22:42:48Z", "raw_text": "If a script is sufficiently large/complex that the compilation overhead is noticeable, wouldn't it make sense to move the compilation to a background thread? \n\nThe java hotspot VM does that and runs the code in interepreter mode while its compiling. This way it makes (slow) progress instead of having to wait.", "creator": "bugzilla.mozilla.org@infinite-source.de", "creation_time": "2012-01-01T22:42:48Z", "is_private": false, "attachment_id": null, "tags": []}]}}}