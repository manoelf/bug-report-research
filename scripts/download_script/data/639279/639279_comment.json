{"comments": {}, "bugs": {"639279": {"comments": [{"author": "wurst99@gmx.de", "is_private": false, "id": 5325505, "attachment_id": null, "creation_time": "2011-03-06T10:59:40Z", "tags": [], "bug_id": 639279, "count": 0, "time": "2011-03-06T10:59:40Z", "creator": "wurst99@gmx.de", "raw_text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.9.2.15) Gecko/20110303 Firefox/3.6.15\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.9.2.15) Gecko/20110303 Firefox/3.6.15\n\nWhenever loading a page that comes without charset header FF rerequests the page when encountering a special (non-ascii?) char (like say c4 from iso-8859-1).\nThis happens once for every URL. If you reload the page manually only one request is sent.\nJust realized that this does not happen with charset detection set to its default (none?).\n\nReproducible: Always\n\nSteps to Reproduce:\n1. Create a, e.g., plain text or html file with a non ascii character inside on your server (I used Apache)\n2. set the server as to not send a charset inside the header\n3. set charset detection to universal in FF\n4. request the file via FF\nActual Results:  \nFF duplicates the original request when stumbling upon the special char, only one load flag differs from the original request as far as i could see\n\nExpected Results:  \nOnly one request being made\n\nI can't tell if this behaviour is intended but it didn't make my day since it was quite odd and not easy for me to find the source of my problems.\n\nIf this is by intent can anyone tell me about the purpose of this?\nSince FF doesn't get into a loop: why does FF only re-requests on the appearance of a special char in the first request?\n\nI'll mark its severity as normal since it's not obvious how to work around (especially without affecting other sites) and you usually don't have access to the server config - you usually even don't see the duplicated request. As an adminstrator or developer you might have a reason to not send the header or just forgot or are not able to control it or ... and you don't know about the browser configuration and run into trouble especially in case the request in question manipulates data on the server.", "text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.9.2.15) Gecko/20110303 Firefox/3.6.15\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.9.2.15) Gecko/20110303 Firefox/3.6.15\n\nWhenever loading a page that comes without charset header FF rerequests the page when encountering a special (non-ascii?) char (like say c4 from iso-8859-1).\nThis happens once for every URL. If you reload the page manually only one request is sent.\nJust realized that this does not happen with charset detection set to its default (none?).\n\nReproducible: Always\n\nSteps to Reproduce:\n1. Create a, e.g., plain text or html file with a non ascii character inside on your server (I used Apache)\n2. set the server as to not send a charset inside the header\n3. set charset detection to universal in FF\n4. request the file via FF\nActual Results:  \nFF duplicates the original request when stumbling upon the special char, only one load flag differs from the original request as far as i could see\n\nExpected Results:  \nOnly one request being made\n\nI can't tell if this behaviour is intended but it didn't make my day since it was quite odd and not easy for me to find the source of my problems.\n\nIf this is by intent can anyone tell me about the purpose of this?\nSince FF doesn't get into a loop: why does FF only re-requests on the appearance of a special char in the first request?\n\nI'll mark its severity as normal since it's not obvious how to work around (especially without affecting other sites) and you usually don't have access to the server config - you usually even don't see the duplicated request. As an adminstrator or developer you might have a reason to not send the header or just forgot or are not able to control it or ... and you don't know about the browser configuration and run into trouble especially in case the request in question manipulates data on the server."}, {"bug_id": 639279, "text": "Does this still occur with the latest nightly and a clean profile?\nhttp://support.mozilla.com/kb/Basic+Troubleshooting#w_make-a-new-profile\nhttp://nightly.mozilla.org/", "attachment_id": null, "creation_time": "2011-03-06T15:21:11Z", "tags": [], "creator": "emorley@mozilla.com", "raw_text": "Does this still occur with the latest nightly and a clean profile?\nhttp://support.mozilla.com/kb/Basic+Troubleshooting#w_make-a-new-profile\nhttp://nightly.mozilla.org/", "id": 5325735, "is_private": false, "count": 1, "time": "2011-03-06T15:21:11Z", "author": "emorley@mozilla.com"}, {"tags": [], "creation_time": "2011-03-07T12:57:44Z", "attachment_id": null, "raw_text": "(In reply to comment #1)\n> Does this still occur with the latest nightly and a clean profile?\n> http://support.mozilla.com/kb/Basic+Troubleshooting#w_make-a-new-profile\n> http://nightly.mozilla.org/\n\nI'm not able to set up the nightly build etc. However I uploaded a corresponding file so you might check it yourself:\n\nhttp://h1751794.stratoserver.net/testnocharset.php\n\nJust append a unique query string to cause the described error to occur again.\n\nAnother examination: if you load the file with charset detection off it will just send one single request. If you then set charset detection to universal (at least via menu), the file/url is automatically reloaded twice from cache. The other way around ff reloads the file only once from cache. So it seems to be totally server agnostic (as already guessed).", "creator": "wurst99@gmx.de", "bug_id": 639279, "text": "(In reply to comment #1)\n> Does this still occur with the latest nightly and a clean profile?\n> http://support.mozilla.com/kb/Basic+Troubleshooting#w_make-a-new-profile\n> http://nightly.mozilla.org/\n\nI'm not able to set up the nightly build etc. However I uploaded a corresponding file so you might check it yourself:\n\nhttp://h1751794.stratoserver.net/testnocharset.php\n\nJust append a unique query string to cause the described error to occur again.\n\nAnother examination: if you load the file with charset detection off it will just send one single request. If you then set charset detection to universal (at least via menu), the file/url is automatically reloaded twice from cache. The other way around ff reloads the file only once from cache. So it seems to be totally server agnostic (as already guessed).", "is_private": false, "author": "wurst99@gmx.de", "time": "2011-03-07T12:57:44Z", "count": 2, "id": 5326920}, {"id": 5327188, "author": "bzbarsky@mit.edu", "time": "2011-03-07T15:49:37Z", "count": 3, "is_private": false, "text": "When autodetect changes the document charset, we do a charset-change reload, because we need to reparse the page.  But this should hit the http cache, no?   Or are we being screwed over because the cache entry is still open at that point?", "bug_id": 639279, "raw_text": "When autodetect changes the document charset, we do a charset-change reload, because we need to reparse the page.  But this should hit the http cache, no?   Or are we being screwed over because the cache entry is still open at that point?", "creator": "bzbarsky@mit.edu", "tags": [], "creation_time": "2011-03-07T15:49:37Z", "attachment_id": null}, {"id": 5327248, "author": "hsivonen@mozilla.com", "is_private": false, "bug_id": 639279, "creation_time": "2011-03-07T16:13:28Z", "tags": [], "attachment_id": null, "time": "2011-03-07T16:13:28Z", "count": 4, "text": "(In reply to comment #3)\n> When autodetect changes the document charset, we do a charset-change reload,\n> because we need to reparse the page.  But this should hit the http cache, no?  \n> Or are we being screwed over because the cache entry is still open at that\n> point?\n\nI haven't investigated recently, but at least a year ago, <meta>-caused reparses and reloads hit the network.", "raw_text": "(In reply to comment #3)\n> When autodetect changes the document charset, we do a charset-change reload,\n> because we need to reparse the page.  But this should hit the http cache, no?  \n> Or are we being screwed over because the cache entry is still open at that\n> point?\n\nI haven't investigated recently, but at least a year ago, <meta>-caused reparses and reloads hit the network.", "creator": "hsivonen@mozilla.com"}, {"attachment_id": null, "tags": [], "creation_time": "2011-03-07T16:44:45Z", "creator": "bzbarsky@mit.edu", "raw_text": "That.... sucks.  And yes, probably just the usual cache silliness.", "bug_id": 639279, "text": "That.... sucks.  And yes, probably just the usual cache silliness.", "is_private": false, "count": 5, "author": "bzbarsky@mit.edu", "time": "2011-03-07T16:44:45Z", "id": 5327333}, {"is_private": false, "count": 6, "author": "bug-husbandry-bot@mozilla.bugs", "time": "2017-09-13T18:36:04Z", "id": 12658036, "attachment_id": null, "tags": [], "creation_time": "2017-09-13T18:36:04Z", "creator": "bug-husbandry-bot@mozilla.bugs", "raw_text": "Bulk change to priority: https://bugzilla.mozilla.org/show_bug.cgi?id=1399258", "bug_id": 639279, "text": "Bulk change to priority: https://bugzilla.mozilla.org/show_bug.cgi?id=1399258"}, {"text": "Bulk change to priority: https://bugzilla.mozilla.org/show_bug.cgi?id=1399258", "bug_id": 639279, "raw_text": "Bulk change to priority: https://bugzilla.mozilla.org/show_bug.cgi?id=1399258", "creator": "bug-husbandry-bot@mozilla.bugs", "creation_time": "2017-09-13T18:48:14Z", "tags": [], "attachment_id": null, "id": 12659594, "author": "bug-husbandry-bot@mozilla.bugs", "time": "2017-09-13T18:48:14Z", "count": 7, "is_private": false}]}}}