{"bugs": {"703243": {"comments": [{"raw_text": "User Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:8.0) Gecko/20100101 Firefox/8.0\nBuild ID: 20111104165243\n\nSteps to reproduce:\n\nHere is some example XML, which pulls in an XSL file, and does a client side transform:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<?xml-stylesheet href=\"index.xsl\" type=\"text/xsl\"?>\n<x/>\n\nSay I stick that content in a file named \"test.xml\", and load it in an iframe from my html:\n\n<iframe src=\"test.xml\"></iframe>\n\nThat all works fine. Now, if I decide that I don't want to create a separate \"test.xml\" file, and want to stick it in a data URI instead:\n\n<iframe src=\"data:text/xml;charset=utf-8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPD94bWwtc3R5bGVzaGVldCBocmVmPSJpbmRleC54c2wiIHR5cGU9InRleHQveHNsIj8+Cjx4Lz4K\"></iframe>\n\nThat fails with a bizarre error, complaining about line 2:\n\nXML Parsing Error: \nLocation: data:text/xml;charset=utf-8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPD94bWwtc3R5bGVzaGVldCBocmVmPSJpbmRleC54c2wiIHR5cGU9InRleHQveHNsIj8+Cjx4Lz4K\nLine Number 2, Column 1:<?xml-stylesheet href=\"index.xsl\" type=\"text/xsl\"?>\n^\n\nI have two demonstration pages up if you want to see this problem. The error happens on the second:\n\nhttps://grepular.com/xslt/index.html\nhttps://grepular.com/xslt/index2.html", "attachment_id": null, "tags": [], "bug_id": 703243, "text": "User Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:8.0) Gecko/20100101 Firefox/8.0\nBuild ID: 20111104165243\n\nSteps to reproduce:\n\nHere is some example XML, which pulls in an XSL file, and does a client side transform:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<?xml-stylesheet href=\"index.xsl\" type=\"text/xsl\"?>\n<x/>\n\nSay I stick that content in a file named \"test.xml\", and load it in an iframe from my html:\n\n<iframe src=\"test.xml\"></iframe>\n\nThat all works fine. Now, if I decide that I don't want to create a separate \"test.xml\" file, and want to stick it in a data URI instead:\n\n<iframe src=\"data:text/xml;charset=utf-8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPD94bWwtc3R5bGVzaGVldCBocmVmPSJpbmRleC54c2wiIHR5cGU9InRleHQveHNsIj8+Cjx4Lz4K\"></iframe>\n\nThat fails with a bizarre error, complaining about line 2:\n\nXML Parsing Error: \nLocation: data:text/xml;charset=utf-8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPD94bWwtc3R5bGVzaGVldCBocmVmPSJpbmRleC54c2wiIHR5cGU9InRleHQveHNsIj8+Cjx4Lz4K\nLine Number 2, Column 1:<?xml-stylesheet href=\"index.xsl\" type=\"text/xsl\"?>\n^\n\nI have two demonstration pages up if you want to see this problem. The error happens on the second:\n\nhttps://grepular.com/xslt/index.html\nhttps://grepular.com/xslt/index2.html", "count": 0, "id": 5855078, "is_private": false, "author": "mozilla@grepular.com", "time": "2011-11-17T12:34:03Z", "creation_time": "2011-11-17T12:34:03Z", "creator": "mozilla@grepular.com"}, {"count": 1, "id": 9984732, "is_private": false, "author": "bzbarsky@mit.edu", "creation_time": "2015-03-04T14:52:12Z", "time": "2015-03-04T14:52:12Z", "creator": "bzbarsky@mit.edu", "raw_text": "The problem isn't lack of support for processing instructions per se.\n\nWhat happens is that we try to go ahead and load test.xsl.  That means creating a URI from the string \"index.xsl\", which fails because the base URI is \"data:....\".  So nsXMLContentSink::ProcessStyleLink returns NS_ERROR_MALFORMED_URI which is propagated back to nsExpatDriver::HandleProcessingInstruction which then stops the XML parser.\n\nIt's not clear to me whether it would be better to treat the bogus URI as a no-op and simply display the pre-transform XML or to do the parse error thing like this.\n\nFor comparison, linking to a cross-site XSLT sheet is also treated as a parse error, while linking to one that's 404 seems to be treated as \"just render the pre-transform XML\"...", "attachment_id": null, "tags": [], "bug_id": 703243, "text": "The problem isn't lack of support for processing instructions per se.\n\nWhat happens is that we try to go ahead and load test.xsl.  That means creating a URI from the string \"index.xsl\", which fails because the base URI is \"data:....\".  So nsXMLContentSink::ProcessStyleLink returns NS_ERROR_MALFORMED_URI which is propagated back to nsExpatDriver::HandleProcessingInstruction which then stops the XML parser.\n\nIt's not clear to me whether it would be better to treat the bogus URI as a no-op and simply display the pre-transform XML or to do the parse error thing like this.\n\nFor comparison, linking to a cross-site XSLT sheet is also treated as a parse error, while linking to one that's 404 seems to be treated as \"just render the pre-transform XML\"..."}]}}, "comments": {}}