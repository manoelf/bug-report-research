{"bugs": {"306679": {"comments": [{"tags": [], "is_private": false, "bug_id": 306679, "author": "papa200480@mail.ru", "text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; ru-RU; rv:1.7.10) Gecko/20050717 Firefox/1.0.6\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; ru-RU; rv:1.7.10) Gecko/20050717 Firefox/1.0.6\n\nSuppose, I have 2 frames: top & bottom.\nThere is function refresh() in bottom frame, which use XMLHttpRequest.\n\nIf I call function refresh from top frame, \"Component returned failure code:\n0x80040111 (NS_ERROR_NOT_AVAILABLE)\" error occures when I get\nXMLHttpRequest.status property.\n\nReproducible: Always\n\nSteps to Reproduce:\n1. 2 frames:\nmain page:\n<html>\n   <frameset rows=\"*, 100\" id='TaskFrame'>\n        <frame src=\"/index.html\" name=\"top\" />\n        <frame src=\"basket_frame.jsp\" id='bottom' name=\"bottom\" />\n   </frameset>\n</html>\n\ntop frame:\n<html>\n    <script type=\"text/javascript\">\n        function load() {\n            parent.frames['bottom'].refresh();\n        }\n    </script>\n  <body onload='javascript:load()'></body>\n</html>\n\nbottom frame:\n<html>\n...\n<script>\n...\n        function refresh() {\n            doRequest('/ajax/basket.jsp');\n        }\n\n        function doRequest(url) {\n            if (window.XMLHttpRequest) {\n                req = new XMLHttpRequest();\n            } else if (window.ActiveXObject) {\n                req = new ActiveXObject(\"Microsoft.XMLHTTP\");\n            }\n            req.onreadystatechange = processRequest;\n            req.open(\"GET\", url, true);\n            req.send(null);\n        }\n\n        function processRequest() {\n            if (req.readyState == 4) {\n                if (req.status == 200) { parseMessages(); }\n                else if (req.status==999){\n                    window.parent.location = \"/index.html\";\n                }\n            }\n        }\n\n        function parseMessages() { ... }\n...\n</html>\n2. load main page\n\nActual Results:  \nrefresh() method is called, but there is an error in JS console:\nException... \"Component returned failure code: 0x80040111\n(NS_ERROR_NOT_AVAILABLE) [nsIXMLHttpRequest.status]\n\nso parseMessages() is never called.\n\nExpected Results:  \nparseMessages() have to be executed.", "count": 0, "time": "2005-09-01T09:00:50Z", "id": 2597267, "creation_time": "2005-09-01T09:00:50Z", "raw_text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; ru-RU; rv:1.7.10) Gecko/20050717 Firefox/1.0.6\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; ru-RU; rv:1.7.10) Gecko/20050717 Firefox/1.0.6\n\nSuppose, I have 2 frames: top & bottom.\nThere is function refresh() in bottom frame, which use XMLHttpRequest.\n\nIf I call function refresh from top frame, \"Component returned failure code:\n0x80040111 (NS_ERROR_NOT_AVAILABLE)\" error occures when I get\nXMLHttpRequest.status property.\n\nReproducible: Always\n\nSteps to Reproduce:\n1. 2 frames:\nmain page:\n<html>\n   <frameset rows=\"*, 100\" id='TaskFrame'>\n        <frame src=\"/index.html\" name=\"top\" />\n        <frame src=\"basket_frame.jsp\" id='bottom' name=\"bottom\" />\n   </frameset>\n</html>\n\ntop frame:\n<html>\n    <script type=\"text/javascript\">\n        function load() {\n            parent.frames['bottom'].refresh();\n        }\n    </script>\n  <body onload='javascript:load()'></body>\n</html>\n\nbottom frame:\n<html>\n...\n<script>\n...\n        function refresh() {\n            doRequest('/ajax/basket.jsp');\n        }\n\n        function doRequest(url) {\n            if (window.XMLHttpRequest) {\n                req = new XMLHttpRequest();\n            } else if (window.ActiveXObject) {\n                req = new ActiveXObject(\"Microsoft.XMLHTTP\");\n            }\n            req.onreadystatechange = processRequest;\n            req.open(\"GET\", url, true);\n            req.send(null);\n        }\n\n        function processRequest() {\n            if (req.readyState == 4) {\n                if (req.status == 200) { parseMessages(); }\n                else if (req.status==999){\n                    window.parent.location = \"/index.html\";\n                }\n            }\n        }\n\n        function parseMessages() { ... }\n...\n</html>\n2. load main page\n\nActual Results:  \nrefresh() method is called, but there is an error in JS console:\nException... \"Component returned failure code: 0x80040111\n(NS_ERROR_NOT_AVAILABLE) [nsIXMLHttpRequest.status]\n\nso parseMessages() is never called.\n\nExpected Results:  \nparseMessages() have to be executed.", "attachment_id": null, "creator": "papa200480@mail.ru"}]}}, "comments": {}}