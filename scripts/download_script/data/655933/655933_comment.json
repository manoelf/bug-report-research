{"bugs": {"655933": {"comments": [{"time": "2011-05-10T04:15:27Z", "id": 5458937, "creation_time": "2011-05-10T04:15:27Z", "bug_id": 655933, "raw_text": "User-Agent:       Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)\nBuild Identifier: Gecko/20100101 Firefox/4.0.1\n\nWhen the page contains a large number of elements with opacity other than 1, all DOM manipulation lags seconds, even interaction that doesn't manipulate opacity or even non-opaque elements such as changing zIndex of surrounding elements or drawing CSS outlines.\n\nReproducible: Always\n\nSteps to Reproduce:\nClick in Search field at top (turns yellow to activate). Move mouse over elements. Outline will appear very slowly compared to hovering around with the search field unchecked. The hover script only draws an outline and does not manipulate opacity.\n\nAnother reproduction is to choose the Isotopes tab, click an element, and then hover over the fanned-out isotopes. It takes more than a second to switch between due to surrounding elements having low opacity. The hover script only manipulates the z-index of the fanned isotopes, which are not opaque.\n\nAnother reproduction involves turning opacity on and off for an iframe. In the first (Wikipedia) tab, click an element to open an iframe. Upon grabbing the titlebar of the iframe, the box will drop in opacity. Releasing the drag returns to opacity 1. This takes more than a second.\n\nActual Results:  \nMulti-second lag only when hardware acceleration enabled. Computer is Windows 7 x64 with Quadro FX 1600M with recent drivers that function fine with OpenGL and Direct3D games and with hardware acceleration in other browsers.\n\nExpected Results:  \nNear instantaneous updating.\n\nDoes not occur with hardware acceleration disabled. Does not occur in 3.6.16.", "tags": [], "is_private": false, "text": "User-Agent:       Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)\nBuild Identifier: Gecko/20100101 Firefox/4.0.1\n\nWhen the page contains a large number of elements with opacity other than 1, all DOM manipulation lags seconds, even interaction that doesn't manipulate opacity or even non-opaque elements such as changing zIndex of surrounding elements or drawing CSS outlines.\n\nReproducible: Always\n\nSteps to Reproduce:\nClick in Search field at top (turns yellow to activate). Move mouse over elements. Outline will appear very slowly compared to hovering around with the search field unchecked. The hover script only draws an outline and does not manipulate opacity.\n\nAnother reproduction is to choose the Isotopes tab, click an element, and then hover over the fanned-out isotopes. It takes more than a second to switch between due to surrounding elements having low opacity. The hover script only manipulates the z-index of the fanned isotopes, which are not opaque.\n\nAnother reproduction involves turning opacity on and off for an iframe. In the first (Wikipedia) tab, click an element to open an iframe. Upon grabbing the titlebar of the iframe, the box will drop in opacity. Releasing the drag returns to opacity 1. This takes more than a second.\n\nActual Results:  \nMulti-second lag only when hardware acceleration enabled. Computer is Windows 7 x64 with Quadro FX 1600M with recent drivers that function fine with OpenGL and Direct3D games and with hardware acceleration in other browsers.\n\nExpected Results:  \nNear instantaneous updating.\n\nDoes not occur with hardware acceleration disabled. Does not occur in 3.6.16.", "count": 0, "author": "michael@dayah.com", "creator": "michael@dayah.com", "attachment_id": null}, {"attachment_id": null, "creator": "bzbarsky@mit.edu", "author": "bzbarsky@mit.edu", "text": "Bas?", "count": 1, "is_private": false, "raw_text": "Bas?", "creation_time": "2011-05-10T04:20:55Z", "bug_id": 655933, "tags": [], "time": "2011-05-10T04:20:55Z", "id": 5458945}, {"creator": "bas@basschouten.com", "attachment_id": null, "text": "I can reproduce the symptom (I should note for me it's not quite multisecond, but several hundred milliseconds, so still pretty bad). Both with D3D9 or Direct2D. Presumably this is generating a layer tree that has a -lot- of group opacity rendering to intermediate surface cases here. I'm not sure why, but Timothy or Roc might know more by looking at the layer tree.", "count": 2, "author": "bas@basschouten.com", "bug_id": 655933, "creation_time": "2011-05-10T04:25:22Z", "raw_text": "I can reproduce the symptom (I should note for me it's not quite multisecond, but several hundred milliseconds, so still pretty bad). Both with D3D9 or Direct2D. Presumably this is generating a layer tree that has a -lot- of group opacity rendering to intermediate surface cases here. I'm not sure why, but Timothy or Roc might know more by looking at the layer tree.", "tags": [], "is_private": false, "time": "2011-05-10T04:25:22Z", "id": 5458952}, {"id": 5458971, "time": "2011-05-10T04:46:38Z", "tags": [], "creation_time": "2011-05-10T04:46:38Z", "bug_id": 655933, "raw_text": "Without having debugged much, here's what I suspect is happening: we construct a lot of layers with opacity (not sure why we have so many active layers here). When the z-index of one of the tiles changes, our recycling goes haywire so that the layer for each tile changes, none of the layers are effectively recycled and we have to repaint everything.", "is_private": false, "text": "Without having debugged much, here's what I suspect is happening: we construct a lot of layers with opacity (not sure why we have so many active layers here). When the z-index of one of the tiles changes, our recycling goes haywire so that the layer for each tile changes, none of the layers are effectively recycled and we have to repaint everything.", "count": 3, "author": "roc@ocallahan.org", "creator": "roc@ocallahan.org", "attachment_id": null}, {"attachment_id": null, "creator": "ajuma.bugzilla@alijuma.com", "author": "ajuma.bugzilla@alijuma.com", "text": "I can still reproduce this in Nightly on Windows 7 with Direct2D.", "count": 4, "is_private": false, "raw_text": "I can still reproduce this in Nightly on Windows 7 with Direct2D.", "bug_id": 655933, "creation_time": "2011-12-09T19:02:41Z", "tags": [], "time": "2011-12-09T19:02:41Z", "id": 5904829}, {"is_private": false, "attachment_id": null, "tags": [], "creator": "bas@basschouten.com", "creation_time": "2011-12-11T14:10:11Z", "bug_id": 655933, "raw_text": "Roc: Who do you think should investigate this further?", "id": 5907153, "time": "2011-12-11T14:10:11Z", "author": "bas@basschouten.com", "count": 5, "text": "Roc: Who do you think should investigate this further?"}, {"count": 6, "text": "Me I guess.", "id": 5907521, "author": "roc@ocallahan.org", "time": "2011-12-11T21:30:02Z", "creator": "roc@ocallahan.org", "tags": [], "raw_text": "Me I guess.", "bug_id": 655933, "creation_time": "2011-12-11T21:30:02Z", "is_private": false, "attachment_id": null}, {"is_private": false, "creation_time": "2012-09-20T23:09:09Z", "bug_id": 655933, "raw_text": "The issue appears to have gotten worse (15.0.1). I recommend using the Isotopes reproduction to debug this (second one mentioned) since the only DOM manipulation is z-index changing, with no jQuery or any other libraries to interfere or debug.", "tags": [], "time": "2012-09-20T23:09:09Z", "id": 6653150, "attachment_id": null, "creator": "michael@dayah.com", "author": "michael@dayah.com", "text": "The issue appears to have gotten worse (15.0.1). I recommend using the Isotopes reproduction to debug this (second one mentioned) since the only DOM manipulation is z-index changing, with no jQuery or any other libraries to interfere or debug.", "count": 7}]}}, "comments": {}}