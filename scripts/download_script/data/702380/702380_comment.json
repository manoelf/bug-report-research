{"comments": {}, "bugs": {"702380": {"comments": [{"id": 5847420, "count": 0, "is_private": false, "tags": [], "bug_id": 702380, "raw_text": "Right before the do-not-track header was implemented in bug 628197, extensions such as NoScript and AdBlock Plus were already capable of sending or experimenting with that header.\n\nThe developers of both extensions also provided some way of specifying exceptions, so that while having the feature enabled, the header would not be sent to some specified sites.\n\nWhen the developer of ABP presented the feature in the extension blog, he said \"Adblock Plus approach is more flexible [than the one in Firefox] and allows sending Do Not Track to particular servers only (right now it is not clear whether this flexibility will be necessary).\"\nWhile it was not clear then, it is known that the DNT header breaks the admin pages of some routers (bug 662151).\nAlso, there may be some sites where for some reason a user may want to be tracked.\n\nWhile turning off DNT in Firefox and using ABP to manage the sending of DNT headers potentially solves bug 662151, the navigator global object do-not-track signal added in bug 629535 is not defined by extensions.\nThis creates a situation where you can either control DNT header per site but not navigator.doNotTrack, or you have both but for all sites.\n\nMy suggestion is that Firefox should provide an interface that extensions can use to override the donottrackheader preference.\nThis interface would allow extensions to define navigator.doNotTrack and whether the DNT header would be sent, according to current site.", "creation_time": "2011-11-14T19:50:34Z", "attachment_id": null, "time": "2011-11-14T19:50:34Z", "text": "Right before the do-not-track header was implemented in bug 628197, extensions such as NoScript and AdBlock Plus were already capable of sending or experimenting with that header.\n\nThe developers of both extensions also provided some way of specifying exceptions, so that while having the feature enabled, the header would not be sent to some specified sites.\n\nWhen the developer of ABP presented the feature in the extension blog, he said \"Adblock Plus approach is more flexible [than the one in Firefox] and allows sending Do Not Track to particular servers only (right now it is not clear whether this flexibility will be necessary).\"\nWhile it was not clear then, it is known that the DNT header breaks the admin pages of some routers (bug 662151).\nAlso, there may be some sites where for some reason a user may want to be tracked.\n\nWhile turning off DNT in Firefox and using ABP to manage the sending of DNT headers potentially solves bug 662151, the navigator global object do-not-track signal added in bug 629535 is not defined by extensions.\nThis creates a situation where you can either control DNT header per site but not navigator.doNotTrack, or you have both but for all sites.\n\nMy suggestion is that Firefox should provide an interface that extensions can use to override the donottrackheader preference.\nThis interface would allow extensions to define navigator.doNotTrack and whether the DNT header would be sent, according to current site.", "author": "M8R-a91hqf@mailinator.com", "creator": "M8R-a91hqf@mailinator.com"}, {"text": "Rules dictating per-site DNT-header sending won't line up with rules for the navigator global object in bug 629535. Third-party tracking scripts rarely run in the context from which they were served.\n\nFor example, content.com may load scripts from tracker.com, but the tracker.com scripts will run in the context of content.com -- so tracker.com will see the global object DNT value for content.com.  If one is whitelisted and the other is not, we get a different HTTP header value than navigator global object value.\n\nUnless someone has an idea of how to reconcile this conflict, it's looking like we have to either have the navigator global object (bug 629535) *or* per-site DNT (this bug).\n\nThis feature request does not block 662151: there are other ways to fix that.\nThis feature request does not depend on bug 629535: they may in fact not be compatible with each other.", "creator": "mozbugs@sidstamm.com", "attachment_id": null, "time": "2011-11-14T20:04:53Z", "author": "mozbugs@sidstamm.com", "creation_time": "2011-11-14T20:04:53Z", "raw_text": "Rules dictating per-site DNT-header sending won't line up with rules for the navigator global object in bug 629535. Third-party tracking scripts rarely run in the context from which they were served.\n\nFor example, content.com may load scripts from tracker.com, but the tracker.com scripts will run in the context of content.com -- so tracker.com will see the global object DNT value for content.com.  If one is whitelisted and the other is not, we get a different HTTP header value than navigator global object value.\n\nUnless someone has an idea of how to reconcile this conflict, it's looking like we have to either have the navigator global object (bug 629535) *or* per-site DNT (this bug).\n\nThis feature request does not block 662151: there are other ways to fix that.\nThis feature request does not depend on bug 629535: they may in fact not be compatible with each other.", "bug_id": 702380, "is_private": false, "count": 1, "tags": [], "id": 5847461}, {"creator": "M8R-a91hqf@mailinator.com", "author": "M8R-a91hqf@mailinator.com", "bug_id": 702380, "count": 2, "is_private": false, "tags": [], "id": 5847938, "text": "Thank you for your answer and for clarifying the issue.\n\nConcerning the blocking of 662151, it seems obvious to me now. I just wanted to add it as a reference, because that bug that could be solved by this.\nSince there is no feature like \"Solves: 662151\" I incorrectly used block.\n\nFor the dependence on 629535, I would argue that this suggestion depends on the existence of that navigator global object, just as 629535 was dependent on 628197 - Implement do-not-track HTTP header...\nThis bug is not meant to replace 629535, but to add features to it.\n\n\nAbout your example with content.com and tracker.com... I see the issue there, and I think it has a few similarities with the situation in bug 629535, comment 3, and the followup comments 4 and 5.\n\nIn your specific example, do you mean a case where content.com is whitelisted and tracker.com is not?\nIn this case, tracker.com would run in the context of content.com and wouldn't be presented with navigator.doNotTrack=\"yes\", right? But I guess that since the user has agreed to be tracked by content.com, it could be considered implicit that the agreement extends to tracker.com just for this particular site...\n\nAlso, how is a similar situation dealt with when using geolocation? Do scripts loaded from tracker.com have access to geolocation info allowed for content.com, even if it is supposedly blocked for tracker.com?\nBy the way, not dismissing the suggestion of exposing the control of DNT features to extensions, the per-site control of DNT in Firefox could be configured in another entry in about:permissions, just like the options for geolocation and cookies are.", "time": "2011-11-14T22:41:38Z", "attachment_id": null, "raw_text": "Thank you for your answer and for clarifying the issue.\n\nConcerning the blocking of 662151, it seems obvious to me now. I just wanted to add it as a reference, because that bug that could be solved by this.\nSince there is no feature like \"Solves: 662151\" I incorrectly used block.\n\nFor the dependence on 629535, I would argue that this suggestion depends on the existence of that navigator global object, just as 629535 was dependent on 628197 - Implement do-not-track HTTP header...\nThis bug is not meant to replace 629535, but to add features to it.\n\n\nAbout your example with content.com and tracker.com... I see the issue there, and I think it has a few similarities with the situation in bug 629535, comment 3, and the followup comments 4 and 5.\n\nIn your specific example, do you mean a case where content.com is whitelisted and tracker.com is not?\nIn this case, tracker.com would run in the context of content.com and wouldn't be presented with navigator.doNotTrack=\"yes\", right? But I guess that since the user has agreed to be tracked by content.com, it could be considered implicit that the agreement extends to tracker.com just for this particular site...\n\nAlso, how is a similar situation dealt with when using geolocation? Do scripts loaded from tracker.com have access to geolocation info allowed for content.com, even if it is supposedly blocked for tracker.com?\nBy the way, not dismissing the suggestion of exposing the control of DNT features to extensions, the per-site control of DNT in Firefox could be configured in another entry in about:permissions, just like the options for geolocation and cookies are.", "creation_time": "2011-11-14T22:41:38Z"}, {"attachment_id": null, "time": "2011-11-14T22:43:15Z", "text": "We could make the DNT property on the navigator inaccessible to third party iframes.  Not sure if that's desirable though.", "creation_time": "2011-11-14T22:43:15Z", "raw_text": "We could make the DNT property on the navigator inaccessible to third party iframes.  Not sure if that's desirable though.", "bug_id": 702380, "id": 5847949, "tags": [], "is_private": false, "count": 3, "author": "khuey@kylehuey.com", "creator": "khuey@kylehuey.com"}, {"creator": "mozbugs@sidstamm.com", "author": "mozbugs@sidstamm.com", "creation_time": "2011-11-14T22:55:35Z", "raw_text": "(In reply to Kyle Huey [:khuey] (khuey@mozilla.com) from comment #3)\n> We could make the DNT property on the navigator inaccessible to third party\n> iframes.  Not sure if that's desirable though.\n\nIt probably wouldn't help (scripts in those iframes are in the same context as the document hosting them).  The real problem is third-party scripts (served from a different domain).\n\n(In reply to JMF from comment #2)\n> In your specific example, do you mean a case where content.com is\n> whitelisted and tracker.com is not?\n> In this case, tracker.com would run in the context of content.com and\n> wouldn't be presented with navigator.doNotTrack=\"yes\", right? \n\nSure.  Or the other way around... both are confusing because the third party script gets one signal in the HTTP header and a different one in the DOM.\n\n> But I guess\n> that since the user has agreed to be tracked by content.com, it could be\n> considered implicit that the agreement extends to tracker.com just for this\n> particular site...\n\nI'm not convinced that's what users expect, nor what the tracker.com site expects.  What does the site do when they get mixed messages?  The HTTP request comes with a \"DNT:1\" flag, but navigator.doNotTrack is set to \"no\"... what are they supposed to do?  This mismatch confuses the signal.\n\n> Also, how is a similar situation dealt with when using geolocation? \n\nGeolocation information is not provided via an HTTP header.  It's only DOM-based, so it doesn't have the mismatched contexts like third party embedded scripts.\n\n> By the way, not dismissing the suggestion of exposing the control of DNT\n> features to extensions, the per-site control of DNT in Firefox could be\n> configured in another entry in about:permissions, just like the options for\n> geolocation and cookies are.\n\nI agree that is a good place for the DNT whitelist UI if we implement it.", "text": "(In reply to Kyle Huey [:khuey] (khuey@mozilla.com) from comment #3)\n> We could make the DNT property on the navigator inaccessible to third party\n> iframes.  Not sure if that's desirable though.\n\nIt probably wouldn't help (scripts in those iframes are in the same context as the document hosting them).  The real problem is third-party scripts (served from a different domain).\n\n(In reply to JMF from comment #2)\n> In your specific example, do you mean a case where content.com is\n> whitelisted and tracker.com is not?\n> In this case, tracker.com would run in the context of content.com and\n> wouldn't be presented with navigator.doNotTrack=\"yes\", right? \n\nSure.  Or the other way around... both are confusing because the third party script gets one signal in the HTTP header and a different one in the DOM.\n\n> But I guess\n> that since the user has agreed to be tracked by content.com, it could be\n> considered implicit that the agreement extends to tracker.com just for this\n> particular site...\n\nI'm not convinced that's what users expect, nor what the tracker.com site expects.  What does the site do when they get mixed messages?  The HTTP request comes with a \"DNT:1\" flag, but navigator.doNotTrack is set to \"no\"... what are they supposed to do?  This mismatch confuses the signal.\n\n> Also, how is a similar situation dealt with when using geolocation? \n\nGeolocation information is not provided via an HTTP header.  It's only DOM-based, so it doesn't have the mismatched contexts like third party embedded scripts.\n\n> By the way, not dismissing the suggestion of exposing the control of DNT\n> features to extensions, the per-site control of DNT in Firefox could be\n> configured in another entry in about:permissions, just like the options for\n> geolocation and cookies are.\n\nI agree that is a good place for the DNT whitelist UI if we implement it.", "attachment_id": null, "time": "2011-11-14T22:55:35Z", "is_private": false, "count": 4, "tags": [], "id": 5847976, "bug_id": 702380}, {"bug_id": 702380, "count": 5, "is_private": false, "tags": [], "id": 5848263, "text": "I would suggest against active development in this area while the W3C working group still has so many details up in the air. Let's wait for a more concrete technical spec, then start optimizing our response to it", "attachment_id": null, "time": "2011-11-15T00:39:43Z", "creation_time": "2011-11-15T00:39:43Z", "raw_text": "I would suggest against active development in this area while the W3C working group still has so many details up in the air. Let's wait for a more concrete technical spec, then start optimizing our response to it", "creator": "me@tomlowenthal.com", "author": "me@tomlowenthal.com"}, {"creator": "aleecia@aleecia.com", "author": "aleecia@aleecia.com", "text": "Actually -- this might be a good point for Mozilla to help the W3C group create a sane, implementable standard. I agree with Tom that devoting dev time is premature, but sitting down to talk through what the standard should look like could be very helpful. I have nothing to contribute to that discussion, but if you do meet I'd like to sit in to get up to speed.", "attachment_id": null, "time": "2011-11-15T01:03:42Z", "raw_text": "Actually -- this might be a good point for Mozilla to help the W3C group create a sane, implementable standard. I agree with Tom that devoting dev time is premature, but sitting down to talk through what the standard should look like could be very helpful. I have nothing to contribute to that discussion, but if you do meet I'd like to sit in to get up to speed.", "creation_time": "2011-11-15T01:03:42Z", "bug_id": 702380, "is_private": false, "count": 6, "tags": [], "id": 5848308}, {"author": "bug-husbandry-bot@mozilla.bugs", "creator": "bug-husbandry-bot@mozilla.bugs", "bug_id": 702380, "id": 13435157, "tags": [], "is_private": false, "count": 7, "time": "2018-06-29T04:39:43Z", "attachment_id": null, "text": "https://bugzilla.mozilla.org/show_bug.cgi?id=1472046\n\nMove all DOM bugs that haven't been updated in more than 3 years and has no one currently assigned to P5.\n\nIf you have questions, please contact :mdaly.", "creation_time": "2018-06-29T04:39:43Z", "raw_text": "https://bugzilla.mozilla.org/show_bug.cgi?id=1472046\n\nMove all DOM bugs that haven't been updated in more than 3 years and has no one currently assigned to P5.\n\nIf you have questions, please contact :mdaly."}]}}}