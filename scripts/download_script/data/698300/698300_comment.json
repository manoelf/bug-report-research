{"bugs": {"698300": {"comments": [{"is_private": false, "creation_time": "2011-10-30T21:00:15Z", "creator": "jmuizelaar@mozilla.com", "tags": [], "attachment_id": null, "bug_id": 698300, "id": 5814179, "author": "jmuizelaar@mozilla.com", "count": 0, "text": "Currently we darken all grayish text colors if we are printing without backgrounds. It would be better if we only darkened those colors close to white. This would result in less unexpected color changes it also is similar to what WebKit does.", "time": "2011-10-30T21:00:15Z", "raw_text": "Currently we darken all grayish text colors if we are printing without backgrounds. It would be better if we only darkened those colors close to white. This would result in less unexpected color changes it also is similar to what WebKit does."}, {"tags": [], "raw_text": "Here's what WebKit does:\n\nColor correctedTextColor(Color textColor, Color backgroundColor) \n{\n    // Adjust the text color if it is too close to the background color,\n    // by darkening or lightening it to move it further away.\n    \n    int d = differenceSquared(textColor, backgroundColor);\n    // semi-arbitrarily chose 65025 (255^2) value here after a few tests; \n    if (d > 65025) {\n        return textColor;\n    }\n    \n    int distanceFromWhite = differenceSquared(textColor, Color::white);\n    int distanceFromBlack = differenceSquared(textColor, Color::black);\n\n    if (distanceFromWhite < distanceFromBlack) {\n        return textColor.dark();\n    }\n    \n    return textColor.light();\n}", "attachment_id": null, "time": "2012-01-30T03:17:28Z", "is_private": false, "creation_time": "2012-01-30T03:17:28Z", "id": 6018411, "bug_id": 698300, "count": 1, "text": "Here's what WebKit does:\n\nColor correctedTextColor(Color textColor, Color backgroundColor) \n{\n    // Adjust the text color if it is too close to the background color,\n    // by darkening or lightening it to move it further away.\n    \n    int d = differenceSquared(textColor, backgroundColor);\n    // semi-arbitrarily chose 65025 (255^2) value here after a few tests; \n    if (d > 65025) {\n        return textColor;\n    }\n    \n    int distanceFromWhite = differenceSquared(textColor, Color::white);\n    int distanceFromBlack = differenceSquared(textColor, Color::black);\n\n    if (distanceFromWhite < distanceFromBlack) {\n        return textColor.dark();\n    }\n    \n    return textColor.light();\n}", "author": "jmuizelaar@mozilla.com", "creator": "jmuizelaar@mozilla.com"}]}}, "comments": {}}