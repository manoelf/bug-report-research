{"bugs": {"1632204": {"comments": [{"time": "2020-04-22T15:21:50Z", "tags": [], "count": 0, "creation_time": "2020-04-22T15:21:50Z", "creator": "peter@lekensteyn.nl", "attachment_id": null, "bug_id": 1632204, "author": "peter@lekensteyn.nl", "id": 14771906, "is_private": false, "raw_text": "Steps to reproduce:\nDownload the testcase and run: `python3 -m http.server`\nOpen the developer tools (Network) and navigate to http://localhost:8000/testcase.html\n\nThis will send a XHR request to the same origin on a page where Referrer-Policy: no-referrer is applied.\n\nWhat happened:\nRequest headers include:\n```\nOrigin: null\nSec-Fetch-Dest: empty\nSec-Fetch-Mode: cors\nSec-Fetch-Site: same-origin\n```\n\nExpected results:\nThe request header should be this (matches Firefox 75.0):\n```\nOrigin: http://localhost:8000\n```\n\nAdditional information:\nThis change was bisected to https://hg.mozilla.org/integration/autoland/rev/a925b80f029e3f2107a91bde02e9799fb9821eb3 (application_buildid: 20200420201907)\nIt breaks search functionality on a Confluence wiki page where this referrer-policy is set.", "text": "Steps to reproduce:\nDownload the testcase and run: `python3 -m http.server`\nOpen the developer tools (Network) and navigate to http://localhost:8000/testcase.html\n\nThis will send a XHR request to the same origin on a page where Referrer-Policy: no-referrer is applied.\n\nWhat happened:\nRequest headers include:\n```\nOrigin: null\nSec-Fetch-Dest: empty\nSec-Fetch-Mode: cors\nSec-Fetch-Site: same-origin\n```\n\nExpected results:\nThe request header should be this (matches Firefox 75.0):\n```\nOrigin: http://localhost:8000\n```\n\nAdditional information:\nThis change was bisected to https://hg.mozilla.org/integration/autoland/rev/a925b80f029e3f2107a91bde02e9799fb9821eb3 (application_buildid: 20200420201907)\nIt breaks search functionality on a Confluence wiki page where this referrer-policy is set."}, {"id": 14772003, "author": "CuveeHsu@gmail.com", "is_private": false, "raw_text": "I believe the fix in bug 1341689 matches the current spec.\nWhat do you think, anne?", "text": "I believe the fix in bug 1341689 matches the current spec.\nWhat do you think, anne?", "attachment_id": null, "bug_id": 1632204, "creation_time": "2020-04-22T15:58:21Z", "creator": "CuveeHsu@gmail.com", "time": "2020-04-22T15:58:21Z", "tags": [], "count": 1}, {"time": "2020-04-22T16:38:41Z", "tags": [], "count": 2, "creation_time": "2020-04-22T16:38:41Z", "creator": "annevk@annevk.nl", "attachment_id": null, "bug_id": 1632204, "author": "annevk@annevk.nl", "id": 14772120, "is_private": false, "text": "We should revert and I [filed an issue against Fetch](https://github.com/whatwg/fetch/issues/1022) to discuss further. Apologies for assuming this was a safe change.", "raw_text": "We should revert and I [filed an issue against Fetch](https://github.com/whatwg/fetch/issues/1022) to discuss further. Apologies for assuming this was a safe change."}, {"time": "2020-04-23T14:57:11Z", "count": 3, "tags": [], "creator": "peter@lekensteyn.nl", "creation_time": "2020-04-23T14:57:11Z", "attachment_id": null, "bug_id": 1632204, "id": 14774030, "author": "peter@lekensteyn.nl", "text": "Additional info:\nIf Confluence fails, it returns a 403 error and the response text \"XSRF check failed\".\nIf either Referer or the Origin header are provided with the same origin, it is happy.", "raw_text": "Additional info:\nIf Confluence fails, it returns a 403 error and the response text \"XSRF check failed\".\nIf either Referer or the Origin header are provided with the same origin, it is happy.", "is_private": false}, {"time": "2020-04-23T19:42:56Z", "count": 4, "tags": [], "creator": "CuveeHsu@gmail.com", "creation_time": "2020-04-23T19:42:56Z", "attachment_id": 9142821, "bug_id": 1632204, "id": 14774732, "author": "CuveeHsu@gmail.com", "raw_text": "", "text": "Created attachment 9142821\nBug 1632204 - Backed out Bug 1341689 for Confluence compat issue, r=valentin", "is_private": false}, {"raw_text": "Somehow the test case was lost from the original report. Attached.\n\nI noticed another important detail: if the request is *not* designated as cross-domain, Confluence would set the X-Requested-With request header, presumably to trigger the Origin header.", "text": "Created attachment 9142823\ntestcase.html\n\nSomehow the test case was lost from the original report. Attached.\n\nI noticed another important detail: if the request is *not* designated as cross-domain, Confluence would set the X-Requested-With request header, presumably to trigger the Origin header.", "is_private": false, "author": "peter@lekensteyn.nl", "id": 14774764, "bug_id": 1632204, "attachment_id": 9142823, "creator": "peter@lekensteyn.nl", "creation_time": "2020-04-23T19:58:52Z", "count": 5, "tags": [], "time": "2020-04-23T19:58:52Z"}, {"tags": [], "count": 6, "bug_id": 1632204, "time": "2020-04-24T02:01:07Z", "attachment_id": null, "is_private": false, "text": "Pushed by juhsu@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/db1079231621\nBacked out Bug 1341689 for Confluence compat issue, r=valentin", "raw_text": "Pushed by juhsu@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/db1079231621\nBacked out Bug 1341689 for Confluence compat issue, r=valentin", "author": "pulsebot@bots.tld", "creation_time": "2020-04-24T02:01:07Z", "id": 14775405, "creator": "pulsebot@bots.tld"}, {"count": 7, "tags": ["bugherder"], "time": "2020-04-24T09:55:43Z", "creator": "csabou@mozilla.com", "creation_time": "2020-04-24T09:55:43Z", "bug_id": 1632204, "attachment_id": null, "text": "https://hg.mozilla.org/mozilla-central/rev/db1079231621", "raw_text": "https://hg.mozilla.org/mozilla-central/rev/db1079231621", "is_private": false, "author": "csabou@mozilla.com", "id": 14775900}]}}, "comments": {}}