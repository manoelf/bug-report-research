{"bugs": {"1633041": {"comments": [{"count": 0, "creation_time": "2020-04-24T22:47:52Z", "text": "ErrorParser is a sub_parser of StepParser.  But our logs no longer have steps in them  So there is a lot of wasted code/time in there.  \n\nI'm fairly sure we can  replace the `StepParser` with the `ErrorParser` in the `BuildbotLogViewArtifactBuilder`.\n\nIf the `*_errorsummary.log` file had all the failures we need in it, we could just create the list of log errors from that.  But I *think* it doesn't get harness errors.  That should be investigated.", "time": "2020-04-24T22:47:52Z", "raw_text": "ErrorParser is a sub_parser of StepParser.  But our logs no longer have steps in them  So there is a lot of wasted code/time in there.  \n\nI'm fairly sure we can  replace the `StepParser` with the `ErrorParser` in the `BuildbotLogViewArtifactBuilder`.\n\nIf the `*_errorsummary.log` file had all the failures we need in it, we could just create the list of log errors from that.  But I *think* it doesn't get harness errors.  That should be investigated.", "is_private": false, "attachment_id": null, "creator": "cameron@dawsoncode.com", "tags": [], "author": "cameron@dawsoncode.com", "bug_id": 1633041, "id": 14777553}, {"creator": "sclements@mozilla.com", "attachment_id": null, "author": "sclements@mozilla.com", "tags": [], "bug_id": 1633041, "id": 14777577, "count": 1, "raw_text": "This will be a good follow up pr to clean up more old code found when working on bug 1603249.", "text": "This will be a good follow up pr to clean up more old code found when working on bug 1603249.", "time": "2020-04-24T23:07:44Z", "creation_time": "2020-04-24T23:07:44Z", "is_private": false}, {"tags": [], "author": "sclements@mozilla.com", "attachment_id": null, "creator": "sclements@mozilla.com", "id": 14803191, "bug_id": 1633041, "count": 2, "is_private": false, "text": "More archeological discoveries: We're still writing to the TextLogStep table, even though there aren't any steps to process anymore. So we have a whole table (~18M rows! lolz) full of \"unnamed step\" entries. And I noticed Ed had filed bug 1519162 that covers removing any usage of \"steps\".\n\n> If the *_errorsummary.log file had all the failures we need in it, we could just create the list of log errors from that. But I think it doesn't get harness errors. That should be investigated.\n\nCould you elaborate on this? From my understanding, we parse the *_errorsummary.log file, add that data to the FailureLine table and cross reference those with the TextLogError log lines. It looks like it's part of the auto-classify logic? I've only just start looking into that part, but I'm not entirely clear on why we do that.", "creation_time": "2020-05-07T18:39:47Z", "time": "2020-05-07T18:39:47Z", "raw_text": "More archeological discoveries: We're still writing to the TextLogStep table, even though there aren't any steps to process anymore. So we have a whole table (~18M rows! lolz) full of \"unnamed step\" entries. And I noticed Ed had filed bug 1519162 that covers removing any usage of \"steps\".\n\n> If the *_errorsummary.log file had all the failures we need in it, we could just create the list of log errors from that. But I think it doesn't get harness errors. That should be investigated.\n\nCould you elaborate on this? From my understanding, we parse the *_errorsummary.log file, add that data to the FailureLine table and cross reference those with the TextLogError log lines. It looks like it's part of the auto-classify logic? I've only just start looking into that part, but I'm not entirely clear on why we do that."}, {"text": "That would be awesome to kill the TextLogStep table.  More vestigial code and data to kill!\n\nBut, looking at this, I'll admit this is a thread being pulled on a sweater I have never worn before...  This code does stuff I don't grok yet.\n\nI had, at first, thought we could do away with all the crossreferencing.  I don't really see the value.  But then I noticed that Aryx had recently submitted a PR to update that code: https://github.com/mozilla/treeherder/pull/6353\n\nAryx: can you expand on how that PR changes what you see in Treeherder now?", "creation_time": "2020-05-08T00:02:43Z", "time": "2020-05-08T00:02:43Z", "raw_text": "That would be awesome to kill the TextLogStep table.  More vestigial code and data to kill!\n\nBut, looking at this, I'll admit this is a thread being pulled on a sweater I have never worn before...  This code does stuff I don't grok yet.\n\nI had, at first, thought we could do away with all the crossreferencing.  I don't really see the value.  But then I noticed that Aryx had recently submitted a PR to update that code: https://github.com/mozilla/treeherder/pull/6353\n\nAryx: can you expand on how that PR changes what you see in Treeherder now?", "is_private": false, "count": 3, "bug_id": 1633041, "id": 14803841, "attachment_id": null, "creator": "cameron@dawsoncode.com", "tags": [], "author": "cameron@dawsoncode.com"}, {"tags": [], "author": "cameron@dawsoncode.com", "attachment_id": null, "creation_time": "2020-05-08T00:06:18Z", "text": "> Could you elaborate on this? From my understanding, we parse the *_errorsummary.log file, add that data to the FailureLine table and cross reference those with the TextLogError log lines. It looks like it's part of the auto-classify logic? I've only just start looking into that part, but I'm not entirely clear on why we do that.\n\nBut in answer to your question:  I meant that if the `_errorsummary.log` file gave us everything that we get from parsing the normal log, that would be great.  But it doesn't, so it's really a moot point.  And not all tasks generate those log files.  Perhaps some day.  :)", "id": 14803843, "bug_id": 1633041, "creator": "cameron@dawsoncode.com", "is_private": false, "time": "2020-05-08T00:06:18Z", "raw_text": "> Could you elaborate on this? From my understanding, we parse the *_errorsummary.log file, add that data to the FailureLine table and cross reference those with the TextLogError log lines. It looks like it's part of the auto-classify logic? I've only just start looking into that part, but I'm not entirely clear on why we do that.\n\nBut in answer to your question:  I meant that if the `_errorsummary.log` file gave us everything that we get from parsing the normal log, that would be great.  But it doesn't, so it's really a moot point.  And not all tasks generate those log files.  Perhaps some day.  :)", "count": 4}, {"is_private": false, "text": "https://github.com/mozilla/treeherder/pull/6353 was only written because it spammed the console when Kyle and I ingested Treeherder data. The cross-referencing gets automatically started. Treeherder doesn't expose the autoclassification / cross-referencing at the moment (see also bug 1598433), the only consumers might be people pulling the data, e.g. Joel and Marco.", "time": "2020-05-08T20:45:26Z", "creation_time": "2020-05-08T20:45:26Z", "raw_text": "https://github.com/mozilla/treeherder/pull/6353 was only written because it spammed the console when Kyle and I ingested Treeherder data. The cross-referencing gets automatically started. Treeherder doesn't expose the autoclassification / cross-referencing at the moment (see also bug 1598433), the only consumers might be people pulling the data, e.g. Joel and Marco.", "count": 5, "id": 14805539, "bug_id": 1633041, "tags": [], "author": "aryx.bugmail@gmx-topmail.de", "attachment_id": null, "creator": "aryx.bugmail@gmx-topmail.de"}, {"bug_id": 1633041, "id": 14815043, "creator": "cameron@dawsoncode.com", "attachment_id": null, "author": "cameron@dawsoncode.com", "tags": [], "raw_text": "I will work on removing the crossreferencing task and tables as a part of this bug.", "time": "2020-05-12T18:16:08Z", "creation_time": "2020-05-12T18:16:08Z", "text": "I will work on removing the crossreferencing task and tables as a part of this bug.", "is_private": false, "count": 6}, {"attachment_id": null, "creator": "sclements@mozilla.com", "tags": [], "author": "sclements@mozilla.com", "bug_id": 1633041, "id": 14885594, "count": 7, "creation_time": "2020-06-16T18:35:04Z", "time": "2020-06-16T18:35:04Z", "text": "*** Bug 1519162 has been marked as a duplicate of this bug. ***", "raw_text": "", "is_private": false}, {"count": 8, "is_private": false, "text": "Created attachment 9158390\nLink to GitHub pull-request: https://github.com/mozilla/treeherder/pull/6546", "creation_time": "2020-06-23T00:50:44Z", "time": "2020-06-23T00:50:44Z", "raw_text": "", "tags": [], "author": "pulgasaur@mozilla.bugs", "attachment_id": 9158390, "creator": "pulgasaur@mozilla.bugs", "id": 14895442, "bug_id": 1633041}, {"tags": [], "author": "pulgasaur@mozilla.bugs", "attachment_id": 9160770, "creation_time": "2020-07-01T21:22:18Z", "text": "Created attachment 9160770\nLink to GitHub pull-request: https://github.com/mozilla/treeherder/pull/6575", "id": 14913347, "bug_id": 1633041, "creator": "pulgasaur@mozilla.bugs", "is_private": false, "time": "2020-07-01T21:22:18Z", "raw_text": "", "count": 9}, {"creation_time": "2020-07-09T00:03:59Z", "text": "Both of those prs have been merged.", "author": "sclements@mozilla.com", "tags": [], "attachment_id": null, "count": 10, "is_private": false, "raw_text": "Both of those prs have been merged.", "time": "2020-07-09T00:03:59Z", "creator": "sclements@mozilla.com", "id": 14926578, "bug_id": 1633041}, {"time": "2020-07-09T17:40:12Z", "raw_text": "", "is_private": false, "count": 11, "bug_id": 1633041, "id": 14928020, "creator": "pulgasaur@mozilla.bugs", "text": "Created attachment 9162557\nLink to GitHub pull-request: https://github.com/mozilla/treeherder/pull/6598", "creation_time": "2020-07-09T17:40:12Z", "attachment_id": 9162557, "tags": [], "author": "pulgasaur@mozilla.bugs"}]}}, "comments": {}}