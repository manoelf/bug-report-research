{"bugs": {"689720": {"comments": [{"raw_text": "User Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; fr; rv:1.9.2.22) Gecko/20110902 Firefox/3.6.22\nBuild ID: 20110902133716\n\nSteps to reproduce:\n\nOn MacOS X, instead of running Firefox directly, I run it in a sandbox that restrict its access to what Firefox should need. The attached file is the sandbox template.\nThe way to enforce the sandbox is to execute /usr/bin/sandbox-exec -f <sandbox-profile> </path/to/firefox-bin>\nThe sandbox profile is the attached template, adapted by replacing __APPL__ with the path to Firefox.app and __HOME__ with the homedir.\n\n\nActual results:\n\nFirefox dies saying that it cannot access its profile. The reason appears in /private/var/log/system.log\nIt is because Firefox tries to read ~/Library/Application Support/\n\n\nExpected results:\n\nFirefox should only die when ~/Library/Application Support/Firefox is not accessible.\nGiving Firefox access to the content of ~/Library/Application Support/ is a security issue because it leaks information on other installed software.\nNote that Firefox 3.6.x works perfectly within this sandbox. This bug appeared with Firefox 4.x", "attachment_id": 562848, "id": 5741126, "count": 0, "is_private": false, "creator": "Louis.Granboulan@ens.fr", "text": "Created attachment 562848\nfirefox.sb.template\n\nUser Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; fr; rv:1.9.2.22) Gecko/20110902 Firefox/3.6.22\nBuild ID: 20110902133716\n\nSteps to reproduce:\n\nOn MacOS X, instead of running Firefox directly, I run it in a sandbox that restrict its access to what Firefox should need. The attached file is the sandbox template.\nThe way to enforce the sandbox is to execute /usr/bin/sandbox-exec -f <sandbox-profile> </path/to/firefox-bin>\nThe sandbox profile is the attached template, adapted by replacing __APPL__ with the path to Firefox.app and __HOME__ with the homedir.\n\n\nActual results:\n\nFirefox dies saying that it cannot access its profile. The reason appears in /private/var/log/system.log\nIt is because Firefox tries to read ~/Library/Application Support/\n\n\nExpected results:\n\nFirefox should only die when ~/Library/Application Support/Firefox is not accessible.\nGiving Firefox access to the content of ~/Library/Application Support/ is a security issue because it leaks information on other installed software.\nNote that Firefox 3.6.x works perfectly within this sandbox. This bug appeared with Firefox 4.x", "tags": [], "time": "2011-09-27T20:26:30Z", "bug_id": 689720, "creation_time": "2011-09-27T20:26:30Z", "author": "Louis.Granboulan@ens.fr"}, {"count": 1, "creator": "u279076@disabled.tld", "is_private": false, "tags": [], "bug_id": 689720, "time": "2011-09-27T20:53:33Z", "text": "Could you provide more details on how you set up this sandbox environment?", "author": "u279076@disabled.tld", "creation_time": "2011-09-27T20:53:33Z", "raw_text": "Could you provide more details on how you set up this sandbox environment?", "attachment_id": null, "id": 5741236}, {"id": 5742669, "raw_text": "", "attachment_id": 563012, "text": "Created attachment 563012\nScript that generates a sandboxed Firefox", "bug_id": 689720, "time": "2011-09-28T09:47:46Z", "tags": [], "creation_time": "2011-09-28T09:47:46Z", "author": "Louis.Granboulan@ens.fr", "count": 2, "is_private": false, "creator": "Louis.Granboulan@ens.fr"}, {"id": 5742677, "attachment_id": null, "raw_text": "I use the attached script, named \"sandbox-my-firefox.command\".\nIt duplicates and modifies the installed Firefox.app, by running it inside a sandbox.\n\nIt can be used by just running this script, and then launching the \"Firefox sandboxed\" application.\nThis application uses the template I attached before, making the replacements of __APPL__ and __HOME__ with sed.", "creation_time": "2011-09-28T09:51:38Z", "author": "Louis.Granboulan@ens.fr", "text": "I use the attached script, named \"sandbox-my-firefox.command\".\nIt duplicates and modifies the installed Firefox.app, by running it inside a sandbox.\n\nIt can be used by just running this script, and then launching the \"Firefox sandboxed\" application.\nThis application uses the template I attached before, making the replacements of __APPL__ and __HOME__ with sed.", "time": "2011-09-28T09:51:38Z", "tags": [], "is_private": false, "creator": "Louis.Granboulan@ens.fr", "bug_id": 689720, "count": 3}, {"bug_id": 689720, "tags": [], "time": "2011-09-28T11:54:18Z", "text": "I just checked that script with Firefox 7.0 and it needs a small modification, because now the binary that is referred in Info.plist is firefox and not firefox-bin.\nMy script can be updated by changing the first perl substitution into\ns,<string>firefox(-bin)?</string>,<string>firefox-sandbox</string>,", "author": "Louis.Granboulan@ens.fr", "creation_time": "2011-09-28T11:54:18Z", "count": 4, "creator": "Louis.Granboulan@ens.fr", "is_private": false, "id": 5742803, "raw_text": "I just checked that script with Firefox 7.0 and it needs a small modification, because now the binary that is referred in Info.plist is firefox and not firefox-bin.\nMy script can be updated by changing the first perl substitution into\ns,<string>firefox(-bin)?</string>,<string>firefox-sandbox</string>,", "attachment_id": null}, {"id": 5904056, "attachment_id": null, "raw_text": "Running Firefox in a sandbox by default could be really useful.", "creation_time": "2011-12-09T14:34:42Z", "author": "mcastelluccio@mozilla.com", "text": "Running Firefox in a sandbox by default could be really useful.", "tags": [], "bug_id": 689720, "time": "2011-12-09T14:34:42Z", "is_private": false, "creator": "mcastelluccio@mozilla.com", "count": 5}]}}, "comments": {}}