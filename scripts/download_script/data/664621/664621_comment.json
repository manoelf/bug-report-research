{"bugs": {"664621": {"comments": [{"tags": [], "time": "2011-06-16T00:24:17Z", "text": "User-Agent:       Mozilla/5.0 (Windows NT 5.1; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\nBuild Identifier: Mozilla/5.0 (Windows NT 5.1; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\n\nI use doPDF as a virtual printer to save output from a web page in PDF format.\n\nI also use TrueCrypt volumes to save confidential information, such as PDF files, created via doPDF.\n\nIf I create a PDF file using doPDF when printing a web page from within Firefox and save it to a TrueCrypt mounted volume, Firefox maintains a lock on the drive letter and directory where the PDF file was saved.  \n\nThen, when I attempt to dismount the TrueCrypt volume, I get a warning message saying files are still in use, even though I'm no longer accessing the PDF file I \"printed to\" via doPDF.\n\nThe only way to close the TrueCrypt volume safely is to shut down Firefox first so that the lock on the directory held by Firefox is released.\n\nIn other words, Firefox is not releasing file handles for directories that have been accessed even though files within the directory are no longer open.\n\nI confirmed this using the SysInternals tool named \"handle.exe\".\n\nFor example, the following excerpt from handle.exe shows the locked directory in a recent occurrence of this problem:\n\nFCD4: File  (RW-)   Z:\\_Me\\Financial\\2011\n\nIn this example, I had previously mounted a TrueCrypt volume as drive letter Z: and I had saved a doPDF-generated PDF file in the directory path \\_Me\\Financial\\2011.\n\nSo, now Firefox retains a lock on the Z:\\_Me\\Financial\\2011 directory even though the PDF file is no longer open in the PDF reader.  So, TrueCrypt will not allow the virtual volume to be dismounted without generating an error.\n\n\nReproducible: Always\n\nSteps to Reproduce:\n(see Details section above)\n\n\nExpected Results:  \nFirefox should release a lock on a directory if it doesn't also have a lock on a file within that directory.", "author": "WRobertE@gmail.com", "creation_time": "2011-06-16T00:24:17Z", "creator": "WRobertE@gmail.com", "is_private": false, "id": 5535677, "raw_text": "User-Agent:       Mozilla/5.0 (Windows NT 5.1; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\nBuild Identifier: Mozilla/5.0 (Windows NT 5.1; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\n\nI use doPDF as a virtual printer to save output from a web page in PDF format.\n\nI also use TrueCrypt volumes to save confidential information, such as PDF files, created via doPDF.\n\nIf I create a PDF file using doPDF when printing a web page from within Firefox and save it to a TrueCrypt mounted volume, Firefox maintains a lock on the drive letter and directory where the PDF file was saved.  \n\nThen, when I attempt to dismount the TrueCrypt volume, I get a warning message saying files are still in use, even though I'm no longer accessing the PDF file I \"printed to\" via doPDF.\n\nThe only way to close the TrueCrypt volume safely is to shut down Firefox first so that the lock on the directory held by Firefox is released.\n\nIn other words, Firefox is not releasing file handles for directories that have been accessed even though files within the directory are no longer open.\n\nI confirmed this using the SysInternals tool named \"handle.exe\".\n\nFor example, the following excerpt from handle.exe shows the locked directory in a recent occurrence of this problem:\n\nFCD4: File  (RW-)   Z:\\_Me\\Financial\\2011\n\nIn this example, I had previously mounted a TrueCrypt volume as drive letter Z: and I had saved a doPDF-generated PDF file in the directory path \\_Me\\Financial\\2011.\n\nSo, now Firefox retains a lock on the Z:\\_Me\\Financial\\2011 directory even though the PDF file is no longer open in the PDF reader.  So, TrueCrypt will not allow the virtual volume to be dismounted without generating an error.\n\n\nReproducible: Always\n\nSteps to Reproduce:\n(see Details section above)\n\n\nExpected Results:  \nFirefox should release a lock on a directory if it doesn't also have a lock on a file within that directory.", "attachment_id": null, "bug_id": 664621, "count": 0}, {"is_private": false, "creator": "fmdevelopertim@gmail.com", "creation_time": "2011-09-05T20:59:30Z", "author": "fmdevelopertim@gmail.com", "text": "Reporter -> Are you still experiencing this issue with the latest version of Firefox 6? Does the issue occur with the latest nightly? http://nightly.mozilla.org/\n\nDoes it happen with all PDF printers (i.e. Adobe or CutePDF)?", "tags": [], "time": "2011-09-05T20:59:30Z", "attachment_id": null, "raw_text": "Reporter -> Are you still experiencing this issue with the latest version of Firefox 6? Does the issue occur with the latest nightly? http://nightly.mozilla.org/\n\nDoes it happen with all PDF printers (i.e. Adobe or CutePDF)?", "id": 5700961, "count": 1, "bug_id": 664621}, {"id": 5765445, "attachment_id": null, "raw_text": "Bill -> Any update? Please address comment 1", "creation_time": "2011-10-07T01:41:25Z", "author": "fmdevelopertim@gmail.com", "text": "Bill -> Any update? Please address comment 1", "bug_id": 664621, "time": "2011-10-07T01:41:25Z", "tags": [], "is_private": false, "creator": "fmdevelopertim@gmail.com", "count": 2}, {"id": 5845947, "attachment_id": null, "raw_text": "Closing bug as Incomplete - if you are still experiencing this issue or have more information to provide feel free to post back here and we can re-open the bug. You can also get assistance by visiting the Firefox help site -> https://support.mozilla.com/en-US/kb/ask", "creation_time": "2011-11-14T02:22:13Z", "author": "fmdevelopertim@gmail.com", "text": "Closing bug as Incomplete - if you are still experiencing this issue or have more information to provide feel free to post back here and we can re-open the bug. You can also get assistance by visiting the Firefox help site -> https://support.mozilla.com/en-US/kb/ask", "time": "2011-11-14T02:22:13Z", "tags": [], "bug_id": 664621, "is_private": false, "creator": "fmdevelopertim@gmail.com", "count": 3}, {"count": 4, "is_private": false, "creator": "WRobertE@gmail.com", "text": "I just tested with the latest version, Firefox 8.0, and the behavior I initially reported is still present.  I have to close Firefox in order to release the lock.", "bug_id": 664621, "tags": [], "time": "2011-11-14T03:40:54Z", "creation_time": "2011-11-14T03:40:54Z", "author": "WRobertE@gmail.com", "raw_text": "I just tested with the latest version, Firefox 8.0, and the behavior I initially reported is still present.  I have to close Firefox in order to release the lock.", "attachment_id": null, "id": 5846023}, {"raw_text": "Presumably this would be printing code, if anything.", "attachment_id": null, "id": 5846027, "count": 5, "is_private": false, "creator": "josh@joshmatthews.net", "text": "Presumably this would be printing code, if anything.", "bug_id": 664621, "time": "2011-11-14T03:48:09Z", "tags": [], "creation_time": "2011-11-14T03:48:09Z", "author": "josh@joshmatthews.net"}, {"creator": "fmdevelopertim@gmail.com", "is_private": false, "tags": [], "time": "2011-11-14T19:07:06Z", "text": "Does it happen with all PDF printers (i.e. Adobe or CutePDF)?\n\nDoes it happen on non-TrueCrypt volumes?", "author": "fmdevelopertim@gmail.com", "creation_time": "2011-11-14T19:07:06Z", "raw_text": "Does it happen with all PDF printers (i.e. Adobe or CutePDF)?\n\nDoes it happen on non-TrueCrypt volumes?", "attachment_id": null, "id": 5847257, "count": 6, "bug_id": 664621}, {"creator": "WRobertE@gmail.com", "is_private": false, "tags": [], "time": "2011-11-15T00:41:11Z", "text": "It happens for non-Truecrypt volumes and for other virtual printer software, not just doPDF.\n\nIt's easy to re-create as follows:\n\n1. Start Firefox and browse to a web site.  I used iGoogle.com for this recent test.\n2. Insert a flash drive.\n3. In Firefox, print to the flash drive using your choice of virtual printer driver.\n4. Without closing Firefox, in the system tray, click on the \"Safely Remove Hardware\" icon and then click on \"Safely Remove USB Mass Storage Device\".  You will get the error: \"The device cannot be stopped right now.  Try stopping the device later\".\n5. Close Firefox.\n6. Repeat the \"Safely Remove Hardware\" procedure in Step 4.\n7. No error occurs and the device is now removed.\n\nFirefox has the directory on the removable device locked.  Closing Firefox removes the lock.\n\nHope that helps.", "author": "WRobertE@gmail.com", "creation_time": "2011-11-15T00:41:11Z", "raw_text": "It happens for non-Truecrypt volumes and for other virtual printer software, not just doPDF.\n\nIt's easy to re-create as follows:\n\n1. Start Firefox and browse to a web site.  I used iGoogle.com for this recent test.\n2. Insert a flash drive.\n3. In Firefox, print to the flash drive using your choice of virtual printer driver.\n4. Without closing Firefox, in the system tray, click on the \"Safely Remove Hardware\" icon and then click on \"Safely Remove USB Mass Storage Device\".  You will get the error: \"The device cannot be stopped right now.  Try stopping the device later\".\n5. Close Firefox.\n6. Repeat the \"Safely Remove Hardware\" procedure in Step 4.\n7. No error occurs and the device is now removed.\n\nFirefox has the directory on the removable device locked.  Closing Firefox removes the lock.\n\nHope that helps.", "attachment_id": null, "id": 5848267, "count": 7, "bug_id": 664621}]}}, "comments": {}}