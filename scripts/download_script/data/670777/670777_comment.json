{"bugs": {"670777": {"comments": [{"text": "Created attachment 545277\nfirefox-debug_0ba8_2011-07-12_00-00-26-421.log\n\nUser Agent: Mozilla/4.0 (compatible; MSIE 8.0; PPP v5.1 (1,1,1); Windows NT 5.1; Trident/4.0; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; InfoPath.2; .NET4.0C; .NET4.0E)\n\nSteps to reproduce:\n\nI launch Firefox and tried to open the Options window (Tools menu). Same results if I wnat to save a page, download a file. \nVery similar to the Bug 587903 - Firefox hangs on Options \"General\" tab OR saving files OR \"Downloads\" (but I don't have Tortoise)\n\n\nActual results:\n\nFirefox hangs and I need to kill the process.\n\n\nExpected results:\n\nThe Options window should have been opened or the file should have been downloaded...\nI enclose a stacktrace (but not sure it worked properly).\nThanks for your help", "time": "2011-07-11T23:03:01Z", "tags": [], "bug_id": 670777, "creation_time": "2011-07-11T23:03:01Z", "author": "fletertre@wanadoo.fr", "count": 0, "is_private": false, "creator": "fletertre@wanadoo.fr", "id": 5585604, "raw_text": "User Agent: Mozilla/4.0 (compatible; MSIE 8.0; PPP v5.1 (1,1,1); Windows NT 5.1; Trident/4.0; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; InfoPath.2; .NET4.0C; .NET4.0E)\n\nSteps to reproduce:\n\nI launch Firefox and tried to open the Options window (Tools menu). Same results if I wnat to save a page, download a file. \nVery similar to the Bug 587903 - Firefox hangs on Options \"General\" tab OR saving files OR \"Downloads\" (but I don't have Tortoise)\n\n\nActual results:\n\nFirefox hangs and I need to kill the process.\n\n\nExpected results:\n\nThe Options window should have been opened or the file should have been downloaded...\nI enclose a stacktrace (but not sure it worked properly).\nThanks for your help", "attachment_id": 545277}, {"text": "try it with http://support.mozilla.com/en-US/kb/Safe+Mode\nFor the stacktrace: You forgot the commands at the end, see \nhttps://developer.mozilla.org/en/How_to_get_a_stacktrace_with_WinDbg", "tags": [], "time": "2011-07-11T23:59:16Z", "bug_id": 670777, "creation_time": "2011-07-11T23:59:16Z", "author": "bugzilla@mversen.de", "count": 1, "is_private": false, "creator": "bugzilla@mversen.de", "id": 5585710, "raw_text": "try it with http://support.mozilla.com/en-US/kb/Safe+Mode\nFor the stacktrace: You forgot the commands at the end, see \nhttps://developer.mozilla.org/en/How_to_get_a_stacktrace_with_WinDbg", "attachment_id": null}, {"raw_text": "Tahnks Matthias,\nWell I forgot to say what I tried before sending this bug:\n- launching Firefox in safe mode\n- uninstalling (including deleting my profile) and reinstalling Firefox (several times in different version: 3.6.13, 3.6.16, 5.0)\n- using ccleaner\n- upgrading to DOTNET 4\n- desactivating the extensions...\nThe results stayed the same: Firefox always hang and I had to kill the process.\n\nFor the stacktrace, I followed the steps listed in \"How to get a stacktrace with WinDbg\" but as it hung, Firefox stopped producing logs. So I chose Break from the Debug menu. It didn't stop Firefox and I had to kill the process as usual. When I entered the last few commands (|* ~* kp...), it didn't give any information. What have I done wrong? What should I do? \nRegards\nFran\u00e7ois", "attachment_id": null, "id": 5586736, "count": 2, "is_private": false, "creator": "fletertre@wanadoo.fr", "text": "Tahnks Matthias,\nWell I forgot to say what I tried before sending this bug:\n- launching Firefox in safe mode\n- uninstalling (including deleting my profile) and reinstalling Firefox (several times in different version: 3.6.13, 3.6.16, 5.0)\n- using ccleaner\n- upgrading to DOTNET 4\n- desactivating the extensions...\nThe results stayed the same: Firefox always hang and I had to kill the process.\n\nFor the stacktrace, I followed the steps listed in \"How to get a stacktrace with WinDbg\" but as it hung, Firefox stopped producing logs. So I chose Break from the Debug menu. It didn't stop Firefox and I had to kill the process as usual. When I entered the last few commands (|* ~* kp...), it didn't give any information. What have I done wrong? What should I do? \nRegards\nFran\u00e7ois", "tags": [], "time": "2011-07-12T15:46:25Z", "bug_id": 670777, "creation_time": "2011-07-12T15:46:25Z", "author": "fletertre@wanadoo.fr"}, {"is_private": false, "creator": "bugzilla@mversen.de", "creation_time": "2011-07-12T16:42:19Z", "author": "bugzilla@mversen.de", "text": ">o I chose Break from the Debug menu.\nThat is right. The Firefox process is now frozen in the current state and ready to debug.\n>It didn't stop Firefox and I had to kill the process as usual.\nWhy do you killed the process ? \n>When I entered the last few commands (|* ~* kp...), it didn't give any information.\nThere is nothing to debug if you already killed the process....", "tags": [], "time": "2011-07-12T16:42:19Z", "attachment_id": null, "raw_text": ">o I chose Break from the Debug menu.\nThat is right. The Firefox process is now frozen in the current state and ready to debug.\n>It didn't stop Firefox and I had to kill the process as usual.\nWhy do you killed the process ? \n>When I entered the last few commands (|* ~* kp...), it didn't give any information.\nThere is nothing to debug if you already killed the process....", "id": 5586837, "count": 3, "bug_id": 670777}, {"bug_id": 670777, "count": 4, "author": "fletertre@wanadoo.fr", "creation_time": "2011-07-12T20:04:13Z", "time": "2011-07-12T20:04:13Z", "tags": [], "text": "Created attachment 545453\nNew stacktrace", "creator": "fletertre@wanadoo.fr", "is_private": false, "id": 5587439, "attachment_id": 545453, "raw_text": ""}, {"id": 5587445, "attachment_id": null, "raw_text": "Hi Matthias,\nThanks to your remark, what I didn't understand yesterday became clear, so I run again WinDbg and add the new stacktrace as an attachment. \nCiao", "author": "fletertre@wanadoo.fr", "creation_time": "2011-07-12T20:06:58Z", "tags": [], "time": "2011-07-12T20:06:58Z", "text": "Hi Matthias,\nThanks to your remark, what I didn't understand yesterday became clear, so I run again WinDbg and add the new stacktrace as an attachment. \nCiao", "creator": "fletertre@wanadoo.fr", "is_private": false, "bug_id": 670777, "count": 5}, {"id": 5587758, "attachment_id": null, "raw_text": "Does it work if you start windows in the windows safemode ?\nThat would remove this injected .dll\nC:\\Program Files\\Alwil Software\\Avast5\\snxhk.dll", "author": "bugzilla@mversen.de", "creation_time": "2011-07-12T22:09:29Z", "time": "2011-07-12T22:09:29Z", "tags": [], "text": "Does it work if you start windows in the windows safemode ?\nThat would remove this injected .dll\nC:\\Program Files\\Alwil Software\\Avast5\\snxhk.dll", "creator": "bugzilla@mversen.de", "is_private": false, "bug_id": 670777, "count": 6}, {"id": 5589944, "raw_text": "No it doesn't.\nSo I uninstalled Avast (it removed the snxhk.dll file), uninstalled Firefox (including my profile), reinstalled Firefox and tried again. It still didn't work (even in safe mode). I enclosed the new stacktrace but really don't know what to try.", "attachment_id": null, "text": "No it doesn't.\nSo I uninstalled Avast (it removed the snxhk.dll file), uninstalled Firefox (including my profile), reinstalled Firefox and tried again. It still didn't work (even in safe mode). I enclosed the new stacktrace but really don't know what to try.", "bug_id": 670777, "tags": [], "time": "2011-07-13T21:03:32Z", "creation_time": "2011-07-13T21:03:32Z", "author": "fletertre@wanadoo.fr", "count": 7, "is_private": false, "creator": "fletertre@wanadoo.fr"}, {"creation_time": "2011-07-13T21:06:39Z", "author": "fletertre@wanadoo.fr", "text": "Created attachment 545741\nStacktrace - After Avast uninstall", "tags": [], "time": "2011-07-13T21:06:39Z", "is_private": false, "creator": "fletertre@wanadoo.fr", "id": 5589955, "attachment_id": 545741, "raw_text": "", "bug_id": 670777, "count": 8}, {"is_private": false, "creator": "bugzilla@mversen.de", "count": 9, "creation_time": "2011-07-13T21:23:04Z", "author": "bugzilla@mversen.de", "text": "I'm not sure but it looks like related to load an icon.", "time": "2011-07-13T21:23:04Z", "tags": [], "bug_id": 670777, "attachment_id": null, "raw_text": "I'm not sure but it looks like related to load an icon.", "id": 5589991}, {"id": 5590020, "attachment_id": null, "raw_text": "What does it mean? Do you know what I could try?", "author": "fletertre@wanadoo.fr", "creation_time": "2011-07-13T21:34:22Z", "tags": [], "time": "2011-07-13T21:34:22Z", "text": "What does it mean? Do you know what I could try?", "creator": "fletertre@wanadoo.fr", "is_private": false, "bug_id": 670777, "count": 10}, {"count": 11, "creator": "dholbert@mozilla.com", "is_private": false, "time": "2011-07-13T22:00:13Z", "tags": [], "bug_id": 670777, "text": "{\n00139c10 781384f9 xul!nsACString_internal::Replace(unsigned int cutStart = 0xc700274c, unsigned int cutLength = 0x100, char * data = 0x01cc419e \"--- memory read error at address 0x01cc419e ---\", unsigned int length = 0x1240190)+0xc3 [e:\\builds\\moz2_slave\\rel-rel-w32-bld\\build\\xpcom\\string\\src\\nstsubstring.cpp @ 488]\n00139c2c 101d6367 MOZCRT19!arena_dalloc[etc...]\n}\n\nIf I'm reading that correctly, we're hitting line 488 of nsTSubstring:\n> 488       char_traits::copy(mData + cutStart, data, length);\nwith length = 0x1240190 = 19,136,912\n\nSo we're basically trying to set up a string with 19 million characters, to represent the path of a file.  That seems bogus.", "author": "dholbert@mozilla.com", "creation_time": "2011-07-13T22:00:13Z", "raw_text": "{\n00139c10 781384f9 xul!nsACString_internal::Replace(unsigned int cutStart = 0xc700274c, unsigned int cutLength = 0x100, char * data = 0x01cc419e \"--- memory read error at address 0x01cc419e ---\", unsigned int length = 0x1240190)+0xc3 [e:\\builds\\moz2_slave\\rel-rel-w32-bld\\build\\xpcom\\string\\src\\nstsubstring.cpp @ 488]\n00139c2c 101d6367 MOZCRT19!arena_dalloc[etc...]\n}\n\nIf I'm reading that correctly, we're hitting line 488 of nsTSubstring:\n> 488       char_traits::copy(mData + cutStart, data, length);\nwith length = 0x1240190 = 19,136,912\n\nSo we're basically trying to set up a string with 19 million characters, to represent the path of a file.  That seems bogus.", "attachment_id": null, "id": 5590075}, {"creation_time": "2011-07-13T22:14:59Z", "author": "dholbert@mozilla.com", "text": "This is inside of a call to \"GetWindowsFolder\", which creates a file-handle for a \"special\" windows folder (e.g. Desktop, Downloads) \n\nWhen fletertre hits this problem on the Preferences dialog, I'm guessing the windows special-folder in play might be the default Downloads folder, which is displayed on the General preferences-tab under \"Save files to\". (And it makes sense that file-save / download manager (both noted in comment 0) would be looking up that same folder.)\n\nfletertre: Are any of your special folders like \"Downloads\" or your home-directory located in a nonstandard location, like maybe on a network drive or something?", "time": "2011-07-13T22:14:59Z", "tags": [], "bug_id": 670777, "is_private": false, "creator": "dholbert@mozilla.com", "count": 12, "id": 5590099, "attachment_id": null, "raw_text": "This is inside of a call to \"GetWindowsFolder\", which creates a file-handle for a \"special\" windows folder (e.g. Desktop, Downloads) \n\nWhen fletertre hits this problem on the Preferences dialog, I'm guessing the windows special-folder in play might be the default Downloads folder, which is displayed on the General preferences-tab under \"Save files to\". (And it makes sense that file-save / download manager (both noted in comment 0) would be looking up that same folder.)\n\nfletertre: Are any of your special folders like \"Downloads\" or your home-directory located in a nonstandard location, like maybe on a network drive or something?"}, {"bug_id": 670777, "count": 13, "text": "(In reply to comment #12)\n> fletertre: Are any of your special folders like \"Downloads\" or your\n> home-directory located in a nonstandard location, like maybe on a network\n> drive or something?\n\n(or alternately, are there any unusual characters in the path to these folders -- e.g. some unicode character in your Windows username -- that we might be tripping over?)", "time": "2011-07-13T22:26:03Z", "tags": [], "creation_time": "2011-07-13T22:26:03Z", "author": "dholbert@mozilla.com", "is_private": false, "creator": "dholbert@mozilla.com", "id": 5590124, "raw_text": "(In reply to comment #12)\n> fletertre: Are any of your special folders like \"Downloads\" or your\n> home-directory located in a nonstandard location, like maybe on a network\n> drive or something?\n\n(or alternately, are there any unusual characters in the path to these folders -- e.g. some unicode character in your Windows username -- that we might be tripping over?)", "attachment_id": null}, {"id": 5590815, "raw_text": "Network drive: I don't think so as my pc is not part of a network. I can't check the actual value of these folders by the preferences dialog through Firefox. Is there anothere way to check the paths to these folders? \nThough as I uninstalled several times Firefox, it should be a default value. Besides I think Firefox was set up as to download a file in the last folder used for downloading.\nUnusual characters: My username is either \"Fran\u00e7ois\" or \"Francois\". I'm not at home so I can't check right now but could the \"\u00e7\" be a problem. I don't see why as it had worked until a few days ago. Then I also launched Firefox from the Administrator account with the same bug.", "attachment_id": null, "text": "Network drive: I don't think so as my pc is not part of a network. I can't check the actual value of these folders by the preferences dialog through Firefox. Is there anothere way to check the paths to these folders? \nThough as I uninstalled several times Firefox, it should be a default value. Besides I think Firefox was set up as to download a file in the last folder used for downloading.\nUnusual characters: My username is either \"Fran\u00e7ois\" or \"Francois\". I'm not at home so I can't check right now but could the \"\u00e7\" be a problem. I don't see why as it had worked until a few days ago. Then I also launched Firefox from the Administrator account with the same bug.", "bug_id": 670777, "time": "2011-07-14T07:10:22Z", "tags": [], "creation_time": "2011-07-14T07:10:22Z", "author": "fletertre@wanadoo.fr", "count": 14, "is_private": false, "creator": "fletertre@wanadoo.fr"}, {"attachment_id": null, "raw_text": "What are your Values of \"browser.download.dir\"/\"browser.download.lastDir\" you get of \"about:config\"?", "id": 5592242, "creator": "xtc4uall@gmail.com", "is_private": false, "author": "xtc4uall@gmail.com", "creation_time": "2011-07-14T21:10:35Z", "tags": [], "time": "2011-07-14T21:10:35Z", "text": "What are your Values of \"browser.download.dir\"/\"browser.download.lastDir\" you get of \"about:config\"?", "count": 15, "bug_id": 670777}, {"is_private": false, "creator": "fletertre@wanadoo.fr", "count": 16, "creation_time": "2011-07-14T22:49:56Z", "author": "fletertre@wanadoo.fr", "text": "No such line, the closest I have is browser.download.useDownloadDir;true.\nI enclose my prefs.js file.\nMy username is Fran\u00e7ois.", "tags": [], "bug_id": 670777, "time": "2011-07-14T22:49:56Z", "attachment_id": null, "raw_text": "No such line, the closest I have is browser.download.useDownloadDir;true.\nI enclose my prefs.js file.\nMy username is Fran\u00e7ois.", "id": 5592491}, {"creator": "fletertre@wanadoo.fr", "is_private": false, "count": 17, "author": "fletertre@wanadoo.fr", "creation_time": "2011-07-14T22:53:02Z", "tags": [], "bug_id": 670777, "time": "2011-07-14T22:53:02Z", "text": "Created attachment 546025\nprefs.js", "attachment_id": 546025, "raw_text": "", "id": 5592497}]}}, "comments": {}}