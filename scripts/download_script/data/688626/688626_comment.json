{"bugs": {"688626": {"comments": [{"creator": "justin.lebar+bug@gmail.com", "author": "justin.lebar+bug@gmail.com", "raw_text": "Looks like this should be nsAutoTArray<4>, according to attachment 559017.", "creation_time": "2011-09-22T22:06:14Z", "text": "Looks like this should be nsAutoTArray<4>, according to attachment 559017.", "attachment_id": null, "time": "2011-09-22T22:06:14Z", "tags": [], "is_private": false, "count": 0, "id": 5732237, "bug_id": 688626}, {"creation_time": "2011-09-22T22:07:04Z", "raw_text": "", "creator": "justin.lebar+bug@gmail.com", "text": "Created attachment 561898\nPatch v1", "author": "justin.lebar+bug@gmail.com", "attachment_id": 561898, "time": "2011-09-22T22:07:04Z", "tags": [], "is_private": false, "count": 1, "id": 5732243, "bug_id": 688626}, {"bug_id": 688626, "tags": [], "count": 2, "is_private": false, "id": 5732684, "text": "This makes for pretty massive hashtable entries which then have to get copied around. Are you sure this is wise?\n\nI think it would probably make more sense to give FrameLayerBuilder an arena and allocate ThebesLayerItemsEntrys and all their parts from that arena. The arena would have the lifetime of the FrameLayerBuilder object (which is torn down after every paint).", "attachment_id": null, "time": "2011-09-23T00:18:52Z", "raw_text": "This makes for pretty massive hashtable entries which then have to get copied around. Are you sure this is wise?\n\nI think it would probably make more sense to give FrameLayerBuilder an arena and allocate ThebesLayerItemsEntrys and all their parts from that arena. The arena would have the lifetime of the FrameLayerBuilder object (which is torn down after every paint).", "creation_time": "2011-09-23T00:18:52Z", "creator": "roc@ocallahan.org", "author": "roc@ocallahan.org"}, {"creator": "justin.lebar+bug@gmail.com", "author": "justin.lebar+bug@gmail.com", "creation_time": "2011-09-23T04:14:03Z", "raw_text": "(In reply to Robert O'Callahan (:roc) (Mozilla Corporation) from comment #2)\n> This makes for pretty massive hashtable entries which then have to get\n> copied around. Are you sure this is wise?\n\nI'd need to check, but when I instrumented DisplayItemEntry, I saw that the number of hashtable entries created was about equal to the number of hashtable entries moved.  If that holds for this hashtable, I doubt this is any slower.\n\n> I think it would probably make more sense to give FrameLayerBuilder an arena\n> and allocate ThebesLayerItemsEntrys and all their parts from that arena. The\n> arena would have the lifetime of the FrameLayerBuilder object (which is torn\n> down after every paint).\n\nHm...okay.  I'll see if that makes sense.", "text": "(In reply to Robert O'Callahan (:roc) (Mozilla Corporation) from comment #2)\n> This makes for pretty massive hashtable entries which then have to get\n> copied around. Are you sure this is wise?\n\nI'd need to check, but when I instrumented DisplayItemEntry, I saw that the number of hashtable entries created was about equal to the number of hashtable entries moved.  If that holds for this hashtable, I doubt this is any slower.\n\n> I think it would probably make more sense to give FrameLayerBuilder an arena\n> and allocate ThebesLayerItemsEntrys and all their parts from that arena. The\n> arena would have the lifetime of the FrameLayerBuilder object (which is torn\n> down after every paint).\n\nHm...okay.  I'll see if that makes sense.", "time": "2011-09-23T04:14:03Z", "attachment_id": null, "count": 3, "is_private": false, "tags": [], "id": 5732958, "bug_id": 688626}]}}, "comments": {}}