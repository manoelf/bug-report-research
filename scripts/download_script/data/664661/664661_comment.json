{"bugs": {"664661": {"comments": [{"bug_id": 664661, "count": 0, "id": 5535996, "raw_text": "The (unpatched) sect_er.c test hangs indefinitely, because PR_Select() on FreeBSD fails to detect, that it was passed an already closed file-descriptor.", "attachment_id": null, "time": "2011-06-16T05:20:59Z", "tags": [], "text": "The (unpatched) sect_er.c test hangs indefinitely, because PR_Select() on FreeBSD fails to detect, that it was passed an already closed file-descriptor.", "author": "mi+mozilla@aldan.algebra.com", "creation_time": "2011-06-16T05:20:59Z", "creator": "mi+mozilla@aldan.algebra.com", "is_private": false}, {"author": "mi+mozilla@aldan.algebra.com", "creation_time": "2011-06-16T05:33:43Z", "tags": [], "bug_id": 664661, "time": "2011-06-16T05:33:43Z", "text": "Created attachment 539724\nA test program calling socket() and select() directly, without NSPR\n\nThe attached program behaves the same on both Linux and FreeBSD. On both systems, the output is:\n\n% ./select-test \nTrying to read-select on closed read-fd\nselect: Bad file descriptor\n% ./select-test foo\nTrying to write-select on closed write-fd\nselect: Success\n% ./select-test foo bar\nTrying to read-select on closed TCP-socket\nselect: Success\n\nThis suggests, the test should be failing on Linux as well (select-ing on an already closed TCP-socket returns success instead of reporting bad file descriptor), but it does not...", "creator": "mi+mozilla@aldan.algebra.com", "is_private": false, "count": 1, "id": 5536004, "attachment_id": 539724, "raw_text": "The attached program behaves the same on both Linux and FreeBSD. On both systems, the output is:\n\n% ./select-test \nTrying to read-select on closed read-fd\nselect: Bad file descriptor\n% ./select-test foo\nTrying to write-select on closed write-fd\nselect: Success\n% ./select-test foo bar\nTrying to read-select on closed TCP-socket\nselect: Success\n\nThis suggests, the test should be failing on Linux as well (select-ing on an already closed TCP-socket returns success instead of reporting bad file descriptor), but it does not..."}]}}, "comments": {}}