{"comments": {}, "bugs": {"1644297": {"comments": [{"attachment_id": null, "raw_text": "Dark Reader stopped working in Nightly 79.0.20200605043926.\n\nStill fine in Nightly 79.0.20200604092907.\n\nFenix bug: https://github.com/mozilla-mobile/fenix/issues/11336\n\nRelevant entry from the logs:\n```\ncan't access property \"config\", $sync is undefined index.js:1896\n    loadSettingsFromStorage moz-extension://f330e768-8120-488d-b54e-28e2209d7a63/background/index.js:1896\n    apply self-hosted:1941\n    applySafeWithoutClone resource://gre/modules/ExtensionCommon.jsm:614\n    wrapPromise resource://gre/modules/ExtensionCommon.jsm:843\n    withLastError resource://gre/modules/ExtensionCommon.jsm:762\n    wrapPromise resource://gre/modules/ExtensionCommon.jsm:831\n    loadExtensionFile moz-extension://6b69d78a-1335-42dd-b4fd-9f39115ab558/background-scripts/util.js:49\n    applyStoredRulesets moz-extension://6b69d78a-1335-42dd-b4fd-9f39115ab558/background-scripts/update.js:218\n    InterpretGeneratorResume self-hosted:1151\n    AsyncFunctionNext self-hosted:693\nUnchecked lastError value: Error: An unexpected error occurred index.js:1894\n    loadSettingsFromStorage moz-extension://f330e768-8120-488d-b54e-28e2209d7a63/background/index.js:1894\n```", "id": 14870689, "author": "csadilek@mozilla.com", "creation_time": "2020-06-08T22:56:48Z", "text": "Dark Reader stopped working in Nightly 79.0.20200605043926.\n\nStill fine in Nightly 79.0.20200604092907.\n\nFenix bug: https://github.com/mozilla-mobile/fenix/issues/11336\n\nRelevant entry from the logs:\n```\ncan't access property \"config\", $sync is undefined index.js:1896\n    loadSettingsFromStorage moz-extension://f330e768-8120-488d-b54e-28e2209d7a63/background/index.js:1896\n    apply self-hosted:1941\n    applySafeWithoutClone resource://gre/modules/ExtensionCommon.jsm:614\n    wrapPromise resource://gre/modules/ExtensionCommon.jsm:843\n    withLastError resource://gre/modules/ExtensionCommon.jsm:762\n    wrapPromise resource://gre/modules/ExtensionCommon.jsm:831\n    loadExtensionFile moz-extension://6b69d78a-1335-42dd-b4fd-9f39115ab558/background-scripts/util.js:49\n    applyStoredRulesets moz-extension://6b69d78a-1335-42dd-b4fd-9f39115ab558/background-scripts/update.js:218\n    InterpretGeneratorResume self-hosted:1151\n    AsyncFunctionNext self-hosted:693\nUnchecked lastError value: Error: An unexpected error occurred index.js:1894\n    loadSettingsFromStorage moz-extension://f330e768-8120-488d-b54e-28e2209d7a63/background/index.js:1894\n```", "count": 0, "tags": [], "is_private": false, "bug_id": 1644297, "creator": "csadilek@mozilla.com", "time": "2020-06-08T22:56:48Z"}, {"count": 1, "creation_time": "2020-06-09T05:22:16Z", "raw_text": "Thanks. Bisecting...", "time": "2020-06-09T05:22:16Z", "creator": "agi@sferro.dev", "tags": [], "text": "Thanks. Bisecting...", "id": 14870918, "author": "agi@sferro.dev", "attachment_id": null, "is_private": false, "bug_id": 1644297}, {"author": "agi@sferro.dev", "id": 14870919, "attachment_id": null, "text": "14:44.57 INFO: Last good revision: 6bb6a5cdc941eaa15c0e36dcaf8e4ad8509d4e90\n14:44.57 INFO: First bad revision: fc977a4eff9e6a1d27b1efdc3e0980bc5958976d\n14:44.57 INFO: Pushlog:\nhttps://hg.mozilla.org/integration/autoland/pushloghtml?fromchange=6bb6a5cdc941eaa15c0e36dcaf8e4ad8509d4e90&tochange=fc977a4eff9e6a1d27b1efdc3e0980bc5958976d", "bug_id": 1644297, "is_private": false, "raw_text": "14:44.57 INFO: Last good revision: 6bb6a5cdc941eaa15c0e36dcaf8e4ad8509d4e90\n14:44.57 INFO: First bad revision: fc977a4eff9e6a1d27b1efdc3e0980bc5958976d\n14:44.57 INFO: Pushlog:\nhttps://hg.mozilla.org/integration/autoland/pushloghtml?fromchange=6bb6a5cdc941eaa15c0e36dcaf8e4ad8509d4e90&tochange=fc977a4eff9e6a1d27b1efdc3e0980bc5958976d", "count": 2, "creation_time": "2020-06-09T05:33:47Z", "tags": [], "time": "2020-06-09T05:33:47Z", "creator": "agi@sferro.dev"}, {"is_private": false, "bug_id": 1644297, "tags": [], "time": "2020-06-09T05:39:36Z", "creator": "agi@sferro.dev", "id": 14870922, "author": "agi@sferro.dev", "attachment_id": null, "raw_text": "Mark any ideas? this seems to completely break `storage.sync` on Android.", "count": 3, "text": "Mark any ideas? this seems to completely break `storage.sync` on Android.", "creation_time": "2020-06-09T05:39:36Z"}, {"creator": "agi@sferro.dev", "time": "2020-06-09T20:59:15Z", "tags": [], "count": 4, "creation_time": "2020-06-09T20:59:15Z", "raw_text": "This also adds a smoke test which runs on all platforms to avoid regressions.", "bug_id": 1644297, "is_private": false, "text": "Created attachment 9155440\nBug 1644297 - Re enable old browser.storage.sync on Android.\n\nThis also adds a smoke test which runs on all platforms to avoid regressions.", "author": "agi@sferro.dev", "id": 14872938, "attachment_id": 9155440}, {"bug_id": 1644297, "is_private": false, "text": "Ooof, thanks for catching this, Agi!\n\nWait, though\u2014how did this sync before, given that we aren't shipping the Desktop FxA stack in GV? Or was Dark Reader effectively using `storage.sync` for local storage only before?\n\nI wrote about one way we could support `storage.sync` in GV, so that Android Components could wire it up to our Rust component, in [this comment](https://bugzilla.mozilla.org/show_bug.cgi?id=1626506#c4)\u2014do you think that would work?", "id": 14872953, "author": "lina@yakshaving.ninja", "attachment_id": null, "time": "2020-06-09T21:05:25Z", "creator": "lina@yakshaving.ninja", "tags": [], "count": 5, "creation_time": "2020-06-09T21:05:25Z", "raw_text": "Ooof, thanks for catching this, Agi!\n\nWait, though\u2014how did this sync before, given that we aren't shipping the Desktop FxA stack in GV? Or was Dark Reader effectively using `storage.sync` for local storage only before?\n\nI wrote about one way we could support `storage.sync` in GV, so that Android Components could wire it up to our Rust component, in [this comment](https://bugzilla.mozilla.org/show_bug.cgi?id=1626506#c4)\u2014do you think that would work?"}, {"creator": "agi@sferro.dev", "time": "2020-06-09T21:16:59Z", "tags": [], "creation_time": "2020-06-09T21:16:59Z", "count": 6, "raw_text": "No worries! Yeah `storage.sync` is effectively a local storage today on Android.\n\nYeah I just linked that comment on our bug: https://bugzilla.mozilla.org/show_bug.cgi?id=1625257 the API you describe is very similar to what snorp and I were thinking last time we talked about this, it should work!", "is_private": false, "bug_id": 1644297, "text": "No worries! Yeah `storage.sync` is effectively a local storage today on Android.\n\nYeah I just linked that comment on our bug: https://bugzilla.mozilla.org/show_bug.cgi?id=1625257 the API you describe is very similar to what snorp and I were thinking last time we talked about this, it should work!", "attachment_id": null, "author": "agi@sferro.dev", "id": 14872973}, {"tags": [], "is_private": false, "bug_id": 1644297, "time": "2020-06-09T21:22:59Z", "creator": "lina@yakshaving.ninja", "raw_text": "Gotcha! I'll follow bug 1625257; thanks for linking to it, and for the fix and test!", "attachment_id": null, "author": "lina@yakshaving.ninja", "id": 14872979, "creation_time": "2020-06-09T21:22:59Z", "text": "Gotcha! I'll follow bug 1625257; thanks for linking to it, and for the fix and test!", "count": 7}, {"time": "2020-06-10T18:00:54Z", "creator": "pulsebot@bots.tld", "tags": [], "creation_time": "2020-06-10T18:00:54Z", "count": 8, "raw_text": "Pushed by asferro@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/02e2cc3bd511\nRe enable old browser.storage.sync on Android. r=rpl,snorp", "bug_id": 1644297, "is_private": false, "text": "Pushed by asferro@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/02e2cc3bd511\nRe enable old browser.storage.sync on Android. r=rpl,snorp", "attachment_id": null, "author": "pulsebot@bots.tld", "id": 14874640}, {"text": "*** Bug 1644526 has been marked as a duplicate of this bug. ***", "author": "ryanvm@gmail.com", "id": 14875050, "attachment_id": null, "is_private": false, "bug_id": 1644297, "count": 9, "creation_time": "2020-06-10T21:23:01Z", "raw_text": "", "time": "2020-06-10T21:23:01Z", "creator": "ryanvm@gmail.com", "tags": []}, {"time": "2020-06-11T04:08:14Z", "creator": "btara@mozilla.com", "tags": ["bugherder"], "creation_time": "2020-06-11T04:08:14Z", "count": 10, "raw_text": "https://hg.mozilla.org/mozilla-central/rev/02e2cc3bd511", "is_private": false, "bug_id": 1644297, "text": "https://hg.mozilla.org/mozilla-central/rev/02e2cc3bd511", "attachment_id": null, "id": 14875532, "author": "btara@mozilla.com"}, {"time": "2020-06-16T17:13:48Z", "creator": "jcristau@mozilla.com", "tags": [], "bug_id": 1644297, "is_private": false, "creation_time": "2020-06-16T17:13:48Z", "text": "Comment on attachment 9155440\nBug 1644297 - Re enable old browser.storage.sync on Android.\n\nI'm going to graft this to beta along with bug 1645598.  The pref change is a no-op there, but this way 78 will get the new test file (which is modified in that other bug).", "count": 11, "raw_text": "I'm going to graft this to beta along with bug 1645598.  The pref change is a no-op there, but this way 78 will get the new test file (which is modified in that other bug).", "attachment_id": 9155440, "id": 14885473, "author": "jcristau@mozilla.com"}, {"id": 14885700, "author": "ryanvm@gmail.com", "attachment_id": null, "text": "https://hg.mozilla.org/releases/mozilla-beta/rev/dce83a6b19e2", "bug_id": 1644297, "is_private": false, "raw_text": "https://hg.mozilla.org/releases/mozilla-beta/rev/dce83a6b19e2", "count": 12, "creation_time": "2020-06-16T19:21:40Z", "tags": ["bugherder", "uplift"], "time": "2020-06-16T19:21:40Z", "creator": "ryanvm@gmail.com"}]}}}