{"comments": {}, "bugs": {"652346": {"comments": [{"author": "azakai@mozilla.com", "creator": "azakai@mozilla.com", "tags": [], "count": 0, "bug_id": 652346, "id": 5428080, "raw_text": "In the tiny attached benchmark, which focuses on array reads&writes, using typed arrays does not speed things up and in fact slows things down a bit. This is due to the methodjit (tracejit on the other hand does well - typed arrays are faster). This seems odd to me since I would expect such a benchmark to benefit from typed arrays.\n\nRun the benchmark with argument 0 for no typed arrays, argument 1 for typed arrays. My results:\n\n-m typed:         1.88 secs\n-m untyped:       1.84\n-m -j -p typed:   1.88 (see also bug 612019)\n-m -j -p untyped: 1.84\n-j typed:         1.04\n-j untyped:       1.47\n\nv8 untyped:       3.04\n\nSo spidermonkey does well, generally speaking. But I am curious as to why typed arrays do not help here, and worse, why they actually make the methodjit slightly slower.", "creation_time": "2011-04-23T19:03:41Z", "text": "Created attachment 527956\ntiny array benchmark\n\nIn the tiny attached benchmark, which focuses on array reads&writes, using typed arrays does not speed things up and in fact slows things down a bit. This is due to the methodjit (tracejit on the other hand does well - typed arrays are faster). This seems odd to me since I would expect such a benchmark to benefit from typed arrays.\n\nRun the benchmark with argument 0 for no typed arrays, argument 1 for typed arrays. My results:\n\n-m typed:         1.88 secs\n-m untyped:       1.84\n-m -j -p typed:   1.88 (see also bug 612019)\n-m -j -p untyped: 1.84\n-j typed:         1.04\n-j untyped:       1.47\n\nv8 untyped:       3.04\n\nSo spidermonkey does well, generally speaking. But I am curious as to why typed arrays do not help here, and worse, why they actually make the methodjit slightly slower.", "attachment_id": 527956, "time": "2011-04-23T19:03:41Z", "is_private": false}, {"attachment_id": null, "time": "2011-04-23T19:11:15Z", "is_private": false, "author": "azakai@mozilla.com", "creator": "azakai@mozilla.com", "tags": [], "count": 1, "bug_id": 652346, "id": 5428083, "raw_text": "Forgot to say, the reason I ran into this is that I see the exact same problem with lots of code compiled using Emscripten. It is not specific to the attached benchmark.", "creation_time": "2011-04-23T19:11:15Z", "text": "Forgot to say, the reason I ran into this is that I see the exact same problem with lots of code compiled using Emscripten. It is not specific to the attached benchmark."}, {"bug_id": 652346, "count": 2, "creator": "shaver@mozilla.org", "time": "2011-04-24T03:20:46Z", "tags": [], "raw_text": "I suspect it's because of the extra indirections required, there are definitely improvements to be made. (Bug 650657.)", "id": 5428304, "text": "I suspect it's because of the extra indirections required, there are definitely improvements to be made. (Bug 650657.)", "is_private": false, "creation_time": "2011-04-24T03:20:46Z", "author": "shaver@mozilla.org", "attachment_id": null}, {"author": "nsm.nikhil@gmail.com", "raw_text": "patches from 656519 solve some of the indirections in bug 650657. Still significant differences between with/without method JIT.\nRunning the benchmark after applying patches from bug 656519 gives these numbers:\n\n-m typed:       1.076   secs\n-m untyped:       1.054\n-m -j -p typed:    1.081\n-m -j -p untyped: 1.07\n-j typed:         0.442\n-j untyped:    0.498", "id": 5487495, "text": "patches from 656519 solve some of the indirections in bug 650657. Still significant differences between with/without method JIT.\nRunning the benchmark after applying patches from bug 656519 gives these numbers:\n\n-m typed:       1.076   secs\n-m untyped:       1.054\n-m -j -p typed:    1.081\n-m -j -p untyped: 1.07\n-j typed:         0.442\n-j untyped:    0.498", "creation_time": "2011-05-23T20:58:13Z", "bug_id": 652346, "count": 3, "creator": "nsm.nikhil@gmail.com", "tags": [], "attachment_id": null, "is_private": false, "time": "2011-05-23T20:58:13Z"}, {"author": "till@tillschneidereit.net", "attachment_id": null, "raw_text": "With mjit gone, lets morph this bug - it's still relevant, sadly:\n\n(ignoring the typed-or-normal-arrays thing, as typed arrays are slightly faster but otherwise exhibit the same patterns).\n\njs:            1.507 secs\njs --no-ti:    1.397 secs\njs --no-ion:   1.394 secs\n\njsc:           0.451 secs\nd8:            0.657 secs", "id": 7665638, "text": "With mjit gone, lets morph this bug - it's still relevant, sadly:\n\n(ignoring the typed-or-normal-arrays thing, as typed arrays are slightly faster but otherwise exhibit the same patterns).\n\njs:            1.507 secs\njs --no-ti:    1.397 secs\njs --no-ion:   1.394 secs\n\njsc:           0.451 secs\nd8:            0.657 secs", "creation_time": "2013-07-23T12:11:21Z", "is_private": false, "bug_id": 652346, "tags": [], "count": 4, "creator": "till@tillschneidereit.net", "time": "2013-07-23T12:11:21Z"}]}}}