{"bugs": {"649485": {"comments": [{"id": 5404782, "count": 0, "author": "bhearsum@mozilla.com", "time": "2011-04-12T20:57:45Z", "is_private": false, "text": "bug 649322 tracks an issue that with mar generation logic that broke all l10n nightly builds on trunk, in the update portion. This got me thinking that it would be easy for something to break complete MAR generation on en-US, too. We should start generating MARs for dep builds, to catch these sorts of things earlier.\n\nIdeally, we shouldn't upload them, though. We'll want something in the build system to help us here, or to just throw them out before running upload. This isn't a blocker, though.", "bug_id": 649485, "creator": "bhearsum@mozilla.com", "raw_text": "bug 649322 tracks an issue that with mar generation logic that broke all l10n nightly builds on trunk, in the update portion. This got me thinking that it would be easy for something to break complete MAR generation on en-US, too. We should start generating MARs for dep builds, to catch these sorts of things earlier.\n\nIdeally, we shouldn't upload them, though. We'll want something in the build system to help us here, or to just throw them out before running upload. This isn't a blocker, though.", "attachment_id": null, "creation_time": "2011-04-12T20:57:45Z", "tags": []}, {"raw_text": "This might be something we do as part of CI build promotion.", "creator": "bhearsum@mozilla.com", "text": "This might be something we do as part of CI build promotion.", "time": "2014-12-19T19:46:18Z", "count": 1, "tags": [], "creation_time": "2014-12-19T19:46:18Z", "attachment_id": null, "bug_id": 649485, "is_private": false, "author": "bhearsum@mozilla.com", "id": 9716536}, {"id": 9717207, "is_private": false, "time": "2014-12-19T21:36:39Z", "author": "nrthomas@gmail.com", "count": 2, "bug_id": 649485, "text": "Yes indeed.", "tags": [], "creation_time": "2014-12-19T21:36:39Z", "attachment_id": null, "raw_text": "Yes indeed.", "creator": "nrthomas@gmail.com"}, {"count": 3, "time": "2015-03-02T03:29:21Z", "author": "nrthomas@gmail.com", "is_private": false, "id": 9972056, "creator": "nrthomas@gmail.com", "raw_text": "So I don't have to figure this out again:\n* mozharness builds call 'mach build'\n* that does a normal 'make -f client.mk', then conditional on MOZ_AUTOMATION does 'make automation/build' (see python/mozbuild/mozbuild/mach_commands.py)\n* that call will run one or more targets defined in build/moz-automation.mk, which in turn depend on variables like MOZ_AUTOMATION_UPDATE_PACKAGING\n* defaults for those variables are in build/mozconfig.automation, with overrides depending on IS_NIGHTLY (which is set by buildbot), eg build/unix/mozconfig.linux", "attachment_id": null, "tags": [], "creation_time": "2015-03-02T03:29:21Z", "text": "So I don't have to figure this out again:\n* mozharness builds call 'mach build'\n* that does a normal 'make -f client.mk', then conditional on MOZ_AUTOMATION does 'make automation/build' (see python/mozbuild/mozbuild/mach_commands.py)\n* that call will run one or more targets defined in build/moz-automation.mk, which in turn depend on variables like MOZ_AUTOMATION_UPDATE_PACKAGING\n* defaults for those variables are in build/mozconfig.automation, with overrides depending on IS_NIGHTLY (which is set by buildbot), eg build/unix/mozconfig.linux", "bug_id": 649485}, {"creation_time": "2015-03-02T03:56:40Z", "tags": [], "attachment_id": 8571145, "bug_id": 649485, "author": "nrthomas@gmail.com", "is_private": false, "id": 9972119, "raw_text": "Generates a complete mar by default, but not a partial. Uploads crash symbols by default. This lets us do a release build on every push, but defer partials to funsize. In theory anyway, testing it on date.", "creator": "nrthomas@gmail.com", "text": "Created attachment 8571145\n[gecko] Do some nightly work on dep builds\n\nGenerates a complete mar by default, but not a partial. Uploads crash symbols by default. This lets us do a release build on every push, but defer partials to funsize. In theory anyway, testing it on date.", "time": "2015-03-02T03:56:40Z", "count": 4}, {"raw_text": "Debug builds were hitting errors uploading symbols, so this just changes release style builds. Should also fixes the if which can disable partial update generation.\n\nKnown issue - post_upload.py discards the complete mar because it thinks it's dealing with a tinderbox-build. We still get it uploaded to Taskcluster/S3 though (but behind auth).", "creator": "nrthomas@gmail.com", "text": "Created attachment 8573006\n[gecko] Do some nightly work on dep builds, wip v2\n\nDebug builds were hitting errors uploading symbols, so this just changes release style builds. Should also fixes the if which can disable partial update generation.\n\nKnown issue - post_upload.py discards the complete mar because it thinks it's dealing with a tinderbox-build. We still get it uploaded to Taskcluster/S3 though (but behind auth).", "time": "2015-03-05T03:35:04Z", "count": 5, "tags": [], "creation_time": "2015-03-05T03:35:04Z", "attachment_id": 8573006, "bug_id": 649485, "author": "nrthomas@gmail.com", "is_private": false, "id": 9988915}, {"creator": "nrthomas@gmail.com", "raw_text": "Not working on release promotion at the moment, releasing bug.", "attachment_id": null, "creation_time": "2015-11-09T01:37:28Z", "tags": [], "text": "Not working on release promotion at the moment, releasing bug.", "bug_id": 649485, "count": 6, "time": "2015-11-09T01:37:28Z", "author": "nrthomas@gmail.com", "is_private": false, "id": 10914353}]}}, "comments": {}}