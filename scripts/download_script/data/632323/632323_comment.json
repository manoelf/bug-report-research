{"bugs": {"632323": {"comments": [{"time": "2011-02-08T09:04:20Z", "id": 5262555, "creation_time": "2011-02-08T09:04:20Z", "bug_id": 632323, "raw_text": "", "tags": [], "is_private": false, "text": "", "count": 0, "author": "bugzillamozillaorg_serge_20140323@gautherie.fr", "creator": "bugzillamozillaorg_serge_20140323@gautherie.fr", "attachment_id": null}, {"is_private": false, "tags": [], "raw_text": "Porting this only makes sense if we first port Bug 592822.\n\nThe dependency tree looks something like:\n\n[Bug 592822] Remove quit warning dialog.\n  [Bug 629485] Show close window warning when closing the last window.\n  [Bug 632270] Remove browser-lastwindow-close-requested.\n  [Bug 632271] Entirely remove support for quit dialog.\n\nSo I suggest you morph this bug to say Port 592822 instead.", "bug_id": 632323, "creation_time": "2011-02-08T14:44:38Z", "id": 5263010, "time": "2011-02-08T14:44:38Z", "attachment_id": null, "creator": "philip.chee@gmail.com", "author": "philip.chee@gmail.com", "count": 1, "text": "Porting this only makes sense if we first port Bug 592822.\n\nThe dependency tree looks something like:\n\n[Bug 592822] Remove quit warning dialog.\n  [Bug 629485] Show close window warning when closing the last window.\n  [Bug 632270] Remove browser-lastwindow-close-requested.\n  [Bug 632271] Entirely remove support for quit dialog.\n\nSo I suggest you morph this bug to say Port 592822 instead."}, {"count": 2, "text": "Without having fully checked the implications I'd argue that porting the functionality should be independent from the decision about whether to change the pref defaults (as happened in bug 592822).", "id": 5263577, "time": "2011-02-08T18:01:39Z", "author": "jh@junetz.de", "tags": [], "creator": "jh@junetz.de", "creation_time": "2011-02-08T18:01:39Z", "bug_id": 632323, "raw_text": "Without having fully checked the implications I'd argue that porting the functionality should be independent from the decision about whether to change the pref defaults (as happened in bug 592822).", "attachment_id": null, "is_private": false}, {"author": "philip.chee@gmail.com", "count": 3, "text": "http://blog.zpao.com/post/3174360617/about-that-quit-dialog\nhttp://hg.mozilla.org/mozilla-central/file/84921e24be9c/browser/components/nsBrowserGlue.js#l443\n\nAbout That Quit Dialog\u2026\n\nRemember when we turned it off a couple weeks ago? We did that by just flipping the browser.warnOnQuit preference to false. I mentioned that you could get old behavior back by flipping that preference back to true. That\u2019s not going to work anymore.\n\nI just landed bug 629485 to change things again, so pay attention. When we turned off the quit dialog, we took away any way of stopping the last window from closing without any warning, even if you explicitly set the visible pref browser.tabs.warnOnClose which would show the window closing warning (when you have multiple tabs). That wasn\u2019t so cool. So we played around with the logic and made that possible. But in order to do so, we had to change the default value of browser.warnOnQuit to true and create a new preference which controls the quit dialog (browser.showQuitDialog). I know this sounds a bit inane, but there really wasn\u2019t a better way to do it and maintain browser.warnOnQuit == false as an override.\n\nIt\u2019s all a bit confusing, so I\u2019ve documented the conditions under which we won\u2019t show a dialog, as well as the rules for choosing which dialog to show. Some of that comment is perfectly clear; the rest requires a little bit of understanding of the code (but it shouldn\u2019t be too hard to figure out if you want).\n\nDon\u2019t expect me to write another post like this. I don\u2019t expect any further changes to how this stuff works.\nTL;DR\n\n    * We enabled the window closing dialog when closing the last window would otherwise just quit (mostly important to Windows and Linux users).\n    * If you want the quit dialog back, set browser.showQuitWarning to true and make sure browser.warnOnQuit is also true.\n\nUpdate: Feb. 8, 2011: Yup. I fucked that up a little bit. We aren\u2019t showing the quit dialog if you close the last window, even with the prefs mentioned above. That should be fixed in the next nightly", "attachment_id": null, "creator": "philip.chee@gmail.com", "time": "2011-02-10T08:40:41Z", "id": 5268926, "is_private": false, "raw_text": "http://blog.zpao.com/post/3174360617/about-that-quit-dialog\nhttp://hg.mozilla.org/mozilla-central/file/84921e24be9c/browser/components/nsBrowserGlue.js#l443\n\nAbout That Quit Dialog\u2026\n\nRemember when we turned it off a couple weeks ago? We did that by just flipping the browser.warnOnQuit preference to false. I mentioned that you could get old behavior back by flipping that preference back to true. That\u2019s not going to work anymore.\n\nI just landed bug 629485 to change things again, so pay attention. When we turned off the quit dialog, we took away any way of stopping the last window from closing without any warning, even if you explicitly set the visible pref browser.tabs.warnOnClose which would show the window closing warning (when you have multiple tabs). That wasn\u2019t so cool. So we played around with the logic and made that possible. But in order to do so, we had to change the default value of browser.warnOnQuit to true and create a new preference which controls the quit dialog (browser.showQuitDialog). I know this sounds a bit inane, but there really wasn\u2019t a better way to do it and maintain browser.warnOnQuit == false as an override.\n\nIt\u2019s all a bit confusing, so I\u2019ve documented the conditions under which we won\u2019t show a dialog, as well as the rules for choosing which dialog to show. Some of that comment is perfectly clear; the rest requires a little bit of understanding of the code (but it shouldn\u2019t be too hard to figure out if you want).\n\nDon\u2019t expect me to write another post like this. I don\u2019t expect any further changes to how this stuff works.\nTL;DR\n\n    * We enabled the window closing dialog when closing the last window would otherwise just quit (mostly important to Windows and Linux users).\n    * If you want the quit dialog back, set browser.showQuitWarning to true and make sure browser.warnOnQuit is also true.\n\nUpdate: Feb. 8, 2011: Yup. I fucked that up a little bit. We aren\u2019t showing the quit dialog if you close the last window, even with the prefs mentioned above. That should be fixed in the next nightly", "bug_id": 632323, "creation_time": "2011-02-10T08:40:41Z", "tags": []}, {"id": 5330002, "time": "2011-03-08T14:11:50Z", "tags": [], "raw_text": "I'm not convinced we need this, but Neil should probably decide whether is valid at all. Not blocking for the moment, but Neil can change if he thinks this is warranted.", "bug_id": 632323, "creation_time": "2011-03-08T14:11:50Z", "is_private": false, "count": 4, "text": "I'm not convinced we need this, but Neil should probably decide whether is valid at all. Not blocking for the moment, but Neil can change if he thinks this is warranted.", "author": "iannbugzilla@gmail.com", "creator": "iannbugzilla@gmail.com", "attachment_id": null}, {"author": "info@skierpage.com", "count": 5, "text": "All I want is for SeaMonkey to prompt \"Do you really want to quit?\". My browser.warnOnQuit is true, but I think this intentionally does nothing if you've told SeaMonkey to save and restore tabs, see the long bug 419009 (\"cripes-on-burnt-toast, the various quit option interactions are a snakepit of user confusion\" -- mbeltzner). I added browser.showQuitDialog=true and browser.showQuitWarning=true (mentioned in bug 641500)... nothing helps. If I accidentally press Ctrl+Q instead of Ctrl+W in \"Mozilla/5.0 (X11; Linux x86_64; rv:10.0) Gecko/20120119 Firefox/10.0 SeaMonkey/2.7\", all my SeaMonkey windows go away. :-(\n\nLooking at the comments in nsBrowserGlue.js , it seems you're overthinking this to the detriment of all the users commenting on a slew of bugs.\n  // There are several cases where we won't show a dialog here ...\nplease just show a dialog if browser.somePreferenceToAlwaysWarnOnQuit is true. Thank you.", "attachment_id": null, "creator": "info@skierpage.com", "id": 6021451, "time": "2012-01-31T01:55:25Z", "is_private": false, "tags": [], "bug_id": 632323, "creation_time": "2012-01-31T01:55:25Z", "raw_text": "All I want is for SeaMonkey to prompt \"Do you really want to quit?\". My browser.warnOnQuit is true, but I think this intentionally does nothing if you've told SeaMonkey to save and restore tabs, see the long bug 419009 (\"cripes-on-burnt-toast, the various quit option interactions are a snakepit of user confusion\" -- mbeltzner). I added browser.showQuitDialog=true and browser.showQuitWarning=true (mentioned in bug 641500)... nothing helps. If I accidentally press Ctrl+Q instead of Ctrl+W in \"Mozilla/5.0 (X11; Linux x86_64; rv:10.0) Gecko/20120119 Firefox/10.0 SeaMonkey/2.7\", all my SeaMonkey windows go away. :-(\n\nLooking at the comments in nsBrowserGlue.js , it seems you're overthinking this to the detriment of all the users commenting on a slew of bugs.\n  // There are several cases where we won't show a dialog here ...\nplease just show a dialog if browser.somePreferenceToAlwaysWarnOnQuit is true. Thank you."}]}}, "comments": {}}