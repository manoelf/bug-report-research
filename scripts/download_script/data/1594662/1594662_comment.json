{"bugs": {"1594662": {"comments": [{"id": 14473119, "count": 0, "text": "**Affected versions**\n* Firefox 72.0a1\n* Firefox 71.0b7\n\n**Affected platforms**\n* Windows 10x64\n* Ubuntu 18.04 x64\n* macOS 10.13\n\n**Prerequisites**\n* Set \"browser.contentblocking.cfr-milestone.milestones\" pref to \"[15, 5000, 10000, 25000, 50000, 100000, 500000]\"\n* Set \"browser.contentblocking.cfr-milestone.milestone-achieved\" to \"1000\"\n* Set \"browser.newtabpage.activity-stream.asrouter.providers.cfr\" to {\"id\":\"cfr\",\"enabled\":true,\"type\":\"local\",\"localProvider\":\"CFRMessageProvider\",\"frequency\":{\"custom\":[{\"period\":\"daily\",\"cap\":10}]},\"categories\":[\"cfrAddons\",\"cfrFeatures\"],\"updateCycleInMs\":3600000}\n\n**Steps to reproduce**\n1. Open an ar build. \n2. Go to reddit.com and refresh the page a few times. \n\n**Expected result**\n* The Celebration Toast banner is displayed.\n\n**Actual result**\n* The Celebration Toast is not displayed. \n\n**Regression range**\n* This is not a regression. \n\n**Additional notes**\n* In about:protection the trackers are counted. \n*It's possible that issue is reproducing on other RTL builds, but as far as we could tell on he builds the issue is not reproducing.", "raw_text": "**Affected versions**\n* Firefox 72.0a1\n* Firefox 71.0b7\n\n**Affected platforms**\n* Windows 10x64\n* Ubuntu 18.04 x64\n* macOS 10.13\n\n**Prerequisites**\n* Set \"browser.contentblocking.cfr-milestone.milestones\" pref to \"[15, 5000, 10000, 25000, 50000, 100000, 500000]\"\n* Set \"browser.contentblocking.cfr-milestone.milestone-achieved\" to \"1000\"\n* Set \"browser.newtabpage.activity-stream.asrouter.providers.cfr\" to {\"id\":\"cfr\",\"enabled\":true,\"type\":\"local\",\"localProvider\":\"CFRMessageProvider\",\"frequency\":{\"custom\":[{\"period\":\"daily\",\"cap\":10}]},\"categories\":[\"cfrAddons\",\"cfrFeatures\"],\"updateCycleInMs\":3600000}\n\n**Steps to reproduce**\n1. Open an ar build. \n2. Go to reddit.com and refresh the page a few times. \n\n**Expected result**\n* The Celebration Toast banner is displayed.\n\n**Actual result**\n* The Celebration Toast is not displayed. \n\n**Regression range**\n* This is not a regression. \n\n**Additional notes**\n* In about:protection the trackers are counted. \n*It's possible that issue is reproducing on other RTL builds, but as far as we could tell on he builds the issue is not reproducing.", "author": "oana.botisan@softvision.com", "bug_id": 1594662, "attachment_id": null, "is_private": false, "tags": [], "creator": "oana.botisan@softvision.com", "creation_time": "2019-11-07T08:52:05Z", "time": "2019-11-07T08:52:05Z"}, {"creator": "ericaewright@gmail.com", "id": 14476547, "count": 1, "creation_time": "2019-11-08T16:31:37Z", "time": "2019-11-08T16:31:37Z", "attachment_id": null, "is_private": false, "tags": [], "raw_text": "Using an Arabic build, I was able to trigger the milestone to show both on the new tab devtools page and on https://senglehardt.com/test/trackingprotection/test_pages/tracking_protection.html\n\nthe prefs that should be set are:\n\n- Set \"browser.contentblocking.cfr-milestone.milestones\" pref to \"[1, 5000, 10000, 25000, 50000, 100000, 500000]\"\n- \"browser.contentblocking.cfr-milestone.milestone-achieved\" to \"0\"\n- Set \"browser.newtabpage.activity-stream.asrouter.providers.cfr\" to {\"id\":\"cfr\",\"enabled\":true,\"type\":\"local\",\"localProvider\":\"CFRMessageProvider\",\"frequency\":{\"custom\":[{\"period\":\"daily\",\"cap\":10}]},\"categories\":[\"cfrAddons\",\"cfrFeatures\"],\"updateCycleInMs\":3600000}\n- Set \"browser.contentblocking.cfr-milestone.update-interval\" to 10\n\nOana, can you verify this?\nnote that if you visit a page with fingerprinters/social/crfyptominers you might trigger one of those CFR messages first, so I went to \"https://senglehardt.com/test/trackingprotection/test_pages/tracking_protection.html\" to ensure it will only trigger this message", "text": "Using an Arabic build, I was able to trigger the milestone to show both on the new tab devtools page and on https://senglehardt.com/test/trackingprotection/test_pages/tracking_protection.html\n\nthe prefs that should be set are:\n\n- Set \"browser.contentblocking.cfr-milestone.milestones\" pref to \"[1, 5000, 10000, 25000, 50000, 100000, 500000]\"\n- \"browser.contentblocking.cfr-milestone.milestone-achieved\" to \"0\"\n- Set \"browser.newtabpage.activity-stream.asrouter.providers.cfr\" to {\"id\":\"cfr\",\"enabled\":true,\"type\":\"local\",\"localProvider\":\"CFRMessageProvider\",\"frequency\":{\"custom\":[{\"period\":\"daily\",\"cap\":10}]},\"categories\":[\"cfrAddons\",\"cfrFeatures\"],\"updateCycleInMs\":3600000}\n- Set \"browser.contentblocking.cfr-milestone.update-interval\" to 10\n\nOana, can you verify this?\nnote that if you visit a page with fingerprinters/social/crfyptominers you might trigger one of those CFR messages first, so I went to \"https://senglehardt.com/test/trackingprotection/test_pages/tracking_protection.html\" to ensure it will only trigger this message", "bug_id": 1594662, "author": "ericaewright@gmail.com"}, {"creator": "oana.botisan@softvision.com", "tags": [], "is_private": false, "attachment_id": 9107797, "bug_id": 1594662, "author": "oana.botisan@softvision.com", "text": "Created attachment 9107797\nnumbers not arabic.gif\n\nI tried with the same steps and with the prefs from comment 1 on Windows 10 x64 using Firefox 71.0b8. The doorhanger wasn't triggered. \nOnly when I changed the pref: \"browser.contentblocking.cfr-milestone.milestones\" from \"[1, 5000, 10000, 25000, 50000, 100000, 500000]\" to \"[20, 5000, 10000, 25000, 50000, 100000, 500000]\" on the same profile, the doorhanger was triggered. \nI would like to mention that the numbers in about:protections and in about:config (when trying to change the value of any pref) are not Arabic. I think it might be a translation error or something related to that. This might be the reason the issue is reproducing. Please look at the attached gif.", "raw_text": "I tried with the same steps and with the prefs from comment 1 on Windows 10 x64 using Firefox 71.0b8. The doorhanger wasn't triggered. \nOnly when I changed the pref: \"browser.contentblocking.cfr-milestone.milestones\" from \"[1, 5000, 10000, 25000, 50000, 100000, 500000]\" to \"[20, 5000, 10000, 25000, 50000, 100000, 500000]\" on the same profile, the doorhanger was triggered. \nI would like to mention that the numbers in about:protections and in about:config (when trying to change the value of any pref) are not Arabic. I think it might be a translation error or something related to that. This might be the reason the issue is reproducing. Please look at the attached gif.", "count": 2, "id": 14480123, "time": "2019-11-11T08:31:04Z", "creation_time": "2019-11-11T08:31:04Z"}, {"time": "2019-11-11T08:51:37Z", "creation_time": "2019-11-11T08:51:37Z", "author": "francesco.lodolo@gmail.com", "bug_id": 1594662, "id": 14480139, "count": 3, "text": "(In reply to Oana Botisan, Desktop Release QA from comment #2)\n> I would like to mention that the numbers in about:protections and in about:config (when trying to change the value of any pref) are not Arabic. I think it might be a translation error or something related to that. This might be the reason the issue is reproducing. Please look at the attached gif.\n\nLocalizers don't have control on either of those, so it's not a translation error.\n\nThe fact that numbers are displayed with western numerals in about:protections seems like a bug to me, but also unrelated to the issue.", "raw_text": "(In reply to Oana Botisan, Desktop Release QA from comment #2)\n> I would like to mention that the numbers in about:protections and in about:config (when trying to change the value of any pref) are not Arabic. I think it might be a translation error or something related to that. This might be the reason the issue is reproducing. Please look at the attached gif.\n\nLocalizers don't have control on either of those, so it's not a translation error.\n\nThe fact that numbers are displayed with western numerals in about:protections seems like a bug to me, but also unrelated to the issue.", "is_private": false, "tags": [], "creator": "francesco.lodolo@gmail.com", "attachment_id": null}, {"creation_time": "2019-11-13T19:57:36Z", "time": "2019-11-13T19:57:36Z", "attachment_id": null, "creator": "ericaewright@gmail.com", "tags": [], "is_private": false, "text": "(In reply to Oana Botisan, Desktop Release QA from comment #2)\n> Only when I changed the pref: \"browser.contentblocking.cfr-milestone.milestones\" from \"[1, 5000, 10000, 25000, 50000, 100000, 500000]\" to \"[20, 5000, 10000, 25000, 50000, 100000, 500000]\" on the same profile, the doorhanger was triggered. \n\n\nI believe this is the same issue as Bug 1593258. You need to navigate to 4+ pages first, then reset \"browser.contentblocking.cfr-milestone.milestone-achieved\" to \"0\". This will be fixed in the patch I posted in that bug.", "raw_text": "(In reply to Oana Botisan, Desktop Release QA from comment #2)\n> Only when I changed the pref: \"browser.contentblocking.cfr-milestone.milestones\" from \"[1, 5000, 10000, 25000, 50000, 100000, 500000]\" to \"[20, 5000, 10000, 25000, 50000, 100000, 500000]\" on the same profile, the doorhanger was triggered. \n\n\nI believe this is the same issue as Bug 1593258. You need to navigate to 4+ pages first, then reset \"browser.contentblocking.cfr-milestone.milestone-achieved\" to \"0\". This will be fixed in the patch I posted in that bug.", "count": 4, "id": 14485676, "bug_id": 1594662, "author": "ericaewright@gmail.com"}, {"author": "oana.botisan@softvision.com", "bug_id": 1594662, "text": "On Nightly 72.0a1 the issue seems to be fixed, but I can still reproduce this issue using Firefox 71.0b11 on Windows 10 x64.", "raw_text": "On Nightly 72.0a1 the issue seems to be fixed, but I can still reproduce this issue using Firefox 71.0b11 on Windows 10 x64.", "tags": [], "is_private": false, "attachment_id": null, "time": "2019-11-19T13:43:20Z", "creation_time": "2019-11-19T13:43:20Z", "id": 14497236, "count": 5, "creator": "oana.botisan@softvision.com"}, {"count": 6, "id": 14497402, "creator": "ericaewright@gmail.com", "raw_text": "Excellent, it has been fixed with Bug 1593258, I'll ask for uplift on that bug.", "text": "Excellent, it has been fixed with Bug 1593258, I'll ask for uplift on that bug.", "author": "ericaewright@gmail.com", "bug_id": 1594662, "attachment_id": null, "is_private": false, "tags": [], "creation_time": "2019-11-19T15:07:15Z", "time": "2019-11-19T15:07:15Z"}]}}, "comments": {}}