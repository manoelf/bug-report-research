{"comments": {}, "bugs": {"623866": {"comments": [{"author": "m.gedig@fh-bingen.de", "count": 0, "raw_text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.9.1.16) Gecko/20101123 SeaMonkey/2.0.11\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.9.1.16) Gecko/20101123 SeaMonkey/2.0.11\n\nWhen Saving attachments out of the SeaMonkey EmailClient to an USB-stick, the client becomes unresponsive and the process is very slow (6KB/s). This does not happen when storing to the HD.\n\nReproducible: Always\n\nSteps to Reproduce:\n1. Receive email with attachment of noticeable size (> 1/2 MB) and mount USB-flash-memory-stick\n2. Select \"Save\" from the attachment-context-menu\n3. Wait and observe speed much lower than what the Stick is capable of and unresponsiveness of client and download manager.\nActual Results:  \nIt took 17 minutes to store/export/save an attachment\nnot touching the system it works out fine.\nHigh CPU load at times.\n\nExpected Results:  \nstoring at 8MB/s\n\nnone", "creator": "m.gedig@fh-bingen.de", "attachment_id": null, "tags": [], "text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.9.1.16) Gecko/20101123 SeaMonkey/2.0.11\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.9.1.16) Gecko/20101123 SeaMonkey/2.0.11\n\nWhen Saving attachments out of the SeaMonkey EmailClient to an USB-stick, the client becomes unresponsive and the process is very slow (6KB/s). This does not happen when storing to the HD.\n\nReproducible: Always\n\nSteps to Reproduce:\n1. Receive email with attachment of noticeable size (> 1/2 MB) and mount USB-flash-memory-stick\n2. Select \"Save\" from the attachment-context-menu\n3. Wait and observe speed much lower than what the Stick is capable of and unresponsiveness of client and download manager.\nActual Results:  \nIt took 17 minutes to store/export/save an attachment\nnot touching the system it works out fine.\nHigh CPU load at times.\n\nExpected Results:  \nstoring at 8MB/s\n\nnone", "id": 5182281, "bug_id": 623866, "creation_time": "2011-01-07T11:20:41Z", "is_private": false, "time": "2011-01-07T11:20:41Z"}, {"raw_text": "Possible duplicates and similar issues:\nBug 587724 - Mozilla becomes unresponsive during USB file transfers\nBug 303268 - Very slow \"Save As\" with \"Web Page, Complete\" option to USB drive\nBug 487375 - Severe performance issues on USB stick while deleting or receiving mail", "creator": "philip.chee@gmail.com", "attachment_id": null, "creation_time": "2011-01-07T12:50:14Z", "time": "2011-01-07T12:50:14Z", "text": "Possible duplicates and similar issues:\nBug 587724 - Mozilla becomes unresponsive during USB file transfers\nBug 303268 - Very slow \"Save As\" with \"Web Page, Complete\" option to USB drive\nBug 487375 - Severe performance issues on USB stick while deleting or receiving mail", "bug_id": 623866, "author": "philip.chee@gmail.com", "count": 1, "is_private": false, "tags": [], "id": 5182371}, {"id": 5182609, "bug_id": 623866, "tags": [], "text": "For some reason I didn't find any good matches prior to entering, but:\nBug 303268 and Bug 587724 are similar.\nThe issue seems persistent.\nMy Thumbdrive isn't slow (reads 26MB/s) but\nit is FAT32 formated", "time": "2011-01-07T15:41:23Z", "is_private": false, "creation_time": "2011-01-07T15:41:23Z", "count": 2, "author": "m.gedig@fh-bingen.de", "creator": "m.gedig@fh-bingen.de", "raw_text": "For some reason I didn't find any good matches prior to entering, but:\nBug 303268 and Bug 587724 are similar.\nThe issue seems persistent.\nMy Thumbdrive isn't slow (reads 26MB/s) but\nit is FAT32 formated", "attachment_id": null}, {"tags": [], "id": 5183227, "is_private": false, "author": "bugzilla@mversen.de", "count": 3, "text": "There is another report about saving over network in Firefox that I can't find at the moment. It seems that Gecko stores the files in very small chunks with hurts the performance on the network and might be the reason why some USB Sticks are slow.", "bug_id": 623866, "creation_time": "2011-01-07T19:21:19Z", "time": "2011-01-07T19:21:19Z", "attachment_id": null, "raw_text": "There is another report about saving over network in Firefox that I can't find at the moment. It seems that Gecko stores the files in very small chunks with hurts the performance on the network and might be the reason why some USB Sticks are slow.", "creator": "bugzilla@mversen.de"}, {"author": "philip.chee@gmail.com", "count": 4, "creator": "philip.chee@gmail.com", "raw_text": "According to sid0, it's the chunk size used to stream the file/attachment out to disk/whatever.", "attachment_id": null, "tags": [], "text": "According to sid0, it's the chunk size used to stream the file/attachment out to disk/whatever.", "id": 5184498, "bug_id": 623866, "creation_time": "2011-01-08T04:28:16Z", "is_private": false, "time": "2011-01-08T04:28:16Z"}, {"is_private": false, "tags": [], "id": 5184925, "author": "m.gedig@fh-bingen.de", "count": 5, "creation_time": "2011-01-08T16:18:21Z", "time": "2011-01-08T16:18:21Z", "text": "That sounds very plausible and should not be that hard to change.\nIn an other related bug-report I read, that it doesn't happen with NTFS formated drives. After some trouble I was able to format the Drive using NTFS with 8KB cluster-size. The problem is gone! One might argue that this is a windows issue, but I doubt MS will do anything about it. Mozilla should make sure data is written asynchronously in chunks >4KB.\nTHIS SEEMS LIMITED TO FAT32\nsince I was unable to use exFAT under WinXP-Home I can not say anything about it.", "bug_id": 623866, "attachment_id": null, "raw_text": "That sounds very plausible and should not be that hard to change.\nIn an other related bug-report I read, that it doesn't happen with NTFS formated drives. After some trouble I was able to format the Drive using NTFS with 8KB cluster-size. The problem is gone! One might argue that this is a windows issue, but I doubt MS will do anything about it. Mozilla should make sure data is written asynchronously in chunks >4KB.\nTHIS SEEMS LIMITED TO FAT32\nsince I was unable to use exFAT under WinXP-Home I can not say anything about it.", "creator": "m.gedig@fh-bingen.de"}, {"time": "2011-01-08T17:04:07Z", "is_private": false, "creation_time": "2011-01-08T17:04:07Z", "bug_id": 623866, "id": 5184970, "text": "moving to core:File handling and confirming", "tags": [], "attachment_id": null, "creator": "bugzilla@mversen.de", "raw_text": "moving to core:File handling and confirming", "count": 6, "author": "bugzilla@mversen.de"}, {"tags": [], "id": 5185719, "is_private": false, "author": "bzbarsky@mit.edu", "count": 7, "text": "> Mozilla should make sure data is written asynchronously in chunks >4KB.\n\nThe relevant code in nsExternalHelperAppService.cpp is:\n\n155 // Buffer file writes in 32kb chunks\n156 #define BUFFERED_OUTPUT_SIZE (1024 * 32)\n\nand that's exactly what we do right now.  That's _if_ this is using the exthandler code.  If it's not, then what code is it using?  Philip?", "bug_id": 623866, "creation_time": "2011-01-09T14:35:01Z", "time": "2011-01-09T14:35:01Z", "creator": "bzbarsky@mit.edu", "raw_text": "> Mozilla should make sure data is written asynchronously in chunks >4KB.\n\nThe relevant code in nsExternalHelperAppService.cpp is:\n\n155 // Buffer file writes in 32kb chunks\n156 #define BUFFERED_OUTPUT_SIZE (1024 * 32)\n\nand that's exactly what we do right now.  That's _if_ this is using the exthandler code.  If it's not, then what code is it using?  Philip?", "attachment_id": null}, {"count": 8, "author": "philip.chee@gmail.com", "id": 5185835, "tags": [], "is_private": false, "creator": "philip.chee@gmail.com", "raw_text": "I've asked someone in #maildev to answer this (I think we have two code paths in MailNews depending on *how* you save attachments - bleah!).", "attachment_id": null, "bug_id": 623866, "text": "I've asked someone in #maildev to answer this (I think we have two code paths in MailNews depending on *how* you save attachments - bleah!).", "time": "2011-01-09T17:42:38Z", "creation_time": "2011-01-09T17:42:38Z"}, {"attachment_id": null, "raw_text": "(In reply to Philip Chee from comment #8)\n> I've asked someone in #maildev to answer this (I think we have two code\n> paths in MailNews depending on *how* you save attachments - bleah!).\n\nPhilip, do you call the results of that conversation?\n\nhttp://tinyurl.com/6m6qy6t is a revision of my query from bug 487375 comment 9", "creator": "vseerror@lehigh.edu", "count": 9, "author": "vseerror@lehigh.edu", "is_private": false, "time": "2011-11-20T15:05:50Z", "creation_time": "2011-11-20T15:05:50Z", "bug_id": 623866, "id": 5861248, "text": "(In reply to Philip Chee from comment #8)\n> I've asked someone in #maildev to answer this (I think we have two code\n> paths in MailNews depending on *how* you save attachments - bleah!).\n\nPhilip, do you call the results of that conversation?\n\nhttp://tinyurl.com/6m6qy6t is a revision of my query from bug 487375 comment 9", "tags": []}, {"id": 5862050, "tags": [], "is_private": false, "count": 10, "author": "philip.chee@gmail.com", "bug_id": 623866, "text": "Sorry I can't remember if there was any reply to my query.", "time": "2011-11-21T11:22:32Z", "creation_time": "2011-11-21T11:22:32Z", "creator": "philip.chee@gmail.com", "raw_text": "Sorry I can't remember if there was any reply to my query.", "attachment_id": null}, {"time": "2012-03-16T11:16:39Z", "creation_time": "2012-03-16T11:16:39Z", "bug_id": 623866, "text": "*** Bug 303268 has been marked as a duplicate of this bug. ***", "creator": "vseerror@lehigh.edu", "raw_text": "", "attachment_id": null, "is_private": false, "id": 6145788, "tags": [], "count": 11, "author": "vseerror@lehigh.edu"}, {"creator": "ishikawa@yk.rim.or.jp", "raw_text": "(In reply to Wayne Mery (:wsmwk, use Needinfo for questions) from comment #9)\n> (In reply to Philip Chee from comment #8)\n> > I've asked someone in #maildev to answer this (I think we have two code\n> > paths in MailNews depending on *how* you save attachments - bleah!).\n> \n> Philip, do you call the results of that conversation?\n> \n> http://tinyurl.com/6m6qy6t is a revision of my query from bug 487375 comment\n> 9\n\nThis is an old news.\n\nIf you click on the attachment icon, it invokes one code path.\nIf you click on \"Save\" button in the right hand side at the bottom of message window,\nthen it invokes ANOTHER code path.\n\nI think the one that is invoked by clicking the icon has a reasonable buffer size now, but I have not checked lately.", "attachment_id": null, "count": 12, "author": "ishikawa@yk.rim.or.jp", "is_private": false, "time": "2015-12-07T16:15:26Z", "creation_time": "2015-12-07T16:15:26Z", "id": 10993315, "bug_id": 623866, "tags": [], "text": "(In reply to Wayne Mery (:wsmwk, use Needinfo for questions) from comment #9)\n> (In reply to Philip Chee from comment #8)\n> > I've asked someone in #maildev to answer this (I think we have two code\n> > paths in MailNews depending on *how* you save attachments - bleah!).\n> \n> Philip, do you call the results of that conversation?\n> \n> http://tinyurl.com/6m6qy6t is a revision of my query from bug 487375 comment\n> 9\n\nThis is an old news.\n\nIf you click on the attachment icon, it invokes one code path.\nIf you click on \"Save\" button in the right hand side at the bottom of message window,\nthen it invokes ANOTHER code path.\n\nI think the one that is invoked by clicking the icon has a reasonable buffer size now, but I have not checked lately."}]}}}