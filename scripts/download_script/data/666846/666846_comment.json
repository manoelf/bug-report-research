{"comments": {}, "bugs": {"666846": {"comments": [{"count": 0, "bug_id": 666846, "creator": "betatrash@gmail.com", "is_private": false, "tags": [], "time": "2011-06-24T05:32:59Z", "text": "User-Agent:       Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET4.0C; .NET4.0E)\nBuild Identifier: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.01) Gecko/20100101 Firefox/4.0.1\n\nwin7-x64, not sure if this happens with another OS.\n\nattempting this with anchors, not sure if it happens with other elements.\n\nwhen clicking on a link, :focus is given, but when the mouse button is released, :focus is removed.\n\nthe behaviour is currently mirrored by :active in FX4.\n\nReproducible: Always\n\nSteps to Reproduce:\n1. click on an anchor with a :focus selector\n2. link changes to match, now release the mouse button\n3. :focus is lost\n\nActual Results:  \nfocus is lost\n\nExpected Results:  \nfocus should me maintained", "author": "betatrash@gmail.com", "creation_time": "2011-06-24T05:32:59Z", "raw_text": "User-Agent:       Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET4.0C; .NET4.0E)\nBuild Identifier: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.01) Gecko/20100101 Firefox/4.0.1\n\nwin7-x64, not sure if this happens with another OS.\n\nattempting this with anchors, not sure if it happens with other elements.\n\nwhen clicking on a link, :focus is given, but when the mouse button is released, :focus is removed.\n\nthe behaviour is currently mirrored by :active in FX4.\n\nReproducible: Always\n\nSteps to Reproduce:\n1. click on an anchor with a :focus selector\n2. link changes to match, now release the mouse button\n3. :focus is lost\n\nActual Results:  \nfocus is lost\n\nExpected Results:  \nfocus should me maintained", "attachment_id": null, "id": 5553283}, {"id": 5553287, "attachment_id": 541605, "raw_text": "click the second link, focus is given\nrelease the mouse button, focus is lost", "creation_time": "2011-06-24T05:34:22Z", "author": "betatrash@gmail.com", "text": "Created attachment 541605\nExampleHTML Comment#2\n\nclick the second link, focus is given\nrelease the mouse button, focus is lost", "bug_id": 666846, "time": "2011-06-24T05:34:22Z", "tags": [], "is_private": false, "creator": "betatrash@gmail.com", "count": 1}, {"creator": "betatrash@gmail.com", "is_private": false, "author": "betatrash@gmail.com", "creation_time": "2011-06-24T05:53:20Z", "time": "2011-06-24T05:53:20Z", "tags": [], "text": "what i don't understand is: if the link navigates to itself using the fragment #id, then why doesn't it retain focus?\n\nagain, possibly only on win7-x64.", "attachment_id": null, "raw_text": "what i don't understand is: if the link navigates to itself using the fragment #id, then why doesn't it retain focus?\n\nagain, possibly only on win7-x64.", "id": 5553307, "count": 2, "bug_id": 666846}, {"creation_time": "2011-06-24T05:59:16Z", "author": "bzbarsky@mit.edu", "text": "Neil, Olli, any idea what's up here?", "bug_id": 666846, "time": "2011-06-24T05:59:16Z", "tags": [], "is_private": false, "creator": "bzbarsky@mit.edu", "count": 3, "id": 5553312, "attachment_id": null, "raw_text": "Neil, Olli, any idea what's up here?"}, {"attachment_id": 541608, "raw_text": "old example was stale", "id": 5553318, "creator": "betatrash@gmail.com", "is_private": false, "count": 4, "author": "betatrash@gmail.com", "creation_time": "2011-06-24T06:06:08Z", "bug_id": 666846, "tags": [], "time": "2011-06-24T06:06:08Z", "text": "Created attachment 541608\nExampleHTML Comment#3\n\nold example was stale"}, {"creation_time": "2011-06-24T06:09:54Z", "author": "betatrash@gmail.com", "text": "this currently works in opera 11.1, just tested and ie8/9. chrome doesnt even apply :active on mouse events, so this doesnt apply.", "tags": [], "time": "2011-06-24T06:09:54Z", "is_private": false, "creator": "betatrash@gmail.com", "id": 5553327, "attachment_id": null, "raw_text": "this currently works in opera 11.1, just tested and ie8/9. chrome doesnt even apply :active on mouse events, so this doesnt apply.", "bug_id": 666846, "count": 5}, {"time": "2011-06-24T06:10:55Z", "tags": [], "bug_id": 666846, "text": "why cant i edit my comments, my gawd i make so many mistakes haha. i meant to say chrome doesn't apply :focus on mouse events. that will be all.", "author": "betatrash@gmail.com", "creation_time": "2011-06-24T06:10:55Z", "count": 6, "creator": "betatrash@gmail.com", "is_private": false, "id": 5553330, "raw_text": "why cant i edit my comments, my gawd i make so many mistakes haha. i meant to say chrome doesn't apply :focus on mouse events. that will be all.", "attachment_id": null}, {"is_private": false, "creator": "betatrash@gmail.com", "count": 7, "creation_time": "2011-06-24T06:49:48Z", "author": "betatrash@gmail.com", "text": "well, narrowed it down a bit. the focus is still there, but the css style is removed.\n\nif you tab to the second link, then press enter, the style disappears, but if you press tab again, you are at the 3rd link.", "tags": [], "time": "2011-06-24T06:49:48Z", "bug_id": 666846, "attachment_id": null, "raw_text": "well, narrowed it down a bit. the focus is still there, but the css style is removed.\n\nif you tab to the second link, then press enter, the style disappears, but if you press tab again, you are at the 3rd link.", "id": 5553383}, {"creator": "andrei.domuta@softvision.ro", "is_private": false, "author": "andrei.domuta@softvision.ro", "creation_time": "2011-06-24T09:17:18Z", "time": "2011-06-24T09:17:18Z", "tags": [], "text": "(In reply to comment #3)\n> Neil, Olli, any idea what's up here?\n\nTracking Firefox 7, maybe?", "attachment_id": null, "raw_text": "(In reply to comment #3)\n> Neil, Olli, any idea what's up here?\n\nTracking Firefox 7, maybe?", "id": 5553552, "count": 8, "bug_id": 666846}, {"id": 5554093, "attachment_id": null, "raw_text": "This is because clicking an anchor that refers to the same page:\n - moves the caret to the anchor target destination\n - clears the focus on the page\nThis way the next tab key press begins from the anchor target instead, which is what one would want.\n\nSee http://mxr.mozilla.org/mozilla-central/source/layout/base/nsPresShell.cpp#3957\n\nThe testcase here has an anchor that refers to itself and the code doesn't handle this case. Are self-referring anchors common enough to warrant a fix here?", "author": "enndeakin@gmail.com", "creation_time": "2011-06-24T15:45:55Z", "time": "2011-06-24T15:45:55Z", "bug_id": 666846, "tags": [], "text": "This is because clicking an anchor that refers to the same page:\n - moves the caret to the anchor target destination\n - clears the focus on the page\nThis way the next tab key press begins from the anchor target instead, which is what one would want.\n\nSee http://mxr.mozilla.org/mozilla-central/source/layout/base/nsPresShell.cpp#3957\n\nThe testcase here has an anchor that refers to itself and the code doesn't handle this case. Are self-referring anchors common enough to warrant a fix here?", "creator": "enndeakin@gmail.com", "is_private": false, "count": 9}, {"text": "Would it make sense to also focus the anchor target destination if it's focusable?", "tags": [], "time": "2011-06-24T15:56:47Z", "creation_time": "2011-06-24T15:56:47Z", "author": "bzbarsky@mit.edu", "is_private": false, "creator": "bzbarsky@mit.edu", "id": 5554123, "raw_text": "Would it make sense to also focus the anchor target destination if it's focusable?", "attachment_id": null, "bug_id": 666846, "count": 10}, {"author": "enndeakin@gmail.com", "creation_time": "2011-06-24T16:00:45Z", "time": "2011-06-24T16:00:45Z", "bug_id": 666846, "tags": [], "text": "Possibly, but that would create visual noise (focus rings) that may be undesirable in some cases.", "creator": "enndeakin@gmail.com", "is_private": false, "count": 11, "id": 5554132, "attachment_id": null, "raw_text": "Possibly, but that would create visual noise (focus rings) that may be undesirable in some cases."}, {"creator": "betatrash@gmail.com", "is_private": false, "tags": [], "time": "2011-06-24T20:39:39Z", "text": "Created attachment 541779\nExampleHTML Comment#12\n\nheres another example, the focus is moved to the next control after it is clicked.\n\nseveral issues here:\n\nopera: focus remains on the old element. this is wrong. if browsing to a frag#id, focus should be set to the new one, or should at least be reset.\n\nchrome: focus is reset. however, chrome does not apply :focus selector to mouse events.\n\nie8/9: focus moves to the new frag#id. this is the correct behaviour.\n\nfirefox: focus moves to the new frag#id, but the :focus css selector is not applied.\n\nwhat are focus rings? that has nothing do do with focus outlines, correct?", "author": "betatrash@gmail.com", "creation_time": "2011-06-24T20:39:39Z", "raw_text": "heres another example, the focus is moved to the next control after it is clicked.\n\nseveral issues here:\n\nopera: focus remains on the old element. this is wrong. if browsing to a frag#id, focus should be set to the new one, or should at least be reset.\n\nchrome: focus is reset. however, chrome does not apply :focus selector to mouse events.\n\nie8/9: focus moves to the new frag#id. this is the correct behaviour.\n\nfirefox: focus moves to the new frag#id, but the :focus css selector is not applied.\n\nwhat are focus rings? that has nothing do do with focus outlines, correct?", "attachment_id": 541779, "id": 5554927, "count": 12, "bug_id": 666846}, {"id": 5554970, "attachment_id": null, "raw_text": "logically speaking, firefox is setting the focus to the new frag#id, which makes sense, because if that is a heading for example, with a form below it, the next tab press should go to the first field on the form, and not the beginning of the document.\n\nhowever, if an element is given focus in the browser, then the :focus selector must be applied, because if someone decides to do a element:focus {} in their css, then the logic is broken. ie: how can my element have focus and my selector is not applied? this behaviour is broken.\n\nthen at least ie/firefox would agree that this is the correct behaviour (as it seems you already do agree by applying focus to it, except youre not applying the selector, breaking logic).\n\ni dont care about opera/chrome, chrome still has tons of bugs/layout issues and opera just doesnt have the marketting/market share. not like they're detestable browsers, theyre just not as much of an issue for developers as IE/FX are. thanks for your understanding.", "creation_time": "2011-06-24T20:50:29Z", "author": "betatrash@gmail.com", "text": "logically speaking, firefox is setting the focus to the new frag#id, which makes sense, because if that is a heading for example, with a form below it, the next tab press should go to the first field on the form, and not the beginning of the document.\n\nhowever, if an element is given focus in the browser, then the :focus selector must be applied, because if someone decides to do a element:focus {} in their css, then the logic is broken. ie: how can my element have focus and my selector is not applied? this behaviour is broken.\n\nthen at least ie/firefox would agree that this is the correct behaviour (as it seems you already do agree by applying focus to it, except youre not applying the selector, breaking logic).\n\ni dont care about opera/chrome, chrome still has tons of bugs/layout issues and opera just doesnt have the marketting/market share. not like they're detestable browsers, theyre just not as much of an issue for developers as IE/FX are. thanks for your understanding.", "bug_id": 666846, "tags": [], "time": "2011-06-24T20:50:29Z", "is_private": false, "creator": "betatrash@gmail.com", "count": 13}, {"attachment_id": null, "raw_text": "hmm ok, that's odd. browsing with tab+enter in firefox: it's like the position of the focus is maintained, but the element with the new focus will not accept keyboard commands like the enter key. although if tabbed is pressed again, focus moves to the next element.\n\nso css :focus selector is not applied, and keyboard input is not accepted.\n\nalso, more bugs in chrome/opera, not moving focus at all (either css or browser focus) after enter key is pressed (although they change the URL).", "id": 5555010, "creator": "betatrash@gmail.com", "is_private": false, "author": "betatrash@gmail.com", "creation_time": "2011-06-24T21:04:00Z", "time": "2011-06-24T21:04:00Z", "tags": [], "text": "hmm ok, that's odd. browsing with tab+enter in firefox: it's like the position of the focus is maintained, but the element with the new focus will not accept keyboard commands like the enter key. although if tabbed is pressed again, focus moves to the next element.\n\nso css :focus selector is not applied, and keyboard input is not accepted.\n\nalso, more bugs in chrome/opera, not moving focus at all (either css or browser focus) after enter key is pressed (although they change the URL).", "count": 14, "bug_id": 666846}, {"id": 5555061, "raw_text": "fixed one typo, if you test this in IE8/9: keyboard input is accepted and the :focus selector is set.\n\npress enter on one element and you can cycle through all of them. is this what you mean by a focus 'ring'?", "attachment_id": 541792, "text": "Created attachment 541792\nExampleHTML Comment#15\n\nfixed one typo, if you test this in IE8/9: keyboard input is accepted and the :focus selector is set.\n\npress enter on one element and you can cycle through all of them. is this what you mean by a focus 'ring'?", "tags": [], "bug_id": 666846, "time": "2011-06-24T21:16:51Z", "creation_time": "2011-06-24T21:16:51Z", "author": "betatrash@gmail.com", "count": 15, "is_private": false, "creator": "betatrash@gmail.com"}, {"id": 13435759, "raw_text": "https://bugzilla.mozilla.org/show_bug.cgi?id=1472046\n\nMove all DOM bugs that haven\u2019t been updated in more than 3 years and has no one currently assigned to P5.\n\nIf you have questions, please contact :mdaly.", "attachment_id": null, "bug_id": 666846, "time": "2018-06-29T04:48:19Z", "tags": [], "text": "https://bugzilla.mozilla.org/show_bug.cgi?id=1472046\n\nMove all DOM bugs that haven\u2019t been updated in more than 3 years and has no one currently assigned to P5.\n\nIf you have questions, please contact :mdaly.", "author": "bug-husbandry-bot@mozilla.bugs", "creation_time": "2018-06-29T04:48:19Z", "count": 16, "creator": "bug-husbandry-bot@mozilla.bugs", "is_private": false}, {"creation_time": "2021-12-09T10:40:29Z", "author": "hani.yacoub@softvision.com", "text": "Managed to reproduce this on macOS 11.6, Windows 10 x64 and on Ubuntu 20.04 x64 on Firefox Nightly 97.0a1, Firefox 96.0b2 and on Firefox 95.0.", "tags": [], "bug_id": 666846, "time": "2021-12-09T10:40:29Z", "is_private": false, "creator": "hani.yacoub@softvision.com", "count": 17, "id": 15689776, "attachment_id": null, "raw_text": "Managed to reproduce this on macOS 11.6, Windows 10 x64 and on Ubuntu 20.04 x64 on Firefox Nightly 97.0a1, Firefox 96.0b2 and on Firefox 95.0."}]}}}