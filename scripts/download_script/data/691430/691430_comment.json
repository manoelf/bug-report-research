{"bugs": {"691430": {"comments": [{"id": 5754733, "tags": [], "is_private": false, "count": 0, "bug_id": 691430, "raw_text": "As noted in Bug 485067 comment 21, we now default to PDF format for print-to-file on Linux.\n\nHowever, as noted the subsequent comments there, there can apparently be stale pref data in existing profiles that makes us default to PS format instead -- and as a result, we hit a GTK bug that makes the default filename \".ps\" instead of \"mozilla.ps\"\n\nFiling this bug on tracking down whatever that stale profile state is that makes us default to PS format.", "creation_time": "2011-10-03T18:34:31Z", "attachment_id": null, "time": "2011-10-03T18:34:31Z", "text": "As noted in Bug 485067 comment 21, we now default to PDF format for print-to-file on Linux.\n\nHowever, as noted the subsequent comments there, there can apparently be stale pref data in existing profiles that makes us default to PS format instead -- and as a result, we hit a GTK bug that makes the default filename \".ps\" instead of \"mozilla.ps\"\n\nFiling this bug on tracking down whatever that stale profile state is that makes us default to PS format.", "author": "dholbert@mozilla.com", "creator": "dholbert@mozilla.com"}, {"count": 1, "is_private": false, "tags": [], "id": 5754748, "bug_id": 691430, "raw_text": "In one case (my profile), the stale default-to-PS state mysteriously fixed itself.\nIn another case (Jonathan Kamens), removing \"print_to_filename\" prefs fixed the issue.\n\nI'm not sure how \"print_to_filename\" comes into play, though, because his (buggy) profile and my (non-buggy) profile had similar values.  (absolute paths to non-dotfile PS filenames)", "creation_time": "2011-10-03T18:37:57Z", "text": "In one case (my profile), the stale default-to-PS state mysteriously fixed itself.\nIn another case (Jonathan Kamens), removing \"print_to_filename\" prefs fixed the issue.\n\nI'm not sure how \"print_to_filename\" comes into play, though, because his (buggy) profile and my (non-buggy) profile had similar values.  (absolute paths to non-dotfile PS filenames)", "attachment_id": null, "time": "2011-10-03T18:37:57Z", "creator": "dholbert@mozilla.com", "author": "dholbert@mozilla.com"}, {"bug_id": 691430, "id": 5754753, "count": 2, "is_private": false, "tags": [], "attachment_id": null, "time": "2011-10-03T18:40:45Z", "text": "(In reply to Daniel Holbert [:dholbert] from comment #0)\n> and as a result, we hit a GTK bug that makes the default filename\n> \".ps\" instead of \"mozilla.ps\"\n\n(that's https://bugzilla.gnome.org/show_bug.cgi?id=603823 btw)", "creation_time": "2011-10-03T18:40:45Z", "raw_text": "(In reply to Daniel Holbert [:dholbert] from comment #0)\n> and as a result, we hit a GTK bug that makes the default filename\n> \".ps\" instead of \"mozilla.ps\"\n\n(that's https://bugzilla.gnome.org/show_bug.cgi?id=603823 btw)", "author": "dholbert@mozilla.com", "creator": "dholbert@mozilla.com"}, {"creator": "t_arceri@yahoo.com.au", "author": "t_arceri@yahoo.com.au", "creation_time": "2011-10-03T23:46:16Z", "raw_text": "These setting seem to be loaded/saved by this class src/widget/src/xpwidgets/nsPrintOptionImpl.cpp", "text": "These setting seem to be loaded/saved by this class src/widget/src/xpwidgets/nsPrintOptionImpl.cpp", "attachment_id": null, "time": "2011-10-03T23:46:16Z", "is_private": false, "count": 3, "tags": [], "id": 5755869, "bug_id": 691430}, {"raw_text": "It looks to me as if the stale prefs data is an entry in the \"prefs.js\" file relating to the DEFAULT printer: \"printer_<defaultPrinterName>.print_to_filename\", not the \"printer_Print_to_File\" entry. \n\nThis entry isn't used (at least in my Ubuntu 11.10), as printing to file is done via a specific \"print to file\" profile, not via the profile of an existing printer.\n\nIn a pre-existing profile, this had the value: \"/home/brian/mozilla.ps\", and that profile was exhibiting the behaviour in the Description above. Changing the value to \"/home/brian/mozilla.pdf\" and restarting Firefox resolved the problem.\n\nIn my case the line was:\n  user_pref(\"printer_HL2240D.print_to_filename\", \"/home/brian/mozilla.ps\");\nChanging the \".ps\" to \".pdf\" fixed it.\n\nThis worked in both a current merge (firefox-9.0a2.en-US.linux-i686) and the Ubuntu package version (7.0.1) - in both cases, editing the line in the profile.js file of an existing profile caused the \"Print to file\" dialogue box to present the \"PDF\" radio button as selected and the offered filename to be a \"mozilla.pdf\", not just \".pdf\".", "creation_time": "2011-11-07T10:29:41Z", "text": "It looks to me as if the stale prefs data is an entry in the \"prefs.js\" file relating to the DEFAULT printer: \"printer_<defaultPrinterName>.print_to_filename\", not the \"printer_Print_to_File\" entry. \n\nThis entry isn't used (at least in my Ubuntu 11.10), as printing to file is done via a specific \"print to file\" profile, not via the profile of an existing printer.\n\nIn a pre-existing profile, this had the value: \"/home/brian/mozilla.ps\", and that profile was exhibiting the behaviour in the Description above. Changing the value to \"/home/brian/mozilla.pdf\" and restarting Firefox resolved the problem.\n\nIn my case the line was:\n  user_pref(\"printer_HL2240D.print_to_filename\", \"/home/brian/mozilla.ps\");\nChanging the \".ps\" to \".pdf\" fixed it.\n\nThis worked in both a current merge (firefox-9.0a2.en-US.linux-i686) and the Ubuntu package version (7.0.1) - in both cases, editing the line in the profile.js file of an existing profile caused the \"Print to file\" dialogue box to present the \"PDF\" radio button as selected and the offered filename to be a \"mozilla.pdf\", not just \".pdf\".", "creator": "brian@marriott.id.au", "attachment_id": null, "time": "2011-11-07T10:29:41Z", "author": "brian@marriott.id.au", "is_private": false, "count": 4, "tags": [], "id": 5830134, "bug_id": 691430}, {"creator": "dholbert@mozilla.com", "author": "dholbert@mozilla.com", "bug_id": 691430, "tags": [], "is_private": false, "count": 5, "id": 5931285, "text": "*** Bug 712479 has been marked as a duplicate of this bug. ***", "time": "2011-12-20T23:52:45Z", "attachment_id": null, "raw_text": "", "creation_time": "2011-12-20T23:52:45Z"}, {"creator": "dholbert@mozilla.com", "author": "dholbert@mozilla.com", "creation_time": "2011-12-20T23:54:20Z", "raw_text": "(In reply to Brian Marriott from comment #4)\n> It looks to me as if the stale prefs data is an entry in the \"prefs.js\" file\n> relating to the DEFAULT printer:\n> \"printer_<defaultPrinterName>.print_to_filename\", not the\n> \"printer_Print_to_File\" entry. \n[...]\n> In my case the line was:\n>   user_pref(\"printer_HL2240D.print_to_filename\", \"/home/brian/mozilla.ps\");\n> Changing the \".ps\" to \".pdf\" fixed it.\n\nI think you're right -- ddahl had the same experience, as noted in bug 712479 comment 0.", "text": "(In reply to Brian Marriott from comment #4)\n> It looks to me as if the stale prefs data is an entry in the \"prefs.js\" file\n> relating to the DEFAULT printer:\n> \"printer_<defaultPrinterName>.print_to_filename\", not the\n> \"printer_Print_to_File\" entry. \n[...]\n> In my case the line was:\n>   user_pref(\"printer_HL2240D.print_to_filename\", \"/home/brian/mozilla.ps\");\n> Changing the \".ps\" to \".pdf\" fixed it.\n\nI think you're right -- ddahl had the same experience, as noted in bug 712479 comment 0.", "attachment_id": null, "time": "2011-12-20T23:54:20Z", "is_private": false, "count": 6, "tags": [], "id": 5931292, "bug_id": 691430}]}}, "comments": {}}