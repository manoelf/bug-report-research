{"comments": {}, "bugs": {"637251": {"comments": [{"time": "2011-02-28T08:05:05Z", "id": 5308064, "raw_text": "locale: zh-CN.UTF-8\n\nSteps to reproduce:\n\n1)Launch #thunderbird\n2)Create a New Contact from File->New->Address Book Contact\n3)Input the contact details and in Photo tab select a localized image file in \"On this computer\" field\n\nResult: Localized image filename is garbled in this field", "creation_time": "2011-02-28T08:05:05Z", "bug_id": 637251, "tags": [], "is_private": false, "count": 0, "text": "locale: zh-CN.UTF-8\n\nSteps to reproduce:\n\n1)Launch #thunderbird\n2)Create a New Contact from File->New->Address Book Contact\n3)Input the contact details and in Photo tab select a localized image file in \"On this computer\" field\n\nResult: Localized image filename is garbled in this field", "author": "eagle.lu@gmail.com", "creator": "eagle.lu@gmail.com", "attachment_id": null}, {"id": 5308066, "author": "eagle.lu@gmail.com", "time": "2011-02-28T08:07:16Z", "text": "Created attachment 515570\nset filefield label to path name explicitly", "count": 1, "is_private": false, "attachment_id": 515570, "creator": "eagle.lu@gmail.com", "tags": [], "raw_text": "", "creation_time": "2011-02-28T08:07:16Z", "bug_id": 637251}, {"is_private": false, "attachment_id": 515570, "raw_text": "Whilst this works around the issue, I'm not convinced it is the correct fix. The really issue appears to be here:\n\nhttp://hg.mozilla.org/mozilla-central/annotate/1240004b90e6/toolkit/content/widgets/filefield.xml#l71\n\nnsIURL.fileName may contain escaped characters. So if we don't want to display escaped characters I think that is the place where it looks like we should fix it.\n\nFixing the core issue would also fix the case where we're re-opening the dialog, which this patch currently misses.", "bug_id": 637251, "creation_time": "2011-03-11T12:07:50Z", "creator": "standard8@mozilla.com", "tags": [], "author": "standard8@mozilla.com", "time": "2011-03-11T12:07:50Z", "id": 5338744, "count": 2, "text": "Comment on attachment 515570\nset filefield label to path name explicitly\n\nWhilst this works around the issue, I'm not convinced it is the correct fix. The really issue appears to be here:\n\nhttp://hg.mozilla.org/mozilla-central/annotate/1240004b90e6/toolkit/content/widgets/filefield.xml#l71\n\nnsIURL.fileName may contain escaped characters. So if we don't want to display escaped characters I think that is the place where it looks like we should fix it.\n\nFixing the core issue would also fix the case where we're re-opening the dialog, which this patch currently misses."}, {"attachment_id": null, "is_private": false, "bug_id": 637251, "creation_time": "2011-03-11T12:22:20Z", "raw_text": "Looks like this is a bug in the <filefield> implementation - it gets the name by converting the file to a URL (!) which encodes non-ascii characters.", "tags": [], "creator": "neil@httl.net", "time": "2011-03-11T12:22:20Z", "author": "neil@httl.net", "id": 5338759, "count": 3, "text": "Looks like this is a bug in the <filefield> implementation - it gets the name by converting the file to a URL (!) which encodes non-ascii characters."}, {"is_private": false, "creation_time": "2011-03-11T12:29:38Z", "bug_id": 637251, "raw_text": "Looks like the code did this ever since Ben's first check in 6 years ago.", "tags": [], "time": "2011-03-11T12:29:38Z", "id": 5338767, "attachment_id": null, "creator": "neil@httl.net", "author": "neil@httl.net", "text": "Looks like the code did this ever since Ben's first check in 6 years ago.", "count": 4}, {"id": 5345210, "time": "2011-03-15T06:34:34Z", "tags": [], "raw_text": "", "bug_id": 637251, "creation_time": "2011-03-15T06:34:34Z", "is_private": false, "count": 5, "text": "Created attachment 519343\nfix in filefield", "author": "eagle.lu@gmail.com", "creator": "eagle.lu@gmail.com", "attachment_id": 519343}, {"id": 5345473, "time": "2011-03-15T12:05:39Z", "author": "neil@httl.net", "text": "Comment on attachment 519343\nfix in filefield\n\n>+          let lf = aFile.QueryInterface(Components.interfaces.nsILocalFile);\nYou don't need nsILocalFile; path is an attribute on nsIFile. Also newFileURI will already fail if aFile isn't an nsIFile, so you don't need both cases.\n\n>+            return lf.path;\nDid you mean the whole path? I would have thought the leafName would suffice (leafName is also an attribute on nsIFile of course).", "count": 6, "attachment_id": 519343, "is_private": false, "tags": [], "creator": "neil@httl.net", "bug_id": 637251, "creation_time": "2011-03-15T12:05:39Z", "raw_text": ">+          let lf = aFile.QueryInterface(Components.interfaces.nsILocalFile);\nYou don't need nsILocalFile; path is an attribute on nsIFile. Also newFileURI will already fail if aFile isn't an nsIFile, so you don't need both cases.\n\n>+            return lf.path;\nDid you mean the whole path? I would have thought the leafName would suffice (leafName is also an attribute on nsIFile of course)."}, {"attachment_id": 519582, "creator": "eagle.lu@gmail.com", "author": "eagle.lu@gmail.com", "count": 7, "text": "Created attachment 519582\nusing nsIFile.leafName", "is_private": false, "tags": [], "raw_text": "", "bug_id": 637251, "creation_time": "2011-03-16T02:52:14Z", "id": 5347484, "time": "2011-03-16T02:52:14Z"}, {"time": "2011-03-16T11:20:57Z", "author": "standard8@mozilla.com", "id": 5347881, "text": "As this is really a bug in toolkit, moving to the toolkit product.", "count": 8, "attachment_id": null, "is_private": false, "bug_id": 637251, "creation_time": "2011-03-16T11:20:57Z", "raw_text": "As this is really a bug in toolkit, moving to the toolkit product.", "tags": [], "creator": "standard8@mozilla.com"}]}}}