{"comments": {}, "bugs": {"662496": {"comments": [{"creator": "philip.npc@gmail.com", "author": "philip.npc@gmail.com", "text": "User-Agent:       Mozilla/5.0 (Windows NT 5.1; rv:2.0.1) Gecko/20100101 Firefox/4.0.1 FirePHP/0.5\nBuild Identifier: Mozilla/5.0 (Windows NT 5.1; rv:2.0.1) Gecko/20100101 Firefox/4.0.1 FirePHP/0.5\n\nI'm trying to implement a HTML5 attribute \"autofocus\" to my site. But I found the element won't be focused under FF4 if I append the element to body during window.onload. It works under webkit/Chrome, so I thought it could be a bug need to be fixed.\n\nReproducible: Always\n\nSteps to Reproduce:\nSave these two page to html files then open them and you'll see the difference.\n\nwork: http://p.defau.lt/?eUOAGVSSq0ZUyNzJV7cZ_w\nnot work: http://p.defau.lt/?_39KOq8OIYy_RYwS7F1NxA", "time": "2011-06-07T09:08:21Z", "attachment_id": null, "creation_time": "2011-06-07T09:08:21Z", "raw_text": "User-Agent:       Mozilla/5.0 (Windows NT 5.1; rv:2.0.1) Gecko/20100101 Firefox/4.0.1 FirePHP/0.5\nBuild Identifier: Mozilla/5.0 (Windows NT 5.1; rv:2.0.1) Gecko/20100101 Firefox/4.0.1 FirePHP/0.5\n\nI'm trying to implement a HTML5 attribute \"autofocus\" to my site. But I found the element won't be focused under FF4 if I append the element to body during window.onload. It works under webkit/Chrome, so I thought it could be a bug need to be fixed.\n\nReproducible: Always\n\nSteps to Reproduce:\nSave these two page to html files then open them and you'll see the difference.\n\nwork: http://p.defau.lt/?eUOAGVSSq0ZUyNzJV7cZ_w\nnot work: http://p.defau.lt/?_39KOq8OIYy_RYwS7F1NxA", "bug_id": 662496, "count": 0, "is_private": false, "tags": [], "id": 5517046}, {"creation_time": "2011-06-07T16:18:18Z", "raw_text": "Hmm.  Mounir, the spec seems to call for autofocus to always take effect on insertion, but our implementation only does so if the readystate is not complete.  What's up with that?  Did the spec change?", "attachment_id": null, "time": "2011-06-07T16:18:18Z", "text": "Hmm.  Mounir, the spec seems to call for autofocus to always take effect on insertion, but our implementation only does so if the readystate is not complete.  What's up with that?  Did the spec change?", "id": 5517589, "is_private": false, "count": 1, "tags": [], "bug_id": 662496, "author": "bzbarsky@mit.edu", "creator": "bzbarsky@mit.edu"}, {"bug_id": 662496, "count": 2, "is_private": false, "tags": [], "id": 5517632, "text": "In Gecko's implementation, autofocus will only work before the load event, basically. In other words, you can autofocus an element in your initial HTML page. If you add an element dynamically, we encourage you to use .focus().\n\n(In reply to comment #1)\n> Hmm.  Mounir, the spec seems to call for autofocus to always take effect on\n> insertion, but our implementation only does so if the readystate is not\n> complete.  What's up with that?  Did the spec change?\n\nIIRC, we asked for a few changes in the specs and a few of them have been rejected like this one. Though, I don't see any reason to allow the autofocus attribute instead of the .focus() attribute on dynamic insertions. As I understand it, the autofocus attribute should be used to say \"when you load this page, please focus this element\", it should not be a way to steal the user focus.\n\nIMO, we should WONTFIX this bug.", "time": "2011-06-07T16:41:55Z", "attachment_id": null, "raw_text": "In Gecko's implementation, autofocus will only work before the load event, basically. In other words, you can autofocus an element in your initial HTML page. If you add an element dynamically, we encourage you to use .focus().\n\n(In reply to comment #1)\n> Hmm.  Mounir, the spec seems to call for autofocus to always take effect on\n> insertion, but our implementation only does so if the readystate is not\n> complete.  What's up with that?  Did the spec change?\n\nIIRC, we asked for a few changes in the specs and a few of them have been rejected like this one. Though, I don't see any reason to allow the autofocus attribute instead of the .focus() attribute on dynamic insertions. As I understand it, the autofocus attribute should be used to say \"when you load this page, please focus this element\", it should not be a way to steal the user focus.\n\nIMO, we should WONTFIX this bug.", "creation_time": "2011-06-07T16:41:55Z", "creator": "mounir@lamouri.fr", "author": "mounir@lamouri.fr"}, {"raw_text": "What is the advantage of making autofocus only work before load? The page can already use .focus() to steal user focus anyways, so it's not exposing a new capability. It's just making it easier to do.\n\nStated differently, I don't see how before page load is any different than after page load time as far as the user is concerned. If the page is blocked on slow loading images, the user very well might still have focus stolen.", "creation_time": "2012-03-30T19:28:59Z", "author": "ojan@chromium.org", "time": "2012-03-30T19:28:59Z", "attachment_id": null, "creator": "ojan@chromium.org", "text": "What is the advantage of making autofocus only work before load? The page can already use .focus() to steal user focus anyways, so it's not exposing a new capability. It's just making it easier to do.\n\nStated differently, I don't see how before page load is any different than after page load time as far as the user is concerned. If the page is blocked on slow loading images, the user very well might still have focus stolen.", "id": 6185785, "tags": [], "count": 3, "is_private": false, "bug_id": 662496}, {"text": "Equivalent WebKit bug: https://bugs.webkit.org/show_bug.cgi?id=68876", "attachment_id": null, "time": "2012-03-30T19:36:23Z", "creation_time": "2012-03-30T19:36:23Z", "raw_text": "Equivalent WebKit bug: https://bugs.webkit.org/show_bug.cgi?id=68876", "bug_id": 662496, "is_private": false, "count": 4, "tags": [], "id": 6185811, "creator": "ojan@chromium.org", "author": "ojan@chromium.org"}, {"bug_id": 662496, "id": 6186137, "tags": [], "is_private": false, "count": 5, "time": "2012-03-30T20:55:17Z", "attachment_id": null, "text": "(In reply to Ojan Vafai from comment #3)\n> What is the advantage of making autofocus only work before load? The page\n> can already use .focus() to steal user focus anyways, so it's not exposing a\n> new capability. It's just making it easier to do.\n\nThe autofocus attribute should be a declarative way to set the focus. It should not be used to set the focus instead of using .focus(). For example, autofocus should not be used to move the focus when a user is blocking scripts.\n\n> Stated differently, I don't see how before page load is any different than\n> after page load time as far as the user is concerned. If the page is blocked\n> on slow loading images, the user very well might still have focus stolen.\n\nThat is an unfortunate edge case.", "creation_time": "2012-03-30T20:55:17Z", "raw_text": "(In reply to Ojan Vafai from comment #3)\n> What is the advantage of making autofocus only work before load? The page\n> can already use .focus() to steal user focus anyways, so it's not exposing a\n> new capability. It's just making it easier to do.\n\nThe autofocus attribute should be a declarative way to set the focus. It should not be used to set the focus instead of using .focus(). For example, autofocus should not be used to move the focus when a user is blocking scripts.\n\n> Stated differently, I don't see how before page load is any different than\n> after page load time as far as the user is concerned. If the page is blocked\n> on slow loading images, the user very well might still have focus stolen.\n\nThat is an unfortunate edge case.", "author": "mounir@lamouri.fr", "creator": "mounir@lamouri.fr"}, {"id": 6186150, "tags": [], "count": 6, "is_private": false, "bug_id": 662496, "creation_time": "2012-03-30T20:59:17Z", "raw_text": "(In reply to Mounir Lamouri (:volkmar) (:mounir) from comment #5)\n> (In reply to Ojan Vafai from comment #3)\n> > What is the advantage of making autofocus only work before load? The page\n> > can already use .focus() to steal user focus anyways, so it's not exposing a\n> > new capability. It's just making it easier to do.\n> \n> The autofocus attribute should be a declarative way to set the focus. It\n> should not be used to set the focus instead of using .focus(). For example,\n> autofocus should not be used to move the focus when a user is blocking\n> scripts.\n\nI'm OK with there being cases where autofocus is ignored. The spec allows that for cases where the user has indicated in some way they want focus elsewhere. Personally, I don't think these cases are worth addressing either, but that's a whole different argument from whether it should be tied to the load event.\n\nConsider long-lived pages like gmail. It seems perfectly natural and correct to me for them to use a declarative interface for focusing the subject line of an email when you go to compose a new email. It's essentially no different from a fresh page load from the user-perspective, but it all happens after the load event.", "author": "ojan@chromium.org", "attachment_id": null, "time": "2012-03-30T20:59:17Z", "creator": "ojan@chromium.org", "text": "(In reply to Mounir Lamouri (:volkmar) (:mounir) from comment #5)\n> (In reply to Ojan Vafai from comment #3)\n> > What is the advantage of making autofocus only work before load? The page\n> > can already use .focus() to steal user focus anyways, so it's not exposing a\n> > new capability. It's just making it easier to do.\n> \n> The autofocus attribute should be a declarative way to set the focus. It\n> should not be used to set the focus instead of using .focus(). For example,\n> autofocus should not be used to move the focus when a user is blocking\n> scripts.\n\nI'm OK with there being cases where autofocus is ignored. The spec allows that for cases where the user has indicated in some way they want focus elsewhere. Personally, I don't think these cases are worth addressing either, but that's a whole different argument from whether it should be tied to the load event.\n\nConsider long-lived pages like gmail. It seems perfectly natural and correct to me for them to use a declarative interface for focusing the subject line of an email when you go to compose a new email. It's essentially no different from a fresh page load from the user-perspective, but it all happens after the load event."}, {"bug_id": 662496, "id": 6186157, "is_private": false, "count": 7, "tags": [], "time": "2012-03-30T21:01:55Z", "attachment_id": null, "author": "ojan@chromium.org", "creator": "ojan@chromium.org", "text": "The load is a completely arbitrary proxy for whether the user might have focused something else. Why not use DOMContentLoaded?\n\nWhy not actually track whether the user has focused/typed something recently? That seems like it would work best. Then you're reacting to the actual user-experience.", "creation_time": "2012-03-30T21:01:55Z", "raw_text": "The load is a completely arbitrary proxy for whether the user might have focused something else. Why not use DOMContentLoaded?\n\nWhy not actually track whether the user has focused/typed something recently? That seems like it would work best. Then you're reacting to the actual user-experience."}, {"author": "mounir@lamouri.fr", "creator": "mounir@lamouri.fr", "creation_time": "2012-03-30T21:31:54Z", "raw_text": "(In reply to Ojan Vafai from comment #7)\n> The load is a completely arbitrary proxy for whether the user might have\n> focused something else. Why not use DOMContentLoaded?\n\nload event or DOMContentLoaded isn't that much of a difference. I guess you don't care given that wouldn't solve the use cases you pointed.\n\n> Why not actually track whether the user has focused/typed something\n> recently? That seems like it would work best. Then you're reacting to the\n> actual user-experience.\n\nActually, if the user has focused something on the page, the autofocus attribute will be ignored. The, load event or not, after the user did interact with the page, we will ignore the autofocus attribute.", "attachment_id": null, "time": "2012-03-30T21:31:54Z", "text": "(In reply to Ojan Vafai from comment #7)\n> The load is a completely arbitrary proxy for whether the user might have\n> focused something else. Why not use DOMContentLoaded?\n\nload event or DOMContentLoaded isn't that much of a difference. I guess you don't care given that wouldn't solve the use cases you pointed.\n\n> Why not actually track whether the user has focused/typed something\n> recently? That seems like it would work best. Then you're reacting to the\n> actual user-experience.\n\nActually, if the user has focused something on the page, the autofocus attribute will be ignored. The, load event or not, after the user did interact with the page, we will ignore the autofocus attribute.", "id": 6186319, "count": 8, "is_private": false, "tags": [], "bug_id": 662496}, {"id": 7847013, "is_private": false, "count": 9, "tags": [], "bug_id": 662496, "raw_text": "I've just stumbled over this bug, and it made Firefox look broken to me.\n\nThe page has dynamically generated content, which includes an <input autofocus> element.\nSomething changed on page load causing page load to happen differently and now Chrome still autofocuses, but Firefox doesn't. I just added a .focus() to fix the firefox case, but concerned that I'm annoying users who might be getting on with something else when the focus happens.\n\nDo we have a reason to keep it the way it is?", "creation_time": "2013-09-11T08:17:39Z", "time": "2013-09-11T08:17:39Z", "attachment_id": null, "author": "jwalker@mozilla.com", "text": "I've just stumbled over this bug, and it made Firefox look broken to me.\n\nThe page has dynamically generated content, which includes an <input autofocus> element.\nSomething changed on page load causing page load to happen differently and now Chrome still autofocuses, but Firefox doesn't. I just added a .focus() to fix the firefox case, but concerned that I'm annoying users who might be getting on with something else when the focus happens.\n\nDo we have a reason to keep it the way it is?", "creator": "jwalker@mozilla.com"}, {"creator": "bzbarsky@mit.edu", "author": "bzbarsky@mit.edu", "raw_text": "", "creation_time": "2013-11-01T20:16:57Z", "text": "*** Bug 933697 has been marked as a duplicate of this bug. ***", "time": "2013-11-01T20:16:57Z", "attachment_id": null, "tags": [], "count": 10, "is_private": false, "id": 8031575, "bug_id": 662496}, {"id": 8031627, "is_private": false, "count": 11, "tags": [], "bug_id": 662496, "raw_text": "", "creation_time": "2013-11-01T20:30:52Z", "time": "2013-11-01T20:30:52Z", "attachment_id": null, "author": "bzbarsky@mit.edu", "text": "*** Bug 933697 has been marked as a duplicate of this bug. ***", "creator": "bzbarsky@mit.edu"}, {"bug_id": 662496, "id": 9152097, "tags": [], "count": 12, "is_private": false, "time": "2014-08-07T05:59:14Z", "attachment_id": null, "text": "This bug does indeed make Firefox look broken. After encountering it in a use case with a certain website, I looked into the matter further and found something downright sad:\n\nhttp://jsfiddle.net/NobodyNowhere/3tzoo6ky/\n\nThis fiddle will automatically focus the input element with Chrome (and other browsers) when the page is loaded, as well as when the Run button is clicked etc. On Firefox 31, it does not focus. Ever.\n\nIt's really a drag to have popups/new elements with inputs focus themselves correctly on Chrome, and not Firefox. For example, on the aforementioned website the page creates an iframe (for an inline popup) with an autocomplete input at the top. The input has the autofocus attribute, but Firefox ignores it while Chrome focuses it. Please fix this implementation and bring this basic functionality up to where it should be.", "creation_time": "2014-08-07T05:59:14Z", "raw_text": "This bug does indeed make Firefox look broken. After encountering it in a use case with a certain website, I looked into the matter further and found something downright sad:\n\nhttp://jsfiddle.net/NobodyNowhere/3tzoo6ky/\n\nThis fiddle will automatically focus the input element with Chrome (and other browsers) when the page is loaded, as well as when the Run button is clicked etc. On Firefox 31, it does not focus. Ever.\n\nIt's really a drag to have popups/new elements with inputs focus themselves correctly on Chrome, and not Firefox. For example, on the aforementioned website the page creates an iframe (for an inline popup) with an autocomplete input at the top. The input has the autofocus attribute, but Firefox ignores it while Chrome focuses it. Please fix this implementation and bring this basic functionality up to where it should be.", "author": "qdetroit@gmail.com", "creator": "qdetroit@gmail.com"}, {"text": "There is another case which exposes this bug. \n\nUsing Firefox 37.0.2\n\nCode an input element with style=\"visbility: hidden\" and autofocus then (e.g. onload) use a script which sets element.style.visibility = 'visible'; \n\nThe element will not receive focus, even if it is the only input element on the page. \n\nI use this to wait for css to fully load to avoid unformatted flicker.\n\nThis is explained by Comment 1 - and can be circumvented by element.focus() - but it really feels flawed.", "time": "2015-05-13T11:06:11Z", "attachment_id": null, "creation_time": "2015-05-13T11:06:11Z", "raw_text": "There is another case which exposes this bug. \n\nUsing Firefox 37.0.2\n\nCode an input element with style=\"visbility: hidden\" and autofocus then (e.g. onload) use a script which sets element.style.visibility = 'visible'; \n\nThe element will not receive focus, even if it is the only input element on the page. \n\nI use this to wait for css to fully load to avoid unformatted flicker.\n\nThis is explained by Comment 1 - and can be circumvented by element.focus() - but it really feels flawed.", "bug_id": 662496, "tags": [], "count": 13, "is_private": false, "id": 10263200, "creator": "wstanzl@hotmail.com", "author": "wstanzl@hotmail.com"}, {"author": "bug-husbandry-bot@mozilla.bugs", "creator": "bug-husbandry-bot@mozilla.bugs", "bug_id": 662496, "id": 13435763, "is_private": false, "count": 14, "tags": [], "time": "2018-06-29T04:48:20Z", "attachment_id": null, "text": "https://bugzilla.mozilla.org/show_bug.cgi?id=1472046\n\nMove all DOM bugs that haven\u2019t been updated in more than 3 years and has no one currently assigned to P5.\n\nIf you have questions, please contact :mdaly.", "creation_time": "2018-06-29T04:48:20Z", "raw_text": "https://bugzilla.mozilla.org/show_bug.cgi?id=1472046\n\nMove all DOM bugs that haven\u2019t been updated in more than 3 years and has no one currently assigned to P5.\n\nIf you have questions, please contact :mdaly."}, {"text": "Still an issue. In Firefox 65 Dev edition on Desktop autofocus is not making any focus to an input", "attachment_id": null, "time": "2018-12-20T13:03:54Z", "creation_time": "2018-12-20T13:03:54Z", "raw_text": "Still an issue. In Firefox 65 Dev edition on Desktop autofocus is not making any focus to an input", "bug_id": 662496, "count": 15, "is_private": false, "tags": [], "id": 13825121, "creator": "gurupatik@hotmail.com", "author": "gurupatik@hotmail.com"}, {"raw_text": "Here is a real-world example of this bug:\n\nDescription: \"Enter a movie title\" search input box is not auto-focused in Firefox\n\nSteps to Reproduce:\n1. Load https://www.taste.io/search\n\nEXPECTED RESULT:\nThe \"Enter a movie title\" search input box should be auto-focused like it is in Chrome, Edge, and IE11 on Windows and in Chrome and Safari on macOS.\n\nACTUAL RESULT:\nThe search input box is NOT auto-focused in Firefox on Windows or macOS.", "creation_time": "2019-04-02T17:19:34Z", "text": "Here is a real-world example of this bug:\n\nDescription: \"Enter a movie title\" search input box is not auto-focused in Firefox\n\nSteps to Reproduce:\n1. Load https://www.taste.io/search\n\nEXPECTED RESULT:\nThe \"Enter a movie title\" search input box should be auto-focused like it is in Chrome, Edge, and IE11 on Windows and in Chrome and Safari on macOS.\n\nACTUAL RESULT:\nThe search input box is NOT auto-focused in Firefox on Windows or macOS.", "attachment_id": null, "time": "2019-04-02T17:19:34Z", "tags": [], "count": 16, "is_private": false, "id": 14028115, "bug_id": 662496, "creator": "cpeterson@mozilla.com", "author": "cpeterson@mozilla.com"}, {"creator": "bug-husbandry-bot@mozilla.bugs", "author": "bug-husbandry-bot@mozilla.bugs", "bug_id": 662496, "tags": [], "count": 17, "is_private": false, "id": 14085371, "text": "Migrating Webcompat whiteboard priorities to project flags. See bug 1547409.", "attachment_id": null, "time": "2019-04-30T01:16:56Z", "raw_text": "Migrating Webcompat whiteboard priorities to project flags. See bug 1547409.", "creation_time": "2019-04-30T01:16:56Z"}, {"raw_text": "See bug 1547409. Migrating whiteboard priority tags to program flags.", "creation_time": "2019-04-30T01:19:11Z", "text": "See bug 1547409. Migrating whiteboard priority tags to program flags.", "time": "2019-04-30T01:19:11Z", "attachment_id": null, "count": 18, "is_private": false, "tags": [], "id": 14085690, "bug_id": 662496, "creator": "bug-husbandry-bot@mozilla.bugs", "author": "bug-husbandry-bot@mozilla.bugs"}, {"count": 19, "is_private": false, "tags": [], "id": 14111165, "bug_id": 662496, "raw_text": "Reverting spam.", "creation_time": "2019-05-10T22:55:35Z", "text": "Reverting spam.", "attachment_id": null, "time": "2019-05-10T22:55:35Z", "creator": "bug-husbandry-bot@mozilla.bugs", "author": "bug-husbandry-bot@mozilla.bugs"}, {"creation_time": "2020-03-13T02:10:18Z", "raw_text": "Olli, do you know who might want to look at aligning autofocus stuff with other browsers?", "author": "bzbarsky@mit.edu", "time": "2020-03-13T02:10:18Z", "attachment_id": null, "text": "Olli, do you know who might want to look at aligning autofocus stuff with other browsers?", "creator": "bzbarsky@mit.edu", "id": 14692816, "tags": [], "count": 20, "is_private": false, "bug_id": 662496}, {"creator": "htsai@mozilla.com", "author": "htsai@mozilla.com", "bug_id": 662496, "count": 21, "is_private": false, "tags": [], "id": 14716830, "text": "(In reply to Boris Zbarsky [:bzbarsky] from comment #20)\n> Olli, do you know who might want to look at aligning autofocus stuff with other browsers?\n\nI will follow this up.", "attachment_id": null, "time": "2020-03-26T05:48:12Z", "raw_text": "(In reply to Boris Zbarsky [:bzbarsky] from comment #20)\n> Olli, do you know who might want to look at aligning autofocus stuff with other browsers?\n\nI will follow this up.", "creation_time": "2020-03-26T05:48:12Z"}]}}}