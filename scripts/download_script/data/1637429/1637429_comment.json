{"bugs": {"1637429": {"comments": [{"tags": [], "time": "2020-05-12T21:29:16Z", "creator": "michael.l.comella@gmail.com", "raw_text": "I'm trying to build a local version of Glean to put into android-components. I followed the guide \u2013\u00a0https://mozilla.github.io/glean/book/dev/android/setup-android-build-environment.html?highlight=android-components#doing-a-local-build-of-the-android-components \u2013\u00a0but the build fails. The build command I run (because the guide does not specify a specific one) is `./gradlew :gradle:assembledebug`.\n\nI get the following failure:\n```\n> Task :glean:generateToolchains FAILED\nToolchain for arch arm version 21 does not exist: checked /var/folders/p5/rz_tx0_51vgbs4kryfg7q17c0000gn/T/rust-android-ndk-toolchains/arm-21\n/usr/local/Cellar/python@2/2.7.17_1/Frameworks/Python.framework/Versions/2.7/Resources/\nPython.app/Contents/MacOS/Python: can't open file 'null/build/tools/make_standalone_toolchain.py': [Errno 2] No such file or directory\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':glean:generateToolchains'.\n> Process 'command 'python'' finished with non-zero exit value 2\n```", "creation_time": "2020-05-12T21:29:16Z", "count": 0, "bug_id": 1637429, "is_private": false, "attachment_id": null, "author": "michael.l.comella@gmail.com", "id": 14815488, "text": "I'm trying to build a local version of Glean to put into android-components. I followed the guide \u2013\u00a0https://mozilla.github.io/glean/book/dev/android/setup-android-build-environment.html?highlight=android-components#doing-a-local-build-of-the-android-components \u2013\u00a0but the build fails. The build command I run (because the guide does not specify a specific one) is `./gradlew :gradle:assembledebug`.\n\nI get the following failure:\n```\n> Task :glean:generateToolchains FAILED\nToolchain for arch arm version 21 does not exist: checked /var/folders/p5/rz_tx0_51vgbs4kryfg7q17c0000gn/T/rust-android-ndk-toolchains/arm-21\n/usr/local/Cellar/python@2/2.7.17_1/Frameworks/Python.framework/Versions/2.7/Resources/\nPython.app/Contents/MacOS/Python: can't open file 'null/build/tools/make_standalone_toolchain.py': [Errno 2] No such file or directory\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':glean:generateToolchains'.\n> Process 'command 'python'' finished with non-zero exit value 2\n```"}, {"creator": "mdroettboom@mozilla.com", "time": "2020-05-13T01:17:30Z", "tags": [], "count": 1, "creation_time": "2020-05-13T01:17:30Z", "raw_text": "I'm not totally sure but this `null/build/tools/make_standalone_toolchain.py` makes me think that `ANDROID_NDK_HOME` isn't set (or being picked up).", "bug_id": 1637429, "is_private": false, "text": "I'm not totally sure but this `null/build/tools/make_standalone_toolchain.py` makes me think that `ANDROID_NDK_HOME` isn't set (or being picked up).", "id": 14815775, "author": "mdroettboom@mozilla.com", "attachment_id": null}, {"is_private": false, "bug_id": 1637429, "text": "Michael, do you have `ANDROID_NDK_HOME` defined somewhere?\nThis is something we're [not calling out in our docs](https://mozilla.github.io/glean/book/dev/ios/setup-ios-build-environment.html), so it's definitely a bug on our end. If you could confirm that's the problem, then we'll take care of updating the docs.\n\nSorry for the inconvenience!", "attachment_id": null, "author": "alessio.placitelli@gmail.com", "id": 14816164, "creator": "alessio.placitelli@gmail.com", "time": "2020-05-13T07:49:31Z", "tags": [], "creation_time": "2020-05-13T07:49:31Z", "count": 2, "raw_text": "Michael, do you have `ANDROID_NDK_HOME` defined somewhere?\nThis is something we're [not calling out in our docs](https://mozilla.github.io/glean/book/dev/ios/setup-ios-build-environment.html), so it's definitely a bug on our end. If you could confirm that's the problem, then we'll take care of updating the docs.\n\nSorry for the inconvenience!"}, {"bug_id": 1637429, "is_private": false, "text": "Setting `ANDROID_NDK_HOME` fixed the issue and I can now compile \u2013\u00a0thanks!\n\nI will also note that the suggested `ANDROID_NDK_ROOT=$ANDROID_HOME/ndk-bundle` from the docs seems to be incorrect: `/Users/mcomella/Library/Android/sdk/ndk/21.1.6352462` is what worked for me (for both `NDK_HOME` and `NDK_ROOT`).", "id": 14817310, "author": "michael.l.comella@gmail.com", "attachment_id": null, "creator": "michael.l.comella@gmail.com", "time": "2020-05-13T17:41:53Z", "tags": [], "count": 3, "creation_time": "2020-05-13T17:41:53Z", "raw_text": "Setting `ANDROID_NDK_HOME` fixed the issue and I can now compile \u2013\u00a0thanks!\n\nI will also note that the suggested `ANDROID_NDK_ROOT=$ANDROID_HOME/ndk-bundle` from the docs seems to be incorrect: `/Users/mcomella/Library/Android/sdk/ndk/21.1.6352462` is what worked for me (for both `NDK_HOME` and `NDK_ROOT`)."}, {"id": 14817319, "author": "michael.l.comella@gmail.com", "attachment_id": null, "text": "`ANDROID_NDK_HOME=$ANDROID_HOME/ndk` also does not seem to work (I double checked because keeping the version up-to-date sounds messy).", "is_private": false, "bug_id": 1637429, "raw_text": "`ANDROID_NDK_HOME=$ANDROID_HOME/ndk` also does not seem to work (I double checked because keeping the version up-to-date sounds messy).", "count": 4, "creation_time": "2020-05-13T17:44:34Z", "tags": [], "creator": "michael.l.comella@gmail.com", "time": "2020-05-13T17:44:34Z"}, {"tags": [], "creator": "jrediger@mozilla.com", "time": "2020-05-14T07:18:07Z", "raw_text": "I'll double-check the docs on this and will update them accordingly.", "count": 5, "creation_time": "2020-05-14T07:18:07Z", "is_private": false, "bug_id": 1637429, "id": 14818686, "author": "jrediger@mozilla.com", "attachment_id": null, "text": "I'll double-check the docs on this and will update them accordingly."}, {"tags": [], "creator": "pulgasaur@mozilla.bugs", "time": "2020-05-18T11:22:08Z", "raw_text": "", "creation_time": "2020-05-18T11:22:08Z", "count": 6, "bug_id": 1637429, "is_private": false, "attachment_id": 9149827, "author": "pulgasaur@mozilla.bugs", "id": 14828237, "text": "Created attachment 9149827\nLink to GitHub pull-request: https://github.com/mozilla/glean/pull/887"}]}}, "comments": {}}