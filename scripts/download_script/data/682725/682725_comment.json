{"comments": {}, "bugs": {"682725": {"comments": [{"tags": [], "raw_text": "User Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:6.0) Gecko/20100101 Firefox/6.0\nBuild ID: 20110811165603\n\nSteps to reproduce:\n\nTB 3.1.12\n\nAfter TB 6.0 zeroed all my .msf (see bug 682588), downgraded to 3.1.12, and hand removed them (see bug 682721). POP new mail, including these bug reports.\n\n\nActual results:\n\nThe POP message filter correctly moved the bug reports into the m-bugs.all folder, but the list did not show any messages. The .msf was not regenerated.\n\n\nExpected results:\n\nThe .msf should be regenerated. The list pane should highlight, and the unseen message count (in parenthesis) should show the new messages.", "attachment_id": null, "time": "2011-08-28T17:59:52Z", "is_private": false, "creation_time": "2011-08-28T17:59:52Z", "bug_id": 682725, "id": 5683614, "text": "User Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:6.0) Gecko/20100101 Firefox/6.0\nBuild ID: 20110811165603\n\nSteps to reproduce:\n\nTB 3.1.12\n\nAfter TB 6.0 zeroed all my .msf (see bug 682588), downgraded to 3.1.12, and hand removed them (see bug 682721). POP new mail, including these bug reports.\n\n\nActual results:\n\nThe POP message filter correctly moved the bug reports into the m-bugs.all folder, but the list did not show any messages. The .msf was not regenerated.\n\n\nExpected results:\n\nThe .msf should be regenerated. The list pane should highlight, and the unseen message count (in parenthesis) should show the new messages.", "count": 0, "author": "william.allen.simpson@gmail.com", "creator": "william.allen.simpson@gmail.com"}, {"author": "william.allen.simpson@gmail.com", "count": 1, "text": "Created attachment 556408\nmozilla folder before POP\n\nHere is the state of the folder before POP. The zero length .sbd mail files have a 4K .msf from the first restart (12:34 pm), but no others (bug 682721). The .sbd folders were updated on a subsequent restart (12:49 pm), but nothing else was updated by the test search.\n\nNote the latest message in m-bugs.all is Aug 25.", "creator": "william.allen.simpson@gmail.com", "creation_time": "2011-08-28T18:13:04Z", "is_private": false, "bug_id": 682725, "id": 5683625, "attachment_id": 556408, "raw_text": "Here is the state of the folder before POP. The zero length .sbd mail files have a 4K .msf from the first restart (12:34 pm), but no others (bug 682721). The .sbd folders were updated on a subsequent restart (12:49 pm), but nothing else was updated by the test search.\n\nNote the latest message in m-bugs.all is Aug 25.", "time": "2011-08-28T18:13:04Z", "tags": []}, {"creation_time": "2011-08-28T18:16:45Z", "is_private": false, "creator": "william.allen.simpson@gmail.com", "tags": [], "attachment_id": 556410, "bug_id": 682725, "id": 5683627, "text": "Created attachment 556410\nlist view before POP\n\nHere is the state of the list view before POP.\n\nNote that m-bugs.all has no unseen messages (in parenthesis).", "count": 2, "author": "william.allen.simpson@gmail.com", "time": "2011-08-28T18:16:45Z", "raw_text": "Here is the state of the list view before POP.\n\nNote that m-bugs.all has no unseen messages (in parenthesis)."}, {"attachment_id": 556411, "tags": [], "creator": "william.allen.simpson@gmail.com", "is_private": false, "creation_time": "2011-08-28T18:20:04Z", "raw_text": "Here is the state of the folder after POP.\n\nNote the new date for m-bugs.all is Today, 1:47 pm.  But no .msf file was generated.", "time": "2011-08-28T18:20:04Z", "author": "william.allen.simpson@gmail.com", "count": 3, "text": "Created attachment 556411\nmozilla folder after POP\n\nHere is the state of the folder after POP.\n\nNote the new date for m-bugs.all is Today, 1:47 pm.  But no .msf file was generated.", "bug_id": 682725, "id": 5683629}, {"tags": [], "raw_text": "I should have taken a screen shot showing that the list view was unchanged after POP, but that's obvious from the previous attachment.\n\nHere I show that it updated by clicking on the folder.", "attachment_id": 556412, "time": "2011-08-28T18:24:40Z", "creation_time": "2011-08-28T18:24:40Z", "is_private": false, "id": 5683632, "bug_id": 682725, "text": "Created attachment 556412\nlist view after clicking\n\nI should have taken a screen shot showing that the list view was unchanged after POP, but that's obvious from the previous attachment.\n\nHere I show that it updated by clicking on the folder.", "count": 4, "author": "william.allen.simpson@gmail.com", "creator": "william.allen.simpson@gmail.com"}, {"raw_text": "After clicking, the new m-bugs.all.msf was generated.", "time": "2011-08-28T18:26:57Z", "author": "william.allen.simpson@gmail.com", "count": 5, "text": "Created attachment 556413\nmozilla folder after clicking\n\nAfter clicking, the new m-bugs.all.msf was generated.", "id": 5683633, "bug_id": 682725, "attachment_id": 556413, "tags": [], "creator": "william.allen.simpson@gmail.com", "is_private": false, "creation_time": "2011-08-28T18:26:57Z"}, {"creator": "mozilla@davidbienvenu.org", "is_private": false, "creation_time": "2011-08-28T18:58:42Z", "attachment_id": null, "tags": [], "author": "mozilla@davidbienvenu.org", "count": 6, "text": "Not a regression. pop3 filters have never caused a regeneration of out of date or missing .msf files. This is most likely a dup of a longstanding bug.", "bug_id": 682725, "id": 5683657, "raw_text": "Not a regression. pop3 filters have never caused a regeneration of out of date or missing .msf files. This is most likely a dup of a longstanding bug.", "time": "2011-08-28T18:58:42Z"}, {"tags": [], "attachment_id": null, "is_private": false, "creation_time": "2011-08-29T04:05:23Z", "creator": "william.allen.simpson@gmail.com", "raw_text": "(In reply to David :Bienvenu from comment #6)\n> Not a regression. pop3 filters have never caused a regeneration of out of\n> date or missing .msf files. This is most likely a dup of a longstanding bug.\n\nHmmm, circa 2001-2002 I thought we'd planned that every time the mail was moved from file to file (which is what the mail filter does), the .msf would be updated. I'll have to search the old email archives, as soon as your Bug 682731 patch is committed and I can regenerate my indices. ;-)\n\nWhich outstanding bug?", "time": "2011-08-29T04:05:23Z", "id": 5684098, "bug_id": 682725, "count": 7, "text": "(In reply to David :Bienvenu from comment #6)\n> Not a regression. pop3 filters have never caused a regeneration of out of\n> date or missing .msf files. This is most likely a dup of a longstanding bug.\n\nHmmm, circa 2001-2002 I thought we'd planned that every time the mail was moved from file to file (which is what the mail filter does), the .msf would be updated. I'll have to search the old email archives, as soon as your Bug 682731 patch is committed and I can regenerate my indices. ;-)\n\nWhich outstanding bug?", "author": "william.allen.simpson@gmail.com"}, {"time": "2011-08-29T07:05:41Z", "attachment_id": null, "raw_text": "(In reply to David :Bienvenu from comment #6)\n>  This is most likely a dup of a longstanding bug.", "tags": [], "creator": "vseerror@lehigh.edu", "author": "vseerror@lehigh.edu", "count": 8, "text": "(In reply to David :Bienvenu from comment #6)\n>  This is most likely a dup of a longstanding bug.", "id": 5684242, "bug_id": 682725, "creation_time": "2011-08-29T07:05:41Z", "is_private": false}, {"count": 9, "text": "(In reply to william.allen.simpson from comment #7)\n> Hmmm, circa 2001-2002 I thought we'd planned that every time the mail was\n> moved from file to file (which is what the mail filter does), the .msf would\n> be updated.\n\nThe issue is that reparsing the folder to generate the .msf file is asynchronous, so you don't want to start doing it in the middle of a get new mail action, because it's quite possible that you'd get another message that needed to be filtered to the same destination folder, and you can't add messages to a folder while a reparse is going on. So the reparse would need to be deferred until the get new mail process is done, which means doing something like reparsing on idle. Not impossible, but not trivial.\n\n> Which outstanding bug?\nI don't know off the top of my head.", "author": "mozilla@davidbienvenu.org", "creator": "mozilla@davidbienvenu.org", "is_private": false, "creation_time": "2011-08-29T14:18:06Z", "bug_id": 682725, "id": 5684794, "raw_text": "(In reply to william.allen.simpson from comment #7)\n> Hmmm, circa 2001-2002 I thought we'd planned that every time the mail was\n> moved from file to file (which is what the mail filter does), the .msf would\n> be updated.\n\nThe issue is that reparsing the folder to generate the .msf file is asynchronous, so you don't want to start doing it in the middle of a get new mail action, because it's quite possible that you'd get another message that needed to be filtered to the same destination folder, and you can't add messages to a folder while a reparse is going on. So the reparse would need to be deferred until the get new mail process is done, which means doing something like reparsing on idle. Not impossible, but not trivial.\n\n> Which outstanding bug?\nI don't know off the top of my head.", "attachment_id": null, "time": "2011-08-29T14:18:06Z", "tags": []}, {"time": "2012-03-12T16:56:13Z", "raw_text": "(In reply to David :Bienvenu from comment #9)\n> > Which outstanding bug?\n> I don't know off the top of my head.\n\nPerhaps the bug you are thinking of is is one of the queries below. (this is a quick hack so these are aren't necessarily great queries)\n\nhttps://bugzilla.mozilla.org/buglist.cgi?type1-0-0=substring;list_id=2581087;value2-0-1=filter;field0-0-0=short_desc;type0-0-1=substring;field0-0-1=component;value2-0-0=filter;type1-0-1=allwordssubstr;resolution=---;value1-0-1=msf;field2-0-0=short_desc;classification=Client%20Software;classification=Components;value0-0-2=pop;type2-0-0=substring;query_format=advanced;type2-0-1=substring;value1-0-0=msf;field0-0-2=longdesc;value0-0-1=pop;type0-0-0=anywords;value0-0-0=pop;field1-0-0=short_desc;product=MailNews%20Core;product=Thunderbird;type0-0-2=anywords;field1-0-1=longdesc;field2-0-1=component\n\nhttps://bugzilla.mozilla.org/buglist.cgi?type1-0-0=substring;list_id=2581062;field0-0-0=short_desc;type0-0-1=substring;field0-0-1=component;type1-0-1=allwordssubstr;resolution=---;value1-0-1=msf;classification=Client%20Software;classification=Components;query_format=advanced;value1-0-0=msf;value0-0-1=pop;type0-0-0=anywords;value0-0-0=pop;field1-0-0=short_desc;product=MailNews%20Core;product=Thunderbird;field1-0-1=longdesc", "id": 6132708, "bug_id": 682725, "author": "vseerror@lehigh.edu", "count": 10, "text": "(In reply to David :Bienvenu from comment #9)\n> > Which outstanding bug?\n> I don't know off the top of my head.\n\nPerhaps the bug you are thinking of is is one of the queries below. (this is a quick hack so these are aren't necessarily great queries)\n\nhttps://bugzilla.mozilla.org/buglist.cgi?type1-0-0=substring;list_id=2581087;value2-0-1=filter;field0-0-0=short_desc;type0-0-1=substring;field0-0-1=component;value2-0-0=filter;type1-0-1=allwordssubstr;resolution=---;value1-0-1=msf;field2-0-0=short_desc;classification=Client%20Software;classification=Components;value0-0-2=pop;type2-0-0=substring;query_format=advanced;type2-0-1=substring;value1-0-0=msf;field0-0-2=longdesc;value0-0-1=pop;type0-0-0=anywords;value0-0-0=pop;field1-0-0=short_desc;product=MailNews%20Core;product=Thunderbird;type0-0-2=anywords;field1-0-1=longdesc;field2-0-1=component\n\nhttps://bugzilla.mozilla.org/buglist.cgi?type1-0-0=substring;list_id=2581062;field0-0-0=short_desc;type0-0-1=substring;field0-0-1=component;type1-0-1=allwordssubstr;resolution=---;value1-0-1=msf;classification=Client%20Software;classification=Components;query_format=advanced;value1-0-0=msf;value0-0-1=pop;type0-0-0=anywords;value0-0-0=pop;field1-0-0=short_desc;product=MailNews%20Core;product=Thunderbird;field1-0-1=longdesc", "tags": [], "attachment_id": null, "creation_time": "2012-03-12T16:56:13Z", "is_private": false, "creator": "vseerror@lehigh.edu"}]}}}