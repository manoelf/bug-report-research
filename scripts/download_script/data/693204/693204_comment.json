{"comments": {}, "bugs": {"693204": {"comments": [{"attachment_id": null, "raw_text": "User Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.1 (KHTML, like Gecko) Chrome/14.0.835.202 Safari/535.1\n\nSteps to reproduce:\n\nWhen reading an email or emails on another device/location, those emails are marked as read on that device and the IMAP server. I am using gmail & an IMAP connection on both Thunderbird and the other device.\n\n\nActual results:\n\nWhen Thunderbird is left open, it sometimes takes 2-3 hours or even longer for Thunderbird to mark those emails as read. I have tried clicking on the \"Get Mail\" button to refresh the IMAP folder but TB still doesn't mark those emails as read. I have checked to see whether those emails are flagged as read or unread but using the gmail web client and they are indeed being marked as read but Thunderbird will not refresh their read/unread status.\n\n\nExpected results:\n\nEach time Thunderbird attempts to get mail it should check the status of read and unread emails from the IMAP server and mark those emails as read if applicable. The only way to force TB to refresh the read/unread status is to completely close TB and re-open which is obviously very annoying.", "tags": [], "bug_id": 693204, "text": "User Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.1 (KHTML, like Gecko) Chrome/14.0.835.202 Safari/535.1\n\nSteps to reproduce:\n\nWhen reading an email or emails on another device/location, those emails are marked as read on that device and the IMAP server. I am using gmail & an IMAP connection on both Thunderbird and the other device.\n\n\nActual results:\n\nWhen Thunderbird is left open, it sometimes takes 2-3 hours or even longer for Thunderbird to mark those emails as read. I have tried clicking on the \"Get Mail\" button to refresh the IMAP folder but TB still doesn't mark those emails as read. I have checked to see whether those emails are flagged as read or unread but using the gmail web client and they are indeed being marked as read but Thunderbird will not refresh their read/unread status.\n\n\nExpected results:\n\nEach time Thunderbird attempts to get mail it should check the status of read and unread emails from the IMAP server and mark those emails as read if applicable. The only way to force TB to refresh the read/unread status is to completely close TB and re-open which is obviously very annoying.", "count": 0, "id": 5770448, "is_private": false, "time": "2011-10-09T21:07:22Z", "creation_time": "2011-10-09T21:07:22Z", "creator": "johndouglaspark@gmail.com", "author": "johndouglaspark@gmail.com"}, {"is_private": false, "id": 5771095, "count": 1, "author": "m-wada@usa.com", "creator": "m-wada@usa.com", "creation_time": "2011-10-10T11:09:28Z", "time": "2011-10-10T11:09:28Z", "raw_text": "Do you enable IDLE command use?\nIf yes, same problem as bug 512745.\n  bug 512745 :\n    Gmail Label of A and B is added to a mail, and has flag \\Seen(or no \\Seen).\n    The mail is shown in both Gmail IMAP folder named A and B, \n    and Tb knows flag \\Seen(or \\no \\Seen) of both mails.\n    Mail in Gmail IMAP folder named A is changed to no \\Seen(or has flag \\Seen).\n    Mail in Gmail IMAP folder named B is also changed to no \\Seen(or has flag\n    \\Seen) at Gmail IMAP server, because both are copy of same mail each other.\n    This flag status change at Gmail IMAP folder named B is not notified to\n    IMAP client like Tb via IDLE.\n  Your report :\n    A mail in a Gmail IMAP folder has flag \\Seen(or no \\Seen).\n    Tb1(or Smart Phone etc.) and Tb2 knows flag \\Seen(or \\no \\Seen) of the mail.\n    The mail is changed to no \\Seen(or has flag \\Seen) by Tb1(or Smart Phone).\n    The flag status change at Gmail IMAP folder is not notified to Tb2 via IDLE.\nThese are same phenomenon.\n\n> I have checked to see whether those emails are flagged as read or unread\n> but using the gmail web client and they are indeed being marked as read\n> but Thunderbird will not refresh their read/unread status.\n\nIf the mail is \"a mail in a conversation of Gmail which contains multiple mails\", phenomenon of bug 478996 occurs. Don't use \"read/unread status of a conversation at Gmail Web interface\" as evidence of \"read status or unread status of a mail\", unless it's sure that the conversation of Gmail has single mail only or that all mails in a conversation of Gmail has same status of read or unread.\n\nSee also bug 518581, if Gmail IMAP.\n\n> Expected results:\n> Each time Thunderbird attempts to get mail it should check the status of read\n> and unread emails from the IMAP server and mark those emails as read if applicable. \n> The only way to force TB to refresh the read/unread status is\n> to completely close TB and re-open which is obviously very annoying.\n\nTo avoid excess network traffic due to \"fetch of flags of all mails in IMAP folder upon each folder access\",\n(imagine 1,000,000 mails in a folder * 10,000 folders, new mail check of all mails folders each one minute)\nTb currently relies on \"flag status change notification from server via IDLE\", but many IMAP servers including Gmail IMAP unfortunately don't look to do so.\nFollowing is a possible workaround at Tb in your case, if your any IMAP folder is never huge.\n  - Disable IDLE command use\n    Max chached connections = 1\n    (I think Smart Phone's setting is similar to: no IDLE, max=0)\n    (Tb doesn't permit max=0. Always uses default of 5 if max=0 is specified)\n  - When you want to know flag status change by other IMAP cilent,\n    or when you want to know flag status change propagation to\n    same mail in other Gmail IMAP folder,\n    click different folder, then click needed folder at folder pane of Tb.\nCan you see flag status change by other IMAP client like Smart Phone, using Tb without restart?", "attachment_id": null, "bug_id": 693204, "text": "Do you enable IDLE command use?\nIf yes, same problem as bug 512745.\n  bug 512745 :\n    Gmail Label of A and B is added to a mail, and has flag \\Seen(or no \\Seen).\n    The mail is shown in both Gmail IMAP folder named A and B, \n    and Tb knows flag \\Seen(or \\no \\Seen) of both mails.\n    Mail in Gmail IMAP folder named A is changed to no \\Seen(or has flag \\Seen).\n    Mail in Gmail IMAP folder named B is also changed to no \\Seen(or has flag\n    \\Seen) at Gmail IMAP server, because both are copy of same mail each other.\n    This flag status change at Gmail IMAP folder named B is not notified to\n    IMAP client like Tb via IDLE.\n  Your report :\n    A mail in a Gmail IMAP folder has flag \\Seen(or no \\Seen).\n    Tb1(or Smart Phone etc.) and Tb2 knows flag \\Seen(or \\no \\Seen) of the mail.\n    The mail is changed to no \\Seen(or has flag \\Seen) by Tb1(or Smart Phone).\n    The flag status change at Gmail IMAP folder is not notified to Tb2 via IDLE.\nThese are same phenomenon.\n\n> I have checked to see whether those emails are flagged as read or unread\n> but using the gmail web client and they are indeed being marked as read\n> but Thunderbird will not refresh their read/unread status.\n\nIf the mail is \"a mail in a conversation of Gmail which contains multiple mails\", phenomenon of bug 478996 occurs. Don't use \"read/unread status of a conversation at Gmail Web interface\" as evidence of \"read status or unread status of a mail\", unless it's sure that the conversation of Gmail has single mail only or that all mails in a conversation of Gmail has same status of read or unread.\n\nSee also bug 518581, if Gmail IMAP.\n\n> Expected results:\n> Each time Thunderbird attempts to get mail it should check the status of read\n> and unread emails from the IMAP server and mark those emails as read if applicable. \n> The only way to force TB to refresh the read/unread status is\n> to completely close TB and re-open which is obviously very annoying.\n\nTo avoid excess network traffic due to \"fetch of flags of all mails in IMAP folder upon each folder access\",\n(imagine 1,000,000 mails in a folder * 10,000 folders, new mail check of all mails folders each one minute)\nTb currently relies on \"flag status change notification from server via IDLE\", but many IMAP servers including Gmail IMAP unfortunately don't look to do so.\nFollowing is a possible workaround at Tb in your case, if your any IMAP folder is never huge.\n  - Disable IDLE command use\n    Max chached connections = 1\n    (I think Smart Phone's setting is similar to: no IDLE, max=0)\n    (Tb doesn't permit max=0. Always uses default of 5 if max=0 is specified)\n  - When you want to know flag status change by other IMAP cilent,\n    or when you want to know flag status change propagation to\n    same mail in other Gmail IMAP folder,\n    click different folder, then click needed folder at folder pane of Tb.\nCan you see flag status change by other IMAP client like Smart Phone, using Tb without restart?", "tags": []}, {"is_private": false, "count": 2, "id": 5772428, "creator": "johndouglaspark@gmail.com", "time": "2011-10-10T20:08:31Z", "creation_time": "2011-10-10T20:08:31Z", "author": "johndouglaspark@gmail.com", "attachment_id": null, "raw_text": "I tried disabling IDLE and setting max cached connections to 1 but there appeared to be no change to the issue.\n\nI also changed max cached connections to 0 and still no change.\n\nI tried selecting multiple folders (Sent Items, Drafts etc) to try and force TB to refresh the read flags within the Inbox folder but no joy.\n\nInterestingly, if I read an email in TB, that email is almost instantly flagged as read on my iPhone.\n\nThere is still a delay of many hours if I read an email on my iPhone or web client to be marked as read in TB.", "tags": [], "bug_id": 693204, "text": "I tried disabling IDLE and setting max cached connections to 1 but there appeared to be no change to the issue.\n\nI also changed max cached connections to 0 and still no change.\n\nI tried selecting multiple folders (Sent Items, Drafts etc) to try and force TB to refresh the read flags within the Inbox folder but no joy.\n\nInterestingly, if I read an email in TB, that email is almost instantly flagged as read on my iPhone.\n\nThere is still a delay of many hours if I read an email on my iPhone or web client to be marked as read in TB."}, {"author": "johndouglaspark@gmail.com", "creation_time": "2011-10-10T20:34:47Z", "time": "2011-10-10T20:34:47Z", "creator": "johndouglaspark@gmail.com", "id": 5772522, "count": 3, "is_private": false, "tags": [], "text": "Just noticed your notes regarding max cached connections = 0 not being a valid option. Changed back to 1 and still no change in result.\n\nThe only way I can get TB to check for read/unread status is to exit TB and relaunch.", "bug_id": 693204, "raw_text": "Just noticed your notes regarding max cached connections = 0 not being a valid option. Changed back to 1 and still no change in result.\n\nThe only way I can get TB to check for read/unread status is to exit TB and relaunch.", "attachment_id": null}, {"tags": [], "bug_id": 693204, "text": "(In reply to John Park from comment #2)\n> I tried disabling IDLE and setting max cached connections to 1 but there\n> appeared to be no change to the issue.\n\nDid you restart Tb after the setting change?\nEffect by the setting change is not immediate, so restart of Tb is needed to see effective or not.\n\n(In reply to John Park from comment #3)\n> Just noticed your notes regarding max cached connections = 0 not being a\n> valid option. Changed back to 1 and still no change in result.\n\nRead next in my comment, please.\n>    (Tb doesn't permit max=0. Always uses default of 5 if max=0 is specified)", "attachment_id": null, "raw_text": "(In reply to John Park from comment #2)\n> I tried disabling IDLE and setting max cached connections to 1 but there\n> appeared to be no change to the issue.\n\nDid you restart Tb after the setting change?\nEffect by the setting change is not immediate, so restart of Tb is needed to see effective or not.\n\n(In reply to John Park from comment #3)\n> Just noticed your notes regarding max cached connections = 0 not being a\n> valid option. Changed back to 1 and still no change in result.\n\nRead next in my comment, please.\n>    (Tb doesn't permit max=0. Always uses default of 5 if max=0 is specified)", "creator": "m-wada@usa.com", "time": "2011-10-11T00:08:22Z", "creation_time": "2011-10-11T00:08:22Z", "author": "m-wada@usa.com", "is_private": false, "count": 4, "id": 5773251}, {"attachment_id": null, "raw_text": "I've restarted TB and it appears the emails are now being marked as read.\n\nThank you for your help!\n\nIs this an issue with TB or google?", "text": "I've restarted TB and it appears the emails are now being marked as read.\n\nThank you for your help!\n\nIs this an issue with TB or google?", "bug_id": 693204, "tags": [], "is_private": false, "id": 5773264, "count": 5, "creator": "johndouglaspark@gmail.com", "time": "2011-10-11T00:11:17Z", "creation_time": "2011-10-11T00:11:17Z", "author": "johndouglaspark@gmail.com"}, {"raw_text": "It's an issue with how google handles synchronizing state between multiple connections. It's up to the server how frequently it does that synchronization...", "attachment_id": null, "text": "It's an issue with how google handles synchronizing state between multiple connections. It's up to the server how frequently it does that synchronization...", "bug_id": 693204, "tags": [], "is_private": false, "count": 6, "id": 5773271, "author": "mozilla@davidbienvenu.org", "creator": "mozilla@davidbienvenu.org", "creation_time": "2011-10-11T00:14:21Z", "time": "2011-10-11T00:14:21Z"}, {"bug_id": 693204, "text": "(In reply to John Park from comment #2)\n> Interestingly, if I read an email in TB, that email is almost instantly\n> flagged as read on my iPhone.\n\nIs this true for a mail in other than Inbox?\n  At Tb, move(not copy) some(not one) mails from Inbox to other than Inbox\n    (call Test folder, not subfoler of Inbox)\n  At iPhone, see the mails in folder named Test. \n  At iPhone, see other folder than the Test folder, such as Inbox.\n  At Tb, show \"Order Received\" column of Test folder.\n  At Tb, change Read/Unread status of a mail in Test folder\n         which has smallest \"Order Received\" column value.", "tags": [], "attachment_id": null, "raw_text": "(In reply to John Park from comment #2)\n> Interestingly, if I read an email in TB, that email is almost instantly\n> flagged as read on my iPhone.\n\nIs this true for a mail in other than Inbox?\n  At Tb, move(not copy) some(not one) mails from Inbox to other than Inbox\n    (call Test folder, not subfoler of Inbox)\n  At iPhone, see the mails in folder named Test. \n  At iPhone, see other folder than the Test folder, such as Inbox.\n  At Tb, show \"Order Received\" column of Test folder.\n  At Tb, change Read/Unread status of a mail in Test folder\n         which has smallest \"Order Received\" column value.", "creation_time": "2011-10-11T00:38:32Z", "time": "2011-10-11T00:38:32Z", "creator": "m-wada@usa.com", "author": "m-wada@usa.com", "id": 5773316, "count": 7, "is_private": false}, {"creation_time": "2011-10-11T03:02:43Z", "time": "2011-10-11T03:02:43Z", "creator": "m-wada@usa.com", "author": "m-wada@usa.com", "count": 8, "id": 5773517, "is_private": false, "text": "Per folder setting like next may be a solution.\n  [ ? ] When automatic new mail check is invoked for this folder,\n        always checks flag/keyword status of all mails in this folder.", "bug_id": 693204, "tags": [], "attachment_id": null, "raw_text": "Per folder setting like next may be a solution.\n  [ ? ] When automatic new mail check is invoked for this folder,\n        always checks flag/keyword status of all mails in this folder."}, {"creator": "m-wada@usa.com", "creation_time": "2012-01-29T05:44:02Z", "time": "2012-01-29T05:44:02Z", "author": "m-wada@usa.com", "is_private": false, "id": 6017525, "count": 9, "tags": [], "bug_id": 693204, "text": "*** Bug 568775 has been marked as a duplicate of this bug. ***", "attachment_id": null, "raw_text": ""}, {"raw_text": "Tagging the old report as dup of the new one is the best way to make devs think the bug is recent (and irrelevant).\n\nYes, an other TB3 profile on the same host.\n\nBut bug can also be reproduced with any other Imap client, like my mobile phone: just after reading an email on Gmail, I can sync my phone, and it will show mail as read; but clicking GetMail on TB3 will now ... untill TB restart. This is making 568775#c6 irrelevant.", "attachment_id": null, "bug_id": 693204, "text": "Tagging the old report as dup of the new one is the best way to make devs think the bug is recent (and irrelevant).\n\nYes, an other TB3 profile on the same host.\n\nBut bug can also be reproduced with any other Imap client, like my mobile phone: just after reading an email on Gmail, I can sync my phone, and it will show mail as read; but clicking GetMail on TB3 will now ... untill TB restart. This is making 568775#c6 irrelevant.", "tags": [], "is_private": false, "id": 6021293, "count": 10, "author": "doublehp@doublehp.org", "creator": "doublehp@doublehp.org", "time": "2012-01-31T00:58:22Z", "creation_time": "2012-01-31T00:58:22Z"}, {"author": "doublehp@doublehp.org", "creator": "doublehp@doublehp.org", "creation_time": "2012-01-31T00:59:48Z", "time": "2012-01-31T00:59:48Z", "is_private": false, "count": 11, "id": 6021300, "tags": [], "bug_id": 693204, "text": "An other point against TB, prooving that it's not Google's fault: bug appeared during the week after migration from TB2 to TB3 ... it would be a very strange hasard if Google changed their server conf just that week ...", "raw_text": "An other point against TB, prooving that it's not Google's fault: bug appeared during the week after migration from TB2 to TB3 ... it would be a very strange hasard if Google changed their server conf just that week ...", "attachment_id": null}, {"attachment_id": null, "raw_text": "FYI.\nAnother workaround, if \"max cached connections=1\" is not practical in your environment, and if you are eager to know flag/keyword change of existent mails by other mail client even though your IMAP server doesn't notify flag/keyword change to Tb via IDLE :\n  Go \"Work Offline mode\", then go back to \"Work Online mode\",\n  and, if folder you want to know flag/keyword change by other is FolderX,\n  click an account or other folder, then click FolderX.", "bug_id": 693204, "text": "FYI.\nAnother workaround, if \"max cached connections=1\" is not practical in your environment, and if you are eager to know flag/keyword change of existent mails by other mail client even though your IMAP server doesn't notify flag/keyword change to Tb via IDLE :\n  Go \"Work Offline mode\", then go back to \"Work Online mode\",\n  and, if folder you want to know flag/keyword change by other is FolderX,\n  click an account or other folder, then click FolderX.", "tags": [], "is_private": false, "id": 6366799, "count": 12, "creator": "m-wada@usa.com", "creation_time": "2012-06-06T01:19:45Z", "time": "2012-06-06T01:19:45Z", "author": "m-wada@usa.com"}, {"id": 8158480, "count": 13, "is_private": false, "author": "m-wada@usa.com", "time": "2013-12-05T09:39:21Z", "creation_time": "2013-12-05T09:39:21Z", "creator": "m-wada@usa.com", "raw_text": "FYI.\nGmail IMAP started to support CONDSTORE from this year, so problem in Tb's CONDSTORE support is perhaps exposed to all Gmail users(see bug 912216, bug 885220).\nIIUC, workaround of \"Going offline then online\" is affected by the problem and the workaround perhaps doesn't work as expected(see bug 885220 cmment #76).\nDisable Tb's CONDSTORE support, please.\n  mail.server.default.use_condstore = false (setting for all IMAP accounts)\n  mail.server.server#.use_condstore = false (per account setting)", "attachment_id": null, "bug_id": 693204, "text": "FYI.\nGmail IMAP started to support CONDSTORE from this year, so problem in Tb's CONDSTORE support is perhaps exposed to all Gmail users(see bug 912216, bug 885220).\nIIUC, workaround of \"Going offline then online\" is affected by the problem and the workaround perhaps doesn't work as expected(see bug 885220 cmment #76).\nDisable Tb's CONDSTORE support, please.\n  mail.server.default.use_condstore = false (setting for all IMAP accounts)\n  mail.server.server#.use_condstore = false (per account setting)", "tags": []}, {"time": "2013-12-05T10:04:35Z", "creation_time": "2013-12-05T10:04:35Z", "creator": "m-wada@usa.com", "author": "m-wada@usa.com", "id": 8158557, "count": 14, "is_private": false, "text": "FYI.\nIf server supports CONDSTORE, and if CHANGEDSINCE of CONDSTORE is used by Tb upon new mail check, problem of this bug can be resolved. \n1. Upon first open(select at cached connection) of Mbox after restart.\n   select \"Mbox\"  (CONDSTORE)\n   * OK [HIGHESTMODSEQ 120418]\n   UID fetch 1:* (FLAGS)\n2. Upon second or later open(select at cached connection) of Mbox after restart of Tb.\n   select \"Mbox\" (CONDSTORE)\n   * OK [HIGHESTMODSEQ 120418] \n   UID fetch 1:* (FLAGS) (CHANGEDSINCE 120418)\n3. Upon each new mail check at cached connection where Mbox is already selected.\n   UID fetch 1:* (FLAGS) (CHANGEDSINCE 120418)\n    * 836 FETCH (UID 3292 MODSEQ (120420) FLAGS (\\Seen))", "bug_id": 693204, "tags": [], "attachment_id": null, "raw_text": "FYI.\nIf server supports CONDSTORE, and if CHANGEDSINCE of CONDSTORE is used by Tb upon new mail check, problem of this bug can be resolved. \n1. Upon first open(select at cached connection) of Mbox after restart.\n   select \"Mbox\"  (CONDSTORE)\n   * OK [HIGHESTMODSEQ 120418]\n   UID fetch 1:* (FLAGS)\n2. Upon second or later open(select at cached connection) of Mbox after restart of Tb.\n   select \"Mbox\" (CONDSTORE)\n   * OK [HIGHESTMODSEQ 120418] \n   UID fetch 1:* (FLAGS) (CHANGEDSINCE 120418)\n3. Upon each new mail check at cached connection where Mbox is already selected.\n   UID fetch 1:* (FLAGS) (CHANGEDSINCE 120418)\n    * 836 FETCH (UID 3292 MODSEQ (120420) FLAGS (\\Seen))"}, {"attachment_id": null, "is_private": false, "count": 15, "id": 8158582, "raw_text": "", "creator": "m-wada@usa.com", "time": "2013-12-05T10:11:40Z", "creation_time": "2013-12-05T10:11:40Z", "author": "m-wada@usa.com", "tags": [], "text": "*** Bug 512745 has been marked as a duplicate of this bug. ***", "bug_id": 693204}, {"bug_id": 693204, "text": "*** Bug 518581 has been marked as a duplicate of this bug. ***", "tags": [], "attachment_id": null, "raw_text": "", "creator": "m-wada@usa.com", "time": "2013-12-05T10:12:49Z", "creation_time": "2013-12-05T10:12:49Z", "author": "m-wada@usa.com", "is_private": false, "id": 8158587, "count": 16}, {"attachment_id": null, "raw_text": "", "bug_id": 693204, "text": "*** Bug 594106 has been marked as a duplicate of this bug. ***", "tags": [], "count": 17, "id": 8158590, "is_private": false, "time": "2013-12-05T10:13:36Z", "creation_time": "2013-12-05T10:13:36Z", "creator": "m-wada@usa.com", "author": "m-wada@usa.com"}, {"id": 8158595, "count": 18, "is_private": false, "time": "2013-12-05T10:15:13Z", "creation_time": "2013-12-05T10:15:13Z", "creator": "m-wada@usa.com", "author": "m-wada@usa.com", "attachment_id": null, "raw_text": "", "tags": [], "text": "*** Bug 672585 has been marked as a duplicate of this bug. ***", "bug_id": 693204}, {"raw_text": "", "attachment_id": null, "tags": [], "text": "*** Bug 573985 has been marked as a duplicate of this bug. ***", "bug_id": 693204, "is_private": false, "count": 19, "id": 8163362, "author": "m-wada@usa.com", "creator": "m-wada@usa.com", "time": "2013-12-06T05:55:42Z", "creation_time": "2013-12-06T05:55:42Z"}, {"is_private": false, "count": 20, "id": 8163365, "creator": "m-wada@usa.com", "time": "2013-12-06T05:56:47Z", "creation_time": "2013-12-06T05:56:47Z", "author": "m-wada@usa.com", "attachment_id": null, "raw_text": "", "tags": [], "text": "*** Bug 606395 has been marked as a duplicate of this bug. ***", "bug_id": 693204}, {"tags": [], "text": "*** Bug 577586 has been marked as a duplicate of this bug. ***", "bug_id": 693204, "raw_text": "", "attachment_id": null, "author": "m-wada@usa.com", "creator": "m-wada@usa.com", "creation_time": "2013-12-06T05:59:18Z", "time": "2013-12-06T05:59:18Z", "is_private": false, "id": 8163369, "count": 21}, {"id": 8163373, "count": 22, "is_private": false, "author": "m-wada@usa.com", "creation_time": "2013-12-06T06:00:51Z", "time": "2013-12-06T06:00:51Z", "creator": "m-wada@usa.com", "raw_text": "", "attachment_id": null, "text": "*** Bug 650103 has been marked as a duplicate of this bug. ***", "bug_id": 693204, "tags": []}, {"attachment_id": null, "raw_text": "Thanks for the information, WADA.  The easy way to disable the CONDSTORE as suggested on Comment #13 is by doing this:\n\n1. [On Linux] Edit -> Preferences // [On Windows] Tools -> Options...\n2. Advanced -> Config Editor...\n3. Search for \"CONDSTORE\" (with no quotes, and it shouldn't matter if it's lowercase).\n4. Double-click on \"mail.server.default.use_condstore\" to change the 'Value' to \"false\".\n5. Close the Config Editor (the search window).\n6. Restart Thunderbird.\n\nI hope this works, as I am just trying this fix out myself.\n\n(See my old bug comment here: https://bugzilla.mozilla.org/show_bug.cgi?id=594106#c43)", "bug_id": 693204, "text": "Thanks for the information, WADA.  The easy way to disable the CONDSTORE as suggested on Comment #13 is by doing this:\n\n1. [On Linux] Edit -> Preferences // [On Windows] Tools -> Options...\n2. Advanced -> Config Editor...\n3. Search for \"CONDSTORE\" (with no quotes, and it shouldn't matter if it's lowercase).\n4. Double-click on \"mail.server.default.use_condstore\" to change the 'Value' to \"false\".\n5. Close the Config Editor (the search window).\n6. Restart Thunderbird.\n\nI hope this works, as I am just trying this fix out myself.\n\n(See my old bug comment here: https://bugzilla.mozilla.org/show_bug.cgi?id=594106#c43)", "tags": [], "is_private": false, "count": 23, "id": 8163533, "creator": "junktext@junktext.org", "creation_time": "2013-12-06T07:08:24Z", "time": "2013-12-06T07:08:24Z", "author": "junktext@junktext.org"}, {"time": "2013-12-07T00:14:06Z", "creation_time": "2013-12-07T00:14:06Z", "creator": "nyet@nyet.org", "tags": [], "text": "Again, disabling CONDSTORE does not always help. There should probably be two separate bugs, one for CONDSTORE related, one for not related to CONDSTORE.. a bunch of different bugs all got rolled into one bug, so if somebody fixes CONDSTORE, hopefully they will not close this :/", "bug_id": 693204, "author": "nyet@nyet.org", "id": 8167890, "count": 24, "is_private": false, "attachment_id": null, "raw_text": "Again, disabling CONDSTORE does not always help. There should probably be two separate bugs, one for CONDSTORE related, one for not related to CONDSTORE.. a bunch of different bugs all got rolled into one bug, so if somebody fixes CONDSTORE, hopefully they will not close this :/"}, {"author": "m-wada@usa.com", "creation_time": "2013-12-07T06:02:10Z", "time": "2013-12-07T06:02:10Z", "creator": "m-wada@usa.com", "count": 25, "id": 8168647, "is_private": false, "tags": [], "bug_id": 693204, "text": "(In reply to Nye Liu from comment #24)\nNye Liu, please don't confuse following.\n (a) problem of this bug(notification of flag status change)\n (b) problems due to CONDSTORE support in Tb\n (c) Tb's behavior in CONDSTORE support which may affect on workaround of this bug;\n       - Going Work Offline, going back Work Online, then re-open folder by folder click\n       - max cached connection=1, re-open folder by folder click\n (d) A possible solution of this bug by utilizing CONDSTORE (by correctly using)\n\n\"Disabling CONDSTORE support of Tb\" in this bug is only for (c), even though the \"disabling CONDSTORE support of Tb\" is automatically applied to (b) always.\nPurpose of workaround of this bug is to force Tb to issue \"uid fetch 1:* flags\" upon \"folder click\" step in workaround.\nHowever, as I already pointed in comment #13, Tb may issue \"UID fetch 1:* (FLAGS) (CHANGEDSINCE mod-seq-value)\" or \"uid fetch HighestUID:* (FLAGS)\" upon the folder click in the workaround when CONDSTORE support of Tb is enabled. And, it may be different between Inbox and other Mbox. It may depend on timing of events during workaroud execution. Inconcistency of phenomenon during workaround execution surely produces user's confusions.\nPurpose of \"Disabling CONDSTORE support of Tb\" in this bug is:\n  Surely force \"uid fetch 1:* flags\" upon \"folder click\" step of workaround.\n  Avoid user's confusions during workaround execution.\n\nBecause problem of this bug itslef is absolutely irrelevant to CONDSTORE support by Tb, even if CONDSTORE extension can be utilized to resolve problem of this bug, I'm sure that developers never confuse this bug with CONDSTORE support related problem.", "raw_text": "(In reply to Nye Liu from comment #24)\nNye Liu, please don't confuse following.\n (a) problem of this bug(notification of flag status change)\n (b) problems due to CONDSTORE support in Tb\n (c) Tb's behavior in CONDSTORE support which may affect on workaround of this bug;\n       - Going Work Offline, going back Work Online, then re-open folder by folder click\n       - max cached connection=1, re-open folder by folder click\n (d) A possible solution of this bug by utilizing CONDSTORE (by correctly using)\n\n\"Disabling CONDSTORE support of Tb\" in this bug is only for (c), even though the \"disabling CONDSTORE support of Tb\" is automatically applied to (b) always.\nPurpose of workaround of this bug is to force Tb to issue \"uid fetch 1:* flags\" upon \"folder click\" step in workaround.\nHowever, as I already pointed in comment #13, Tb may issue \"UID fetch 1:* (FLAGS) (CHANGEDSINCE mod-seq-value)\" or \"uid fetch HighestUID:* (FLAGS)\" upon the folder click in the workaround when CONDSTORE support of Tb is enabled. And, it may be different between Inbox and other Mbox. It may depend on timing of events during workaroud execution. Inconcistency of phenomenon during workaround execution surely produces user's confusions.\nPurpose of \"Disabling CONDSTORE support of Tb\" in this bug is:\n  Surely force \"uid fetch 1:* flags\" upon \"folder click\" step of workaround.\n  Avoid user's confusions during workaround execution.\n\nBecause problem of this bug itslef is absolutely irrelevant to CONDSTORE support by Tb, even if CONDSTORE extension can be utilized to resolve problem of this bug, I'm sure that developers never confuse this bug with CONDSTORE support related problem.", "attachment_id": null}, {"text": "(In reply to Nye Liu from comment #24)\n> There should probably be two separate bugs, one for CONDSTORE related, one for not related to CONDSTORE..\n> a bunch of different bugs all got rolled into one bug, (snip)\n\nNye Liu, have you actually read and understood all bugs which is duped to this bug by me?\nWhich phenomenon in which dup'ed bug is not problem due to \"flag status change is not notified from IMAP server via IDLE\"?\n\nDo you actually understand problems by CONDSTORE support of Tb or problems in Tb around CONDSTORE?\nHave you read and understand Bug 885220\u3000which I already pointed in comment #13, which is for problem occurs only when CONDSTORE support of Tb is enabled?\nDo you understand a change in the past which is one of causes of Bug 885220?\nHave you read and understand bug 885220 comment #88?\nDo you understand why the \"change in the past\" was backed out?\nDo you understand what problem may occur again by the backuot?\nDo you understand what problem occurred by the backout?\nHave you read and understand bug 912216 which I already pointed in comment #13?\n\nThese problem relevant to \"CONDSTORE extention and Tb's CONDSTORE support\" and problem relevant to \"flag status change is not notified from IMAP server via IDLE\" are clearly isolated already.", "bug_id": 693204, "tags": [], "attachment_id": null, "raw_text": "(In reply to Nye Liu from comment #24)\n> There should probably be two separate bugs, one for CONDSTORE related, one for not related to CONDSTORE..\n> a bunch of different bugs all got rolled into one bug, (snip)\n\nNye Liu, have you actually read and understood all bugs which is duped to this bug by me?\nWhich phenomenon in which dup'ed bug is not problem due to \"flag status change is not notified from IMAP server via IDLE\"?\n\nDo you actually understand problems by CONDSTORE support of Tb or problems in Tb around CONDSTORE?\nHave you read and understand Bug 885220\u3000which I already pointed in comment #13, which is for problem occurs only when CONDSTORE support of Tb is enabled?\nDo you understand a change in the past which is one of causes of Bug 885220?\nHave you read and understand bug 885220 comment #88?\nDo you understand why the \"change in the past\" was backed out?\nDo you understand what problem may occur again by the backuot?\nDo you understand what problem occurred by the backout?\nHave you read and understand bug 912216 which I already pointed in comment #13?\n\nThese problem relevant to \"CONDSTORE extention and Tb's CONDSTORE support\" and problem relevant to \"flag status change is not notified from IMAP server via IDLE\" are clearly isolated already.", "creator": "m-wada@usa.com", "creation_time": "2013-12-07T09:22:45Z", "time": "2013-12-07T09:22:45Z", "author": "m-wada@usa.com", "is_private": false, "count": 26, "id": 8168789}, {"raw_text": "Quick summary of this bug, to avoid confusions by some peoples, or to avoid irrelevant comments due to confusion with problems in Tb's CONDSTORE support.\n\n-Problem of this bug;\n  - Because server doesn't notify flag status change via IDLE,\n    Tb can't know flag status change of mails at server Mbox via IDLE.\n  - Tb's expectaion of \"server notifies flag status change via IDLE\" is never\n    RFC violation, because \"flag status change notification via IDLE\" is SHOULD.\n  - Server's behavior is never RFC violation, because \"flag status change notification \n    via IDLE\" is SHOULD, is never MUST.\n  - Unfortunately, some major IMAP servers don't notify flag status change via IDLE,\n    and Gmail IMAP is an example of such server.\n- Problems in current \"Tb's CONDSTORE suport\" is irrelevant to above problem of this bug\n  which is produced by IDLE command use.\n \nPlease never confuse following.\n\n- If CODNSTORE extention is well utilized, problem of this bug can be resolved by simple\n  method.\n\n- Current Tb's CONDSTORE support has some problems, so \"disabling Tb's CONDSTORE\"\n  is better. Rather, Tb user MUST disable it until problems will be resolved,\n  if Tb user uses IMAP server who supports CONDSTORE extension.\n\n- Gmail started to support CONDSTORE extesion this year,\n  and Tb's default is mail.server.default.use_condstore=true.\n  So problem in \"Tb's CONDSTORE support\" is exposed to Tb/Gmail IMAP user from this year.\n  Because number of Tb+Gmail IMAP user is not so small,\n  default of mail.server.default.use_condstore should be changed to false.\n\n  \"dup'ed bugs to this bug which is relevant to Gmail IMAP\" was opened before Gmail\n  started to support CONDSTORE extension. How can problem reported to these dup'ed bugs\n  be relivant to Tb's CONDSTORE support and/or CONDSTORE extesion?\n\n- Because wrokaround of this bug is affected by CONDSTORE extension and Tb's current\n  CONDSTORE support, Tb user who experienced problem of this bug should disable\n  Tb's CONDSTORE support, if Tb user uses IMAP server which supports CONDSTORE,\n  in ordre to make the workaround usable,\n  in order to avoid confusion produced by problem in Tb's CONDSTORE support.\n\n- Because \"disabling Tb's CONDSTORE support\" does do nothing\n  if IMAP server doesn't support CONDSTORE or server is not IMAP server,\n  Tb user can disable Tb's CONDSTORE support freely, safely, any time,\n  regardless of \"used IMAP server supports CONDSTORE or not\",\n  regardless of \"IMAP server is used or not\".", "attachment_id": null, "tags": [], "bug_id": 693204, "text": "Quick summary of this bug, to avoid confusions by some peoples, or to avoid irrelevant comments due to confusion with problems in Tb's CONDSTORE support.\n\n-Problem of this bug;\n  - Because server doesn't notify flag status change via IDLE,\n    Tb can't know flag status change of mails at server Mbox via IDLE.\n  - Tb's expectaion of \"server notifies flag status change via IDLE\" is never\n    RFC violation, because \"flag status change notification via IDLE\" is SHOULD.\n  - Server's behavior is never RFC violation, because \"flag status change notification \n    via IDLE\" is SHOULD, is never MUST.\n  - Unfortunately, some major IMAP servers don't notify flag status change via IDLE,\n    and Gmail IMAP is an example of such server.\n- Problems in current \"Tb's CONDSTORE suport\" is irrelevant to above problem of this bug\n  which is produced by IDLE command use.\n \nPlease never confuse following.\n\n- If CODNSTORE extention is well utilized, problem of this bug can be resolved by simple\n  method.\n\n- Current Tb's CONDSTORE support has some problems, so \"disabling Tb's CONDSTORE\"\n  is better. Rather, Tb user MUST disable it until problems will be resolved,\n  if Tb user uses IMAP server who supports CONDSTORE extension.\n\n- Gmail started to support CONDSTORE extesion this year,\n  and Tb's default is mail.server.default.use_condstore=true.\n  So problem in \"Tb's CONDSTORE support\" is exposed to Tb/Gmail IMAP user from this year.\n  Because number of Tb+Gmail IMAP user is not so small,\n  default of mail.server.default.use_condstore should be changed to false.\n\n  \"dup'ed bugs to this bug which is relevant to Gmail IMAP\" was opened before Gmail\n  started to support CONDSTORE extension. How can problem reported to these dup'ed bugs\n  be relivant to Tb's CONDSTORE support and/or CONDSTORE extesion?\n\n- Because wrokaround of this bug is affected by CONDSTORE extension and Tb's current\n  CONDSTORE support, Tb user who experienced problem of this bug should disable\n  Tb's CONDSTORE support, if Tb user uses IMAP server which supports CONDSTORE,\n  in ordre to make the workaround usable,\n  in order to avoid confusion produced by problem in Tb's CONDSTORE support.\n\n- Because \"disabling Tb's CONDSTORE support\" does do nothing\n  if IMAP server doesn't support CONDSTORE or server is not IMAP server,\n  Tb user can disable Tb's CONDSTORE support freely, safely, any time,\n  regardless of \"used IMAP server supports CONDSTORE or not\",\n  regardless of \"IMAP server is used or not\".", "is_private": false, "id": 8169981, "count": 27, "author": "m-wada@usa.com", "creator": "m-wada@usa.com", "creation_time": "2013-12-08T07:53:28Z", "time": "2013-12-08T07:53:28Z"}, {"bug_id": 693204, "text": "(In reply to WADA from comment #27)\n>   - Tb's expectaion of \"server notifies flag status change via IDLE\" is never\n>     RFC violation, because \"flag status change notification via IDLE\" is\n> SHOULD.\n\nI'd say that is only true if \"flag status change notification via IDLE\" is MUST.\n\nSeems to me that unless the server MUST provide flag status changes via IDLE, TB cannot rely on the server to provide flag status changes.", "tags": [], "raw_text": "(In reply to WADA from comment #27)\n>   - Tb's expectaion of \"server notifies flag status change via IDLE\" is never\n>     RFC violation, because \"flag status change notification via IDLE\" is\n> SHOULD.\n\nI'd say that is only true if \"flag status change notification via IDLE\" is MUST.\n\nSeems to me that unless the server MUST provide flag status changes via IDLE, TB cannot rely on the server to provide flag status changes.", "attachment_id": null, "author": "nyet@nyet.org", "creator": "nyet@nyet.org", "time": "2014-02-08T19:43:28Z", "creation_time": "2014-02-08T19:43:28Z", "is_private": false, "count": 28, "id": 8393356}, {"count": 29, "id": 8414969, "is_private": false, "creation_time": "2014-02-13T10:21:33Z", "time": "2014-02-13T10:21:33Z", "creator": "julianjm@gmail.com", "author": "julianjm@gmail.com", "attachment_id": null, "raw_text": "Years ago it worked... I guess it was from the Thunderbird 2-3 times.\n\nAre we sure the problem is related to IDLE flag updates? Why do other IMAP clients detect deletions almost instantaneously?\n\nI have Thunderbird 24.1.0 and K9Mail on android both connected to the same IMAP account on Zimbra 8.\nIf I delete a message on Thunderbird I see the action on the phone in 2-3 seconds.\nIf I delete a message on the phone, i never see the message disappear on Thunderbird.\n\nGoing to offline mode and back doesn't seem to do it for me.", "bug_id": 693204, "text": "Years ago it worked... I guess it was from the Thunderbird 2-3 times.\n\nAre we sure the problem is related to IDLE flag updates? Why do other IMAP clients detect deletions almost instantaneously?\n\nI have Thunderbird 24.1.0 and K9Mail on android both connected to the same IMAP account on Zimbra 8.\nIf I delete a message on Thunderbird I see the action on the phone in 2-3 seconds.\nIf I delete a message on the phone, i never see the message disappear on Thunderbird.\n\nGoing to offline mode and back doesn't seem to do it for me.", "tags": []}, {"id": 8532984, "count": 30, "is_private": false, "attachment_id": null, "raw_text": "", "creation_time": "2014-03-14T04:50:45Z", "time": "2014-03-14T04:50:45Z", "creator": "m-wada@usa.com", "text": "*** Bug 712595 has been marked as a duplicate of this bug. ***", "bug_id": 693204, "tags": [], "author": "m-wada@usa.com"}, {"creator": "_+bugzilla@ygoe.de", "time": "2014-03-14T09:29:40Z", "creation_time": "2014-03-14T09:29:40Z", "author": "_+bugzilla@ygoe.de", "is_private": false, "count": 31, "id": 8533504, "bug_id": 693204, "text": "Guess what, this isn't even limited to Gmail. It happens on my own IMAP server as well. It's running Dovecot on Linux. See bug 712595. Offline and online mode does not help. Changing folders does not work. Only restarting Thunderbird helps for sure. Until then, I regularly see unread or read messages in my inbox at home that I've already read and/or deleted through webmail or smartphone. I also have the impression that it's not a long delay, but instead it's a now or never. Disabling IDLE is definitely no option because that's the future (well, present already) and what everybody else uses successfully. I have the impression that there's some race condition inside Thunderbird that nobody will ever be able to find without rewriting the whole thing.", "tags": [], "attachment_id": null, "raw_text": "Guess what, this isn't even limited to Gmail. It happens on my own IMAP server as well. It's running Dovecot on Linux. See bug 712595. Offline and online mode does not help. Changing folders does not work. Only restarting Thunderbird helps for sure. Until then, I regularly see unread or read messages in my inbox at home that I've already read and/or deleted through webmail or smartphone. I also have the impression that it's not a long delay, but instead it's a now or never. Disabling IDLE is definitely no option because that's the future (well, present already) and what everybody else uses successfully. I have the impression that there's some race condition inside Thunderbird that nobody will ever be able to find without rewriting the whole thing."}, {"tags": [], "text": "(In reply to Yves Goergen from comment #31)\n> Guess what, this isn't even limited to Gmail. (snip)\n\nWhat is reason to add new \"merely 'me too' comment without required data for problem analysis\" to this bug, even after reading my bug 712595 comment #24?\nThere is no need of such \"guess\" in this bug. In this \"Bug report at B.M.O for developers to resolve Tb's actual bug(flaw in Tb's code)\", \"Why problem occurs\", \"What hapens\" etc. is pretty clear already.\nPlease note that here is never support forum nor Help Center to saying complaint to Tb developers. Here is B.M.O for helping developers.\nAll \"comuication between IMAP cliet(Thunderbird) and IMAP server\" is done by \"IMAP command and responce\". How can software developers know \"what actually happens in your environment\" without required data?", "bug_id": 693204, "raw_text": "(In reply to Yves Goergen from comment #31)\n> Guess what, this isn't even limited to Gmail. (snip)\n\nWhat is reason to add new \"merely 'me too' comment without required data for problem analysis\" to this bug, even after reading my bug 712595 comment #24?\nThere is no need of such \"guess\" in this bug. In this \"Bug report at B.M.O for developers to resolve Tb's actual bug(flaw in Tb's code)\", \"Why problem occurs\", \"What hapens\" etc. is pretty clear already.\nPlease note that here is never support forum nor Help Center to saying complaint to Tb developers. Here is B.M.O for helping developers.\nAll \"comuication between IMAP cliet(Thunderbird) and IMAP server\" is done by \"IMAP command and responce\". How can software developers know \"what actually happens in your environment\" without required data?", "attachment_id": null, "author": "m-wada@usa.com", "time": "2014-03-14T14:42:26Z", "creation_time": "2014-03-14T14:42:26Z", "creator": "m-wada@usa.com", "id": 8534551, "count": 32, "is_private": false}, {"text": "4 x windows xp machines running thunderbird 24.1.1\n2 x iphones (ios 6 and 7)\n\nAll sharing 4 different mailboxes.\n\nUp until recently we used ms but changed due to roaming issues without exchange.\n\nOur email is hosted by gmail.\n\nAll email was replicated instantly using outlook so gmail is not the problem.\n\nResults are hit and miss, some machines update immediately, others will not update unless tb is restarted, offline/online / different folder / manually checking for mail does not solve.\n\nSettings on all machines / users / mailboxes are mirrored.  IDLE is enabled accross but i have disabled and makes no difference.  I have disabled firewalls incase it was stopping the server updating but still nothing.", "bug_id": 693204, "tags": [], "author": "dave@erl-info.co.uk", "creation_time": "2014-03-14T16:12:04Z", "time": "2014-03-14T16:12:04Z", "creator": "dave@erl-info.co.uk", "raw_text": "4 x windows xp machines running thunderbird 24.1.1\n2 x iphones (ios 6 and 7)\n\nAll sharing 4 different mailboxes.\n\nUp until recently we used ms but changed due to roaming issues without exchange.\n\nOur email is hosted by gmail.\n\nAll email was replicated instantly using outlook so gmail is not the problem.\n\nResults are hit and miss, some machines update immediately, others will not update unless tb is restarted, offline/online / different folder / manually checking for mail does not solve.\n\nSettings on all machines / users / mailboxes are mirrored.  IDLE is enabled accross but i have disabled and makes no difference.  I have disabled firewalls incase it was stopping the server updating but still nothing.", "count": 33, "id": 8534975, "is_private": false, "attachment_id": null}, {"creator": "doublehp@doublehp.org", "time": "2014-03-14T20:47:54Z", "creation_time": "2014-03-14T20:47:54Z", "author": "doublehp@doublehp.org", "tags": ["spam"], "text": "(In reply to WADA from comment #32)\n> All \"comuication between IMAP cliet(Thunderbird) and IMAP server\" is done by\n> \"IMAP command and responce\". How can software developers know \"what actually\n> happens in your environment\" without required data?\n\nAny developper can repro the bug easily: create a Gmail account (they are now free, and don't need sponsorship anymore; beta have been close, and official product have been launched years ago), configure two different Thunderbird profiles to access the same Gmail account, send one email from one box to the other one, read the mail on both, mark the mail as unread on one, and click GET MAIL on the other one, you will see that email is marked unread only after restarting \"the other one\".\n\nYou don't need huge amount of data from users, strace or backtraces. Any dev can produce desired amount of logs for free, any time, and from any country (yes ... I had country specific issues with Google in the past - this bug is NOT one of them). To dig deeply into client-server communication, tcpdump often helps.\n\nThunderbird is a free software. And dev always remind users that they are volunteers. But the products of the Mozilla fundations have a reputation to defend; they slowly became popular, and are now used by many people ... not only geeks in the cave using Linux for religious reasons; Thunderbird is used by people why have serious work, and who consider Thunderbird as a work tool. This means ... the tool must meet minimal requirements, and must work at least, as good as other concurrent products. And since mid 2013, thunderbird have serious issues. It does not sync properly messages status, and does not work at all anymore with Google Calendar (yes I know, it's not Mozilla Fundation who was responsible for Google Calendar Exchange server shut down; but the moz team could have worked on making TB compatible with an other protocol). Now, TB have become a poor mail reader not even able to track a READ STATUS, I can not use PGP encryption at all (since TB3, or maybe even TB2, I forgot), and it can not let me use my calendar any more. I wonder why I have not yet changed MUA.\n\nDev always claim that ... they work for free, and are free to choose what to work on, which snipset of code they want to have fun with. By letting users down on basic features, users will get bored of the product. This bug is one of the few that I consider critical and urgent. Last week I was trying to configure an old Nokia Symbian S60 for Gmail sync; in my research, I have found several articles saying that Gmail closed the Exchange access, and that Mail for Exchange for Symbian is now deprecated because of Google choices; the articles was also doing an overview of other affected products; MFE@Symbian was considered as a small loss, because Nokia themselves left down Symbian, and they officially stopped supporting Symbian S60 phones. The article also mentionned that Thunderbird was also affected, and that is was a shame for such a populat product to not publish a serious work around within days. A WA should have been proposed in days; it's now one year, and TB still does not compensate the loss; any mobile phone (included Linux based Android) now use either push, or similar tech; thunderbird ... does not.\n\nThat's why, for some key features that Thunderbird does not implement (used to in previous versions, but does not any more), I am seriously considering to ... install a phone emulator ... to bring back these features in my desktop. Gonna use a foreign arch emulator to work around regressions of Thunderbird !!!\n\nThe best MUA ever was Thunderbird 1.5 .", "bug_id": 693204, "attachment_id": null, "is_private": false, "id": 8536480, "count": 34, "raw_text": "(In reply to WADA from comment #32)\n> All \"comuication between IMAP cliet(Thunderbird) and IMAP server\" is done by\n> \"IMAP command and responce\". How can software developers know \"what actually\n> happens in your environment\" without required data?\n\nAny developper can repro the bug easily: create a Gmail account (they are now free, and don't need sponsorship anymore; beta have been close, and official product have been launched years ago), configure two different Thunderbird profiles to access the same Gmail account, send one email from one box to the other one, read the mail on both, mark the mail as unread on one, and click GET MAIL on the other one, you will see that email is marked unread only after restarting \"the other one\".\n\nYou don't need huge amount of data from users, strace or backtraces. Any dev can produce desired amount of logs for free, any time, and from any country (yes ... I had country specific issues with Google in the past - this bug is NOT one of them). To dig deeply into client-server communication, tcpdump often helps.\n\nThunderbird is a free software. And dev always remind users that they are volunteers. But the products of the Mozilla fundations have a reputation to defend; they slowly became popular, and are now used by many people ... not only geeks in the cave using Linux for religious reasons; Thunderbird is used by people why have serious work, and who consider Thunderbird as a work tool. This means ... the tool must meet minimal requirements, and must work at least, as good as other concurrent products. And since mid 2013, thunderbird have serious issues. It does not sync properly messages status, and does not work at all anymore with Google Calendar (yes I know, it's not Mozilla Fundation who was responsible for Google Calendar Exchange server shut down; but the moz team could have worked on making TB compatible with an other protocol). Now, TB have become a poor mail reader not even able to track a READ STATUS, I can not use PGP encryption at all (since TB3, or maybe even TB2, I forgot), and it can not let me use my calendar any more. I wonder why I have not yet changed MUA.\n\nDev always claim that ... they work for free, and are free to choose what to work on, which snipset of code they want to have fun with. By letting users down on basic features, users will get bored of the product. This bug is one of the few that I consider critical and urgent. Last week I was trying to configure an old Nokia Symbian S60 for Gmail sync; in my research, I have found several articles saying that Gmail closed the Exchange access, and that Mail for Exchange for Symbian is now deprecated because of Google choices; the articles was also doing an overview of other affected products; MFE@Symbian was considered as a small loss, because Nokia themselves left down Symbian, and they officially stopped supporting Symbian S60 phones. The article also mentionned that Thunderbird was also affected, and that is was a shame for such a populat product to not publish a serious work around within days. A WA should have been proposed in days; it's now one year, and TB still does not compensate the loss; any mobile phone (included Linux based Android) now use either push, or similar tech; thunderbird ... does not.\n\nThat's why, for some key features that Thunderbird does not implement (used to in previous versions, but does not any more), I am seriously considering to ... install a phone emulator ... to bring back these features in my desktop. Gonna use a foreign arch emulator to work around regressions of Thunderbird !!!\n\nThe best MUA ever was Thunderbird 1.5 ."}, {"creator": "m-wada@usa.com", "time": "2014-03-15T02:57:45Z", "creation_time": "2014-03-15T02:57:45Z", "author": "m-wada@usa.com", "is_private": false, "id": 8537692, "count": 35, "tags": [], "text": "(In reply to delid4ve from comment #33)\n> (snip) offline/online / different folder / manually checking for mail does not solve. (snip)\n> IDLE is enabled accross, but i have disabled and makes no difference.\n\nIt's pretty simple. Merely one of next,\n  (i)  Your problem is not this bug. Your problem is absolutely different problem from this bug.\n  (ii) Your problem is this bug, but your operation is wrong.\nbecause this bug is for following problem(and only for following problem).\n  Server doesn't notify flag change via IDLE,\n  so Tb can't know flag change status of already fetched mail via IDLE.\n\nExample of (i) :\n- If CONDSTORE is used, UID fetch 1:* (FLAGS) (CHANGEDSINCE ...), UID fetch Highest:*\n  (CHANGEDSINCE ...) is used by Tb. This may produce problems in getting flag status of already\n  fetched mail.\n  Read bug 885220 for IMAP flow for this, please.\n  This kind of issue is one of reasons why bug 912216 was opened.\n  Note: Both bugs are alreeady pointed in this bug.\nExample of (ii) :\n  - IDLE command is issued after end of IMAP command execution at cached connection.\n    \"Use IDLE command\" setting is for \"issue IDLE or not, at end of IMAP command execution\".\n    \"Use IDLE command\" setting is never for \"terminate current IDLE status at a cached connection\".\n  - Upon periodical new mail check, if an Mbox is already selected at a cached connection.\n    Tb uses \"uid fetch KnownHighestUID:* Flags\".\n    Inbox is selected at a cached connection always, except when max cached connection=1.\n  Even though these, even though an Mbox is still IDLE status at a cached connection after\n  disabling \"Use IDLE command\" setting, or even though an Mbox is still selected at a cached\n  connection after some actions, write useless comment to a bug.\n  Note:\n  \"go Work Offline\" step of operations which is written in this bug is for;\n     Force close of all cached connections, in order to force Tb to do \"open connection, login,\n     select Inbox(and other Mbox), uid 1:* fetch (flags)\" again after \"go Work Online\".\n  \"disabling CONDSTORE support\" is for;\n     Force Tb to use \"uid 1:* fetch (flags)\" instead of \"uid fetch 1:* (flags) (CHANGEDSINCE ...)\"\n     even when server supports CONDSTORE extension.", "bug_id": 693204, "attachment_id": null, "raw_text": "(In reply to delid4ve from comment #33)\n> (snip) offline/online / different folder / manually checking for mail does not solve. (snip)\n> IDLE is enabled accross, but i have disabled and makes no difference.\n\nIt's pretty simple. Merely one of next,\n  (i)  Your problem is not this bug. Your problem is absolutely different problem from this bug.\n  (ii) Your problem is this bug, but your operation is wrong.\nbecause this bug is for following problem(and only for following problem).\n  Server doesn't notify flag change via IDLE,\n  so Tb can't know flag change status of already fetched mail via IDLE.\n\nExample of (i) :\n- If CONDSTORE is used, UID fetch 1:* (FLAGS) (CHANGEDSINCE ...), UID fetch Highest:*\n  (CHANGEDSINCE ...) is used by Tb. This may produce problems in getting flag status of already\n  fetched mail.\n  Read bug 885220 for IMAP flow for this, please.\n  This kind of issue is one of reasons why bug 912216 was opened.\n  Note: Both bugs are alreeady pointed in this bug.\nExample of (ii) :\n  - IDLE command is issued after end of IMAP command execution at cached connection.\n    \"Use IDLE command\" setting is for \"issue IDLE or not, at end of IMAP command execution\".\n    \"Use IDLE command\" setting is never for \"terminate current IDLE status at a cached connection\".\n  - Upon periodical new mail check, if an Mbox is already selected at a cached connection.\n    Tb uses \"uid fetch KnownHighestUID:* Flags\".\n    Inbox is selected at a cached connection always, except when max cached connection=1.\n  Even though these, even though an Mbox is still IDLE status at a cached connection after\n  disabling \"Use IDLE command\" setting, or even though an Mbox is still selected at a cached\n  connection after some actions, write useless comment to a bug.\n  Note:\n  \"go Work Offline\" step of operations which is written in this bug is for;\n     Force close of all cached connections, in order to force Tb to do \"open connection, login,\n     select Inbox(and other Mbox), uid 1:* fetch (flags)\" again after \"go Work Online\".\n  \"disabling CONDSTORE support\" is for;\n     Force Tb to use \"uid 1:* fetch (flags)\" instead of \"uid fetch 1:* (flags) (CHANGEDSINCE ...)\"\n     even when server supports CONDSTORE extension."}, {"count": 36, "id": 8537759, "attachment_id": null, "is_private": false, "raw_text": "Would it be possible to at least add some sort of menu option next to \"work offline\" ... like \"force sync\" or something?", "creation_time": "2014-03-15T03:41:29Z", "time": "2014-03-15T03:41:29Z", "creator": "nyet@nyet.org", "text": "Would it be possible to at least add some sort of menu option next to \"work offline\" ... like \"force sync\" or something?", "bug_id": 693204, "tags": [], "author": "nyet@nyet.org"}, {"author": "junktext@junktext.org", "creator": "junktext@junktext.org", "creation_time": "2014-03-16T20:40:47Z", "time": "2014-03-16T20:40:47Z", "is_private": false, "count": 37, "id": 8539962, "tags": [], "text": "*(In reply to plop from comment #34)\n\nYeah, plop, that's why I switched to the Evolution mail program instead.  It seems to work better with Gmail than Thunderbird.  I don't wish Thunderbird to die out or anything, but I probably won't go back any time soon.\n\nAlthough, I am slowly getting away from using Gmail as my main provider, since I do not really care for people having easy access to see all of my e-mail, not that I have anything to hide, but on principle.  I have just been using my website's e-mail service instead.", "bug_id": 693204, "raw_text": "*(In reply to plop from comment #34)\n\nYeah, plop, that's why I switched to the Evolution mail program instead.  It seems to work better with Gmail than Thunderbird.  I don't wish Thunderbird to die out or anything, but I probably won't go back any time soon.\n\nAlthough, I am slowly getting away from using Gmail as my main provider, since I do not really care for people having easy access to see all of my e-mail, not that I have anything to hide, but on principle.  I have just been using my website's e-mail service instead.", "attachment_id": null}, {"is_private": false, "count": 38, "id": 8730886, "creator": "mrubioroy@gmail.com", "creation_time": "2014-04-30T09:10:40Z", "time": "2014-04-30T09:10:40Z", "author": "mrubioroy@gmail.com", "attachment_id": null, "raw_text": "(In reply to WADA from comment #27)\n> -Problem of this bug;\n>   - Because server doesn't notify flag status change via IDLE,\n>     Tb can't know flag status change of mails at server Mbox via IDLE.\n>   - Tb's expectaion of \"server notifies flag status change via IDLE\" is never\n>     RFC violation, because \"flag status change notification via IDLE\" is\n> SHOULD.\n>   - Server's behavior is never RFC violation, because \"flag status change\n> notification \n>     via IDLE\" is SHOULD, is never MUST.\n>   - Unfortunately, some major IMAP servers don't notify flag status change\n> via IDLE,\n>     and Gmail IMAP is an example of such server.\n\nDear WADA,\n\nHow do other email clients deal with this situation on the commonly huge IMAP folders of Gmail ?\n\nI think this is a rather critical bug of Thunderbird. As you say, \"some major IMAP servers don't notify flag status change via IDLE\", and Tb should be able to deal with this situation OOB. If I understand correctly, the workaround only works well with small IMAP folders.\n\nAre there plans to fix this 2.5 years old bug ?\n\nRegards,", "tags": [], "text": "(In reply to WADA from comment #27)\n> -Problem of this bug;\n>   - Because server doesn't notify flag status change via IDLE,\n>     Tb can't know flag status change of mails at server Mbox via IDLE.\n>   - Tb's expectaion of \"server notifies flag status change via IDLE\" is never\n>     RFC violation, because \"flag status change notification via IDLE\" is\n> SHOULD.\n>   - Server's behavior is never RFC violation, because \"flag status change\n> notification \n>     via IDLE\" is SHOULD, is never MUST.\n>   - Unfortunately, some major IMAP servers don't notify flag status change\n> via IDLE,\n>     and Gmail IMAP is an example of such server.\n\nDear WADA,\n\nHow do other email clients deal with this situation on the commonly huge IMAP folders of Gmail ?\n\nI think this is a rather critical bug of Thunderbird. As you say, \"some major IMAP servers don't notify flag status change via IDLE\", and Tb should be able to deal with this situation OOB. If I understand correctly, the workaround only works well with small IMAP folders.\n\nAre there plans to fix this 2.5 years old bug ?\n\nRegards,", "bug_id": 693204}, {"author": "richard.munitz@gmail.com", "creator": "richard.munitz@gmail.com", "time": "2014-06-17T01:50:03Z", "creation_time": "2014-06-17T01:50:03Z", "is_private": false, "id": 8937975, "count": 39, "tags": [], "text": "Yes, I too have become exceedingly frustrated with this problem to the point of considering a move to another email client.   Given that a very painful manual workaround is available and has been for some time, it seems criminal that these workaround steps haven't been automated within Thunderbird.   Would it really be too resource intensive to simply perform these additional steps each time Thunderbird checks for mail updates?  Maybe that is what every other email client does and that is why they do not have this problem.  Thank you.", "bug_id": 693204, "raw_text": "Yes, I too have become exceedingly frustrated with this problem to the point of considering a move to another email client.   Given that a very painful manual workaround is available and has been for some time, it seems criminal that these workaround steps haven't been automated within Thunderbird.   Would it really be too resource intensive to simply perform these additional steps each time Thunderbird checks for mail updates?  Maybe that is what every other email client does and that is why they do not have this problem.  Thank you.", "attachment_id": null}, {"is_private": false, "count": 40, "id": 8938429, "creator": "m-wada@usa.com", "time": "2014-06-17T05:32:07Z", "creation_time": "2014-06-17T05:32:07Z", "author": "m-wada@usa.com", "attachment_id": null, "raw_text": "(In reply to Nye Liu from comment #36)\n> Would it be possible to at least add some sort of menu option next to \"work offline\" ... like \"force sync\" or something?\n\nA possible way.\n- Install \"Custom Buttons\" addon, add your own Toolbar Button labeled \"force sync\".\n- Put small JavaScript code like \"click Work Offline, reply if required, wait for a while, click Work Online, reply if required\".\n  /*CODE*/\n  // var MenuId=\"goOfflineMenuitem\" ;  // Firefox\n      var MenuId=\"goOfflineMenuItem\" ;  // Thunderbird \n      var Menu=document.getElementById(MenuId) ;\n      var Status=( \"true\" == Menu.getAttribute(\"checked\")  ) ; // atribute value is String\n      var OnCommand=Menu.getAttribute(\"oncommand\") ;\n      // oncommand=\"MailOfflineMgr.toggleOfflineStatus();\"\n      if( false == Status )\n      {\n          // go Work Offline\n          eval(OnCommand);\n          // do reply to dialog for download now,\n          // go back Work Online, and do reply to dialog for send unsent messages\n          // setTimeout(GoBackOnline,3*1000) ;\n       }\n      else if( true == Status )\n      {\n         // go back Work Online\n         eval(OnCommand);\n         // and do reply to dialog for send unsent messages\n      }\n\nThis version doesn't do automatic reply to confirmtion dialog, doesn't do Toogle Back to Work Online mode.\nSo, you have to do: 1. Click the button, 2. No to dialog(download now), 3. click button, 4. Cancel to dialog(send unsent mail).\nThis is merely an example of your own pretty small Addon by your own ToolBar button.\nid of menuitem, toolbarbutton , attributes of them etc. can be pretty easily known using DOM Inspector.", "tags": [], "text": "(In reply to Nye Liu from comment #36)\n> Would it be possible to at least add some sort of menu option next to \"work offline\" ... like \"force sync\" or something?\n\nA possible way.\n- Install \"Custom Buttons\" addon, add your own Toolbar Button labeled \"force sync\".\n- Put small JavaScript code like \"click Work Offline, reply if required, wait for a while, click Work Online, reply if required\".\n  /*CODE*/\n  // var MenuId=\"goOfflineMenuitem\" ;  // Firefox\n      var MenuId=\"goOfflineMenuItem\" ;  // Thunderbird \n      var Menu=document.getElementById(MenuId) ;\n      var Status=( \"true\" == Menu.getAttribute(\"checked\")  ) ; // atribute value is String\n      var OnCommand=Menu.getAttribute(\"oncommand\") ;\n      // oncommand=\"MailOfflineMgr.toggleOfflineStatus();\"\n      if( false == Status )\n      {\n          // go Work Offline\n          eval(OnCommand);\n          // do reply to dialog for download now,\n          // go back Work Online, and do reply to dialog for send unsent messages\n          // setTimeout(GoBackOnline,3*1000) ;\n       }\n      else if( true == Status )\n      {\n         // go back Work Online\n         eval(OnCommand);\n         // and do reply to dialog for send unsent messages\n      }\n\nThis version doesn't do automatic reply to confirmtion dialog, doesn't do Toogle Back to Work Online mode.\nSo, you have to do: 1. Click the button, 2. No to dialog(download now), 3. click button, 4. Cancel to dialog(send unsent mail).\nThis is merely an example of your own pretty small Addon by your own ToolBar button.\nid of menuitem, toolbarbutton , attributes of them etc. can be pretty easily known using DOM Inspector.", "bug_id": 693204}, {"text": "(In reply to Miguel from comment #38)\n(In reply to Rich from comment #39)\n\nIf this bug is so critical for you and so important for you, why you never do one of next yet?\n  (a) Use other than Thunderbird as your mailer which fully fulfills your pretty important requirement(s).\n  (b) Use other sophisticated and clever IMAP server who supports feature of SHOULD even if the feature is not MUST in RFC. \nWhy you never ask your IMAP server to support feature of SHOULD even if the feature is not MUST in RFC?\nEven if SHOULD != MUST in RFC, why expecting feature of SHOULD can be a critical bug of a software?\nSHOULD is sufficiently strong even if it's not MUST and SHOULD is weaker than MUST, isn't it?", "bug_id": 693204, "tags": [], "attachment_id": null, "raw_text": "(In reply to Miguel from comment #38)\n(In reply to Rich from comment #39)\n\nIf this bug is so critical for you and so important for you, why you never do one of next yet?\n  (a) Use other than Thunderbird as your mailer which fully fulfills your pretty important requirement(s).\n  (b) Use other sophisticated and clever IMAP server who supports feature of SHOULD even if the feature is not MUST in RFC. \nWhy you never ask your IMAP server to support feature of SHOULD even if the feature is not MUST in RFC?\nEven if SHOULD != MUST in RFC, why expecting feature of SHOULD can be a critical bug of a software?\nSHOULD is sufficiently strong even if it's not MUST and SHOULD is weaker than MUST, isn't it?", "time": "2014-06-17T05:45:49Z", "creation_time": "2014-06-17T05:45:49Z", "creator": "m-wada@usa.com", "author": "m-wada@usa.com", "count": 41, "id": 8938446, "is_private": false}, {"creator": "_+bugzilla@ygoe.de", "time": "2014-06-17T07:07:47Z", "creation_time": "2014-06-17T07:07:47Z", "author": "_+bugzilla@ygoe.de", "is_private": false, "id": 8938635, "count": 42, "bug_id": 693204, "text": "(In reply to WADA from comment #40)\n> - Put small JavaScript code like \"click Work Offline, reply if required,\n> wait for a while, click Work Online, reply if required\".\n\nIn case you're not aware of it anymore, going offline and back online does not resolve the issue. At least for me. The only thing that does help is restarting Thunderbird, which I have to doo every few days when I deleted something either in the web mailer or my smartphone (K9 mail), with both work fine the other way around.\n\n(In reply to WADA from comment #41)\n>   (a) Use other than Thunderbird as your mailer which fully fulfills your\n> pretty important requirement(s).\n\nThunderbird is the closest, unfortunately.\n\n>   (b) Use other sophisticated and clever IMAP server who supports feature of\n> SHOULD even if the feature is not MUST in RFC. \n\nThis seems to be the Mozilla way of dealing with bugs: Blame it on the others, no matter how. While my comment may not be constructive, neither is yours. We're living in a real world that doesn't always work as designed.", "tags": [], "attachment_id": null, "raw_text": "(In reply to WADA from comment #40)\n> - Put small JavaScript code like \"click Work Offline, reply if required,\n> wait for a while, click Work Online, reply if required\".\n\nIn case you're not aware of it anymore, going offline and back online does not resolve the issue. At least for me. The only thing that does help is restarting Thunderbird, which I have to doo every few days when I deleted something either in the web mailer or my smartphone (K9 mail), with both work fine the other way around.\n\n(In reply to WADA from comment #41)\n>   (a) Use other than Thunderbird as your mailer which fully fulfills your\n> pretty important requirement(s).\n\nThunderbird is the closest, unfortunately.\n\n>   (b) Use other sophisticated and clever IMAP server who supports feature of\n> SHOULD even if the feature is not MUST in RFC. \n\nThis seems to be the Mozilla way of dealing with bugs: Blame it on the others, no matter how. While my comment may not be constructive, neither is yours. We're living in a real world that doesn't always work as designed."}, {"is_private": false, "id": 8938837, "count": 43, "author": "m-wada@usa.com", "creator": "m-wada@usa.com", "creation_time": "2014-06-17T08:24:58Z", "time": "2014-06-17T08:24:58Z", "raw_text": "(In reply to Yves Goergen from comment #42)\n> In case you're not aware of it anymore, going offline and back online does not resolve the issue. At least for me. \n> The only thing that does help is restarting Thunderbird, which I have to doo every few days (snip)\n\nFunny. It sounds that your Thunderbird is not standard one...\nIIUC, IIRC, after Go Work Offline, Tb closes all connections, and after Go back Work Online, Tb executes login sooner or later, and after login, Tb opens Inbox(and others if requested) for new mail check by Biff, or open Inbox (or an Mbox) when selected, and upon first select Inbox/Mbox at a cached connection, Tb always issues \"uid 1:* fetch Flags()\" unless CONDSTORE is used. This is confirmed many times by getting IMAP log.\nIf  \"uid 1:* fetch Flags()\" is used, Tb should know all flags of all mails in an Mbox.\nIf not, it usually means that your Thunderbird is not properly configured.\n\nHave you checked IMAP protocol level flow by yourself?\nDo you correctly disable CONDSTORE support as stated in this bug more than one time?\nOr if Inbox, did you do required \"click Inbox while other than Inbox, for example account, is selected at Folder Pane\"?\nBecause \"new mail check by Biff\" is not immediately invoked after going back to Work Online\"(invoked at next new mail check interval), \"time lag\" exists between \"going back to Work Online\" and \"first new mail check after going back to Work Online\".\n\n> Thunderbird is the closest, unfortunately.\nIt's sad. We will have to see complants by you, which surely won't help problem resolving,  many times in this bug....", "attachment_id": null, "tags": [], "bug_id": 693204, "text": "(In reply to Yves Goergen from comment #42)\n> In case you're not aware of it anymore, going offline and back online does not resolve the issue. At least for me. \n> The only thing that does help is restarting Thunderbird, which I have to doo every few days (snip)\n\nFunny. It sounds that your Thunderbird is not standard one...\nIIUC, IIRC, after Go Work Offline, Tb closes all connections, and after Go back Work Online, Tb executes login sooner or later, and after login, Tb opens Inbox(and others if requested) for new mail check by Biff, or open Inbox (or an Mbox) when selected, and upon first select Inbox/Mbox at a cached connection, Tb always issues \"uid 1:* fetch Flags()\" unless CONDSTORE is used. This is confirmed many times by getting IMAP log.\nIf  \"uid 1:* fetch Flags()\" is used, Tb should know all flags of all mails in an Mbox.\nIf not, it usually means that your Thunderbird is not properly configured.\n\nHave you checked IMAP protocol level flow by yourself?\nDo you correctly disable CONDSTORE support as stated in this bug more than one time?\nOr if Inbox, did you do required \"click Inbox while other than Inbox, for example account, is selected at Folder Pane\"?\nBecause \"new mail check by Biff\" is not immediately invoked after going back to Work Online\"(invoked at next new mail check interval), \"time lag\" exists between \"going back to Work Online\" and \"first new mail check after going back to Work Online\".\n\n> Thunderbird is the closest, unfortunately.\nIt's sad. We will have to see complants by you, which surely won't help problem resolving,  many times in this bug...."}, {"raw_text": "", "attachment_id": null, "tags": [], "bug_id": 693204, "text": "*** Bug 526359 has been marked as a duplicate of this bug. ***", "count": 44, "id": 8945531, "is_private": false, "author": "vseerror@lehigh.edu", "creation_time": "2014-06-18T11:36:26Z", "time": "2014-06-18T11:36:26Z", "creator": "vseerror@lehigh.edu"}, {"creation_time": "2014-09-08T15:24:12Z", "time": "2014-09-08T15:24:12Z", "creator": "vseerror@lehigh.edu", "author": "vseerror@lehigh.edu", "count": 45, "id": 9282344, "is_private": false, "tags": [], "bug_id": 693204, "text": "rsx11m, Nikolay, do you have anything to add?", "attachment_id": null, "raw_text": "rsx11m, Nikolay, do you have anything to add?"}, {"raw_text": "I don't use gmail+imap, but I've seen some issues with marking many years ago (these was never been consistent)", "attachment_id": null, "tags": [], "bug_id": 693204, "text": "I don't use gmail+imap, but I've seen some issues with marking many years ago (these was never been consistent)", "count": 46, "id": 9315360, "is_private": false, "author": "shopik@inblock.ru", "creation_time": "2014-09-16T08:00:45Z", "time": "2014-09-16T08:00:45Z", "creator": "shopik@inblock.ru"}, {"raw_text": "If I recall correctly, that's a case which the condstore feature is supposed to cover. However, since the MailNews implementation is broken (see bug 885220 and bug 912216) I wouldn't be surprised if it's an issue prompted by that. I don't see this for non-Gmail servers which are not using condstore, though changes in message status don't propagate immediately either.", "attachment_id": null, "text": "If I recall correctly, that's a case which the condstore feature is supposed to cover. However, since the MailNews implementation is broken (see bug 885220 and bug 912216) I wouldn't be surprised if it's an issue prompted by that. I don't see this for non-Gmail servers which are not using condstore, though changes in message status don't propagate immediately either.", "bug_id": 693204, "tags": [], "id": 9339063, "count": 47, "is_private": false, "author": "rsx11m.pub@gmail.com", "creation_time": "2014-09-21T20:18:51Z", "time": "2014-09-21T20:18:51Z", "creator": "rsx11m.pub@gmail.com"}, {"text": "*** Bug 1096022 has been marked as a duplicate of this bug. ***", "bug_id": 693204, "tags": [], "attachment_id": null, "raw_text": "", "creator": "m-wada@usa.com", "time": "2014-11-09T23:12:20Z", "creation_time": "2014-11-09T23:12:20Z", "author": "m-wada@usa.com", "is_private": false, "id": 9565581, "count": 48}, {"is_private": false, "id": 9800202, "count": 49, "creator": "rocketraman@gmail.com", "creation_time": "2015-01-15T17:47:09Z", "time": "2015-01-15T17:47:09Z", "author": "rocketraman@gmail.com", "attachment_id": null, "raw_text": "I've found that some extensions also cause problems with this. Two that I've found so far are:\n\n- ImportExportTools (seems to do lots of concurrent IMAP operations with Tbird, often resulting in \"Operation in progress\" messages)\n- Send Without Save(Copy Sent to Current has equivalent functionality and seems to be fine)\n\nOnce I disabled the above extensions, using a cyrus imapd 2.4 IMAP account that supports IDLE and CONDSTORE, Tbird changes from often requiring the Offline/Online trick, to usually updating immediately, sometimes requiring a folder change to see the updates, and occasionally requiring a Compact to see the updates. But as far as I have seen so far, Tbird now never requires Offline/Online to sync the folder, which is a huge improvement.\n\nDisabling CONDSTORE further improves matters and Tbird more often (always?) updates the folder immediately. Obviously that is related to the separate CONDSTORE issues though.", "tags": [], "text": "I've found that some extensions also cause problems with this. Two that I've found so far are:\n\n- ImportExportTools (seems to do lots of concurrent IMAP operations with Tbird, often resulting in \"Operation in progress\" messages)\n- Send Without Save(Copy Sent to Current has equivalent functionality and seems to be fine)\n\nOnce I disabled the above extensions, using a cyrus imapd 2.4 IMAP account that supports IDLE and CONDSTORE, Tbird changes from often requiring the Offline/Online trick, to usually updating immediately, sometimes requiring a folder change to see the updates, and occasionally requiring a Compact to see the updates. But as far as I have seen so far, Tbird now never requires Offline/Online to sync the folder, which is a huge improvement.\n\nDisabling CONDSTORE further improves matters and Tbird more often (always?) updates the folder immediately. Obviously that is related to the separate CONDSTORE issues though.", "bug_id": 693204}, {"id": 9809569, "count": 50, "is_private": false, "creation_time": "2015-01-18T07:27:43Z", "time": "2015-01-18T07:27:43Z", "creator": "alister.hood@gmail.com", "author": "alister.hood@gmail.com", "attachment_id": null, "raw_text": "(In reply to WADA from comment #43)\n> (In reply to Yves Goergen from comment #42)\n> > In case you're not aware of it anymore, going offline and back online does not resolve the issue. At least for me. \n> > The only thing that does help is restarting Thunderbird, which I have to doo every few days (snip)\n> \n> Funny. It sounds that your Thunderbird is not standard one...\n\nI don't know about Thunderbird, but I see the same thing (going offline does not work, I have to restart) in \"standard\" Seamonkey, and have done through many versions of Seamonkey.  In Seamonkey it is actually more annoying, because you need to shutdown all Seamonkey windows (i.e. browser windows and everything, not just mail and news windows).", "text": "(In reply to WADA from comment #43)\n> (In reply to Yves Goergen from comment #42)\n> > In case you're not aware of it anymore, going offline and back online does not resolve the issue. At least for me. \n> > The only thing that does help is restarting Thunderbird, which I have to doo every few days (snip)\n> \n> Funny. It sounds that your Thunderbird is not standard one...\n\nI don't know about Thunderbird, but I see the same thing (going offline does not work, I have to restart) in \"standard\" Seamonkey, and have done through many versions of Seamonkey.  In Seamonkey it is actually more annoying, because you need to shutdown all Seamonkey windows (i.e. browser windows and everything, not just mail and news windows).", "bug_id": 693204, "tags": []}, {"tags": [], "text": "(In reply to alister.hood from comment #50)> \n> but I see the same thing (going offline does not work, I have to restart) in \"standard\" Seamonkey, (snip)\n\nIIUC, there is no difference between SeMonkey and Thunderbird, as for phenomeon of this bug.\n\n(a) As repeatedly written, after go Work Offline the go back Work Online, explicit folder open by new folder click is mandtory to force server access again.  When did  go Work Offline the go back Work Online, did youa ctually do it?\n      -  If Inbox is already selected at folder pane when \"go back Work Online\" is executed,\n          click account then click Inbox again at folder pane.\n(b) As repearedly written, Gmail IMAP started to enable CONDSTORE and Tb's CONDSTORE support is enaabled by default.\n      When CONDSTORe is used, Tb may not use \"uid fetch 1:* flags\" or \"uid fetch 1:* flags  CHANGEDSINCE nnnn\".\n      Tb may use \"uid fetch <HighestUID>:* flags\" or  \"uid fetch <HighestUID>:* flags  CHANGEDSINCE nnnn\".\n      As repearedly written, to force  \"uid fetch 1:* flags\" always  in recovery operation for this bug,\n      disbaling Tb's CONDSTORE support is needed for problem determination.\n      Did you properly disabled Tb's CONDSTORE support?\n      Read thru Bug 912216 and bug  885220, al repeatedly written.\n\nFurther, get IMAP log and check imap level flow by yourself, before adding comment like \"annoying ...\" which will never help activity for resolving problem.\nProblem of this bug is pretty simple.\n1. To know flag state change of already fetched mail of UID=NN<CurrentlyHighestUID, one of next is needed.\n    1-1. flag staae change notification for the UID=NN from server via unsol response to lIDLE for selected Mbox.\n            => Tb expects it, but maany IMAP servers including Gmail IMAP won't do this.\n    1-2. uid fetch NN flags at connection where the Mbox is selected.\n            => Tb uses \"uid fetch CurrentlyKnownHighestUID:* flags\" for new maail check of already selected Mbox.\n                  So, flag state change of UID=NN can not be known untill \"uid fetch 1:* flags\" is issued again for the Mbox.\n2. Recovery operation stated in this bug is simply \"a procedure to try to force uid fetch 1:* flags\".\n    2-a. Unless you explicitly click  Mbox,  connection with server for the Mox won't be opened immediately.\n            Without connection with imap server, any \"uid fetch ...\" won't be issued for the mbox by Tb.\n    2-b.  Even when connection for the Mbox is established and the Mbox is selected at connection,\n             Tb may not issue uid fetch 1:* flags\". Tb may use \"uid fetch HighestUID:* flags ...\".\n             Even if \"uid fetch 1:* ...\" is used by Tb, it may be \"uid fetch 1:* CHANGEDSINCE nnnn\"\n             where nnnn is too large(may be newer than MODSEQ for flag change of UID=NN).", "bug_id": 693204, "raw_text": "(In reply to alister.hood from comment #50)> \n> but I see the same thing (going offline does not work, I have to restart) in \"standard\" Seamonkey, (snip)\n\nIIUC, there is no difference between SeMonkey and Thunderbird, as for phenomeon of this bug.\n\n(a) As repeatedly written, after go Work Offline the go back Work Online, explicit folder open by new folder click is mandtory to force server access again.  When did  go Work Offline the go back Work Online, did youa ctually do it?\n      -  If Inbox is already selected at folder pane when \"go back Work Online\" is executed,\n          click account then click Inbox again at folder pane.\n(b) As repearedly written, Gmail IMAP started to enable CONDSTORE and Tb's CONDSTORE support is enaabled by default.\n      When CONDSTORe is used, Tb may not use \"uid fetch 1:* flags\" or \"uid fetch 1:* flags  CHANGEDSINCE nnnn\".\n      Tb may use \"uid fetch <HighestUID>:* flags\" or  \"uid fetch <HighestUID>:* flags  CHANGEDSINCE nnnn\".\n      As repearedly written, to force  \"uid fetch 1:* flags\" always  in recovery operation for this bug,\n      disbaling Tb's CONDSTORE support is needed for problem determination.\n      Did you properly disabled Tb's CONDSTORE support?\n      Read thru Bug 912216 and bug  885220, al repeatedly written.\n\nFurther, get IMAP log and check imap level flow by yourself, before adding comment like \"annoying ...\" which will never help activity for resolving problem.\nProblem of this bug is pretty simple.\n1. To know flag state change of already fetched mail of UID=NN<CurrentlyHighestUID, one of next is needed.\n    1-1. flag staae change notification for the UID=NN from server via unsol response to lIDLE for selected Mbox.\n            => Tb expects it, but maany IMAP servers including Gmail IMAP won't do this.\n    1-2. uid fetch NN flags at connection where the Mbox is selected.\n            => Tb uses \"uid fetch CurrentlyKnownHighestUID:* flags\" for new maail check of already selected Mbox.\n                  So, flag state change of UID=NN can not be known untill \"uid fetch 1:* flags\" is issued again for the Mbox.\n2. Recovery operation stated in this bug is simply \"a procedure to try to force uid fetch 1:* flags\".\n    2-a. Unless you explicitly click  Mbox,  connection with server for the Mox won't be opened immediately.\n            Without connection with imap server, any \"uid fetch ...\" won't be issued for the mbox by Tb.\n    2-b.  Even when connection for the Mbox is established and the Mbox is selected at connection,\n             Tb may not issue uid fetch 1:* flags\". Tb may use \"uid fetch HighestUID:* flags ...\".\n             Even if \"uid fetch 1:* ...\" is used by Tb, it may be \"uid fetch 1:* CHANGEDSINCE nnnn\"\n             where nnnn is too large(may be newer than MODSEQ for flag change of UID=NN).", "attachment_id": null, "author": "m-wada@usa.com", "creator": "m-wada@usa.com", "creation_time": "2015-01-18T10:18:13Z", "time": "2015-01-18T10:18:13Z", "is_private": false, "id": 9809630, "count": 51}, {"bug_id": 693204, "text": "(In reply to WADA from comment #51)\n...\n> (a) As repeatedly written, after go Work Offline the go back Work Online,\n> explicit folder open by new folder click is mandtory to force server access\n> again.  When did  go Work Offline the go back Work Online, did youa ctually\n> do it?\n\nYes, did that.\n\n>       -  If Inbox is already selected at folder pane when \"go back Work\n> Online\" is executed,\n>           click account then click Inbox again at folder pane.\n\nDid that too.\n\n> (b) As repearedly written, Gmail IMAP started to enable CONDSTORE and Tb's\n> CONDSTORE support is enaabled by default.\n...\n>       Did you properly disabled Tb's CONDSTORE support?\n>       Read thru Bug 912216 and bug  885220, al repeatedly written.\n\nWell, I disabled it in mail.server.default.use_condstore - there is no ...use_condstore setting for the account, so I guess Seamonkey doesn't implement it per account - or should I just create the setting?\n\n> Further, get IMAP log and check imap level flow by yourself\n\nUnfortunately that'll have to wait for another day.\nBut testing a few more times I discovered that it actually does work, just only every second time - i.e. I have to do \"offline>online>other folder>back to folder>offline>online>other folder>back to folder\" before it updates.", "tags": [], "attachment_id": null, "raw_text": "(In reply to WADA from comment #51)\n...\n> (a) As repeatedly written, after go Work Offline the go back Work Online,\n> explicit folder open by new folder click is mandtory to force server access\n> again.  When did  go Work Offline the go back Work Online, did youa ctually\n> do it?\n\nYes, did that.\n\n>       -  If Inbox is already selected at folder pane when \"go back Work\n> Online\" is executed,\n>           click account then click Inbox again at folder pane.\n\nDid that too.\n\n> (b) As repearedly written, Gmail IMAP started to enable CONDSTORE and Tb's\n> CONDSTORE support is enaabled by default.\n...\n>       Did you properly disabled Tb's CONDSTORE support?\n>       Read thru Bug 912216 and bug  885220, al repeatedly written.\n\nWell, I disabled it in mail.server.default.use_condstore - there is no ...use_condstore setting for the account, so I guess Seamonkey doesn't implement it per account - or should I just create the setting?\n\n> Further, get IMAP log and check imap level flow by yourself\n\nUnfortunately that'll have to wait for another day.\nBut testing a few more times I discovered that it actually does work, just only every second time - i.e. I have to do \"offline>online>other folder>back to folder>offline>online>other folder>back to folder\" before it updates.", "creation_time": "2015-01-18T11:14:00Z", "time": "2015-01-18T11:14:00Z", "creator": "alister.hood@gmail.com", "author": "alister.hood@gmail.com", "id": 9809652, "count": 52, "is_private": false}, {"time": "2015-01-18T19:12:09Z", "creation_time": "2015-01-18T19:12:09Z", "creator": "rsx11m.pub@gmail.com", "text": "(In reply to alister.hood from comment #52)\n> Well, I disabled it in mail.server.default.use_condstore - there is no\n> ...use_condstore setting for the account, so I guess Seamonkey doesn't\n> implement it per account - or should I just create the setting?\n\nThe implementation is identical between SeaMonkey and Thunderbird. If there is no server#-specific setting mail.server.id#.use_condstore then mail.server.default.use_condstore is used. Thus, setting mail.server.default.use_condstore to false should disable it for all configured IMAP servers unless specific preference settings for that server override it.", "bug_id": 693204, "tags": [], "author": "rsx11m.pub@gmail.com", "count": 53, "id": 9810109, "attachment_id": null, "is_private": false, "raw_text": "(In reply to alister.hood from comment #52)\n> Well, I disabled it in mail.server.default.use_condstore - there is no\n> ...use_condstore setting for the account, so I guess Seamonkey doesn't\n> implement it per account - or should I just create the setting?\n\nThe implementation is identical between SeaMonkey and Thunderbird. If there is no server#-specific setting mail.server.id#.use_condstore then mail.server.default.use_condstore is used. Thus, setting mail.server.default.use_condstore to false should disable it for all configured IMAP servers unless specific preference settings for that server override it."}, {"raw_text": "(In reply to alister.hood from comment #52)\n> But testing a few more times I discovered that it actually does work, just only every second time\n> - i.e. I have to do \"offline>online>other folder>back to folder>offline>online>other folder>back to folder\" before it updates.\n\nIt's perhaps \"connection loss during IDLE\".\n  IDLE -> Sm/Tb(and server) enters \"receive state\" -> Work Offline -> Tb closes server connection(Socket, TCP/IP level)\n  Tb perhaps closes IMAP connection. But for SeaMonkey, this is perhaps  \"connection loss during IDLE\".\n  By click of Inbox again, Sm tries to send DONE(enters Send mode)\n  -> because TCP session is already closed by Sm, nothing is sent to server, and Sm waits for timeout.\n  -> go Work Offline/Online again -> send of DONE fails and imap connection is normally closed in Sm\n  -> by next click of Inbox, TCP session is established and imap connection is established\nIt seems that error detection code is different between SeaMonkey and Thunderbird.\n\n> so I guess Seamonkey doesn't implement it per account - or should I just create the setting?\n\nThere is no need of guessing. \"CONDSTORE is aactually used or not\" is always clearly known pretty easily by simply looking imap log.", "attachment_id": null, "text": "(In reply to alister.hood from comment #52)\n> But testing a few more times I discovered that it actually does work, just only every second time\n> - i.e. I have to do \"offline>online>other folder>back to folder>offline>online>other folder>back to folder\" before it updates.\n\nIt's perhaps \"connection loss during IDLE\".\n  IDLE -> Sm/Tb(and server) enters \"receive state\" -> Work Offline -> Tb closes server connection(Socket, TCP/IP level)\n  Tb perhaps closes IMAP connection. But for SeaMonkey, this is perhaps  \"connection loss during IDLE\".\n  By click of Inbox again, Sm tries to send DONE(enters Send mode)\n  -> because TCP session is already closed by Sm, nothing is sent to server, and Sm waits for timeout.\n  -> go Work Offline/Online again -> send of DONE fails and imap connection is normally closed in Sm\n  -> by next click of Inbox, TCP session is established and imap connection is established\nIt seems that error detection code is different between SeaMonkey and Thunderbird.\n\n> so I guess Seamonkey doesn't implement it per account - or should I just create the setting?\n\nThere is no need of guessing. \"CONDSTORE is aactually used or not\" is always clearly known pretty easily by simply looking imap log.", "bug_id": 693204, "tags": [], "id": 9810895, "count": 54, "is_private": false, "author": "m-wada@usa.com", "creation_time": "2015-01-19T04:36:14Z", "time": "2015-01-19T04:36:14Z", "creator": "m-wada@usa.com"}, {"raw_text": "FYI #1.\nIf CONDSTORE support of Tb is enabled(mail.server.default.use_condstore=true, or mail.server.server#.use_condstore=true), and if imap server supports CONDSTORE, bug 1123617 occurs even after go Work Offline/go Work Online again.\ni.e. \"Workaroudof this bug/recovery operaation of this bug\",  go Work Offline/go Work Online again/explicitly open Mbox again, won't work due to bug 1123617 .\nFYI #2.\nIf bug 1123617 will be fixed, this bug will be resolved by utilizing CONDSTORE, because change required for that bug is \"uid fetch 1:* Flags (CHANGEDSINCE LargestKnowMODSEQ) upon each new mail check\".", "attachment_id": null, "text": "FYI #1.\nIf CONDSTORE support of Tb is enabled(mail.server.default.use_condstore=true, or mail.server.server#.use_condstore=true), and if imap server supports CONDSTORE, bug 1123617 occurs even after go Work Offline/go Work Online again.\ni.e. \"Workaroudof this bug/recovery operaation of this bug\",  go Work Offline/go Work Online again/explicitly open Mbox again, won't work due to bug 1123617 .\nFYI #2.\nIf bug 1123617 will be fixed, this bug will be resolved by utilizing CONDSTORE, because change required for that bug is \"uid fetch 1:* Flags (CHANGEDSINCE LargestKnowMODSEQ) upon each new mail check\".", "bug_id": 693204, "tags": [], "is_private": false, "count": 55, "id": 9820304, "author": "m-wada@usa.com", "creator": "m-wada@usa.com", "creation_time": "2015-01-21T00:04:57Z", "time": "2015-01-21T00:04:57Z"}, {"author": "m-wada@usa.com", "creator": "m-wada@usa.com", "creation_time": "2015-01-23T00:40:17Z", "time": "2015-01-23T00:40:17Z", "is_private": false, "count": 56, "id": 9831918, "text": "FYI.\nI've opened Bug 1124924.\nBug 1124924 - If CONDSTORE is usable, use \"uid fetch 1:* flags (CHANGDEDSINCE modseq)\" for new mail check by Biff instead of \"uid fetch NextUID:* flags\", in order to resolve problem like Bug 693204, Bug 517461", "bug_id": 693204, "tags": [], "raw_text": "FYI.\nI've opened Bug 1124924.\nBug 1124924 - If CONDSTORE is usable, use \"uid fetch 1:* flags (CHANGDEDSINCE modseq)\" for new mail check by Biff instead of \"uid fetch NextUID:* flags\", in order to resolve problem like Bug 693204, Bug 517461", "attachment_id": null}, {"attachment_id": null, "raw_text": "All this discussion is very well and good, but how do we work around this problem?\n\nI'm deleting e-mails from Gmail on my iPhone and still seeing them hours later in Thunderbird.\n\nWork Offline > Work Online > Click another folder > Click Inbox seems to force resynch.\n\nI'd really prefer not to do this by hand every hour.\n\nWhat is the prescribed fix / workaround?", "bug_id": 693204, "text": "All this discussion is very well and good, but how do we work around this problem?\n\nI'm deleting e-mails from Gmail on my iPhone and still seeing them hours later in Thunderbird.\n\nWork Offline > Work Online > Click another folder > Click Inbox seems to force resynch.\n\nI'd really prefer not to do this by hand every hour.\n\nWhat is the prescribed fix / workaround?", "tags": [], "is_private": false, "count": 57, "id": 9965889, "creator": "guyette@alum.wpi.edu", "time": "2015-02-27T07:07:05Z", "creation_time": "2015-02-27T07:07:05Z", "author": "guyette@alum.wpi.edu"}, {"tags": [], "text": "(In reply to Tom Guyette from comment #57)\n\nDo you read about a workaround of \"max cached connection=1\"?\n\nIf shared with iPhone, I believe mail volume, number of mboxes, frequency of new mails, new mail volue, are not so large, \nIf so, \"max cached connection=1\", \"disable IDLE\", \"adequate new mail check intervlal\", can be used.\nNeedless to say, \"disabling CONSTORE\" is mandatory.\n1. Click other than Inbox(call FolderX) -> SELECT FolderX -> Inbox is unselected at only one connection\n2. Soner or later, new mail check occurs -> SELECT Inbox -> Inbox is selected at  only one connection -> uid fetch 1:* Flags\n3. When you need to snch flsag state with Gmail IMAP and iPhone, click FolderX, then click Inbox\n     SELECT FolderX -> SELECT Inbox -> uid fetch 1:* Flags for Inbox is issued.\n     As I repeadly staated, workaround explained in this bug is to force this \"uid fetch 1:* Flags\" for Inbox.\n\nAnother way: Use Inbox as mail drop, mail tray. Don't use Inbox as mail repository for log time.\n                       Becuase of IMAP many Mboxes are lready supported. There is no need of folder named \"Inbox\" for mail viewing.\n\nBecause Inbox is mbox where new mails arrives, Tb always keeps Inbox \"selected state\" at a cached connection for Inbox only, and kepp Inbox open.\nThis is a reason why \"uid fetch 1:* Flags\" is not issued for Inbox while Tb is running.\nIf other folder than Inbox and Trash, connection for a FolderX is stolen by other FolderY when other FolderY is opened.\nSo, \"max cached connections = 3 with folder switch of some folders someties\" usually forces \"uid fetch 1:* Flags\" of FolderX, FolderY.\n\nWhy no problem in iPhone :\n   Because of small/mobile device, connection is not kept for long time, and number of connections is usually one..\n   Upon mail reading, login, SELECT Inbox, \"uid fetch 1:* Flags\" is executed.", "bug_id": 693204, "attachment_id": null, "raw_text": "(In reply to Tom Guyette from comment #57)\n\nDo you read about a workaround of \"max cached connection=1\"?\n\nIf shared with iPhone, I believe mail volume, number of mboxes, frequency of new mails, new mail volue, are not so large, \nIf so, \"max cached connection=1\", \"disable IDLE\", \"adequate new mail check intervlal\", can be used.\nNeedless to say, \"disabling CONSTORE\" is mandatory.\n1. Click other than Inbox(call FolderX) -> SELECT FolderX -> Inbox is unselected at only one connection\n2. Soner or later, new mail check occurs -> SELECT Inbox -> Inbox is selected at  only one connection -> uid fetch 1:* Flags\n3. When you need to snch flsag state with Gmail IMAP and iPhone, click FolderX, then click Inbox\n     SELECT FolderX -> SELECT Inbox -> uid fetch 1:* Flags for Inbox is issued.\n     As I repeadly staated, workaround explained in this bug is to force this \"uid fetch 1:* Flags\" for Inbox.\n\nAnother way: Use Inbox as mail drop, mail tray. Don't use Inbox as mail repository for log time.\n                       Becuase of IMAP many Mboxes are lready supported. There is no need of folder named \"Inbox\" for mail viewing.\n\nBecause Inbox is mbox where new mails arrives, Tb always keeps Inbox \"selected state\" at a cached connection for Inbox only, and kepp Inbox open.\nThis is a reason why \"uid fetch 1:* Flags\" is not issued for Inbox while Tb is running.\nIf other folder than Inbox and Trash, connection for a FolderX is stolen by other FolderY when other FolderY is opened.\nSo, \"max cached connections = 3 with folder switch of some folders someties\" usually forces \"uid fetch 1:* Flags\" of FolderX, FolderY.\n\nWhy no problem in iPhone :\n   Because of small/mobile device, connection is not kept for long time, and number of connections is usually one..\n   Upon mail reading, login, SELECT Inbox, \"uid fetch 1:* Flags\" is executed.", "creator": "m-wada@usa.com", "creation_time": "2015-02-27T07:46:32Z", "time": "2015-02-27T07:46:32Z", "author": "m-wada@usa.com", "is_private": false, "count": 58, "id": 9965944}, {"attachment_id": null, "raw_text": "Not sure what smartphones you have there but I have a permanent IDLE connection from mine, as on the desktop with Thunderbird. If disabling IDLE in Thunderbird is part of the workaround, then I think IDLE implementation is the problem. I'm not using IDLE for fun, I want to see new messages as they arrive. That's how modern event-driven systems work. Polling is from the 90s.\n\nBut since nobody was able to even locate the problem as of today, and given the open secret that Thunderbird is merely in maintenance mode for quite some time, I don't believe anybody is able to fix this issue (and others) without rewriting it all. If only I had more time...", "tags": [], "text": "Not sure what smartphones you have there but I have a permanent IDLE connection from mine, as on the desktop with Thunderbird. If disabling IDLE in Thunderbird is part of the workaround, then I think IDLE implementation is the problem. I'm not using IDLE for fun, I want to see new messages as they arrive. That's how modern event-driven systems work. Polling is from the 90s.\n\nBut since nobody was able to even locate the problem as of today, and given the open secret that Thunderbird is merely in maintenance mode for quite some time, I don't believe anybody is able to fix this issue (and others) without rewriting it all. If only I had more time...", "bug_id": 693204, "id": 9965949, "count": 59, "is_private": false, "time": "2015-02-27T07:53:26Z", "creation_time": "2015-02-27T07:53:26Z", "creator": "_+bugzilla@ygoe.de", "author": "_+bugzilla@ygoe.de"}, {"author": "m-wada@usa.com", "creation_time": "2015-02-27T08:30:33Z", "time": "2015-02-27T08:30:33Z", "creator": "m-wada@usa.com", "id": 9965983, "count": 60, "is_private": false, "tags": [], "text": "(In reply to Yves Goergen from comment #59)\n> Not sure what smartphones you have there but I have a permanent IDLE connection from mine,\n> as on the desktop with Thunderbird. If disabling IDLE in Thunderbird is part of the workaround, then I think IDLE implementation is the problem. \n> I'm not using IDLE for fun, I want to see new messages as  they arrive. That's how modern event-driven systems work. Polling is from the 90s\n\nDo you understand workaround of \"max cached connection=1\" and understaand IDLE?\nIf \"max cached connection\"=1, and if \"other than Inbox, call FolderX\" is selected at the only one connection, IDLE is effective only for FolderX. If Inbox is de-selectied at yhe only one cached connection, IDLE can do nothing on Inbox. If workround of \"max cached connection\"=1 is used, \"IDLE works on Inbox sometime but IDLE won't work on Injbox other times\" is pretty confusing, and it may produce useless bug open at B.M.O.\n\n> I don't believe anybody is able to fix this issue (and others) without rewriting it all. If only I had more time.\n\nYou are absolutely free to believe anything.\n\nHave you read and understood all bugs pointed in Bug 912216?\nBecause Gmail IMAP started to support CONDSTOREl last year, \"solution of this bug utilizing CONDSTORE\" is possible. As known by bugs pointed in Bug 912216, code change needed for the solution is not so huge. Rather, relatively small change than we thought.\nNeeedless to say, as known by Bug 912216, there is problem in current CONDSTORE support in Tb, so it should be resolved.\nAnd, for better solution, QRESYNC support by both Gmal IMAP and Tb is needed.", "bug_id": 693204, "raw_text": "(In reply to Yves Goergen from comment #59)\n> Not sure what smartphones you have there but I have a permanent IDLE connection from mine,\n> as on the desktop with Thunderbird. If disabling IDLE in Thunderbird is part of the workaround, then I think IDLE implementation is the problem. \n> I'm not using IDLE for fun, I want to see new messages as  they arrive. That's how modern event-driven systems work. Polling is from the 90s\n\nDo you understand workaround of \"max cached connection=1\" and understaand IDLE?\nIf \"max cached connection\"=1, and if \"other than Inbox, call FolderX\" is selected at the only one connection, IDLE is effective only for FolderX. If Inbox is de-selectied at yhe only one cached connection, IDLE can do nothing on Inbox. If workround of \"max cached connection\"=1 is used, \"IDLE works on Inbox sometime but IDLE won't work on Injbox other times\" is pretty confusing, and it may produce useless bug open at B.M.O.\n\n> I don't believe anybody is able to fix this issue (and others) without rewriting it all. If only I had more time.\n\nYou are absolutely free to believe anything.\n\nHave you read and understood all bugs pointed in Bug 912216?\nBecause Gmail IMAP started to support CONDSTOREl last year, \"solution of this bug utilizing CONDSTORE\" is possible. As known by bugs pointed in Bug 912216, code change needed for the solution is not so huge. Rather, relatively small change than we thought.\nNeeedless to say, as known by Bug 912216, there is problem in current CONDSTORE support in Tb, so it should be resolved.\nAnd, for better solution, QRESYNC support by both Gmal IMAP and Tb is needed.", "attachment_id": null}, {"count": 61, "id": 9969758, "is_private": false, "creation_time": "2015-02-28T02:48:54Z", "time": "2015-02-28T02:48:54Z", "creator": "guyette@alum.wpi.edu", "author": "guyette@alum.wpi.edu", "attachment_id": null, "raw_text": "(In reply to WADA from comment #58)\n> (In reply to Tom Guyette from comment #57)\n> Do you read about a workaround of \"max cached connection=1\"?\n\nThanks WADA.  I read the whole thread, after reading another long thread that was closed as a duplicate of this one, so by the time I got here I was very tired and just wanted deleted messages to go away.\n\nMax cached connections was the only part in all that reading that I understood, so I have max connections set to 1.  It slows down my client a bit, but I can accept that.\n\n> If so, \"max cached connection=1\", \"disable IDLE\", \"adequate new mail check intervlal\", can be used.\n\nI didn't understand what \"disable IDLE\" was until I started writing the proposed steps below.  I still don't understand what \"adequate new mail check interval\" means.  Bear in mind, I don't understand the client as a developer, I understand it as a casual user, so I need click-by-click, press-by-press, key-by-key instructions.  I suspect most other users who would come across this thread would need that too, and ideally it would be pinned to the top of the bug.  I've made an attempt at documenting the prescribed workaround below.\n\n> Needless to say, \"disabling CONSTORE\" is mandatory.\n\nI don't understand what that means, so it's not included in the steps below.\n\n> 1. Click other than Inbox(call FolderX) -> SELECT FolderX -> Inbox is\n> unselected at only one connection\n> 2. Soner or later, new mail check occurs [...]\n\nI did an experiment and I believe \"sooner or later\" can be replaced with \"Restart Thunderbird.\"  This is my attempt at documenting the workaround step by step:  \n\nFIRST, RECONFIGURE YOUR ACCOUNT:\n1 - From the main Thunderbird screen, select \"Tools\" menu > \"Account Settings\" to launch the Account Settings window.\n2 - On the left side of the Account Settings window, select \"Server Settings\" under your Gmail account name to view the Server Settings page.\n3 - On the Server Settings page, press the \"Advanced...\" button to launch the Advanced Server Settings popup window.\n4 - Set \"Maximum number of server connections to cache\" to 1.\n5 - Deselect the checkbox for \"Use IDLE command if the server supports it.\"\n6 - Press the OK button to close the Advanced Server Settings window.\n7 - Press the OK button to close the Account Settings window.\n\nEVERY TIME YOU WANT TO REFRESH THE INBOX:\n1 - Select the \"Sent Mail\" folder (or any other subfolder under the affected account).\n2 - Close Thunderbird, including all mail viewing windows.\n3 - Start Thunderbird.\n4 - Select the \"Inbox\" folder of the affected account.  Thunderbird should completely refresh the Inbox.\n\n> [...] -> SELECT Inbox -> Inbox is\n> selected at  only one connection -> uid fetch 1:* Flags\n> 3. When you need to snch flsag state with Gmail IMAP and iPhone, click\n> FolderX, then click Inbox\n>      SELECT FolderX -> SELECT Inbox -> uid fetch 1:* Flags for Inbox is\n> issued.\n>      As I repeadly staated, workaround explained in this bug is to force\n> this \"uid fetch 1:* Flags\" for Inbox.\n> \n> Another way: Use Inbox as mail drop, mail tray. Don't use Inbox as mail\n> repository for log time.\n>                        Becuase of IMAP many Mboxes are lready supported.\n> There is no need of folder named \"Inbox\" for mail viewing.\n\nI disagree that there is no need, or that telling users not to use it is an acceptable workaround.  Every standard mail client I know of has a view called Inbox.  Thunderbird itself creates one below the Gmail account name in the folder view.  Clearly it must have an important intended function.\n\nWould it be possible to simply add a \"Refresh folder\" function to the \"Get Messages\" dropdown button that would perform a complete refresh of the current folder and Preferred Folder?  Better yet, add a Refresh button in the same row as Unread, Starred, Contact, Tags, and Attachment?", "text": "(In reply to WADA from comment #58)\n> (In reply to Tom Guyette from comment #57)\n> Do you read about a workaround of \"max cached connection=1\"?\n\nThanks WADA.  I read the whole thread, after reading another long thread that was closed as a duplicate of this one, so by the time I got here I was very tired and just wanted deleted messages to go away.\n\nMax cached connections was the only part in all that reading that I understood, so I have max connections set to 1.  It slows down my client a bit, but I can accept that.\n\n> If so, \"max cached connection=1\", \"disable IDLE\", \"adequate new mail check intervlal\", can be used.\n\nI didn't understand what \"disable IDLE\" was until I started writing the proposed steps below.  I still don't understand what \"adequate new mail check interval\" means.  Bear in mind, I don't understand the client as a developer, I understand it as a casual user, so I need click-by-click, press-by-press, key-by-key instructions.  I suspect most other users who would come across this thread would need that too, and ideally it would be pinned to the top of the bug.  I've made an attempt at documenting the prescribed workaround below.\n\n> Needless to say, \"disabling CONSTORE\" is mandatory.\n\nI don't understand what that means, so it's not included in the steps below.\n\n> 1. Click other than Inbox(call FolderX) -> SELECT FolderX -> Inbox is\n> unselected at only one connection\n> 2. Soner or later, new mail check occurs [...]\n\nI did an experiment and I believe \"sooner or later\" can be replaced with \"Restart Thunderbird.\"  This is my attempt at documenting the workaround step by step:  \n\nFIRST, RECONFIGURE YOUR ACCOUNT:\n1 - From the main Thunderbird screen, select \"Tools\" menu > \"Account Settings\" to launch the Account Settings window.\n2 - On the left side of the Account Settings window, select \"Server Settings\" under your Gmail account name to view the Server Settings page.\n3 - On the Server Settings page, press the \"Advanced...\" button to launch the Advanced Server Settings popup window.\n4 - Set \"Maximum number of server connections to cache\" to 1.\n5 - Deselect the checkbox for \"Use IDLE command if the server supports it.\"\n6 - Press the OK button to close the Advanced Server Settings window.\n7 - Press the OK button to close the Account Settings window.\n\nEVERY TIME YOU WANT TO REFRESH THE INBOX:\n1 - Select the \"Sent Mail\" folder (or any other subfolder under the affected account).\n2 - Close Thunderbird, including all mail viewing windows.\n3 - Start Thunderbird.\n4 - Select the \"Inbox\" folder of the affected account.  Thunderbird should completely refresh the Inbox.\n\n> [...] -> SELECT Inbox -> Inbox is\n> selected at  only one connection -> uid fetch 1:* Flags\n> 3. When you need to snch flsag state with Gmail IMAP and iPhone, click\n> FolderX, then click Inbox\n>      SELECT FolderX -> SELECT Inbox -> uid fetch 1:* Flags for Inbox is\n> issued.\n>      As I repeadly staated, workaround explained in this bug is to force\n> this \"uid fetch 1:* Flags\" for Inbox.\n> \n> Another way: Use Inbox as mail drop, mail tray. Don't use Inbox as mail\n> repository for log time.\n>                        Becuase of IMAP many Mboxes are lready supported.\n> There is no need of folder named \"Inbox\" for mail viewing.\n\nI disagree that there is no need, or that telling users not to use it is an acceptable workaround.  Every standard mail client I know of has a view called Inbox.  Thunderbird itself creates one below the Gmail account name in the folder view.  Clearly it must have an important intended function.\n\nWould it be possible to simply add a \"Refresh folder\" function to the \"Get Messages\" dropdown button that would perform a complete refresh of the current folder and Preferred Folder?  Better yet, add a Refresh button in the same row as Unread, Starred, Contact, Tags, and Attachment?", "bug_id": 693204, "tags": []}, {"raw_text": "(In reply to Tom Guyette from comment #61)\n> Would it be possible to simply add a \"Refresh folder\" function to the \"Get Messages\" dropdown button\n> that would perform a complete refresh of the current folder and Preferred Folder?\n\nTb already has button for \"Refresh folder from scratch\". It's called \"Repair Folder\" button :-)\n\n> Better yet, add a Refresh button in the same row as Unread, Starred, Contact, Tags, and Attachment?\n\nYou are right. \nThere is no way to intentionally close mail folder in Tb.There is no way to force de-select of Mbox at a connection.\nThere is no way to force \"uid fetch 1:* Flags\" to recover from this bug by simple/easy operation.\nPurpose of any workaround stated in this bug is  : force \"uid fetch 1:* Flags\" for Inbox.\n    Go Offline/Go Online : Force logoff -=> Tb has to do login, SELECT Inbox, uid fetch 1:* Flags\n    max cached connections=1 : FolderX steels connection from Inbox => When Inbox is accessed, Tb has to do SELECT Inbox, uid fetch 1:* Flags\nIf \"close/reopen folder\" like button/menu will be implemented, it's helpful for this bug.\nBut there is no need of such button in usual use. Button only for working around problem(in this case, in both Tb and Gmail) is not usually implemented.\n\nAbout IDLE setting  : Server Settings/Advanced\nAbout CONDSTORE : read Bug 912216, please.\nAbout \"adequate new mail check interval\" :\n   If \"a few new mails per an hour\", I believe \"Check new messages Every 1 minute\" is usually not mandatory.\n   If \"10000 new mails per an hour\", I believe \"Check new messages Every 1 minute\" is not needed(rather annoying), \n   because you can know about many many new mails upon each mail viewing. :-)", "attachment_id": null, "bug_id": 693204, "text": "(In reply to Tom Guyette from comment #61)\n> Would it be possible to simply add a \"Refresh folder\" function to the \"Get Messages\" dropdown button\n> that would perform a complete refresh of the current folder and Preferred Folder?\n\nTb already has button for \"Refresh folder from scratch\". It's called \"Repair Folder\" button :-)\n\n> Better yet, add a Refresh button in the same row as Unread, Starred, Contact, Tags, and Attachment?\n\nYou are right. \nThere is no way to intentionally close mail folder in Tb.There is no way to force de-select of Mbox at a connection.\nThere is no way to force \"uid fetch 1:* Flags\" to recover from this bug by simple/easy operation.\nPurpose of any workaround stated in this bug is  : force \"uid fetch 1:* Flags\" for Inbox.\n    Go Offline/Go Online : Force logoff -=> Tb has to do login, SELECT Inbox, uid fetch 1:* Flags\n    max cached connections=1 : FolderX steels connection from Inbox => When Inbox is accessed, Tb has to do SELECT Inbox, uid fetch 1:* Flags\nIf \"close/reopen folder\" like button/menu will be implemented, it's helpful for this bug.\nBut there is no need of such button in usual use. Button only for working around problem(in this case, in both Tb and Gmail) is not usually implemented.\n\nAbout IDLE setting  : Server Settings/Advanced\nAbout CONDSTORE : read Bug 912216, please.\nAbout \"adequate new mail check interval\" :\n   If \"a few new mails per an hour\", I believe \"Check new messages Every 1 minute\" is usually not mandatory.\n   If \"10000 new mails per an hour\", I believe \"Check new messages Every 1 minute\" is not needed(rather annoying), \n   because you can know about many many new mails upon each mail viewing. :-)", "tags": [], "id": 9969810, "count": 62, "is_private": false, "author": "m-wada@usa.com", "time": "2015-02-28T04:05:01Z", "creation_time": "2015-02-28T04:05:01Z", "creator": "m-wada@usa.com"}, {"author": "_+bugzilla@ygoe.de", "creator": "_+bugzilla@ygoe.de", "time": "2015-02-28T10:44:07Z", "creation_time": "2015-02-28T10:44:07Z", "is_private": false, "count": 63, "id": 9970173, "tags": [], "bug_id": 693204, "text": "(In reply to Tom Guyette from comment #61)\n> I did an experiment and I believe \"sooner or later\" can be replaced with\n> \"Restart Thunderbird.\"  This is my attempt at documenting the workaround\n> step by step:  \n\n> EVERY TIME YOU WANT TO REFRESH THE INBOX:\n\n> 2 - Close Thunderbird, including all mail viewing windows.\n> 3 - Start Thunderbird.\n\nIf I understood your headings, I can safely reduce all of your steps to the ones I left in my quotation. I see deleted mails almost every day in my primary mailbox which is not Gmail. I just need to restart Thunderbird and everything works nicely again. No other configuration is required for this to work. Still it's cumbersome to restart applications to repair them, it might as well crash every day. This really should not be necessary at all.", "raw_text": "(In reply to Tom Guyette from comment #61)\n> I did an experiment and I believe \"sooner or later\" can be replaced with\n> \"Restart Thunderbird.\"  This is my attempt at documenting the workaround\n> step by step:  \n\n> EVERY TIME YOU WANT TO REFRESH THE INBOX:\n\n> 2 - Close Thunderbird, including all mail viewing windows.\n> 3 - Start Thunderbird.\n\nIf I understood your headings, I can safely reduce all of your steps to the ones I left in my quotation. I see deleted mails almost every day in my primary mailbox which is not Gmail. I just need to restart Thunderbird and everything works nicely again. No other configuration is required for this to work. Still it's cumbersome to restart applications to repair them, it might as well crash every day. This really should not be necessary at all.", "attachment_id": null}, {"count": 64, "id": 10760065, "is_private": false, "author": "aaron.hastings11@gmail.com", "time": "2015-09-22T11:48:03Z", "creation_time": "2015-09-22T11:48:03Z", "creator": "aaron.hastings11@gmail.com", "raw_text": "Still seems to be an issue for me with Gmail. At least I assume this is the same issue. In my case, I filter all emails into folders (or \"labels\" as Gmail calls them) on the server. So all emails sent directly to *my* email address go to a folder/label called \"Me\".\n\n== Steps to reproduce ==\n1. Open Thunderbird.\n2. Open arbitrary email app on phone/other computer. Send email to Gmail account.\n\n== Expected results ==\nWithin seconds, Thunderbird displays the new mail in the \"Me\" folder, complete with a notification.\n\n== Actual results ==\n<nothing happens>\n\n== Completely manual \"workaround\" ==\nClick the \"Me\" folder. Thunderbird instantly displays the new message.\n\nI note that even clicking \"Get Messages\" doesn't pull down the new message. What the heck? Clicking the folder gets a new message from the server but clicking \"Get Messages\" doesn't?\n\nI have tried what I think is everything from this thread: disabled IDLE and changed max_cached_connections to 1. My CONDSTORE was actually \"false\" by default (Thunderbird 38.2.0 on OS X) so I left that as-is. I did a complete Exit of Thunderbird and restarted. No difference whatsoever.", "attachment_id": null, "bug_id": 693204, "text": "Still seems to be an issue for me with Gmail. At least I assume this is the same issue. In my case, I filter all emails into folders (or \"labels\" as Gmail calls them) on the server. So all emails sent directly to *my* email address go to a folder/label called \"Me\".\n\n== Steps to reproduce ==\n1. Open Thunderbird.\n2. Open arbitrary email app on phone/other computer. Send email to Gmail account.\n\n== Expected results ==\nWithin seconds, Thunderbird displays the new mail in the \"Me\" folder, complete with a notification.\n\n== Actual results ==\n<nothing happens>\n\n== Completely manual \"workaround\" ==\nClick the \"Me\" folder. Thunderbird instantly displays the new message.\n\nI note that even clicking \"Get Messages\" doesn't pull down the new message. What the heck? Clicking the folder gets a new message from the server but clicking \"Get Messages\" doesn't?\n\nI have tried what I think is everything from this thread: disabled IDLE and changed max_cached_connections to 1. My CONDSTORE was actually \"false\" by default (Thunderbird 38.2.0 on OS X) so I left that as-is. I did a complete Exit of Thunderbird and restarted. No difference whatsoever.", "tags": []}, {"raw_text": "", "attachment_id": null, "tags": [], "text": "*** Bug 1030044 has been marked as a duplicate of this bug. ***", "bug_id": 693204, "is_private": false, "count": 65, "id": 10970926, "author": "vseerror@lehigh.edu", "creator": "vseerror@lehigh.edu", "time": "2015-11-28T03:16:09Z", "creation_time": "2015-11-28T03:16:09Z"}, {"attachment_id": null, "raw_text": "", "tags": [], "text": "*** Bug 987626 has been marked as a duplicate of this bug. ***", "bug_id": 693204, "is_private": false, "id": 11271495, "count": 66, "creator": "vseerror@lehigh.edu", "creation_time": "2016-03-23T16:45:23Z", "time": "2016-03-23T16:45:23Z", "author": "vseerror@lehigh.edu"}, {"creator": "chealer@gmail.com", "time": "2016-07-18T01:44:17Z", "creation_time": "2016-07-18T01:44:17Z", "author": "chealer@gmail.com", "is_private": false, "id": 11553897, "count": 67, "tags": [], "text": "I have had 2 Thunderbird 45 instances for the same Gmail account open in the last weeks, viewing the All Mail folder while I was deleting mails from that folder. On several occasions, I noticed after deleting and/or tagging mails from one instance that the other instance wasn't updated. The deleted mails would still show, and would keep showing even after \"Get Messages\". There was no activity shown, and even Activity Manager showed nothing going on. If I remember correctly, this fixed between 1 and 5 minutes after going back to the outdated instance (Thunderbird would take the initiative to update, even though it had been asked before).\n\nIt seems like after a while Thunderbird goes in some kind of sleep mode, and has trouble waking up from that, but it hasn't happened often enough for me to explain the precise conditions needed for this to happen.\n\nI do not fully understand Summary and am unable to parse several comments, and as it would take an eternity to go through all other comments, I will assume that the symptoms I experienced are results of the bug reported here and add a vote.", "bug_id": 693204, "attachment_id": null, "raw_text": "I have had 2 Thunderbird 45 instances for the same Gmail account open in the last weeks, viewing the All Mail folder while I was deleting mails from that folder. On several occasions, I noticed after deleting and/or tagging mails from one instance that the other instance wasn't updated. The deleted mails would still show, and would keep showing even after \"Get Messages\". There was no activity shown, and even Activity Manager showed nothing going on. If I remember correctly, this fixed between 1 and 5 minutes after going back to the outdated instance (Thunderbird would take the initiative to update, even though it had been asked before).\n\nIt seems like after a while Thunderbird goes in some kind of sleep mode, and has trouble waking up from that, but it hasn't happened often enough for me to explain the precise conditions needed for this to happen.\n\nI do not fully understand Summary and am unable to parse several comments, and as it would take an eternity to go through all other comments, I will assume that the symptoms I experienced are results of the bug reported here and add a vote."}, {"creator": "vseerror@lehigh.edu", "creation_time": "2016-08-24T09:41:59Z", "time": "2016-08-24T09:41:59Z", "author": "vseerror@lehigh.edu", "is_private": false, "count": 68, "id": 11650783, "text": "*** Bug 945493 has been marked as a duplicate of this bug. ***", "bug_id": 693204, "tags": [], "attachment_id": null, "raw_text": ""}]}}}