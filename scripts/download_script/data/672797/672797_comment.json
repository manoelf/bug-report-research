{"comments": {}, "bugs": {"672797": {"comments": [{"author": "vulnerable.zappa@gmail.com", "time": "2011-07-20T14:28:24Z", "creation_time": "2011-07-20T14:28:24Z", "creator": "vulnerable.zappa@gmail.com", "id": 5601654, "count": 0, "is_private": false, "bug_id": 672797, "text": "This script produce many strange behaviours \ndepend on what you comment in __bx array \nFor example :\nIf you comment 'showModalDialog'\nand run script ,modalDialog will be open,close this modalDialog \nand wait for another modalDialog (2).\nWhen new  modalDialog will be opened\nclick right mouse button on urlbar of this modalDialog , \nfirefox will crash by \"memmory coruption\"\nIf you comment 'openDialog' \nscript will close browser when calling this.close();\nafter return form \"FindAndCall\" function\nIn others sytuations script can corrupt \"dialogbox\" like prompt,confirm,alert\n(this windows will be showed without strings)", "tags": [], "raw_text": "This script produce many strange behaviours \ndepend on what you comment in __bx array \nFor example :\nIf you comment 'showModalDialog'\nand run script ,modalDialog will be open,close this modalDialog \nand wait for another modalDialog (2).\nWhen new  modalDialog will be opened\nclick right mouse button on urlbar of this modalDialog , \nfirefox will crash by \"memmory coruption\"\nIf you comment 'openDialog' \nscript will close browser when calling this.close();\nafter return form \"FindAndCall\" function\nIn others sytuations script can corrupt \"dialogbox\" like prompt,confirm,alert\n(this windows will be showed without strings)", "attachment_id": null}, {"attachment_id": 547088, "raw_text": "", "tags": [], "bug_id": 672797, "text": "Created attachment 547088\nrepro", "count": 1, "id": 5601681, "is_private": false, "creation_time": "2011-07-20T14:36:53Z", "time": "2011-07-20T14:36:53Z", "creator": "vulnerable.zappa@gmail.com", "author": "vulnerable.zappa@gmail.com"}, {"is_private": false, "id": 5602473, "count": 2, "creator": "arno@renevier.net", "creation_time": "2011-07-20T19:20:39Z", "time": "2011-07-20T19:20:39Z", "author": "arno@renevier.net", "attachment_id": 547202, "raw_text": "Here is a reduced testcase to reproduce the close behaviour bug.\nYou should probably open a new bug for the showModalDialog crash bug.", "text": "Created attachment 547202\nreduced testcase for close problem\n\nHere is a reduced testcase to reproduce the close behaviour bug.\nYou should probably open a new bug for the showModalDialog crash bug.", "bug_id": 672797, "tags": []}, {"tags": [], "text": "I thing all this behaviours is a result of the same bug ;]\nbut ok i send \"showModalDialog\" as difrent bug", "bug_id": 672797, "raw_text": "I thing all this behaviours is a result of the same bug ;]\nbut ok i send \"showModalDialog\" as difrent bug", "attachment_id": null, "author": "vulnerable.zappa@gmail.com", "time": "2011-07-21T10:50:39Z", "creation_time": "2011-07-21T10:50:39Z", "creator": "vulnerable.zappa@gmail.com", "id": 5603880, "count": 3, "is_private": false}, {"tags": [], "bug_id": 672797, "text": "i set milestone again \nprobably i shouldn't\nsorry  \nmea culpa", "author": "vulnerable.zappa@gmail.com", "time": "2011-07-22T18:37:49Z", "creation_time": "2011-07-22T18:37:49Z", "creator": "vulnerable.zappa@gmail.com", "raw_text": "i set milestone again \nprobably i shouldn't\nsorry  \nmea culpa", "count": 4, "id": 5607649, "attachment_id": null, "is_private": false}, {"is_private": false, "count": 5, "id": 5611000, "creator": "acelists@atlas.sk", "creation_time": "2011-07-25T14:45:11Z", "time": "2011-07-25T14:45:11Z", "author": "acelists@atlas.sk", "attachment_id": null, "raw_text": "I can't reproduce on FF5, Win XP with the reduced testcase. It opens a new tab (redirected window) if I allow it in the popup blocker. It then shows an error, because the file whatever.html does not exist. That is correct. It should then close automatically? The whole browser? Doesn't happen for me. It just stays there.\nIs that the only tab/window you have open? Or does it also close other tabs and that is the problem?", "bug_id": 672797, "text": "I can't reproduce on FF5, Win XP with the reduced testcase. It opens a new tab (redirected window) if I allow it in the popup blocker. It then shows an error, because the file whatever.html does not exist. That is correct. It should then close automatically? The whole browser? Doesn't happen for me. It just stays there.\nIs that the only tab/window you have open? Or does it also close other tabs and that is the problem?", "tags": []}, {"author": "vulnerable.zappa@gmail.com", "creator": "vulnerable.zappa@gmail.com", "creation_time": "2011-07-26T20:26:06Z", "time": "2011-07-26T20:26:06Z", "is_private": false, "id": 5614819, "count": 6, "text": "Strange\nI test it couple of minutes ago\nin a fresh installation of firefox without any extensions (4 check if is depend on extensions)\nand all variats of repro closing whole browser \nindependently of how many tabs,windows is opened", "bug_id": 672797, "tags": [], "raw_text": "Strange\nI test it couple of minutes ago\nin a fresh installation of firefox without any extensions (4 check if is depend on extensions)\nand all variats of repro closing whole browser \nindependently of how many tabs,windows is opened", "attachment_id": null}, {"author": "vulnerable.zappa@gmail.com", "creator": "vulnerable.zappa@gmail.com", "creation_time": "2011-07-26T20:30:33Z", "time": "2011-07-26T20:30:33Z", "is_private": false, "count": 7, "id": 5614832, "bug_id": 672797, "text": "You can also use data: pseudourl as argument of window.open\nresult is the same (browser will be closed)", "tags": [], "raw_text": "You can also use data: pseudourl as argument of window.open\nresult is the same (browser will be closed)", "attachment_id": null}, {"is_private": false, "count": 8, "id": 5614875, "author": "acelists@atlas.sk", "creator": "acelists@atlas.sk", "time": "2011-07-26T20:45:27Z", "creation_time": "2011-07-26T20:45:27Z", "raw_text": "Ah ok, with no extensions and built-in pop-up blocker disabled I can reproduce it with Nightly8 on linux on the testcase in comment 2. If I enable pop-up blocker, the window is blocked. It can be allowed in the menu of the infobar. Then the window (tab) is opened but not closed. As comment 5.", "attachment_id": null, "text": "Ah ok, with no extensions and built-in pop-up blocker disabled I can reproduce it with Nightly8 on linux on the testcase in comment 2. If I enable pop-up blocker, the window is blocked. It can be allowed in the menu of the infobar. Then the window (tab) is opened but not closed. As comment 5.", "bug_id": 672797, "tags": []}, {"raw_text": "(In reply to comment #3)\n> I thing all this behaviours is a result of the same bug ;]\n> but ok i send \"showModalDialog\" as difrent bug\n\nCan you post the bug number you created for that?", "attachment_id": null, "text": "(In reply to comment #3)\n> I thing all this behaviours is a result of the same bug ;]\n> but ok i send \"showModalDialog\" as difrent bug\n\nCan you post the bug number you created for that?", "bug_id": 672797, "tags": [], "is_private": false, "id": 5614881, "count": 9, "author": "acelists@atlas.sk", "creator": "acelists@atlas.sk", "time": "2011-07-26T20:46:31Z", "creation_time": "2011-07-26T20:46:31Z"}, {"creation_time": "2011-07-26T21:05:55Z", "time": "2011-07-26T21:05:55Z", "creator": "vulnerable.zappa@gmail.com", "author": "vulnerable.zappa@gmail.com", "count": 10, "id": 5614942, "is_private": false, "text": "https://bugzilla.mozilla.org/show_bug.cgi?id=674032", "bug_id": 672797, "tags": [], "attachment_id": null, "raw_text": "https://bugzilla.mozilla.org/show_bug.cgi?id=674032"}, {"is_private": false, "id": 5636403, "count": 11, "creator": "acelists@atlas.sk", "time": "2011-08-05T19:01:51Z", "creation_time": "2011-08-05T19:01:51Z", "author": "acelists@atlas.sk", "attachment_id": null, "raw_text": "There is no crash log from this because the browser exits gracefully as if it is intentionally shut down.", "bug_id": 672797, "text": "There is no crash log from this because the browser exits gracefully as if it is intentionally shut down.", "tags": []}, {"is_private": false, "id": 5657237, "count": 12, "creator": "dholbert@mozilla.com", "time": "2011-08-16T16:22:29Z", "creation_time": "2011-08-16T16:22:29Z", "author": "dholbert@mozilla.com", "attachment_id": null, "raw_text": "BTW - from my local testing, this closes the *current browser window*, not the whole browser.  If you have multiple Firefox windows open, then only the window that has the testcase's tab will end up closing.\n\n(still a bug, just clarifying the current behavior)\n\nI can reproduce this in current nightly, and as far back (at least) as Firefox 3.0.  So, not a recent regression.\nMozilla/5.0 (X11; Linux x86_64; rv:8.0a1) Gecko/20110816 Firefox/8.0a1", "tags": [], "text": "BTW - from my local testing, this closes the *current browser window*, not the whole browser.  If you have multiple Firefox windows open, then only the window that has the testcase's tab will end up closing.\n\n(still a bug, just clarifying the current behavior)\n\nI can reproduce this in current nightly, and as far back (at least) as Firefox 3.0.  So, not a recent regression.\nMozilla/5.0 (X11; Linux x86_64; rv:8.0a1) Gecko/20110816 Firefox/8.0a1", "bug_id": 672797}, {"attachment_id": null, "raw_text": "Here's the relevant code that's being called by window.close: http://mxr.mozilla.org/mozilla-central/source/dom/base/nsGlobalWindow.cpp#6368 (nsGlobalWindow::Close)", "tags": [], "bug_id": 672797, "text": "Here's the relevant code that's being called by window.close: http://mxr.mozilla.org/mozilla-central/source/dom/base/nsGlobalWindow.cpp#6368 (nsGlobalWindow::Close)", "count": 13, "id": 5698928, "is_private": false, "creation_time": "2011-09-04T08:17:46Z", "time": "2011-09-04T08:17:46Z", "creator": "josh@joshmatthews.net", "author": "josh@joshmatthews.net"}, {"attachment_id": null, "raw_text": "Blake will have a look.", "tags": [], "bug_id": 672797, "text": "Blake will have a look.", "is_private": false, "id": 6597515, "count": 14, "creator": "jstenback+bmo@gmail.com", "creation_time": "2012-08-30T17:34:16Z", "time": "2012-08-30T17:34:16Z", "author": "jstenback+bmo@gmail.com"}, {"raw_text": "I actually looked into this a while ago, but haven't had a chance to write a patch (and it looks like I'm not going to have a chance to write it for a little bit). Here's what I found.\n\nA bit of background: Normally, window.close works by firing a DOMWindowClose event at the window. This event bubbles up where it is eventually handled by tabbrowser.xml, stops the event from bubbling, and runs logic to determine whether we should close a single tab or the\nentire window. If tabbrowser.xml doesn't stop the event, it bubbles up to the window and we close the window (note that the window knows nothing about tabs, so it won't warn if there are tabs open).\n\nNow, the testcase here fills up the C stack by recursing through eval and then calls window.close(). The event that we fire at ourselves is sync, and as we look for event handlers, we have to compile XBL. However, we're already so close to the end of the C stack that the compilation fails and we never compile the event handler for the DOMWindowClose event in tabbrowser.xml. This causes us to not handle the event at the proper level, closing the window instead of the tab.\n\nFor the JS stack, we have a two limits for how much space content is allowed to take up vs. chrome. Luke suggested that we add a similar split limit for the C stack as well and that seems like the right way to go for me as well.", "count": 15, "id": 6937472, "is_private": false, "attachment_id": null, "bug_id": 672797, "text": "I actually looked into this a while ago, but haven't had a chance to write a patch (and it looks like I'm not going to have a chance to write it for a little bit). Here's what I found.\n\nA bit of background: Normally, window.close works by firing a DOMWindowClose event at the window. This event bubbles up where it is eventually handled by tabbrowser.xml, stops the event from bubbling, and runs logic to determine whether we should close a single tab or the\nentire window. If tabbrowser.xml doesn't stop the event, it bubbles up to the window and we close the window (note that the window knows nothing about tabs, so it won't warn if there are tabs open).\n\nNow, the testcase here fills up the C stack by recursing through eval and then calls window.close(). The event that we fire at ourselves is sync, and as we look for event handlers, we have to compile XBL. However, we're already so close to the end of the C stack that the compilation fails and we never compile the event handler for the DOMWindowClose event in tabbrowser.xml. This causes us to not handle the event at the proper level, closing the window instead of the tab.\n\nFor the JS stack, we have a two limits for how much space content is allowed to take up vs. chrome. Luke suggested that we add a similar split limit for the C stack as well and that seems like the right way to go for me as well.", "tags": [], "author": "mrbkap@gmail.com", "creation_time": "2012-12-21T15:23:48Z", "time": "2012-12-21T15:23:48Z", "creator": "mrbkap@gmail.com"}, {"text": "Like we discussed in bug 732665?  That would fix a lot of my fuzz bugs as well :)", "bug_id": 672797, "tags": [], "attachment_id": null, "raw_text": "Like we discussed in bug 732665?  That would fix a lot of my fuzz bugs as well :)", "creator": "jruderman@gmail.com", "time": "2012-12-22T22:01:40Z", "creation_time": "2012-12-22T22:01:40Z", "author": "jruderman@gmail.com", "is_private": false, "count": 16, "id": 6941026}, {"tags": [], "text": "https://bugzilla.mozilla.org/show_bug.cgi?id=1472046\n\nMove all DOM bugs that haven\u2019t been updated in more than 3 years and has no one currently assigned to P5.\n\nIf you have questions, please contact :mdaly.", "bug_id": 672797, "raw_text": "https://bugzilla.mozilla.org/show_bug.cgi?id=1472046\n\nMove all DOM bugs that haven\u2019t been updated in more than 3 years and has no one currently assigned to P5.\n\nIf you have questions, please contact :mdaly.", "attachment_id": null, "author": "bug-husbandry-bot@mozilla.bugs", "creator": "bug-husbandry-bot@mozilla.bugs", "creation_time": "2018-06-29T04:48:03Z", "time": "2018-06-29T04:48:03Z", "is_private": false, "count": 17, "id": 13435652}]}}}