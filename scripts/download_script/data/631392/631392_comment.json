{"comments": {}, "bugs": {"631392": {"comments": [{"author": "christian@legnitto.com", "attachment_id": 509622, "id": 5253138, "creator": "christian@legnitto.com", "text": "Created attachment 509622\nSlightly mangled log output from my run\n\nRunning optipng (http://optipng.sourceforge.net/) on the tree yields some savings (~115615 bytes for paths that don't have '/(ref)test' in them when using -o7). Even though the gain isn't much, we should do this. Attached is the (slightly mangled) output from my run with files and their results.\n\nI'm not sure we want to run this on test images, but probably wouldn't hurt (?).", "creation_time": "2011-02-04T00:00:50Z", "is_private": false, "tags": [], "time": "2011-02-04T00:00:50Z", "count": 0, "raw_text": "Running optipng (http://optipng.sourceforge.net/) on the tree yields some savings (~115615 bytes for paths that don't have '/(ref)test' in them when using -o7). Even though the gain isn't much, we should do this. Attached is the (slightly mangled) output from my run with files and their results.\n\nI'm not sure we want to run this on test images, but probably wouldn't hurt (?).", "bug_id": 631392}, {"tags": [], "is_private": false, "time": "2011-03-23T20:36:44Z", "count": 1, "bug_id": 631392, "raw_text": "", "author": "xtc4uall@gmail.com", "creator": "xtc4uall@gmail.com", "text": "*** Bug 644087 has been marked as a duplicate of this bug. ***", "attachment_id": null, "id": 5363632, "creation_time": "2011-03-23T20:36:44Z"}, {"author": "xtc4uall@gmail.com", "creator": "xtc4uall@gmail.com", "count": 2, "bug_id": 631392, "time": "2011-03-23T20:38:05Z", "creation_time": "2011-03-23T20:38:05Z", "text": "https://bugzilla.mozilla.org/attachment.cgi?id=521135 contains an Archive from the other Report.", "attachment_id": null, "id": 5363636, "raw_text": "https://bugzilla.mozilla.org/attachment.cgi?id=521135 contains an Archive from the other Report.", "tags": [], "is_private": false}, {"id": 5364359, "attachment_id": null, "creator": "f.kayser@free.fr", "text": "OptiPNG is a very valuable tool, but you'll usually get better results using PNGOUT (command line and free version of PNGOUTWin) followed by DeflOpt.\nThe punypng site also provides an online optimization tool.\n\nThere are some scripts like pngslim that make heavy use (hundreds of random runs) of these tools.\nI have developed CryoPNG which is a kind of preprocessing tool for RVB+Alpha PNG files since it replaces fully transparent pixels by a value that will be zeroed once the line is filtered (and not before as most \"dirty transparency\" enabled optimizers do by just putting black pixels).\n\nPNGOUTWin (GUI Windows): http://www.ardfry.com/pngoutwin/\nPNGOUT (command line for Windows): http://www.advsys.net/ken/utils.htm\nPNGOUT (command line for Linux, Mac OS X, FreeBSD): http://www.jonof.id.au/kenutils\nPNGOUT tutorial: http://www.advsys.net/ken/util/pngout.htm\n\nDeflOpt (command line Windows): http://www.walbeehm.com/download/ (can be run on Linux using Wine)\n\npngslim (command line Windows, drag and drop) http://people.bath.ac.uk/ea2aced/tech/png/pngslim.zip (works better under XP since pngoptimizercl is buggy under Vista and 7)\n\nPunyPNG (online service): http://punypng.com/\n\nCryoPNG (still experimental, ask me if you want to give it a run).\n\nAnyhow if the Mozilla team would like to use extremely optimized PNG files I could produce them.", "author": "f.kayser@free.fr", "creation_time": "2011-03-23T23:30:16Z", "time": "2011-03-23T23:30:16Z", "is_private": false, "tags": [], "raw_text": "OptiPNG is a very valuable tool, but you'll usually get better results using PNGOUT (command line and free version of PNGOUTWin) followed by DeflOpt.\nThe punypng site also provides an online optimization tool.\n\nThere are some scripts like pngslim that make heavy use (hundreds of random runs) of these tools.\nI have developed CryoPNG which is a kind of preprocessing tool for RVB+Alpha PNG files since it replaces fully transparent pixels by a value that will be zeroed once the line is filtered (and not before as most \"dirty transparency\" enabled optimizers do by just putting black pixels).\n\nPNGOUTWin (GUI Windows): http://www.ardfry.com/pngoutwin/\nPNGOUT (command line for Windows): http://www.advsys.net/ken/utils.htm\nPNGOUT (command line for Linux, Mac OS X, FreeBSD): http://www.jonof.id.au/kenutils\nPNGOUT tutorial: http://www.advsys.net/ken/util/pngout.htm\n\nDeflOpt (command line Windows): http://www.walbeehm.com/download/ (can be run on Linux using Wine)\n\npngslim (command line Windows, drag and drop) http://people.bath.ac.uk/ea2aced/tech/png/pngslim.zip (works better under XP since pngoptimizercl is buggy under Vista and 7)\n\nPunyPNG (online service): http://punypng.com/\n\nCryoPNG (still experimental, ask me if you want to give it a run).\n\nAnyhow if the Mozilla team would like to use extremely optimized PNG files I could produce them.", "bug_id": 631392, "count": 3}, {"attachment_id": null, "id": 5368283, "text": "Here are two examples of what can be achieved:\n\n/browser/themes/gnomestripe/browser/Geolocation-64.png\nSize : software used to optimize\n8056   original\n8056   optipng\n8035   optipng + deflopt\n7842   pngout + deflopt (custom \"mad\" script)\n7710   cryopng + pngout + deflopt (custom \"cryogenx\" script)\n\n/browser/themes/gnomestripe/browser/Privacy-64.png\nSize : software used to optimize\n4828   original\n4827   optipng\n4755   optipng + deflopt\n4589   pngout + deflopt (custom \"mad\" script)\n4234   cryopng + pngout + deflopt (custom \"cryogenx\" script)", "creation_time": "2011-03-25T03:01:50Z", "is_private": false, "tags": [], "raw_text": "Here are two examples of what can be achieved:\n\n/browser/themes/gnomestripe/browser/Geolocation-64.png\nSize : software used to optimize\n8056   original\n8056   optipng\n8035   optipng + deflopt\n7842   pngout + deflopt (custom \"mad\" script)\n7710   cryopng + pngout + deflopt (custom \"cryogenx\" script)\n\n/browser/themes/gnomestripe/browser/Privacy-64.png\nSize : software used to optimize\n4828   original\n4827   optipng\n4755   optipng + deflopt\n4589   pngout + deflopt (custom \"mad\" script)\n4234   cryopng + pngout + deflopt (custom \"cryogenx\" script)", "creator": "f.kayser@free.fr", "author": "f.kayser@free.fr", "time": "2011-03-25T03:01:50Z", "bug_id": 631392, "count": 4}, {"attachment_id": 521712, "id": 5368289, "text": "Created attachment 521712\nOptimized Geolocation-64.png file", "creation_time": "2011-03-25T03:03:41Z", "is_private": false, "tags": [], "raw_text": "", "author": "f.kayser@free.fr", "creator": "f.kayser@free.fr", "time": "2011-03-25T03:03:41Z", "count": 5, "bug_id": 631392}, {"count": 6, "bug_id": 631392, "raw_text": "", "tags": [], "is_private": false, "time": "2011-03-25T03:04:45Z", "creation_time": "2011-03-25T03:04:45Z", "author": "f.kayser@free.fr", "text": "Created attachment 521714\nOptimized Privacy-64.png file", "creator": "f.kayser@free.fr", "id": 5368293, "attachment_id": 521714}, {"creator": "f.kayser@free.fr", "author": "f.kayser@free.fr", "bug_id": 631392, "count": 7, "time": "2011-03-30T20:20:49Z", "creation_time": "2011-03-30T20:20:49Z", "text": "Created attachment 523092\nOptimization log (cryogenx script) of Firefox 4.0 browser/\n\nPlease notice that the following files are actually APNG files (animated throbbers) and not standard PNG files.\n\n./browser/themes/gnomestripe/browser/tabbrowser/loading.png\n./browser/themes/gnomestripe/browser/tabbrowser/connecting.png\n./browser/themes/gnomestripe/browser/places/searching_16.png\n./browser/themes/gnomestripe/browser/sync-24-throbber.png\n./browser/themes/gnomestripe/browser/sync-16-throbber.png\n./browser/themes/winstripe/browser/tabbrowser/loading.png\n./browser/themes/winstripe/browser/tabbrowser/connecting.png\n./browser/themes/winstripe/browser/sync-throbber.png\n./browser/themes/winstripe/browser/places/searching_16.png\n./browser/themes/winstripe/browser/places/searching_16-aero.png\n./browser/themes/pinstripe/browser/tabbrowser/loading.png\n./browser/themes/pinstripe/browser/tabbrowser/connecting.png\n./browser/themes/pinstripe/browser/sync-throbber.png\n./browser/themes/pinstripe/browser/places/searching_16.png", "attachment_id": 523092, "id": 5381254, "raw_text": "Please notice that the following files are actually APNG files (animated throbbers) and not standard PNG files.\n\n./browser/themes/gnomestripe/browser/tabbrowser/loading.png\n./browser/themes/gnomestripe/browser/tabbrowser/connecting.png\n./browser/themes/gnomestripe/browser/places/searching_16.png\n./browser/themes/gnomestripe/browser/sync-24-throbber.png\n./browser/themes/gnomestripe/browser/sync-16-throbber.png\n./browser/themes/winstripe/browser/tabbrowser/loading.png\n./browser/themes/winstripe/browser/tabbrowser/connecting.png\n./browser/themes/winstripe/browser/sync-throbber.png\n./browser/themes/winstripe/browser/places/searching_16.png\n./browser/themes/winstripe/browser/places/searching_16-aero.png\n./browser/themes/pinstripe/browser/tabbrowser/loading.png\n./browser/themes/pinstripe/browser/tabbrowser/connecting.png\n./browser/themes/pinstripe/browser/sync-throbber.png\n./browser/themes/pinstripe/browser/places/searching_16.png", "tags": [], "is_private": false}, {"bug_id": 631392, "count": 8, "time": "2011-03-30T21:03:14Z", "creator": "f.kayser@free.fr", "author": "f.kayser@free.fr", "raw_text": "Once stored in a zip archive I get:\n1184175 original-pngs.zip\n1027477 cryopngx-optimized-pngs.zip\n\ncryopngx-optimized-pngs.zip is available here for at least 30 days:\nhttp://dl.free.fr/nKRpaYpCf", "is_private": false, "tags": [], "creation_time": "2011-03-30T21:03:14Z", "attachment_id": null, "id": 5381391, "text": "Once stored in a zip archive I get:\n1184175 original-pngs.zip\n1027477 cryopngx-optimized-pngs.zip\n\ncryopngx-optimized-pngs.zip is available here for at least 30 days:\nhttp://dl.free.fr/nKRpaYpCf"}, {"time": "2011-04-25T21:04:11Z", "count": 9, "bug_id": 631392, "author": "taras.mozilla@glek.net", "creator": "taras.mozilla@glek.net", "is_private": false, "tags": [], "raw_text": "Fr\u00e9d\u00e9ric thanks for you work,\nI think the reasonable thing to do here is to submit bugs specifically about the biggest png files(ie about-background.png) to get them replaced with more efficient versions.", "attachment_id": null, "id": 5430228, "text": "Fr\u00e9d\u00e9ric thanks for you work,\nI think the reasonable thing to do here is to submit bugs specifically about the biggest png files(ie about-background.png) to get them replaced with more efficient versions.", "creation_time": "2011-04-25T21:04:11Z"}, {"time": "2011-04-27T00:08:29Z", "tags": [], "is_private": false, "bug_id": 631392, "raw_text": "I submitted Bug 653001 let me know if it's okay this way.", "count": 10, "creator": "f.kayser@free.fr", "text": "I submitted Bug 653001 let me know if it's okay this way.", "id": 5433629, "attachment_id": null, "author": "f.kayser@free.fr", "creation_time": "2011-04-27T00:08:29Z"}, {"bug_id": 631392, "raw_text": "Actually, I'd like to avoid having lots of bugs for specific image tweaks. Through I'll take a few if there's work on a better system...\n\nMight be worth discussing this on the newsgroups, but I think we should have an automated way of doing this. For example:\n\n 1) Put tools into the tree (or make them build dependencies), and have one of the build / package steps do this\n 2) Same, but do this over in releng instead of in-tree\n 3) Add an hg commit hook to reject non-optimized images (under theme/ at least)\n\nA good first step would be to get an in-tree script that someone can run to generate a patch for optimized images. Then the paranoid among us can avoid worrying about other image changes slipping into giant 3rd party patches. :)", "count": 11, "time": "2011-04-27T00:45:28Z", "tags": [], "is_private": false, "creation_time": "2011-04-27T00:45:28Z", "creator": "jdinbox@gmail.com", "text": "Actually, I'd like to avoid having lots of bugs for specific image tweaks. Through I'll take a few if there's work on a better system...\n\nMight be worth discussing this on the newsgroups, but I think we should have an automated way of doing this. For example:\n\n 1) Put tools into the tree (or make them build dependencies), and have one of the build / package steps do this\n 2) Same, but do this over in releng instead of in-tree\n 3) Add an hg commit hook to reject non-optimized images (under theme/ at least)\n\nA good first step would be to get an in-tree script that someone can run to generate a patch for optimized images. Then the paranoid among us can avoid worrying about other image changes slipping into giant 3rd party patches. :)", "attachment_id": null, "id": 5433702, "author": "jdinbox@gmail.com"}, {"count": 12, "bug_id": 631392, "raw_text": "Another one: Bug 653038, this image appears twice in the Windows version, maybe there's something to do at this level, like a \"common\" folder for files that belong to both skins (aero and non-aero).\n\nSubmitting images one by one is such a hassle... I'll stop it for now.", "tags": [], "is_private": false, "time": "2011-04-27T03:02:27Z", "creation_time": "2011-04-27T03:02:27Z", "author": "f.kayser@free.fr", "creator": "f.kayser@free.fr", "text": "Another one: Bug 653038, this image appears twice in the Windows version, maybe there's something to do at this level, like a \"common\" folder for files that belong to both skins (aero and non-aero).\n\nSubmitting images one by one is such a hassle... I'll stop it for now.", "id": 5433876, "attachment_id": null}, {"bug_id": 631392, "raw_text": "If icons are the same for both Aero and non-Aero Windows, then a single image in the tree is sufficient, with the appropriate jar.mn magic to refer to the same image in both flavors.", "count": 13, "time": "2011-04-27T22:18:00Z", "tags": [], "is_private": false, "creation_time": "2011-04-27T22:18:00Z", "text": "If icons are the same for both Aero and non-Aero Windows, then a single image in the tree is sufficient, with the appropriate jar.mn magic to refer to the same image in both flavors.", "creator": "jdinbox@gmail.com", "attachment_id": null, "id": 5435900, "author": "jdinbox@gmail.com"}, {"author": "stephen@noved.org", "creator": "stephen@noved.org", "time": "2011-10-03T15:01:09Z", "count": 14, "bug_id": 631392, "attachment_id": null, "id": 5754076, "text": "(In reply to Justin Dolske [:Dolske] from comment #11)\n>  1) Put tools into the tree (or make them build dependencies), and have one\n> of the build / package steps do this\n>  2) Same, but do this over in releng instead of in-tree\n>  3) Add an hg commit hook to reject non-optimized images (under theme/ at\n> least)\n> \n> A good first step would be to get an in-tree script that someone can run to\n> generate a patch for optimized images. Then the paranoid among us can avoid\n> worrying about other image changes slipping into giant 3rd party patches. :)\n\nI think those all sound like great ideas! \n\nI have been using ImageOptim for any new and updated images. It would be nice to have an automated way to reduce image size for all new images as well as a way to optimize images already in the tree.", "creation_time": "2011-10-03T15:01:09Z", "is_private": false, "tags": [], "raw_text": "(In reply to Justin Dolske [:Dolske] from comment #11)\n>  1) Put tools into the tree (or make them build dependencies), and have one\n> of the build / package steps do this\n>  2) Same, but do this over in releng instead of in-tree\n>  3) Add an hg commit hook to reject non-optimized images (under theme/ at\n> least)\n> \n> A good first step would be to get an in-tree script that someone can run to\n> generate a patch for optimized images. Then the paranoid among us can avoid\n> worrying about other image changes slipping into giant 3rd party patches. :)\n\nI think those all sound like great ideas! \n\nI have been using ImageOptim for any new and updated images. It would be nice to have an automated way to reduce image size for all new images as well as a way to optimize images already in the tree."}, {"creation_time": "2011-12-18T08:16:30Z", "text": "as a side note, there are also a few PNG in data: URIs scattered around the tree:\nhttp://mxr.mozilla.org/mozilla-central/search?string=data:image/png", "creator": "bugzilla@cafxx.strayorange.com", "id": 5925140, "attachment_id": null, "author": "bugzilla@cafxx.strayorange.com", "bug_id": 631392, "raw_text": "as a side note, there are also a few PNG in data: URIs scattered around the tree:\nhttp://mxr.mozilla.org/mozilla-central/search?string=data:image/png", "count": 15, "time": "2011-12-18T08:16:30Z", "tags": [], "is_private": false}]}}}