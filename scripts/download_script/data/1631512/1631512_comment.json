{"bugs": {"1631512": {"comments": [{"raw_text": "We can use the interrupt mechanism to trigger a (short) GC slice on the main thread when either background sweeping or background decommit finishes.  This will then advance the GC to the next state or finish the GC entirely.\n\nThis means that incremental GCs can finish sooner, without waiting for the embedding to trigger a slice for this to happen.", "time": "2020-04-20T17:15:03Z", "author": "jcoppeard@mozilla.com", "bug_id": 1631512, "tags": [], "is_private": false, "count": 0, "creation_time": "2020-04-20T17:15:03Z", "attachment_id": null, "creator": "jcoppeard@mozilla.com", "text": "We can use the interrupt mechanism to trigger a (short) GC slice on the main thread when either background sweeping or background decommit finishes.  This will then advance the GC to the next state or finish the GC entirely.\n\nThis means that incremental GCs can finish sooner, without waiting for the embedding to trigger a slice for this to happen.", "id": 14767002}, {"creation_time": "2020-04-20T19:17:30Z", "attachment_id": null, "creator": "sphink@gmail.com", "id": 14767358, "text": "Oh, nice. I like this idea.", "raw_text": "Oh, nice. I like this idea.", "time": "2020-04-20T19:17:30Z", "author": "sphink@gmail.com", "count": 1, "is_private": false, "bug_id": 1631512, "tags": []}, {"time": "2020-04-21T15:06:38Z", "creator": "jcoppeard@mozilla.com", "attachment_id": 9142070, "creation_time": "2020-04-21T15:06:38Z", "raw_text": "\nThe idea here is to set a flag whenever GC yeilds to the mutator while waiting for a background task (either sweeping or decommiting). Then when the task completes we check the flag and request a GC slice if it's set.", "bug_id": 1631512, "tags": [], "is_private": false, "count": 2, "text": "Created attachment 9142070\nBug 1631512 - Trigger a slice to continue the GC as soon as background sweeping finishes r?sfink\n\n\nThe idea here is to set a flag whenever GC yeilds to the mutator while waiting for a background task (either sweeping or decommiting). Then when the task completes we check the flag and request a GC slice if it's set.", "id": 14769313, "author": "jcoppeard@mozilla.com"}, {"text": "Pushed by jcoppeard@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/3622444e4081\nTrigger a slice to continue the GC as soon as background sweeping finishes r=sfink", "id": 14773375, "creator": "pulsebot@bots.tld", "attachment_id": null, "creation_time": "2020-04-23T07:54:08Z", "count": 3, "is_private": false, "tags": [], "bug_id": 1631512, "author": "pulsebot@bots.tld", "time": "2020-04-23T07:54:08Z", "raw_text": "Pushed by jcoppeard@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/3622444e4081\nTrigger a slice to continue the GC as soon as background sweeping finishes r=sfink"}, {"count": 4, "is_private": false, "bug_id": 1631512, "tags": ["bugherder"], "author": "cbrindusan@mozilla.com", "time": "2020-04-23T21:46:46Z", "raw_text": "https://hg.mozilla.org/mozilla-central/rev/3622444e4081", "id": 14775037, "text": "https://hg.mozilla.org/mozilla-central/rev/3622444e4081", "attachment_id": null, "creator": "cbrindusan@mozilla.com", "creation_time": "2020-04-23T21:46:46Z"}]}}, "comments": {}}