{"comments": {}, "bugs": {"681915": {"comments": [{"attachment_id": null, "raw_text": "Every so often the layout of planet.mozilla.org is corrupted because it's been sent as HTML so that tags such as <strong/> are misinterpreted.", "id": 5677355, "is_private": false, "creator": "neil@httl.net", "count": 0, "creation_time": "2011-08-25T10:58:46Z", "author": "neil@httl.net", "text": "Every so often the layout of planet.mozilla.org is corrupted because it's been sent as HTML so that tags such as <strong/> are misinterpreted.", "tags": [], "bug_id": 681915, "time": "2011-08-25T10:58:46Z"}, {"raw_text": "", "attachment_id": 555694, "id": 5677359, "creator": "neil@httl.net", "is_private": false, "tags": [], "time": "2011-08-25T11:00:17Z", "text": "Created attachment 555694\nLog captured by Live HTTP Headers", "author": "neil@httl.net", "creation_time": "2011-08-25T11:00:17Z", "count": 1, "bug_id": 681915}, {"attachment_id": null, "raw_text": "", "id": 5707229, "is_private": false, "creator": "neil@httl.net", "count": 2, "creation_time": "2011-09-08T10:24:44Z", "author": "neil@httl.net", "text": "*** Bug 664115 has been marked as a duplicate of this bug. ***", "time": "2011-09-08T10:24:44Z", "tags": [], "bug_id": 681915}, {"creation_time": "2011-09-08T10:26:42Z", "author": "neil@httl.net", "text": "Created attachment 559089\nLog captured by Live HTTP Headers", "tags": [], "time": "2011-09-08T10:26:42Z", "is_private": false, "creator": "neil@httl.net", "id": 5707231, "attachment_id": 559089, "raw_text": "", "bug_id": 681915, "count": 3}, {"attachment_id": 559944, "raw_text": "", "id": 5715233, "is_private": false, "creator": "neil@httl.net", "count": 4, "creation_time": "2011-09-13T10:51:54Z", "author": "neil@httl.net", "text": "Created attachment 559944\nLog captured by Live HTTP Headers", "bug_id": 681915, "tags": [], "time": "2011-09-13T10:51:54Z"}, {"creation_time": "2011-10-06T10:27:52Z", "author": "neil@httl.net", "text": "Created attachment 565174\nLog captured by Live HTTP Headers", "tags": [], "bug_id": 681915, "time": "2011-10-06T10:27:52Z", "is_private": false, "creator": "neil@httl.net", "count": 5, "id": 5762946, "attachment_id": 565174, "raw_text": ""}, {"attachment_id": 566775, "raw_text": "", "id": 5779754, "is_private": false, "creator": "neil@httl.net", "creation_time": "2011-10-13T10:32:52Z", "author": "neil@httl.net", "text": "Created attachment 566775\nLog captured by Live HTTP Headers", "time": "2011-10-13T10:32:52Z", "tags": [], "count": 6, "bug_id": 681915}, {"id": 5785952, "raw_text": "", "attachment_id": 567415, "text": "Created attachment 567415\nLog captured by Live HTTP Headers", "tags": [], "bug_id": 681915, "time": "2011-10-17T10:44:56Z", "creation_time": "2011-10-17T10:44:56Z", "author": "neil@httl.net", "count": 7, "is_private": false, "creator": "neil@httl.net"}, {"count": 8, "bug_id": 681915, "attachment_id": 568631, "raw_text": "", "id": 5796509, "is_private": false, "creator": "neil@httl.net", "creation_time": "2011-10-21T10:35:47Z", "author": "neil@httl.net", "text": "Created attachment 568631\nLog captured by Live HTTP Headers", "time": "2011-10-21T10:35:47Z", "tags": []}, {"id": 5820343, "attachment_id": 571300, "raw_text": "", "creation_time": "2011-11-02T11:09:57Z", "author": "neil@httl.net", "text": "Created attachment 571300\nLog captured by Live HTTP Headers", "bug_id": 681915, "time": "2011-11-02T11:09:57Z", "tags": [], "is_private": false, "creator": "neil@httl.net", "count": 9}, {"id": 5826289, "raw_text": "", "attachment_id": 571956, "bug_id": 681915, "time": "2011-11-04T13:57:48Z", "tags": [], "text": "Created attachment 571956\nLog captured by Live HTTP Headers", "author": "neil@httl.net", "creation_time": "2011-11-04T13:57:48Z", "count": 10, "creator": "neil@httl.net", "is_private": false}, {"creator": "neil@httl.net", "is_private": false, "count": 11, "author": "neil@httl.net", "creation_time": "2011-12-16T10:46:53Z", "time": "2011-12-16T10:46:53Z", "tags": [], "bug_id": 681915, "text": "Created attachment 582223\nLog captured by Live HTTP Headers", "attachment_id": 582223, "raw_text": "", "id": 5921436}, {"author": "neil@httl.net", "creation_time": "2011-12-21T11:34:49Z", "bug_id": 681915, "time": "2011-12-21T11:34:49Z", "tags": [], "text": "Created attachment 583444\nLog captured by Live HTTP Headers", "creator": "neil@httl.net", "is_private": false, "count": 12, "id": 5932203, "attachment_id": 583444, "raw_text": ""}, {"creator": "neil@httl.net", "is_private": false, "count": 13, "author": "neil@httl.net", "creation_time": "2011-12-29T12:12:21Z", "tags": [], "bug_id": 681915, "time": "2011-12-29T12:12:21Z", "text": "Created attachment 584731\nLog captured by Live HTTP Headers", "attachment_id": 584731, "raw_text": "", "id": 5944731}, {"raw_text": "For the record -- this resulted in today's PlanetMozilla having...\n - most of its content incorrectly bolded\n - about half of its content being incorrectly italicized\n - one entire blog-post being incorrectly linkified (entire post is underlined & blue)\n...when I skimmed it this morning.\n\n(I just reloaded the page, though, and now it displays correctly -- supporting the \"every so often\" bit mentioned in comment 0.  There be randomness in these here parts.)", "attachment_id": null, "id": 5986384, "count": 14, "is_private": false, "creator": "dholbert@mozilla.com", "text": "For the record -- this resulted in today's PlanetMozilla having...\n - most of its content incorrectly bolded\n - about half of its content being incorrectly italicized\n - one entire blog-post being incorrectly linkified (entire post is underlined & blue)\n...when I skimmed it this morning.\n\n(I just reloaded the page, though, and now it displays correctly -- supporting the \"every so often\" bit mentioned in comment 0.  There be randomness in these here parts.)", "bug_id": 681915, "time": "2012-01-17T20:08:48Z", "tags": [], "creation_time": "2012-01-17T20:08:48Z", "author": "dholbert@mozilla.com"}, {"id": 5994831, "raw_text": "The way Venus creates an XHTML file with a .html extension is just asking for trouble like this.", "attachment_id": null, "text": "The way Venus creates an XHTML file with a .html extension is just asking for trouble like this.", "time": "2012-01-20T10:31:05Z", "tags": [], "creation_time": "2012-01-20T10:31:05Z", "author": "geoff@thunderbird.net", "is_private": false, "creator": "geoff@thunderbird.net", "bug_id": 681915, "count": 15}, {"is_private": false, "creator": "neil@httl.net", "count": 16, "creation_time": "2012-01-26T11:32:50Z", "author": "neil@httl.net", "text": "Created attachment 591742\nLog captured by Live HTTP Headers", "tags": [], "time": "2012-01-26T11:32:50Z", "bug_id": 681915, "attachment_id": 591742, "raw_text": "", "id": 6010685}, {"count": 17, "is_private": false, "creator": "neil@httl.net", "text": "Created attachment 594112\nLog captured by Live HTTP Headers", "tags": [], "bug_id": 681915, "time": "2012-02-03T11:11:32Z", "creation_time": "2012-02-03T11:11:32Z", "author": "neil@httl.net", "raw_text": "", "attachment_id": 594112, "id": 6031797}, {"text": "Created attachment 594422\nLog captured by Live HTTP Headers", "tags": [], "time": "2012-02-04T12:04:21Z", "bug_id": 681915, "creation_time": "2012-02-04T12:04:21Z", "author": "neil@httl.net", "count": 18, "is_private": false, "creator": "neil@httl.net", "id": 6034640, "raw_text": "", "attachment_id": 594422}, {"is_private": false, "creator": "neil@httl.net", "creation_time": "2012-02-06T10:37:21Z", "author": "neil@httl.net", "text": "Created attachment 594664\nLog captured by Live HTTP Headers", "tags": [], "time": "2012-02-06T10:37:21Z", "attachment_id": 594664, "raw_text": "", "id": 6036940, "count": 19, "bug_id": 681915}, {"raw_text": "All of these logs have \"X-Cache-Info: cached\". When the correct Content-Type is sent, X-Cache-Info is \"caching\". So Planet's server is sending the right type, as I expected after reading the .htaccess file.", "attachment_id": null, "id": 6036972, "count": 20, "creator": "geoff@thunderbird.net", "is_private": false, "time": "2012-02-06T11:04:41Z", "tags": [], "bug_id": 681915, "text": "All of these logs have \"X-Cache-Info: cached\". When the correct Content-Type is sent, X-Cache-Info is \"caching\". So Planet's server is sending the right type, as I expected after reading the .htaccess file.", "author": "geoff@thunderbird.net", "creation_time": "2012-02-06T11:04:41Z"}, {"text": "Jake, see the previous comment.", "tags": [], "time": "2012-02-06T11:10:02Z", "bug_id": 681915, "creation_time": "2012-02-06T11:10:02Z", "author": "reed@reedloden.com", "count": 21, "is_private": false, "creator": "reed@reedloden.com", "id": 6036976, "raw_text": "Jake, see the previous comment.", "attachment_id": null}, {"count": 22, "bug_id": 681915, "creator": "neil@httl.net", "is_private": false, "time": "2012-02-09T15:38:47Z", "tags": [], "text": "Created attachment 595738\nLog captured by Live HTTP Headers", "author": "neil@httl.net", "creation_time": "2012-02-09T15:38:47Z", "raw_text": "", "attachment_id": 595738, "id": 6047135}, {"bug_id": 681915, "time": "2012-02-10T11:19:26Z", "tags": [], "text": "Created attachment 596007\nLog captured by Live HTTP Headers", "author": "neil@httl.net", "creation_time": "2012-02-10T11:19:26Z", "count": 23, "creator": "neil@httl.net", "is_private": false, "id": 6049662, "raw_text": "", "attachment_id": 596007}, {"text": "Created attachment 598579\nLog from Firebug\n\nJust when it looked like it was all working fine.", "bug_id": 681915, "time": "2012-02-18T22:18:33Z", "tags": [], "creation_time": "2012-02-18T22:18:33Z", "author": "geoff@thunderbird.net", "count": 24, "is_private": false, "creator": "geoff@thunderbird.net", "id": 6074027, "raw_text": "Just when it looked like it was all working fine.", "attachment_id": 598579}, {"text": "Created attachment 598979\nLog from Firebug", "tags": [], "time": "2012-02-20T22:58:00Z", "creation_time": "2012-02-20T22:58:00Z", "author": "geoff@thunderbird.net", "is_private": false, "creator": "geoff@thunderbird.net", "id": 6077213, "raw_text": "", "attachment_id": 598979, "bug_id": 681915, "count": 25}, {"is_private": false, "creator": "neil@httl.net", "text": "Created attachment 599932\nLog captured by Live HTTP Headers", "tags": [], "time": "2012-02-23T11:06:05Z", "creation_time": "2012-02-23T11:06:05Z", "author": "neil@httl.net", "raw_text": "", "attachment_id": 599932, "id": 6086024, "count": 26, "bug_id": 681915}, {"id": 6089664, "attachment_id": 600344, "raw_text": "", "author": "neil@httl.net", "creation_time": "2012-02-24T10:55:48Z", "tags": [], "bug_id": 681915, "time": "2012-02-24T10:55:48Z", "text": "Created attachment 600344\nLog captured by Live HTTP Headers", "creator": "neil@httl.net", "is_private": false, "count": 27}, {"is_private": false, "creator": "neil@httl.net", "count": 28, "creation_time": "2012-02-25T11:29:55Z", "author": "neil@httl.net", "text": "Created attachment 600645\nLog captured by Live HTTP Headers", "tags": [], "time": "2012-02-25T11:29:55Z", "bug_id": 681915, "attachment_id": 600645, "raw_text": "", "id": 6092633}, {"count": 29, "is_private": false, "creator": "neil@httl.net", "text": "Created attachment 601577\nLog captured by Live HTTP Headers", "tags": [], "bug_id": 681915, "time": "2012-02-29T12:42:53Z", "creation_time": "2012-02-29T12:42:53Z", "author": "neil@httl.net", "raw_text": "", "attachment_id": 601577, "id": 6102140}, {"count": 30, "bug_id": 681915, "creator": "neil@httl.net", "is_private": false, "author": "neil@httl.net", "creation_time": "2012-03-06T11:46:17Z", "time": "2012-03-06T11:46:17Z", "tags": [], "text": "Created attachment 603218\nLog captured by Live HTTP Headers", "attachment_id": 603218, "raw_text": "", "id": 6117200}, {"id": 6127059, "attachment_id": 604353, "raw_text": "", "author": "neil@httl.net", "creation_time": "2012-03-09T10:49:03Z", "bug_id": 681915, "tags": [], "time": "2012-03-09T10:49:03Z", "text": "Created attachment 604353\nLog captured by Live HTTP Headers", "creator": "neil@httl.net", "is_private": false, "count": 31}, {"bug_id": 681915, "count": 32, "author": "neil@httl.net", "creation_time": "2012-03-13T11:23:47Z", "tags": [], "time": "2012-03-13T11:23:47Z", "text": "Created attachment 605339\nLog captured by Live HTTP Headers", "creator": "neil@httl.net", "is_private": false, "id": 6135409, "attachment_id": 605339, "raw_text": ""}, {"tags": [], "time": "2012-03-14T10:46:15Z", "bug_id": 681915, "text": "Created attachment 605708\nLog captured by Live HTTP Headers", "author": "neil@httl.net", "creation_time": "2012-03-14T10:46:15Z", "count": 33, "creator": "neil@httl.net", "is_private": false, "id": 6138592, "raw_text": "", "attachment_id": 605708}, {"count": 34, "bug_id": 681915, "raw_text": "", "attachment_id": 606163, "id": 6142297, "is_private": false, "creator": "neil@httl.net", "text": "Created attachment 606163\nLog captured by Live HTTP Headers", "time": "2012-03-15T11:43:16Z", "tags": [], "creation_time": "2012-03-15T11:43:16Z", "author": "neil@httl.net"}, {"bug_id": 681915, "count": 35, "creation_time": "2012-03-22T10:31:34Z", "author": "neil@httl.net", "text": "Created attachment 608283\nLog captured by Live HTTP Headers", "time": "2012-03-22T10:31:34Z", "tags": [], "is_private": false, "creator": "neil@httl.net", "id": 6161838, "attachment_id": 608283, "raw_text": ""}, {"time": "2012-03-22T17:36:48Z", "tags": [], "bug_id": 681915, "text": "The variability is almost certainly due to planet's code- Every 15 minutes, it scrapes all the blogs being monitored and generates fresh a fresh (static) index.html file.\n\nI suspect what's happening is that when a new post comes in, the MIME type of that post (or rather, the source of that post) is \"adopted\" for the overall page MIME type. My guess is that most of the incoming posts cause an XHTML MIME type to be chosen, but a few result in text/html instead.\n\nIt could also be a simple case of planet's code trying to \"guess\" at the optimal MIME type, and perhaps the first post or two use older constructs like <b>, <i>, etc, and it cue's off of that.\n\n\n\nWhen this happens, I would be very interested to know what the top post is, and what the first few lines of the HTML looks like.\n\n\nIf I'm right, the fix will likely be one of 2 things:\n\n1) Eliminate all blogs that cause this, and/or otherwise get them changed up so they don't cause problems. This seems almost like a non-starter.\n\n2) Massage planet's code to always return an XHTML MIME type. This seems feasible, although I can't say for sure what would break.\n\n3) Massage planet's code to somehow attempt to convert text/html stuff to XHTML, so that when it does generate a new page, it's \"automatically\" got the correct MIME type.", "author": "nmaul@mozilla.com", "creation_time": "2012-03-22T17:36:48Z", "count": 36, "creator": "nmaul@mozilla.com", "is_private": false, "id": 6162918, "raw_text": "The variability is almost certainly due to planet's code- Every 15 minutes, it scrapes all the blogs being monitored and generates fresh a fresh (static) index.html file.\n\nI suspect what's happening is that when a new post comes in, the MIME type of that post (or rather, the source of that post) is \"adopted\" for the overall page MIME type. My guess is that most of the incoming posts cause an XHTML MIME type to be chosen, but a few result in text/html instead.\n\nIt could also be a simple case of planet's code trying to \"guess\" at the optimal MIME type, and perhaps the first post or two use older constructs like <b>, <i>, etc, and it cue's off of that.\n\n\n\nWhen this happens, I would be very interested to know what the top post is, and what the first few lines of the HTML looks like.\n\n\nIf I'm right, the fix will likely be one of 2 things:\n\n1) Eliminate all blogs that cause this, and/or otherwise get them changed up so they don't cause problems. This seems almost like a non-starter.\n\n2) Massage planet's code to always return an XHTML MIME type. This seems feasible, although I can't say for sure what would break.\n\n3) Massage planet's code to somehow attempt to convert text/html stuff to XHTML, so that when it does generate a new page, it's \"automatically\" got the correct MIME type.", "attachment_id": null}, {"is_private": false, "creator": "geoff@thunderbird.net", "text": "Jake is it possible the caching server is the one guessing the MIME type?", "time": "2012-03-23T07:33:34Z", "tags": [], "creation_time": "2012-03-23T07:33:34Z", "author": "geoff@thunderbird.net", "raw_text": "Jake is it possible the caching server is the one guessing the MIME type?", "attachment_id": null, "id": 6164989, "count": 37, "bug_id": 681915}, {"bug_id": 681915, "count": 38, "text": "(In reply to Jake Maul [:jakem] from comment #36)\n> The variability is almost certainly due to planet's code\n\nExcept as you (correctly) point out, planet spits out *static* HTML. It doesn't serve the content itself, so a random blog isn't going to change what's happening. The mime-type is all Apache's doing. See http://viewvc.svn.mozilla.org/vc/projects/planet/branches/planet/theme/.htaccess?view=co for the magic that picks the mime-type.", "time": "2012-03-23T08:27:33Z", "tags": [], "creation_time": "2012-03-23T08:27:33Z", "author": "reed@reedloden.com", "is_private": false, "creator": "reed@reedloden.com", "id": 6165043, "raw_text": "(In reply to Jake Maul [:jakem] from comment #36)\n> The variability is almost certainly due to planet's code\n\nExcept as you (correctly) point out, planet spits out *static* HTML. It doesn't serve the content itself, so a random blog isn't going to change what's happening. The mime-type is all Apache's doing. See http://viewvc.svn.mozilla.org/vc/projects/planet/branches/planet/theme/.htaccess?view=co for the magic that picks the mime-type.", "attachment_id": null}, {"is_private": false, "creator": "reed@reedloden.com", "creation_time": "2012-03-23T08:29:25Z", "author": "reed@reedloden.com", "text": "Perhaps I need to send some type of 'Vary' header to make caching work better for different 'Accept' and 'User-Agent' responses?", "time": "2012-03-23T08:29:25Z", "tags": [], "attachment_id": null, "raw_text": "Perhaps I need to send some type of 'Vary' header to make caching work better for different 'Accept' and 'User-Agent' responses?", "id": 6165047, "count": 39, "bug_id": 681915}, {"id": 6165053, "raw_text": "(In reply to Reed Loden [:reed] (very busy) from comment #39)\n> Perhaps I need to send some type of 'Vary' header to make caching work\n> better for different 'Accept' and 'User-Agent' responses?\n\nJust tried that in r103356. Let's see what it does.", "attachment_id": null, "text": "(In reply to Reed Loden [:reed] (very busy) from comment #39)\n> Perhaps I need to send some type of 'Vary' header to make caching work\n> better for different 'Accept' and 'User-Agent' responses?\n\nJust tried that in r103356. Let's see what it does.", "tags": [], "time": "2012-03-23T08:35:38Z", "bug_id": 681915, "creation_time": "2012-03-23T08:35:38Z", "author": "reed@reedloden.com", "count": 40, "is_private": false, "creator": "reed@reedloden.com"}, {"raw_text": "(In reply to Reed Loden [:reed] (very busy) from comment #40)\n> Just tried that in r103356. Let's see what it does.\n\nIt's b0rken planet :(", "attachment_id": null, "id": 6165204, "count": 41, "creator": "ashish@mozilla.com", "is_private": false, "tags": [], "bug_id": 681915, "time": "2012-03-23T10:51:43Z", "text": "(In reply to Reed Loden [:reed] (very busy) from comment #40)\n> Just tried that in r103356. Let's see what it does.\n\nIt's b0rken planet :(", "author": "ashish@mozilla.com", "creation_time": "2012-03-23T10:51:43Z"}]}}}