{"comments": {}, "bugs": {"686875": {"comments": [{"creation_time": "2011-09-15T14:50:36Z", "is_private": false, "creator": "khuey@kylehuey.com", "tags": [], "attachment_id": null, "id": 5718537, "bug_id": 686875, "text": "1. Load https://tbpl.mozilla.org/images/closebutton-dark.svg\n2. Check about:memory\n3. See that this doc is using 600K of styledata memory.", "count": 0, "author": "khuey@kylehuey.com", "time": "2011-09-15T14:50:36Z", "raw_text": "1. Load https://tbpl.mozilla.org/images/closebutton-dark.svg\n2. Check about:memory\n3. See that this doc is using 600K of styledata memory."}, {"tags": [], "raw_text": "Is this with more reporters than there were about a week ago?  Because my opt build shows u using about 75KB on styledata on this SVG.  Which is similar to how much data we use for about:blank, unsurprisingly.  All of that is due to ua.css, of course.", "attachment_id": null, "time": "2011-09-15T22:29:40Z", "creation_time": "2011-09-15T22:29:40Z", "is_private": false, "id": 5719373, "bug_id": 686875, "count": 1, "text": "Is this with more reporters than there were about a week ago?  Because my opt build shows u using about 75KB on styledata on this SVG.  Which is similar to how much data we use for about:blank, unsurprisingly.  All of that is due to ua.css, of course.", "author": "bzbarsky@mit.edu", "creator": "bzbarsky@mit.edu"}, {"raw_text": "This is with Tuesday's stock nightly which AFAIK has no new reporters.\n\nI am on Windows ... if that might matter.", "time": "2011-09-15T22:30:44Z", "author": "khuey@kylehuey.com", "text": "This is with Tuesday's stock nightly which AFAIK has no new reporters.\n\nI am on Windows ... if that might matter.", "count": 2, "id": 5719375, "bug_id": 686875, "attachment_id": null, "tags": [], "creator": "khuey@kylehuey.com", "is_private": false, "creation_time": "2011-09-15T22:30:44Z"}, {"creator": "bzbarsky@mit.edu", "creation_time": "2011-09-15T22:52:38Z", "is_private": false, "attachment_id": null, "tags": [], "count": 3, "text": "OK, just tried this in today's stock Mac nightly, with a clean profile.\n\n\n\u2502   \u2514\u2500\u2500\u2500\u2500108,224 B (00.18%) -- shell(https://tbpl.mozilla.org/images/closebutton-dark.svg)\n\u2502        \u251c\u2500\u2500\u250074,368 B (00.12%) -- styledata\n\nGranted, on Mac, so in a 64-bit build.  I have a really hard time believing that we're really using 8-9x as much memory there in a Windows 32-bit build.\n\nJust to make sure, this is a clean profile, no extensions, no huge userContent.css?", "author": "bzbarsky@mit.edu", "id": 5719430, "bug_id": 686875, "raw_text": "OK, just tried this in today's stock Mac nightly, with a clean profile.\n\n\n\u2502   \u2514\u2500\u2500\u2500\u2500108,224 B (00.18%) -- shell(https://tbpl.mozilla.org/images/closebutton-dark.svg)\n\u2502        \u251c\u2500\u2500\u250074,368 B (00.12%) -- styledata\n\nGranted, on Mac, so in a 64-bit build.  I have a really hard time believing that we're really using 8-9x as much memory there in a Windows 32-bit build.\n\nJust to make sure, this is a clean profile, no extensions, no huge userContent.css?", "time": "2011-09-15T22:52:38Z"}, {"creator": "khuey@kylehuey.com", "creation_time": "2011-09-15T22:59:09Z", "is_private": false, "attachment_id": null, "tags": [], "author": "khuey@kylehuey.com", "count": 4, "text": "(In reply to Boris Zbarsky (:bz) from comment #3)\n> Just to make sure, this is a clean profile, no extensions, no huge\n> userContent.css?\n\nNo, it's not actually.  I can't reproduce this in a clean profile.", "id": 5719441, "bug_id": 686875, "time": "2011-09-15T22:59:09Z", "raw_text": "(In reply to Boris Zbarsky (:bz) from comment #3)\n> Just to make sure, this is a clean profile, no extensions, no huge\n> userContent.css?\n\nNo, it's not actually.  I can't reproduce this in a clean profile."}, {"raw_text": "Alright!  So what's different about your profile?  This seems worth figuring out....", "time": "2011-09-15T23:07:04Z", "author": "bzbarsky@mit.edu", "count": 5, "text": "Alright!  So what's different about your profile?  This seems worth figuring out....", "bug_id": 686875, "id": 5719452, "attachment_id": null, "tags": [], "creator": "bzbarsky@mit.edu", "is_private": false, "creation_time": "2011-09-15T23:07:04Z"}, {"attachment_id": null, "raw_text": "I have Adblock Plus installed.\n\nNot sure what we can do here other than share stuff between documents or something similar.", "time": "2011-09-16T05:27:00Z", "tags": [], "author": "khuey@kylehuey.com", "text": "I have Adblock Plus installed.\n\nNot sure what we can do here other than share stuff between documents or something similar.", "count": 6, "creator": "khuey@kylehuey.com", "is_private": false, "creation_time": "2011-09-16T05:27:00Z", "id": 5719806, "bug_id": 686875}, {"id": 5719809, "bug_id": 686875, "is_private": false, "creation_time": "2011-09-16T05:33:10Z", "creator": "bzbarsky@mit.edu", "author": "bzbarsky@mit.edu", "count": 7, "text": "The amount of memory used by styledata (as measured by our current reporter) essentially depends on the number of selectors used in the stylesheets....  So yeah, either fewer selectors or more sharing of some sort.  This last is complicated by the fact that the cascade really does need to be different for different documents, in general.", "tags": [], "time": "2011-09-16T05:33:10Z", "attachment_id": null, "raw_text": "The amount of memory used by styledata (as measured by our current reporter) essentially depends on the number of selectors used in the stylesheets....  So yeah, either fewer selectors or more sharing of some sort.  This last is complicated by the fact that the cascade really does need to be different for different documents, in general."}, {"tags": [], "attachment_id": null, "is_private": false, "creation_time": "2011-09-16T08:45:10Z", "creator": "ecfbugzilla@palant.de", "time": "2011-09-16T08:45:10Z", "raw_text": "Which selectors count here? I guess that selectors in @-moz-document limited to another domain don't count? If so, we are currently talking about roughly 4500 selectors in EasyList. Unfortunately, finding the ones that are no longer useful is non-trivial. A solution is planned but might take a while to implement.", "bug_id": 686875, "id": 5719941, "text": "Which selectors count here? I guess that selectors in @-moz-document limited to another domain don't count? If so, we are currently talking about roughly 4500 selectors in EasyList. Unfortunately, finding the ones that are no longer useful is non-trivial. A solution is planned but might take a while to implement.", "count": 8, "author": "ecfbugzilla@palant.de"}, {"count": 9, "text": "> I guess that selectors in @-moz-document limited to another domain don't count?\n\nI believe that is correct.", "author": "bzbarsky@mit.edu", "id": 5719976, "bug_id": 686875, "time": "2011-09-16T09:52:03Z", "raw_text": "> I guess that selectors in @-moz-document limited to another domain don't count?\n\nI believe that is correct.", "creator": "bzbarsky@mit.edu", "creation_time": "2011-09-16T09:52:03Z", "is_private": false, "attachment_id": null, "tags": []}]}}}