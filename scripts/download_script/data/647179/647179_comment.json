{"bugs": {"647179": {"comments": [{"count": 0, "time": "2011-04-01T09:53:01Z", "text": "User-Agent:       Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0) Gecko/20100101 Firefox/4.0\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9\n\nWhen composing a message (in html mode only, I assume), the <body> tag automatically gets the \"text\" and \"bgcolor\" attributes inserted by Thunderbird.\nNow, without getting too far into the logic behind the decision (personally, I'd prefer it left blank, for a couple of reasons, but that's a different story), the problem I'd like to report is the fact that the sources of the two values placed here differ.\n\nNamely, it appears that the bgcolor value indeed gets inherited (by VALUE!!!) from the usercontent.css settings if left as white in the options dialogue.\nThe text value, however, remains black under the same conditions!\n\n\nReproducible: Always\n\nSteps to Reproduce:\nAs an example, my usercontent.css contains the following:\n\nhtml, body, .moz-text-flowed, blockquote{\n\tbackground-color:\tWindow !important;\n\tcolor:\t\t\tWindowText !important;\n}\n\n(this is what I want the text to look like to me, I do not wish any of these to actually transfer to my outgoing messages. note tha the \"!important)\n\nFor reproductory purposes, one should change the \"Window Background\" and \"Window Text\" in their OS settings to something diffrent than white. My personal settings here are rgb(36,40,42) and rgb(142,152,156) )\nActual Results:  \nIf I leave the Tools->Options->Composition->General preferences for \"Text Color\" and \"Background Color\" at their defaults (black and white, respectively), when composing a new message, the body tag of the sent message will look like this:\n\n<body text=\"#000000\" bgcolor=\"#24282a\">\n\n\nThis is a huge problem, and definatly unexpected.\n\nThe app actually takes my local \"Window\" color (rgb(36,40,42) = #24282a), and then pastes it AS A NUMBER VALUE (so, not even a variable such as \"Window\", as I defined it) into the bgcolor attribute.\nWhat's even weirder, is that id doesn't do the same for the text color!\n\nWhile I do not actually want these to be inserted either way, this particular situation means that whoever gets my message is now looking at black text on a dark background!\n\nExpected Results:  \nI'd expect the local presentation described in usercontent.css never to have any kind of effect on my outgoing mail.\n\nAlso, preferably, the text and bgcolor attributes in hte outgoing mail should have an option of remaining empty, or have values such as \"automatic\" in msoffice made available (Window and WindowText come to mind), leaving the presentation layer to remain decoupled from the actual data sent, thus allowing each recipient to view the mail as he or she wnats locally, with no consequences on other participants in the communication.\n\nAnother layer of weirdness:\nIf I happen to define both the text and bg colors to something other than black on white via the options dialogue, it seems to work fine. (IE, i get the light gray text on dark gray bg in the composition window, and the recipient gets the colors defined in the dialogue)", "creator": "nikrifle@gmail.com", "raw_text": "User-Agent:       Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0) Gecko/20100101 Firefox/4.0\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9\n\nWhen composing a message (in html mode only, I assume), the <body> tag automatically gets the \"text\" and \"bgcolor\" attributes inserted by Thunderbird.\nNow, without getting too far into the logic behind the decision (personally, I'd prefer it left blank, for a couple of reasons, but that's a different story), the problem I'd like to report is the fact that the sources of the two values placed here differ.\n\nNamely, it appears that the bgcolor value indeed gets inherited (by VALUE!!!) from the usercontent.css settings if left as white in the options dialogue.\nThe text value, however, remains black under the same conditions!\n\n\nReproducible: Always\n\nSteps to Reproduce:\nAs an example, my usercontent.css contains the following:\n\nhtml, body, .moz-text-flowed, blockquote{\n\tbackground-color:\tWindow !important;\n\tcolor:\t\t\tWindowText !important;\n}\n\n(this is what I want the text to look like to me, I do not wish any of these to actually transfer to my outgoing messages. note tha the \"!important)\n\nFor reproductory purposes, one should change the \"Window Background\" and \"Window Text\" in their OS settings to something diffrent than white. My personal settings here are rgb(36,40,42) and rgb(142,152,156) )\nActual Results:  \nIf I leave the Tools->Options->Composition->General preferences for \"Text Color\" and \"Background Color\" at their defaults (black and white, respectively), when composing a new message, the body tag of the sent message will look like this:\n\n<body text=\"#000000\" bgcolor=\"#24282a\">\n\n\nThis is a huge problem, and definatly unexpected.\n\nThe app actually takes my local \"Window\" color (rgb(36,40,42) = #24282a), and then pastes it AS A NUMBER VALUE (so, not even a variable such as \"Window\", as I defined it) into the bgcolor attribute.\nWhat's even weirder, is that id doesn't do the same for the text color!\n\nWhile I do not actually want these to be inserted either way, this particular situation means that whoever gets my message is now looking at black text on a dark background!\n\nExpected Results:  \nI'd expect the local presentation described in usercontent.css never to have any kind of effect on my outgoing mail.\n\nAlso, preferably, the text and bgcolor attributes in hte outgoing mail should have an option of remaining empty, or have values such as \"automatic\" in msoffice made available (Window and WindowText come to mind), leaving the presentation layer to remain decoupled from the actual data sent, thus allowing each recipient to view the mail as he or she wnats locally, with no consequences on other participants in the communication.\n\nAnother layer of weirdness:\nIf I happen to define both the text and bg colors to something other than black on white via the options dialogue, it seems to work fine. (IE, i get the light gray text on dark gray bg in the composition window, and the recipient gets the colors defined in the dialogue)", "id": 5385954, "is_private": false, "author": "nikrifle@gmail.com", "bug_id": 647179, "attachment_id": null, "creation_time": "2011-04-01T09:53:01Z", "tags": []}, {"id": 5385959, "is_private": false, "count": 1, "author": "nikrifle@gmail.com", "time": "2011-04-01T09:59:37Z", "bug_id": 647179, "text": "(A part of my message got snipped by my mistake, I'll add it here):\n\nNote tha the \"!important\" declaration in the css is important because without it, during composition, it gets ignored (and the sent message looks as it should!).\nThis is what drives me to the conclusion that in some step or another there's \nan overlap between the GUI and the actual data sent. It seems that, at some point, the presentation layer gets quieried as to what the message's background shold be, instead of following the appropriate values selected elsewhere.", "attachment_id": null, "tags": [], "creation_time": "2011-04-01T09:59:37Z", "creator": "nikrifle@gmail.com", "raw_text": "(A part of my message got snipped by my mistake, I'll add it here):\n\nNote tha the \"!important\" declaration in the css is important because without it, during composition, it gets ignored (and the sent message looks as it should!).\nThis is what drives me to the conclusion that in some step or another there's \nan overlap between the GUI and the actual data sent. It seems that, at some point, the presentation layer gets quieried as to what the message's background shold be, instead of following the appropriate values selected elsewhere."}]}}, "comments": {}}