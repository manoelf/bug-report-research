{"comments": {}, "bugs": {"1425109": {"comments": [{"bug_id": 1425109, "time": "2017-12-13T19:55:42Z", "text": "User Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.84 Safari/537.36\n\nSteps to reproduce:\n\nGo to https://codepen.io/Onomicon/pen/ZbQmgv\n(just an example, any site with iframe and code that changes the iframe src have this problem)\nClick on the links that changes the iframe src.\n\n\nActual results:\n\nThe new Ping Pong loading animation on the tab doesn't show.  Only the Reload button turns to X, and the floating loading status bar will show during the load.\n\n\nExpected results:\n\nThe old spinning circle animation would show when iframe is being loaded.\n\nDue to this change, it feels like the action to change the iframe src isn't happening, causing the user to click multiple times on the action.", "is_private": false, "author": "jasonhpchu@gmail.com", "attachment_id": null, "raw_text": "User Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.84 Safari/537.36\n\nSteps to reproduce:\n\nGo to https://codepen.io/Onomicon/pen/ZbQmgv\n(just an example, any site with iframe and code that changes the iframe src have this problem)\nClick on the links that changes the iframe src.\n\n\nActual results:\n\nThe new Ping Pong loading animation on the tab doesn't show.  Only the Reload button turns to X, and the floating loading status bar will show during the load.\n\n\nExpected results:\n\nThe old spinning circle animation would show when iframe is being loaded.\n\nDue to this change, it feels like the action to change the iframe src isn't happening, causing the user to click multiple times on the action.", "creator": "jasonhpchu@gmail.com", "tags": [], "count": 0, "id": 12917029, "creation_time": "2017-12-13T19:55:42Z"}, {"attachment_id": null, "creator": "gingerbread_man@live.com", "raw_text": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:59.0) Gecko/20100101 Firefox/59.0\n20171213100213", "bug_id": 1425109, "time": "2017-12-13T23:06:48Z", "text": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:59.0) Gecko/20100101 Firefox/59.0\n20171213100213", "is_private": false, "author": "gingerbread_man@live.com", "id": 12917546, "creation_time": "2017-12-13T23:06:48Z", "count": 1, "tags": []}, {"tags": [], "count": 2, "creation_time": "2017-12-23T05:20:03Z", "id": 12934195, "time": "2017-12-23T05:20:03Z", "bug_id": 1425109, "text": "I doubt this is layout. Likely either dom, document navigation, or in the front end.", "is_private": false, "author": "tnikkel@gmail.com", "attachment_id": null, "raw_text": "I doubt this is layout. Likely either dom, document navigation, or in the front end.", "creator": "tnikkel@gmail.com"}, {"text": "Created attachment 8941533\nRemove isTopLevel check for iframe throbber", "author": "marc.j.hassan@gmail.com", "is_private": false, "tags": [], "count": 3, "bug_id": 1425109, "time": "2018-01-10T18:39:08Z", "raw_text": "", "id": 12958901, "creator": "marc.j.hassan@gmail.com", "creation_time": "2018-01-10T18:39:08Z", "attachment_id": 8941533}, {"text": "See attached proposed commit that removes the isTopLevel check for the throbber.\n\nHowever, I wonder if this bug was actually an intentional change in 57.", "is_private": false, "author": "marc.j.hassan@gmail.com", "bug_id": 1425109, "time": "2018-01-10T18:44:41Z", "raw_text": "See attached proposed commit that removes the isTopLevel check for the throbber.\n\nHowever, I wonder if this bug was actually an intentional change in 57.", "creator": "marc.j.hassan@gmail.com", "attachment_id": null, "tags": [], "count": 4, "creation_time": "2018-01-10T18:44:41Z", "id": 12958921}, {"raw_text": "If it is intentional then at least make it configurable in about:config.\nTons of sites where a menu changes stuff in iframe.\nIn the flip side, I could see a site where iframe is in constant loading of something in the background which will throw off the loading indicator's purpose.", "id": 12959034, "creator": "jasonhpchu@gmail.com", "creation_time": "2018-01-10T19:10:34Z", "attachment_id": null, "text": "If it is intentional then at least make it configurable in about:config.\nTons of sites where a menu changes stuff in iframe.\nIn the flip side, I could see a site where iframe is in constant loading of something in the background which will throw off the loading indicator's purpose.", "is_private": false, "author": "jasonhpchu@gmail.com", "tags": [], "count": 5, "bug_id": 1425109, "time": "2018-01-10T19:10:34Z"}, {"count": 6, "tags": [], "creation_time": "2018-01-11T06:09:40Z", "id": 12960391, "is_private": false, "author": "gingerbread_man@live.com", "text": "(In reply to marc.j.hassan from comment #4)\n> See attached proposed commit\n\nThank you for the patch. Since there's disagreement on the proper component for this, I'm not sure who to flag for review. NI :bz", "bug_id": 1425109, "time": "2018-01-11T06:09:40Z", "creator": "gingerbread_man@live.com", "raw_text": "(In reply to marc.j.hassan from comment #4)\n> See attached proposed commit\n\nThank you for the patch. Since there's disagreement on the proper component for this, I'm not sure who to flag for review. NI :bz", "attachment_id": null}, {"tags": [], "bug_id": 1425109, "time": "2018-01-11T06:16:51Z", "count": 7, "author": "bzbarsky@mit.edu", "is_private": false, "text": "When in doubt, flag the person who wrote or reviewed the code being changed.\n\nIn this case that would be Jared or Gijs, per bug 1380150.  Looks to me like the attached patch would simply regress that bug; I'll let Jared decide how he wants to handle this.  ;)", "attachment_id": null, "raw_text": "When in doubt, flag the person who wrote or reviewed the code being changed.\n\nIn this case that would be Jared or Gijs, per bug 1380150.  Looks to me like the attached patch would simply regress that bug; I'll let Jared decide how he wants to handle this.  ;)", "id": 12960396, "creation_time": "2018-01-11T06:16:51Z", "creator": "bzbarsky@mit.edu"}, {"bug_id": 1425109, "time": "2018-01-11T19:46:47Z", "text": "This was done by request from UX. The reload button still changes to the stop button but UX is concerned that the ping-pong animation is too distracting. Eric, now that we have lived with this change for a while, are you still confident about it?", "is_private": false, "author": "jaws@mozilla.com", "attachment_id": null, "creator": "jaws@mozilla.com", "raw_text": "This was done by request from UX. The reload button still changes to the stop button but UX is concerned that the ping-pong animation is too distracting. Eric, now that we have lived with this change for a while, are you still confident about it?", "count": 8, "tags": [], "id": 12962292, "creation_time": "2018-01-11T19:46:47Z"}, {"tags": [], "bug_id": 1425109, "time": "2018-01-11T20:04:48Z", "count": 9, "is_private": false, "author": "jasonhpchu@gmail.com", "text": "Wow, didn't think my little report would involve so many people.\nI'll give my 2 cents.\nI'm no UX, but without any animation, it just feels like Firefox isn't doing anything, since everything looks static.  Doesn't convey the feeling of Firefox is \"doing work\".", "attachment_id": null, "raw_text": "Wow, didn't think my little report would involve so many people.\nI'll give my 2 cents.\nI'm no UX, but without any animation, it just feels like Firefox isn't doing anything, since everything looks static.  Doesn't convey the feeling of Firefox is \"doing work\".", "id": 12962347, "creation_time": "2018-01-11T20:04:48Z", "creator": "jasonhpchu@gmail.com"}, {"text": "I found this ticket because it was something that I was missing in 57. Particularly with pages that contain large iframes, where the user may not even know they are interacting with an iframe, the user isn't sure if their interaction did anything until suddenly the page flashes. The reload button changing to stop is not noticeable to me. I am also not a UX person.\n\nSide note: the behavior in 57 is like the behavior in Google Chrome, where there is no indication of page loads within an iframe (not even the reload button changes).", "is_private": false, "author": "marc.j.hassan@gmail.com", "tags": [], "count": 10, "time": "2018-01-11T22:54:00Z", "bug_id": 1425109, "raw_text": "I found this ticket because it was something that I was missing in 57. Particularly with pages that contain large iframes, where the user may not even know they are interacting with an iframe, the user isn't sure if their interaction did anything until suddenly the page flashes. The reload button changing to stop is not noticeable to me. I am also not a UX person.\n\nSide note: the behavior in 57 is like the behavior in Google Chrome, where there is no indication of page loads within an iframe (not even the reload button changes).", "creator": "marc.j.hassan@gmail.com", "creation_time": "2018-01-11T22:54:00Z", "id": 12962840, "attachment_id": null}, {"attachment_id": null, "raw_text": "I agree that the loading indicator missing for the iframe content feels wrong.\nIs it possible for the iframe to trigger the loading indicator the same way it would if it was in it\u2019s own tab?\n\nI feel this will be the right balance and keeps bug 1380150 for regressing, which fixed important UI problems and increased perceived performance.", "creator": "epang@mozilla.com", "bug_id": 1425109, "time": "2018-01-12T18:59:11Z", "text": "I agree that the loading indicator missing for the iframe content feels wrong.\nIs it possible for the iframe to trigger the loading indicator the same way it would if it was in it\u2019s own tab?\n\nI feel this will be the right balance and keeps bug 1380150 for regressing, which fixed important UI problems and increased perceived performance.", "is_private": false, "author": "epang@mozilla.com", "id": 12965375, "creation_time": "2018-01-12T18:59:11Z", "tags": [], "count": 11}, {"raw_text": "Eric- Can you explain what you mean by this?:\n\n> Is it possible for the iframe to trigger the loading indicator the same way\n> it would if it was in it\u2019s own tab?", "creation_time": "2018-01-12T19:17:48Z", "id": 12965440, "creator": "marc.j.hassan@gmail.com", "attachment_id": null, "is_private": false, "author": "marc.j.hassan@gmail.com", "text": "Eric- Can you explain what you mean by this?:\n\n> Is it possible for the iframe to trigger the loading indicator the same way\n> it would if it was in it\u2019s own tab?", "tags": [], "time": "2018-01-12T19:17:48Z", "bug_id": 1425109, "count": 12}, {"bug_id": 1425109, "time": "2018-01-12T22:01:23Z", "author": "epang@mozilla.com", "is_private": false, "text": "(In reply to marc.j.hassan from comment #12)\n> Eric- Can you explain what you mean by this?:\n> \n> > Is it possible for the iframe to trigger the loading indicator the same way\n> > it would if it was in it\u2019s own tab?\n\nHi Marc, \n\nI'm hoping there's a way to treat the contents within the iframe as part of the page loading.\nFor example, on first load the indicator should take into account the page content inside and outside of the iframe.\nAfter first load any actions in the iframe are treated as they would be outside of the iframe. \n\nLet me know if that makes more sense!", "attachment_id": null, "raw_text": "(In reply to marc.j.hassan from comment #12)\n> Eric- Can you explain what you mean by this?:\n> \n> > Is it possible for the iframe to trigger the loading indicator the same way\n> > it would if it was in it\u2019s own tab?\n\nHi Marc, \n\nI'm hoping there's a way to treat the contents within the iframe as part of the page loading.\nFor example, on first load the indicator should take into account the page content inside and outside of the iframe.\nAfter first load any actions in the iframe are treated as they would be outside of the iframe. \n\nLet me know if that makes more sense!", "creator": "epang@mozilla.com", "tags": [], "count": 13, "creation_time": "2018-01-12T22:01:23Z", "id": 12965953}, {"id": 12970118, "creation_time": "2018-01-15T14:59:22Z", "tags": [], "count": 14, "raw_text": "With the patch I have attached, I am seeing this:\n\nIf the iframe is part of the page source:\n\n1) On initial page load, load indicator spins until the page has loaded (including iframe). Load indicator stops.\n2) On navigation within iframe, load indicator starts. Once iframe is done loading, load indicator stops.\n\nI believe that is the desired behavior you are describing.\n\nIf the iframe is added dynamically after page load:\n\n1) On initial page load, load indicator spins until the page has loaded (excluding the non-existent iframe). Load indicator stops.\n2) When iframe is added and starts loading, load indicator starts. Once iframe is done loading, load indicator stops.\n3) On navigation within iframe, load indicator starts. Once iframe is done loading, load indicator stops.", "creator": "marc.j.hassan@gmail.com", "attachment_id": null, "text": "With the patch I have attached, I am seeing this:\n\nIf the iframe is part of the page source:\n\n1) On initial page load, load indicator spins until the page has loaded (including iframe). Load indicator stops.\n2) On navigation within iframe, load indicator starts. Once iframe is done loading, load indicator stops.\n\nI believe that is the desired behavior you are describing.\n\nIf the iframe is added dynamically after page load:\n\n1) On initial page load, load indicator spins until the page has loaded (excluding the non-existent iframe). Load indicator stops.\n2) When iframe is added and starts loading, load indicator starts. Once iframe is done loading, load indicator stops.\n3) On navigation within iframe, load indicator starts. Once iframe is done loading, load indicator stops.", "is_private": false, "author": "marc.j.hassan@gmail.com", "bug_id": 1425109, "time": "2018-01-15T14:59:22Z"}, {"attachment_id": null, "raw_text": "(In reply to marc.j.hassan from comment #14)\n> With the patch I have attached, I am seeing this:\n> \n> If the iframe is part of the page source:\n> \n> 1) On initial page load, load indicator spins until the page has loaded\n> (including iframe). Load indicator stops.\n> 2) On navigation within iframe, load indicator starts. Once iframe is done\n> loading, load indicator stops.\n> \n> I believe that is the desired behavior you are describing.\n> \n> If the iframe is added dynamically after page load:\n> \n> 1) On initial page load, load indicator spins until the page has loaded\n> (excluding the non-existent iframe). Load indicator stops.\n> 2) When iframe is added and starts loading, load indicator starts. Once\n> iframe is done loading, load indicator stops.\n> 3) On navigation within iframe, load indicator starts. Once iframe is done\n> loading, load indicator stops.\n\nHi Marc, the behavior you describe sounds right.  Are you able to push to try so I can test it out?", "creator": "epang@mozilla.com", "time": "2018-01-15T16:05:38Z", "bug_id": 1425109, "text": "(In reply to marc.j.hassan from comment #14)\n> With the patch I have attached, I am seeing this:\n> \n> If the iframe is part of the page source:\n> \n> 1) On initial page load, load indicator spins until the page has loaded\n> (including iframe). Load indicator stops.\n> 2) On navigation within iframe, load indicator starts. Once iframe is done\n> loading, load indicator stops.\n> \n> I believe that is the desired behavior you are describing.\n> \n> If the iframe is added dynamically after page load:\n> \n> 1) On initial page load, load indicator spins until the page has loaded\n> (excluding the non-existent iframe). Load indicator stops.\n> 2) When iframe is added and starts loading, load indicator starts. Once\n> iframe is done loading, load indicator stops.\n> 3) On navigation within iframe, load indicator starts. Once iframe is done\n> loading, load indicator stops.\n\nHi Marc, the behavior you describe sounds right.  Are you able to push to try so I can test it out?", "author": "epang@mozilla.com", "is_private": false, "creation_time": "2018-01-15T16:05:38Z", "id": 12970230, "tags": [], "count": 15}, {"tags": [], "count": 16, "creation_time": "2018-01-15T16:25:52Z", "id": 12970277, "bug_id": 1425109, "time": "2018-01-15T16:25:52Z", "text": "I do not have access to push to try. Here is my Commit Access request: https://bugzilla.mozilla.org/show_bug.cgi?id=1430618", "is_private": false, "author": "marc.j.hassan@gmail.com", "attachment_id": null, "raw_text": "I do not have access to push to try. Here is my Commit Access request: https://bugzilla.mozilla.org/show_bug.cgi?id=1430618", "creator": "marc.j.hassan@gmail.com"}, {"tags": [], "count": 17, "id": 12970313, "creation_time": "2018-01-15T16:43:45Z", "time": "2018-01-15T16:43:45Z", "bug_id": 1425109, "text": "(In reply to marc.j.hassan from comment #16)\n> I do not have access to push to try. Here is my Commit Access request:\n> https://bugzilla.mozilla.org/show_bug.cgi?id=1430618\n\n@jwein are you able to give Marc access to push to try to I can test out his patch?", "author": "epang@mozilla.com", "is_private": false, "attachment_id": null, "raw_text": "(In reply to marc.j.hassan from comment #16)\n> I do not have access to push to try. Here is my Commit Access request:\n> https://bugzilla.mozilla.org/show_bug.cgi?id=1430618\n\n@jwein are you able to give Marc access to push to try to I can test out his patch?", "creator": "epang@mozilla.com"}, {"creation_time": "2018-01-16T17:28:43Z", "id": 12972426, "tags": [], "count": 18, "attachment_id": null, "raw_text": "Can someone either vouch for me, or push to try for me? I am a new developer. Here is my Commit Access request: https://bugzilla.mozilla.org/show_bug.cgi?id=1430618", "creator": "marc.j.hassan@gmail.com", "bug_id": 1425109, "time": "2018-01-16T17:28:43Z", "text": "Can someone either vouch for me, or push to try for me? I am a new developer. Here is my Commit Access request: https://bugzilla.mozilla.org/show_bug.cgi?id=1430618", "is_private": false, "author": "marc.j.hassan@gmail.com"}, {"id": 12972712, "creator": "jaws@mozilla.com", "creation_time": "2018-01-16T18:48:42Z", "raw_text": "I have vouched for Marc on the commit access request bug.", "attachment_id": null, "is_private": false, "author": "jaws@mozilla.com", "text": "I have vouched for Marc on the commit access request bug.", "bug_id": 1425109, "time": "2018-01-16T18:48:42Z", "count": 19, "tags": []}, {"is_private": false, "author": "marc.j.hassan@gmail.com", "text": "try: https://treeherder.mozilla.org/#/jobs?repo=try&revision=2e43b9ba07e5feba15c44878cd38affde7fcc756", "time": "2018-01-16T21:43:46Z", "bug_id": 1425109, "creator": "marc.j.hassan@gmail.com", "raw_text": "try: https://treeherder.mozilla.org/#/jobs?repo=try&revision=2e43b9ba07e5feba15c44878cd38affde7fcc756", "attachment_id": null, "count": 20, "tags": [], "creation_time": "2018-01-16T21:43:46Z", "id": 12973225}, {"attachment_id": null, "creator": "epang@mozilla.com", "id": 12976457, "creation_time": "2018-01-17T15:28:22Z", "raw_text": "(In reply to marc.j.hassan from comment #20)\n> try:\n> https://treeherder.mozilla.org/#/\n> jobs?repo=try&revision=2e43b9ba07e5feba15c44878cd38affde7fcc756\n\nMarc, can you make a build for OSX?  Sorry I should have specified that before! Thanks!", "time": "2018-01-17T15:28:22Z", "bug_id": 1425109, "count": 21, "tags": [], "is_private": false, "author": "epang@mozilla.com", "text": "(In reply to marc.j.hassan from comment #20)\n> try:\n> https://treeherder.mozilla.org/#/\n> jobs?repo=try&revision=2e43b9ba07e5feba15c44878cd38affde7fcc756\n\nMarc, can you make a build for OSX?  Sorry I should have specified that before! Thanks!"}, {"attachment_id": null, "id": 12976934, "creation_time": "2018-01-17T18:20:50Z", "creator": "jaws@mozilla.com", "raw_text": "I added a new job for OSX opt build to that try push. It should be ready in an hour or so.", "bug_id": 1425109, "time": "2018-01-17T18:20:50Z", "count": 22, "tags": [], "is_private": false, "author": "jaws@mozilla.com", "text": "I added a new job for OSX opt build to that try push. It should be ready in an hour or so."}, {"text": "(In reply to Jared Wein [:jaws] (please needinfo? me) from comment #22)\n> I added a new job for OSX opt build to that try push. It should be ready in\n> an hour or so.\n\nThanks Jared for the try push.\n\nThe flickering that can occur between the loading indicator, burst and favicon causes the experience to feel unpolished and unrefined. This also impacts perceived performance since secondary loads make the page feel much more sluggish when most of it is usually irrelevant to the user.  Content in an iframe is a good reason to show the loading indicator but if it can't be done in a way that doesn't revert the fixes of bug 1380150 I rather leave the experience as is.  Also, the user still has the refresh icon and progress indicator in the bottom left of the browser as indicators.\n\n> If it is intentional then at least make it configurable in about:config.\n\nI'm all for the options to make this configurable in about:config", "author": "epang@mozilla.com", "is_private": false, "bug_id": 1425109, "time": "2018-01-18T20:27:51Z", "creator": "epang@mozilla.com", "raw_text": "(In reply to Jared Wein [:jaws] (please needinfo? me) from comment #22)\n> I added a new job for OSX opt build to that try push. It should be ready in\n> an hour or so.\n\nThanks Jared for the try push.\n\nThe flickering that can occur between the loading indicator, burst and favicon causes the experience to feel unpolished and unrefined. This also impacts perceived performance since secondary loads make the page feel much more sluggish when most of it is usually irrelevant to the user.  Content in an iframe is a good reason to show the loading indicator but if it can't be done in a way that doesn't revert the fixes of bug 1380150 I rather leave the experience as is.  Also, the user still has the refresh icon and progress indicator in the bottom left of the browser as indicators.\n\n> If it is intentional then at least make it configurable in about:config.\n\nI'm all for the options to make this configurable in about:config", "attachment_id": null, "count": 23, "tags": [], "creation_time": "2018-01-18T20:27:51Z", "id": 12980219}, {"bug_id": 1425109, "time": "2018-01-18T20:32:42Z", "author": "jasonhpchu@gmail.com", "is_private": false, "text": "How about making the X on the refresh icon to be animated?  Perhaps a circle line that spins around the X.\nThe concern is lack of \"movement\" on the entire browser while the iframe content is being loaded.", "attachment_id": null, "raw_text": "How about making the X on the refresh icon to be animated?  Perhaps a circle line that spins around the X.\nThe concern is lack of \"movement\" on the entire browser while the iframe content is being loaded.", "creator": "jasonhpchu@gmail.com", "tags": [], "count": 24, "creation_time": "2018-01-18T20:32:42Z", "id": 12980230}, {"id": 12980320, "creation_time": "2018-01-18T21:13:27Z", "count": 25, "tags": [], "attachment_id": null, "creator": "jaws@mozilla.com", "raw_text": "The animation on the Reload->Stop after a page has finished loaded was disabled because users said it was too distracting. \n\nI am against adding a preference to change this behavior because we will then need to maintain and test another code path and we have limited resources.", "bug_id": 1425109, "time": "2018-01-18T21:13:27Z", "is_private": false, "author": "jaws@mozilla.com", "text": "The animation on the Reload->Stop after a page has finished loaded was disabled because users said it was too distracting. \n\nI am against adding a preference to change this behavior because we will then need to maintain and test another code path and we have limited resources."}]}}}