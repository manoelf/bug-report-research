{"comments": {}, "bugs": {"313049": {"comments": [{"count": 0, "id": 2671874, "tags": [], "bug_id": 313049, "author": "antonio@compleasy.com", "text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040803\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.12) Gecko/20050915 Firefox/1.0.7\n\nIf with JavaScript you put an element innerHTML inside the same element\ninnerHTML (without modifying it at all!) you get problems in the layout flow.\nI provide a sample page (succesfully validated on http://validator.w3.org/\n\nReproducible: Always\n\nSteps to Reproduce:\nplease try this page, it explain everything:\n\n<?xml version=\"1.0\" encoding=\"iso-8859-1\"?>\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\"\n\"http://www.w3.org/TR/html4/loose.dtd\">\n<html>\n<head>\n<title>Gecko BUG!</title>\n</head>\n<body>\n\n<table width=\"100%\">\n<tr><td>Content 1</td><td width=\"50%\">Content 2</td></tr>\n<tr><td>Content 3</td><td width=\"50%\">\n\n<div id=\"shell\"\nstyle=\"height:100%;width:100%;background:yellow;border:1px solid\nblack;position:relative;overflow:hidden;\">\n<div id=\"problematic\" style=\"position:absolute;\">\nContent 4\n</div>\n</div>\n\n</td></tr>\n<tr><td>Content 5</td><td width=\"50%\">Content 6</td></tr>\n</table>\n\n\n\n<div style=\"border-top: 3px solid rgb(192,192,192)\">\n<span id=\"begin\">\nAs you can expect if you resize the window the columns in this table remain 50%\nwidth both!<br>\nNow <b>(1)</b> maximize the window, <b>(2)</b> <b\nstyle=\"color:blue;cursor:pointer;\" onclick=\"damnBug();\">click here</b>, <b>(3)</b>\nsee what happens!\n</span>\n<span id=\"end\" style=\"display:none;\">\n<b>Now restore the window</b>. Do you see it? What happens here is that if\nyou try to shrink the window the columns do not remain 50%! In fact the yellow\nbox does not shrink to sizes smaller\nthan the one it had before executing:<br>'shell.innerHTML=shell.innerHTML;'<br><br>\n<b>IMPORTANT NOTE:</b> the problem <span style='color:red;'>does not happen at\nall</span> if the internal &lt;div&gt;\nwith the id 'problematic' does not have the 'position' style set to 'absolute',\nor the external one (with id 'shell')\ndoes not have the 'overflow' set to 'hidden'.\n</span>\n</div>\n\n\n<p><img src=\"http://www.w3.org/Icons/valid-html401\" alt=\"Valid HTML 4.01\nTransitional\" height=\"31\" width=\"88\"></p>\n\n<script type=\"text/javascript\">\n\nfunction damnBug()\n{\n var shell=document.getElementById(\"shell\");\n\n shell.innerHTML=shell.innerHTML;   // <---- the BUG happens only here, the rest\nis just for explaining\n\n document.getElementById(\"begin\").style.display=\"none\";\n document.getElementById(\"end\").style.display=\"block\";\n};\n\n</script>\n\n</body>\n</html>", "time": "2005-10-19T20:02:12Z", "creation_time": "2005-10-19T20:02:12Z", "raw_text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040803\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.12) Gecko/20050915 Firefox/1.0.7\n\nIf with JavaScript you put an element innerHTML inside the same element\ninnerHTML (without modifying it at all!) you get problems in the layout flow.\nI provide a sample page (succesfully validated on http://validator.w3.org/\n\nReproducible: Always\n\nSteps to Reproduce:\nplease try this page, it explain everything:\n\n<?xml version=\"1.0\" encoding=\"iso-8859-1\"?>\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\"\n\"http://www.w3.org/TR/html4/loose.dtd\">\n<html>\n<head>\n<title>Gecko BUG!</title>\n</head>\n<body>\n\n<table width=\"100%\">\n<tr><td>Content 1</td><td width=\"50%\">Content 2</td></tr>\n<tr><td>Content 3</td><td width=\"50%\">\n\n<div id=\"shell\"\nstyle=\"height:100%;width:100%;background:yellow;border:1px solid\nblack;position:relative;overflow:hidden;\">\n<div id=\"problematic\" style=\"position:absolute;\">\nContent 4\n</div>\n</div>\n\n</td></tr>\n<tr><td>Content 5</td><td width=\"50%\">Content 6</td></tr>\n</table>\n\n\n\n<div style=\"border-top: 3px solid rgb(192,192,192)\">\n<span id=\"begin\">\nAs you can expect if you resize the window the columns in this table remain 50%\nwidth both!<br>\nNow <b>(1)</b> maximize the window, <b>(2)</b> <b\nstyle=\"color:blue;cursor:pointer;\" onclick=\"damnBug();\">click here</b>, <b>(3)</b>\nsee what happens!\n</span>\n<span id=\"end\" style=\"display:none;\">\n<b>Now restore the window</b>. Do you see it? What happens here is that if\nyou try to shrink the window the columns do not remain 50%! In fact the yellow\nbox does not shrink to sizes smaller\nthan the one it had before executing:<br>'shell.innerHTML=shell.innerHTML;'<br><br>\n<b>IMPORTANT NOTE:</b> the problem <span style='color:red;'>does not happen at\nall</span> if the internal &lt;div&gt;\nwith the id 'problematic' does not have the 'position' style set to 'absolute',\nor the external one (with id 'shell')\ndoes not have the 'overflow' set to 'hidden'.\n</span>\n</div>\n\n\n<p><img src=\"http://www.w3.org/Icons/valid-html401\" alt=\"Valid HTML 4.01\nTransitional\" height=\"31\" width=\"88\"></p>\n\n<script type=\"text/javascript\">\n\nfunction damnBug()\n{\n var shell=document.getElementById(\"shell\");\n\n shell.innerHTML=shell.innerHTML;   // <---- the BUG happens only here, the rest\nis just for explaining\n\n document.getElementById(\"begin\").style.display=\"none\";\n document.getElementById(\"end\").style.display=\"block\";\n};\n\n</script>\n\n</body>\n</html>", "attachment_id": null, "creator": "antonio@compleasy.com", "is_private": false}, {"is_private": false, "time": "2005-10-19T20:03:32Z", "creation_time": "2005-10-19T20:03:32Z", "attachment_id": 200128, "creator": "antonio@compleasy.com", "raw_text": "", "bug_id": 313049, "tags": [], "text": "Created attachment 200128\nA sample html page that describes the problem (validated on http://validator.w3.org/)", "author": "antonio@compleasy.com", "id": 2671876, "count": 1}, {"bug_id": 313049, "is_private": false, "tags": [], "text": "Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.8b5) Gecko/20051019 Firefox/1.5\nID:2005101904\n\nWFM. NB Despite the useragent, 1.5 is not released yet; 1.5b2 is available at\nmozilla.org and 1.5 RC1 is scheduled for release 29/Oct/05.", "author": "nrthomas@gmail.com", "time": "2005-10-19T20:12:34Z", "creation_time": "2005-10-19T20:12:34Z", "id": 2671888, "count": 2, "attachment_id": null, "creator": "nrthomas@gmail.com", "raw_text": "Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.8b5) Gecko/20051019 Firefox/1.5\nID:2005101904\n\nWFM. NB Despite the useragent, 1.5 is not released yet; 1.5b2 is available at\nmozilla.org and 1.5 RC1 is scheduled for release 29/Oct/05."}, {"bug_id": 313049, "tags": [], "text": "Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.8b5) Gecko/20051019\nFirefox/1.5 ID:2005101913\n\nWFM", "author": "peter.vanderwoude@gmail.com", "id": 2671994, "count": 3, "is_private": false, "creation_time": "2005-10-19T21:50:55Z", "time": "2005-10-19T21:50:55Z", "creator": "peter.vanderwoude@gmail.com", "attachment_id": null, "raw_text": "Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.8b5) Gecko/20051019\nFirefox/1.5 ID:2005101913\n\nWFM"}, {"text": "Created attachment 200449\nPHP file which sends an XHTML header + testcase\n\nI think I found something.\n\nThe attached testcase (.php) does a:\n\nheader(\"Content-type: application/xhtml+xml\");\n\nto send the correct MIME type for this XHTML doc. The testcase breaks with the\nfollowing error:\n\nError: uncaught exception: [Exception... \"Component returned failure code:\n0x80004005 (NS_ERROR_FAILURE) [nsIDOMNSHTMLElement.innerHTML]\"\tnsresult:\n\"0x80004005 (NS_ERROR_FAILURE)\"  location: \"JS frame ::\nhttp://path/testcase.innerHTML_bug.php :: changeText :: line 9\"  data: no]\n\nHowever if I send the document as 'text/html' (in my case by removing\nadditional header) it works!\n\nMaybe I'm overlooking something but it seems to me like the works/breaks\n\"switch\" is the MIME type sent with the document.\n\nNote: I've uploaded this testcase to bugilla as application/xhtml+xml.", "author": "mail@marcd.ch", "bug_id": 313049, "tags": [], "id": 2674756, "count": 4, "is_private": false, "attachment_id": 200449, "creator": "mail@marcd.ch", "raw_text": "I think I found something.\n\nThe attached testcase (.php) does a:\n\nheader(\"Content-type: application/xhtml+xml\");\n\nto send the correct MIME type for this XHTML doc. The testcase breaks with the\nfollowing error:\n\nError: uncaught exception: [Exception... \"Component returned failure code:\n0x80004005 (NS_ERROR_FAILURE) [nsIDOMNSHTMLElement.innerHTML]\"\tnsresult:\n\"0x80004005 (NS_ERROR_FAILURE)\"  location: \"JS frame ::\nhttp://path/testcase.innerHTML_bug.php :: changeText :: line 9\"  data: no]\n\nHowever if I send the document as 'text/html' (in my case by removing\nadditional header) it works!\n\nMaybe I'm overlooking something but it seems to me like the works/breaks\n\"switch\" is the MIME type sent with the document.\n\nNote: I've uploaded this testcase to bugilla as application/xhtml+xml.", "time": "2005-10-22T17:02:14Z", "creation_time": "2005-10-22T17:02:14Z"}, {"count": 5, "id": 2674779, "author": "mail@marcd.ch", "text": "(In reply to comment #4)\n\nMozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.12) Gecko/20050915\nFirefox/1.0.7\n\njust noticed that the innerHTML + XHTML MIMEtype trouble was bug 133827, which\nis marked \"resolved\". Well in Firefox 1.7.12 it's broken:(\n\nsry for the spam.\n\n", "tags": [], "bug_id": 313049, "raw_text": "(In reply to comment #4)\n\nMozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.12) Gecko/20050915\nFirefox/1.0.7\n\njust noticed that the innerHTML + XHTML MIMEtype trouble was bug 133827, which\nis marked \"resolved\". Well in Firefox 1.7.12 it's broken:(\n\nsry for the spam.\n\n", "attachment_id": null, "creator": "mail@marcd.ch", "time": "2005-10-22T17:30:34Z", "creation_time": "2005-10-22T17:30:34Z", "is_private": false}, {"id": 4651185, "creation_time": "2010-04-21T05:06:52Z", "time": "2010-04-21T05:06:52Z", "count": 6, "creator": "tdowner@mozilla.com", "attachment_id": null, "raw_text": "This bug was reported on Firefox 2.x or older, which is no longer supported and will not be receiving any more updates. I strongly suggest that you update to Firefox 3.6.3 or later, update your plugins (flash, adobe, etc.), and retest in a new profile. If you still see the issue with the updated Firefox, please post here. Otherwise, please close as RESOLVED > WORKSFORME\nhttp://www.mozilla.com\nhttp://support.mozilla.com/kb/Managing+profiles\nhttp://support.mozilla.com/kb/Safe+mode", "bug_id": 313049, "tags": [], "is_private": false, "text": "This bug was reported on Firefox 2.x or older, which is no longer supported and will not be receiving any more updates. I strongly suggest that you update to Firefox 3.6.3 or later, update your plugins (flash, adobe, etc.), and retest in a new profile. If you still see the issue with the updated Firefox, please post here. Otherwise, please close as RESOLVED > WORKSFORME\nhttp://www.mozilla.com\nhttp://support.mozilla.com/kb/Managing+profiles\nhttp://support.mozilla.com/kb/Safe+mode", "author": "tdowner@mozilla.com"}, {"bug_id": 313049, "tags": [], "is_private": false, "text": "No reply, INCOMPLETE. Please retest with Firefox 3.6.3 or later and a new profile (http://support.mozilla.com/kb/Managing+profiles). If you continue to see this issue with the newest firefox and a new profile, then please comment on this bug.", "author": "tdowner@mozilla.com", "time": "2010-05-15T16:44:53Z", "id": 4696421, "creation_time": "2010-05-15T16:44:53Z", "count": 7, "attachment_id": null, "creator": "tdowner@mozilla.com", "raw_text": "No reply, INCOMPLETE. Please retest with Firefox 3.6.3 or later and a new profile (http://support.mozilla.com/kb/Managing+profiles). If you continue to see this issue with the newest firefox and a new profile, then please comment on this bug."}]}}}