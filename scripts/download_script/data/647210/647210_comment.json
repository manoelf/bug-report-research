{"bugs": {"647210": {"comments": [{"creation_time": "2011-04-01T12:57:41Z", "tags": [], "attachment_id": null, "raw_text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; fr; rv:1.9.2.16) Gecko/20110319 Firefox/3.6.16 ( .NET CLR 3.5.30729; .NET4.0E)\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; fr; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9\n\n-Use a text/html template, and the html signature set in the corresponding account parameters, with rules to automaticaly answer back any incoming mail \n-If the signature embeds a picture, be it local or on a server, the picture is not properly sent.\n- In fact, the sent answer starts with: \" This is a multi-part message in MIME format. --------------010406090004040806070208 Content-Type: text/html; charset=ISO-8859-1 Content-Transfer-Encoding: 7bit \"\n\n- The end of the answers ends with some hash, in this style : \" --------------010406090004040806070208 Content-Type: image/jpeg; name=\"customLogo.gif\" Content-Transfer-Encoding: base64 Content-ID: Content-Disposition: inline; filename=\"customLogo.gif\" /9j/4AAQSkZJRgABAQAAAQABAAD/2w........(looooooooong hash).....(end=)MU4ehjzDYLnlfLEZe4V62v02+mnWI0NDTBTjJLPsiZdHoaGipr/2Q== --------------010406090004040806070208-- \n\n- The picture is not joined, but it's place is reserved.\n\n- Going to see at the html composing the answer, the source of the picture is \"src=\"cid:part1.02090907.03040002@gmail.com\", despite a valid http adress for it was correctly given as src in the html that composes the signature\n-The same when pointing the picture \"src=\" to a local picture\n\n- When looking at the html from the code that makes the answer before it is sent, the reference to the picture is sytematically changed for an inner deep folder from the main thunderbird's user folder...\n\n\nReproducible: Always\n\nSteps to Reproduce:\n1.make a rule to send a signed answer to incoming mails, with a classic html moz-signature which includes a picture, whatever its location \n\n2.Observe the html which makes the answer before it's sent : the picture's src= from the moz-signature is never the one that was programmed in the moz-signature\n\n3.See the unexpected result in the answered mail after it has reached its target e-mail adress.\n\n\nActual Results:  \nThe signature issued from the moz-signature used through a filter/rule programmed to answer incoming mails is displayed strangely, compared to classic sent mails'signature \n\nExpected Results:  \nThe result shouldn't be different than when just using signatures in a sent mail", "creator": "rdm.cogefim@free.fr", "bug_id": 647210, "text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; fr; rv:1.9.2.16) Gecko/20110319 Firefox/3.6.16 ( .NET CLR 3.5.30729; .NET4.0E)\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; fr; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9\n\n-Use a text/html template, and the html signature set in the corresponding account parameters, with rules to automaticaly answer back any incoming mail \n-If the signature embeds a picture, be it local or on a server, the picture is not properly sent.\n- In fact, the sent answer starts with: \" This is a multi-part message in MIME format. --------------010406090004040806070208 Content-Type: text/html; charset=ISO-8859-1 Content-Transfer-Encoding: 7bit \"\n\n- The end of the answers ends with some hash, in this style : \" --------------010406090004040806070208 Content-Type: image/jpeg; name=\"customLogo.gif\" Content-Transfer-Encoding: base64 Content-ID: Content-Disposition: inline; filename=\"customLogo.gif\" /9j/4AAQSkZJRgABAQAAAQABAAD/2w........(looooooooong hash).....(end=)MU4ehjzDYLnlfLEZe4V62v02+mnWI0NDTBTjJLPsiZdHoaGipr/2Q== --------------010406090004040806070208-- \n\n- The picture is not joined, but it's place is reserved.\n\n- Going to see at the html composing the answer, the source of the picture is \"src=\"cid:part1.02090907.03040002@gmail.com\", despite a valid http adress for it was correctly given as src in the html that composes the signature\n-The same when pointing the picture \"src=\" to a local picture\n\n- When looking at the html from the code that makes the answer before it is sent, the reference to the picture is sytematically changed for an inner deep folder from the main thunderbird's user folder...\n\n\nReproducible: Always\n\nSteps to Reproduce:\n1.make a rule to send a signed answer to incoming mails, with a classic html moz-signature which includes a picture, whatever its location \n\n2.Observe the html which makes the answer before it's sent : the picture's src= from the moz-signature is never the one that was programmed in the moz-signature\n\n3.See the unexpected result in the answered mail after it has reached its target e-mail adress.\n\n\nActual Results:  \nThe signature issued from the moz-signature used through a filter/rule programmed to answer incoming mails is displayed strangely, compared to classic sent mails'signature \n\nExpected Results:  \nThe result shouldn't be different than when just using signatures in a sent mail", "is_private": false, "time": "2011-04-01T12:57:41Z", "author": "rdm.cogefim@free.fr", "count": 0, "id": 5386117}, {"text": "Would you mind sharing your code for the sig\n\nDoes it work properly as a regular sig rather that a filter response.\n\nIf your intention is to retain a remote location for the image, you might try this\n\n<img moz-do-not-send=\"true\" src=\"xxxxx\"", "bug_id": 647210, "creator": "jsabash@bellatlantic.net", "raw_text": "Would you mind sharing your code for the sig\n\nDoes it work properly as a regular sig rather that a filter response.\n\nIf your intention is to retain a remote location for the image, you might try this\n\n<img moz-do-not-send=\"true\" src=\"xxxxx\"", "attachment_id": null, "tags": [], "creation_time": "2011-04-02T04:18:03Z", "id": 5387991, "count": 1, "time": "2011-04-02T04:18:03Z", "author": "jsabash@bellatlantic.net", "is_private": false}, {"bug_id": 647210, "creation_time": "2011-04-02T06:47:08Z", "tags": [], "attachment_id": null, "id": 5388066, "is_private": false, "author": "rdm.cogefim@free.fr", "text": "Thx Joe. Will have to try as  soon as I'm back at work on Monday (and for sharing the sig also, since it's a project from a local computer)\n\nBut : yes, it works like a charm as a regular sig.", "raw_text": "Thx Joe. Will have to try as  soon as I'm back at work on Monday (and for sharing the sig also, since it's a project from a local computer)\n\nBut : yes, it works like a charm as a regular sig.", "creator": "rdm.cogefim@free.fr", "time": "2011-04-02T06:47:08Z", "count": 2}, {"text": "Ok, here's the model code for my html sig : it's a table, an the pic is correctly sent when used as a regular signature.\n\n\n<table style=\"text-align: left; margin-left: 0px; min-height: 143px; width: 527px;\" border=\"0\" cellpadding=\"2\" cellspacing=\"2\">\n<tbody>\n<tr>\n<td colspan=\"1\" rowspan=\"2\" style=\"min-height: 69px; width: 68px;\" valign=\"center\" align=\"left\"><img src=\"https://sites.google.com/site/cfdocu/_/rsrc/1300102818395/config/customLogo.gif?revision=2\" alt=\"Logo\" title=\"Logo\nCogefim\" width=\"71\" height=\"98\"><br>\n</td>\n<td colspan=\"2\" rowspan=\"1\" style=\"text-align: left; min-height: 49px; width: 225px;\"><span style=\"font-family: Garamond; color: black; text-decoration: underline;\"><span style=\"font-weight: bold;\">xxx yyyyyyy</span> -\nAssistant Recrutement &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></td>\n</tr>\n<tr>\n<td style=\"min-height: 69px; width: 225px;\" valign=\"top\" align=\"left\"><small><span style=\"font-family: Garamond;\"><span style=\"color: rgb(102, 51, 102);\"> Agence : </span>&nbsp;xxxxxxx\n\nxxx<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xxxxxxxx<br>\n<br>\n<span style=\"color: rgb(102, 51, 102);\">GSM :</span> &nbsp; &nbsp;\nxx xx xx xx xx</span></small></td>\n<td style=\"min-height: 69px;\" valign=\"top\" align=\"left\"><small><span style=\"font-family: Garamond;\"><span style=\"color: rgb(102, 51, 102);\">E-Mail :</span> &nbsp;<a href=\"\" target=\"_blank\">xxxx.yyy@zzzz.com</a><br>\n\n<span style=\"color: rgb(102, 51, 102);\">Fax :</span> &nbsp; &nbsp;\n&nbsp; &nbsp;xx xx xx xx xx<br>\n<span style=\"color: rgb(102, 51, 102);\">T\u00e9l :</span> &nbsp; &nbsp;\n&nbsp; &nbsp; xx xx xx xx<br>\n<span style=\"color: rgb(102, 51, 102);\">Site :</span> &nbsp;\n&nbsp; &nbsp; &nbsp;<a href=\"http://www.cogefim.fr\" target=\"_blank\">www.cogefim.fr</a></span></small></td>\n</tr>\n</tbody>\n</table>", "bug_id": 647210, "creator": "rdm.cogefim@free.fr", "raw_text": "Ok, here's the model code for my html sig : it's a table, an the pic is correctly sent when used as a regular signature.\n\n\n<table style=\"text-align: left; margin-left: 0px; min-height: 143px; width: 527px;\" border=\"0\" cellpadding=\"2\" cellspacing=\"2\">\n<tbody>\n<tr>\n<td colspan=\"1\" rowspan=\"2\" style=\"min-height: 69px; width: 68px;\" valign=\"center\" align=\"left\"><img src=\"https://sites.google.com/site/cfdocu/_/rsrc/1300102818395/config/customLogo.gif?revision=2\" alt=\"Logo\" title=\"Logo\nCogefim\" width=\"71\" height=\"98\"><br>\n</td>\n<td colspan=\"2\" rowspan=\"1\" style=\"text-align: left; min-height: 49px; width: 225px;\"><span style=\"font-family: Garamond; color: black; text-decoration: underline;\"><span style=\"font-weight: bold;\">xxx yyyyyyy</span> -\nAssistant Recrutement &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></td>\n</tr>\n<tr>\n<td style=\"min-height: 69px; width: 225px;\" valign=\"top\" align=\"left\"><small><span style=\"font-family: Garamond;\"><span style=\"color: rgb(102, 51, 102);\"> Agence : </span>&nbsp;xxxxxxx\n\nxxx<br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xxxxxxxx<br>\n<br>\n<span style=\"color: rgb(102, 51, 102);\">GSM :</span> &nbsp; &nbsp;\nxx xx xx xx xx</span></small></td>\n<td style=\"min-height: 69px;\" valign=\"top\" align=\"left\"><small><span style=\"font-family: Garamond;\"><span style=\"color: rgb(102, 51, 102);\">E-Mail :</span> &nbsp;<a href=\"\" target=\"_blank\">xxxx.yyy@zzzz.com</a><br>\n\n<span style=\"color: rgb(102, 51, 102);\">Fax :</span> &nbsp; &nbsp;\n&nbsp; &nbsp;xx xx xx xx xx<br>\n<span style=\"color: rgb(102, 51, 102);\">T\u00e9l :</span> &nbsp; &nbsp;\n&nbsp; &nbsp; xx xx xx xx<br>\n<span style=\"color: rgb(102, 51, 102);\">Site :</span> &nbsp;\n&nbsp; &nbsp; &nbsp;<a href=\"http://www.cogefim.fr\" target=\"_blank\">www.cogefim.fr</a></span></small></td>\n</tr>\n</tbody>\n</table>", "attachment_id": null, "creation_time": "2011-04-02T07:43:47Z", "tags": [], "id": 5388104, "count": 3, "time": "2011-04-02T07:43:47Z", "author": "rdm.cogefim@free.fr", "is_private": false}, {"count": 4, "time": "2011-04-04T08:41:41Z", "text": "(In reply to comment #1)\n> \n> \n> If your intention is to retain a remote location for the image, you might try\n> this\n> \n> <img moz-do-not-send=\"true\" src=\"xxxxx\"\n\n@ Joe Sabash :\nI can confirm that this workaround works very well. Despite it's not natural compared to regular signature. \nAnyway, very knoledgeable and clever support. A thousand thanks to you.", "creator": "rdm.cogefim@free.fr", "raw_text": "(In reply to comment #1)\n> \n> \n> If your intention is to retain a remote location for the image, you might try\n> this\n> \n> <img moz-do-not-send=\"true\" src=\"xxxxx\"\n\n@ Joe Sabash :\nI can confirm that this workaround works very well. Despite it's not natural compared to regular signature. \nAnyway, very knoledgeable and clever support. A thousand thanks to you.", "id": 5389898, "author": "rdm.cogefim@free.fr", "is_private": false, "bug_id": 647210, "attachment_id": null, "tags": [], "creation_time": "2011-04-04T08:41:41Z"}, {"text": "I can confirm this bug, it just cropped up in bug 1370076 comment #5.\n\nThe template was a multipart message with an embedded image via CID: reference and the result is what is shown in comment #0, a message with a broken MIME structure.\n\nThe cause of this is in the defective auto-reply code:\nhttps://dxr.mozilla.org/comm-central/rev/62db49c50e60514a4178651227629a9625381cb4/mailnews/compose/src/nsMsgComposeService.cpp#957\n\nThey are streaming the message instead of looking at the MIME parts properly. That works for simple templates but not multipart ones.", "bug_id": 647210, "creator": "jorgk-bmo@jorgk.com", "raw_text": "I can confirm this bug, it just cropped up in bug 1370076 comment #5.\n\nThe template was a multipart message with an embedded image via CID: reference and the result is what is shown in comment #0, a message with a broken MIME structure.\n\nThe cause of this is in the defective auto-reply code:\nhttps://dxr.mozilla.org/comm-central/rev/62db49c50e60514a4178651227629a9625381cb4/mailnews/compose/src/nsMsgComposeService.cpp#957\n\nThey are streaming the message instead of looking at the MIME parts properly. That works for simple templates but not multipart ones.", "attachment_id": null, "creation_time": "2017-06-04T19:27:48Z", "tags": [], "id": 12370801, "count": 5, "author": "jorgk-bmo@jorgk.com", "time": "2017-06-04T19:27:48Z", "is_private": false}, {"count": 6, "time": "2017-06-11T20:18:45Z", "text": "*** Bug 1178744 has been marked as a duplicate of this bug. ***", "creator": "jorgk-bmo@jorgk.com", "raw_text": "", "id": 12388888, "author": "jorgk-bmo@jorgk.com", "is_private": false, "bug_id": 647210, "attachment_id": null, "tags": [], "creation_time": "2017-06-11T20:18:45Z"}, {"text": "*** Bug 1371998 has been marked as a duplicate of this bug. ***", "creator": "jorgk-bmo@jorgk.com", "raw_text": "", "count": 7, "time": "2017-06-11T20:19:15Z", "bug_id": 647210, "attachment_id": null, "tags": [], "creation_time": "2017-06-11T20:19:15Z", "id": 12388890, "author": "jorgk-bmo@jorgk.com", "is_private": false}, {"count": 8, "time": "2017-06-17T14:11:54Z", "text": "*** Bug 1373933 has been marked as a duplicate of this bug. ***", "creator": "jorgk-bmo@jorgk.com", "raw_text": "", "id": 12406967, "author": "jorgk-bmo@jorgk.com", "is_private": false, "bug_id": 647210, "attachment_id": null, "creation_time": "2017-06-17T14:11:54Z", "tags": []}]}}, "comments": {}}