{"bugs": {"668174": {"comments": [{"tags": [], "attachment_id": 542761, "is_private": false, "creation_time": "2011-06-29T11:03:09Z", "creator": "lobais@gmail.com", "time": "2011-06-29T11:03:09Z", "raw_text": "User Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.68 Safari/534.30\n\nSteps to reproduce:\n\nInstall the chess alpha 2 font from http://www.enpassant.dk/chess/fonteng.htm\nOpen the attached html, which uses the font\n\n\nActual results:\n\nNotice that what should be white chess squares, are instead an '.\n\n\nExpected results:\n\nIn other browsers and text editors the font correctly gets applied to the ' character so it becomes a white square.", "id": 5564123, "bug_id": 668174, "count": 0, "text": "Created attachment 542761\nThomas Dybdahl Ahle vs. Guest.html\n\nUser Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.68 Safari/534.30\n\nSteps to reproduce:\n\nInstall the chess alpha 2 font from http://www.enpassant.dk/chess/fonteng.htm\nOpen the attached html, which uses the font\n\n\nActual results:\n\nNotice that what should be white chess squares, are instead an '.\n\n\nExpected results:\n\nIn other browsers and text editors the font correctly gets applied to the ' character so it becomes a white square.", "author": "lobais@gmail.com"}, {"raw_text": "I suspect this is related to Fontconfig's behavior (e.g. see under FcBlanks at http://www.freedesktop.org/software/fontconfig/fontconfig-devel/x102.html):\n\n\"An FcBlanks object holds a list of Unicode chars which are expected to be blank when drawn. When scanning new fonts, any glyphs which are empty and not in this list will be assumed to be broken and not placed in the FcCharSet associated with the font. This provides a significantly more accurate CharSet for applications.\"\n\nThe apostrophe (U+0027) is of course not included in the default list of \"should-be-blank\" Unicode characters; therefore, when Fontconfig sees that the glyph for this codepoint is blank, it omits it from the font's charset, and so we fall back to a different font in order to display the character.\n\nBasically, this arises because the font does not conform to standard Unicode encoding but (ab)uses codepoints for arbitrary purposes. That is not a good recipe for reliability or interoperability.", "time": "2011-06-29T14:43:04Z", "author": "jfkthame@gmail.com", "text": "I suspect this is related to Fontconfig's behavior (e.g. see under FcBlanks at http://www.freedesktop.org/software/fontconfig/fontconfig-devel/x102.html):\n\n\"An FcBlanks object holds a list of Unicode chars which are expected to be blank when drawn. When scanning new fonts, any glyphs which are empty and not in this list will be assumed to be broken and not placed in the FcCharSet associated with the font. This provides a significantly more accurate CharSet for applications.\"\n\nThe apostrophe (U+0027) is of course not included in the default list of \"should-be-blank\" Unicode characters; therefore, when Fontconfig sees that the glyph for this codepoint is blank, it omits it from the font's charset, and so we fall back to a different font in order to display the character.\n\nBasically, this arises because the font does not conform to standard Unicode encoding but (ab)uses codepoints for arbitrary purposes. That is not a good recipe for reliability or interoperability.", "count": 1, "id": 5564502, "bug_id": 668174, "attachment_id": null, "tags": [], "creator": "jfkthame@gmail.com", "is_private": false, "creation_time": "2011-06-29T14:43:04Z"}, {"tags": [], "time": "2011-06-29T16:01:55Z", "attachment_id": null, "raw_text": "It's still a bit strange, that I haven't been able to find any other renderer, that doesn't display it as intended.\nCan FcBlank be configured by the font, or does the font just have to choose an already blank character?", "id": 5564697, "bug_id": 668174, "creation_time": "2011-06-29T16:01:55Z", "is_private": false, "creator": "lobais@gmail.com", "author": "lobais@gmail.com", "count": 2, "text": "It's still a bit strange, that I haven't been able to find any other renderer, that doesn't display it as intended.\nCan FcBlank be configured by the font, or does the font just have to choose an already blank character?"}, {"is_private": false, "creation_time": "2011-06-29T17:39:50Z", "creator": "jfkthame@gmail.com", "tags": [], "attachment_id": null, "id": 5564918, "bug_id": 668174, "text": "Karl, maybe you can comment on whether there's anything we could/should try to do about this? Is my understanding of the fontconfig issue correct?", "count": 3, "author": "jfkthame@gmail.com", "raw_text": "Karl, maybe you can comment on whether there's anything we could/should try to do about this? Is my understanding of the fontconfig issue correct?", "time": "2011-06-29T17:39:50Z"}, {"id": 5564933, "bug_id": 668174, "creation_time": "2011-06-29T17:48:01Z", "is_private": false, "creator": "jfkthame@gmail.com", "author": "jfkthame@gmail.com", "text": "(In reply to comment #2)\n> Can FcBlank be configured by the font,\n\nI don't think so....\n\n> or does the font just have to choose\n> an already blank character?\n\nIf the font were used as a downloadable webfont, referenced via @font-face from the page's CSS, then it looks like we'd ignore the standard \"blanks\" set and assume the author knows what he's doing. So that would give a better chance of \"working\" as you expect. (I don't know whether that particular font's license would permit such usage, just noting that from a technical point of view it would probably help.)", "count": 4, "tags": [], "time": "2011-06-29T17:48:01Z", "attachment_id": null, "raw_text": "(In reply to comment #2)\n> Can FcBlank be configured by the font,\n\nI don't think so....\n\n> or does the font just have to choose\n> an already blank character?\n\nIf the font were used as a downloadable webfont, referenced via @font-face from the page's CSS, then it looks like we'd ignore the standard \"blanks\" set and assume the author knows what he's doing. So that would give a better chance of \"working\" as you expect. (I don't know whether that particular font's license would permit such usage, just noting that from a technical point of view it would probably help.)"}, {"id": 5565558, "bug_id": 668174, "is_private": false, "creation_time": "2011-06-29T21:19:45Z", "creator": "karlt@mozbugz.karlt.net", "author": "karlt@mozbugz.karlt.net", "count": 5, "text": "Your understanding is correct, Jonathan.\n\nThe font claims to support Unicode characters but renders different symbols.  We shouldn't encourage such fonts to be installed as they risk causing chess pieces to appear where other characters should be rendered.\n\nFonts rendering chess pieces should use the appropriate Unicode characters (e.g. U+2654-265F) or Private Use Area points if there is no suitable Unicode character.  Similarly documents should use appropriate code points.", "tags": [], "time": "2011-06-29T21:19:45Z", "attachment_id": null, "raw_text": "Your understanding is correct, Jonathan.\n\nThe font claims to support Unicode characters but renders different symbols.  We shouldn't encourage such fonts to be installed as they risk causing chess pieces to appear where other characters should be rendered.\n\nFonts rendering chess pieces should use the appropriate Unicode characters (e.g. U+2654-265F) or Private Use Area points if there is no suitable Unicode character.  Similarly documents should use appropriate code points."}, {"creation_time": "2012-02-12T12:01:49Z", "is_private": false, "creator": "lobais@gmail.com", "tags": [], "attachment_id": null, "bug_id": 668174, "id": 6054185, "author": "lobais@gmail.com", "count": 6, "text": "(In reply to Karl Tomlinson (:karlt) from comment #5)\n> Fonts rendering chess pieces should use the appropriate Unicode characters\n> (e.g. U+2654-265F) or Private Use Area points if there is no suitable\n> Unicode character.  Similarly documents should use appropriate code points.\n\nThat does make them really tough to type in standard text editors though.", "raw_text": "(In reply to Karl Tomlinson (:karlt) from comment #5)\n> Fonts rendering chess pieces should use the appropriate Unicode characters\n> (e.g. U+2654-265F) or Private Use Area points if there is no suitable\n> Unicode character.  Similarly documents should use appropriate code points.\n\nThat does make them really tough to type in standard text editors though.", "time": "2012-02-12T12:01:49Z"}]}}, "comments": {}}