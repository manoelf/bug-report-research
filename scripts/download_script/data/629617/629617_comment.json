{"comments": {}, "bugs": {"629617": {"comments": [{"text": "(Noticed in bug 629616.)\n\nhttp://tinderbox.mozilla.org/showlog.cgi?log=Firefox/1296198631.1296200217.16074.gz&fulltext=1\nRev3 Fedora 12 mozilla-central debug test reftest on 2011/01/27 23:10:31\nhttp://tinderbox.mozilla.org/showlog.cgi?log=Firefox/1296200620.1296201926.23680.gz&fulltext=1\nRev3 Fedora 12x64 mozilla-central debug test reftest on 2011/01/27 23:43:40\nhttp://tinderbox.mozilla.org/showlog.cgi?log=SeaMonkey/1296192115.1296195559.26216.gz&fulltext=1\nLinux comm-central-trunk debug test reftest on 2011/01/27 21:21:55\n{\nJavaScript strict warning: chrome://reftest/content/reftest.js, line 400:\nreference to undefined property CC[NS_GFXINFO_CONTRACTID]\n}", "is_private": false, "bug_id": 629617, "raw_text": "(Noticed in bug 629616.)\n\nhttp://tinderbox.mozilla.org/showlog.cgi?log=Firefox/1296198631.1296200217.16074.gz&fulltext=1\nRev3 Fedora 12 mozilla-central debug test reftest on 2011/01/27 23:10:31\nhttp://tinderbox.mozilla.org/showlog.cgi?log=Firefox/1296200620.1296201926.23680.gz&fulltext=1\nRev3 Fedora 12x64 mozilla-central debug test reftest on 2011/01/27 23:43:40\nhttp://tinderbox.mozilla.org/showlog.cgi?log=SeaMonkey/1296192115.1296195559.26216.gz&fulltext=1\nLinux comm-central-trunk debug test reftest on 2011/01/27 21:21:55\n{\nJavaScript strict warning: chrome://reftest/content/reftest.js, line 400:\nreference to undefined property CC[NS_GFXINFO_CONTRACTID]\n}", "creator": "bugzillamozillaorg_serge_20140323@gautherie.fr", "id": 5234740, "attachment_id": null, "creation_time": "2011-01-28T08:28:03Z", "count": 0, "time": "2011-01-28T08:28:03Z", "author": "bugzillamozillaorg_serge_20140323@gautherie.fr", "tags": []}, {"raw_text": "I assume this just misses a check for this interface.\nIn a few other places too: see bug 629957 for example.", "is_private": false, "bug_id": 629617, "text": "I assume this just misses a check for this interface.\nIn a few other places too: see bug 629957 for example.", "attachment_id": null, "id": 5238068, "creator": "bugzillamozillaorg_serge_20140323@gautherie.fr", "author": "bugzillamozillaorg_serge_20140323@gautherie.fr", "time": "2011-01-30T00:43:16Z", "count": 1, "creation_time": "2011-01-30T00:43:16Z", "tags": []}, {"count": 2, "creation_time": "2011-02-01T01:08:52Z", "author": "dholbert@mozilla.com", "time": "2011-02-01T01:08:52Z", "tags": [], "text": "This causes 582 lines of spam at the beginning of every local \"make reftest\" run that I run.  (though it feels like more, since the third line is 715 characters long)\nThose 582 lines consist of 194 instances of the following triplet:\n====\nJavaScript strict warning: chrome://reftest/content/reftest.js, line 400: reference to undefined property CC[NS_GFXINFO_CONTRACTID]\nREFTEST INFO | Dumping JSON representation of sandbox\nREFTEST INFO | {\"isDebugBuild\":true,\"xulRuntime\":{\"widgetToolkit\":\"gtk2\",\"OS\":\"Linux\",\"XPCOMABI\":\"x86_64-gcc3\"},\"d2d\":false,\"layersGPUAccelerated\":false,\"cocoaWidget\":false,\"gtk2Widget\":true,\"qtWidget\":false,\"winWidget\":false,\"http\":{\"userAgent\":\"Mozilla/5.0 (X11; Linux x86_64; rv:2.0b11pre) Gecko/20110131 Firefox/4.0b11pre\",\"appName\":\"Mozilla\",\"appVersion\":\"5.0\",\"product\":\"Gecko\",\"productSub\":\"20110131\",\"platform\":\"X11\",\"oscpu\":\"Linux x86_64\",\"language\":\"en-US\",\"misc\":\"rv:2.0b11pre\"},\"haveTestPlugin\":true,\"windowsDefaultTheme\":false,\"nativeThemePref\":true,\"prefs\":{\"__exposedProps__\":{\"getBoolPref\":\"r\",\"getIntPref\":\"r\"},\"_prefs\":{\"root\":\"\",\"PREF_INVALID\":0,\"PREF_STRING\":32,\"PREF_INT\":64,\"PREF_BOOL\":128}}}\n====", "raw_text": "This causes 582 lines of spam at the beginning of every local \"make reftest\" run that I run.  (though it feels like more, since the third line is 715 characters long)\nThose 582 lines consist of 194 instances of the following triplet:\n====\nJavaScript strict warning: chrome://reftest/content/reftest.js, line 400: reference to undefined property CC[NS_GFXINFO_CONTRACTID]\nREFTEST INFO | Dumping JSON representation of sandbox\nREFTEST INFO | {\"isDebugBuild\":true,\"xulRuntime\":{\"widgetToolkit\":\"gtk2\",\"OS\":\"Linux\",\"XPCOMABI\":\"x86_64-gcc3\"},\"d2d\":false,\"layersGPUAccelerated\":false,\"cocoaWidget\":false,\"gtk2Widget\":true,\"qtWidget\":false,\"winWidget\":false,\"http\":{\"userAgent\":\"Mozilla/5.0 (X11; Linux x86_64; rv:2.0b11pre) Gecko/20110131 Firefox/4.0b11pre\",\"appName\":\"Mozilla\",\"appVersion\":\"5.0\",\"product\":\"Gecko\",\"productSub\":\"20110131\",\"platform\":\"X11\",\"oscpu\":\"Linux x86_64\",\"language\":\"en-US\",\"misc\":\"rv:2.0b11pre\"},\"haveTestPlugin\":true,\"windowsDefaultTheme\":false,\"nativeThemePref\":true,\"prefs\":{\"__exposedProps__\":{\"getBoolPref\":\"r\",\"getIntPref\":\"r\"},\"_prefs\":{\"root\":\"\",\"PREF_INVALID\":0,\"PREF_STRING\":32,\"PREF_INT\":64,\"PREF_BOOL\":128}}}\n====", "bug_id": 629617, "is_private": false, "creator": "dholbert@mozilla.com", "attachment_id": null, "id": 5241609}, {"tags": [], "author": "dholbert@mozilla.com", "time": "2011-02-01T01:34:26Z", "count": 3, "creation_time": "2011-02-01T01:34:26Z", "attachment_id": null, "id": 5241666, "creator": "dholbert@mozilla.com", "raw_text": "oh, looks like I already filed this a while back. :) dupe of Bug 590010, I think.", "bug_id": 629617, "is_private": false, "text": "oh, looks like I already filed this a while back. :) dupe of Bug 590010, I think."}, {"author": "dholbert@mozilla.com", "time": "2011-02-01T01:36:56Z", "count": 4, "creation_time": "2011-02-01T01:36:56Z", "tags": [], "raw_text": "...on which sgautherie mentions having filed this bug as an offshoot, possibly on the assumption that \"reference to undefined property\" is distinct from the REFTEST INFO lines.\n\nI think it's all the same issue, though -- we're spamming the REFTEST INFO because of the \"reference to undefined property\" failure.\n\nDuping.  I think I have a trivial fix for this, too -- I'll post it on the other bug.", "bug_id": 629617, "is_private": false, "text": "...on which sgautherie mentions having filed this bug as an offshoot, possibly on the assumption that \"reference to undefined property\" is distinct from the REFTEST INFO lines.\n\nI think it's all the same issue, though -- we're spamming the REFTEST INFO because of the \"reference to undefined property\" failure.\n\nDuping.  I think I have a trivial fix for this, too -- I'll post it on the other bug.\n\n*** This bug has been marked as a duplicate of bug 590010 ***", "attachment_id": null, "id": 5241669, "creator": "dholbert@mozilla.com"}, {"creation_time": "2011-02-01T01:48:09Z", "count": 5, "time": "2011-02-01T01:48:09Z", "author": "dholbert@mozilla.com", "tags": [], "text": "(In reply to comment #4)\n> I think it's all the same issue, though -- we're spamming the REFTEST INFO\n> because of the \"reference to undefined property\" failure.\n\nd'oh, looks like I was wrong! I assumed it was all related, since there seemed to be an exact matching up between the \"reference to undefined property\" failures and the REFTEST INFO lines, but apparently it's separate, since my fix for the former does not fix the latter.", "bug_id": 629617, "is_private": false, "raw_text": "(In reply to comment #4)\n> I think it's all the same issue, though -- we're spamming the REFTEST INFO\n> because of the \"reference to undefined property\" failure.\n\nd'oh, looks like I was wrong! I assumed it was all related, since there seemed to be an exact matching up between the \"reference to undefined property\" failures and the REFTEST INFO lines, but apparently it's separate, since my fix for the former does not fix the latter.", "creator": "dholbert@mozilla.com", "id": 5241698, "attachment_id": null}, {"tags": [], "count": 6, "creation_time": "2011-02-01T01:51:26Z", "author": "dholbert@mozilla.com", "time": "2011-02-01T01:51:26Z", "creator": "dholbert@mozilla.com", "attachment_id": 508636, "id": 5241704, "text": "Created attachment 508636\nincomplete fix\n\nThis just moves the widget detection code up a bit and only evaluates CC[NS_GFXINFO_CONTRACTID] on Windows, since it's only implemented on Windows.", "raw_text": "This just moves the widget detection code up a bit and only evaluates CC[NS_GFXINFO_CONTRACTID] on Windows, since it's only implemented on Windows.", "is_private": false, "bug_id": 629617}, {"creator": "bugzillamozillaorg_serge_20140323@gautherie.fr", "id": 5241969, "attachment_id": 508636, "text": "Comment on attachment 508636\nincomplete fix\n\n>+    if (sandbox.winWidget) {\n\nIndeed, D2DEnabled can (probably) be true on Windows only.\n\n>       // nsIGfxInfo is currently only implemented on Windows\n\nBut this is not true (anymore): this interface exists on OSX and Android too.\n\n>-      sandbox.d2d = CC[NS_GFXINFO_CONTRACTID].getService(CI.nsIGfxInfo).D2DEnabled;\n>+      sandbox.d2d =\n>+        CC[NS_GFXINFO_CONTRACTID].getService(CI.nsIGfxInfo).D2DEnabled;\n\nI was more thinking about adding \"if (NS_GFXINFO_CONTRACTID in CC)\".\n\nThen, to do these for all occurrences of such code.", "bug_id": 629617, "is_private": false, "raw_text": ">+    if (sandbox.winWidget) {\n\nIndeed, D2DEnabled can (probably) be true on Windows only.\n\n>       // nsIGfxInfo is currently only implemented on Windows\n\nBut this is not true (anymore): this interface exists on OSX and Android too.\n\n>-      sandbox.d2d = CC[NS_GFXINFO_CONTRACTID].getService(CI.nsIGfxInfo).D2DEnabled;\n>+      sandbox.d2d =\n>+        CC[NS_GFXINFO_CONTRACTID].getService(CI.nsIGfxInfo).D2DEnabled;\n\nI was more thinking about adding \"if (NS_GFXINFO_CONTRACTID in CC)\".\n\nThen, to do these for all occurrences of such code.", "tags": [], "creation_time": "2011-02-01T04:39:22Z", "count": 7, "time": "2011-02-01T04:39:22Z", "author": "bugzillamozillaorg_serge_20140323@gautherie.fr"}, {"text": "Comment on attachment 508636\nincomplete fix\n\nah, ok - thanks for the notes.\n\nI'll let someone else handle that, then (maybe you? :)) -- I was just posting this patch as a quick itch-scratching.", "bug_id": 629617, "is_private": false, "raw_text": "ah, ok - thanks for the notes.\n\nI'll let someone else handle that, then (maybe you? :)) -- I was just posting this patch as a quick itch-scratching.", "creator": "dholbert@mozilla.com", "id": 5243282, "attachment_id": 508636, "creation_time": "2011-02-01T18:07:31Z", "count": 8, "time": "2011-02-01T18:07:31Z", "author": "dholbert@mozilla.com", "tags": []}]}}}