{"bugs": {"713713": {"comments": [{"raw_text": "I was poking at this elsewhere and it's all repeaty so I cleaned it up.", "creation_time": "2011-12-27T20:03:15Z", "attachment_id": null, "time": "2011-12-27T20:03:15Z", "text": "I was poking at this elsewhere and it's all repeaty so I cleaned it up.", "id": 5941437, "tags": [], "count": 0, "is_private": false, "bug_id": 713713, "author": "paul@oshannessy.com", "creator": "paul@oshannessy.com"}, {"bug_id": 713713, "id": 5941451, "tags": [], "count": 1, "is_private": false, "attachment_id": 584466, "time": "2011-12-27T20:10:13Z", "text": "Created attachment 584466\nPatch v0.1\n\nI'm not actually sure this is right (will the empty string be handled the same as no argument?). If not, I guess I could just not instantiate charsetArg so it will be undefined and that should be exactly the same as not passing anything.", "creation_time": "2011-12-27T20:10:13Z", "raw_text": "I'm not actually sure this is right (will the empty string be handled the same as no argument?). If not, I guess I could just not instantiate charsetArg so it will be undefined and that should be exactly the same as not passing anything.", "author": "paul@oshannessy.com", "creator": "paul@oshannessy.com"}, {"creation_time": "2012-01-11T23:06:35Z", "raw_text": ">diff --git a/browser/base/content/browser.js b/browser/base/content/browser.js\n\n> function OpenBrowserWindow()\n> {\n>-  var charsetArg = new String();\n>+  var charsetArg = \"\";\n\nmight as well also move this next to its first use\n\n>+  return window.openDialog(\"chrome://browser/content/\", \"_blank\",\n>+                           \"chrome,all,dialog=no\", defaultArgs, charsetArg);\n\nThis will change window.arguments.length, but the existing checks for this (which are ancient and kind of ugly) should handle this OK, since they null check arguments[1], and nothing else cares about window.arguments.length == 1 vs. 2.\n\nhttp://hg.mozilla.org/mozilla-central/annotate/d85920b5691b/browser/base/content/browser.js#l1453\n\nYou could write a test to ensure this, though!", "text": "Comment on attachment 584466\nPatch v0.1\n\n>diff --git a/browser/base/content/browser.js b/browser/base/content/browser.js\n\n> function OpenBrowserWindow()\n> {\n>-  var charsetArg = new String();\n>+  var charsetArg = \"\";\n\nmight as well also move this next to its first use\n\n>+  return window.openDialog(\"chrome://browser/content/\", \"_blank\",\n>+                           \"chrome,all,dialog=no\", defaultArgs, charsetArg);\n\nThis will change window.arguments.length, but the existing checks for this (which are ancient and kind of ugly) should handle this OK, since they null check arguments[1], and nothing else cares about window.arguments.length == 1 vs. 2.\n\nhttp://hg.mozilla.org/mozilla-central/annotate/d85920b5691b/browser/base/content/browser.js#l1453\n\nYou could write a test to ensure this, though!", "time": "2012-01-11T23:06:35Z", "attachment_id": 584466, "count": 2, "is_private": false, "tags": [], "id": 5973771, "bug_id": 713713, "creator": "gavin.sharp@gmail.com", "author": "gavin.sharp@gmail.com"}, {"creation_time": "2012-02-08T18:26:54Z", "raw_text": "Now with a test, at least I think it's testing what it's supposed to...", "attachment_id": 595445, "time": "2012-02-08T18:26:54Z", "text": "Created attachment 595445\nPatch v0.2\n\nNow with a test, at least I think it's testing what it's supposed to...", "id": 6044483, "is_private": false, "count": 3, "tags": [], "bug_id": 713713, "author": "paul@oshannessy.com", "creator": "paul@oshannessy.com"}, {"id": 6044916, "tags": [], "is_private": false, "count": 4, "bug_id": 713713, "creation_time": "2012-02-08T20:03:27Z", "raw_text": "BrowserSetForcedCharacterSet causes a page reload, so it's probably best to have this test open a new tab first and close it when it's done, rather than operating on the current tab. It might be useful to also test that OpenBrowserWindow still works when invoked from a non-browser window.", "time": "2012-02-08T20:03:27Z", "attachment_id": 595445, "text": "Comment on attachment 595445\nPatch v0.2\n\nBrowserSetForcedCharacterSet causes a page reload, so it's probably best to have this test open a new tab first and close it when it's done, rather than operating on the current tab. It might be useful to also test that OpenBrowserWindow still works when invoked from a non-browser window.", "author": "gavin.sharp@gmail.com", "creator": "gavin.sharp@gmail.com"}]}}, "comments": {}}