{"comments": {}, "bugs": {"377335": {"comments": [{"is_private": false, "attachment_id": null, "time": "2007-04-12T22:28:26Z", "count": 0, "bug_id": 377335, "id": 3159312, "author": "j_schumacher@sbcglobal.net", "raw_text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.8.1.3) Gecko/20070309 Firefox/2.0.0.3\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.8.1.3) Gecko/20070309 Firefox/2.0.0.3\n\nIn Firefox 2.0.0.3, if I set the location.href property of an iframe to a page that is in a subfolder of the website, I get the error:\nError: uncaught exception: [Exception... \"Component returned failure code: 0x805e000a [nsIDOMLocation.href]\" nsresult: \"0x805e000a (<unknown>)\" location: \"JS frame :: (pagename here) :: changeLoc :: line 15\" data: no]\n\nHowever, setting the location.href of the iframe to an external site, such as http://www.google.com, works perfectly.\nAlso setting the location.href of the iframe to a page in the same also folder works as it should.  It would appear that setting the iframe to a page in a subfolder is the cause of the problem.\n\nI've tried this under Windows Vista and Windows Server 2003, under ASP.NET 1.1, ASP.NET 2.0, and a straight HTML site.\n\nUnder Firefox 3.0a4pre, I do not get an unhandled exception, but the location of the iframe does not change.  Instead when I right-click on the page after the code has run, Firefox crashes.\n\nReproducible: Always\n\nSteps to Reproduce:\n1. Create an html page with an iframe, src='':\n2. Create a subfolder called Test\n3. Create a basic html file in the subfolder, called TestPage.htm\n4. Create a button on the page with the iframe to call a function\n5. In the function, reference the iframe using this method:\nframes['iframename'].location.href = './Test/TestPage.htm'\n6. Open the page with the iframe in Firefox, click the button and verify that an unhanded exception occurs.\n7. Copy the TestPage.htm to the same folder as the page with the iframe\n8. Change the code to\nframes['iframename'].location.href = 'TestPage.htm'\n9. Open the page again in Firefox, click the button and see that the unhandled exception does NOT appear.\nActual Results:  \nAfter step 6, an uncaught exception occurs:\nError: uncaught exception: [Exception... \"Component returned failure code: 0x805e000a [nsIDOMLocation.href]\" nsresult: \"0x805e000a (<unknown>)\" location: \"JS frame :: (pagename here) :: changeLoc :: line 15\" data: no]\n\nExpected Results:  \nThe iframe's location should have changed to ./Test/TestPage.htm", "creation_time": "2007-04-12T22:28:26Z", "text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.8.1.3) Gecko/20070309 Firefox/2.0.0.3\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.8.1.3) Gecko/20070309 Firefox/2.0.0.3\n\nIn Firefox 2.0.0.3, if I set the location.href property of an iframe to a page that is in a subfolder of the website, I get the error:\nError: uncaught exception: [Exception... \"Component returned failure code: 0x805e000a [nsIDOMLocation.href]\" nsresult: \"0x805e000a (<unknown>)\" location: \"JS frame :: (pagename here) :: changeLoc :: line 15\" data: no]\n\nHowever, setting the location.href of the iframe to an external site, such as http://www.google.com, works perfectly.\nAlso setting the location.href of the iframe to a page in the same also folder works as it should.  It would appear that setting the iframe to a page in a subfolder is the cause of the problem.\n\nI've tried this under Windows Vista and Windows Server 2003, under ASP.NET 1.1, ASP.NET 2.0, and a straight HTML site.\n\nUnder Firefox 3.0a4pre, I do not get an unhandled exception, but the location of the iframe does not change.  Instead when I right-click on the page after the code has run, Firefox crashes.\n\nReproducible: Always\n\nSteps to Reproduce:\n1. Create an html page with an iframe, src='':\n2. Create a subfolder called Test\n3. Create a basic html file in the subfolder, called TestPage.htm\n4. Create a button on the page with the iframe to call a function\n5. In the function, reference the iframe using this method:\nframes['iframename'].location.href = './Test/TestPage.htm'\n6. Open the page with the iframe in Firefox, click the button and verify that an unhanded exception occurs.\n7. Copy the TestPage.htm to the same folder as the page with the iframe\n8. Change the code to\nframes['iframename'].location.href = 'TestPage.htm'\n9. Open the page again in Firefox, click the button and see that the unhandled exception does NOT appear.\nActual Results:  \nAfter step 6, an uncaught exception occurs:\nError: uncaught exception: [Exception... \"Component returned failure code: 0x805e000a [nsIDOMLocation.href]\" nsresult: \"0x805e000a (<unknown>)\" location: \"JS frame :: (pagename here) :: changeLoc :: line 15\" data: no]\n\nExpected Results:  \nThe iframe's location should have changed to ./Test/TestPage.htm", "creator": "j_schumacher@sbcglobal.net", "tags": []}, {"id": 3159321, "bug_id": 377335, "is_private": false, "attachment_id": null, "count": 1, "time": "2007-04-12T22:33:46Z", "text": "I understand .. (two dots) is to go back one folder from current in relative paths, and / with no dots is to start from the root, and just having 'Test/TestPage.htm' is for going to subfolders.\nSo what's with the one dot then slash in step 5?", "creation_time": "2007-04-12T22:33:46Z", "creator": "mardeg@inbox.ru", "raw_text": "I understand .. (two dots) is to go back one folder from current in relative paths, and / with no dots is to start from the root, and just having 'Test/TestPage.htm' is for going to subfolders.\nSo what's with the one dot then slash in step 5?", "author": "mardeg@inbox.ru", "tags": []}, {"id": 3159330, "bug_id": 377335, "count": 2, "time": "2007-04-12T22:46:06Z", "attachment_id": null, "is_private": false, "creator": "j_schumacher@sbcglobal.net", "text": "The . is actually unnecessary. A single dot specifies to start at the current directory.  I just verified that the same exception will occur if the dot is removed in step 5 and the code is instead changed to\nframes['iframename'].location.href = '/Test/TestPage.htm';\nor\nframes['iframename'].location.href = 'Test/TestPage.htm';", "creation_time": "2007-04-12T22:46:06Z", "raw_text": "The . is actually unnecessary. A single dot specifies to start at the current directory.  I just verified that the same exception will occur if the dot is removed in step 5 and the code is instead changed to\nframes['iframename'].location.href = '/Test/TestPage.htm';\nor\nframes['iframename'].location.href = 'Test/TestPage.htm';", "author": "j_schumacher@sbcglobal.net", "tags": []}, {"count": 3, "time": "2007-04-13T02:13:20Z", "attachment_id": null, "is_private": false, "id": 3159414, "bug_id": 377335, "tags": [], "author": "mats@mozilla.com", "creator": "mats@mozilla.com", "creation_time": "2007-04-13T02:13:20Z", "text": "(In reply to comment #0)\n> Under Firefox 3.0a4pre, I do not get an unhandled exception, but the location\n> of the iframe does not change.  Instead when I right-click on the page after\n> the code has run, Firefox crashes.\n\nIt seems to work for me using Firefox trunk on Linux, using file: and http:\nPlease file a separate bug report for the trunk crash.\nPlease also zip the files involved in your test and attach it to one\nof the bugs so we can test with exactly the same files as you. Thanks!", "raw_text": "(In reply to comment #0)\n> Under Firefox 3.0a4pre, I do not get an unhandled exception, but the location\n> of the iframe does not change.  Instead when I right-click on the page after\n> the code has run, Firefox crashes.\n\nIt seems to work for me using Firefox trunk on Linux, using file: and http:\nPlease file a separate bug report for the trunk crash.\nPlease also zip the files involved in your test and attach it to one\nof the bugs so we can test with exactly the same files as you. Thanks!"}, {"creator": "j_schumacher@sbcglobal.net", "creation_time": "2007-04-21T02:10:47Z", "text": "Created attachment 262318\nTestcase files for the bug.", "raw_text": "", "tags": [], "author": "j_schumacher@sbcglobal.net", "id": 3166233, "bug_id": 377335, "count": 4, "time": "2007-04-21T02:10:47Z", "attachment_id": 262318, "is_private": false}, {"tags": [], "bug_id": 377335, "id": 3166234, "is_private": false, "count": 5, "attachment_id": null, "time": "2007-04-21T02:17:22Z", "raw_text": "I've attached a test case attachment to the bug.\n\nI have also narrowed this bug down to the naming of the subfolder that is reference in the javascript.  When the subfolder is name \"Ads\", the uncaught exception occurs.  If the subfolder is named anything else, the code works fine.\n\nTo prove this, the attachment contains three files:\nindex.htm\nAds/TestPage.htm\nAdds/TestPage.htm\n\nindex.htm has a single iframe and three buttons.  The first button sets the iframe to Google, the second iframe will fail with an uncaught exception while trying to set the iframe to Ads/TestPage.htm, and the third button will succeed when setting the iframe to Adds/TestPage.htm (if clicked BEFORE the second button only, the second button kills all further functionality until the page is reloaded)\n\nI've also posted the test case here:\nhttp://codingreflection.com/FirefoxIframeTest/index.htm", "creation_time": "2007-04-21T02:17:22Z", "text": "I've attached a test case attachment to the bug.\n\nI have also narrowed this bug down to the naming of the subfolder that is reference in the javascript.  When the subfolder is name \"Ads\", the uncaught exception occurs.  If the subfolder is named anything else, the code works fine.\n\nTo prove this, the attachment contains three files:\nindex.htm\nAds/TestPage.htm\nAdds/TestPage.htm\n\nindex.htm has a single iframe and three buttons.  The first button sets the iframe to Google, the second iframe will fail with an uncaught exception while trying to set the iframe to Ads/TestPage.htm, and the third button will succeed when setting the iframe to Adds/TestPage.htm (if clicked BEFORE the second button only, the second button kills all further functionality until the page is reloaded)\n\nI've also posted the test case here:\nhttp://codingreflection.com/FirefoxIframeTest/index.htm", "creator": "j_schumacher@sbcglobal.net", "author": "j_schumacher@sbcglobal.net"}, {"text": "Regarding the Firefox trunk crash I referenced before: I have been unable to duplicate the trunk crash with this same test case, so I'm not going to file a separate report for the trunk crash at this time (perhaps something related has already fixed that problem).  As for now, I've only been able to duplicate the problem in Firefox 2.0.0.3.", "creation_time": "2007-04-21T02:35:55Z", "creator": "j_schumacher@sbcglobal.net", "raw_text": "Regarding the Firefox trunk crash I referenced before: I have been unable to duplicate the trunk crash with this same test case, so I'm not going to file a separate report for the trunk crash at this time (perhaps something related has already fixed that problem).  As for now, I've only been able to duplicate the problem in Firefox 2.0.0.3.", "tags": [], "author": "j_schumacher@sbcglobal.net", "id": 3166240, "bug_id": 377335, "is_private": false, "count": 6, "time": "2007-04-21T02:35:55Z", "attachment_id": null}, {"id": 3166373, "bug_id": 377335, "is_private": false, "time": "2007-04-21T11:07:37Z", "count": 7, "attachment_id": null, "text": "All three buttons works for me (tried both file: and http:) using\nFirefox 2.0.0.3 on Linux.\n\nGiven the name of the sub-folder \"Ads\" I'm starting to suspect that\nthere could be some ad-blocking software that is causing the problem...\n\nDoes it work if you start Firefox in Safe Mode?\n(it temporarily disables add-ons and themes, this test will help us narrow\ndown the cause of the problem) --  See http://kb.mozillazine.org/Safe_Mode\n", "creation_time": "2007-04-21T11:07:37Z", "creator": "mats@mozilla.com", "raw_text": "All three buttons works for me (tried both file: and http:) using\nFirefox 2.0.0.3 on Linux.\n\nGiven the name of the sub-folder \"Ads\" I'm starting to suspect that\nthere could be some ad-blocking software that is causing the problem...\n\nDoes it work if you start Firefox in Safe Mode?\n(it temporarily disables add-ons and themes, this test will help us narrow\ndown the cause of the problem) --  See http://kb.mozillazine.org/Safe_Mode\n", "author": "mats@mozilla.com", "tags": []}, {"bug_id": 377335, "id": 3167340, "time": "2007-04-23T06:01:39Z", "attachment_id": null, "count": 8, "is_private": false, "raw_text": "OK, so it turns out that the Adblock Plus extension is causing the uncaught exception.  The exception does not occur and the button works normally when Adblock Plus is told to allow ads on the page.\n\nI'm fairly certain that Adblock Plus shouldn't be causing an uncaught exception in Firefox, as normal ad blocking does not have this effect.  Therefore, I'm concluding that the problem is with the extension itself and not Firefox.", "creator": "j_schumacher@sbcglobal.net", "text": "OK, so it turns out that the Adblock Plus extension is causing the uncaught exception.  The exception does not occur and the button works normally when Adblock Plus is told to allow ads on the page.\n\nI'm fairly certain that Adblock Plus shouldn't be causing an uncaught exception in Firefox, as normal ad blocking does not have this effect.  Therefore, I'm concluding that the problem is with the extension itself and not Firefox.", "creation_time": "2007-04-23T06:01:39Z", "author": "j_schumacher@sbcglobal.net", "tags": []}, {"creator": "mats@mozilla.com", "creation_time": "2007-04-23T11:57:40Z", "text": "If the problem also occurs with the latest version of Adblock Plus,\nthen please notify the author(s).  Thanks.\n\n-> INVALID (not a Firefox bug)\n", "raw_text": "If the problem also occurs with the latest version of Adblock Plus,\nthen please notify the author(s).  Thanks.\n\n-> INVALID (not a Firefox bug)\n", "tags": [], "author": "mats@mozilla.com", "id": 3167466, "bug_id": 377335, "count": 9, "time": "2007-04-23T11:57:40Z", "attachment_id": null, "is_private": false}]}}}