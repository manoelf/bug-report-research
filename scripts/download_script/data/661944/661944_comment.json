{"bugs": {"661944": {"comments": [{"is_private": false, "creator": "joey@mozilla.com", "count": 0, "creation_time": "2011-06-03T21:45:23Z", "author": "joey@mozilla.com", "text": "Duplicate copies of mddepend.pl, print-failed-commands.sh and uniq.pl exist in the sandbox.  One copy should be obsoleted and scripts/makefiles updated to launch the tool using a common path:\n\n./build/unix/mddepend.pl  ./js/src/build/unix/mddepend.pl\n./build/unix/print-failed-commands.sh ./js/src/build/unix/print-failed-commands.sh\n./build/unix/uniq.pl ./js/src/build/unix/uniq.pl\n\nEnhancements:\n  o perl scripts can be updated to \"use strict; use warnings;\" (replace perl -w)\n  o unit tests should be written for the tools", "tags": [], "time": "2011-06-03T21:45:23Z", "bug_id": 661944, "attachment_id": null, "raw_text": "Duplicate copies of mddepend.pl, print-failed-commands.sh and uniq.pl exist in the sandbox.  One copy should be obsoleted and scripts/makefiles updated to launch the tool using a common path:\n\n./build/unix/mddepend.pl  ./js/src/build/unix/mddepend.pl\n./build/unix/print-failed-commands.sh ./js/src/build/unix/print-failed-commands.sh\n./build/unix/uniq.pl ./js/src/build/unix/uniq.pl\n\nEnhancements:\n  o perl scripts can be updated to \"use strict; use warnings;\" (replace perl -w)\n  o unit tests should be written for the tools", "id": 5511921}, {"id": 5511928, "attachment_id": null, "raw_text": "There are two copies of these files because js/src is buildable as a standalone project separate from the rest of the Mozilla client.\n\nWe should be able to remove js/src/build/unix/uniq.pl since js/src doesn't actually use it, but the others will have to stay.", "author": "khuey@kylehuey.com", "creation_time": "2011-06-03T21:48:53Z", "tags": [], "bug_id": 661944, "time": "2011-06-03T21:48:53Z", "text": "There are two copies of these files because js/src is buildable as a standalone project separate from the rest of the Mozilla client.\n\nWe should be able to remove js/src/build/unix/uniq.pl since js/src doesn't actually use it, but the others will have to stay.", "creator": "khuey@kylehuey.com", "is_private": false, "count": 1}, {"is_private": false, "creator": "ted@mielczarek.org", "count": 2, "creation_time": "2011-06-03T22:51:54Z", "author": "ted@mielczarek.org", "text": "(In reply to comment #0)\n>   o unit tests should be written for the tools\n\nThis is a fantastic idea. I've been trying to write unit tests as we touch some of our existing tools, but there are a lot of scripts in there.", "tags": [], "bug_id": 661944, "time": "2011-06-03T22:51:54Z", "attachment_id": null, "raw_text": "(In reply to comment #0)\n>   o unit tests should be written for the tools\n\nThis is a fantastic idea. I've been trying to write unit tests as we touch some of our existing tools, but there are a lot of scripts in there.", "id": 5512066}, {"count": 3, "is_private": false, "creator": "joey@mozilla.com", "text": "(In reply to comment #2)\n> (In reply to comment #0)\n> >   o unit tests should be written for the tools\n> \n> This is a fantastic idea. I've been trying to write unit tests as we touch\n> some of our existing tools, but there are a lot of scripts in there.\n\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=661855\n[fyi] patch bundled with related bug 661855 contains a unit test for uniq.pl", "bug_id": 661944, "tags": [], "time": "2011-06-06T16:14:42Z", "creation_time": "2011-06-06T16:14:42Z", "author": "joey@mozilla.com", "raw_text": "(In reply to comment #2)\n> (In reply to comment #0)\n> >   o unit tests should be written for the tools\n> \n> This is a fantastic idea. I've been trying to write unit tests as we touch\n> some of our existing tools, but there are a lot of scripts in there.\n\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=661855\n[fyi] patch bundled with related bug 661855 contains a unit test for uniq.pl", "attachment_id": null, "id": 5515210}, {"count": 4, "bug_id": 661944, "attachment_id": null, "raw_text": "(In reply to comment #1)\n> There are two copies of these files because js/src is buildable as a\n> standalone project separate from the rest of the Mozilla client.\n> \n> We should be able to remove js/src/build/unix/uniq.pl since js/src doesn't\n> actually use it, but the others will have to stay.\n\nDo you know if mercurial has support for a concept similar to \"external repositories\" found in other revision control systems ?\n\nOne game that can be played for a scenario like this is to check sources/tests into a central directory/repository then add an external directive within any directories that need to use it.  This allows for central maintenance w/o the chance of any checked in copies going stale.", "id": 5515241, "creator": "joey@mozilla.com", "is_private": false, "author": "joey@mozilla.com", "creation_time": "2011-06-06T16:25:24Z", "time": "2011-06-06T16:25:24Z", "tags": [], "text": "(In reply to comment #1)\n> There are two copies of these files because js/src is buildable as a\n> standalone project separate from the rest of the Mozilla client.\n> \n> We should be able to remove js/src/build/unix/uniq.pl since js/src doesn't\n> actually use it, but the others will have to stay.\n\nDo you know if mercurial has support for a concept similar to \"external repositories\" found in other revision control systems ?\n\nOne game that can be played for a scenario like this is to check sources/tests into a central directory/repository then add an external directive within any directories that need to use it.  This allows for central maintenance w/o the chance of any checked in copies going stale."}, {"count": 5, "creator": "joey@mozilla.com", "is_private": false, "bug_id": 661944, "tags": [], "time": "2011-06-06T16:28:21Z", "text": "(In reply to comment #1)\n> There are two copies of these files because js/src is buildable as a\n> standalone project separate from the rest of the Mozilla client.\n> \n> We should be able to remove js/src/build/unix/uniq.pl since js/src doesn't\n> actually use it, but the others will have to stay.\n\nWould it make any sense to setup an isolated tools directory in the sandbox for scripts like these so they could be shared across multiple directories w/o having to be copied or duplicated ?", "author": "joey@mozilla.com", "creation_time": "2011-06-06T16:28:21Z", "raw_text": "(In reply to comment #1)\n> There are two copies of these files because js/src is buildable as a\n> standalone project separate from the rest of the Mozilla client.\n> \n> We should be able to remove js/src/build/unix/uniq.pl since js/src doesn't\n> actually use it, but the others will have to stay.\n\nWould it make any sense to setup an isolated tools directory in the sandbox for scripts like these so they could be shared across multiple directories w/o having to be copied or duplicated ?", "attachment_id": null, "id": 5515245}]}}, "comments": {}}