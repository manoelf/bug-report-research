{"comments": {}, "bugs": {"649503": {"comments": [{"bug_id": 649503, "creation_time": "2011-04-12T21:52:15Z", "tags": [], "attachment_id": null, "id": 5404947, "author": "bugs@pettay.fi", "is_private": false, "text": "As an example, it is not possible to see the full log of nsIDOMWindowUtils at once.\nIf you first load\nhttp://hg.mozilla.org/mozilla-central/log/1156b1885571/dom/interfaces/base/nsIDOMWindowUtils.idl\nyou get only the log after file move. To get older part of the log you\nneed to click the base link and the log link.\n\nSee also\nhttp://mercurial.selenic.com/bts/issue2758\nhttp://mercurial.selenic.com/bts/issue1576\nAnd\nhttp://selenic.com/pipermail/mercurial-devel/2011-April/029908.html\n\nThe log part is not as critical as the annotation, but still, I really\nwould like to have tools which work. Currently log is just quite useless\nonce the file has been moved/renamed.\nIf mercurial doesn't get fixed, could we patch hg.mozilla.org webtools?\nAnd if yes, who could do the work?", "raw_text": "As an example, it is not possible to see the full log of nsIDOMWindowUtils at once.\nIf you first load\nhttp://hg.mozilla.org/mozilla-central/log/1156b1885571/dom/interfaces/base/nsIDOMWindowUtils.idl\nyou get only the log after file move. To get older part of the log you\nneed to click the base link and the log link.\n\nSee also\nhttp://mercurial.selenic.com/bts/issue2758\nhttp://mercurial.selenic.com/bts/issue1576\nAnd\nhttp://selenic.com/pipermail/mercurial-devel/2011-April/029908.html\n\nThe log part is not as critical as the annotation, but still, I really\nwould like to have tools which work. Currently log is just quite useless\nonce the file has been moved/renamed.\nIf mercurial doesn't get fixed, could we patch hg.mozilla.org webtools?\nAnd if yes, who could do the work?", "creator": "bugs@pettay.fi", "time": "2011-04-12T21:52:15Z", "count": 0}, {"is_private": false, "author": "justin.lebar+bug@gmail.com", "time": "2011-04-17T23:24:22Z", "count": 1, "id": 5414927, "creation_time": "2011-04-17T23:24:22Z", "tags": [], "attachment_id": null, "raw_text": "Would an acceptable solution here be to use a desktop GUI instead of webtools?  In my experience, webtools is pretty slow.\n\nThe hg folks have a list of GUIs; I have no idea if any of them is any good, but it sounds like it wouldn't be hard to be better than webtools...\n\nhttp://mercurial.selenic.com/wiki/OtherTools", "creator": "justin.lebar+bug@gmail.com", "bug_id": 649503, "text": "Would an acceptable solution here be to use a desktop GUI instead of webtools?  In my experience, webtools is pretty slow.\n\nThe hg folks have a list of GUIs; I have no idea if any of them is any good, but it sounds like it wouldn't be hard to be better than webtools...\n\nhttp://mercurial.selenic.com/wiki/OtherTools"}, {"text": "Not to dismiss desktop tools entirely, but most of Mozilla code culture is built around the online tools, and we optimize all kinds of workflow around them, partly because linking to code and changes is easy. We should fix this to the extent possible. I know roc's been discussing this (again) on mercurial-devel, and we might be making some headway.", "raw_text": "Not to dismiss desktop tools entirely, but most of Mozilla code culture is built around the online tools, and we optimize all kinds of workflow around them, partly because linking to code and changes is easy. We should fix this to the extent possible. I know roc's been discussing this (again) on mercurial-devel, and we might be making some headway.", "creator": "benjamin@smedbergs.us", "time": "2011-04-18T01:13:12Z", "count": 2, "bug_id": 649503, "tags": [], "creation_time": "2011-04-18T01:13:12Z", "attachment_id": null, "id": 5415026, "author": "benjamin@smedbergs.us", "is_private": false}, {"attachment_id": null, "tags": [], "creation_time": "2011-04-18T02:11:52Z", "bug_id": 649503, "is_private": false, "author": "roc@ocallahan.org", "id": 5415061, "creator": "roc@ocallahan.org", "raw_text": "I brought it up on mercurial-devel in the thread linked in comment #0, and almost immediately hit a dead end. Matt Mackall just doesn't think things should work the way we think they should work.", "text": "I brought it up on mercurial-devel in the thread linked in comment #0, and almost immediately hit a dead end. Matt Mackall just doesn't think things should work the way we think they should work.", "count": 3, "time": "2011-04-18T02:11:52Z"}, {"bug_id": 649503, "attachment_id": null, "tags": [], "creation_time": "2011-04-18T02:14:28Z", "id": 5415064, "is_private": false, "author": "roc@ocallahan.org", "text": "Actually my part of the thread is here: http://selenic.com/pipermail/mercurial-devel/2011-April/029919.html", "creator": "roc@ocallahan.org", "raw_text": "Actually my part of the thread is here: http://selenic.com/pipermail/mercurial-devel/2011-April/029919.html", "count": 4, "time": "2011-04-18T02:14:28Z"}, {"id": 5417793, "is_private": false, "author": "bzbarsky@mit.edu", "bug_id": 649503, "tags": [], "creation_time": "2011-04-19T04:32:15Z", "attachment_id": null, "time": "2011-04-19T04:32:15Z", "count": 5, "text": "Justin, as soon as MXR can integrate well with a desktop GUI I'll look at desktop GUIs.... ;)", "raw_text": "Justin, as soon as MXR can integrate well with a desktop GUI I'll look at desktop GUIs.... ;)", "creator": "bzbarsky@mit.edu"}, {"bug_id": 649503, "text": "I'm trying to pull together concrete steps for what we want here since we now have someone lined up to do this work (thanks Bob Moss for finding a resource!), but we need to know exactly what we want.\n\nFrom reading comment 0 here it seems that there's a problem with annotation, but I understand that since from my testing here with both hg log dom/interfaces/base/nsIDOMWindowUtils.idl (command line) and http://hg.mozilla.org/mozilla-central/annotate/1156b1885571/dom/interfaces/base/nsIDOMWindowUtils.idl, it seems that annotate contains version information from before a move was done (and the web version even links back to the right old versions in the right place etc).\n\nAssuming that's true, that leaves log. The command line versions of hg log has a -f argument that afaict does what we want already (except maybe make it clear when a move was made and from where to where the file(s) moved). But hgweb's log view most certainly needs attention. I think jwatt's comments in http://mercurial.selenic.com/bts/issue1576 explains quite clearly what we'd want here.\n\nSo it seems to me that if we do what jwatt suggests in his comment in issue1576 we'd be pretty happy here. And to clarify, that comment was:\n\nReally hgweb should be listing history back to the time the file was moved,\nhave a very clear marker right across the page alerting readers to the fact\nthat it moved (and from where!), and then continue listing the file's\nhistory prior to the move...repeat for all moves as necessary.\n\nLet me know if we need more than that, or if we you think we want something different from that.", "attachment_id": null, "creation_time": "2011-05-25T00:23:59Z", "tags": [], "creator": "jstenback+bmo@gmail.com", "raw_text": "I'm trying to pull together concrete steps for what we want here since we now have someone lined up to do this work (thanks Bob Moss for finding a resource!), but we need to know exactly what we want.\n\nFrom reading comment 0 here it seems that there's a problem with annotation, but I understand that since from my testing here with both hg log dom/interfaces/base/nsIDOMWindowUtils.idl (command line) and http://hg.mozilla.org/mozilla-central/annotate/1156b1885571/dom/interfaces/base/nsIDOMWindowUtils.idl, it seems that annotate contains version information from before a move was done (and the web version even links back to the right old versions in the right place etc).\n\nAssuming that's true, that leaves log. The command line versions of hg log has a -f argument that afaict does what we want already (except maybe make it clear when a move was made and from where to where the file(s) moved). But hgweb's log view most certainly needs attention. I think jwatt's comments in http://mercurial.selenic.com/bts/issue1576 explains quite clearly what we'd want here.\n\nSo it seems to me that if we do what jwatt suggests in his comment in issue1576 we'd be pretty happy here. And to clarify, that comment was:\n\nReally hgweb should be listing history back to the time the file was moved,\nhave a very clear marker right across the page alerting readers to the fact\nthat it moved (and from where!), and then continue listing the file's\nhistory prior to the move...repeat for all moves as necessary.\n\nLet me know if we need more than that, or if we you think we want something different from that.", "id": 5491122, "is_private": false, "count": 6, "time": "2011-05-25T00:23:59Z", "author": "jstenback+bmo@gmail.com"}, {"raw_text": "The one remaining problem with annotation is that it's fail in the face of merges: it always follows the first parent of the merge as far as I can tell if both branches changed a line, which means it's fail for all of necko at the moment, sadly.", "creator": "bzbarsky@mit.edu", "tags": [], "creation_time": "2011-05-25T04:16:32Z", "attachment_id": null, "text": "The one remaining problem with annotation is that it's fail in the face of merges: it always follows the first parent of the merge as far as I can tell if both branches changed a line, which means it's fail for all of necko at the moment, sadly.", "bug_id": 649503, "time": "2011-05-25T04:16:32Z", "author": "bzbarsky@mit.edu", "count": 7, "is_private": false, "id": 5491441}, {"text": "is that related to fime moves/renames? Or merges in general?", "creator": "jonas@sicking.cc", "raw_text": "is that related to fime moves/renames? Or merges in general?", "count": 8, "time": "2011-05-25T05:07:36Z", "bug_id": 649503, "attachment_id": null, "tags": [], "creation_time": "2011-05-25T05:07:36Z", "id": 5491507, "is_private": false, "author": "jonas@sicking.cc"}, {"author": "bzbarsky@mit.edu", "is_private": false, "id": 5491512, "attachment_id": null, "creation_time": "2011-05-25T05:14:55Z", "tags": [], "bug_id": 649503, "count": 9, "time": "2011-05-25T05:14:55Z", "creator": "bzbarsky@mit.edu", "raw_text": "Merges in general, but in necko's case there was a merge where one branch is an hg move and the other is an hg addremove.  So following the wrong branch means you lose all blame.", "text": "Merges in general, but in necko's case there was a merge where one branch is an hg move and the other is an hg addremove.  So following the wrong branch means you lose all blame."}, {"author": "roc@ocallahan.org", "is_private": false, "id": 5491520, "attachment_id": null, "creation_time": "2011-05-25T05:17:29Z", "tags": [], "bug_id": 649503, "count": 10, "time": "2011-05-25T05:17:29Z", "creator": "roc@ocallahan.org", "raw_text": "(In reply to comment #6)\n> So it seems to me that if we do what jwatt suggests in his comment in\n> issue1576 we'd be pretty happy here. And to clarify, that comment was:\n\nThat sounds good. Note that upstream already explicitly rejected this change, so it means we have to run a patched/forked hgweb (which is OK with me!).", "text": "(In reply to comment #6)\n> So it seems to me that if we do what jwatt suggests in his comment in\n> issue1576 we'd be pretty happy here. And to clarify, that comment was:\n\nThat sounds good. Note that upstream already explicitly rejected this change, so it means we have to run a patched/forked hgweb (which is OK with me!)."}, {"count": 11, "author": "ted@mielczarek.org", "time": "2011-05-25T11:19:50Z", "is_private": false, "id": 5491903, "creator": "ted@mielczarek.org", "raw_text": "I think we can essentially fork the hgweb log code into an extension, and have it override the built-in log command.", "attachment_id": null, "creation_time": "2011-05-25T11:19:50Z", "tags": [], "text": "I think we can essentially fork the hgweb log code into an extension, and have it override the built-in log command.", "bug_id": 649503}, {"bug_id": 649503, "text": "Ok, I think we have enough information here to get someone started on this. I'd prefer we deal with the annotate issue as a separate bug, for now I'm mostly interested in seeing the roadblocks for doing renames in the repository removed, and it seems like that's a much easier problem to solve as well.", "tags": [], "creation_time": "2011-05-25T21:19:27Z", "attachment_id": null, "raw_text": "Ok, I think we have enough information here to get someone started on this. I'd prefer we deal with the annotate issue as a separate bug, for now I'm mostly interested in seeing the roadblocks for doing renames in the repository removed, and it seems like that's a much easier problem to solve as well.", "creator": "jstenback+bmo@gmail.com", "id": 5493434, "is_private": false, "time": "2011-05-25T21:19:27Z", "author": "jstenback+bmo@gmail.com", "count": 12}, {"raw_text": "Fwiw, the annotate issue arose because someone did a rename... and screwed it up.  I fully expect that to happen again once people start doing renames.", "creator": "bzbarsky@mit.edu", "tags": [], "creation_time": "2011-05-26T01:20:47Z", "attachment_id": null, "text": "Fwiw, the annotate issue arose because someone did a rename... and screwed it up.  I fully expect that to happen again once people start doing renames.", "bug_id": 649503, "author": "bzbarsky@mit.edu", "time": "2011-05-26T01:20:47Z", "count": 13, "is_private": false, "id": 5494015}]}}}