{"bugs": {"683184": {"comments": [{"creation_time": "2011-08-30T16:24:21Z", "is_private": false, "id": 5687956, "bug_id": 683184, "text": "nsSound (@mozilla.org/sound;1) is currently implemented as an XPCOM object and so a new nsSound gets instantiated every time a sound MAY get played.\n\nBecause of bugs like Bug 498079 and Bug 504670, async sound and threading is currently being done in Windows, and needs to be added to Linux.  Alternatively all threading might be moved to the xpwidget layer in Bug 520417.\n\nThe problem is that every time we click the menu button in Firefox in Windows (and eventually Linux once Bug 504670 gets implemented), we spawn a new thread. Most users use the defaults of no sounds in Windows, yet we still spawn a new thread and shut it down each time a sound may be played.  \n\nIt would be better to have nsSound as as a singleton XPCOM service.  nsISound represents a way to play sounds and not individual sound clips as per the methods of the interface.  We would simply dispatch a new event to the sound player thread for each method that is called.", "count": 0, "author": "netzen@gmail.com", "creator": "netzen@gmail.com", "tags": [], "raw_text": "nsSound (@mozilla.org/sound;1) is currently implemented as an XPCOM object and so a new nsSound gets instantiated every time a sound MAY get played.\n\nBecause of bugs like Bug 498079 and Bug 504670, async sound and threading is currently being done in Windows, and needs to be added to Linux.  Alternatively all threading might be moved to the xpwidget layer in Bug 520417.\n\nThe problem is that every time we click the menu button in Firefox in Windows (and eventually Linux once Bug 504670 gets implemented), we spawn a new thread. Most users use the defaults of no sounds in Windows, yet we still spawn a new thread and shut it down each time a sound may be played.  \n\nIt would be better to have nsSound as as a singleton XPCOM service.  nsISound represents a way to play sounds and not individual sound clips as per the methods of the interface.  We would simply dispatch a new event to the sound player thread for each method that is called.", "attachment_id": null, "time": "2011-08-30T16:24:21Z"}, {"time": "2011-08-30T19:16:07Z", "raw_text": "Sounds good.\n\nAt some stage we should reimplement nsSound::Play() to use libcubeb (see bug 623444). Then that part can be cross-platform code.", "attachment_id": null, "tags": [], "creator": "roc@ocallahan.org", "count": 1, "text": "Sounds good.\n\nAt some stage we should reimplement nsSound::Play() to use libcubeb (see bug 623444). Then that part can be cross-platform code.", "author": "roc@ocallahan.org", "bug_id": 683184, "id": 5688544, "creation_time": "2011-08-30T19:16:07Z", "is_private": false}, {"text": "Although another option is to deprecate nsISound::Play() and try to get clients to just use <audio> elements instead.", "count": 2, "author": "roc@ocallahan.org", "bug_id": 683184, "id": 5688549, "raw_text": "Although another option is to deprecate nsISound::Play() and try to get clients to just use <audio> elements instead.", "time": "2011-08-30T19:17:14Z", "creator": "roc@ocallahan.org", "is_private": false, "creation_time": "2011-08-30T19:17:14Z", "attachment_id": null, "tags": []}, {"id": 5688553, "bug_id": 683184, "text": "I was just looking at libsydneyaudio, thanks for the tip on libcubeb  :)", "count": 3, "author": "netzen@gmail.com", "raw_text": "I was just looking at libsydneyaudio, thanks for the tip on libcubeb  :)", "time": "2011-08-30T19:18:45Z", "creation_time": "2011-08-30T19:18:45Z", "is_private": false, "creator": "netzen@gmail.com", "tags": [], "attachment_id": null}, {"bug_id": 683184, "id": 5688643, "text": ":roc, I posted regarding your Comment 1 and Comment 2 here: Bug 683263", "count": 4, "author": "netzen@gmail.com", "time": "2011-08-30T19:47:18Z", "raw_text": ":roc, I posted regarding your Comment 1 and Comment 2 here: Bug 683263", "creation_time": "2011-08-30T19:47:18Z", "is_private": false, "creator": "netzen@gmail.com", "tags": [], "attachment_id": null}, {"tags": [], "attachment_id": null, "creation_time": "2011-08-30T20:15:38Z", "is_private": false, "creator": "neil@httl.net", "raw_text": "(In reply to Robert O'Callahan from comment #2)\n> try to get clients to just use <audio> elements instead.\nHow do you get an <audio> element without a document?", "time": "2011-08-30T20:15:38Z", "bug_id": 683184, "id": 5688760, "text": "(In reply to Robert O'Callahan from comment #2)\n> try to get clients to just use <audio> elements instead.\nHow do you get an <audio> element without a document?", "count": 5, "author": "neil@httl.net"}, {"time": "2011-08-30T23:15:40Z", "raw_text": "You don't, but most code can probably get a document.", "count": 6, "text": "You don't, but most code can probably get a document.", "author": "roc@ocallahan.org", "id": 5689339, "bug_id": 683184, "attachment_id": null, "tags": [], "creator": "roc@ocallahan.org", "is_private": false, "creation_time": "2011-08-30T23:15:40Z"}]}}, "comments": {}}