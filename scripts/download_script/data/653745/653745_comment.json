{"comments": {}, "bugs": {"653745": {"comments": [{"time": "2011-04-29T16:01:14Z", "is_private": false, "attachment_id": null, "creator": "jacob.benoit.1@gmail.com", "tags": [], "count": 0, "bug_id": 653745, "id": 5439723, "raw_text": "Just some browsing on lemonde.fr with GL layers on Android gave me this:\n\nProgram received signal SIGSEGV, Segmentation fault.\n[Switching to Thread 12878]\n__libc_android_abort () at bionic/libc/unistd/abort.c:82\n82          *((char*)0xdeadbaad) = 39;\n(gdb) bt\n#0  __libc_android_abort () at bionic/libc/unistd/abort.c:82\n#1  0x804024a8 in mozalloc_abort (\n    msg=0x46452290 \"###!!! ABORT: file ../../../dist/include/GLContext.h, line 1041\")\n    at /home/bjacob/mozilla-central/memory/mozalloc/mozalloc_abort.cpp:75\n#2  0x856370a6 in Abort (\n    aMsg=0x46452290 \"###!!! ABORT: file ../../../dist/include/GLContext.h, line 1041\")\n    at /home/bjacob/mozilla-central/xpcom/base/nsDebugImpl.cpp:388\n#3  0x85636f98 in NS_DebugBreak_P (aSeverity=3, aStr=0x0, aExpr=0x0, \n    aFile=0x85e5a2c4 \"../../../dist/include/GLContext.h\", aLine=1041)\n    at /home/bjacob/mozilla-central/xpcom/base/nsDebugImpl.cpp:345\n#4  0x8494377a in mozilla::gl::GLContext::AfterGLCall (this=0x4888b800, \n    glFunction=0x85e5f644 \"void mozilla::gl::GLContext::fTexImage2D(GLenum, GLint, GLint, GLsizei, GLsizei, GLint, GLenum, GLenum, const GLvoid*)\") at ../../../dist/include/GLContext.h:1041\n#5  0x849624da in mozilla::gl::GLContext::fTexImage2D (this=0x4888b800, target=3553, level=0, \n    internalformat=6407, width=480, height=2183, border=0, format=6407, type=33635, \n    pixels=0x4b2cd000) at ../../../dist/include/GLContext.h:1636\n#6  0x8571d6b2 in mozilla::gl::GLContext::UploadSurfaceToTexture (this=0x4888b800, aSurface=\n    0x499aaa40, aDstRegion=..., aTexture=@0x4ab2d2ec, aOverwrite=true, aSrcPoint=..., \n    aPixelBuffer=false) at /home/bjacob/mozilla-central/gfx/thebes/GLContext.cpp:1449\n#7  0x8572ece4 in mozilla::gl::TextureImageEGL::DirectUpdate (this=0x4ab2d2e0, aSurf=0x499aaa40, \n    aRegion=...) at /home/bjacob/mozilla-central/gfx/thebes/GLContextProviderEGL.cpp:1264\n#8  0x85754d0c in mozilla::layers::ShadowBufferOGL::Upload (this=0x48a05ac0, aUpdate=0x499aaa40, \n    aUpdated=..., aRect=..., aRotation=...)\n    at /home/bjacob/mozilla-central/gfx/layers/opengl/ThebesLayerOGL.cpp:983\n#9  0x857550e2 in mozilla::layers::ShadowThebesLayerOGL::Swap (this=0x47bf4300, aNewFront=..., \n    aUpdatedRegion=..., aNewBack=0x46452b78, aNewBackValidRegion=0x46452b48, \n    aNewXResolution=0x46452bb8, aNewYResolution=0x46452bb4, aReadOnlyFront=0x46452b18, \n    aFrontUpdatedRegion=0x46452ae8)\n---Type <return> to continue, or q <return> to quit---\n    at /home/bjacob/mozilla-central/gfx/layers/opengl/ThebesLayerOGL.cpp:1027\n#10 0x8575d53e in mozilla::layers::ShadowLayersParent::RecvUpdate (this=0x4a1a4d30, cset=..., \n    reply=0x46453084) at /home/bjacob/mozilla-central/gfx/layers/ipc/ShadowLayersParent.cpp:403\n#11 0x855155b2 in mozilla::layers::PLayersParent::OnMessageReceived (this=0x4a1a4d30, __msg=..., \n    __reply=@0x464532a8) at /home/bjacob/build/mobile-debug/ipc/ipdl/PLayersParent.cpp:220\n#12 0x854fcee0 in mozilla::dom::PContentParent::OnMessageReceived (this=0x483359c0, __msg=..., \n    __reply=@0x464532a8) at /home/bjacob/build/mobile-debug/ipc/ipdl/PContentParent.cpp:1348\n#13 0x854bc352 in mozilla::ipc::SyncChannel::OnDispatchMessage (this=0x483359c8, msg=...)\n    at /home/bjacob/mozilla-central/ipc/glue/SyncChannel.cpp:169\n#14 0x854b45cc in mozilla::ipc::RPCChannel::OnMaybeDequeueOne (this=0x483359c8)\n    at /home/bjacob/mozilla-central/ipc/glue/RPCChannel.cpp:431\n#15 0x854b947e in DispatchToMethod<mozilla::ipc::RPCChannel, bool (mozilla::ipc::RPCChannel::*)()>\n    (obj=0x483359c8, method=\n    (bool (mozilla::ipc::RPCChannel::*)(mozilla::ipc::RPCChannel *)) 0x854b4415 <mozilla::ipc::RPCChannel::OnMaybeDequeueOne()>, arg=...)\n    at /home/bjacob/mozilla-central/ipc/chromium/src/base/tuple.h:383\n#16 0x854b93f0 in RunnableMethod<mozilla::ipc::RPCChannel, bool (mozilla::ipc::RPCChannel::*)(), Tuple0>::Run (this=0x48a3f3e0) at /home/bjacob/mozilla-central/ipc/chromium/src/base/task.h:307\n#17 0x854b5c0c in mozilla::ipc::RPCChannel::RefCountedTask::Run (this=0x48983fc0)\n    at ../../dist/include/mozilla/ipc/RPCChannel.h:450\n#18 0x854b5cfc in mozilla::ipc::RPCChannel::DequeueTask::Run (this=0x45cdb7e0)\n    at ../../dist/include/mozilla/ipc/RPCChannel.h:473\n#19 0x85679048 in MessageLoop::RunTask (this=0x45c1a0c0, task=0x45cdb7e0)\n    at /home/bjacob/mozilla-central/ipc/chromium/src/base/message_loop.cc:343\n#20 0x856790a2 in MessageLoop::DeferOrRunPendingTask (this=0x45c1a0c0, pending_task=...)\n    at /home/bjacob/mozilla-central/ipc/chromium/src/base/message_loop.cc:351\n#21 0x85679432 in MessageLoop::DoWork (this=0x45c1a0c0)\n    at /home/bjacob/mozilla-central/ipc/chromium/src/base/message_loop.cc:451\n---Type <return> to continue, or q <return> to quit---\n#22 0x854b208a in mozilla::ipc::DoWorkRunnable::Run (this=0x45c13340)\n    at /home/bjacob/mozilla-central/ipc/glue/MessagePump.cpp:70\n#23 0x85627566 in nsThread::ProcessNextEvent (this=0x45c34080, mayWait=1, result=0x4645347c)\n    at /home/bjacob/mozilla-central/xpcom/threads/nsThread.cpp:618\n#24 0x855bc16a in NS_ProcessNextEvent_P (thread=0x45c34080, mayWait=1)\n    at /home/bjacob/build/mobile-debug/xpcom/build/nsThreadUtils.cpp:250\n#25 0x854b243e in mozilla::ipc::MessagePump::Run (this=0x45c222b0, aDelegate=0x45c1a0c0)\n    at /home/bjacob/mozilla-central/ipc/glue/MessagePump.cpp:134\n#26 0x85678c44 in MessageLoop::RunInternal (this=0x45c1a0c0)\n    at /home/bjacob/mozilla-central/ipc/chromium/src/base/message_loop.cc:219\n#27 0x85678bd2 in MessageLoop::RunHandler (this=0x45c1a0c0)\n    at /home/bjacob/mozilla-central/ipc/chromium/src/base/message_loop.cc:202\n#28 0x85678b7a in MessageLoop::Run (this=0x45c1a0c0)\n    at /home/bjacob/mozilla-central/ipc/chromium/src/base/message_loop.cc:176\n#29 0x85401e56 in nsBaseAppShell::Run (this=0x45c8c8e0)\n    at /home/bjacob/mozilla-central/widget/src/xpwidgets/nsBaseAppShell.cpp:189\n#30 0x851dc224 in nsAppStartup::Run (this=0x47bfb2e0)\n    at /home/bjacob/mozilla-central/toolkit/components/startup/nsAppStartup.cpp:224\n#31 0x842db58c in XRE_main (argc=3, argv=0x45c13208, aAppData=0x45c0f080)\n    at /home/bjacob/mozilla-central/toolkit/xre/nsAppRunner.cpp:3781\n#32 0x842eae90 in GeckoStart (data=0x45c0c6f0)\n    at /home/bjacob/mozilla-central/toolkit/xre/nsAndroidStartup.cpp:132\n#33 0x842eafcc in Java_org_mozilla_gecko_GeckoAppShell_nativeRun (jenv=0x2a98c0, jc=0x405787b8, \n    jargs=0x405c9738) at /home/bjacob/mozilla-central/toolkit/xre/nsAndroidStartup.cpp:163\n#34 0x8030693e in Java_org_mozilla_gecko_GeckoAppShell_nativeRun (jenv=0x2a98c0, jc=0x405787b8, \n    one=0x405c9738) at /home/bjacob/mozilla-central/other-licenses/android/APKOpen.cpp:234\n#35 0xaca11e38 in dvmPlatformInvoke () from libdvm.so\n#36 0xaca436e2 in dvmCallJNIMethod_general () from libdvm.so\n---Type <return> to continue, or q <return> to quit---\n#37 0xaca436e2 in dvmCallJNIMethod_general () from libdvm.so\nBacktrace stopped: previous frame identical to this frame (corrupt stack?)", "creation_time": "2011-04-29T16:01:14Z", "text": "Just some browsing on lemonde.fr with GL layers on Android gave me this:\n\nProgram received signal SIGSEGV, Segmentation fault.\n[Switching to Thread 12878]\n__libc_android_abort () at bionic/libc/unistd/abort.c:82\n82          *((char*)0xdeadbaad) = 39;\n(gdb) bt\n#0  __libc_android_abort () at bionic/libc/unistd/abort.c:82\n#1  0x804024a8 in mozalloc_abort (\n    msg=0x46452290 \"###!!! ABORT: file ../../../dist/include/GLContext.h, line 1041\")\n    at /home/bjacob/mozilla-central/memory/mozalloc/mozalloc_abort.cpp:75\n#2  0x856370a6 in Abort (\n    aMsg=0x46452290 \"###!!! ABORT: file ../../../dist/include/GLContext.h, line 1041\")\n    at /home/bjacob/mozilla-central/xpcom/base/nsDebugImpl.cpp:388\n#3  0x85636f98 in NS_DebugBreak_P (aSeverity=3, aStr=0x0, aExpr=0x0, \n    aFile=0x85e5a2c4 \"../../../dist/include/GLContext.h\", aLine=1041)\n    at /home/bjacob/mozilla-central/xpcom/base/nsDebugImpl.cpp:345\n#4  0x8494377a in mozilla::gl::GLContext::AfterGLCall (this=0x4888b800, \n    glFunction=0x85e5f644 \"void mozilla::gl::GLContext::fTexImage2D(GLenum, GLint, GLint, GLsizei, GLsizei, GLint, GLenum, GLenum, const GLvoid*)\") at ../../../dist/include/GLContext.h:1041\n#5  0x849624da in mozilla::gl::GLContext::fTexImage2D (this=0x4888b800, target=3553, level=0, \n    internalformat=6407, width=480, height=2183, border=0, format=6407, type=33635, \n    pixels=0x4b2cd000) at ../../../dist/include/GLContext.h:1636\n#6  0x8571d6b2 in mozilla::gl::GLContext::UploadSurfaceToTexture (this=0x4888b800, aSurface=\n    0x499aaa40, aDstRegion=..., aTexture=@0x4ab2d2ec, aOverwrite=true, aSrcPoint=..., \n    aPixelBuffer=false) at /home/bjacob/mozilla-central/gfx/thebes/GLContext.cpp:1449\n#7  0x8572ece4 in mozilla::gl::TextureImageEGL::DirectUpdate (this=0x4ab2d2e0, aSurf=0x499aaa40, \n    aRegion=...) at /home/bjacob/mozilla-central/gfx/thebes/GLContextProviderEGL.cpp:1264\n#8  0x85754d0c in mozilla::layers::ShadowBufferOGL::Upload (this=0x48a05ac0, aUpdate=0x499aaa40, \n    aUpdated=..., aRect=..., aRotation=...)\n    at /home/bjacob/mozilla-central/gfx/layers/opengl/ThebesLayerOGL.cpp:983\n#9  0x857550e2 in mozilla::layers::ShadowThebesLayerOGL::Swap (this=0x47bf4300, aNewFront=..., \n    aUpdatedRegion=..., aNewBack=0x46452b78, aNewBackValidRegion=0x46452b48, \n    aNewXResolution=0x46452bb8, aNewYResolution=0x46452bb4, aReadOnlyFront=0x46452b18, \n    aFrontUpdatedRegion=0x46452ae8)\n---Type <return> to continue, or q <return> to quit---\n    at /home/bjacob/mozilla-central/gfx/layers/opengl/ThebesLayerOGL.cpp:1027\n#10 0x8575d53e in mozilla::layers::ShadowLayersParent::RecvUpdate (this=0x4a1a4d30, cset=..., \n    reply=0x46453084) at /home/bjacob/mozilla-central/gfx/layers/ipc/ShadowLayersParent.cpp:403\n#11 0x855155b2 in mozilla::layers::PLayersParent::OnMessageReceived (this=0x4a1a4d30, __msg=..., \n    __reply=@0x464532a8) at /home/bjacob/build/mobile-debug/ipc/ipdl/PLayersParent.cpp:220\n#12 0x854fcee0 in mozilla::dom::PContentParent::OnMessageReceived (this=0x483359c0, __msg=..., \n    __reply=@0x464532a8) at /home/bjacob/build/mobile-debug/ipc/ipdl/PContentParent.cpp:1348\n#13 0x854bc352 in mozilla::ipc::SyncChannel::OnDispatchMessage (this=0x483359c8, msg=...)\n    at /home/bjacob/mozilla-central/ipc/glue/SyncChannel.cpp:169\n#14 0x854b45cc in mozilla::ipc::RPCChannel::OnMaybeDequeueOne (this=0x483359c8)\n    at /home/bjacob/mozilla-central/ipc/glue/RPCChannel.cpp:431\n#15 0x854b947e in DispatchToMethod<mozilla::ipc::RPCChannel, bool (mozilla::ipc::RPCChannel::*)()>\n    (obj=0x483359c8, method=\n    (bool (mozilla::ipc::RPCChannel::*)(mozilla::ipc::RPCChannel *)) 0x854b4415 <mozilla::ipc::RPCChannel::OnMaybeDequeueOne()>, arg=...)\n    at /home/bjacob/mozilla-central/ipc/chromium/src/base/tuple.h:383\n#16 0x854b93f0 in RunnableMethod<mozilla::ipc::RPCChannel, bool (mozilla::ipc::RPCChannel::*)(), Tuple0>::Run (this=0x48a3f3e0) at /home/bjacob/mozilla-central/ipc/chromium/src/base/task.h:307\n#17 0x854b5c0c in mozilla::ipc::RPCChannel::RefCountedTask::Run (this=0x48983fc0)\n    at ../../dist/include/mozilla/ipc/RPCChannel.h:450\n#18 0x854b5cfc in mozilla::ipc::RPCChannel::DequeueTask::Run (this=0x45cdb7e0)\n    at ../../dist/include/mozilla/ipc/RPCChannel.h:473\n#19 0x85679048 in MessageLoop::RunTask (this=0x45c1a0c0, task=0x45cdb7e0)\n    at /home/bjacob/mozilla-central/ipc/chromium/src/base/message_loop.cc:343\n#20 0x856790a2 in MessageLoop::DeferOrRunPendingTask (this=0x45c1a0c0, pending_task=...)\n    at /home/bjacob/mozilla-central/ipc/chromium/src/base/message_loop.cc:351\n#21 0x85679432 in MessageLoop::DoWork (this=0x45c1a0c0)\n    at /home/bjacob/mozilla-central/ipc/chromium/src/base/message_loop.cc:451\n---Type <return> to continue, or q <return> to quit---\n#22 0x854b208a in mozilla::ipc::DoWorkRunnable::Run (this=0x45c13340)\n    at /home/bjacob/mozilla-central/ipc/glue/MessagePump.cpp:70\n#23 0x85627566 in nsThread::ProcessNextEvent (this=0x45c34080, mayWait=1, result=0x4645347c)\n    at /home/bjacob/mozilla-central/xpcom/threads/nsThread.cpp:618\n#24 0x855bc16a in NS_ProcessNextEvent_P (thread=0x45c34080, mayWait=1)\n    at /home/bjacob/build/mobile-debug/xpcom/build/nsThreadUtils.cpp:250\n#25 0x854b243e in mozilla::ipc::MessagePump::Run (this=0x45c222b0, aDelegate=0x45c1a0c0)\n    at /home/bjacob/mozilla-central/ipc/glue/MessagePump.cpp:134\n#26 0x85678c44 in MessageLoop::RunInternal (this=0x45c1a0c0)\n    at /home/bjacob/mozilla-central/ipc/chromium/src/base/message_loop.cc:219\n#27 0x85678bd2 in MessageLoop::RunHandler (this=0x45c1a0c0)\n    at /home/bjacob/mozilla-central/ipc/chromium/src/base/message_loop.cc:202\n#28 0x85678b7a in MessageLoop::Run (this=0x45c1a0c0)\n    at /home/bjacob/mozilla-central/ipc/chromium/src/base/message_loop.cc:176\n#29 0x85401e56 in nsBaseAppShell::Run (this=0x45c8c8e0)\n    at /home/bjacob/mozilla-central/widget/src/xpwidgets/nsBaseAppShell.cpp:189\n#30 0x851dc224 in nsAppStartup::Run (this=0x47bfb2e0)\n    at /home/bjacob/mozilla-central/toolkit/components/startup/nsAppStartup.cpp:224\n#31 0x842db58c in XRE_main (argc=3, argv=0x45c13208, aAppData=0x45c0f080)\n    at /home/bjacob/mozilla-central/toolkit/xre/nsAppRunner.cpp:3781\n#32 0x842eae90 in GeckoStart (data=0x45c0c6f0)\n    at /home/bjacob/mozilla-central/toolkit/xre/nsAndroidStartup.cpp:132\n#33 0x842eafcc in Java_org_mozilla_gecko_GeckoAppShell_nativeRun (jenv=0x2a98c0, jc=0x405787b8, \n    jargs=0x405c9738) at /home/bjacob/mozilla-central/toolkit/xre/nsAndroidStartup.cpp:163\n#34 0x8030693e in Java_org_mozilla_gecko_GeckoAppShell_nativeRun (jenv=0x2a98c0, jc=0x405787b8, \n    one=0x405c9738) at /home/bjacob/mozilla-central/other-licenses/android/APKOpen.cpp:234\n#35 0xaca11e38 in dvmPlatformInvoke () from libdvm.so\n#36 0xaca436e2 in dvmCallJNIMethod_general () from libdvm.so\n---Type <return> to continue, or q <return> to quit---\n#37 0xaca436e2 in dvmCallJNIMethod_general () from libdvm.so\nBacktrace stopped: previous frame identical to this frame (corrupt stack?)", "author": "jacob.benoit.1@gmail.com"}, {"author": "jacob.benoit.1@gmail.com", "bug_id": 653745, "tags": [], "creator": "jacob.benoit.1@gmail.com", "count": 1, "raw_text": "OK, this is almost certainly caused by the height=2183 being greater than 2048", "id": 5440096, "text": "OK, this is almost certainly caused by the height=2183 being greater than 2048", "creation_time": "2011-04-29T18:44:16Z", "attachment_id": null, "time": "2011-04-29T18:44:16Z", "is_private": false}, {"time": "2011-04-29T20:10:51Z", "count": 2, "tags": [], "creator": "jacob.benoit.1@gmail.com", "bug_id": 653745, "id": 5440296, "raw_text": "Probably a dupe of bug 607687 ?", "creation_time": "2011-04-29T20:10:51Z", "is_private": false, "text": "Probably a dupe of bug 607687 ?", "attachment_id": null, "author": "jacob.benoit.1@gmail.com"}]}}}