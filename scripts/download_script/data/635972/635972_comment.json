{"bugs": {"635972": {"comments": [{"creator": "bzbarsky@mit.edu", "raw_text": "See the attached testcase, which will likely hang your browser for many seconds on each paint.\n\nIf I switch to \"border-collapse: separate\" or to the \"solid\" border style, things are much faster.", "attachment_id": 514277, "creation_time": "2011-02-22T20:59:35Z", "tags": [], "text": "Created attachment 514277\nTestcase: CAN HANG BROWSER\n\nSee the attached testcase, which will likely hang your browser for many seconds on each paint.\n\nIf I switch to \"border-collapse: separate\" or to the \"solid\" border style, things are much faster.", "bug_id": 635972, "count": 0, "author": "bzbarsky@mit.edu", "time": "2011-02-22T20:59:35Z", "is_private": false, "id": 5296796}, {"bug_id": 635972, "text": "This looks like just a big, non-AA stroke like that being very slow, presumably because Cairo's tessellating the whole thing. For what it's worth, D2D doesn't do any better. We could see if an optimized draw could be done here, that only draws the part that's visible. (i.e. stroke a 'U' shape or two parallel lines in this case)", "attachment_id": null, "tags": [], "creation_time": "2011-02-22T21:24:17Z", "creator": "bas@basschouten.com", "raw_text": "This looks like just a big, non-AA stroke like that being very slow, presumably because Cairo's tessellating the whole thing. For what it's worth, D2D doesn't do any better. We could see if an optimized draw could be done here, that only draws the part that's visible. (i.e. stroke a 'U' shape or two parallel lines in this case)", "id": 5296883, "is_private": false, "count": 1, "time": "2011-02-22T21:24:17Z", "author": "bas@basschouten.com"}, {"id": 5296900, "count": 2, "author": "bzbarsky@mit.edu", "time": "2011-02-22T21:30:07Z", "is_private": false, "text": "Yeah, the profile was all in path stuff, iirc, on Mac.\n\nWhat's curious is that the border-collapse:separate case is faster.  Do we do a better job of clipping to just the viewport in that case or something?  I guess that's what the last part of comment 1 is about?", "bug_id": 635972, "creator": "bzbarsky@mit.edu", "raw_text": "Yeah, the profile was all in path stuff, iirc, on Mac.\n\nWhat's curious is that the border-collapse:separate case is faster.  Do we do a better job of clipping to just the viewport in that case or something?  I guess that's what the last part of comment 1 is about?", "attachment_id": null, "tags": [], "creation_time": "2011-02-22T21:30:07Z"}, {"is_private": false, "author": "bas@basschouten.com", "id": 5296965, "attachment_id": null, "creation_time": "2011-02-22T21:49:33Z", "tags": [], "bug_id": 635972, "count": 3, "time": "2011-02-22T21:49:33Z", "creator": "bas@basschouten.com", "raw_text": "I must admit I'm not sure what will happen in that case inside the border drawing code. It could be that that causes it to hit my optimized codepaths, or cause it to -not- hit them and thereby get some speed up by doing separate strokes, but it's hard to say without seeing the traces.", "text": "I must admit I'm not sure what will happen in that case inside the border drawing code. It could be that that causes it to hit my optimized codepaths, or cause it to -not- hit them and thereby get some speed up by doing separate strokes, but it's hard to say without seeing the traces."}, {"count": 4, "time": "2011-06-14T23:34:34Z", "creator": "rjesup@jesup.org", "raw_text": "", "text": "*** Bug 664071 has been marked as a duplicate of this bug. ***", "author": "rjesup@jesup.org", "is_private": false, "id": 5532794, "attachment_id": null, "tags": [], "creation_time": "2011-06-14T23:34:34Z", "bug_id": 635972}, {"text": "I have jprofs in bug 664071 of this problem (hit in the wild on HuffPost).  99% in painting table borders, 95%+ in FillRect.  This was on Linux over remote X connection.", "creator": "rjesup@jesup.org", "raw_text": "I have jprofs in bug 664071 of this problem (hit in the wild on HuffPost).  99% in painting table borders, 95%+ in FillRect.  This was on Linux over remote X connection.", "count": 5, "time": "2011-06-14T23:36:25Z", "bug_id": 635972, "attachment_id": null, "creation_time": "2011-06-14T23:36:25Z", "tags": [], "id": 5532801, "is_private": false, "author": "rjesup@jesup.org"}, {"time": "2011-06-15T03:09:16Z", "count": 6, "text": "I strong suspect (though it's probably no surprise) that we need to clip the loops in nsCSSRendering.cpp, lines 3210 to 3229.  Normally the clipping occurs in FillRect somewhere, but it's getting done a silly number of times when dotted/dashed.", "raw_text": "I strong suspect (though it's probably no surprise) that we need to clip the loops in nsCSSRendering.cpp, lines 3210 to 3229.  Normally the clipping occurs in FillRect somewhere, but it's getting done a silly number of times when dotted/dashed.", "creator": "rjesup@jesup.org", "id": 5533135, "is_private": false, "author": "rjesup@jesup.org", "bug_id": 635972, "creation_time": "2011-06-15T03:09:16Z", "tags": [], "attachment_id": null}, {"raw_text": "This jprof looks very similar to the one from bug 664071; effectively the same.  Note that this testcase is far *less* painful than the one hit in the wild for bug 664071, which would lock the browser for 30+ seconds on each redraw.  This testcase on the same machine only caused a couple-second pause on expose.", "creator": "rjesup@jesup.org", "text": "Created attachment 539545\nJprof of this testcase on expose/hide repeatedly plus a scroll or two\n\nThis jprof looks very similar to the one from bug 664071; effectively the same.  Note that this testcase is far *less* painful than the one hit in the wild for bug 664071, which would lock the browser for 30+ seconds on each redraw.  This testcase on the same machine only caused a couple-second pause on expose.", "time": "2011-06-15T15:42:11Z", "count": 7, "tags": [], "creation_time": "2011-06-15T15:42:11Z", "attachment_id": 539545, "bug_id": 635972, "is_private": false, "author": "rjesup@jesup.org", "id": 5534088}, {"time": "2011-07-30T09:42:00Z", "count": 8, "raw_text": "dupe of bug 266702?", "creator": "bernd_mozilla@gmx.de", "text": "dupe of bug 266702?", "is_private": false, "author": "bernd_mozilla@gmx.de", "id": 5623522, "tags": [], "creation_time": "2011-07-30T09:42:00Z", "attachment_id": null, "bug_id": 635972}, {"raw_text": "No, not a dup - this is about clipping, not the absolute cost of drawing them.  The two bugs feed on each other, though.", "creator": "rjesup@jesup.org", "text": "No, not a dup - this is about clipping, not the absolute cost of drawing them.  The two bugs feed on each other, though.", "time": "2011-08-03T21:17:41Z", "count": 9, "tags": [], "creation_time": "2011-08-03T21:17:41Z", "attachment_id": null, "bug_id": 635972, "author": "rjesup@jesup.org", "is_private": false, "id": 5631534}, {"raw_text": "Isn't this a DUPE of bug 266702?", "creator": "RNicoletto@gmail.com", "creation_time": "2012-07-25T14:21:05Z", "tags": [], "attachment_id": null, "text": "Isn't this a DUPE of bug 266702?", "bug_id": 635972, "author": "RNicoletto@gmail.com", "time": "2012-07-25T14:21:05Z", "count": 10, "is_private": false, "id": 6504187}, {"creator": "RNicoletto@gmail.com", "raw_text": "(In reply to RNicoletto from comment #10)\n> Isn't this a DUPE of bug 266702?\n\nOOOPPSSS... Sorry, I missed comment 8 and comment 9. :(", "attachment_id": null, "tags": [], "creation_time": "2012-07-25T14:22:11Z", "text": "(In reply to RNicoletto from comment #10)\n> Isn't this a DUPE of bug 266702?\n\nOOOPPSSS... Sorry, I missed comment 8 and comment 9. :(", "bug_id": 635972, "count": 11, "time": "2012-07-25T14:22:11Z", "author": "RNicoletto@gmail.com", "is_private": false, "id": 6504189}]}}, "comments": {}}