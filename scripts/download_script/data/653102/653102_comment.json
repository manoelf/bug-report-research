{"bugs": {"653102": {"comments": [{"author": "jacob.benoit.1@gmail.com", "text": "GfxInfo is currently caching as prefs the blacklisting decisions: these are the gfx.blacklist.* prefs.\n\nThis is only getting re-evaluated once a day.\n\nIn principle that only applied to the downloaded blacklist but in practice that applies also to the compiled-in blacklist.\n\nProposed changes:\n * do not cache blacklisting decisions\n * cache the downloaded blacklist itself to avoid having to re-download it everytime. Though, I would naively assume that such AMO blocklist caching is already being performed without us having to do anything about it?", "count": 0, "attachment_id": null, "creator": "jacob.benoit.1@gmail.com", "time": "2011-04-27T13:25:40Z", "id": 5434510, "is_private": false, "raw_text": "GfxInfo is currently caching as prefs the blacklisting decisions: these are the gfx.blacklist.* prefs.\n\nThis is only getting re-evaluated once a day.\n\nIn principle that only applied to the downloaded blacklist but in practice that applies also to the compiled-in blacklist.\n\nProposed changes:\n * do not cache blacklisting decisions\n * cache the downloaded blacklist itself to avoid having to re-download it everytime. Though, I would naively assume that such AMO blocklist caching is already being performed without us having to do anything about it?", "bug_id": 653102, "creation_time": "2011-04-27T13:25:40Z", "tags": []}, {"text": "This was introduced in Bug 625160 - Part 3.", "count": 1, "id": 5434572, "author": "jacob.benoit.1@gmail.com", "time": "2011-04-27T13:53:54Z", "creator": "jacob.benoit.1@gmail.com", "tags": [], "raw_text": "This was introduced in Bug 625160 - Part 3.", "creation_time": "2011-04-27T13:53:54Z", "bug_id": 653102, "is_private": false, "attachment_id": null}, {"creator": "jacob.benoit.1@gmail.com", "tags": [], "raw_text": "", "creation_time": "2011-05-31T03:35:08Z", "bug_id": 653102, "is_private": false, "attachment_id": null, "count": 2, "text": "*** Bug 660730 has been marked as a duplicate of this bug. ***", "id": 5502548, "author": "jacob.benoit.1@gmail.com", "time": "2011-05-31T03:35:08Z"}, {"creation_time": "2011-08-22T22:14:50Z", "bug_id": 653102, "raw_text": "", "tags": [], "creator": "jacob.benoit.1@gmail.com", "attachment_id": null, "is_private": false, "text": "*** Bug 680769 has been marked as a duplicate of this bug. ***", "count": 3, "time": "2011-08-22T22:14:50Z", "author": "jacob.benoit.1@gmail.com", "id": 5670450}, {"attachment_id": null, "is_private": false, "raw_text": "", "creation_time": "2011-10-11T21:13:22Z", "bug_id": 653102, "creator": "jacob.benoit.1@gmail.com", "tags": [], "author": "jacob.benoit.1@gmail.com", "time": "2011-10-11T21:13:22Z", "id": 5775781, "count": 4, "text": "*** Bug 693126 has been marked as a duplicate of this bug. ***"}, {"author": "jacob.benoit.1@gmail.com", "text": "*** Bug 716264 has been marked as a duplicate of this bug. ***", "count": 5, "attachment_id": null, "creator": "jacob.benoit.1@gmail.com", "time": "2012-01-07T23:10:28Z", "id": 5963284, "is_private": false, "bug_id": 653102, "creation_time": "2012-01-07T23:10:28Z", "raw_text": "", "tags": []}, {"bug_id": 653102, "creation_time": "2012-01-16T03:59:29Z", "raw_text": "", "tags": [], "creator": "jacob.benoit.1@gmail.com", "is_private": false, "attachment_id": null, "count": 6, "text": "*** Bug 653799 has been marked as a duplicate of this bug. ***", "time": "2012-01-16T03:59:29Z", "author": "jacob.benoit.1@gmail.com", "id": 5982220}, {"id": 6126590, "time": "2012-03-09T03:28:16Z", "tags": [], "raw_text": "", "bug_id": 653102, "creation_time": "2012-03-09T03:28:16Z", "is_private": false, "text": "*** Bug 734297 has been marked as a duplicate of this bug. ***", "count": 7, "author": "jacob.benoit.1@gmail.com", "creator": "jacob.benoit.1@gmail.com", "attachment_id": null}, {"text": "Proposal:\n - evaluate all the blocklist early at startup, in a separarate thread, so we hopefully don't delay firefox startup significantly. The result of that operations is a pre-computed blocklisting decision for each gfx feature. So you could call that a cache, except that it's not persistent, it's not stored in prefs.\n - Drop gfx.blacklist.* prefs altogether.\n - at startup, do also precompute a hash value aggregating any data point that may invalidate the precomputed blocklisting decisions. This would include e.g. device ID, driver version, etc.\n - when initializing a gfx feature, recompute the invalidation hash. If it agrees with the precomputed one, use the precomputed blocklisting decisions. If it doesn't agree, re-evaluate the blocklist for all gfx features and update the saved invalidation hash.", "count": 8, "author": "jacob.benoit.1@gmail.com", "creator": "jacob.benoit.1@gmail.com", "attachment_id": null, "time": "2012-03-21T15:23:00Z", "id": 6158960, "raw_text": "Proposal:\n - evaluate all the blocklist early at startup, in a separarate thread, so we hopefully don't delay firefox startup significantly. The result of that operations is a pre-computed blocklisting decision for each gfx feature. So you could call that a cache, except that it's not persistent, it's not stored in prefs.\n - Drop gfx.blacklist.* prefs altogether.\n - at startup, do also precompute a hash value aggregating any data point that may invalidate the precomputed blocklisting decisions. This would include e.g. device ID, driver version, etc.\n - when initializing a gfx feature, recompute the invalidation hash. If it agrees with the precomputed one, use the precomputed blocklisting decisions. If it doesn't agree, re-evaluate the blocklist for all gfx features and update the saved invalidation hash.", "creation_time": "2012-03-21T15:23:00Z", "bug_id": 653102, "tags": [], "is_private": false}, {"author": "jacob.benoit.1@gmail.com", "count": 9, "text": "*** Bug 756370 has been marked as a duplicate of this bug. ***", "attachment_id": null, "creator": "jacob.benoit.1@gmail.com", "time": "2012-05-21T04:19:05Z", "id": 6323077, "is_private": false, "raw_text": "", "creation_time": "2012-05-21T04:19:05Z", "bug_id": 653102, "tags": []}, {"creator": "callow.mark@artspark.co.jp", "tags": [], "raw_text": "Probably what triggered the issue in my case (bug #756370) is that I had been running FF in Windows 7 from bootcamp via a VM. I then rebooted bootcamp's Win7 directly on the hardware. Probably the blacklisting was valid when running under the VM and the cache carried it forward over the reboot.", "bug_id": 653102, "creation_time": "2012-05-21T04:35:11Z", "attachment_id": null, "is_private": false, "count": 10, "text": "Probably what triggered the issue in my case (bug #756370) is that I had been running FF in Windows 7 from bootcamp via a VM. I then rebooted bootcamp's Win7 directly on the hardware. Probably the blacklisting was valid when running under the VM and the cache carried it forward over the reboot.", "id": 6323086, "author": "callow.mark@artspark.co.jp", "time": "2012-05-21T04:35:11Z"}, {"attachment_id": null, "creator": "jacob.benoit.1@gmail.com", "author": "jacob.benoit.1@gmail.com", "count": 11, "text": "I see. Your case would be appropriately handled if we had a proper invalidation mechanism for this cache, which we don't at the moment.", "is_private": false, "creation_time": "2012-05-21T04:47:57Z", "bug_id": 653102, "raw_text": "I see. Your case would be appropriately handled if we had a proper invalidation mechanism for this cache, which we don't at the moment.", "tags": [], "time": "2012-05-21T04:47:57Z", "id": 6323099}, {"author": "pe1chl@amsat.org", "count": 12, "text": "Additionally, evaluations of the hardware (capabilities or problems) should NEVER be stored in the user profile.\nIn a company network, the user profile is usually roaming.  I.e. it is retrieved from a network server when the user logs in, gets modified during the user session, and is then stored again on the server when the user logs out.\nHowever, those user login sessions can be (and will be) on different computers, where different evaluations of the hardware can be made.\nIt makes no sense to have those evaluations roam from one computer to the next in the user profile.", "attachment_id": null, "creator": "pe1chl@amsat.org", "id": 6940763, "time": "2012-12-22T16:40:02Z", "is_private": false, "tags": [], "raw_text": "Additionally, evaluations of the hardware (capabilities or problems) should NEVER be stored in the user profile.\nIn a company network, the user profile is usually roaming.  I.e. it is retrieved from a network server when the user logs in, gets modified during the user session, and is then stored again on the server when the user logs out.\nHowever, those user login sessions can be (and will be) on different computers, where different evaluations of the hardware can be made.\nIt makes no sense to have those evaluations roam from one computer to the next in the user profile.", "bug_id": 653102, "creation_time": "2012-12-22T16:40:02Z"}]}}, "comments": {}}