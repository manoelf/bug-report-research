{"comments": {}, "bugs": {"644322": {"comments": [{"creation_time": "2011-03-23T20:41:47Z", "text": "User-Agent:       Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0) Gecko/20100101 Firefox/4.0\nBuild Identifier: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0) Gecko/20100101 Firefox/4.0\n\nThe new non-modal popups are very oddly dismissed and have the underlying queued events fire.  You can't block a form submit via javascript for example.\n\nThis seems horribly broken.  This means that attempting to visit bookmarks can post data.  You could accidentally delete something instead of avoid the confirmation that would have normally worked.\n\nReproducible: Always\n\nSteps to Reproduce:\nAttempt a navigation (href/form post) blocked by a new non-modal popup (alert/confirm/prompt).  Then navigate by using virtually any other method available.  Home, Bookmark, Back, Forward, Refresh, manually typing in the address bar. Or just load the example file below.\n\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n<head>\n\t<title>Firefox 4 Alert/Confirm/Prompt Navigation Bug</title>\n\t<script type=\"text/javascript\">\n\t\tfunction testConfirmation() {\n\t\t\tvar qs = document.location.search\n\t\t\tif (qs == '?confirmed=1') {\n\t\t\t\tdocument.getElementById('confirmed').style.display = 'block';\n\t\t\t\tdocument.getElementById('f').style.display = 'none';\n\t\t\t}\n\t\t}\n\t</script>\n\t<style type=\"text/css\">\n\t\t#confirmed {text-decoration:blink; color:red; font-weight:bold; font-size:30px; width:300px; margin:30px auto; }\n\t</style>\n</head>\n<body>\n\t<p id=\"confirmed\" style=\"display:none;\">MACHINE ERASED</p>\n\t<form id=\"f\" action=\"tab-alert-bug.html\" method=\"get\" onsubmit=\"return confirm('Are you certain you wish to erase your machine?');\">\n\t\t<h1>Firefox 4 Alert/Confirm/Prompt Navigation Bug</h1>\n\t\t<p>Any sort of navigation will confirm these popups illogically.</p>\n\t\t<ul>\n\t\t\t<li>Home</li>\n\t\t\t<li>Refresh</li>\n\t\t\t<li>Manually typing in the address bar</li>\n\t\t\t<li>Bookmark</li>\n\t\t\t<li>Back</li>\n\t\t\t<li>Forward</li>\n\t\t</ul>\n\t\t<p>Why would navigation or unloading the existing page execute the alert/confirm dialog?</p>\n\t\t<p>Even if it did why would it return true?</p>\n\t\t<input type=\"hidden\" name=\"confirmed\" value=\"1\"/>\n\t\t<input type=\"submit\" value=\"Initiate Bug via Form Submit\"/>\n\t\t<br/><a href=\"tab-alert-bug.html?confirmed=1\" onclick=\"return confirm('Are you certain you wish to erase your machine?');\">Initiate Bug via Href (confirm)</a>\n\t\t<br/><a href=\"tab-alert-bug.html?confirmed=1\" onclick=\"return (prompt('Are you certain you wish to erase your machine?') == 'I doubt you typed this.');\">Initiate Bug via Href (prompt)</a>\n\t\t<br/><a href=\"tab-alert-bug.html?confirmed=1\" onclick=\"alert('You are going to erase your machine?');\">Initiate Bug via Href (alert)</a>\n\t</form>\n\t<script type=\"text/javascript\"> testConfirmation(); </script>\n</body>\n</html>\nActual Results:  \nYou won't successfully navigate to any page other than the new one queued by the previous step (i.e. You won't get to your homepage you'll instead submit the form).\n\nExpected Results:  \nNavigate to another url without somehow executing the possible result from the non-modal window.", "attachment_id": null, "id": 5363650, "raw_text": "User-Agent:       Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0) Gecko/20100101 Firefox/4.0\nBuild Identifier: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0) Gecko/20100101 Firefox/4.0\n\nThe new non-modal popups are very oddly dismissed and have the underlying queued events fire.  You can't block a form submit via javascript for example.\n\nThis seems horribly broken.  This means that attempting to visit bookmarks can post data.  You could accidentally delete something instead of avoid the confirmation that would have normally worked.\n\nReproducible: Always\n\nSteps to Reproduce:\nAttempt a navigation (href/form post) blocked by a new non-modal popup (alert/confirm/prompt).  Then navigate by using virtually any other method available.  Home, Bookmark, Back, Forward, Refresh, manually typing in the address bar. Or just load the example file below.\n\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n<head>\n\t<title>Firefox 4 Alert/Confirm/Prompt Navigation Bug</title>\n\t<script type=\"text/javascript\">\n\t\tfunction testConfirmation() {\n\t\t\tvar qs = document.location.search\n\t\t\tif (qs == '?confirmed=1') {\n\t\t\t\tdocument.getElementById('confirmed').style.display = 'block';\n\t\t\t\tdocument.getElementById('f').style.display = 'none';\n\t\t\t}\n\t\t}\n\t</script>\n\t<style type=\"text/css\">\n\t\t#confirmed {text-decoration:blink; color:red; font-weight:bold; font-size:30px; width:300px; margin:30px auto; }\n\t</style>\n</head>\n<body>\n\t<p id=\"confirmed\" style=\"display:none;\">MACHINE ERASED</p>\n\t<form id=\"f\" action=\"tab-alert-bug.html\" method=\"get\" onsubmit=\"return confirm('Are you certain you wish to erase your machine?');\">\n\t\t<h1>Firefox 4 Alert/Confirm/Prompt Navigation Bug</h1>\n\t\t<p>Any sort of navigation will confirm these popups illogically.</p>\n\t\t<ul>\n\t\t\t<li>Home</li>\n\t\t\t<li>Refresh</li>\n\t\t\t<li>Manually typing in the address bar</li>\n\t\t\t<li>Bookmark</li>\n\t\t\t<li>Back</li>\n\t\t\t<li>Forward</li>\n\t\t</ul>\n\t\t<p>Why would navigation or unloading the existing page execute the alert/confirm dialog?</p>\n\t\t<p>Even if it did why would it return true?</p>\n\t\t<input type=\"hidden\" name=\"confirmed\" value=\"1\"/>\n\t\t<input type=\"submit\" value=\"Initiate Bug via Form Submit\"/>\n\t\t<br/><a href=\"tab-alert-bug.html?confirmed=1\" onclick=\"return confirm('Are you certain you wish to erase your machine?');\">Initiate Bug via Href (confirm)</a>\n\t\t<br/><a href=\"tab-alert-bug.html?confirmed=1\" onclick=\"return (prompt('Are you certain you wish to erase your machine?') == 'I doubt you typed this.');\">Initiate Bug via Href (prompt)</a>\n\t\t<br/><a href=\"tab-alert-bug.html?confirmed=1\" onclick=\"alert('You are going to erase your machine?');\">Initiate Bug via Href (alert)</a>\n\t</form>\n\t<script type=\"text/javascript\"> testConfirmation(); </script>\n</body>\n</html>\nActual Results:  \nYou won't successfully navigate to any page other than the new one queued by the previous step (i.e. You won't get to your homepage you'll instead submit the form).\n\nExpected Results:  \nNavigate to another url without somehow executing the possible result from the non-modal window.", "tags": [], "is_private": false, "creator": "bugzilla@elgonn.com", "author": "bugzilla@elgonn.com", "bug_id": 644322, "count": 0, "time": "2011-03-23T20:41:47Z"}, {"author": "bugzilla@elgonn.com", "text": "Created attachment 521295\nA test file that shows the problem.", "creator": "bugzilla@elgonn.com", "attachment_id": 521295, "id": 5363654, "creation_time": "2011-03-23T20:42:45Z", "tags": [], "is_private": false, "time": "2011-03-23T20:42:45Z", "count": 1, "bug_id": 644322, "raw_text": ""}, {"creation_time": "2011-03-24T00:10:06Z", "author": "emorley@mozilla.com", "attachment_id": null, "id": 5364519, "creator": "emorley@mozilla.com", "text": "Confirmed with Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.2a1pre) Gecko/20110323 Firefox/4.2a1pre ID:20110323074443", "count": 2, "raw_text": "Confirmed with Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.2a1pre) Gecko/20110323 Firefox/4.2a1pre ID:20110323074443", "bug_id": 644322, "is_private": false, "tags": [], "time": "2011-03-24T00:10:06Z"}, {"author": "BijuMailList@GMail.Com", "attachment_id": 521421, "id": 5365117, "text": "Created attachment 521421\nmodified tab-alert-bug.html\n\nThis should be invalid, programmer should be using a better way to get user conformation. See Bug 578828 for workaround. \n\nOr for now use onbeforeunload suggested in the attachment \nsee \"modified tab-alert-bug.html\"\n\nCurrent behavior is users want, see comments at bug 59314", "creator": "BijuMailList@GMail.Com", "creation_time": "2011-03-24T06:11:00Z", "is_private": false, "tags": [], "time": "2011-03-24T06:11:00Z", "count": 3, "raw_text": "This should be invalid, programmer should be using a better way to get user conformation. See Bug 578828 for workaround. \n\nOr for now use onbeforeunload suggested in the attachment \nsee \"modified tab-alert-bug.html\"\n\nCurrent behavior is users want, see comments at bug 59314", "bug_id": 644322}, {"bug_id": 644322, "count": 4, "time": "2011-03-24T06:27:36Z", "creator": "BijuMailList@GMail.Com", "author": "BijuMailList@GMail.Com", "raw_text": "better modified tab-alert-bug.html", "is_private": false, "tags": [], "creation_time": "2011-03-24T06:27:36Z", "attachment_id": 521423, "id": 5365131, "text": "Created attachment 521423\nmodified tab-alert-bug.html\n\nbetter modified tab-alert-bug.html"}, {"author": "BijuMailList@GMail.Com", "creator": "BijuMailList@GMail.Com", "count": 5, "bug_id": 644322, "time": "2011-03-24T06:36:10Z", "creation_time": "2011-03-24T06:36:10Z", "text": "Created attachment 521426\nmodified tab-alert-bug.html", "attachment_id": 521426, "id": 5365141, "raw_text": "", "tags": [], "is_private": false}, {"author": "BijuMailList@GMail.Com", "creator": "BijuMailList@GMail.Com", "count": 6, "bug_id": 644322, "time": "2011-03-24T06:47:07Z", "creation_time": "2011-03-24T06:47:07Z", "attachment_id": 521431, "id": 5365160, "text": "Created attachment 521431\nmodified tab-alert-bug.html", "raw_text": "", "is_private": false, "tags": []}, {"time": "2011-03-24T07:09:31Z", "tags": [], "is_private": false, "bug_id": 644322, "raw_text": "(In reply to comment #3)\n> Created attachment 521421 [details]\n> modified tab-alert-bug.html\n> \n> This should be invalid, programmer should be using a better way to get user\n> conformation. See Bug 578828 for workaround. \n> \n> Or for now use onbeforeunload suggested in the attachment \n> see \"modified tab-alert-bug.html\"\n> \n> Current behavior is users want, see comments at bug 59314\n\nYou've misunderstood the point.  I'm not trying to stop the page from unload.  I want it to unload.  That's the whole point of say hitting the Home button.\n\nBut the act of unloading it shouldn't cause the attempted navigation to fail.  It shouldn't even navigate on its own.\n\nThe example method of triggering the bug doesn't matter.  None of your changes to the original file matter.\n\nA tab-modal dialog shouldn't somehow still fire when attempting to navigate via a completely non-tab-content action.", "count": 7, "creator": "bugzilla@elgonn.com", "text": "(In reply to comment #3)\n> Created attachment 521421 [details]\n> modified tab-alert-bug.html\n> \n> This should be invalid, programmer should be using a better way to get user\n> conformation. See Bug 578828 for workaround. \n> \n> Or for now use onbeforeunload suggested in the attachment \n> see \"modified tab-alert-bug.html\"\n> \n> Current behavior is users want, see comments at bug 59314\n\nYou've misunderstood the point.  I'm not trying to stop the page from unload.  I want it to unload.  That's the whole point of say hitting the Home button.\n\nBut the act of unloading it shouldn't cause the attempted navigation to fail.  It shouldn't even navigate on its own.\n\nThe example method of triggering the bug doesn't matter.  None of your changes to the original file matter.\n\nA tab-modal dialog shouldn't somehow still fire when attempting to navigate via a completely non-tab-content action.", "id": 5365176, "attachment_id": null, "author": "bugzilla@elgonn.com", "creation_time": "2011-03-24T07:09:31Z"}, {"bug_id": 644322, "raw_text": "Bulk move to Toolkit::Notifications and Alerts\n\nFilter on notifications-and-alerts-component.", "count": 8, "time": "2014-05-21T06:41:31Z", "tags": [], "is_private": false, "creation_time": "2014-05-21T06:41:31Z", "text": "Bulk move to Toolkit::Notifications and Alerts\n\nFilter on notifications-and-alerts-component.", "creator": "mozilla+bmo@noorenberghe.ca", "attachment_id": null, "id": 8819996, "author": "mozilla+bmo@noorenberghe.ca"}]}}}