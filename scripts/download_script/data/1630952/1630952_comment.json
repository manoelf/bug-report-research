{"bugs": {"1630952": {"comments": [{"text": "Run a test like: `mach raptor --test raptor-tp6-outlook-firefox --post-startup-delay 0`\n\nThen while the page loads, paste `about:crashcontent` into the urlbar. That crashes the tab, and leaves Firefox hanging around for 25 minutes before Raptor kills the browser:\n\n```\n12:39:12     INFO -  raptor-control-server Info: received webext_status: ended page cycle 16\n13:04:58     INFO -  mozcrash Copy/paste: /Users/henrik/bin/macosx64_minidump_stackwalk /var/folders/c2/q_47wqh13n902fj9_zxczclr0000gn/T/tmp3t6PdC/minidumps/44529466-92F3-4345-A9DA-A215361FD97E.dmp /var/folders/c2/q_47wqh13n902fj9_zxczclr0000gn/T/tmpRQR3FI\n```\n\nTo instruct eg. Firefox to immediately shutdown the `MOZ_CRASHREPORTER_SHUTDOWN` environment variable has to be passed to the browser.\n\nNote that due to bug 1630037 Raptor still hangs.", "time": "2020-04-17T13:14:01Z", "creation_time": "2020-04-17T13:14:01Z", "raw_text": "Run a test like: `mach raptor --test raptor-tp6-outlook-firefox --post-startup-delay 0`\n\nThen while the page loads, paste `about:crashcontent` into the urlbar. That crashes the tab, and leaves Firefox hanging around for 25 minutes before Raptor kills the browser:\n\n```\n12:39:12     INFO -  raptor-control-server Info: received webext_status: ended page cycle 16\n13:04:58     INFO -  mozcrash Copy/paste: /Users/henrik/bin/macosx64_minidump_stackwalk /var/folders/c2/q_47wqh13n902fj9_zxczclr0000gn/T/tmp3t6PdC/minidumps/44529466-92F3-4345-A9DA-A215361FD97E.dmp /var/folders/c2/q_47wqh13n902fj9_zxczclr0000gn/T/tmpRQR3FI\n```\n\nTo instruct eg. Firefox to immediately shutdown the `MOZ_CRASHREPORTER_SHUTDOWN` environment variable has to be passed to the browser.\n\nNote that due to bug 1630037 Raptor still hangs.", "is_private": false, "count": 0, "bug_id": 1630952, "id": 14761395, "attachment_id": null, "creator": "hskupin@gmail.com", "tags": [], "author": "hskupin@gmail.com"}, {"bug_id": 1630952, "id": 14761404, "creator": "hskupin@gmail.com", "time": "2020-04-17T13:17:33Z", "raw_text": "With that env variable in place we save 25 minutes per task if Firefox crashes.", "is_private": false, "count": 1, "attachment_id": null, "tags": [], "author": "hskupin@gmail.com", "text": "With that env variable in place we save 25 minutes per task if Firefox crashes.", "creation_time": "2020-04-17T13:17:33Z"}, {"count": 2, "raw_text": "", "text": "Created attachment 9141254\nBug 1630952 - [raptor] Force browser to shutdown itself for content crashes.", "time": "2020-04-17T13:27:43Z", "creation_time": "2020-04-17T13:27:43Z", "is_private": false, "creator": "hskupin@gmail.com", "attachment_id": 9141254, "author": "hskupin@gmail.com", "tags": [], "bug_id": 1630952, "id": 14761424}, {"attachment_id": null, "author": "jmaher@mozilla.com", "tags": [], "creation_time": "2020-04-17T13:28:52Z", "text": "this is a really great find.  are there any risks of adding this ENV VAR?", "creator": "jmaher@mozilla.com", "bug_id": 1630952, "id": 14761425, "count": 3, "raw_text": "this is a really great find.  are there any risks of adding this ENV VAR?", "time": "2020-04-17T13:28:52Z", "is_private": false}, {"creation_time": "2020-04-17T13:31:09Z", "text": "also will this work for Android?", "author": "jmaher@mozilla.com", "tags": [], "attachment_id": null, "count": 4, "is_private": false, "raw_text": "also will this work for Android?", "time": "2020-04-17T13:31:09Z", "creator": "jmaher@mozilla.com", "id": 14761432, "bug_id": 1630952}, {"id": 14761440, "bug_id": 1630952, "tags": [], "author": "hskupin@gmail.com", "attachment_id": null, "creator": "hskupin@gmail.com", "is_private": false, "text": "(In reply to Joel Maher ( :jmaher ) (UTC-4) from comment #3)\n> this is a really great find.  are there any risks of adding this ENV VAR?\n\nNo, it's basically in use by nearly all the other harnesses meanwhile. And with the tab crashed we can't / don't want to continue anyway.\n\n(In reply to Joel Maher ( :jmaher ) (UTC-4) from comment #4)\n> also will this work for Android?\n\nYes, my patch also includes it for Android.", "creation_time": "2020-04-17T13:36:00Z", "time": "2020-04-17T13:36:00Z", "raw_text": "(In reply to Joel Maher ( :jmaher ) (UTC-4) from comment #3)\n> this is a really great find.  are there any risks of adding this ENV VAR?\n\nNo, it's basically in use by nearly all the other harnesses meanwhile. And with the tab crashed we can't / don't want to continue anyway.\n\n(In reply to Joel Maher ( :jmaher ) (UTC-4) from comment #4)\n> also will this work for Android?\n\nYes, my patch also includes it for Android.", "count": 5}, {"count": 6, "is_private": false, "raw_text": "Pushed by hskupin@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/08be5b95d8bb\n[raptor] Force browser to shutdown itself for content crashes. r=perftest-reviewers,sparky", "time": "2020-04-17T19:33:28Z", "creator": "pulsebot@bots.tld", "id": 14762283, "bug_id": 1630952, "text": "Pushed by hskupin@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/08be5b95d8bb\n[raptor] Force browser to shutdown itself for content crashes. r=perftest-reviewers,sparky", "creation_time": "2020-04-17T19:33:28Z", "author": "pulsebot@bots.tld", "tags": [], "attachment_id": null}, {"text": "https://hg.mozilla.org/mozilla-central/rev/08be5b95d8bb", "creation_time": "2020-04-18T09:53:39Z", "attachment_id": null, "tags": ["bugherder"], "author": "nerli@mozilla.com", "count": 7, "time": "2020-04-18T09:53:39Z", "raw_text": "https://hg.mozilla.org/mozilla-central/rev/08be5b95d8bb", "is_private": false, "creator": "nerli@mozilla.com", "bug_id": 1630952, "id": 14763279}]}}, "comments": {}}