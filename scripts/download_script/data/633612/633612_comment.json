{"comments": {}, "bugs": {"633612": {"comments": [{"is_private": false, "count": 0, "time": "2011-02-11T21:58:15Z", "author": "bugmail@asutherland.org", "id": 5273816, "attachment_id": null, "creation_time": "2011-02-11T21:58:15Z", "tags": [], "creator": "bugmail@asutherland.org", "raw_text": "The mPrincipal referencing happens here in nsFileDataURI::Equals:\nhttp://mxr.mozilla.org/mozilla-central/source/content/base/src/nsFileDataProtocolHandler.cpp#281\n\nThere is no invariant that requires mPrincipal to be non-null.  In fact, the NewURI method has a case where it will explicitly initialize the value to null:\nhttp://mxr.mozilla.org/mozilla-central/source/content/base/src/nsFileDataProtocolHandler.cpp#400\n\nThis is happening to me in a Thunderbird debug build, triggered by places.  The notable part of the stack is as follows:\n#0 nsFileDataURI::Equals\n#1 nsURIHashKey::KeyEquals\n#2 nsTHashtable<mozilla::places::History::KeyClass>::s_MatchEntry\n#3 SearchTable\n#4 PL_DHashTableOperate\n#5 nsTHashtable<mozilla::places::History::KeyClass>::GetEntry\n#6 mozilla::places::History::UnregisterVisitedCallback\n#7 mozilla::dom::Link::UnregisterFromHistory\n#8 mozilla::dom::Link::ResetLinkState\n#9..#27 *::UnbindFromTree\n#28 nsDocument::~nsDocument\n#29..#30 nsHTMLDocument::~nsHTMLDocument\n#31 nsNodeUtils::LastRelease\n#32 nsDocument::Release\n#33 nsHTMLDocument::Release\n#34 nsCOMPtr<nsIDocument>::~nsCOMPtr\n#35..#36 nsPresContext::~nsPresContext\n#37 nsPresContext::Release\n#38 nsRefPtr<nsPresContext>::~nsRefPtr\n#39 nsDOMEvent::~nsDOMEvent\n#40 nsDOMEvent::~nsDOMEvent\n#41 nsDOMEvent::Release\n#42 DoDeferredRelease<nsISupports*>\n#43 XPCJSRuntime::GCCallback\n#44 DOMGCCallback\n#45 js_GC\n\ncc'ing Neil because he logged the similar Bug 620366 somewhat recently and there might be some underlying correlation?  (Maybe that was also mailnews-related and we are doing something bad where we don't provide a principal or something like that?)", "bug_id": 633612, "text": "The mPrincipal referencing happens here in nsFileDataURI::Equals:\nhttp://mxr.mozilla.org/mozilla-central/source/content/base/src/nsFileDataProtocolHandler.cpp#281\n\nThere is no invariant that requires mPrincipal to be non-null.  In fact, the NewURI method has a case where it will explicitly initialize the value to null:\nhttp://mxr.mozilla.org/mozilla-central/source/content/base/src/nsFileDataProtocolHandler.cpp#400\n\nThis is happening to me in a Thunderbird debug build, triggered by places.  The notable part of the stack is as follows:\n#0 nsFileDataURI::Equals\n#1 nsURIHashKey::KeyEquals\n#2 nsTHashtable<mozilla::places::History::KeyClass>::s_MatchEntry\n#3 SearchTable\n#4 PL_DHashTableOperate\n#5 nsTHashtable<mozilla::places::History::KeyClass>::GetEntry\n#6 mozilla::places::History::UnregisterVisitedCallback\n#7 mozilla::dom::Link::UnregisterFromHistory\n#8 mozilla::dom::Link::ResetLinkState\n#9..#27 *::UnbindFromTree\n#28 nsDocument::~nsDocument\n#29..#30 nsHTMLDocument::~nsHTMLDocument\n#31 nsNodeUtils::LastRelease\n#32 nsDocument::Release\n#33 nsHTMLDocument::Release\n#34 nsCOMPtr<nsIDocument>::~nsCOMPtr\n#35..#36 nsPresContext::~nsPresContext\n#37 nsPresContext::Release\n#38 nsRefPtr<nsPresContext>::~nsRefPtr\n#39 nsDOMEvent::~nsDOMEvent\n#40 nsDOMEvent::~nsDOMEvent\n#41 nsDOMEvent::Release\n#42 DoDeferredRelease<nsISupports*>\n#43 XPCJSRuntime::GCCallback\n#44 DOMGCCallback\n#45 js_GC\n\ncc'ing Neil because he logged the similar Bug 620366 somewhat recently and there might be some underlying correlation?  (Maybe that was also mailnews-related and we are doing something bad where we don't provide a principal or something like that?)"}, {"tags": [], "creation_time": "2011-02-11T22:05:59Z", "attachment_id": null, "raw_text": "Jonas?", "creator": "bzbarsky@mit.edu", "bug_id": 633612, "text": "Jonas?", "is_private": false, "time": "2011-02-11T22:05:59Z", "author": "bzbarsky@mit.edu", "count": 1, "id": 5273843}, {"author": "MatsPalmgren_bugz@use.startmail.com", "is_private": false, "id": 5686529, "attachment_id": null, "creation_time": "2011-08-29T23:39:34Z", "tags": [], "bug_id": 633612, "count": 2, "time": "2011-08-29T23:39:34Z", "creator": "MatsPalmgren_bugz@use.startmail.com", "raw_text": "Note the similar stack in bug 548685.", "text": "Note the similar stack in bug 548685."}, {"text": "https://bugzilla.mozilla.org/show_bug.cgi?id=1472046\n\nMove all DOM bugs that haven't been updated in more than 3 years and has no one currently assigned to P5.\n\nIf you have questions, please contact :mdaly.", "creator": "bug-husbandry-bot@mozilla.bugs", "raw_text": "https://bugzilla.mozilla.org/show_bug.cgi?id=1472046\n\nMove all DOM bugs that haven't been updated in more than 3 years and has no one currently assigned to P5.\n\nIf you have questions, please contact :mdaly.", "count": 3, "time": "2018-06-29T04:39:55Z", "bug_id": 633612, "attachment_id": null, "creation_time": "2018-06-29T04:39:55Z", "tags": [], "id": 13435226, "author": "bug-husbandry-bot@mozilla.bugs", "is_private": false}]}}}