{"bugs": {"1645234": {"comments": [{"id": 14877372, "bug_id": 1645234, "author": "mail@johann-hofmann.com", "tags": [], "creator": "mail@johann-hofmann.com", "attachment_id": null, "is_private": false, "raw_text": "It's really tedious to build something with requestStorageAccess and have absolutely no understanding of why calls are failing, since we only reject with `undefined`.\n\nWe should probably take proper error states to the spec level, but in the meantime we should just add better console warnings to our implementation.", "text": "It's really tedious to build something with requestStorageAccess and have absolutely no understanding of why calls are failing, since we only reject with `undefined`.\n\nWe should probably take proper error states to the spec level, but in the meantime we should just add better console warnings to our implementation.", "creation_time": "2020-06-11T22:47:36Z", "time": "2020-06-11T22:47:36Z", "count": 0}, {"tags": [], "author": "annevk@annevk.nl", "attachment_id": null, "creator": "annevk@annevk.nl", "id": 14878241, "bug_id": 1645234, "count": 1, "is_private": false, "creation_time": "2020-06-12T09:31:03Z", "text": "See discussion in https://github.com/privacycg/storage-access/issues/37 about changing undefined to a proper exception. I suspect that we want to reject with a single value going forward as well, but we should definitely have optimal information for web developers debugging locally.", "time": "2020-06-12T09:31:03Z", "raw_text": "See discussion in https://github.com/privacycg/storage-access/issues/37 about changing undefined to a proper exception. I suspect that we want to reject with a single value going forward as well, but we should definitely have optimal information for web developers debugging locally."}, {"id": 14879375, "bug_id": 1645234, "author": "mail@johann-hofmann.com", "tags": [], "creator": "mail@johann-hofmann.com", "attachment_id": null, "is_private": false, "raw_text": "(In reply to Anne (:annevk) from comment #1)\n> See discussion in https://github.com/privacycg/storage-access/issues/37 about changing undefined to a proper exception. I suspect that we want to reject with a single value going forward as well, but we should definitely have optimal information for web developers debugging locally.\n\nI see, thanks! I had expected that there might be concerns like this but I didn't realize there had been a discussion on the standard.\n\nThis shouldn't matter for console logging though, right? Since that's not perceivable by the site, IIUC.", "creation_time": "2020-06-12T20:52:40Z", "time": "2020-06-12T20:52:40Z", "text": "(In reply to Anne (:annevk) from comment #1)\n> See discussion in https://github.com/privacycg/storage-access/issues/37 about changing undefined to a proper exception. I suspect that we want to reject with a single value going forward as well, but we should definitely have optimal information for web developers debugging locally.\n\nI see, thanks! I had expected that there might be concerns like this but I didn't realize there had been a discussion on the standard.\n\nThis shouldn't matter for console logging though, right? Since that's not perceivable by the site, IIUC.", "count": 2}, {"is_private": false, "raw_text": "Correct.", "creation_time": "2020-06-13T06:37:38Z", "text": "Correct.", "time": "2020-06-13T06:37:38Z", "count": 3, "id": 14879936, "bug_id": 1645234, "author": "annevk@annevk.nl", "tags": [], "creator": "annevk@annevk.nl", "attachment_id": null}, {"count": 4, "text": "Created attachment 9156494\nBug 1645234 - Add more warnings to document.requestStorageAccess(). r=baku!,annevk,englehardt\n\n\nThe only common failure case that's not being warned about now is when the user\nrejected the prompt, which I think is expected behavior.", "creation_time": "2020-06-13T12:32:30Z", "time": "2020-06-13T12:32:30Z", "raw_text": "\nThe only common failure case that's not being warned about now is when the user\nrejected the prompt, which I think is expected behavior.", "is_private": false, "attachment_id": 9156494, "creator": "mail@johann-hofmann.com", "tags": [], "author": "mail@johann-hofmann.com", "bug_id": 1645234, "id": 14880033}, {"is_private": false, "text": "Created attachment 9156898\nBug 1645234 - Add learn more link to storage access API warnings. r=nchevobbe\n\n\n\nDepends on D79597", "creation_time": "2020-06-16T07:07:58Z", "time": "2020-06-16T07:07:58Z", "raw_text": "\n\nDepends on D79597", "count": 5, "id": 14884214, "bug_id": 1645234, "tags": [], "author": "mail@johann-hofmann.com", "attachment_id": 9156898, "creator": "mail@johann-hofmann.com"}, {"id": 14900366, "bug_id": 1645234, "tags": [], "author": "mail@johann-hofmann.com", "attachment_id": 9159085, "creator": "mail@johann-hofmann.com", "is_private": false, "creation_time": "2020-06-24T22:01:04Z", "text": "Created attachment 9159085\nBug 1645234 - Add a test for document.requestStorageAccess error messages. r=nchevobbe", "time": "2020-06-24T22:01:04Z", "raw_text": "", "count": 6}, {"creator": "pulsebot@bots.tld", "attachment_id": null, "author": "pulsebot@bots.tld", "tags": [], "bug_id": 1645234, "id": 14918008, "count": 7, "raw_text": "Pushed by jhofmann@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/e66593529bc3\nAdd more warnings to document.requestStorageAccess(). r=annevk,englehardt,baku\nhttps://hg.mozilla.org/integration/autoland/rev/16212aa46253\nAdd learn more link to storage access API warnings. r=nchevobbe\nhttps://hg.mozilla.org/integration/autoland/rev/75276e64701b\nAdd a test for document.requestStorageAccess error messages. r=nchevobbe", "creation_time": "2020-07-04T15:18:38Z", "text": "Pushed by jhofmann@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/e66593529bc3\nAdd more warnings to document.requestStorageAccess(). r=annevk,englehardt,baku\nhttps://hg.mozilla.org/integration/autoland/rev/16212aa46253\nAdd learn more link to storage access API warnings. r=nchevobbe\nhttps://hg.mozilla.org/integration/autoland/rev/75276e64701b\nAdd a test for document.requestStorageAccess error messages. r=nchevobbe", "time": "2020-07-04T15:18:38Z", "is_private": false}, {"tags": [], "author": "rmaries@mozilla.com", "attachment_id": null, "creation_time": "2020-07-04T15:46:02Z", "text": "Backed out for build bustages and ES Lint failure.\n\nPush with failures: https://treeherder.mozilla.org/#/jobs?repo=autoland&resultStatus=testfailed%2Cbusted%2Cexception&revision=75276e64701bfde7cf2dd1f851adfea6a92d5747\n\nBustage: https://treeherder.mozilla.org/logviewer.html#/jobs?job_id=308576877&repo=autoland&lineNumber=41077\nLint failure: https://treeherder.mozilla.org/logviewer.html#/jobs?job_id=308576852&repo=autoland&lineNumber=503\n\nBackout: https://hg.mozilla.org/integration/autoland/rev/784d6c42a1089cfd485afbb70c106fe8f84619d9", "creator": "rmaries@mozilla.com", "id": 14918019, "bug_id": 1645234, "count": 8, "is_private": false, "time": "2020-07-04T15:46:02Z", "raw_text": "Backed out for build bustages and ES Lint failure.\n\nPush with failures: https://treeherder.mozilla.org/#/jobs?repo=autoland&resultStatus=testfailed%2Cbusted%2Cexception&revision=75276e64701bfde7cf2dd1f851adfea6a92d5747\n\nBustage: https://treeherder.mozilla.org/logviewer.html#/jobs?job_id=308576877&repo=autoland&lineNumber=41077\nLint failure: https://treeherder.mozilla.org/logviewer.html#/jobs?job_id=308576852&repo=autoland&lineNumber=503\n\nBackout: https://hg.mozilla.org/integration/autoland/rev/784d6c42a1089cfd485afbb70c106fe8f84619d9"}, {"attachment_id": null, "author": "se@senglehardt.com", "tags": [], "creation_time": "2020-07-08T20:51:10Z", "text": "Dimi since this was backed out an Johann is now on leave, would you mind to help get this landed?", "bug_id": 1645234, "id": 14926162, "creator": "se@senglehardt.com", "raw_text": "Dimi since this was backed out an Johann is now on leave, would you mind to help get this landed?", "time": "2020-07-08T20:51:10Z", "is_private": false, "count": 9}, {"is_private": false, "raw_text": "(In reply to Steven Englehardt [:englehardt] from comment #9)\n> Dimi since this was backed out an Johann is now on leave, would you mind to help get this landed?\n\nsure", "text": "(In reply to Steven Englehardt [:englehardt] from comment #9)\n> Dimi since this was backed out an Johann is now on leave, would you mind to help get this landed?\n\nsure", "time": "2020-07-09T05:54:18Z", "creation_time": "2020-07-09T05:54:18Z", "count": 10, "id": 14926890, "bug_id": 1645234, "author": "dlee@mozilla.com", "tags": [], "creator": "dlee@mozilla.com", "attachment_id": null}, {"count": 11, "is_private": false, "time": "2020-07-09T09:07:38Z", "raw_text": "Pushed by dlee@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/87d5d468c7f2\nAdd more warnings to document.requestStorageAccess(). r=annevk,englehardt,baku\nhttps://hg.mozilla.org/integration/autoland/rev/6de9007aa306\nAdd learn more link to storage access API warnings. r=nchevobbe\nhttps://hg.mozilla.org/integration/autoland/rev/ad1f8a4d64cf\nAdd a test for document.requestStorageAccess error messages. r=nchevobbe", "creator": "pulsebot@bots.tld", "id": 14927094, "bug_id": 1645234, "text": "Pushed by dlee@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/87d5d468c7f2\nAdd more warnings to document.requestStorageAccess(). r=annevk,englehardt,baku\nhttps://hg.mozilla.org/integration/autoland/rev/6de9007aa306\nAdd learn more link to storage access API warnings. r=nchevobbe\nhttps://hg.mozilla.org/integration/autoland/rev/ad1f8a4d64cf\nAdd a test for document.requestStorageAccess error messages. r=nchevobbe", "creation_time": "2020-07-09T09:07:38Z", "tags": [], "author": "pulsebot@bots.tld", "attachment_id": null}, {"is_private": false, "raw_text": "Backed out for failing dt at browser_webconsole_requestStorageAccess_errors.js\n\nPush with failures: https://treeherder.mozilla.org/#/jobs?repo=autoland&selectedTaskRun=ejBBqTA2TLK2CeXs_esBEA.0&resultStatus=testfailed%2Cbusted%2Cexception&revision=ad1f8a4d64cf1c5716afef3254c05c7a79cc203e\n\nFailure log: https://treeherder.mozilla.org/logviewer.html#/jobs?job_id=309108116&repo=autoland&lineNumber=9501\n\nBackout: https://hg.mozilla.org/integration/autoland/rev/7a8006283ceece2fc4a78e95578182099fa52ce3", "time": "2020-07-09T10:28:12Z", "text": "Backed out for failing dt at browser_webconsole_requestStorageAccess_errors.js\n\nPush with failures: https://treeherder.mozilla.org/#/jobs?repo=autoland&selectedTaskRun=ejBBqTA2TLK2CeXs_esBEA.0&resultStatus=testfailed%2Cbusted%2Cexception&revision=ad1f8a4d64cf1c5716afef3254c05c7a79cc203e\n\nFailure log: https://treeherder.mozilla.org/logviewer.html#/jobs?job_id=309108116&repo=autoland&lineNumber=9501\n\nBackout: https://hg.mozilla.org/integration/autoland/rev/7a8006283ceece2fc4a78e95578182099fa52ce3", "creation_time": "2020-07-09T10:28:12Z", "count": 12, "id": 14927184, "bug_id": 1645234, "author": "apavel@mozilla.com", "tags": [], "creator": "apavel@mozilla.com", "attachment_id": null}, {"text": "Pushed by dlee@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/a90a3c1efdc5\nAdd more warnings to document.requestStorageAccess(). r=annevk,englehardt,baku\nhttps://hg.mozilla.org/integration/autoland/rev/f74844ba692a\nAdd learn more link to storage access API warnings. r=nchevobbe\nhttps://hg.mozilla.org/integration/autoland/rev/6097753dbefa\nAdd a test for document.requestStorageAccess error messages. r=nchevobbe", "time": "2020-07-09T20:38:21Z", "creation_time": "2020-07-09T20:38:21Z", "raw_text": "Pushed by dlee@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/a90a3c1efdc5\nAdd more warnings to document.requestStorageAccess(). r=annevk,englehardt,baku\nhttps://hg.mozilla.org/integration/autoland/rev/f74844ba692a\nAdd learn more link to storage access API warnings. r=nchevobbe\nhttps://hg.mozilla.org/integration/autoland/rev/6097753dbefa\nAdd a test for document.requestStorageAccess error messages. r=nchevobbe", "is_private": false, "count": 13, "bug_id": 1645234, "id": 14928459, "attachment_id": null, "creator": "pulsebot@bots.tld", "tags": [], "author": "pulsebot@bots.tld"}, {"raw_text": "Backed out for causing leaks\n\n*backout:* https://hg.mozilla.org/integration/autoland/rev/b8ab2990c94f62fc6f16c406671231917e346145\n\n*push:* https://treeherder.mozilla.org/#/jobs?repo=autoland&searchStr=windows%2C10%2Cx64%2Cdebug%2Cmochitests%2Ctest-windows10-64%2Fdebug-mochitest-devtools-chrome-e10s-3%2Cm%28dt3%29&revision=6097753dbefa0311b6bd614dea425d441ed93071\n\n*failure log:* https://treeherder.mozilla.org/logviewer.html#/jobs?job_id=309206837&repo=autoland&lineNumber=29838\n\n>[task 2020-07-09T22:43:43.085Z] 22:43:43     INFO - \n[task 2020-07-09T22:43:43.086Z] 22:43:43     INFO - nsTraceRefcnt::DumpStatistics: 1444 entries\n[task 2020-07-09T22:43:43.087Z] 22:43:43     INFO - TEST-INFO | leakcheck | tab leaked 47 DocAccessibleChild\n[task 2020-07-09T22:43:43.087Z] 22:43:43     INFO - TEST-INFO | leakcheck | tab leaked 47 DocAccessibleChildBase\n[task 2020-07-09T22:43:43.087Z] 22:43:43     INFO - TEST-INFO | leakcheck | tab leaked 1 Mutex\n[task 2020-07-09T22:43:43.088Z] 22:43:43     INFO - TEST-INFO | leakcheck | tab leaked 47 PDocAccessibleChild\n[task 2020-07-09T22:43:43.089Z] 22:43:43     INFO - TEST-INFO | leakcheck | tab leaked 47 nsTArray_base\n[task 2020-07-09T22:43:43.089Z] 22:43:43     INFO - TEST-UNEXPECTED-FAIL | leakcheck | tab 7600 bytes leaked (DocAccessibleChild, DocAccessibleChildBase, Mutex, PDocAccessibleChild, nsTArray_base)\n[task 2020-07-09T22:43:43.089Z] 22:43:43     INFO -", "time": "2020-07-09T22:58:12Z", "creation_time": "2020-07-09T22:58:12Z", "text": "Backed out for causing leaks\n\n*backout:* https://hg.mozilla.org/integration/autoland/rev/b8ab2990c94f62fc6f16c406671231917e346145\n\n*push:* https://treeherder.mozilla.org/#/jobs?repo=autoland&searchStr=windows%2C10%2Cx64%2Cdebug%2Cmochitests%2Ctest-windows10-64%2Fdebug-mochitest-devtools-chrome-e10s-3%2Cm%28dt3%29&revision=6097753dbefa0311b6bd614dea425d441ed93071\n\n*failure log:* https://treeherder.mozilla.org/logviewer.html#/jobs?job_id=309206837&repo=autoland&lineNumber=29838\n\n>[task 2020-07-09T22:43:43.085Z] 22:43:43     INFO - \n[task 2020-07-09T22:43:43.086Z] 22:43:43     INFO - nsTraceRefcnt::DumpStatistics: 1444 entries\n[task 2020-07-09T22:43:43.087Z] 22:43:43     INFO - TEST-INFO | leakcheck | tab leaked 47 DocAccessibleChild\n[task 2020-07-09T22:43:43.087Z] 22:43:43     INFO - TEST-INFO | leakcheck | tab leaked 47 DocAccessibleChildBase\n[task 2020-07-09T22:43:43.087Z] 22:43:43     INFO - TEST-INFO | leakcheck | tab leaked 1 Mutex\n[task 2020-07-09T22:43:43.088Z] 22:43:43     INFO - TEST-INFO | leakcheck | tab leaked 47 PDocAccessibleChild\n[task 2020-07-09T22:43:43.089Z] 22:43:43     INFO - TEST-INFO | leakcheck | tab leaked 47 nsTArray_base\n[task 2020-07-09T22:43:43.089Z] 22:43:43     INFO - TEST-UNEXPECTED-FAIL | leakcheck | tab 7600 bytes leaked (DocAccessibleChild, DocAccessibleChildBase, Mutex, PDocAccessibleChild, nsTArray_base)\n[task 2020-07-09T22:43:43.089Z] 22:43:43     INFO -", "is_private": false, "count": 14, "bug_id": 1645234, "id": 14928707, "creator": "ncsoregi@mozilla.com", "attachment_id": null, "author": "ncsoregi@mozilla.com", "tags": []}, {"attachment_id": null, "creator": "dlee@mozilla.com", "tags": [], "author": "dlee@mozilla.com", "bug_id": 1645234, "id": 14936346, "count": 15, "text": "(In reply to Natalia Csoregi [:nataliaCs] from comment #14)\n> Backed out for causing leaks\n> \n\njust an update that I'm still working on fixing this leak issue.", "creation_time": "2020-07-14T12:57:06Z", "time": "2020-07-14T12:57:06Z", "raw_text": "(In reply to Natalia Csoregi [:nataliaCs] from comment #14)\n> Backed out for causing leaks\n> \n\njust an update that I'm still working on fixing this leak issue.", "is_private": false}, {"bug_id": 1645234, "id": 14939312, "attachment_id": null, "creator": "pulsebot@bots.tld", "tags": [], "author": "pulsebot@bots.tld", "creation_time": "2020-07-15T21:17:11Z", "time": "2020-07-15T21:17:11Z", "text": "Pushed by dlee@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/26991249097c\nAdd more warnings to document.requestStorageAccess(). r=annevk,englehardt,baku\nhttps://hg.mozilla.org/integration/autoland/rev/5e37f27f9f9e\nAdd learn more link to storage access API warnings. r=nchevobbe\nhttps://hg.mozilla.org/integration/autoland/rev/39b4605c1178\nAdd a test for document.requestStorageAccess error messages. r=nchevobbe", "raw_text": "Pushed by dlee@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/26991249097c\nAdd more warnings to document.requestStorageAccess(). r=annevk,englehardt,baku\nhttps://hg.mozilla.org/integration/autoland/rev/5e37f27f9f9e\nAdd learn more link to storage access API warnings. r=nchevobbe\nhttps://hg.mozilla.org/integration/autoland/rev/39b4605c1178\nAdd a test for document.requestStorageAccess error messages. r=nchevobbe", "is_private": false, "count": 16}, {"raw_text": "https://hg.mozilla.org/mozilla-central/rev/26991249097c\nhttps://hg.mozilla.org/mozilla-central/rev/5e37f27f9f9e\nhttps://hg.mozilla.org/mozilla-central/rev/39b4605c1178", "text": "https://hg.mozilla.org/mozilla-central/rev/26991249097c\nhttps://hg.mozilla.org/mozilla-central/rev/5e37f27f9f9e\nhttps://hg.mozilla.org/mozilla-central/rev/39b4605c1178", "time": "2020-07-16T03:33:08Z", "creation_time": "2020-07-16T03:33:08Z", "is_private": false, "count": 17, "bug_id": 1645234, "id": 14939703, "creator": "btara@mozilla.com", "attachment_id": null, "author": "btara@mozilla.com", "tags": ["bugherder"]}]}}, "comments": {}}