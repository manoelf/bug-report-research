{"comments": {}, "bugs": {"657859": {"comments": [{"attachment_id": null, "tags": [], "creation_time": "2011-05-18T03:48:01Z", "bug_id": 657859, "author": "romaxa@gmail.com", "is_private": false, "id": 5476386, "creator": "romaxa@gmail.com", "raw_text": "I was investigating callgraph for fennec scrolling (simple page) and found that we do ThebesLayer update for each scroll event, and that taking certain part of CPU.\n\nSet breakpoint in nsDisplayBorder::Paint, and will see that it is called for each scroll/pan event on Chrome process side.\n\nThis should not happen, we should just composite ready layers.", "text": "I was investigating callgraph for fennec scrolling (simple page) and found that we do ThebesLayer update for each scroll event, and that taking certain part of CPU.\n\nSet breakpoint in nsDisplayBorder::Paint, and will see that it is called for each scroll/pan event on Chrome process side.\n\nThis should not happen, we should just composite ready layers.", "count": 0, "time": "2011-05-18T03:48:01Z"}, {"raw_text": "I have disabled that rendering part, and did not found any visible regression, so it seems we are repainting something which is not important for fennec scrolling, will try to find what exactly causing that.", "creator": "romaxa@gmail.com", "text": "I have disabled that rendering part, and did not found any visible regression, so it seems we are repainting something which is not important for fennec scrolling, will try to find what exactly causing that.", "time": "2011-05-18T03:49:42Z", "count": 1, "creation_time": "2011-05-18T03:49:42Z", "tags": [], "attachment_id": null, "bug_id": 657859, "author": "romaxa@gmail.com", "is_private": false, "id": 5476389}, {"id": 5476397, "is_private": false, "count": 2, "author": "romaxa@gmail.com", "time": "2011-05-18T03:53:41Z", "bug_id": 657859, "text": "Created attachment 533162\nBacktrace of border paint where it should not happen", "attachment_id": 533162, "creation_time": "2011-05-18T03:53:41Z", "tags": [], "creator": "romaxa@gmail.com", "raw_text": ""}, {"author": "romaxa@gmail.com", "is_private": false, "id": 5476420, "tags": [], "creation_time": "2011-05-18T04:10:30Z", "attachment_id": 533171, "bug_id": 657859, "time": "2011-05-18T04:10:30Z", "count": 3, "raw_text": "", "creator": "romaxa@gmail.com", "text": "Created attachment 533171\nLayers log and layer marked as all the time repainted"}, {"count": 4, "time": "2011-05-18T04:11:32Z", "text": "BasicThebesLayer (0xadc23f80) [visible=< (x=773, y=0, w=6, h=30); >] [isFixedPosition] [valid=< (x=773, y=0, w=6, h=30); >] - this is layer which is repainted all the time....", "creator": "romaxa@gmail.com", "raw_text": "BasicThebesLayer (0xadc23f80) [visible=< (x=773, y=0, w=6, h=30); >] [isFixedPosition] [valid=< (x=773, y=0, w=6, h=30); >] - this is layer which is repainted all the time....", "id": 5476422, "author": "romaxa@gmail.com", "is_private": false, "bug_id": 657859, "attachment_id": null, "creation_time": "2011-05-18T04:11:32Z", "tags": []}, {"time": "2011-05-18T04:20:30Z", "count": 5, "text": "BasicThebesLayer (0xadc5bf80) [transform=[ 1 0; 0 1; 0 -80; ]] [visible=< (x=957, y=80, w=6, h=16); >] [isFixedPosition] [valid=< (x=957, y=80, w=6, h=16); >]\n\nanother version of similar dump, need to figure out which layer is 6 pixels width, and what is creating that shadowable layer...", "raw_text": "BasicThebesLayer (0xadc5bf80) [transform=[ 1 0; 0 1; 0 -80; ]] [visible=< (x=957, y=80, w=6, h=16); >] [isFixedPosition] [valid=< (x=957, y=80, w=6, h=16); >]\n\nanother version of similar dump, need to figure out which layer is 6 pixels width, and what is creating that shadowable layer...", "creator": "romaxa@gmail.com", "id": 5476440, "is_private": false, "author": "romaxa@gmail.com", "bug_id": 657859, "creation_time": "2011-05-18T04:20:30Z", "tags": [], "attachment_id": null}, {"creator": "romaxa@gmail.com", "raw_text": "Ok, thebes layer repainting started from here \nhttp://mxr.mozilla.org/mozilla-central/source/gfx/layers/opengl/ThebesLayerOGL.cpp#828\nThebesLayerOGL::RenderLayer\n\nand that is all the time repainting scroll indicators...\nfrom that function we supposed to call thebesRender callback no matter what....", "text": "Ok, thebes layer repainting started from here \nhttp://mxr.mozilla.org/mozilla-central/source/gfx/layers/opengl/ThebesLayerOGL.cpp#828\nThebesLayerOGL::RenderLayer\n\nand that is all the time repainting scroll indicators...\nfrom that function we supposed to call thebesRender callback no matter what....", "count": 6, "time": "2011-05-18T17:20:59Z", "attachment_id": null, "tags": [], "creation_time": "2011-05-18T17:20:59Z", "bug_id": 657859, "is_private": false, "author": "romaxa@gmail.com", "id": 5477499}, {"bug_id": 657859, "text": "Printing of region values giving this:\nstate.mRegionToDraw: reg[472,0,6,191]:\nstate.mRegionToInvalidate: reg[0,0,0,0]:\n\nshould not we just avoid callback rendering if state.mRegionToInvalidate is empty?", "creation_time": "2011-05-18T17:30:06Z", "tags": [], "attachment_id": null, "raw_text": "Printing of region values giving this:\nstate.mRegionToDraw: reg[472,0,6,191]:\nstate.mRegionToInvalidate: reg[0,0,0,0]:\n\nshould not we just avoid callback rendering if state.mRegionToInvalidate is empty?", "creator": "romaxa@gmail.com", "id": 5477530, "is_private": false, "author": "romaxa@gmail.com", "time": "2011-05-18T17:30:06Z", "count": 7}, {"bug_id": 657859, "creation_time": "2011-05-18T17:31:31Z", "tags": [], "attachment_id": null, "id": 5477538, "is_private": false, "author": "ben@stechz.com", "text": "I wouldn't be surprised if the scroll indicator repaints even though it's in its own layer. Right now, using moz-transform will cause an unnecessary reflow for the scroll indicator (see bug 524925).", "raw_text": "I wouldn't be surprised if the scroll indicator repaints even though it's in its own layer. Right now, using moz-transform will cause an unnecessary reflow for the scroll indicator (see bug 524925).", "creator": "ben@stechz.com", "time": "2011-05-18T17:31:31Z", "count": 8}, {"creation_time": "2011-05-18T17:33:04Z", "tags": [], "attachment_id": null, "bug_id": 657859, "author": "ben@stechz.com", "is_private": false, "id": 5477544, "raw_text": "Disregard above statement if region to invalidate is empty.\n\nIf it's empty why is it taking so long to complete? It shouldn't be painting anything right?", "creator": "ben@stechz.com", "text": "Disregard above statement if region to invalidate is empty.\n\nIf it's empty why is it taking so long to complete? It shouldn't be painting anything right?", "time": "2011-05-18T17:33:04Z", "count": 9}, {"attachment_id": null, "tags": [], "creation_time": "2011-05-18T17:50:36Z", "creator": "romaxa@gmail.com", "raw_text": "oh, no, region to draw is that what is defining area which is need to be repainted...", "bug_id": 657859, "text": "oh, no, region to draw is that what is defining area which is need to be repainted...", "is_private": false, "count": 10, "time": "2011-05-18T17:50:36Z", "author": "romaxa@gmail.com", "id": 5477611}]}}}