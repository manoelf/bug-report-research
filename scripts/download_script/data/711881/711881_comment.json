{"comments": {}, "bugs": {"711881": {"comments": [{"raw_text": "XHR.send calls Available on the postdata stream, and if the page does xhr.send(file) that results in statting the file on the main thread.", "attachment_id": null, "id": 5925720, "creator": "khuey@kylehuey.com", "is_private": false, "time": "2011-12-18T22:59:27Z", "tags": [], "text": "XHR.send calls Available on the postdata stream, and if the page does xhr.send(file) that results in statting the file on the main thread.", "author": "khuey@kylehuey.com", "creation_time": "2011-12-18T22:59:27Z", "count": 0, "bug_id": 711881}, {"attachment_id": null, "raw_text": "I think the solution is to have XHR get the size from the File object, and then handle the sync i/o problems in the DOM file code.", "id": 5925737, "creator": "khuey@kylehuey.com", "is_private": false, "count": 1, "author": "khuey@kylehuey.com", "creation_time": "2011-12-18T23:18:52Z", "bug_id": 711881, "time": "2011-12-18T23:18:52Z", "tags": [], "text": "I think the solution is to have XHR get the size from the File object, and then handle the sync i/o problems in the DOM file code."}, {"author": "froydnj+bz@gmail.com", "creation_time": "2013-03-06T15:51:23Z", "time": "2013-03-06T15:51:23Z", "bug_id": 711881, "tags": [], "text": "Is this for the nsIInputStream case here:\n\nhttp://mxr.mozilla.org/mozilla-central/source/content/base/src/nsXMLHttpRequest.cpp#2500\n\n?  I don't see where you're suggesting to get the file object from.  It looks like the stream is always opened before providing it to send().", "creator": "froydnj+bz@gmail.com", "is_private": false, "count": 2, "id": 7173768, "attachment_id": null, "raw_text": "Is this for the nsIInputStream case here:\n\nhttp://mxr.mozilla.org/mozilla-central/source/content/base/src/nsXMLHttpRequest.cpp#2500\n\n?  I don't see where you're suggesting to get the file object from.  It looks like the stream is always opened before providing it to send()."}, {"id": 7175706, "attachment_id": null, "raw_text": "I don't know if this bug is still relevant.  This code has changed a lot in the last 15 months.", "author": "khuey@kylehuey.com", "creation_time": "2013-03-06T22:40:18Z", "time": "2013-03-06T22:40:18Z", "bug_id": 711881, "tags": [], "text": "I don't know if this bug is still relevant.  This code has changed a lot in the last 15 months.", "creator": "khuey@kylehuey.com", "is_private": false, "count": 3}, {"creation_time": "2013-03-06T22:43:48Z", "author": "josh@joshmatthews.net", "text": "GetResponseBody for an nsIInputStream still calls Available on the main thread.", "tags": [], "bug_id": 711881, "time": "2013-03-06T22:43:48Z", "is_private": false, "creator": "josh@joshmatthews.net", "count": 4, "id": 7175721, "attachment_id": null, "raw_text": "GetResponseBody for an nsIInputStream still calls Available on the main thread."}, {"creation_time": "2017-09-23T04:36:15Z", "author": "wisniewskit@gmail.com", "text": "Is this still relevant? I see no reference to Available() in dom/xhr anymore, and dom/fetch seems to only call Available() in FetchStream::OnInputStreamReady.", "bug_id": 711881, "time": "2017-09-23T04:36:15Z", "tags": [], "is_private": false, "creator": "wisniewskit@gmail.com", "count": 5, "id": 12695285, "attachment_id": null, "raw_text": "Is this still relevant? I see no reference to Available() in dom/xhr anymore, and dom/fetch seems to only call Available() in FetchStream::OnInputStreamReady."}, {"count": 6, "creator": "josh@joshmatthews.net", "is_private": false, "tags": [], "bug_id": 711881, "time": "2017-09-25T13:56:40Z", "text": "There's a call to Available in https://dxr.mozilla.org/mozilla-central/source/netwerk/protocol/http/HttpBaseChannel.cpp#1017 which is invoked from InitiateFech (https://dxr.mozilla.org/mozilla-central/rev/7e962631ba4298bcefa571008661983d77c3e652/dom/xhr/XMLHttpRequestMainThread.cpp#2631). It's not clear to me whether that actually invokes the kind of behaviour that we are concerned about, though.", "author": "josh@joshmatthews.net", "creation_time": "2017-09-25T13:56:40Z", "raw_text": "There's a call to Available in https://dxr.mozilla.org/mozilla-central/source/netwerk/protocol/http/HttpBaseChannel.cpp#1017 which is invoked from InitiateFech (https://dxr.mozilla.org/mozilla-central/rev/7e962631ba4298bcefa571008661983d77c3e652/dom/xhr/XMLHttpRequestMainThread.cpp#2631). It's not clear to me whether that actually invokes the kind of behaviour that we are concerned about, though.", "attachment_id": null, "id": 12699233}]}}}