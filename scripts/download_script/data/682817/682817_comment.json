{"bugs": {"682817": {"comments": [{"attachment_id": 556518, "raw_text": "User Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.18) Gecko/20110614 Firefox/3.6.18\nBuild ID: 20110614230723\n\nSteps to reproduce:\n\nUpgraded to Firefox 4 on Windows and tried to watch my IP cam. I just tried it again on Ubuntu 10 with Firefox 6.0.\n\n\nActual results:\n\nOn Windows, Firefox was consuming an increasing amount of memory till it crashed. On Ubuntu it caused Firefox and Xorg to use a lot of cpu and memory. I stopped it before a crash happened but I think it was swapping to disk already.\n\n\nExpected results:\n\nIt should just display the changing image like it does with Firefox 3.6.\nThe cam is SKU 15974 from dealextreme.", "tags": [], "bug_id": 682817, "text": "Created attachment 556518\nviwx.html + image.jpg = javascript image loading used by my IP cam\n\nUser Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.18) Gecko/20110614 Firefox/3.6.18\nBuild ID: 20110614230723\n\nSteps to reproduce:\n\nUpgraded to Firefox 4 on Windows and tried to watch my IP cam. I just tried it again on Ubuntu 10 with Firefox 6.0.\n\n\nActual results:\n\nOn Windows, Firefox was consuming an increasing amount of memory till it crashed. On Ubuntu it caused Firefox and Xorg to use a lot of cpu and memory. I stopped it before a crash happened but I think it was swapping to disk already.\n\n\nExpected results:\n\nIt should just display the changing image like it does with Firefox 3.6.\nThe cam is SKU 15974 from dealextreme.", "is_private": false, "id": 5684516, "count": 0, "creator": "theran.sylt.h@gmail.com", "creation_time": "2011-08-29T11:37:07Z", "time": "2011-08-29T11:37:07Z", "author": "theran.sylt.h@gmail.com"}, {"bug_id": 682817, "text": "Duh. I found the problem. It is the noscript plugin.\nI started safe-mode and did not see increasing memory usage anymore. I enabled my extensions one-by-one and got my problems back as soon as I enabled noscript :(\nThis is the tested the same with Firefox 4.0.1 on Windows XP and Firefox 6 on Ubuntu.", "tags": [], "author": "theran.sylt.h@gmail.com", "creation_time": "2011-08-29T14:40:44Z", "time": "2011-08-29T14:40:44Z", "creator": "theran.sylt.h@gmail.com", "raw_text": "Duh. I found the problem. It is the noscript plugin.\nI started safe-mode and did not see increasing memory usage anymore. I enabled my extensions one-by-one and got my problems back as soon as I enabled noscript :(\nThis is the tested the same with Firefox 4.0.1 on Windows XP and Firefox 6 on Ubuntu.", "id": 5684853, "count": 1, "is_private": false, "attachment_id": null}, {"attachment_id": null, "raw_text": "I cannot reproduce using your file (Fx 6 + NoScript 2.1.2.8rc1 from http://noscript.net/getit#devel ).\nMaybe an extensions *conflict*? \nDid you actually try on a clean profile with just NoScript installed?\nWhich rate does the RAM eating happens at?", "tags": [], "bug_id": 682817, "text": "I cannot reproduce using your file (Fx 6 + NoScript 2.1.2.8rc1 from http://noscript.net/getit#devel ).\nMaybe an extensions *conflict*? \nDid you actually try on a clean profile with just NoScript installed?\nWhich rate does the RAM eating happens at?", "id": 5685590, "count": 2, "is_private": false, "time": "2011-08-29T18:41:32Z", "creation_time": "2011-08-29T18:41:32Z", "creator": "g.maone@informaction.com", "author": "g.maone@informaction.com"}, {"is_private": false, "count": 3, "id": 5685985, "creator": "theran.sylt.h@gmail.com", "creation_time": "2011-08-29T20:49:26Z", "time": "2011-08-29T20:49:26Z", "author": "theran.sylt.h@gmail.com", "attachment_id": null, "raw_text": "I have a VirtualBox image with XP with 384MB and Firefox 3.6.18. I made a new snapshot and did an upgrade to 6.0. Installed NoScript 2.1.2.8rc1 and restarted Firefox. NoScript is the only extension enabled. Java Console and Java Quickstart are disabled and no other add-ons installed at all on this image.\n\nI double click on viwx.html and select NoScript 'allow file://' to start showing the image.\nI have Process Explorer from sysinternals.com running showing the Virtual Size of each process. Before allowing the script to run Firefox uses about 120-160MB.\nMost of the time it starts eating >10MB per second right away. As soon as I close the tab the memory usage goes back to 170MB.\n\nSometimes it stays at 130MB and I need to open a few other pages first before the memory eating kicks in. And sometimes the memory usage is jumping up and down instead of only going up. I guess it depends on how fast your system is. The Ubuntu system I tried is an old D600 with 512MB and there I did see Xorg growing quite a bit (xterm with top running).\n\nIt kind of feels like a garbage collector that can not keep up with the allocation of new memory.", "tags": [], "bug_id": 682817, "text": "I have a VirtualBox image with XP with 384MB and Firefox 3.6.18. I made a new snapshot and did an upgrade to 6.0. Installed NoScript 2.1.2.8rc1 and restarted Firefox. NoScript is the only extension enabled. Java Console and Java Quickstart are disabled and no other add-ons installed at all on this image.\n\nI double click on viwx.html and select NoScript 'allow file://' to start showing the image.\nI have Process Explorer from sysinternals.com running showing the Virtual Size of each process. Before allowing the script to run Firefox uses about 120-160MB.\nMost of the time it starts eating >10MB per second right away. As soon as I close the tab the memory usage goes back to 170MB.\n\nSometimes it stays at 130MB and I need to open a few other pages first before the memory eating kicks in. And sometimes the memory usage is jumping up and down instead of only going up. I guess it depends on how fast your system is. The Ubuntu system I tried is an old D600 with 512MB and there I did see Xorg growing quite a bit (xterm with top running).\n\nIt kind of feels like a garbage collector that can not keep up with the allocation of new memory."}, {"text": "Managed to reproduce on a clean profile after registering a dummy web progress listener on the document loading service.\n\nIt seems a Gecko bug causing useless images to be retained longer than usual, and possibly leading to out of memory errors if many images are loaded in rapid sequence by JavaScript. Notice that this work also with inline HTML images, and there's no need to create multiple JavaScript Image objects or even use JavaScript Image objects at all, so it doesn't seem a JavaScript garbage collection issue after all, but rather a memory image caching one.\n\nAbout to attach a contrived test case.", "bug_id": 682817, "tags": [], "attachment_id": null, "raw_text": "Managed to reproduce on a clean profile after registering a dummy web progress listener on the document loading service.\n\nIt seems a Gecko bug causing useless images to be retained longer than usual, and possibly leading to out of memory errors if many images are loaded in rapid sequence by JavaScript. Notice that this work also with inline HTML images, and there's no need to create multiple JavaScript Image objects or even use JavaScript Image objects at all, so it doesn't seem a JavaScript garbage collection issue after all, but rather a memory image caching one.\n\nAbout to attach a contrived test case.", "creator": "g.maone@informaction.com", "time": "2011-08-30T00:17:17Z", "creation_time": "2011-08-30T00:17:17Z", "author": "g.maone@informaction.com", "is_private": false, "count": 4, "id": 5686615}, {"creator": "g.maone@informaction.com", "creation_time": "2011-08-30T00:22:18Z", "time": "2011-08-30T00:22:18Z", "author": "g.maone@informaction.com", "is_private": false, "count": 5, "id": 5686630, "bug_id": 682817, "text": "Created attachment 556720\nReduced test case", "tags": [], "attachment_id": 556720, "raw_text": ""}]}}, "comments": {}}