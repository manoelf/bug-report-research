{"comments": {}, "bugs": {"642086": {"comments": [{"creation_time": "2011-03-16T09:02:45Z", "text": "Created attachment 519604\nAddons for testing\n\nI am trying to do something when extension first run, here is the code:\n\n\t window.addEventListener('load', function(e) {\n\t \t if (Application.getExtensions) {\n\t\t\t // Application.extensions is obsolete in Gecko 2.0\n\t\t \tApplication.getExtensions(function(exts) {\n\t \t\t\talert('addon1 firstRun: ' + exts.get(\"testaddon1@mozillaonline.com\").firstRun);\n\t \t\t});\n\t\t }\n\t }, false);\n\nIt works only if other extensions didn't do this.\nIf other addon use 'Application.getExtensions' function, 'false' will be alerted after installing.\n\nAttachment is two addons that doing the same thing, after installing, one alert 'true', but the other alert 'false';", "id": 5347767, "raw_text": "I am trying to do something when extension first run, here is the code:\n\n\t window.addEventListener('load', function(e) {\n\t \t if (Application.getExtensions) {\n\t\t\t // Application.extensions is obsolete in Gecko 2.0\n\t\t \tApplication.getExtensions(function(exts) {\n\t \t\t\talert('addon1 firstRun: ' + exts.get(\"testaddon1@mozillaonline.com\").firstRun);\n\t \t\t});\n\t\t }\n\t }, false);\n\nIt works only if other extensions didn't do this.\nIf other addon use 'Application.getExtensions' function, 'false' will be alerted after installing.\n\nAttachment is two addons that doing the same thing, after installing, one alert 'true', but the other alert 'false';", "tags": [], "count": 0, "creator": "zhangpin04@gmail.com", "bug_id": 642086, "author": "zhangpin04@gmail.com", "is_private": false, "time": "2011-03-16T09:02:45Z", "attachment_id": 519604}, {"author": "u278084@disabled.tld", "attachment_id": null, "raw_text": "Reading the FUEL code, it looks to be checking for a preference. If the preference does not exist, it creates the pref and sets firstRun to true. When FUEL was sync, this wasn't a problem as this check was only done once for the lifetime of application. Now that it's async, this check is done n times.\n\nI'm not sure of the best way to fix this or whether we should drop firstRun entirely. It is a fairly useful attribute though.", "id": 5824718, "text": "Reading the FUEL code, it looks to be checking for a preference. If the preference does not exist, it creates the pref and sets firstRun to true. When FUEL was sync, this wasn't a problem as this check was only done once for the lifetime of application. Now that it's async, this check is done n times.\n\nI'm not sure of the best way to fix this or whether we should drop firstRun entirely. It is a fairly useful attribute though.", "is_private": false, "creation_time": "2011-11-03T20:53:37Z", "bug_id": 642086, "tags": [], "count": 1, "time": "2011-11-03T20:53:37Z", "creator": "u278084@disabled.tld"}]}}}