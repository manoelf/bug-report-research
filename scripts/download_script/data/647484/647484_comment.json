{"bugs": {"647484": {"comments": [{"time": "2011-04-02T22:43:22Z", "is_private": false, "tags": [], "raw_text": "User-Agent:       Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:2.0) Gecko/20100101 Firefox/4.0\nBuild Identifier: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:2.0) Gecko/20100101 Firefox/4.0\n\nThis snippet:\n\n\"use strict\";\n\nvar obj = {};\n\nObject.defineProperty(obj, \"a\", {\nwritable : false,\nset : function () {},\nget: function () {return 3}\n});\n\nconsole.log(obj.a);\n\ncreates this error:\n\nTypeError: property descriptors must not specify a value or be writable when a getter or setter has been specified\n\nWell, writable is set to false, means it is *not* writable. If one ommits the writable property, it is working fine. Nevertheless, the error should only be shown when the writable is explicitely set to true.\n\nReproducible: Always", "bug_id": 647484, "count": 0, "id": 5388682, "attachment_id": null, "creator": "mozilla@gos.si", "text": "User-Agent:       Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:2.0) Gecko/20100101 Firefox/4.0\nBuild Identifier: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:2.0) Gecko/20100101 Firefox/4.0\n\nThis snippet:\n\n\"use strict\";\n\nvar obj = {};\n\nObject.defineProperty(obj, \"a\", {\nwritable : false,\nset : function () {},\nget: function () {return 3}\n});\n\nconsole.log(obj.a);\n\ncreates this error:\n\nTypeError: property descriptors must not specify a value or be writable when a getter or setter has been specified\n\nWell, writable is set to false, means it is *not* writable. If one ommits the writable property, it is working fine. Nevertheless, the error should only be shown when the writable is explicitely set to true.\n\nReproducible: Always", "author": "mozilla@gos.si", "creation_time": "2011-04-02T22:43:22Z"}, {"id": 5388847, "attachment_id": null, "creator": "bzbarsky@mit.edu", "text": "I believe the relevant spec here is ECMA-262 edition 5 section 8.10.5, which defines \"ToPropertyDescriptor ( Obj )\".\n\nStep 9 there says:\n\n9. If either desc.[[Get]] or desc.[[Set]] are present, then \n  a.  If either desc.[[Value]] or desc.[[Writable]] are present, then throw a\n      TypeError exception.\n\nNote that it says to throw if those fields of the descriptor are _present_, no matter what value they're set to.\n\nOr put another way, it doesn't make any sense to set \"writable\" to either false or true if you have a getter or setter, since either value will be ignored.\n\nSo I believe this is invalid.  I do think the error message should be changed to say \"property descriptors must not specify a value or set writable when ....\"", "author": "bzbarsky@mit.edu", "creation_time": "2011-04-03T03:57:14Z", "time": "2011-04-03T03:57:14Z", "is_private": false, "tags": [], "raw_text": "I believe the relevant spec here is ECMA-262 edition 5 section 8.10.5, which defines \"ToPropertyDescriptor ( Obj )\".\n\nStep 9 there says:\n\n9. If either desc.[[Get]] or desc.[[Set]] are present, then \n  a.  If either desc.[[Value]] or desc.[[Writable]] are present, then throw a\n      TypeError exception.\n\nNote that it says to throw if those fields of the descriptor are _present_, no matter what value they're set to.\n\nOr put another way, it doesn't make any sense to set \"writable\" to either false or true if you have a getter or setter, since either value will be ignored.\n\nSo I believe this is invalid.  I do think the error message should be changed to say \"property descriptors must not specify a value or set writable when ....\"", "bug_id": 647484, "count": 1}, {"time": "2011-04-03T04:33:32Z", "is_private": false, "tags": [], "raw_text": "Morphing to keep this useful and fix the diagnostic.\n\n/be", "bug_id": 647484, "count": 2, "id": 5388862, "attachment_id": null, "text": "Morphing to keep this useful and fix the diagnostic.\n\n/be", "creator": "brendan@mozilla.org", "author": "brendan@mozilla.org", "creation_time": "2011-04-03T04:33:32Z"}]}}, "comments": {}}