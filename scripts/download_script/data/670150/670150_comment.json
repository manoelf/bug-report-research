{"bugs": {"670150": {"comments": [{"id": 5580922, "count": 0, "is_private": false, "author": "eyalroz1@gmx.com", "time": "2011-07-08T14:44:57Z", "creation_time": "2011-07-08T14:44:57Z", "creator": "eyalroz1@gmx.com", "raw_text": "I'm the author of BiDi Mail UI:\nhttps://addons.mozilla.org/en-US/thunderbird/addon/310/\n\nwith Thunderbird 5, two users have reported, that enabling my extension (even on a clean profile, and even with practically all of its functionality disabled) the status bar loses most of its contents:\nhttps://www.mozdev.org/bugs/show_bug.cgi?id=24167\n\nNow, I have no idea why this is happening, as my extension does not touch the status bar at all.", "attachment_id": null, "text": "I'm the author of BiDi Mail UI:\nhttps://addons.mozilla.org/en-US/thunderbird/addon/310/\n\nwith Thunderbird 5, two users have reported, that enabling my extension (even on a clean profile, and even with practically all of its functionality disabled) the status bar loses most of its contents:\nhttps://www.mozdev.org/bugs/show_bug.cgi?id=24167\n\nNow, I have no idea why this is happening, as my extension does not touch the status bar at all.", "bug_id": 670150, "tags": []}, {"is_private": false, "count": 1, "id": 5580943, "creator": "ludovic@hirlimann.net", "creation_time": "2011-07-08T14:51:59Z", "time": "2011-07-08T14:51:59Z", "author": "ludovic@hirlimann.net", "attachment_id": null, "raw_text": "Anything in the error console ?", "text": "Anything in the error console ?", "bug_id": 670150, "tags": []}, {"tags": [], "bug_id": 670150, "text": "Nope, nothing. Specifically:\nhttps://www.mozdev.org/bugs/attachment.cgi?id=6967", "attachment_id": null, "raw_text": "Nope, nothing. Specifically:\nhttps://www.mozdev.org/bugs/attachment.cgi?id=6967", "time": "2011-07-08T15:35:22Z", "creation_time": "2011-07-08T15:35:22Z", "creator": "eyalroz1@gmx.com", "author": "eyalroz1@gmx.com", "id": 5581022, "count": 2, "is_private": false}, {"text": "A couple of users reported that installing a different theme, specifically, 'Simple Green', makes this problem go away.", "bug_id": 670150, "tags": [], "raw_text": "A couple of users reported that installing a different theme, specifically, 'Simple Green', makes this problem go away.", "attachment_id": null, "author": "eyalroz1@gmx.com", "time": "2011-07-13T11:45:55Z", "creation_time": "2011-07-13T11:45:55Z", "creator": "eyalroz1@gmx.com", "count": 3, "id": 5588713, "is_private": false}, {"is_private": false, "id": 5588718, "count": 4, "creator": "ludovic@hirlimann.net", "time": "2011-07-13T11:55:53Z", "creation_time": "2011-07-13T11:55:53Z", "author": "ludovic@hirlimann.net", "attachment_id": null, "raw_text": "Andreas can you have a quick look ?", "tags": [], "bug_id": 670150, "text": "Andreas can you have a quick look ?"}, {"is_private": false, "id": 5590722, "count": 5, "author": "standard8@mozilla.com", "creator": "standard8@mozilla.com", "time": "2011-07-14T04:49:00Z", "creation_time": "2011-07-14T04:49:00Z", "raw_text": "We've seen a few things like this, normally we find that it is due to something touching the DOM before it has completely loaded. In this case I suspect the fact that you're calling installComposeWindowEventHandlers() which does getElementById before the window has fully loaded could be the problem.\n\nTry moving those function calls into an onload handler.", "attachment_id": null, "tags": [], "bug_id": 670150, "text": "We've seen a few things like this, normally we find that it is due to something touching the DOM before it has completely loaded. In this case I suspect the fact that you're calling installComposeWindowEventHandlers() which does getElementById before the window has fully loaded could be the problem.\n\nTry moving those function calls into an onload handler."}, {"id": 5590909, "count": 6, "is_private": false, "author": "neil@httl.net", "creation_time": "2011-07-14T08:40:49Z", "time": "2011-07-14T08:40:49Z", "creator": "neil@httl.net", "raw_text": "I wrote up an explanation of that problem in a news post somewhere. Basically, touching the DOM in inline script is really bad because it causes frames to be constructed before overlays have finished loading, and the recently added support for Personas simply makes the problem more visible.", "attachment_id": null, "text": "I wrote up an explanation of that problem in a news post somewhere. Basically, touching the DOM in inline script is really bad because it causes frames to be constructed before overlays have finished loading, and the recently added support for Personas simply makes the problem more visible.", "bug_id": 670150, "tags": []}, {"raw_text": "So, I need to do something like:\n\nwindow.addEventListener('load', BiDiMailUI.MessageOverlay, true);\n\ninline, and have that add the event listeners to the message pane?\n\nAlso: This behavior seems somewhat inconsistent. If I manage to get the element by ID and install the handlers, it means things are \"ready\" for me to do so. If this is not the case, should I not fail? Or, alternatively, should not other code account for the possibility of this having been done?", "attachment_id": null, "bug_id": 670150, "text": "So, I need to do something like:\n\nwindow.addEventListener('load', BiDiMailUI.MessageOverlay, true);\n\ninline, and have that add the event listeners to the message pane?\n\nAlso: This behavior seems somewhat inconsistent. If I manage to get the element by ID and install the handlers, it means things are \"ready\" for me to do so. If this is not the case, should I not fail? Or, alternatively, should not other code account for the possibility of this having been done?", "tags": [], "is_private": false, "count": 7, "id": 5590981, "author": "eyalroz1@gmx.com", "creator": "eyalroz1@gmx.com", "time": "2011-07-14T09:56:32Z", "creation_time": "2011-07-14T09:56:32Z"}, {"tags": [], "text": "(In reply to comment #7)\n> Also: This behavior seems somewhat inconsistent. If I manage to get the\n> element by ID and install the handlers, it means things are \"ready\" for me\n> to do so. If this is not the case, should I not fail? Or, alternatively,\n> should not other code account for the possibility of this having been done?\nThere are two ways we could make XUL overlays work:\n1. Lay out the document each time an overlay loads.\n2. Lay out the document once when all overlays have loaded.\nOption 2 is obviously much faster and avoids strange effects from partly loaded documents, but you have to be careful not to touch the DOM from script. (Partly loaded HTML documents on the other hand are expected and there are other tricks used to speed them up, such as avoiding painting until the first screen loads.)", "bug_id": 670150, "attachment_id": null, "raw_text": "(In reply to comment #7)\n> Also: This behavior seems somewhat inconsistent. If I manage to get the\n> element by ID and install the handlers, it means things are \"ready\" for me\n> to do so. If this is not the case, should I not fail? Or, alternatively,\n> should not other code account for the possibility of this having been done?\nThere are two ways we could make XUL overlays work:\n1. Lay out the document each time an overlay loads.\n2. Lay out the document once when all overlays have loaded.\nOption 2 is obviously much faster and avoids strange effects from partly loaded documents, but you have to be careful not to touch the DOM from script. (Partly loaded HTML documents on the other hand are expected and there are other tricks used to speed them up, such as avoiding painting until the first screen loads.)", "creator": "neil@httl.net", "creation_time": "2011-07-14T10:13:13Z", "time": "2011-07-14T10:13:13Z", "author": "neil@httl.net", "is_private": false, "count": 8, "id": 5590994}, {"author": "eyalroz1@gmx.com", "time": "2011-07-14T19:15:37Z", "creation_time": "2011-07-14T19:15:37Z", "creator": "eyalroz1@gmx.com", "id": 5591900, "count": 9, "is_private": false, "tags": [], "bug_id": 670150, "text": "Well, this sounds perfectly reasonable, except for the \"you have to be careful\" part. If I'm not supposed to touch that, don't let me. Make the getElementById fail, or prevent the laying out, or do the layout and become slower due to my negligence - but things can't go bust for doing something that's semantically valid. That's the way I see it anyway.", "raw_text": "Well, this sounds perfectly reasonable, except for the \"you have to be careful\" part. If I'm not supposed to touch that, don't let me. Make the getElementById fail, or prevent the laying out, or do the layout and become slower due to my negligence - but things can't go bust for doing something that's semantically valid. That's the way I see it anyway.", "attachment_id": null}, {"id": 5594709, "count": 10, "is_private": false, "author": "cbm128@gmail.com", "creation_time": "2011-07-16T07:22:11Z", "time": "2011-07-16T07:22:11Z", "creator": "cbm128@gmail.com", "raw_text": "I have 3 profiles in my Thunderbird. In two of them \"Bidi Mail UI\" is installed. In both profiles, disabling the add-on solves the problem. For the workaround involving the \"Simple Green\" theme to work I have to do the following:\nI have to close TB5.0 from the \"file\" menu (not from the window's title-bar) and avoid the \"Thunderbird- Choose User Profile\" window by launching the profile I want by:\n\"C:\\Program Files\\Mozilla Thunderbird\\thunderbird.exe\" -p \"ProfileName\"\n\nOS: WinXP SP3", "attachment_id": null, "tags": [], "bug_id": 670150, "text": "I have 3 profiles in my Thunderbird. In two of them \"Bidi Mail UI\" is installed. In both profiles, disabling the add-on solves the problem. For the workaround involving the \"Simple Green\" theme to work I have to do the following:\nI have to close TB5.0 from the \"file\" menu (not from the window's title-bar) and avoid the \"Thunderbird- Choose User Profile\" window by launching the profile I want by:\n\"C:\\Program Files\\Mozilla Thunderbird\\thunderbird.exe\" -p \"ProfileName\"\n\nOS: WinXP SP3"}, {"creator": "acelists@atlas.sk", "time": "2018-10-29T13:59:54Z", "creation_time": "2018-10-29T13:59:54Z", "author": "acelists@atlas.sk", "is_private": false, "count": 11, "id": 13719252, "tags": [], "bug_id": 670150, "text": "So did the change in comment 7 work?", "attachment_id": null, "raw_text": "So did the change in comment 7 work?"}]}}, "comments": {}}