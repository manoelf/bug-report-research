{"bugs": {"1636031": {"comments": [{"creator": "alessio.placitelli@gmail.com", "creation_time": "2020-05-07T06:21:24Z", "count": 0, "tags": [], "time": "2020-05-07T06:21:24Z", "raw_text": "Firefox Lite was attempting to [enable Glean](https://github.com/mozilla-tw/FirefoxLite/pull/4953) on their product.\n\nHowever, adding the SDK on their end produced an increase of 2MB of the APK (which is generally ~6MB). The Firefox Lite APK size can't increase that much due to business requirements and that makes Glean not a viable option at this point.\n\nThe Firefox Reality team evaluated [dynamic delivery](https://developer.android.com/guide/app-bundle/dynamic-delivery) but it's not an option, since a big chunk of the installs happen outside of the play store. From that issue:\n\n> \n> \n> Even if we replace the legacy Telemetry library with Glean, we'll still 2MB over our budget.\n> (8396272 > 6291456.0)\n> \n> I first think we can use Dynamic Feature.\n> But we have 10-20% of users that download our app outside of the Play Store. (concern 1)\n> \n> Proposal 2:\n> Using ABI-split might not help much cause the size is still around 1.2 to 1.9 MB.\n> I think the product team only accept at most 600 to 700K (around 10%) growth in APK size. (@shsu571 please help confirm) (concern 2)\n> \n> I can't think of a better way right now.\n\n\n\nWe need to investigate ways of reducing the size of Glean.", "text": "Firefox Lite was attempting to [enable Glean](https://github.com/mozilla-tw/FirefoxLite/pull/4953) on their product.\n\nHowever, adding the SDK on their end produced an increase of 2MB of the APK (which is generally ~6MB). The Firefox Lite APK size can't increase that much due to business requirements and that makes Glean not a viable option at this point.\n\nThe Firefox Reality team evaluated [dynamic delivery](https://developer.android.com/guide/app-bundle/dynamic-delivery) but it's not an option, since a big chunk of the installs happen outside of the play store. From that issue:\n\n> \n> \n> Even if we replace the legacy Telemetry library with Glean, we'll still 2MB over our budget.\n> (8396272 > 6291456.0)\n> \n> I first think we can use Dynamic Feature.\n> But we have 10-20% of users that download our app outside of the Play Store. (concern 1)\n> \n> Proposal 2:\n> Using ABI-split might not help much cause the size is still around 1.2 to 1.9 MB.\n> I think the product team only accept at most 600 to 700K (around 10%) growth in APK size. (@shsu571 please help confirm) (concern 2)\n> \n> I can't think of a better way right now.\n\n\n\nWe need to investigate ways of reducing the size of Glean.", "is_private": false, "author": "alessio.placitelli@gmail.com", "id": 14801946, "bug_id": 1636031, "attachment_id": null}, {"creation_time": "2020-05-07T14:16:18Z", "creator": "alessio.placitelli@gmail.com", "tags": [], "count": 1, "time": "2020-05-07T14:16:18Z", "is_private": false, "raw_text": "After looking into this a bit, I'm closing it as WORKSFORME.\n\nThe current size of the Glean SDK library goes from ~500kb to ~700kb (versus the initial ~1.2Mb to ~2.0Mb of last year).\nBy performing ABI splitting in Firefox Lite, we're able to keep the APK size to the target 6Mb size. See this [draft PR](https://github.com/mozilla-tw/FirefoxLite/pull/4958).", "text": "After looking into this a bit, I'm closing it as WORKSFORME.\n\nThe current size of the Glean SDK library goes from ~500kb to ~700kb (versus the initial ~1.2Mb to ~2.0Mb of last year).\nBy performing ABI splitting in Firefox Lite, we're able to keep the APK size to the target 6Mb size. See this [draft PR](https://github.com/mozilla-tw/FirefoxLite/pull/4958).", "author": "alessio.placitelli@gmail.com", "id": 14802575, "bug_id": 1636031, "attachment_id": null}]}}, "comments": {}}