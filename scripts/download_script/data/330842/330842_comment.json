{"bugs": {"330842": {"comments": [{"count": 0, "id": 2804640, "bug_id": 330842, "raw_text": "User-Agent:       Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9a1) Gecko/20060317 Firefox/1.6a1\nBuild Identifier: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9a1) Gecko/20060317 Firefox/1.6a1\n\nI get an assertion failure window as soon as the browser starts. If I click OK a browser window opens. So far the browser appears to be functioning properly otherwise.\n\nHere is the top of the message:\n\nASSERT: Can't serialize: file doesn't exist!\nStack Trace:\n0:ENSURE_WARN(false,Can't serialize: file doesn't exist:, 2147549183)\n1:SRCH_ENG_serializeToFile()\n2:SRCH_SVC_convertSherlock([object Object],rpmfine)\n\nIf you wan't the rest of the stack trace let me know, but I have to type it in from a screenshot.\n\nReproducible: Always\n\nSteps to Reproduce:\nStart browser", "creator": "lipsitt@fas.harvard.edu", "creation_time": "2006-03-17T17:30:29Z", "attachment_id": null, "is_private": false, "author": "lipsitt@fas.harvard.edu", "time": "2006-03-17T17:30:29Z", "tags": [], "text": "User-Agent:       Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9a1) Gecko/20060317 Firefox/1.6a1\nBuild Identifier: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9a1) Gecko/20060317 Firefox/1.6a1\n\nI get an assertion failure window as soon as the browser starts. If I click OK a browser window opens. So far the browser appears to be functioning properly otherwise.\n\nHere is the top of the message:\n\nASSERT: Can't serialize: file doesn't exist!\nStack Trace:\n0:ENSURE_WARN(false,Can't serialize: file doesn't exist:, 2147549183)\n1:SRCH_ENG_serializeToFile()\n2:SRCH_SVC_convertSherlock([object Object],rpmfine)\n\nIf you wan't the rest of the stack trace let me know, but I have to type it in from a screenshot.\n\nReproducible: Always\n\nSteps to Reproduce:\nStart browser"}, {"tags": [], "time": "2006-03-18T06:19:52Z", "creation_time": "2006-03-18T06:19:52Z", "text": "Do you get this every time you start up? Can you send me the contents of your profile's searchplugins directory?", "id": 2805107, "attachment_id": null, "count": 1, "creator": "gavin.sharp@gmail.com", "author": "gavin.sharp@gmail.com", "raw_text": "Do you get this every time you start up? Can you send me the contents of your profile's searchplugins directory?", "is_private": false, "bug_id": 330842}, {"creation_time": "2006-03-18T06:22:22Z", "count": 2, "id": 2805109, "bug_id": 330842, "raw_text": "You could also try setting the browser.search.log pref to true and checking STDOUT or the Javascript console for messages.", "creator": "gavin.sharp@gmail.com", "time": "2006-03-18T06:22:22Z", "tags": [], "text": "You could also try setting the browser.search.log pref to true and checking STDOUT or the Javascript console for messages.", "attachment_id": null, "is_private": false, "author": "gavin.sharp@gmail.com"}, {"id": 2806208, "count": 3, "creator": "gavin.sharp@gmail.com", "raw_text": "Daniel, are you still seeing this? If so, could you try some of the things mentioned in the previous comments?", "bug_id": 330842, "creation_time": "2006-03-20T04:12:23Z", "attachment_id": null, "author": "gavin.sharp@gmail.com", "is_private": false, "tags": [], "time": "2006-03-20T04:12:23Z", "text": "Daniel, are you still seeing this? If so, could you try some of the things mentioned in the previous comments?"}, {"tags": [], "time": "2006-03-20T18:20:01Z", "text": "Created attachment 215671\nJavascript Console Messages", "attachment_id": 215671, "is_private": false, "author": "mozbugs@bollans.eclipse.co.uk", "creation_time": "2006-03-20T18:20:01Z", "id": 2806583, "count": 4, "bug_id": 330842, "creator": "mozbugs@bollans.eclipse.co.uk", "raw_text": ""}, {"text": "Created attachment 215672\nContents of searchplugins directory\n\nMozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9a1) Gecko/20060317 Firefox/1.6a1 ID:2006031704\n\nI saw this message several times after updating but it does not appear any more.", "creation_time": "2006-03-20T18:23:52Z", "tags": [], "time": "2006-03-20T18:23:52Z", "is_private": false, "bug_id": 330842, "creator": "mozbugs@bollans.eclipse.co.uk", "author": "mozbugs@bollans.eclipse.co.uk", "raw_text": "Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9a1) Gecko/20060317 Firefox/1.6a1 ID:2006031704\n\nI saw this message several times after updating but it does not appear any more.", "attachment_id": 215672, "id": 2806586, "count": 5}, {"id": 2806662, "attachment_id": null, "count": 6, "is_private": false, "bug_id": 330842, "creator": "gavin.sharp@gmail.com", "author": "gavin.sharp@gmail.com", "raw_text": "Ah, so those attachments show that the initial conversion failed, but the renaming of the files still worked. Sounds like there is something wrong with my backup code on linux.\n\nFlummox: Can you try renaming the .xml files you attached to .src, and running Firefox again? You should get the error messages again. The JavaScript console log from that run will show the actual bug and not the side effects, so if you could attach that I'd appreciate it.", "tags": [], "time": "2006-03-20T19:26:12Z", "text": "Ah, so those attachments show that the initial conversion failed, but the renaming of the files still worked. Sounds like there is something wrong with my backup code on linux.\n\nFlummox: Can you try renaming the .xml files you attached to .src, and running Firefox again? You should get the error messages again. The JavaScript console log from that run will show the actual bug and not the side effects, so if you could attach that I'd appreciate it.", "creation_time": "2006-03-20T19:26:12Z"}, {"count": 7, "id": 2806892, "bug_id": 330842, "raw_text": "Actually, you don't need to test, I think I found the problem. The Linux nsIFile implementations seem to not change \"this\" after a moveTo or copyTo, while the Windows one does.", "creator": "gavin.sharp@gmail.com", "creation_time": "2006-03-20T23:10:32Z", "attachment_id": null, "is_private": false, "author": "gavin.sharp@gmail.com", "time": "2006-03-20T23:10:32Z", "tags": [], "text": "Actually, you don't need to test, I think I found the problem. The Linux nsIFile implementations seem to not change \"this\" after a moveTo or copyTo, while the Windows one does."}, {"attachment_id": null, "id": 2806911, "count": 8, "author": "gavin.sharp@gmail.com", "creator": "gavin.sharp@gmail.com", "raw_text": "(which I've just realized is bug 200024)", "is_private": false, "bug_id": 330842, "tags": [], "time": "2006-03-20T23:26:14Z", "creation_time": "2006-03-20T23:26:14Z", "text": "(which I've just realized is bug 200024)"}, {"id": 2807025, "attachment_id": 215730, "count": 9, "author": "gavin.sharp@gmail.com", "creator": "gavin.sharp@gmail.com", "raw_text": "The first hunk is just code simplification.", "is_private": false, "bug_id": 330842, "tags": [], "time": "2006-03-21T01:36:31Z", "creation_time": "2006-03-21T01:36:31Z", "text": "Created attachment 215730\npatch\n\nThe first hunk is just code simplification."}, {"author": "gavin.sharp@gmail.com", "is_private": false, "attachment_id": 215730, "text": "Comment on attachment 215730\npatch\n\n>Index: browser/components/search/nsSearchService.js\n\n>+    // Set aEngine._file explicitly, since some moveTo implementations don't\n>+    // change srcFile (and thus aEngine._file) to point to the new file\n>+    // (bug 200024)\n>+    aEngine._file = xmlFile;\n\nActually, I'll remove this comment. Setting _file explicitly will always be correct, regardless of bug 200024's resolution. Even if nsLocalFileUnix is changed to match Windows, relying on that makes code hard to follow, so this comment would serve no purpose.", "time": "2006-03-26T08:54:18Z", "tags": [], "raw_text": ">Index: browser/components/search/nsSearchService.js\n\n>+    // Set aEngine._file explicitly, since some moveTo implementations don't\n>+    // change srcFile (and thus aEngine._file) to point to the new file\n>+    // (bug 200024)\n>+    aEngine._file = xmlFile;\n\nActually, I'll remove this comment. Setting _file explicitly will always be correct, regardless of bug 200024's resolution. Even if nsLocalFileUnix is changed to match Windows, relying on that makes code hard to follow, so this comment would serve no purpose.", "creator": "gavin.sharp@gmail.com", "bug_id": 330842, "count": 10, "id": 2811591, "creation_time": "2006-03-26T08:54:18Z"}, {"attachment_id": 215730, "id": 2811645, "count": 11, "creator": "gavin.sharp@gmail.com", "author": "gavin.sharp@gmail.com", "raw_text": "bitrotted by the patch in bug 330887", "is_private": false, "bug_id": 330842, "tags": [], "time": "2006-03-26T12:38:00Z", "creation_time": "2006-03-26T12:38:00Z", "text": "Comment on attachment 215730\npatch\n\nbitrotted by the patch in bug 330887"}, {"author": "gavin.sharp@gmail.com", "is_private": false, "attachment_id": 215730, "text": "Comment on attachment 215730\npatch\n\nthis still applies, and shouldn't be blocked by bug 330842", "tags": [], "time": "2006-04-05T22:09:21Z", "creator": "gavin.sharp@gmail.com", "raw_text": "this still applies, and shouldn't be blocked by bug 330842", "bug_id": 330842, "id": 2820059, "count": 12, "creation_time": "2006-04-05T22:09:21Z"}, {"creation_time": "2006-04-06T18:26:32Z", "count": 13, "id": 2820960, "bug_id": 330842, "raw_text": "Ok, though I don't see how oldFile/newFile is measurably improved by changing to srcFile/xmlFile.  how about originalSherlockFile and newSearchFile, in line with the recent discussions on better var names? ", "creator": "mconnor@mozilla.com", "time": "2006-04-06T18:26:32Z", "tags": [], "text": "Comment on attachment 215730\npatch\n\nOk, though I don't see how oldFile/newFile is measurably improved by changing to srcFile/xmlFile.  how about originalSherlockFile and newSearchFile, in line with the recent discussions on better var names?", "attachment_id": 215730, "is_private": false, "author": "mconnor@mozilla.com"}, {"bug_id": 330842, "creator": "gavin.sharp@gmail.com", "raw_text": "", "id": 2821255, "count": 14, "creation_time": "2006-04-06T23:08:22Z", "is_private": false, "author": "gavin.sharp@gmail.com", "attachment_id": 217496, "text": "Created attachment 217496\nfor checkin", "tags": [], "time": "2006-04-06T23:08:22Z"}, {"is_private": false, "bug_id": 330842, "creator": "gavin.sharp@gmail.com", "author": "gavin.sharp@gmail.com", "raw_text": "checked in branch and trunk\nmozilla/browser/components/search/nsSearchService.js \t1.1.2.8\nmozilla/browser/components/search/nsSearchService.js \t1.9", "attachment_id": null, "id": 2821261, "count": 15, "text": "checked in branch and trunk\nmozilla/browser/components/search/nsSearchService.js \t1.1.2.8\nmozilla/browser/components/search/nsSearchService.js \t1.9", "creation_time": "2006-04-06T23:13:27Z", "tags": [], "time": "2006-04-06T23:13:27Z"}, {"tags": [], "time": "2006-04-07T22:12:20Z", "text": "Checkin for this bug may have caused a 15% increase in number of allocations on balsa. See bug 333173.", "creation_time": "2006-04-07T22:12:20Z", "id": 2822203, "attachment_id": null, "count": 16, "is_private": false, "bug_id": 330842, "author": "jonas@sicking.cc", "creator": "jonas@sicking.cc", "raw_text": "Checkin for this bug may have caused a 15% increase in number of allocations on balsa. See bug 333173."}]}}, "comments": {}}