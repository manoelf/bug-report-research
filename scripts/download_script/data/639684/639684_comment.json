{"bugs": {"639684": {"comments": [{"attachment_id": null, "author": "dveditz@mozilla.com", "is_private": false, "creation_time": "2011-03-08T01:19:31Z", "text": "We've recently seen a sequence of crashes caused by frankenbuilds, where due to some updater glitch users end up with a mixture of firefox.exe from one version and libraries from another. For this and other similar issues breakpad should check the integrity of our install files as part of the crash-reporting process, and if any don't match the expected result we should warn the user that their installation is corrupt and they should download and re-install a fresh copy.\n\nOne simple way to do this is to install a list of MD5 hashes and iterate when we crash, then add a bit of WARNING text to the dialog is there are mismatches. This is not intended to be a protection against locally installed malware (which could obviously change the list), just a simple damage check.", "id": 5328979, "raw_text": "We've recently seen a sequence of crashes caused by frankenbuilds, where due to some updater glitch users end up with a mixture of firefox.exe from one version and libraries from another. For this and other similar issues breakpad should check the integrity of our install files as part of the crash-reporting process, and if any don't match the expected result we should warn the user that their installation is corrupt and they should download and re-install a fresh copy.\n\nOne simple way to do this is to install a list of MD5 hashes and iterate when we crash, then add a bit of WARNING text to the dialog is there are mismatches. This is not intended to be a protection against locally installed malware (which could obviously change the list), just a simple damage check.", "tags": [], "creator": "dveditz@mozilla.com", "count": 0, "time": "2011-03-08T01:19:31Z", "bug_id": 639684}, {"author": "ted@mielczarek.org", "creation_time": "2011-03-08T13:49:39Z", "text": "As I mentioned in bug 634726, I would recommend against trying to do this while we're crashing, since the app is in a damaged state. Once bug 587729 is fixed, those sorts of things will be easier.\n\nIf all you want is MD5 hashes of install files, though, we can probably do that from the crash reporter client after the fact, since it'd just have to enumerate the install dir.", "id": 5329963, "raw_text": "As I mentioned in bug 634726, I would recommend against trying to do this while we're crashing, since the app is in a damaged state. Once bug 587729 is fixed, those sorts of things will be easier.\n\nIf all you want is MD5 hashes of install files, though, we can probably do that from the crash reporter client after the fact, since it'd just have to enumerate the install dir.", "count": 1, "tags": [], "creator": "ted@mielczarek.org", "bug_id": 639684, "attachment_id": null, "is_private": false, "time": "2011-03-08T13:49:39Z"}, {"time": "2011-03-09T18:47:22Z", "is_private": false, "attachment_id": null, "bug_id": 639684, "creator": "dveditz@mozilla.com", "tags": [], "count": 2, "raw_text": "Yeah, I was assuming crash reporter would check the install files after it had gathered all the state data it needs and shut down firefox. Some of the files we'd want to check aren't even in memory anyway (js modules, chrome jar files, etc).", "id": 5333612, "text": "Yeah, I was assuming crash reporter would check the install files after it had gathered all the state data it needs and shut down firefox. Some of the files we'd want to check aren't even in memory anyway (js modules, chrome jar files, etc).", "creation_time": "2011-03-09T18:47:22Z", "author": "dveditz@mozilla.com"}]}}, "comments": {}}