{"bugs": {"630495": {"comments": [{"text": "It's a follow-up from bug 595451: when a form control is invalid and hidden, instead of doing nothing, we should probably try to show something explaining the issue and asking the user of he/she still wants to submit the form (with all implications it might have).\n\nIt's probably a UX-related issue but I believe it can't be worse than what we currently have.", "is_private": false, "bug_id": 630495, "raw_text": "It's a follow-up from bug 595451: when a form control is invalid and hidden, instead of doing nothing, we should probably try to show something explaining the issue and asking the user of he/she still wants to submit the form (with all implications it might have).\n\nIt's probably a UX-related issue but I believe it can't be worse than what we currently have.", "creator": "mounir@lamouri.fr", "id": 5242412, "attachment_id": null, "creation_time": "2011-02-01T10:43:16Z", "count": 0, "time": "2011-02-01T10:43:16Z", "author": "mounir@lamouri.fr", "tags": []}, {"raw_text": "Atul, this is not doable in a couple of hours but would be much more like a few weeks project if you can only dedicate a few hours per week on it.", "bug_id": 630495, "is_private": false, "text": "Atul, this is not doable in a couple of hours but would be much more like a few weeks project if you can only dedicate a few hours per week on it.", "attachment_id": null, "id": 5726381, "creator": "mounir@lamouri.fr", "author": "mounir@lamouri.fr", "time": "2011-09-20T19:19:16Z", "count": 1, "creation_time": "2011-09-20T19:19:16Z", "tags": []}, {"raw_text": "If this bug is still open, I would like to take this bug.", "is_private": false, "bug_id": 630495, "id": 6037237, "time": "2012-02-06T14:30:23Z", "count": 2, "text": "If this bug is still open, I would like to take this bug.", "attachment_id": null, "creator": "hung.raymond@gmail.com", "author": "hung.raymond@gmail.com", "creation_time": "2012-02-06T14:30:23Z", "tags": []}, {"time": "2012-02-06T14:33:04Z", "author": "mounir@lamouri.fr", "creation_time": "2012-02-06T14:33:04Z", "count": 3, "tags": [], "bug_id": 630495, "is_private": false, "raw_text": "Sure. If you have any question, feel free to ask here or to send me an email. If you think you can already try to work a patch, do so and attach it here.", "text": "Sure. If you have any question, feel free to ask here or to send me an email. If you think you can already try to work a patch, do so and attach it here.", "id": 6037240, "attachment_id": null, "creator": "mounir@lamouri.fr"}, {"creator": "mounir@lamouri.fr", "id": 6228648, "attachment_id": null, "text": "*** Bug 724537 has been marked as a duplicate of this bug. ***", "is_private": false, "bug_id": 630495, "raw_text": "", "tags": [], "creation_time": "2012-04-17T07:29:38Z", "count": 4, "time": "2012-04-17T07:29:38Z", "author": "mounir@lamouri.fr"}, {"creation_time": "2012-08-16T09:40:09Z", "count": 5, "time": "2012-08-16T09:40:09Z", "author": "mounir@lamouri.fr", "tags": [], "text": "To attack that bug, you should have a look at |gFormSubmitObserver| in browser/base/content/browser.js and get familiarize on how it is working. What you should do is when aInvalidElements[0] is hidden, you should probably show the popup on the submit button. If hidden too, you should try to find a place to show it. The popup message would be different saying that there is a bug because there is an invalid hidden element in the form.\nThat would be a first step. Shouldn't be too hard. The second step would be to show a message asking if the user wants to submit the form anyway with a button to do so.", "bug_id": 630495, "is_private": false, "raw_text": "To attack that bug, you should have a look at |gFormSubmitObserver| in browser/base/content/browser.js and get familiarize on how it is working. What you should do is when aInvalidElements[0] is hidden, you should probably show the popup on the submit button. If hidden too, you should try to find a place to show it. The popup message would be different saying that there is a bug because there is an invalid hidden element in the form.\nThat would be a first step. Shouldn't be too hard. The second step would be to show a message asking if the user wants to submit the form anyway with a button to do so.", "creator": "mounir@lamouri.fr", "id": 6559357, "attachment_id": null}, {"count": 6, "creation_time": "2012-08-24T21:23:47Z", "author": "mounir@lamouri.fr", "time": "2012-08-24T21:23:47Z", "tags": [], "text": "Created attachment 655164\nTestcase\n\nThe form in the test case has a hidden required form. In Chrome/Opera, the form isn't submitted and nothing is shown. In Firefox, the form isn't submitted and an error message is shown at the wrong place.\nWe should at least show a message saying that something is wrong. Ideally, we should allow the user to still submit the form.", "raw_text": "The form in the test case has a hidden required form. In Chrome/Opera, the form isn't submitted and nothing is shown. In Firefox, the form isn't submitted and an error message is shown at the wrong place.\nWe should at least show a message saying that something is wrong. Ideally, we should allow the user to still submit the form.", "bug_id": 630495, "is_private": false, "creator": "mounir@lamouri.fr", "attachment_id": 655164, "id": 6582105}, {"count": 7, "time": "2012-08-24T21:25:00Z", "raw_text": "Also, look at the patch in bug 595451 to see how to check if an element is visible.", "is_private": false, "bug_id": 630495, "id": 6582111, "creation_time": "2012-08-24T21:25:00Z", "author": "mounir@lamouri.fr", "tags": [], "text": "Also, look at the patch in bug 595451 to see how to check if an element is visible.", "creator": "mounir@lamouri.fr", "attachment_id": null}, {"text": "Created attachment 659565\nfirst proposed patch _ not final\n\nI made this first patch, but I have a bug and I do not know why..\n\nThe behavior I wanted to get is the following :\n\n1. If there are visible fields and invisible fields that are invalid at the time of submitting, show the validation message of the first visible field.\n\n2. If only invisible fields are invalid, show a panel with a message saying: \"One or more invisible fields are invalid, preventing this form from being submitted.\" \n\nRight now, in case 2, the panel does not show if the form has not been previously invalid because of a invalid visible field.", "is_private": false, "bug_id": 630495, "raw_text": "I made this first patch, but I have a bug and I do not know why..\n\nThe behavior I wanted to get is the following :\n\n1. If there are visible fields and invisible fields that are invalid at the time of submitting, show the validation message of the first visible field.\n\n2. If only invisible fields are invalid, show a panel with a message saying: \"One or more invisible fields are invalid, preventing this form from being submitted.\" \n\nRight now, in case 2, the panel does not show if the form has not been previously invalid because of a invalid visible field.", "creator": "alice.lieutier@gmail.com", "id": 6620950, "attachment_id": 659565, "creation_time": "2012-09-09T12:28:47Z", "count": 8, "time": "2012-09-09T12:28:47Z", "author": "alice.lieutier@gmail.com", "tags": []}, {"creation_time": "2012-09-17T16:55:33Z", "count": 9, "time": "2012-09-17T16:55:33Z", "author": "mounir@lamouri.fr", "tags": [], "text": "Comment on attachment 659565\nfirst proposed patch _ not final\n\nReview of attachment 659565:\n-----------------------------------------------------------------\n\nUnfortunately, I can't really help you with the bug you saw. Maybe a Firefox person might be more helpful than me ;)\n\n::: browser/base/content/browser.js\n@@ +690,5 @@\n>  \n> +    let element = getFirstVisibleInvalidElement(aInvalidElements);\n> +\n> +    if (!element) {\n> +      // Display an error message \n\nnit: there is a trailing white space there. Add a colon (:) or a dot (.) instead.\n\n@@ +693,5 @@\n> +    if (!element) {\n> +      // Display an error message \n> +      // One or more invisible fields are invalid, preventing this form from being submitted.\n> +      this.panel.firstChild.textContent = gNavigatorBundle.getString(\"formValidation.hiddenInvalid\");\n> +      this.panel.openPopup(gURLBar, \"bottomleft topleft\");\n\nI think it might be good to show the panel on the identity button. In that case, that would be \"centerbottom topleft\", I think.", "is_private": false, "bug_id": 630495, "raw_text": "Review of attachment 659565:\n-----------------------------------------------------------------\n\nUnfortunately, I can't really help you with the bug you saw. Maybe a Firefox person might be more helpful than me ;)\n\n::: browser/base/content/browser.js\n@@ +690,5 @@\n>  \n> +    let element = getFirstVisibleInvalidElement(aInvalidElements);\n> +\n> +    if (!element) {\n> +      // Display an error message \n\nnit: there is a trailing white space there. Add a colon (:) or a dot (.) instead.\n\n@@ +693,5 @@\n> +    if (!element) {\n> +      // Display an error message \n> +      // One or more invisible fields are invalid, preventing this form from being submitted.\n> +      this.panel.firstChild.textContent = gNavigatorBundle.getString(\"formValidation.hiddenInvalid\");\n> +      this.panel.openPopup(gURLBar, \"bottomleft topleft\");\n\nI think it might be good to show the panel on the identity button. In that case, that would be \"centerbottom topleft\", I think.", "creator": "mounir@lamouri.fr", "id": 6640547, "attachment_id": 659565}, {"attachment_id": null, "id": 7622346, "creator": "almasry.mina@gmail.com", "raw_text": "It's been more than 6 months with no activity here. If no one minds, I'll assign myself this, and take a go at it.", "is_private": false, "bug_id": 630495, "text": "It's been more than 6 months with no activity here. If no one minds, I'll assign myself this, and take a go at it.", "tags": [], "author": "almasry.mina@gmail.com", "time": "2013-07-11T04:02:23Z", "count": 10, "creation_time": "2013-07-11T04:02:23Z"}, {"time": "2013-07-12T02:29:05Z", "count": 11, "id": 7627060, "raw_text": "Review of attachment 659565:\n-----------------------------------------------------------------\n\n::: browser/base/content/browser.js\n@@ +667,5 @@\n> +        element = aInvalidElements.queryElementAt(i, Ci.nsISupports);\n> +\n> +        // If the element is visible, return it.\n> +        let rect = element.getBoundingClientRect();\n> +        if (!(rect.width == 0 && rect.height == 0 && rect.top == 0 && rect.left == 0)) {\n\nI don't think you need to check .top or .left.\n\nIf width==height==0, that's should be sufficient?\n\nWill this catch style=\"visibility:hidden\"? (There are probably an infinite number of other ways to \"hide\" things, but I don't think this check needs to be absurdly robust.)\n\n::: browser/locales/en-US/chrome/browser/browser.properties\n@@ +401,5 @@\n>  identity.loggedIn.signOut.label = Sign Out\n>  identity.loggedIn.signOut.accessKey = O\n> +\n> +# Hidden Invalid Field\n> +formValidation.hiddenInvalid=One or more invisible fields are invalid, preventing this form from being submitted.\n\nI think this should point a bit of blame at the page, since the site has done something dumb (dare I say user-hostile), and it's not Firefox's fault.\n\n\"Well, this is awkward. There is an invalid form field somewhere on the page, but the site has hidden it from view.\"\n\nHmm. Bold question -- can we just submit it anyway, and ignore the invalidness (and error message)? Does the spec cover what should happen when an validation fails for an invalid field?", "bug_id": 630495, "is_private": false, "tags": [], "author": "jdinbox@gmail.com", "creation_time": "2013-07-12T02:29:05Z", "attachment_id": 659565, "creator": "jdinbox@gmail.com", "text": "Comment on attachment 659565\nfirst proposed patch _ not final\n\nReview of attachment 659565:\n-----------------------------------------------------------------\n\n::: browser/base/content/browser.js\n@@ +667,5 @@\n> +        element = aInvalidElements.queryElementAt(i, Ci.nsISupports);\n> +\n> +        // If the element is visible, return it.\n> +        let rect = element.getBoundingClientRect();\n> +        if (!(rect.width == 0 && rect.height == 0 && rect.top == 0 && rect.left == 0)) {\n\nI don't think you need to check .top or .left.\n\nIf width==height==0, that's should be sufficient?\n\nWill this catch style=\"visibility:hidden\"? (There are probably an infinite number of other ways to \"hide\" things, but I don't think this check needs to be absurdly robust.)\n\n::: browser/locales/en-US/chrome/browser/browser.properties\n@@ +401,5 @@\n>  identity.loggedIn.signOut.label = Sign Out\n>  identity.loggedIn.signOut.accessKey = O\n> +\n> +# Hidden Invalid Field\n> +formValidation.hiddenInvalid=One or more invisible fields are invalid, preventing this form from being submitted.\n\nI think this should point a bit of blame at the page, since the site has done something dumb (dare I say user-hostile), and it's not Firefox's fault.\n\n\"Well, this is awkward. There is an invalid form field somewhere on the page, but the site has hidden it from view.\"\n\nHmm. Bold question -- can we just submit it anyway, and ignore the invalidness (and error message)? Does the spec cover what should happen when an validation fails for an invalid field?"}, {"text": "I agree that the site has done something dumb (I am guilty of writing such things at least once). So, by all means \"blame\" the page - maybe even hint that the user should inform the webmaster. \n\nPerhaps \"Well, this is awkward. There is an empty form field somewhere on the page, which you must fill in, but the site has hidden it from view. (You may wish to report this error to the site's webmaster)\"\n\nI'd suggest 4 cases you need to test for:\n  display:none\n  visibility:hidden\nand the JS versions of these (i.e. where the visibility has been turned off in JS, rather than the HTML/CSS).\n\nMy suggestion would be to show the field that is missing and allow the user to fill it in, either by unhiding it, or just generating a dialog box where the user can type.\n\nIMHO, it IS ok to submit the page anyway, ignoring the \"required\" field. That is what would happen in any browser that can't understand the HTML5 \"required\" option (and what would happen if the user uses something like Web-developer to force it). So the server really should cope.", "is_private": false, "bug_id": 630495, "raw_text": "I agree that the site has done something dumb (I am guilty of writing such things at least once). So, by all means \"blame\" the page - maybe even hint that the user should inform the webmaster. \n\nPerhaps \"Well, this is awkward. There is an empty form field somewhere on the page, which you must fill in, but the site has hidden it from view. (You may wish to report this error to the site's webmaster)\"\n\nI'd suggest 4 cases you need to test for:\n  display:none\n  visibility:hidden\nand the JS versions of these (i.e. where the visibility has been turned off in JS, rather than the HTML/CSS).\n\nMy suggestion would be to show the field that is missing and allow the user to fill it in, either by unhiding it, or just generating a dialog box where the user can type.\n\nIMHO, it IS ok to submit the page anyway, ignoring the \"required\" field. That is what would happen in any browser that can't understand the HTML5 \"required\" option (and what would happen if the user uses something like Web-developer to force it). So the server really should cope.", "creator": "rn214@richardneill.org", "id": 7627098, "attachment_id": null, "creation_time": "2013-07-12T02:45:36Z", "count": 12, "time": "2013-07-12T02:45:36Z", "author": "rn214@richardneill.org", "tags": []}, {"id": 7760829, "is_private": false, "bug_id": 630495, "raw_text": "Sorry it looks like I won't be able to do this now. I'm reassigning back to Alice.", "time": "2013-08-18T20:46:11Z", "count": 13, "attachment_id": null, "creator": "almasry.mina@gmail.com", "text": "Sorry it looks like I won't be able to do this now. I'm reassigning back to Alice.", "tags": [], "author": "almasry.mina@gmail.com", "creation_time": "2013-08-18T20:46:11Z"}, {"tags": [], "count": 14, "creation_time": "2013-12-06T11:01:39Z", "author": "s.harte@gmx.ch", "time": "2013-12-06T11:01:39Z", "creator": "s.harte@gmx.ch", "attachment_id": null, "id": 8164092, "text": "This is really a problem for me atm, because we have different sections with multiple fields in a form which get hidden/unhidden through user input. These sections contain required fields, but they only have to be filled in if the section is actually visible... Inputs which are not visible should be taken out of the validation routine imho because you should assume that those fields were hidden on purpose.", "raw_text": "This is really a problem for me atm, because we have different sections with multiple fields in a form which get hidden/unhidden through user input. These sections contain required fields, but they only have to be filled in if the section is actually visible... Inputs which are not visible should be taken out of the validation routine imho because you should assume that those fields were hidden on purpose.", "is_private": false, "bug_id": 630495}, {"text": "If you want that then you should file a separate bug, or even better contact the spec author.\n\nThis bug is about having better notifications to the user (not the developer) when this situation arises.", "bug_id": 630495, "is_private": false, "raw_text": "If you want that then you should file a separate bug, or even better contact the spec author.\n\nThis bug is about having better notifications to the user (not the developer) when this situation arises.", "creator": "jonas@sicking.cc", "id": 8169994, "attachment_id": null, "creation_time": "2013-12-08T08:34:30Z", "count": 15, "time": "2013-12-08T08:34:30Z", "author": "jonas@sicking.cc", "tags": []}, {"tags": [], "time": "2015-12-09T19:03:49Z", "author": "dhanvicse@gmail.com", "creation_time": "2015-12-09T19:03:49Z", "count": 16, "id": 10997420, "attachment_id": null, "creator": "dhanvicse@gmail.com", "is_private": false, "bug_id": 630495, "raw_text": "I would like to work on this bug as it is a student project\n\nI will start working on this by the end of 2015 or in the starting of 2016, I am assigning this one to myself.", "text": "I would like to work on this bug as it is a student project\n\nI will start working on this by the end of 2015 or in the starting of 2016, I am assigning this one to myself."}, {"author": "dhanvicse@gmail.com", "time": "2016-09-05T16:25:08Z", "count": 17, "creation_time": "2016-09-05T16:25:08Z", "tags": [], "raw_text": "Any help on this one ?", "is_private": false, "bug_id": 630495, "text": "Any help on this one ?", "attachment_id": null, "id": 11686706, "creator": "dhanvicse@gmail.com"}, {"creator": "mounir@lamouri.fr", "attachment_id": null, "id": 11687681, "text": "I don't have the bandwidth for this unfortunately. Added smaug who might be able to help.", "raw_text": "I don't have the bandwidth for this unfortunately. Added smaug who might be able to help.", "is_private": false, "bug_id": 630495, "tags": [], "count": 18, "creation_time": "2016-09-06T07:54:03Z", "author": "mounir@lamouri.fr", "time": "2016-09-06T07:54:03Z"}, {"raw_text": "Doesn't look like this needinfo request from 4 years ago is still useful.", "is_private": false, "bug_id": 630495, "text": "Doesn't look like this needinfo request from 4 years ago is still useful.", "attachment_id": null, "id": 15047968, "creator": "gijskruitbosch+bugs@gmail.com", "author": "gijskruitbosch+bugs@gmail.com", "time": "2020-09-22T13:30:27Z", "count": 19, "creation_time": "2020-09-22T13:30:27Z", "tags": []}, {"tags": [], "count": 20, "creation_time": "2021-09-28T20:12:14Z", "author": "standard8@mozilla.com", "time": "2021-09-28T20:12:14Z", "creator": "standard8@mozilla.com", "attachment_id": null, "id": 15589133, "text": "Unfortunately we don't have someone ready to mentor this to help it move forward at the current time.", "raw_text": "Unfortunately we don't have someone ready to mentor this to help it move forward at the current time.", "is_private": false, "bug_id": 630495}]}}, "comments": {}}