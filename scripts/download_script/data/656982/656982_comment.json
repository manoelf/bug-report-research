{"comments": {}, "bugs": {"656982": {"comments": [{"author": "mwu.code@gmail.com", "attachment_id": null, "bug_id": 656982, "tags": [], "time": "2011-05-13T19:26:03Z", "count": 0, "creator": "mwu.code@gmail.com", "raw_text": "No need for two heap implementations.", "id": 5468869, "text": "No need for two heap implementations.", "is_private": false, "creation_time": "2011-05-13T19:26:03Z"}, {"time": "2011-05-19T20:52:43Z", "is_private": false, "attachment_id": 533780, "tags": [], "count": 1, "creator": "mwu.code@gmail.com", "bug_id": 656982, "creation_time": "2011-05-19T20:52:43Z", "text": "Created attachment 533780\n1. Use AppendElement instead of InsertSlotsAt\n\nThis makes PushHeap use AppendElement to reserve space instead of InsertSlotsAt, because we want the last element to be initialized when we destruct it later (as we shuffle things around the tree).", "id": 5481140, "raw_text": "This makes PushHeap use AppendElement to reserve space instead of InsertSlotsAt, because we want the last element to be initialized when we destruct it later (as we shuffle things around the tree).", "author": "mwu.code@gmail.com"}, {"count": 2, "creator": "mwu.code@gmail.com", "tags": [], "bug_id": 656982, "id": 5481174, "raw_text": "The < is inverted since it appears that nsTArray is a max heap and nsTPriorityQueue is a min heap.", "creation_time": "2011-05-19T21:02:02Z", "text": "Created attachment 533781\n2. Convert SMIL to nsTArray heaps\n\nThe < is inverted since it appears that nsTArray is a max heap and nsTPriorityQueue is a min heap.", "author": "mwu.code@gmail.com", "time": "2011-05-19T21:02:02Z", "is_private": false, "attachment_id": 533781}, {"attachment_id": 533783, "time": "2011-05-19T21:04:00Z", "is_private": false, "author": "mwu.code@gmail.com", "bug_id": 656982, "tags": [], "creator": "mwu.code@gmail.com", "count": 3, "raw_text": "", "id": 5481184, "text": "Created attachment 533783\n3. Remove nsTPriorityQueue", "creation_time": "2011-05-19T21:04:00Z"}, {"time": "2011-05-19T21:23:50Z", "is_private": false, "attachment_id": null, "bug_id": 656982, "count": 4, "creator": "dholbert@mozilla.com", "tags": [], "text": "It's a shame to delete TestPriorityQueue.cpp -- could we migrate it to test the other heap impl instead?  Or would that be mostly-duplicated testing?", "creation_time": "2011-05-19T21:23:50Z", "raw_text": "It's a shame to delete TestPriorityQueue.cpp -- could we migrate it to test the other heap impl instead?  Or would that be mostly-duplicated testing?", "id": 5481254, "author": "dholbert@mozilla.com"}, {"attachment_id": null, "time": "2011-05-19T21:27:37Z", "is_private": false, "author": "mwu.code@gmail.com", "creator": "mwu.code@gmail.com", "count": 5, "tags": [], "bug_id": 656982, "id": 5481267, "raw_text": "(In reply to comment #4)\n> It's a shame to delete TestPriorityQueue.cpp -- could we migrate it to test\n> the other heap impl instead?  Or would that be mostly-duplicated testing?\n\nSure. TestPriorityQueue.cpp tests the code in a different way than the test in TestTArray.cpp.", "creation_time": "2011-05-19T21:27:37Z", "text": "(In reply to comment #4)\n> It's a shame to delete TestPriorityQueue.cpp -- could we migrate it to test\n> the other heap impl instead?  Or would that be mostly-duplicated testing?\n\nSure. TestPriorityQueue.cpp tests the code in a different way than the test in TestTArray.cpp."}, {"author": "dholbert@mozilla.com", "creation_time": "2011-05-19T21:34:16Z", "text": "Comment on attachment 533781\n2. Convert SMIL to nsTArray heaps\n\n>diff --git a/content/smil/nsSMILTimeContainer.h b/content/smil/nsSMILTimeContainer.h\n> \n>   struct MilestoneEntry\n[....]\n>     PRBool operator<(const MilestoneEntry& aOther) const\n>     {\n>-      return mMilestone < aOther.mMilestone;\n>+      return !(mMilestone < aOther.mMilestone);\n>     }\n\nCould you add a comment to the code so this is easier to understand? :)\n\ne.g.:\n// Since we're stored in a max-heap, the \"largest\" elements will pop out\n// first -- so we need to invert operator< in order for earlier milestones\n// to be judged as \"large\" and come out first (which is what we want).", "id": 5481276, "raw_text": ">diff --git a/content/smil/nsSMILTimeContainer.h b/content/smil/nsSMILTimeContainer.h\n> \n>   struct MilestoneEntry\n[....]\n>     PRBool operator<(const MilestoneEntry& aOther) const\n>     {\n>-      return mMilestone < aOther.mMilestone;\n>+      return !(mMilestone < aOther.mMilestone);\n>     }\n\nCould you add a comment to the code so this is easier to understand? :)\n\ne.g.:\n// Since we're stored in a max-heap, the \"largest\" elements will pop out\n// first -- so we need to invert operator< in order for earlier milestones\n// to be judged as \"large\" and come out first (which is what we want).", "count": 6, "tags": [], "creator": "dholbert@mozilla.com", "bug_id": 656982, "attachment_id": 533781, "is_private": false, "time": "2011-05-19T21:34:16Z"}, {"id": 5482408, "raw_text": "Review of attachment 533780:\n-----------------------------------------------------------------", "is_private": false, "creation_time": "2011-05-20T13:01:39Z", "text": "Comment on attachment 533780\n1. Use AppendElement instead of InsertSlotsAt\n\nReview of attachment 533780:\n-----------------------------------------------------------------", "creator": "roc@ocallahan.org", "tags": [], "time": "2011-05-20T13:01:39Z", "count": 7, "bug_id": 656982, "attachment_id": 533780, "author": "roc@ocallahan.org"}, {"tags": [], "count": 8, "creator": "roc@ocallahan.org", "bug_id": 656982, "id": 5482409, "raw_text": "Review of attachment 533783:\n-----------------------------------------------------------------", "creation_time": "2011-05-20T13:02:17Z", "text": "Comment on attachment 533783\n3. Remove nsTPriorityQueue\n\nReview of attachment 533783:\n-----------------------------------------------------------------", "author": "roc@ocallahan.org", "time": "2011-05-20T13:02:17Z", "is_private": false, "attachment_id": 533783}, {"bug_id": 656982, "tags": [], "count": 9, "creator": "mwu.code@gmail.com", "raw_text": "I ported the tests over to nsTArray but then realized they weren't getting compiled because they rely on libxul being off, and we don't support that anymore. I think I'm gonna see about these tests working again before trying to move things around.", "id": 5484604, "text": "I ported the tests over to nsTArray but then realized they weren't getting compiled because they rely on libxul being off, and we don't support that anymore. I think I'm gonna see about these tests working again before trying to move things around.", "creation_time": "2011-05-21T16:46:52Z", "author": "mwu.code@gmail.com", "time": "2011-05-21T16:46:52Z", "is_private": false, "attachment_id": null}, {"author": "continuation@gmail.com", "bug_id": 656982, "tags": [], "creator": "continuation@gmail.com", "count": 10, "raw_text": "Another two uses of this class have cropped up, in content/media/fmp4/ffmpeg/FFmpegH264Decoder.h and mobile/android/components/build/nsAndroidHistory.h.", "id": 9007084, "text": "Another two uses of this class have cropped up, in content/media/fmp4/ffmpeg/FFmpegH264Decoder.h and mobile/android/components/build/nsAndroidHistory.h.", "creation_time": "2014-07-02T20:37:17Z", "attachment_id": null, "time": "2014-07-02T20:37:17Z", "is_private": false}]}}}