{"bugs": {"702051": {"comments": [{"count": 0, "creator": "brian@briansmith.org", "is_private": false, "time": "2011-11-12T23:59:45Z", "bug_id": 702051, "tags": [], "text": "+++ This bug was initially created as a clone of Bug #670900 +++\n\n(In reply to Jonathan Kew (:jfkthame) from Bug 670900 comment 2)\n> Created attachment 545622 [diff] [details] [review]\n> patch, check for HTTP errors\n> \n> (In reply to comment #1)\n> > I assume we don't do a MIME type check here, which is why we treat it as\n> > font data?\n> \n> Yes, there's no MIME type checking for downloaded font data. (IIRC, there\n> isn't actually a standardized MIME type for OpenType/TrueType fonts yet.)\n\nAlthough there may not be standardize MIME types yet, there are only a few that could be reasonable and plenty are unreasonable. text/* would never be reasonable, for example.\n\nI propose:\n\n* Accept application/font-woff for WOFF only; when this MIME type is given, pass the font data *only* to the WOFF parser.\n\n* Accept application/x-font-<TYPE> for each TYPE in (woff, ttf, otf, and that new type of font we'll support that I forgot the name of). When such an application/x-font-<TYPE> MIME type is given, pass the font data to *only* the font parser for that type.\n\n* Otherwise, if X-Content-Type-Options: nosniff is given, then fail.\n\n* Otherwise, as an interim measure, if the content type isn't given, or it is application/octet-stream, then fall back to the current content-type sniffing mechanism.\n\n* Update the documentation on MDC to document the above change.\n\n* In particular, never accept text/* (except maybe text/plain if that is currently common) or other nonsense-for-fonts content types.\n\n* Help the standardization effort of application/font-TYPE> for non-WOFF types.\n\n* At some point in the not-too-far future, disable sniffing for fonts.\n\n\nSee also:\nhttp://code.google.com/p/chromium/issues/detail?id=70283#c3\nhttp://trac.webkit.org/changeset/76505\nBug 625358 (should be WONTFIXed).", "author": "brian@briansmith.org", "creation_time": "2011-11-12T23:59:45Z", "raw_text": "+++ This bug was initially created as a clone of Bug #670900 +++\n\n(In reply to Jonathan Kew (:jfkthame) from Bug 670900 comment 2)\n> Created attachment 545622 [diff] [details] [review]\n> patch, check for HTTP errors\n> \n> (In reply to comment #1)\n> > I assume we don't do a MIME type check here, which is why we treat it as\n> > font data?\n> \n> Yes, there's no MIME type checking for downloaded font data. (IIRC, there\n> isn't actually a standardized MIME type for OpenType/TrueType fonts yet.)\n\nAlthough there may not be standardize MIME types yet, there are only a few that could be reasonable and plenty are unreasonable. text/* would never be reasonable, for example.\n\nI propose:\n\n* Accept application/font-woff for WOFF only; when this MIME type is given, pass the font data *only* to the WOFF parser.\n\n* Accept application/x-font-<TYPE> for each TYPE in (woff, ttf, otf, and that new type of font we'll support that I forgot the name of). When such an application/x-font-<TYPE> MIME type is given, pass the font data to *only* the font parser for that type.\n\n* Otherwise, if X-Content-Type-Options: nosniff is given, then fail.\n\n* Otherwise, as an interim measure, if the content type isn't given, or it is application/octet-stream, then fall back to the current content-type sniffing mechanism.\n\n* Update the documentation on MDC to document the above change.\n\n* In particular, never accept text/* (except maybe text/plain if that is currently common) or other nonsense-for-fonts content types.\n\n* Help the standardization effort of application/font-TYPE> for non-WOFF types.\n\n* At some point in the not-too-far future, disable sniffing for fonts.\n\n\nSee also:\nhttp://code.google.com/p/chromium/issues/detail?id=70283#c3\nhttp://trac.webkit.org/changeset/76505\nBug 625358 (should be WONTFIXed).", "attachment_id": null, "id": 5844992}]}}, "comments": {}}