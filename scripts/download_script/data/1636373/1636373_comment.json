{"bugs": {"1636373": {"comments": [{"count": 0, "is_private": false, "raw_text": "Right now the event is emitted when all execution contexts for a window have been removed. But that is not correct. Instead it should only be emitted when all contexts of a tab target get removed due to a navigation in the top level browsing context, or when the tab gets closed.\n\nAlso when the Runtime gets disabled the event has to be fired.", "creation_time": "2020-05-08T06:47:36Z", "time": "2020-05-08T06:47:36Z", "text": "Right now the event is emitted when all execution contexts for a window have been removed. But that is not correct. Instead it should only be emitted when all contexts of a tab target get removed due to a navigation in the top level browsing context, or when the tab gets closed.\n\nAlso when the Runtime gets disabled the event has to be fired.", "author": "hskupin@gmail.com", "tags": [], "creator": "hskupin@gmail.com", "attachment_id": null, "id": 14804191, "bug_id": 1636373}, {"id": 14872881, "bug_id": 1636373, "author": "hskupin@gmail.com", "tags": [], "creator": "hskupin@gmail.com", "attachment_id": null, "is_private": false, "raw_text": "This broken behavior on this bug actually blocks my work on bug 1637640. Given that we emit `Runtime.executionContextsCleared` also for frames Puppeteer looses certain cached execution contexts, and the returned Promise from `executionContext()` in `DOMWorld.js` is hanging.", "creation_time": "2020-06-09T20:29:54Z", "text": "This broken behavior on this bug actually blocks my work on bug 1637640. Given that we emit `Runtime.executionContextsCleared` also for frames Puppeteer looses certain cached execution contexts, and the returned Promise from `executionContext()` in `DOMWorld.js` is hanging.", "time": "2020-06-09T20:29:54Z", "count": 1}, {"tags": [], "author": "hskupin@gmail.com", "attachment_id": null, "creation_time": "2020-06-10T07:24:50Z", "text": "I moved out the part for Runtime.disable into bug 1644661.", "id": 14873514, "bug_id": 1636373, "creator": "hskupin@gmail.com", "is_private": false, "time": "2020-06-10T07:24:50Z", "raw_text": "I moved out the part for Runtime.disable into bug 1644661.", "count": 2}, {"creator": "hskupin@gmail.com", "attachment_id": 9156253, "author": "hskupin@gmail.com", "tags": [], "bug_id": 1636373, "id": 14878499, "count": 3, "raw_text": "\nThis also fixes a hang in Puppeteer's DOMWorld.js when resolving\nthe current executionContext promise. With the extra event all\nthe Puppeteer internal contexts for the tab target have been destroyed.", "text": "Created attachment 9156253\nBug 1636373 - [remote] Only emit Runtime.executionContextsCleared event for top-level execution contexts.\n\n\nThis also fixes a hang in Puppeteer's DOMWorld.js when resolving\nthe current executionContext promise. With the extra event all\nthe Puppeteer internal contexts for the tab target have been destroyed.", "creation_time": "2020-06-12T12:36:58Z", "time": "2020-06-12T12:36:58Z", "is_private": false}, {"tags": [], "author": "pulsebot@bots.tld", "attachment_id": null, "text": "Pushed by hskupin@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/5b83370e0913\n[remote] Only emit Runtime.executionContextsCleared event for top-level execution contexts. r=remote-protocol-reviewers,maja_zf", "creation_time": "2020-06-22T06:22:51Z", "id": 14892644, "bug_id": 1636373, "creator": "pulsebot@bots.tld", "is_private": false, "time": "2020-06-22T06:22:51Z", "raw_text": "Pushed by hskupin@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/5b83370e0913\n[remote] Only emit Runtime.executionContextsCleared event for top-level execution contexts. r=remote-protocol-reviewers,maja_zf", "count": 4}, {"attachment_id": null, "tags": ["bugherder"], "author": "ncsoregi@mozilla.com", "creation_time": "2020-06-22T15:50:28Z", "text": "https://hg.mozilla.org/mozilla-central/rev/5b83370e0913", "creator": "ncsoregi@mozilla.com", "bug_id": 1636373, "id": 14894333, "count": 5, "time": "2020-06-22T15:50:28Z", "raw_text": "https://hg.mozilla.org/mozilla-central/rev/5b83370e0913", "is_private": false}]}}, "comments": {}}