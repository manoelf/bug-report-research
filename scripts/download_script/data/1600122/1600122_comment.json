{"comments": {}, "bugs": {"1600122": {"comments": [{"creator": "oliver@redhat.com", "raw_text": "User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101 Firefox/68.0\n\nSteps to reproduce:\n\nWe are trying to roll out an extension to a few thousand users on Firefox 68.2 ESR (Linux). I would like to use the policies.json way and the option \"ExtensionSettings\".\n\nThe extension gets installed, but a user is not able to disable it. Every time firefox is installed, the Addon is enabled again.\n\n$ cat /usr/lib64/firefox/distribution/policies.json\n{\n\"policies\": {\n  \"ExtensionSettings\": {\n    \"ADDONNAME\":{\n    \"installation_mode\": \"normal_installed\",\n      \"install_url\": \"URL to xpi\"\n     }\n    }\n  }\n}\n\n\nActual results:\n\nWhen using the /usr/lib64/firefox/distribution/policies.json file above, the user is no longer able to disable the Addon, however [0] states that this should be possible. Every time you restart Firefox, the Addon is enabled again.\n\n[0] https://github.com/mozilla/policy-templates#extensionupdate\n\n\nExpected results:\n\nThe Addon should stay disabled if the user disabled it in the Addon settings", "attachment_id": null, "is_private": false, "author": "oliver@redhat.com", "text": "User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101 Firefox/68.0\n\nSteps to reproduce:\n\nWe are trying to roll out an extension to a few thousand users on Firefox 68.2 ESR (Linux). I would like to use the policies.json way and the option \"ExtensionSettings\".\n\nThe extension gets installed, but a user is not able to disable it. Every time firefox is installed, the Addon is enabled again.\n\n$ cat /usr/lib64/firefox/distribution/policies.json\n{\n\"policies\": {\n  \"ExtensionSettings\": {\n    \"ADDONNAME\":{\n    \"installation_mode\": \"normal_installed\",\n      \"install_url\": \"URL to xpi\"\n     }\n    }\n  }\n}\n\n\nActual results:\n\nWhen using the /usr/lib64/firefox/distribution/policies.json file above, the user is no longer able to disable the Addon, however [0] states that this should be possible. Every time you restart Firefox, the Addon is enabled again.\n\n[0] https://github.com/mozilla/policy-templates#extensionupdate\n\n\nExpected results:\n\nThe Addon should stay disabled if the user disabled it in the Addon settings", "bug_id": 1600122, "time": "2019-11-28T17:26:04Z", "id": 14516410, "creation_time": "2019-11-28T17:26:04Z", "count": 0, "tags": []}, {"attachment_id": null, "raw_text": "quick reproducer with the example from [0]\n\n```\ncat /usr/lib64/firefox/distribution/policies.json\n{\n  \"policies\": {\n    \"ExtensionSettings\": {\n      \"uBlock0@raymondhill.net\": {\n        \"installation_mode\": \"normal_installed\",\n        \"install_url\": \"https://addons.mozilla.org/firefox/downloads/latest/ublock-origin/latest.xpi\"\n      }\n    }\n  }\n}\n```\nadding this to /usr/lib64/firefox/distribution/policies.json installs uBlock, and if the user is disabling the Addon, iti s enabled aain after restart of firefox\n\n[0] https://github.com/mozilla/policy-templates#extensionupdate", "id": 14517229, "creation_time": "2019-11-29T09:28:26Z", "creator": "oliver@redhat.com", "tags": [], "bug_id": 1600122, "time": "2019-11-29T09:28:26Z", "count": 1, "author": "oliver@redhat.com", "is_private": false, "text": "quick reproducer with the example from [0]\n\n```\ncat /usr/lib64/firefox/distribution/policies.json\n{\n  \"policies\": {\n    \"ExtensionSettings\": {\n      \"uBlock0@raymondhill.net\": {\n        \"installation_mode\": \"normal_installed\",\n        \"install_url\": \"https://addons.mozilla.org/firefox/downloads/latest/ublock-origin/latest.xpi\"\n      }\n    }\n  }\n}\n```\nadding this to /usr/lib64/firefox/distribution/policies.json installs uBlock, and if the user is disabling the Addon, iti s enabled aain after restart of firefox\n\n[0] https://github.com/mozilla/policy-templates#extensionupdate"}, {"attachment_id": null, "raw_text": "double-checked, and the behaviour is the same on mac OS 10.15.1 with Firefox 68.2.0ESR as on Linux", "id": 14517260, "creation_time": "2019-11-29T09:58:01Z", "creator": "oliver@redhat.com", "tags": [], "bug_id": 1600122, "time": "2019-11-29T09:58:01Z", "count": 2, "author": "oliver@redhat.com", "is_private": false, "text": "double-checked, and the behaviour is the same on mac OS 10.15.1 with Firefox 68.2.0ESR as on Linux"}, {"creator": "mozilla@kaply.com", "raw_text": "", "attachment_id": 9113323, "text": "Created attachment 9113323\nBug 1600122 - Use the complete list of addons for determing policy. r?mixedpuppy", "is_private": false, "author": "mozilla@kaply.com", "time": "2019-12-03T21:13:05Z", "bug_id": 1600122, "creation_time": "2019-12-03T21:13:05Z", "id": 14525202, "count": 3, "tags": []}, {"creation_time": "2019-12-04T14:04:10Z", "id": 14526676, "tags": [], "count": 4, "attachment_id": null, "raw_text": "Pushed by mozilla@kaply.com:\nhttps://hg.mozilla.org/integration/autoland/rev/d8b0a5b0a5af\nUse the complete list of addons for determing policy. r=mixedpuppy", "creator": "pulsebot@bots.tld", "time": "2019-12-04T14:04:10Z", "bug_id": 1600122, "text": "Pushed by mozilla@kaply.com:\nhttps://hg.mozilla.org/integration/autoland/rev/d8b0a5b0a5af\nUse the complete list of addons for determing policy. r=mixedpuppy", "author": "pulsebot@bots.tld", "is_private": false}, {"creator": "apavel@mozilla.com", "raw_text": "https://hg.mozilla.org/mozilla-central/rev/d8b0a5b0a5af", "attachment_id": null, "text": "https://hg.mozilla.org/mozilla-central/rev/d8b0a5b0a5af", "is_private": false, "author": "apavel@mozilla.com", "bug_id": 1600122, "time": "2019-12-05T04:36:13Z", "id": 14528462, "creation_time": "2019-12-05T04:36:13Z", "count": 5, "tags": ["bugherder"]}, {"count": 6, "tags": [], "creation_time": "2019-12-05T08:41:41Z", "id": 14528706, "is_private": false, "author": "oliver@redhat.com", "text": "Thanks for the fix. Any chance this will be backported to Firefox 68 ESR?", "time": "2019-12-05T08:41:41Z", "bug_id": 1600122, "creator": "oliver@redhat.com", "raw_text": "Thanks for the fix. Any chance this will be backported to Firefox 68 ESR?", "attachment_id": null}, {"creator": "mozilla@kaply.com", "raw_text": "> Thanks for the fix. Any chance this will be backported to Firefox 68 ESR?\n\nYep. Once it's baked a few days, I'll request uplift.", "attachment_id": null, "text": "> Thanks for the fix. Any chance this will be backported to Firefox 68 ESR?\n\nYep. Once it's baked a few days, I'll request uplift.", "author": "mozilla@kaply.com", "is_private": false, "time": "2019-12-05T15:06:05Z", "bug_id": 1600122, "creation_time": "2019-12-05T15:06:05Z", "id": 14529319, "count": 7, "tags": []}, {"id": 14546155, "creation_time": "2019-12-13T21:04:48Z", "count": 8, "tags": [], "creator": "mozilla@kaply.com", "raw_text": "### Beta/Release Uplift Approval Request\n* **User impact if declined**: Extensions can't be disabled by users if they were installed via policy.\n* **Is this code covered by automated tests?**: Yes\n* **Has the fix been verified in Nightly?**: No\n* **Needs manual test from QE?**: Yes\n* **If yes, steps to reproduce**: Outlined in bug\n* **List of other uplifts needed**: None\n* **Risk to taking this patch**: Low\n* **Why is the change risky/not risky? (and alternatives if risky)**: Policy only, verified doesn't break existing automated tests\n* **String changes made/needed**: \n\n### ESR Uplift Approval Request\n* **If this is not a sec:{high,crit} bug, please state case for ESR consideration**: Policy related\n* **User impact if declined**: Extensions can't be disabled by users if they were installed via policy.\n* **Fix Landed on Version**: 73\n* **Risk to taking this patch**: Low\n* **Why is the change risky/not risky? (and alternatives if risky)**: Policy only, verified doesn't break existing automated tests\n* **String or UUID changes made by this patch**:", "attachment_id": 9113323, "text": "Comment on attachment 9113323\nBug 1600122 - Use the complete list of addons for determing policy. r?mixedpuppy\n\n### Beta/Release Uplift Approval Request\n* **User impact if declined**: Extensions can't be disabled by users if they were installed via policy.\n* **Is this code covered by automated tests?**: Yes\n* **Has the fix been verified in Nightly?**: No\n* **Needs manual test from QE?**: Yes\n* **If yes, steps to reproduce**: Outlined in bug\n* **List of other uplifts needed**: None\n* **Risk to taking this patch**: Low\n* **Why is the change risky/not risky? (and alternatives if risky)**: Policy only, verified doesn't break existing automated tests\n* **String changes made/needed**: \n\n### ESR Uplift Approval Request\n* **If this is not a sec:{high,crit} bug, please state case for ESR consideration**: Policy related\n* **User impact if declined**: Extensions can't be disabled by users if they were installed via policy.\n* **Fix Landed on Version**: 73\n* **Risk to taking this patch**: Low\n* **Why is the change risky/not risky? (and alternatives if risky)**: Policy only, verified doesn't break existing automated tests\n* **String or UUID changes made by this patch**:", "is_private": false, "author": "mozilla@kaply.com", "bug_id": 1600122, "time": "2019-12-13T21:04:48Z"}, {"id": 14549389, "creation_time": "2019-12-16T12:30:26Z", "count": 9, "tags": [], "creator": "jcristau@mozilla.com", "raw_text": "policies fix, approved for 72.0b8", "attachment_id": 9113323, "text": "Comment on attachment 9113323\nBug 1600122 - Use the complete list of addons for determing policy. r?mixedpuppy\n\npolicies fix, approved for 72.0b8", "author": "jcristau@mozilla.com", "is_private": false, "time": "2019-12-16T12:30:26Z", "bug_id": 1600122}, {"attachment_id": null, "id": 14549482, "creation_time": "2019-12-16T13:27:28Z", "creator": "oliver@redhat.com", "raw_text": "Hey Mike,\n\nany news on the uplift for fixing it in RHEL 68ESR? I would need the fix to go forward with my Add-on distribution project.\n\nThanks\nOliver", "count": 10, "time": "2019-12-16T13:27:28Z", "bug_id": 1600122, "tags": [], "text": "Hey Mike,\n\nany news on the uplift for fixing it in RHEL 68ESR? I would need the fix to go forward with my Add-on distribution project.\n\nThanks\nOliver", "author": "oliver@redhat.com", "is_private": false}, {"id": 14550069, "creation_time": "2019-12-16T17:32:05Z", "count": 11, "tags": ["bugherder", "uplift"], "attachment_id": null, "creator": "nerli@mozilla.com", "raw_text": "https://hg.mozilla.org/releases/mozilla-beta/rev/0c159faaff19", "bug_id": 1600122, "time": "2019-12-16T17:32:05Z", "is_private": false, "author": "nerli@mozilla.com", "text": "https://hg.mozilla.org/releases/mozilla-beta/rev/0c159faaff19"}, {"creation_time": "2019-12-16T21:01:48Z", "id": 14550562, "count": 12, "tags": [], "creator": "mozilla@kaply.com", "raw_text": "> any news on the uplift for fixing it in RHEL 68ESR? I would need the fix to go forward with my Add-on distribution project.\n\nI've asked for approval for getting this into the ESR.", "attachment_id": null, "text": "> any news on the uplift for fixing it in RHEL 68ESR? I would need the fix to go forward with my Add-on distribution project.\n\nI've asked for approval for getting this into the ESR.", "author": "mozilla@kaply.com", "is_private": false, "time": "2019-12-16T21:01:48Z", "bug_id": 1600122}, {"attachment_id": null, "creation_time": "2019-12-17T16:01:33Z", "id": 14552079, "creator": "simona.marcu@softvision.com", "raw_text": "Verified as fixed on the latest Nightly 73.0a1 - the extension installed via policy remains disabled after restarting Firefox. Verified on Mac OS X 10.15, Ubuntu 18.04 and Windows 10 x64.", "bug_id": 1600122, "time": "2019-12-17T16:01:33Z", "count": 13, "tags": [], "is_private": false, "author": "simona.marcu@softvision.com", "text": "Verified as fixed on the latest Nightly 73.0a1 - the extension installed via policy remains disabled after restarting Firefox. Verified on Mac OS X 10.15, Ubuntu 18.04 and Windows 10 x64."}, {"count": 14, "tags": [], "creation_time": "2019-12-18T12:41:39Z", "id": 14554130, "time": "2019-12-18T12:41:39Z", "bug_id": 1600122, "text": "Verified as fixed on Firefox 72 beta 8 on Windows 10, Ubuntu 18.04 and Mac OS X 10.15.", "author": "simona.marcu@softvision.com", "is_private": false, "attachment_id": null, "creator": "simona.marcu@softvision.com", "raw_text": "Verified as fixed on Firefox 72 beta 8 on Windows 10, Ubuntu 18.04 and Mac OS X 10.15."}, {"id": 14559255, "creation_time": "2019-12-20T19:44:03Z", "tags": [], "count": 15, "raw_text": "Enterprise policy update, approved for 68.4esr.", "creator": "ryanvm@gmail.com", "attachment_id": 9113323, "text": "Comment on attachment 9113323\nBug 1600122 - Use the complete list of addons for determing policy. r?mixedpuppy\n\nEnterprise policy update, approved for 68.4esr.", "is_private": false, "author": "ryanvm@gmail.com", "time": "2019-12-20T19:44:03Z", "bug_id": 1600122}, {"is_private": false, "author": "ryanvm@gmail.com", "text": "https://hg.mozilla.org/releases/mozilla-esr68/rev/1c6a95c0a0c7", "bug_id": 1600122, "time": "2019-12-20T19:55:08Z", "count": 16, "tags": ["bugherder", "uplift"], "creation_time": "2019-12-20T19:55:08Z", "creator": "ryanvm@gmail.com", "id": 14559292, "raw_text": "https://hg.mozilla.org/releases/mozilla-esr68/rev/1c6a95c0a0c7", "attachment_id": null}, {"count": 17, "tags": [], "id": 14562536, "creation_time": "2019-12-23T14:48:59Z", "is_private": false, "author": "simona.marcu@softvision.com", "text": "Verified as fixed also on Firefox 64.4.0 esr (used a build from treeherder) on Windows 10 x64, Ubuntu 18.04 and Mac OS X 10.15.", "bug_id": 1600122, "time": "2019-12-23T14:48:59Z", "creator": "simona.marcu@softvision.com", "raw_text": "Verified as fixed also on Firefox 64.4.0 esr (used a build from treeherder) on Windows 10 x64, Ubuntu 18.04 and Mac OS X 10.15.", "attachment_id": null}]}}}