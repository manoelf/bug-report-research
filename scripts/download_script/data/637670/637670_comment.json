{"bugs": {"637670": {"comments": [{"raw_text": "The Image Properties dialog allows to set the \"moz-do-not-send\" attribute easily by unchecking the \"Attach this image to the message\" checkbox. This doesn't make sense for URLs which are not remote or not publicly accessible otherwise, given that a \"file://\" or \"mailbox://\" reference isn't valid outside the scope of the local machine, and \"imap://\" references usually aren't accessible by anybody else. The box may be unchecked accidentally or by thinking it applies that the image will be attached as \"real\" attachment rather than made part of the message body.\n\nThe proposal is to have the box checked by default but disabled unless a remote and public source (ftp, http, https, others?) is provided in the \"Location\" field. It should be possible to nevertheless set \"moz-do-not-send\" in the advanced properties. Also, if the \"moz-do-not-send\" attribute is set already either way, or mail.compose.dont_attach_source_of_local_network_links is true, the checkbox shouldn't be disabled as the user appears to be knowing what he or she is doing.\n\nThus, by default, images from files or other messages are marked to be attached and the checkbox disabled to prevent accidental sending of invalid image SRCs.", "bug_id": 637670, "count": 0, "time": "2011-03-01T16:22:35Z", "is_private": false, "tags": [], "creation_time": "2011-03-01T16:22:35Z", "id": 5311666, "attachment_id": null, "text": "The Image Properties dialog allows to set the \"moz-do-not-send\" attribute easily by unchecking the \"Attach this image to the message\" checkbox. This doesn't make sense for URLs which are not remote or not publicly accessible otherwise, given that a \"file://\" or \"mailbox://\" reference isn't valid outside the scope of the local machine, and \"imap://\" references usually aren't accessible by anybody else. The box may be unchecked accidentally or by thinking it applies that the image will be attached as \"real\" attachment rather than made part of the message body.\n\nThe proposal is to have the box checked by default but disabled unless a remote and public source (ftp, http, https, others?) is provided in the \"Location\" field. It should be possible to nevertheless set \"moz-do-not-send\" in the advanced properties. Also, if the \"moz-do-not-send\" attribute is set already either way, or mail.compose.dont_attach_source_of_local_network_links is true, the checkbox shouldn't be disabled as the user appears to be knowing what he or she is doing.\n\nThus, by default, images from files or other messages are marked to be attached and the checkbox disabled to prevent accidental sending of invalid image SRCs.", "creator": "rsx11m.pub@gmail.com", "author": "rsx11m.pub@gmail.com"}, {"creation_time": "2012-03-02T19:25:56Z", "author": "cedric@gn.apc.org", "text": "+1.  The way a colleague and then myself construed \"Attach this image to the message\" was indeed that the local file would become an attachment (ie MIME content-disposition of \"attachment\" rather than \"inline\"), so the natural tendency is to untick that box.  And indeed the image still appears within the compose window, so it's not unless you check the Sent folder that you realise anything is wrong, and it's initially hard to see why such an option exists at all.\n\nThe implementation could happen in slightly different ways:\n(a) When the Image Location box loses focus, if the contents start \"file://\" (and the other conditions in the bug descriptions are met) the \"Attach this image\" tickbox is ticked and greyed out;\n(b) When the Image Location box loses focus, if the contents start \"file://\" (and the other conditions in the bug descriptions are met) the \"Attach this image\" tickbox is ticked and made invisible;\n(c) If the Choose File button is used, and the filename isn't clearly on a shared drive (containing a string like smb4k etc), the \"Attach this image\" tickbox is ticked and greyed out;\n(d) If the OK button is clicked and the Image Location references file:// or imap://, the actual image attach routine silently decides to include the image anyway.\n\nOf these, I favour (b).", "creator": "cedric@gn.apc.org", "attachment_id": null, "id": 6110214, "count": 1, "bug_id": 637670, "raw_text": "+1.  The way a colleague and then myself construed \"Attach this image to the message\" was indeed that the local file would become an attachment (ie MIME content-disposition of \"attachment\" rather than \"inline\"), so the natural tendency is to untick that box.  And indeed the image still appears within the compose window, so it's not unless you check the Sent folder that you realise anything is wrong, and it's initially hard to see why such an option exists at all.\n\nThe implementation could happen in slightly different ways:\n(a) When the Image Location box loses focus, if the contents start \"file://\" (and the other conditions in the bug descriptions are met) the \"Attach this image\" tickbox is ticked and greyed out;\n(b) When the Image Location box loses focus, if the contents start \"file://\" (and the other conditions in the bug descriptions are met) the \"Attach this image\" tickbox is ticked and made invisible;\n(c) If the Choose File button is used, and the filename isn't clearly on a shared drive (containing a string like smb4k etc), the \"Attach this image\" tickbox is ticked and greyed out;\n(d) If the OK button is clicked and the Image Location references file:// or imap://, the actual image attach routine silently decides to include the image anyway.\n\nOf these, I favour (b).", "tags": [], "is_private": false, "time": "2012-03-02T19:25:56Z"}, {"time": "2012-03-02T19:28:59Z", "bug_id": 637670, "count": 2, "creator": "cedric@gn.apc.org", "author": "cedric@gn.apc.org", "tags": [], "is_private": false, "raw_text": "Also meant to cross-reference to Bug 536949 and Bug 561058", "text": "Also meant to cross-reference to Bug 536949 and Bug 561058", "id": 6110221, "attachment_id": null, "creation_time": "2012-03-02T19:28:59Z"}]}}, "comments": {}}