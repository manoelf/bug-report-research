{"bugs": {"693286": {"comments": [{"creator": "neil@httl.net", "author": "neil@httl.net", "text": "(From update of attachment 557330)\n>+  dnl On Windows, OSX and OS2, we want to link all our binaries against mozutils\n>+  MOZ_UTILS_LDFLAGS='$(call EXPAND_LIBNAME_PATH,mozutils,$(LIBXUL_DIST)/lib)'\nSo, one of my Windows jemalloc builds has a problem. We set these flags that use two variables only known to the mozilla-central build system.\n\n>     if grep -q '__imp__\\{0,1\\}free' crtdll.obj; then\nBut my crtdll.obj doesn not contain __imp__free...\n>+      MOZ_UTILS_LDFLAGS='-LIBPATH:$(DIST)/lib -NODEFAULTLIB:msvcrt -NODEFAULTLIB:msvcrtd -NODEFAULTLIB:msvcprt -NODEFAULTLIB:msvcprtd -DEFAULTLIB:mozcrt'\nSo the flags don't get updated,\n\n>     dnl Also pass this to NSPR/NSS\n>+    DLLFLAGS=\"$DLLFLAGS $MOZ_UTILS_LDFLAGS\"\nAnd broken flags get passed to NSPR/NSS...", "time": "2011-10-10T12:39:44Z", "attachment_id": null, "raw_text": "(From update of attachment 557330)\n>+  dnl On Windows, OSX and OS2, we want to link all our binaries against mozutils\n>+  MOZ_UTILS_LDFLAGS='$(call EXPAND_LIBNAME_PATH,mozutils,$(LIBXUL_DIST)/lib)'\nSo, one of my Windows jemalloc builds has a problem. We set these flags that use two variables only known to the mozilla-central build system.\n\n>     if grep -q '__imp__\\{0,1\\}free' crtdll.obj; then\nBut my crtdll.obj doesn not contain __imp__free...\n>+      MOZ_UTILS_LDFLAGS='-LIBPATH:$(DIST)/lib -NODEFAULTLIB:msvcrt -NODEFAULTLIB:msvcrtd -NODEFAULTLIB:msvcprt -NODEFAULTLIB:msvcprtd -DEFAULTLIB:mozcrt'\nSo the flags don't get updated,\n\n>     dnl Also pass this to NSPR/NSS\n>+    DLLFLAGS=\"$DLLFLAGS $MOZ_UTILS_LDFLAGS\"\nAnd broken flags get passed to NSPR/NSS...", "creation_time": "2011-10-10T12:39:44Z", "bug_id": 693286, "is_private": false, "count": 0, "tags": [], "id": 5771195}]}}, "comments": {}}