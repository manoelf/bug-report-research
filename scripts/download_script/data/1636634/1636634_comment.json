{"comments": {}, "bugs": {"1636634": {"comments": [{"creation_time": "2020-05-09T00:55:54Z", "text": "Reproducible in Firefox Developer Edition 77.0b3 (64-bit) version. \n\n**STR**\n1. Ensure that `devtools.responsive.reloadConditions.touchSimulation` is true and `devtools.responsive.browserUI.enabled` is false.\n2. Open RDM.\n3. Try closing RDM.\n\n**Expected**\nRDM closes without issue.\n\n**Actual**\nRDM doesn't close. \n\nThe following error is reported in the Browser Console:\n\n```\nException when calling onAvailable handler this.getViewportBrowser().reload is not a function TypeError: \"this.getViewportBrowser().reload is not a function\"\n    restoreActorState resource://devtools/client/responsive/ui.js:945\n    onTargetAvailable resource://devtools/client/responsive/ui.js:1208\n    promises resource://devtools/shared/resources/target-list.js:527\n    watchTargets resource://devtools/shared/resources/target-list.js:522\n    connectToServer resource://devtools/client/responsive/ui.js:476\n    init resource://devtools/client/responsive/ui.js:224\n    ResponsiveUI resource://devtools/client/responsive/ui.js:115\n    openIfNeeded resource://devtools/client/responsive/manager.js:129\n    toggle resource://devtools/client/responsive/manager.js:92\n    onKeyShortcut resource://devtools/client/framework/devtools-browser.js:342\n    onKey resource:///modules/DevToolsStartup.jsm:876\n    xulKey resource:///modules/DevToolsStartup.jsm:798\n    createKey resource:///modules/DevToolsStartup.jsm:910\n    attachKeys resource:///modules/DevToolsStartup.jsm:798\n    hookKeyShortcuts resource:///modules/DevToolsStartup.jsm:777\n    onBeforeCreated resource:///modules/DevToolsStartup.jsm:591\n    aEventName resource:///modules/CustomizableUI.jsm:2862\n    buildWidget resource:///modules/CustomizableUI.jsm:1698\n    getWidgetNode resource:///modules/CustomizableUI.jsm:1165\n    buildArea resource:///modules/CustomizableUI.jsm:975\n    registerToolbarNode resource:///modules/CustomizableUI.jsm:889\n    registerToolbarNode resource:///modules/CustomizableUI.jsm:3599\n    onDOMContentLoaded chrome://browser/content/browser.js:1794\n    EventListener.handleEvent* chrome://browser/content/browser.xhtml:135\ntarget-list.js:536:19\n    promises resource://devtools/shared/resources/target-list.js:536\n    watchTargets resource://devtools/shared/resources/target-list.js:522\n    connectToServer resource://devtools/client/responsive/ui.js:476\n    init resource://devtools/client/responsive/ui.js:224\n    ResponsiveUI resource://devtools/client/responsive/ui.js:115\n    openIfNeeded resource://devtools/client/responsive/manager.js:129\n    toggle resource://devtools/client/responsive/manager.js:92\n    onKeyShortcut resource://devtools/client/framework/devtools-browser.js:342\n    onKey resource:///modules/DevToolsStartup.jsm:876\n    xulKey resource:///modules/DevToolsStartup.jsm:798\n    (Async: EventListener.handleEvent)\n    createKey resource:///modules/DevToolsStartup.jsm:910\n    attachKeys resource:///modules/DevToolsStartup.jsm:798\n    hookKeyShortcuts resource:///modules/DevToolsStartup.jsm:777\n    onBeforeCreated resource:///modules/DevToolsStartup.jsm:591\n    aEventName resource:///modules/CustomizableUI.jsm:2862\n    buildWidget resource:///modules/CustomizableUI.jsm:1698\n    getWidgetNode resource:///modules/CustomizableUI.jsm:1165\n    buildArea resource:///modules/CustomizableUI.jsm:975\n    registerToolbarNode resource:///modules/CustomizableUI.jsm:889\n    registerToolbarNode resource:///modules/CustomizableUI.jsm:3599\n    onDOMContentLoaded chrome://browser/content/browser.js:1794\n    <anonymous> chrome://browser/content/browser.xhtml:135\n```", "author": "mtigley@mozilla.com", "tags": [], "attachment_id": null, "count": 0, "is_private": false, "raw_text": "Reproducible in Firefox Developer Edition 77.0b3 (64-bit) version. \n\n**STR**\n1. Ensure that `devtools.responsive.reloadConditions.touchSimulation` is true and `devtools.responsive.browserUI.enabled` is false.\n2. Open RDM.\n3. Try closing RDM.\n\n**Expected**\nRDM closes without issue.\n\n**Actual**\nRDM doesn't close. \n\nThe following error is reported in the Browser Console:\n\n```\nException when calling onAvailable handler this.getViewportBrowser().reload is not a function TypeError: \"this.getViewportBrowser().reload is not a function\"\n    restoreActorState resource://devtools/client/responsive/ui.js:945\n    onTargetAvailable resource://devtools/client/responsive/ui.js:1208\n    promises resource://devtools/shared/resources/target-list.js:527\n    watchTargets resource://devtools/shared/resources/target-list.js:522\n    connectToServer resource://devtools/client/responsive/ui.js:476\n    init resource://devtools/client/responsive/ui.js:224\n    ResponsiveUI resource://devtools/client/responsive/ui.js:115\n    openIfNeeded resource://devtools/client/responsive/manager.js:129\n    toggle resource://devtools/client/responsive/manager.js:92\n    onKeyShortcut resource://devtools/client/framework/devtools-browser.js:342\n    onKey resource:///modules/DevToolsStartup.jsm:876\n    xulKey resource:///modules/DevToolsStartup.jsm:798\n    createKey resource:///modules/DevToolsStartup.jsm:910\n    attachKeys resource:///modules/DevToolsStartup.jsm:798\n    hookKeyShortcuts resource:///modules/DevToolsStartup.jsm:777\n    onBeforeCreated resource:///modules/DevToolsStartup.jsm:591\n    aEventName resource:///modules/CustomizableUI.jsm:2862\n    buildWidget resource:///modules/CustomizableUI.jsm:1698\n    getWidgetNode resource:///modules/CustomizableUI.jsm:1165\n    buildArea resource:///modules/CustomizableUI.jsm:975\n    registerToolbarNode resource:///modules/CustomizableUI.jsm:889\n    registerToolbarNode resource:///modules/CustomizableUI.jsm:3599\n    onDOMContentLoaded chrome://browser/content/browser.js:1794\n    EventListener.handleEvent* chrome://browser/content/browser.xhtml:135\ntarget-list.js:536:19\n    promises resource://devtools/shared/resources/target-list.js:536\n    watchTargets resource://devtools/shared/resources/target-list.js:522\n    connectToServer resource://devtools/client/responsive/ui.js:476\n    init resource://devtools/client/responsive/ui.js:224\n    ResponsiveUI resource://devtools/client/responsive/ui.js:115\n    openIfNeeded resource://devtools/client/responsive/manager.js:129\n    toggle resource://devtools/client/responsive/manager.js:92\n    onKeyShortcut resource://devtools/client/framework/devtools-browser.js:342\n    onKey resource:///modules/DevToolsStartup.jsm:876\n    xulKey resource:///modules/DevToolsStartup.jsm:798\n    (Async: EventListener.handleEvent)\n    createKey resource:///modules/DevToolsStartup.jsm:910\n    attachKeys resource:///modules/DevToolsStartup.jsm:798\n    hookKeyShortcuts resource:///modules/DevToolsStartup.jsm:777\n    onBeforeCreated resource:///modules/DevToolsStartup.jsm:591\n    aEventName resource:///modules/CustomizableUI.jsm:2862\n    buildWidget resource:///modules/CustomizableUI.jsm:1698\n    getWidgetNode resource:///modules/CustomizableUI.jsm:1165\n    buildArea resource:///modules/CustomizableUI.jsm:975\n    registerToolbarNode resource:///modules/CustomizableUI.jsm:889\n    registerToolbarNode resource:///modules/CustomizableUI.jsm:3599\n    onDOMContentLoaded chrome://browser/content/browser.js:1794\n    <anonymous> chrome://browser/content/browser.xhtml:135\n```", "time": "2020-05-09T00:55:54Z", "creator": "mtigley@mozilla.com", "id": 14805859, "bug_id": 1636634}, {"is_private": false, "time": "2020-05-09T04:19:58Z", "creation_time": "2020-05-09T04:19:58Z", "text": "Created attachment 9146985\nBug 1636634 - Use BrowsingContextTargetActor's reload method to reload the current tab in RDM", "raw_text": "", "count": 1, "id": 14805950, "bug_id": 1636634, "tags": [], "author": "mtigley@mozilla.com", "attachment_id": 9146985, "creator": "mtigley@mozilla.com"}, {"count": 2, "is_private": false, "raw_text": "Using mozregression, I narrowed the regression window to https://hg.mozilla.org/integration/autoland/pushloghtml?fromchange=3220c674960139d31143ef7211bf4871f82aa143&tochange=dcbfa257190eb637bda73e6dd111eb6433ddd21f", "text": "Using mozregression, I narrowed the regression window to https://hg.mozilla.org/integration/autoland/pushloghtml?fromchange=3220c674960139d31143ef7211bf4871f82aa143&tochange=dcbfa257190eb637bda73e6dd111eb6433ddd21f", "creation_time": "2020-05-09T04:43:35Z", "time": "2020-05-09T04:43:35Z", "author": "mtigley@mozilla.com", "tags": [], "creator": "mtigley@mozilla.com", "attachment_id": null, "id": 14805956, "bug_id": 1636634}, {"is_private": false, "raw_text": "Set release status flags based on info from the regressing bug 1630691", "time": "2020-05-11T12:21:19Z", "count": 3, "id": 14809308, "bug_id": 1636634, "creator": "release-mgmt-account-bot@mozilla.tld", "text": "Set release status flags based on info from the regressing bug 1630691", "creation_time": "2020-05-11T12:21:19Z", "author": "release-mgmt-account-bot@mozilla.tld", "tags": [], "attachment_id": null}, {"time": "2020-05-11T18:24:29Z", "raw_text": "Pushed by mtigley@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/3f0b3cebb114\nUse BrowsingContextTargetActor's reload method to reload the current tab in RDM r=jdescottes,bradwerth", "is_private": false, "count": 4, "bug_id": 1636634, "id": 14810325, "creator": "pulsebot@bots.tld", "creation_time": "2020-05-11T18:24:29Z", "text": "Pushed by mtigley@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/3f0b3cebb114\nUse BrowsingContextTargetActor's reload method to reload the current tab in RDM r=jdescottes,bradwerth", "attachment_id": null, "tags": [], "author": "pulsebot@bots.tld"}, {"attachment_id": null, "tags": ["bugherder"], "author": "csabou@mozilla.com", "text": "https://hg.mozilla.org/mozilla-central/rev/3f0b3cebb114", "creation_time": "2020-05-11T21:58:39Z", "creator": "csabou@mozilla.com", "bug_id": 1636634, "id": 14810833, "count": 5, "time": "2020-05-11T21:58:39Z", "raw_text": "https://hg.mozilla.org/mozilla-central/rev/3f0b3cebb114", "is_private": false}, {"raw_text": "### Beta/Release Uplift Approval Request\n* **User impact if declined**: User will be unable to close RDM and would have to close the tab itself to get it back to normal.\n* **Is this code covered by automated tests?**: Yes\n* **Has the fix been verified in Nightly?**: Yes\n* **Needs manual test from QE?**: No\n* **If yes, steps to reproduce**: \n* **List of other uplifts needed**: None\n* **Risk to taking this patch**: Low\n* **Why is the change risky/not risky? (and alternatives if risky)**: The changes to how the tab is reloaded to apply emulated settings in RDM are small.\n* **String changes made/needed**:", "text": "Comment on attachment 9146985\nBug 1636634 - Use BrowsingContextTargetActor's reload method to reload the current tab in RDM\n\n### Beta/Release Uplift Approval Request\n* **User impact if declined**: User will be unable to close RDM and would have to close the tab itself to get it back to normal.\n* **Is this code covered by automated tests?**: Yes\n* **Has the fix been verified in Nightly?**: Yes\n* **Needs manual test from QE?**: No\n* **If yes, steps to reproduce**: \n* **List of other uplifts needed**: None\n* **Risk to taking this patch**: Low\n* **Why is the change risky/not risky? (and alternatives if risky)**: The changes to how the tab is reloaded to apply emulated settings in RDM are small.\n* **String changes made/needed**:", "time": "2020-05-12T14:58:16Z", "creation_time": "2020-05-12T14:58:16Z", "is_private": false, "count": 6, "bug_id": 1636634, "id": 14814331, "creator": "mtigley@mozilla.com", "attachment_id": 9146985, "author": "mtigley@mozilla.com", "tags": []}, {"count": 7, "raw_text": "Hi Pascal, would we be able to uplift this patch to Firefox Developer Edition? The issue only occurs when \"devtools.responsive.browserUI.enabled\" is set to false, which is what the Firefox Dev Edition build uses by default.", "creation_time": "2020-05-13T16:58:46Z", "time": "2020-05-13T16:58:46Z", "text": "Hi Pascal, would we be able to uplift this patch to Firefox Developer Edition? The issue only occurs when \"devtools.responsive.browserUI.enabled\" is set to false, which is what the Firefox Dev Edition build uses by default.", "is_private": false, "creator": "mtigley@mozilla.com", "attachment_id": null, "author": "mtigley@mozilla.com", "tags": [], "bug_id": 1636634, "id": 14817184}, {"time": "2020-05-13T17:02:48Z", "text": "(In reply to Micah Tigley [:mtigley] from comment #7)\n> Hi Pascal, would we be able to uplift this patch to Firefox Developer Edition? The issue only occurs when \"devtools.responsive.browserUI.enabled\" is set to false, which is what the Firefox Dev Edition build uses by default.\n\nDeveloper Edition is built from the beta branch, so that will happen automatically.", "creation_time": "2020-05-13T17:02:48Z", "raw_text": "(In reply to Micah Tigley [:mtigley] from comment #7)\n> Hi Pascal, would we be able to uplift this patch to Firefox Developer Edition? The issue only occurs when \"devtools.responsive.browserUI.enabled\" is set to false, which is what the Firefox Dev Edition build uses by default.\n\nDeveloper Edition is built from the beta branch, so that will happen automatically.", "is_private": false, "count": 8, "bug_id": 1636634, "id": 14817194, "attachment_id": null, "creator": "pascalc@gmail.com", "tags": [], "author": "pascalc@gmail.com"}, {"time": "2020-05-14T08:52:18Z", "raw_text": "Low risk, has tests and fixes a dev-edition only devtools bug, , uplift approved for beta 6, thanks.", "is_private": false, "count": 9, "bug_id": 1636634, "id": 14818820, "creator": "pascalc@gmail.com", "text": "Comment on attachment 9146985\nBug 1636634 - Use BrowsingContextTargetActor's reload method to reload the current tab in RDM\n\nLow risk, has tests and fixes a dev-edition only devtools bug, , uplift approved for beta 6, thanks.", "creation_time": "2020-05-14T08:52:18Z", "attachment_id": 9146985, "tags": [], "author": "pascalc@gmail.com"}, {"creation_time": "2020-05-14T09:37:01Z", "text": "https://hg.mozilla.org/releases/mozilla-beta/rev/b17132cf5a25", "tags": ["bugherder", "uplift"], "author": "aryx.bugmail@gmx-topmail.de", "attachment_id": null, "count": 10, "is_private": false, "time": "2020-05-14T09:37:01Z", "raw_text": "https://hg.mozilla.org/releases/mozilla-beta/rev/b17132cf5a25", "creator": "aryx.bugmail@gmx-topmail.de", "id": 14818906, "bug_id": 1636634}, {"creation_time": "2020-06-10T15:58:36Z", "time": "2020-06-10T15:58:36Z", "text": "*** Bug 1637659 has been marked as a duplicate of this bug. ***", "raw_text": "", "is_private": false, "count": 11, "bug_id": 1636634, "id": 14874405, "attachment_id": null, "creator": "mtigley@mozilla.com", "tags": [], "author": "mtigley@mozilla.com"}]}}}