{"comments": {}, "bugs": {"358601": {"comments": [{"tags": [], "author": "hagayg@yahoo.com", "creator": "hagayg@yahoo.com", "text": "User-Agent:       Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1) Gecko/20061010 Firefox/2.0\n\nclientY & clientX propeties for the document.onmousemove event always returns 0\n(works just fine with firefox 1.5.0.7)\nuse the following HTML to reproduce :\n\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" >\n<head>\n    <title>Untitled Page</title>\n</head>\n<body>\n    <div id=\"dvOutput\" style=\"background-color:Aqua;position:absolute;left:200px;top:350px;width:100px;height:100px;\"></div>\n        <script type=\"text/javascript\">\n        var ieForDrag = document.all\n        var nsForDrag = document.getElementById && !ieForDrag\n        \n        function DragDivByClassName(e) \n        {         \n            var fobj = nsForDrag ? e.target : event.srcElement;    \n\n            var containerObject = fobj;                \n            var ev=e||event; \t\n            var offsetx=ev.clientX-containerObject.offsetLeft;\n            var offsety=ev.clientY-containerObject.offsetTop;\n            document.onmousemove=function() \n            {  \t\t     \n                if (containerObject.style.left == \"\")\n\t                containerObject.style.right=(document.documentElement.clientWidth-containerObject.clientWidth-(ev.clientX-offsetx))+\"px\";\n\t            else\n\t                containerObject.style.left=(ev.clientX-offsetx)+\"px\";\n\t            containerObject.style.top=(ev.clientY-offsety)+\"px\";\n\t            document.getElementById(\"dvOutput\").innerHTML  = \"left: \" + containerObject.style.left + \",top:\" + containerObject.style.top + \"<br>\" + ev.clientY +\"-\"+offsety+\"<br>target:\"+ev.target;\n\t            return false;\n            }\n            fobj.onmouseup=function() \n            {\n \t            document.onmousemove=null;\n            }\n        }\n\n        document.onmousedown=DragDivByClassName;\n    </script>\n\n</body>\n</html>\n\n\nReproducible: Always\n\nSteps to Reproduce:\n1.get the attached html code\n2.load it in firefox 2.0\n3.try to drag the div box and notice it always returns 0 for clientX & clientY\n4.check in firefox 1.5.0.7 to see how it working perfectly\n\nActual Results:  \ndiv cant be drag well\n\nExpected Results:  \ndiv can be drag", "creation_time": "2006-10-29T12:23:14Z", "raw_text": "User-Agent:       Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1) Gecko/20061010 Firefox/2.0\n\nclientY & clientX propeties for the document.onmousemove event always returns 0\n(works just fine with firefox 1.5.0.7)\nuse the following HTML to reproduce :\n\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" >\n<head>\n    <title>Untitled Page</title>\n</head>\n<body>\n    <div id=\"dvOutput\" style=\"background-color:Aqua;position:absolute;left:200px;top:350px;width:100px;height:100px;\"></div>\n        <script type=\"text/javascript\">\n        var ieForDrag = document.all\n        var nsForDrag = document.getElementById && !ieForDrag\n        \n        function DragDivByClassName(e) \n        {         \n            var fobj = nsForDrag ? e.target : event.srcElement;    \n\n            var containerObject = fobj;                \n            var ev=e||event; \t\n            var offsetx=ev.clientX-containerObject.offsetLeft;\n            var offsety=ev.clientY-containerObject.offsetTop;\n            document.onmousemove=function() \n            {  \t\t     \n                if (containerObject.style.left == \"\")\n\t                containerObject.style.right=(document.documentElement.clientWidth-containerObject.clientWidth-(ev.clientX-offsetx))+\"px\";\n\t            else\n\t                containerObject.style.left=(ev.clientX-offsetx)+\"px\";\n\t            containerObject.style.top=(ev.clientY-offsety)+\"px\";\n\t            document.getElementById(\"dvOutput\").innerHTML  = \"left: \" + containerObject.style.left + \",top:\" + containerObject.style.top + \"<br>\" + ev.clientY +\"-\"+offsety+\"<br>target:\"+ev.target;\n\t            return false;\n            }\n            fobj.onmouseup=function() \n            {\n \t            document.onmousemove=null;\n            }\n        }\n\n        document.onmousedown=DragDivByClassName;\n    </script>\n\n</body>\n</html>\n\n\nReproducible: Always\n\nSteps to Reproduce:\n1.get the attached html code\n2.load it in firefox 2.0\n3.try to drag the div box and notice it always returns 0 for clientX & clientY\n4.check in firefox 1.5.0.7 to see how it working perfectly\n\nActual Results:  \ndiv cant be drag well\n\nExpected Results:  \ndiv can be drag", "count": 0, "time": "2006-10-29T12:23:14Z", "attachment_id": null, "is_private": false, "id": 3023926, "bug_id": 358601}, {"author": "steve.england@gmail.com", "raw_text": "Reporter, do you still see this problem with the latest Firefox 2? If not, can you please close this bug as WORKSFORME. Thanks!\n", "creator": "steve.england@gmail.com", "creation_time": "2007-06-21T12:37:57Z", "text": "Reporter, do you still see this problem with the latest Firefox 2? If not, can you please close this bug as WORKSFORME. Thanks!\n", "attachment_id": null, "count": 1, "time": "2007-06-21T12:37:57Z", "is_private": false, "bug_id": 358601, "id": 3223687, "tags": []}, {"text": "Yes , this problem still exists in firefox 2.0.4 (and it really easy to check it...)", "creation_time": "2007-06-21T12:42:24Z", "creator": "hagayg@yahoo.com", "raw_text": "Yes , this problem still exists in firefox 2.0.4 (and it really easy to check it...)", "tags": [], "author": "hagayg@yahoo.com", "id": 3223699, "bug_id": 358601, "is_private": false, "count": 2, "time": "2007-06-21T12:42:24Z", "attachment_id": null}, {"count": 3, "time": "2007-06-21T12:47:38Z", "attachment_id": null, "is_private": false, "bug_id": 358601, "id": 3223711, "author": "steve.england@gmail.com", "tags": [], "raw_text": "I'm sure it is easy to check it, but I'm reading 100s of bugs at the moment and not using 2.0.0.x to do it.\n\nPlease try testing with a trunk build\n- http://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/latest-trunk/\nas it seems to work for me on trunk. If you also find it works on a trunk build, please resolve this bug as WORKSFORME. Thanks!", "creator": "steve.england@gmail.com", "creation_time": "2007-06-21T12:47:38Z", "text": "I'm sure it is easy to check it, but I'm reading 100s of bugs at the moment and not using 2.0.0.x to do it.\n\nPlease try testing with a trunk build\n- http://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/latest-trunk/\nas it seems to work for me on trunk. If you also find it works on a trunk build, please resolve this bug as WORKSFORME. Thanks!"}, {"raw_text": "Sorry , but i dont care from the trunk build , I am trying to support your product in my software , it worked fine with version 1.5 , then you came out with version 2.0 and it doesnt , now it takes you about 7 month to tell me that it should work in version 3 ?\nI'll tag it as work for me when it will be fixed in 2.x ...", "creator": "hagayg@yahoo.com", "text": "Sorry , but i dont care from the trunk build , I am trying to support your product in my software , it worked fine with version 1.5 , then you came out with version 2.0 and it doesnt , now it takes you about 7 month to tell me that it should work in version 3 ?\nI'll tag it as work for me when it will be fixed in 2.x ...", "creation_time": "2007-06-21T12:51:21Z", "author": "hagayg@yahoo.com", "tags": [], "bug_id": 358601, "id": 3223720, "time": "2007-06-21T12:51:21Z", "attachment_id": null, "count": 4, "is_private": false}, {"tags": [], "is_private": false, "attachment_id": null, "count": 5, "time": "2007-06-21T12:57:51Z", "id": 3223722, "bug_id": 358601, "author": "steve.england@gmail.com", "text": "Well if it was fixed on the trunk by a large patch, then the chances of getting it backported to the 2.0 branch are minimal. It would also help if you used the 'Add an attachment' link to attach a minimal testcase.", "creation_time": "2007-06-21T12:57:51Z", "creator": "steve.england@gmail.com", "raw_text": "Well if it was fixed on the trunk by a large patch, then the chances of getting it backported to the 2.0 branch are minimal. It would also help if you used the 'Add an attachment' link to attach a minimal testcase."}, {"is_private": false, "count": 6, "attachment_id": 273972, "time": "2007-07-26T14:36:28Z", "id": 3260823, "bug_id": 358601, "tags": [], "author": "steve.england@gmail.com", "creation_time": "2007-07-26T14:36:28Z", "text": "Created attachment 273972\ntestcase from comment 0", "creator": "steve.england@gmail.com", "raw_text": ""}, {"text": "(In reply to comment #5)\n> Well if it was fixed on the trunk by a large patch, then the chances of getting\n> it backported to the 2.0 branch are minimal. It would also help if you used the\n> 'Add an attachment' link to attach a minimal testcase.\n\nJust tested it with http://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/latest-trunk/firefox-3.0a9pre.en-US.win32.installer.exe\n\ncreated on 2007-10-30 and IT DOES NOT WORK (the div cant be dragged like it was in 1.5 or on IE version 6 & 7)\n\nPlease some one fix it....", "creation_time": "2007-10-30T09:30:15Z", "creator": "hagayg@yahoo.com", "raw_text": "(In reply to comment #5)\n> Well if it was fixed on the trunk by a large patch, then the chances of getting\n> it backported to the 2.0 branch are minimal. It would also help if you used the\n> 'Add an attachment' link to attach a minimal testcase.\n\nJust tested it with http://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/latest-trunk/firefox-3.0a9pre.en-US.win32.installer.exe\n\ncreated on 2007-10-30 and IT DOES NOT WORK (the div cant be dragged like it was in 1.5 or on IE version 6 & 7)\n\nPlease some one fix it....", "author": "hagayg@yahoo.com", "id": 3355696, "bug_id": 358601, "is_private": false, "count": 7, "time": "2007-10-30T09:30:15Z", "attachment_id": null, "tags": []}, {"raw_text": "FWIW the testcase doesn't work on Opera 9.24 either..", "creator": "steve.england@gmail.com", "creation_time": "2007-10-30T16:56:08Z", "text": "FWIW the testcase doesn't work on Opera 9.24 either..", "author": "steve.england@gmail.com", "tags": [], "bug_id": 358601, "id": 3355999, "time": "2007-10-30T16:56:08Z", "attachment_id": null, "count": 8, "is_private": false}, {"raw_text": "(In reply to comment #8)\n> FWIW the testcase doesn't work on Opera 9.24 either..\n\nI dont understand the comments here , a certain code worked on version 1.5 and stopped working on 2.x , you being saying to test it under 3 cause it seem to work there , after i test it in 3.0 and see it doesnt work all you can say it doesnt work in other software too ?\n\ndid it work in opera 8 ? opera 7 ? your info is worthless...", "creation_time": "2007-10-31T06:03:09Z", "text": "(In reply to comment #8)\n> FWIW the testcase doesn't work on Opera 9.24 either..\n\nI dont understand the comments here , a certain code worked on version 1.5 and stopped working on 2.x , you being saying to test it under 3 cause it seem to work there , after i test it in 3.0 and see it doesnt work all you can say it doesnt work in other software too ?\n\ndid it work in opera 8 ? opera 7 ? your info is worthless...", "creator": "hagayg@yahoo.com", "author": "hagayg@yahoo.com", "tags": [], "bug_id": 358601, "id": 3356774, "is_private": false, "attachment_id": null, "count": 9, "time": "2007-10-31T06:03:09Z"}, {"tags": [], "is_private": false, "time": "2007-10-31T13:24:37Z", "count": 10, "attachment_id": null, "bug_id": 358601, "id": 3356974, "author": "steve.england@gmail.com", "raw_text": "We don't know why it stopped working in 2.0 - It could be that your testcase relies on strange or buggy behaviour to work - behaviour which is present in IE, was present in Fx1.5 but got fixed for Fx2, and has never been present in Opera.\n\nAnyway I will see if anyone can look at the reason behind this regression.", "text": "We don't know why it stopped working in 2.0 - It could be that your testcase relies on strange or buggy behaviour to work - behaviour which is present in IE, was present in Fx1.5 but got fixed for Fx2, and has never been present in Opera.\n\nAnyway I will see if anyone can look at the reason behind this regression.", "creation_time": "2007-10-31T13:24:37Z", "creator": "steve.england@gmail.com"}, {"tags": [], "bug_id": 358601, "id": 3357104, "is_private": false, "count": 11, "attachment_id": null, "time": "2007-10-31T15:54:20Z", "raw_text": "For Trunk\n=========\n\nTestcase works:\n- Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.9a1) Gecko/20060307 Firefox/1.6a1 ID:2006030704 [cairo]\n\nTestcase doesn't work:\n- Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.9a1) Gecko/20060308 Firefox/1.6a1 ID:2006030807 [cairo]\n\nCheckins to module PhoenixTinderbox between 2006-03-07 03:00 and 2006-03-08 08:00 : \nhttp://bonsai.mozilla.org/cvsquery.cgi?treeid=default&module=PhoenixTinderbox&branch=HEAD&branchtype=match&dir=&file=&filetype=match&who=&whotype=match&sortby=Date&hours=2&date=explicit&mindate=2006-03-07+03&maxdate=2006-03-08+08&cvsroot=%2Fcvsroot\n\n\n\nFor Branch\n==========\n\nTestcase Works:\n- Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.8.1a3) Gecko/20060612 BonEcho/2.0a3 ID:2006061204\n\nTestcase Broken:\n- Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.8.1a3) Gecko/20060613 BonEcho/2.0a3 ID:2006061303\n\nCheckins to module PhoenixTinderbox on branch MOZILLA_1_8_BRANCH between 2006-06-12 03:00 and 2006-06-13 04:00 : \nhttp://bonsai.mozilla.org/cvsquery.cgi?treeid=default&module=PhoenixTinderbox&branch=MOZILLA_1_8_BRANCH&branchtype=match&dir=&file=&filetype=match&who=&whotype=match&sortby=Date&hours=2&date=explicit&mindate=2006-06-12+03&maxdate=2006-06-13+04&cvsroot=%2Fcvsroot\n\nI can't see any bug that is common between the two ranges.", "text": "For Trunk\n=========\n\nTestcase works:\n- Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.9a1) Gecko/20060307 Firefox/1.6a1 ID:2006030704 [cairo]\n\nTestcase doesn't work:\n- Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.9a1) Gecko/20060308 Firefox/1.6a1 ID:2006030807 [cairo]\n\nCheckins to module PhoenixTinderbox between 2006-03-07 03:00 and 2006-03-08 08:00 : \nhttp://bonsai.mozilla.org/cvsquery.cgi?treeid=default&module=PhoenixTinderbox&branch=HEAD&branchtype=match&dir=&file=&filetype=match&who=&whotype=match&sortby=Date&hours=2&date=explicit&mindate=2006-03-07+03&maxdate=2006-03-08+08&cvsroot=%2Fcvsroot\n\n\n\nFor Branch\n==========\n\nTestcase Works:\n- Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.8.1a3) Gecko/20060612 BonEcho/2.0a3 ID:2006061204\n\nTestcase Broken:\n- Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.8.1a3) Gecko/20060613 BonEcho/2.0a3 ID:2006061303\n\nCheckins to module PhoenixTinderbox on branch MOZILLA_1_8_BRANCH between 2006-06-12 03:00 and 2006-06-13 04:00 : \nhttp://bonsai.mozilla.org/cvsquery.cgi?treeid=default&module=PhoenixTinderbox&branch=MOZILLA_1_8_BRANCH&branchtype=match&dir=&file=&filetype=match&who=&whotype=match&sortby=Date&hours=2&date=explicit&mindate=2006-06-12+03&maxdate=2006-06-13+04&cvsroot=%2Fcvsroot\n\nI can't see any bug that is common between the two ranges.", "creation_time": "2007-10-31T15:54:20Z", "creator": "steve.england@gmail.com", "author": "steve.england@gmail.com"}, {"author": "bugs@pettay.fi", "tags": [], "raw_text": "The testcase is very strange. Using mousedown event in mousemove event handler when the dispatching of mousedown has already stopped.\n(Note, |ev| is bound to the event which DragDivByClassName gets, so it is the \n mousedown event)\n\nThe summary of this bug is wrong, and this is invalid bug unless summary is \nchanged. document.onmousemove works fine and if you use the right event you get \nthe coordinates.\n\nThe change that has happened is that after the event has been dispatched, you can't rely on any coordinate information taken from it, or that coordinates are \n0. That is something I could fix.\n\n(Btw, the testcase crashes on my 1.5.0.x builds.)", "creation_time": "2007-11-01T18:08:57Z", "text": "The testcase is very strange. Using mousedown event in mousemove event handler when the dispatching of mousedown has already stopped.\n(Note, |ev| is bound to the event which DragDivByClassName gets, so it is the \n mousedown event)\n\nThe summary of this bug is wrong, and this is invalid bug unless summary is \nchanged. document.onmousemove works fine and if you use the right event you get \nthe coordinates.\n\nThe change that has happened is that after the event has been dispatched, you can't rely on any coordinate information taken from it, or that coordinates are \n0. That is something I could fix.\n\n(Btw, the testcase crashes on my 1.5.0.x builds.)", "creator": "bugs@pettay.fi", "is_private": false, "attachment_id": null, "count": 12, "time": "2007-11-01T18:08:57Z", "bug_id": 358601, "id": 3358489}, {"count": 13, "attachment_id": null, "time": "2007-11-12T15:17:36Z", "is_private": false, "id": 3369680, "bug_id": 358601, "tags": [], "author": "bugs@pettay.fi", "creator": "bugs@pettay.fi", "creation_time": "2007-11-12T15:17:36Z", "text": "I think this is now WONTFIX. We don't want the strange 1.8.0.x behavior back and\nthe testcase can be easily modified to handle mouseevents properly.\nAnd as I said, there hasn't been any problem with document.onmousemove event,\nthe problem was how event coordinates are cached.", "raw_text": "I think this is now WONTFIX. We don't want the strange 1.8.0.x behavior back and\nthe testcase can be easily modified to handle mouseevents properly.\nAnd as I said, there hasn't been any problem with document.onmousemove event,\nthe problem was how event coordinates are cached."}, {"is_private": false, "count": 14, "attachment_id": null, "time": "2007-11-13T06:59:01Z", "bug_id": 358601, "id": 3370645, "author": "hagayg@yahoo.com", "raw_text": "(In reply to comment #13)\n> I think this is now WONTFIX. We don't want the strange 1.8.0.x behavior back\n> and\n> the testcase can be easily modified to handle mouseevents properly.\n> And as I said, there hasn't been any problem with document.onmousemove event,\n> the problem was how event coordinates are cached.\n\nI am not a javascript nor firefox expert , if it can be fixed easilly, please show me an example of how to change it , if you can...", "creation_time": "2007-11-13T06:59:01Z", "text": "(In reply to comment #13)\n> I think this is now WONTFIX. We don't want the strange 1.8.0.x behavior back\n> and\n> the testcase can be easily modified to handle mouseevents properly.\n> And as I said, there hasn't been any problem with document.onmousemove event,\n> the problem was how event coordinates are cached.\n\nI am not a javascript nor firefox expert , if it can be fixed easilly, please show me an example of how to change it , if you can...", "creator": "hagayg@yahoo.com", "tags": []}, {"tags": [], "id": 3370772, "bug_id": 358601, "count": 15, "time": "2007-11-13T09:29:35Z", "attachment_id": null, "is_private": false, "creator": "bugs@pettay.fi", "creation_time": "2007-11-13T09:29:35Z", "text": "Use the mousemove event in mousemove event handler. Don't use the mousedown event there. That should bring the functionality you want: \ndocument.onmousemove=function(mousemovee)\n{\nvar mousemoveevent = mousemovee || event;\nif (containerObject.style.left == \"\")\n\ncontainerObject.style.right=(document.documentElement.clientWidth-containerObject.clientWidth-(mousemoveevent.clientX-offsetx))+\"px\";\nelse\ncontainerObject.style.left=(mousemoveevent.clientX-offsetx)+\"px\";\ncontainerObject.style.top=(mousemoveevent.clientY-offsety)+\"px\";\ndocument.getElementById(\"dvOutput\").innerHTML  = \"left: \" +\ncontainerObject.style.left + \",top:\" + containerObject.style.top + \"<br>\" +\nmousemoveevent.clientY +\"-\"+offsety+\"<br>target:\"+mousemoveevent.target;\nreturn false;\n}", "raw_text": "Use the mousemove event in mousemove event handler. Don't use the mousedown event there. That should bring the functionality you want: \ndocument.onmousemove=function(mousemovee)\n{\nvar mousemoveevent = mousemovee || event;\nif (containerObject.style.left == \"\")\n\ncontainerObject.style.right=(document.documentElement.clientWidth-containerObject.clientWidth-(mousemoveevent.clientX-offsetx))+\"px\";\nelse\ncontainerObject.style.left=(mousemoveevent.clientX-offsetx)+\"px\";\ncontainerObject.style.top=(mousemoveevent.clientY-offsety)+\"px\";\ndocument.getElementById(\"dvOutput\").innerHTML  = \"left: \" +\ncontainerObject.style.left + \",top:\" + containerObject.style.top + \"<br>\" +\nmousemoveevent.clientY +\"-\"+offsety+\"<br>target:\"+mousemoveevent.target;\nreturn false;\n}", "author": "bugs@pettay.fi"}, {"tags": [], "author": "bugs@pettay.fi", "creator": "bugs@pettay.fi", "text": "Created attachment 288464\nmodified testcase", "creation_time": "2007-11-13T09:30:05Z", "raw_text": "", "time": "2007-11-13T09:30:05Z", "count": 16, "attachment_id": 288464, "is_private": false, "id": 3370773, "bug_id": 358601}, {"is_private": false, "time": "2007-11-13T10:06:23Z", "count": 17, "attachment_id": null, "id": 3370803, "bug_id": 358601, "author": "hagayg@yahoo.com", "creation_time": "2007-11-13T10:06:23Z", "text": "(In reply to comment #16)\n> Created an attachment (id=288464) [details]\n> modified testcase\n\nThank you very much , i got it working now....", "creator": "hagayg@yahoo.com", "raw_text": "(In reply to comment #16)\n> Created an attachment (id=288464) [details]\n> modified testcase\n\nThank you very much , i got it working now....", "tags": []}]}}}