{"comments": {}, "bugs": {"649020": {"comments": [{"attachment_id": 525084, "author": "jmuizelaar@mozilla.com", "id": 5400501, "raw_text": "Upstream android libjpeg used JDCT_IFAST so we probably should as well.", "is_private": false, "creation_time": "2011-04-11T16:10:32Z", "text": "Created attachment 525084\nUse JDCT_IFAST on mobile\n\nUpstream android libjpeg used JDCT_IFAST so we probably should as well.", "creator": "jmuizelaar@mozilla.com", "count": 0, "tags": [], "time": "2011-04-11T16:10:32Z", "bug_id": 649020}, {"author": "justin.lebar+bug@gmail.com", "attachment_id": null, "bug_id": 649020, "tags": [], "creator": "justin.lebar+bug@gmail.com", "time": "2011-04-11T16:46:09Z", "count": 1, "text": "Patch looks fine, but do you have any idea whether it's actually a perf improvement with our libjpeg?  I think I tested on x86 and didn't see any difference in speed between the IFAST, ISLOW, and the floating-point DCT.", "is_private": false, "creation_time": "2011-04-11T16:46:09Z", "raw_text": "Patch looks fine, but do you have any idea whether it's actually a perf improvement with our libjpeg?  I think I tested on x86 and didn't see any difference in speed between the IFAST, ISLOW, and the floating-point DCT.", "id": 5400599}, {"author": "jmuizelaar@mozilla.com", "attachment_id": null, "raw_text": "(In reply to comment #1)\n> Patch looks fine, but do you have any idea whether it's actually a perf\n> improvement with our libjpeg?  I think I tested on x86 and didn't see any\n> difference in speed between the IFAST, ISLOW, and the floating-point DCT.\n\nI haven't tested the perf difference, but I expect it would be more noticeable on ARM than on x86. I don't have an easy way of testing this right now. Siarhei, would you be interested in doing a quick measurement? Just building libjpeg-62 and comparing the speed of djpeg on a large jpeg should be a decent test for this.", "id": 5400750, "text": "(In reply to comment #1)\n> Patch looks fine, but do you have any idea whether it's actually a perf\n> improvement with our libjpeg?  I think I tested on x86 and didn't see any\n> difference in speed between the IFAST, ISLOW, and the floating-point DCT.\n\nI haven't tested the perf difference, but I expect it would be more noticeable on ARM than on x86. I don't have an easy way of testing this right now. Siarhei, would you be interested in doing a quick measurement? Just building libjpeg-62 and comparing the speed of djpeg on a large jpeg should be a decent test for this.", "creation_time": "2011-04-11T17:20:13Z", "is_private": false, "bug_id": 649020, "count": 2, "creator": "jmuizelaar@mozilla.com", "time": "2011-04-11T17:20:13Z", "tags": []}, {"attachment_id": null, "is_private": false, "time": "2011-04-11T17:37:37Z", "author": "siarhei.siamashka@gmail.com", "creation_time": "2011-04-11T17:37:37Z", "text": "It depends on the availability of ARM NEON optimizations for different IDCT variants.", "id": 5400837, "raw_text": "It depends on the availability of ARM NEON optimizations for different IDCT variants.", "tags": [], "count": 3, "creator": "siarhei.siamashka@gmail.com", "bug_id": 649020}, {"creation_time": "2011-04-11T17:50:34Z", "is_private": false, "text": "FYI, some time ago we finally got permission to open source the old ARM NEON libjpeg6 optimizations from N900, and a quick port of the patches to libjpeg-turbo is available here: http://maemo.gitorious.org/meego-image-editor/libjpeg-turbo\nRight now this set of patches only provides NEON version of IFAST, but ISLOW should be also possible with a bit more work.\n\nAround the same time, linaro also started doing some work on ARM optimizations for libjpeg and basically I waited to see what happens there and whether they are going to work with upstream themselves: https://blueprints.launchpad.net/linaro-multimedia-wg/+spec/multimedia-linaro-optimize-jpeg-decoding", "id": 5400891, "raw_text": "FYI, some time ago we finally got permission to open source the old ARM NEON libjpeg6 optimizations from N900, and a quick port of the patches to libjpeg-turbo is available here: http://maemo.gitorious.org/meego-image-editor/libjpeg-turbo\nRight now this set of patches only provides NEON version of IFAST, but ISLOW should be also possible with a bit more work.\n\nAround the same time, linaro also started doing some work on ARM optimizations for libjpeg and basically I waited to see what happens there and whether they are going to work with upstream themselves: https://blueprints.launchpad.net/linaro-multimedia-wg/+spec/multimedia-linaro-optimize-jpeg-decoding", "creator": "siarhei.siamashka@gmail.com", "tags": [], "count": 4, "time": "2011-04-11T17:50:34Z", "bug_id": 649020, "attachment_id": null, "author": "siarhei.siamashka@gmail.com"}, {"time": "2011-04-11T20:11:17Z", "is_private": false, "attachment_id": null, "creator": "justin.lebar+bug@gmail.com", "tags": [], "count": 5, "bug_id": 649020, "creation_time": "2011-04-11T20:11:17Z", "text": "(In reply to comment #3)\n> It depends on the availability of ARM NEON optimizations for different IDCT\n> variants.\n\nMy understanding is that we have no NEON code, for IDCT or anything else related to JPEGs.", "id": 5401317, "raw_text": "(In reply to comment #3)\n> It depends on the availability of ARM NEON optimizations for different IDCT\n> variants.\n\nMy understanding is that we have no NEON code, for IDCT or anything else related to JPEGs.", "author": "justin.lebar+bug@gmail.com"}, {"author": "justin.lebar+bug@gmail.com", "attachment_id": 525084, "bug_id": 649020, "count": 6, "creator": "justin.lebar+bug@gmail.com", "time": "2011-04-11T20:15:31Z", "tags": [], "text": "Comment on attachment 525084\nUse JDCT_IFAST on mobile\n\nI'll r+ this, because it seems unlikely to make things slower.  But it would be really nice to know if it's any faster.", "is_private": false, "creation_time": "2011-04-11T20:15:31Z", "raw_text": "I'll r+ this, because it seems unlikely to make things slower.  But it would be really nice to know if it's any faster.", "id": 5401337}, {"author": "justin.lebar+bug@gmail.com", "attachment_id": null, "raw_text": "Discussion about NEON IDCT routines is in bug 496298.", "id": 5401353, "text": "Discussion about NEON IDCT routines is in bug 496298.", "is_private": false, "creation_time": "2011-04-11T20:18:34Z", "bug_id": 649020, "count": 7, "creator": "justin.lebar+bug@gmail.com", "time": "2011-04-11T20:18:34Z", "tags": []}, {"attachment_id": null, "is_private": false, "time": "2012-02-12T18:25:13Z", "author": "justin.lebar+bug@gmail.com", "id": 6054453, "raw_text": "Hm, this may have fallen through the cracks.  It's not in trunk, if it was ever checked in...", "creation_time": "2012-02-12T18:25:13Z", "text": "Hm, this may have fallen through the cracks.  It's not in trunk, if it was ever checked in...", "creator": "justin.lebar+bug@gmail.com", "count": 8, "tags": [], "bug_id": 649020}, {"attachment_id": null, "author": "justin.lebar+bug@gmail.com", "creator": "justin.lebar+bug@gmail.com", "time": "2012-02-12T18:25:45Z", "count": 9, "tags": [], "bug_id": 649020, "creation_time": "2012-02-12T18:25:45Z", "is_private": false, "text": "Jeff, want to check this in?", "id": 6054454, "raw_text": "Jeff, want to check this in?"}, {"attachment_id": null, "author": "justin.lebar+bug@gmail.com", "id": 6054471, "raw_text": "Consistent with https://bugs.webkit.org/show_bug.cgi?id=78323#c4 but contrary to comment 1 I see a small ~5% improvement with IDCT_FAST on desktop.  There are bigger fish to fry in our desktop image pipeline, fwiw.", "is_private": false, "creation_time": "2012-02-12T18:42:34Z", "text": "Consistent with https://bugs.webkit.org/show_bug.cgi?id=78323#c4 but contrary to comment 1 I see a small ~5% improvement with IDCT_FAST on desktop.  There are bigger fish to fry in our desktop image pipeline, fwiw.", "time": "2012-02-12T18:42:34Z", "count": 10, "tags": [], "creator": "justin.lebar+bug@gmail.com", "bug_id": 649020}, {"bug_id": 649020, "tags": [], "count": 11, "creator": "jmuizelaar@mozilla.com", "text": "I think there were test failures last time I tried this and I never got around to disabling the tests on mobile.", "creation_time": "2012-02-12T19:45:16Z", "raw_text": "I think there were test failures last time I tried this and I never got around to disabling the tests on mobile.", "id": 6054563, "author": "jmuizelaar@mozilla.com", "time": "2012-02-12T19:45:16Z", "is_private": false, "attachment_id": null}]}}}