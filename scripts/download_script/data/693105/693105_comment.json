{"comments": {}, "bugs": {"693105": {"comments": [{"bug_id": 693105, "count": 0, "is_private": false, "tags": [], "id": 5769608, "text": "User Agent: Mozilla/5.0 (Windows NT 5.1) AppleWebKit/535.1 (KHTML, like Gecko) Chrome/14.0.835.202 Safari/535.1\n\nSteps to reproduce:\n\nI open page on my site with an image slide show (Joomgallery), eg http://www.bblopers.nl/hoe-trainen-wij\ncontaining this script:\nhttp://www.bblopers.nl/modules/mod_joomimg/assets/slideshow.js\n\n\nActual results:\n\n CPU use goes op to 50% or more (Firefox 7.0.1, winXP), and the pictures are moving slowly.\n\n\nExpected results:\n\nCPU use should have stayed down and moving pictures should be quickly as eg Chrome and even IE do.\nThe problem is not new, I silently hoped that FF 7.0.1 got rid of the problem but it is still there.", "time": "2011-10-08T22:25:00Z", "attachment_id": null, "creation_time": "2011-10-08T22:25:00Z", "raw_text": "User Agent: Mozilla/5.0 (Windows NT 5.1) AppleWebKit/535.1 (KHTML, like Gecko) Chrome/14.0.835.202 Safari/535.1\n\nSteps to reproduce:\n\nI open page on my site with an image slide show (Joomgallery), eg http://www.bblopers.nl/hoe-trainen-wij\ncontaining this script:\nhttp://www.bblopers.nl/modules/mod_joomimg/assets/slideshow.js\n\n\nActual results:\n\n CPU use goes op to 50% or more (Firefox 7.0.1, winXP), and the pictures are moving slowly.\n\n\nExpected results:\n\nCPU use should have stayed down and moving pictures should be quickly as eg Chrome and even IE do.\nThe problem is not new, I silently hoped that FF 7.0.1 got rid of the problem but it is still there.", "creator": "judavecht@gmail.com", "author": "judavecht@gmail.com"}, {"author": "mardeg@inbox.ru", "creator": "mardeg@inbox.ru", "creation_time": "2011-10-08T23:04:57Z", "raw_text": "Seeing className used in the script it might be related to bug 641094\nThe given script seems to be from 2007 and the creators of it updated it to\nhttp://smoothgallery.jondesign.net/getting-started/\nNot sure if they better adjusted for browser shortcomings in that regard - Firefox has many open tracking bugs about DHTML/DOM performance:\nbug 21762, bug 118933, bug 143097, bug 203448, bug 213943, bug 558145, bug 622298.", "attachment_id": null, "time": "2011-10-08T23:04:57Z", "text": "Seeing className used in the script it might be related to bug 641094\nThe given script seems to be from 2007 and the creators of it updated it to\nhttp://smoothgallery.jondesign.net/getting-started/\nNot sure if they better adjusted for browser shortcomings in that regard - Firefox has many open tracking bugs about DHTML/DOM performance:\nbug 21762, bug 118933, bug 143097, bug 203448, bug 213943, bug 558145, bug 622298.", "id": 5769636, "tags": [], "is_private": false, "count": 1, "bug_id": 693105}, {"is_private": false, "count": 2, "tags": [], "id": 5769642, "bug_id": 693105, "creation_time": "2011-10-08T23:27:38Z", "raw_text": "(works even worse in IE8 for me)", "text": "(works even worse in IE8 for me)", "time": "2011-10-08T23:27:38Z", "attachment_id": null, "creator": "moz@jeka.info", "author": "moz@jeka.info"}, {"creator": "mardeg@inbox.ru", "author": "mardeg@inbox.ru", "is_private": false, "count": 3, "tags": [], "id": 5769647, "bug_id": 693105, "creation_time": "2011-10-08T23:31:59Z", "raw_text": "Can't find an exact dupe, so marking as new. I can see CSS3 animations/transitions being capable of this as an alternative to javascript, and I'll revisit this when I have time to create examples for performance comparison.", "text": "Can't find an exact dupe, so marking as new. I can see CSS3 animations/transitions being capable of this as an alternative to javascript, and I'll revisit this when I have time to create examples for performance comparison.", "attachment_id": null, "time": "2011-10-08T23:31:59Z"}, {"bug_id": 693105, "count": 4, "is_private": false, "tags": [], "id": 5787510, "text": "This has nothing to do with DOM.\n\nOr more precisely, 4% of the time on this testcase is spent doing anything with the DOM, inline styles, etc.  Another maybe 3% is spent on restyling and relayout.\n\n80% is spent on painting.\n\nAnd of the painting, only 1/8 is spent under nsDisplayImage::Paint; the rest is painting text, backgrounds, etc, etc.\n\nSo I'm guessing that we're repainting the whole page for some reason.  Probably because we end up reflowing and our invalidation stuff is all broken?", "attachment_id": null, "time": "2011-10-17T21:40:42Z", "creation_time": "2011-10-17T21:40:42Z", "raw_text": "This has nothing to do with DOM.\n\nOr more precisely, 4% of the time on this testcase is spent doing anything with the DOM, inline styles, etc.  Another maybe 3% is spent on restyling and relayout.\n\n80% is spent on painting.\n\nAnd of the painting, only 1/8 is spent under nsDisplayImage::Paint; the rest is painting text, backgrounds, etc, etc.\n\nSo I'm guessing that we're repainting the whole page for some reason.  Probably because we end up reflowing and our invalidation stuff is all broken?", "creator": "bzbarsky@mit.edu", "author": "bzbarsky@mit.edu"}, {"creator": "tnikkel@gmail.com", "author": "tnikkel@gmail.com", "bug_id": 693105, "tags": [], "is_private": false, "count": 5, "id": 5787726, "text": "(In reply to Boris Zbarsky (:bz) from comment #4)\n> So I'm guessing that we're repainting the whole page for some reason. \n> Probably because we end up reflowing and our invalidation stuff is all\n> broken?\n\nYes. The body of the article is float: left, the image is float:right, whatever we do to the image causes us to reflow it, and in nsBlockFrame::ReflowLine we get the inline case (http://mxr.mozilla.org/mozilla-central/source/layout/generic/nsBlockFrame.cpp#2533) and invalidate the whole line, which is at least the image and all of the body text.\n\nIf you control this page you could probably make a small change to avoid this particular bug.", "attachment_id": null, "time": "2011-10-17T22:58:13Z", "raw_text": "(In reply to Boris Zbarsky (:bz) from comment #4)\n> So I'm guessing that we're repainting the whole page for some reason. \n> Probably because we end up reflowing and our invalidation stuff is all\n> broken?\n\nYes. The body of the article is float: left, the image is float:right, whatever we do to the image causes us to reflow it, and in nsBlockFrame::ReflowLine we get the inline case (http://mxr.mozilla.org/mozilla-central/source/layout/generic/nsBlockFrame.cpp#2533) and invalidate the whole line, which is at least the image and all of the body text.\n\nIf you control this page you could probably make a small change to avoid this particular bug.", "creation_time": "2011-10-17T22:58:13Z"}, {"author": "mardeg@inbox.ru", "creator": "mardeg@inbox.ru", "attachment_id": 568387, "time": "2011-10-20T14:44:59Z", "text": "Created attachment 568387\nImage 1 for test cases", "creation_time": "2011-10-20T14:44:59Z", "raw_text": "", "bug_id": 693105, "id": 5794415, "count": 6, "is_private": false, "tags": []}, {"tags": [], "is_private": false, "count": 7, "id": 5794421, "bug_id": 693105, "raw_text": "", "creation_time": "2011-10-20T14:46:31Z", "creator": "mardeg@inbox.ru", "text": "Created attachment 568388\nImage 2 for test cases", "author": "mardeg@inbox.ru", "attachment_id": 568388, "time": "2011-10-20T14:46:31Z"}, {"author": "mardeg@inbox.ru", "creator": "mardeg@inbox.ru", "bug_id": 693105, "id": 5794424, "is_private": false, "count": 8, "tags": [], "time": "2011-10-20T14:47:28Z", "attachment_id": 568389, "text": "Created attachment 568389\nImage 3 for test cases", "creation_time": "2011-10-20T14:47:28Z", "raw_text": ""}, {"creator": "mardeg@inbox.ru", "author": "mardeg@inbox.ru", "count": 9, "is_private": false, "tags": [], "id": 5794429, "bug_id": 693105, "creation_time": "2011-10-20T14:48:24Z", "raw_text": "", "text": "Created attachment 568391\nImage 4 for test cases", "time": "2011-10-20T14:48:24Z", "attachment_id": 568391}, {"raw_text": "", "creation_time": "2011-10-20T14:52:00Z", "text": "Created attachment 568392\nCSS animation testcase (Firefox only), no floats", "time": "2011-10-20T14:52:00Z", "attachment_id": 568392, "tags": [], "is_private": false, "count": 10, "id": 5794443, "bug_id": 693105, "creator": "mardeg@inbox.ru", "author": "mardeg@inbox.ru"}, {"creator": "mardeg@inbox.ru", "author": "mardeg@inbox.ru", "bug_id": 693105, "tags": [], "is_private": false, "count": 11, "id": 5796367, "text": "Created attachment 568623\nCSS animation testcase (all browsers) using <img>, no floats\n\nClicking on the page heading lets you use Esc to toggle pausing of animations.", "attachment_id": 568623, "time": "2011-10-21T07:51:38Z", "creation_time": "2011-10-21T07:51:38Z", "raw_text": "Clicking on the page heading lets you use Esc to toggle pausing of animations."}, {"creator": "mardeg@inbox.ru", "author": "mardeg@inbox.ru", "text": "Created attachment 568891\nimage 5 for test cases", "attachment_id": 568891, "time": "2011-10-22T18:13:32Z", "creation_time": "2011-10-22T18:13:32Z", "raw_text": "", "bug_id": 693105, "is_private": false, "count": 12, "tags": [], "id": 5798787}, {"author": "mardeg@inbox.ru", "creator": "mardeg@inbox.ru", "attachment_id": 568892, "time": "2011-10-22T18:18:19Z", "text": "Created attachment 568892\nTestcase #3 - simpler CSS animation on a single image\n\nEven without opacity and text overlay animation, this one still takes 100% of my cpu (note: I don't have hardware acceleration, old computer)", "raw_text": "Even without opacity and text overlay animation, this one still takes 100% of my cpu (note: I don't have hardware acceleration, old computer)", "creation_time": "2011-10-22T18:18:19Z", "bug_id": 693105, "id": 5798801, "tags": [], "count": 13, "is_private": false}, {"author": "mardeg@inbox.ru", "creator": "mardeg@inbox.ru", "id": 6027524, "tags": [], "count": 14, "is_private": false, "bug_id": 693105, "raw_text": "(In reply to Mardeg from comment #13)\n> Created attachment 568892\n> Testcase #3 - simpler CSS animation on a single image\nMozilla/5.0 (Windows NT 5.1; rv:13.0a1) Gecko/20120201 Firefox/13.0a1\nWith nglayout.debug.paint_flashing set to true I see the <figure> area flashing every time the image moves on hover. I think this testcase may be more to do with bug 157681.\nIs this bug related to or a dupe of bug 546362?", "creation_time": "2012-02-02T00:49:59Z", "time": "2012-02-02T00:49:59Z", "attachment_id": null, "text": "(In reply to Mardeg from comment #13)\n> Created attachment 568892\n> Testcase #3 - simpler CSS animation on a single image\nMozilla/5.0 (Windows NT 5.1; rv:13.0a1) Gecko/20120201 Firefox/13.0a1\nWith nglayout.debug.paint_flashing set to true I see the <figure> area flashing every time the image moves on hover. I think this testcase may be more to do with bug 157681.\nIs this bug related to or a dupe of bug 546362?"}]}}}