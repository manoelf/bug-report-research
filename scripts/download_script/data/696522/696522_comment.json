{"comments": {}, "bugs": {"696522": {"comments": [{"author": "shadowfyr55@hotmail.com", "creation_time": "2011-10-21T23:27:07Z", "time": "2011-10-21T23:27:07Z", "bug_id": 696522, "tags": [], "text": "User Agent: Mozilla/5.0 (Windows NT 5.1; rv:7.0.1) Gecko/20100101 Firefox/7.0.1\nBuild ID: 20110928134238\n\nSteps to reproduce:\n\nI sometimes save images from sites like http://konachan.com\n\nDepending on how you get to the images, or even how they named them, you get really long file names, made up of <sitename> - <ID #> <long list of tags, describing the image>, which I, if it looks way too long, I might shorten.\n\n\nActual results:\n\nIn certain cases the really long ones will generate a file dialog, indicating that it flat out *won't* save at all. However, in a few cases, the name seems to be within a range of sizes that somehow Firefox fails to recognize as invalid, at which point you get one of two results - 1. It seems to save, but doesn't. 2. It does save, but you can't view, open, or edit, the resulting file, and worse, the only way to remove them, once they exist, is via the Windows console, since they can't be dragged, deleted, right click deleted, or anything else.\n\n\nExpected results:\n\nAttempting to save the file should have produced a dialog window, as normal, indicating that the file can't be saved. A file should never be saved, even if the OS allows it, which is how ever many characters more than is safe, since this leaves unusable files on the system, and possibly creates other problems, in other applications.\n\nI understand a similar issue existed in the MAC branch, but.. the file I found recently with this problem was, I am fairly certain, saved since upgrading to 7, so, unless I am mistaken about when I saved the file, (I have already deleted it, so can't check the date), the problem may still be present in the Windows branch.", "creator": "shadowfyr55@hotmail.com", "is_private": false, "count": 0, "id": 5798138, "attachment_id": null, "raw_text": "User Agent: Mozilla/5.0 (Windows NT 5.1; rv:7.0.1) Gecko/20100101 Firefox/7.0.1\nBuild ID: 20110928134238\n\nSteps to reproduce:\n\nI sometimes save images from sites like http://konachan.com\n\nDepending on how you get to the images, or even how they named them, you get really long file names, made up of <sitename> - <ID #> <long list of tags, describing the image>, which I, if it looks way too long, I might shorten.\n\n\nActual results:\n\nIn certain cases the really long ones will generate a file dialog, indicating that it flat out *won't* save at all. However, in a few cases, the name seems to be within a range of sizes that somehow Firefox fails to recognize as invalid, at which point you get one of two results - 1. It seems to save, but doesn't. 2. It does save, but you can't view, open, or edit, the resulting file, and worse, the only way to remove them, once they exist, is via the Windows console, since they can't be dragged, deleted, right click deleted, or anything else.\n\n\nExpected results:\n\nAttempting to save the file should have produced a dialog window, as normal, indicating that the file can't be saved. A file should never be saved, even if the OS allows it, which is how ever many characters more than is safe, since this leaves unusable files on the system, and possibly creates other problems, in other applications.\n\nI understand a similar issue existed in the MAC branch, but.. the file I found recently with this problem was, I am fairly certain, saved since upgrading to 7, so, unless I am mistaken about when I saved the file, (I have already deleted it, so can't check the date), the problem may still be present in the Windows branch."}, {"creator": "moz@jeka.info", "is_private": false, "count": 1, "author": "moz@jeka.info", "creation_time": "2011-10-22T14:27:54Z", "tags": [], "time": "2011-10-22T14:27:54Z", "bug_id": 696522, "text": "Is the behaviour in other browsers different?", "attachment_id": null, "raw_text": "Is the behaviour in other browsers different?", "id": 5798635}, {"attachment_id": null, "raw_text": "Interesting question. Given that I don't use them, I really can't say. At the very least, its kind of hard to get a case where it does happen. The file name is bloody long, and usually sane people don't make them, but the site I ran into it on has a bloody stupid habit of *sometimes* tacking on a page and a half of descriptive tags, to the name. Reproducibility is thus.. inconvenient, to say the least. The problem doesn't exactly show up with an intact name. In my experience, the names causing the problem where so long you had to hand edit out sections of them, to make the name small enough that the save dialog accepted them at all. Then, when it did, if you got it too long, it would show up in the download list, but never start/finish saving. If you got it just right, it would \"look like\" it saved, the file would show in the disk, and it would be the right physical size, but the right click menu for it would only show open/edit, and a few other things, but not delete, or any of the other things. Again, when that happened, it didn't show a preview image in explorer, can't be opened by applications, and can't be deleted via the GUI.\n\nIt is plausible that this is a bug in the OS itself (and has to be, at least partly, or the files wouldn't show up in the directories), but then, this wouldn't exactly be the first time that someone, to protect users of their own application, had to correct the behavior of *someone else's* application/library, because it didn't exactly work as advertised. Or, do you imagine, unless it caused some sort of buffer overrun, and thus constituted a \"security risk\", MS would bother even trying to fix it, if its their problem? And, if its filesystem dependent, what would you break *by* fixing it on the OS level?\n\nKind of wish I had left one of the files, so I could give an example of it happening, but I was afraid that it might be contributing to some system instability I was having (since I used some of the images in question in a folder for a screensaver). Its hard to say what sort of glitch that causes in things that try to open the files.", "id": 5798892, "is_private": false, "creator": "shadowfyr55@hotmail.com", "count": 2, "creation_time": "2011-10-22T20:01:55Z", "author": "shadowfyr55@hotmail.com", "text": "Interesting question. Given that I don't use them, I really can't say. At the very least, its kind of hard to get a case where it does happen. The file name is bloody long, and usually sane people don't make them, but the site I ran into it on has a bloody stupid habit of *sometimes* tacking on a page and a half of descriptive tags, to the name. Reproducibility is thus.. inconvenient, to say the least. The problem doesn't exactly show up with an intact name. In my experience, the names causing the problem where so long you had to hand edit out sections of them, to make the name small enough that the save dialog accepted them at all. Then, when it did, if you got it too long, it would show up in the download list, but never start/finish saving. If you got it just right, it would \"look like\" it saved, the file would show in the disk, and it would be the right physical size, but the right click menu for it would only show open/edit, and a few other things, but not delete, or any of the other things. Again, when that happened, it didn't show a preview image in explorer, can't be opened by applications, and can't be deleted via the GUI.\n\nIt is plausible that this is a bug in the OS itself (and has to be, at least partly, or the files wouldn't show up in the directories), but then, this wouldn't exactly be the first time that someone, to protect users of their own application, had to correct the behavior of *someone else's* application/library, because it didn't exactly work as advertised. Or, do you imagine, unless it caused some sort of buffer overrun, and thus constituted a \"security risk\", MS would bother even trying to fix it, if its their problem? And, if its filesystem dependent, what would you break *by* fixing it on the OS level?\n\nKind of wish I had left one of the files, so I could give an example of it happening, but I was afraid that it might be contributing to some system instability I was having (since I used some of the images in question in a folder for a screensaver). Its hard to say what sort of glitch that causes in things that try to open the files.", "tags": [], "bug_id": 696522, "time": "2011-10-22T20:01:55Z"}, {"attachment_id": null, "raw_text": "Patrick, you could have used the bundled IE for the test. :)\n\nDon't know if mine's really related -- \"dupes\" search before filing another bug was:\nSilent discard of downloaded file if save location results in error\n`-> bug #27609 (seems related), bug #203445 (wfm)\ndownload save fail long filename\n`-> bug #99743 (wfm) and this one\n\nMozilla/5.0 (X11; Linux i686; rv:7.0.1) Gecko/20110328 Firefox/7.0.1\n(ALT Linux build by nice folks at Mozilla Russia)\n\nThe problem is: a file with relatively short name (23 UTF-8 chars, 39 bytes) is not saved to a directory with quite long path (260 bytes long realpath, although symlinks might have allowed for a shorter one to be effective).  No GUI warning was issued (but no indication of a successfully completed download either).  Console reads as this (sorry but the exact path would be an infoleak, I can try to reproduce with some equivalent-length fake one):\n\n(xulrunner:5702): Gtk-WARNING **: Unable to retrieve the file info for `file:///home/user/Desktop/[urlencoded/utf8/crap/%D0%B0]/moderately%20long%20filename.doc: Unable to retrieve the file info for \u00ab/home/user/Desktop/pretty/printed/path/moderately long filename.doc\u00bb: No such file or directory\n\nThe locale is ru_RU.UTF-8, the filesystem is ext3.  Got some heavy flak for an upgrade :-o", "id": 5829408, "is_private": false, "creator": "shigorin@gmail.com", "creation_time": "2011-11-06T17:17:04Z", "author": "shigorin@gmail.com", "text": "Patrick, you could have used the bundled IE for the test. :)\n\nDon't know if mine's really related -- \"dupes\" search before filing another bug was:\nSilent discard of downloaded file if save location results in error\n`-> bug #27609 (seems related), bug #203445 (wfm)\ndownload save fail long filename\n`-> bug #99743 (wfm) and this one\n\nMozilla/5.0 (X11; Linux i686; rv:7.0.1) Gecko/20110328 Firefox/7.0.1\n(ALT Linux build by nice folks at Mozilla Russia)\n\nThe problem is: a file with relatively short name (23 UTF-8 chars, 39 bytes) is not saved to a directory with quite long path (260 bytes long realpath, although symlinks might have allowed for a shorter one to be effective).  No GUI warning was issued (but no indication of a successfully completed download either).  Console reads as this (sorry but the exact path would be an infoleak, I can try to reproduce with some equivalent-length fake one):\n\n(xulrunner:5702): Gtk-WARNING **: Unable to retrieve the file info for `file:///home/user/Desktop/[urlencoded/utf8/crap/%D0%B0]/moderately%20long%20filename.doc: Unable to retrieve the file info for \u00ab/home/user/Desktop/pretty/printed/path/moderately long filename.doc\u00bb: No such file or directory\n\nThe locale is ru_RU.UTF-8, the filesystem is ext3.  Got some heavy flak for an upgrade :-o", "tags": [], "time": "2011-11-06T17:17:04Z", "count": 3, "bug_id": 696522}, {"bug_id": 696522, "time": "2011-11-06T17:22:06Z", "tags": [], "text": "PS: probably should be reassigned to \"File Handling\" with \"dataloss\" keyword addition as in #27609, with Platform being generalized if my bit is relevant.", "author": "shigorin@gmail.com", "creation_time": "2011-11-06T17:22:06Z", "count": 4, "creator": "shigorin@gmail.com", "is_private": false, "id": 5829411, "raw_text": "PS: probably should be reassigned to \"File Handling\" with \"dataloss\" keyword addition as in #27609, with Platform being generalized if my bit is relevant.", "attachment_id": null}, {"tags": [], "time": "2011-11-07T03:01:58Z", "bug_id": 696522, "text": "Well, the problem is that it only happens in borderline conditions. Its a bit hard to \"test\" something in IE, as well as Firefox, when the problem arises as a direct result of adjusting a too-long name, so that it appears to save. This is especially true if the offending file was saved weeks prior, and the problem only noticed when looking at the images, and noticing that they didn't preview.\n\nWhat I should have done is copy/paste the resulting name, for one of them, into notepad, then try to save some other file with that name, of the exact same length, and see if that failed in IE, as well as Firefox. However, it didn't occur to me to do such a thing until I had already manually deleted all the files. After that... replication would have involved finding image with the problem, then trying to resave it, over and over, with different name lengths, until I found the \"sweet spot\".\n\nIts pure blind luck, resulting from hand deleting as many as 5-6 words from the name, as it is, that such files where even created at all. Beyond that, all I know is that it involves bloody long names. :p\n\nIts fairly obvious, in my case, that the problem is partly OS, since it \"does\" save a file, with a defined size, but them you can't do a dang thing with it after, save via console, and that is to delete the bloody thing (didn't think about trying to rename it though, just figured hunting up the images by number and resaving them without the tags would be simplest). However, since the quirk happens how it does, short of manually saving each and every file, there is no way to do a simple \"quick\" save. Hmm, come to think of it, I am sending them where they need to be via the \"Save Image in Folder\" plugin. However, even if that plugin where failing to check the file name properly, it seems odd that Firefox would then fail to open a dialog, or otherwise generate and error, without something else going wrong in the process. After all, when they name *is* too long, it does show the normal Firefox save dialog. When in the \"almost too big\" range it either silently failed, or saved, in an unopenable state. Why the OS itself wouldn't object to such a file is.. odd, to say the least.", "author": "shadowfyr55@hotmail.com", "creation_time": "2011-11-07T03:01:58Z", "count": 5, "creator": "shadowfyr55@hotmail.com", "is_private": false, "id": 5829860, "raw_text": "Well, the problem is that it only happens in borderline conditions. Its a bit hard to \"test\" something in IE, as well as Firefox, when the problem arises as a direct result of adjusting a too-long name, so that it appears to save. This is especially true if the offending file was saved weeks prior, and the problem only noticed when looking at the images, and noticing that they didn't preview.\n\nWhat I should have done is copy/paste the resulting name, for one of them, into notepad, then try to save some other file with that name, of the exact same length, and see if that failed in IE, as well as Firefox. However, it didn't occur to me to do such a thing until I had already manually deleted all the files. After that... replication would have involved finding image with the problem, then trying to resave it, over and over, with different name lengths, until I found the \"sweet spot\".\n\nIts pure blind luck, resulting from hand deleting as many as 5-6 words from the name, as it is, that such files where even created at all. Beyond that, all I know is that it involves bloody long names. :p\n\nIts fairly obvious, in my case, that the problem is partly OS, since it \"does\" save a file, with a defined size, but them you can't do a dang thing with it after, save via console, and that is to delete the bloody thing (didn't think about trying to rename it though, just figured hunting up the images by number and resaving them without the tags would be simplest). However, since the quirk happens how it does, short of manually saving each and every file, there is no way to do a simple \"quick\" save. Hmm, come to think of it, I am sending them where they need to be via the \"Save Image in Folder\" plugin. However, even if that plugin where failing to check the file name properly, it seems odd that Firefox would then fail to open a dialog, or otherwise generate and error, without something else going wrong in the process. After all, when they name *is* too long, it does show the normal Firefox save dialog. When in the \"almost too big\" range it either silently failed, or saved, in an unopenable state. Why the OS itself wouldn't object to such a file is.. odd, to say the least.", "attachment_id": null}, {"count": 6, "creator": "shadowfyr55@hotmail.com", "is_private": false, "time": "2011-11-07T03:19:45Z", "bug_id": 696522, "tags": [], "text": "Hmm. Ok. Did a quick google and \"apparently\" an issue can exist under XP, where a file will not open in other application is the \"entire file path\" is longer than 256 characters. Chalk it up to another bit of MS stupidity, in assuming that you can allow a file to have 256 characters in a name, but, at the same time, no idiot will *ever* create a single file with that many characters, then try to open it in a program that uses the full path to load it (you know, like *nearly all applications do*). So, I am guessing this is actually an OS bug. By shear accident, the files being saved are \"OK\", in length, and Firefox is using some function that sets the directory \"first\", then saves the file there. This means that the OS doesn't have a problem with it, Firefox doesn't, etc., but the moment you try to access the damn file with any application that uses a full path, which includes, ironically, the \"preview\" function in Explorer, for seeing thumbnail versions of files, it explodes. The console works fine, because it acts on things in the \"immediate directory\" you are cd-ed into. :head->desk:\n\nNo idea if Michael's issue is at all related. Seems he is using ext3, which should mean \"Linux\", and, well.. no idea what its restrictions and quirks are, with respect to that sort of absurdity.", "author": "shadowfyr55@hotmail.com", "creation_time": "2011-11-07T03:19:45Z", "raw_text": "Hmm. Ok. Did a quick google and \"apparently\" an issue can exist under XP, where a file will not open in other application is the \"entire file path\" is longer than 256 characters. Chalk it up to another bit of MS stupidity, in assuming that you can allow a file to have 256 characters in a name, but, at the same time, no idiot will *ever* create a single file with that many characters, then try to open it in a program that uses the full path to load it (you know, like *nearly all applications do*). So, I am guessing this is actually an OS bug. By shear accident, the files being saved are \"OK\", in length, and Firefox is using some function that sets the directory \"first\", then saves the file there. This means that the OS doesn't have a problem with it, Firefox doesn't, etc., but the moment you try to access the damn file with any application that uses a full path, which includes, ironically, the \"preview\" function in Explorer, for seeing thumbnail versions of files, it explodes. The console works fine, because it acts on things in the \"immediate directory\" you are cd-ed into. :head->desk:\n\nNo idea if Michael's issue is at all related. Seems he is using ext3, which should mean \"Linux\", and, well.. no idea what its restrictions and quirks are, with respect to that sort of absurdity.", "attachment_id": null, "id": 5829873}]}}}