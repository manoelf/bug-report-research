{"comments": {}, "bugs": {"706933": {"comments": [{"count": 0, "bug_id": 706933, "is_private": false, "creator": "david.humphrey@senecacollege.ca", "text": "If an IDL file contains a DOS EOL, xpidl.py dies:\n\n/usr/bin/python2.6 /home/dave/repos/mozilla-central/config/pythonpath.py \\\n          -I/home/dave/repos/mozilla-central/other-licenses/ply \\\n          -I/home/dave/repos/mozilla-central/xpcom/idl-parser \\\n          /home/dave/repos/mozilla-central/xpcom/idl-parser/header.py --cachedir=../../../xpcom/idl-parser -I/home/dave/repos/mozilla-central/js/xpconnect/idl -I../../../dist/idl /home/dave/repos/mozilla-central/js/xpconnect/idl/nsIJSEngineTelemetryStats.idl -d .deps/nsIJSEngineTelemetryStats.h.pp -o _xpidlgen/nsIJSEngineTelemetryStats.h\nTraceback (most recent call last):\n  File \"/home/dave/repos/mozilla-central/config/pythonpath.py\", line 52, in <module>\n    main(sys.argv[1:])\n  File \"/home/dave/repos/mozilla-central/config/pythonpath.py\", line 44, in main\n    execfile(script, frozenglobals)\n  File \"/home/dave/repos/mozilla-central/xpcom/idl-parser/header.py\", line 522, in <module>\n    idl = p.parse(open(file).read(), filename=file)\n  File \"/home/dave/repos/mozilla-central/xpcom/idl-parser/xpidl.py\", line 1478, in parse\n    idl = self.parser.parse(lexer=self)\n  File \"/home/dave/repos/mozilla-central/other-licenses/ply/ply/yacc.py\", line 265, in parse\n    return self.parseopt_notrack(input,lexer,debug,tracking,tokenfunc)\n  File \"/home/dave/repos/mozilla-central/other-licenses/ply/ply/yacc.py\", line 921, in parseopt_notrack\n    lookahead = get_token()     # Get the next token\n  File \"/home/dave/repos/mozilla-central/xpcom/idl-parser/xpidl.py\", line 1467, in token\n    t = self.lexer.token()\n  File \"/home/dave/repos/mozilla-central/other-licenses/ply/ply/lex.py\", line 384, in token\n    newtok = self.lexerrorf(tok)\n  File \"/home/dave/repos/mozilla-central/xpcom/idl-parser/xpidl.py\", line 1150, in t_ANY_error\n    lexpos=self.lexer.lexpos))\nxpidl.IDLError: error: unrecognized input, /home/dave/repos/mozilla-central/js/xpconnect/idl/nsIJSEngineTelemetryStats.idl line 1:79\n/* -*- Mode: C++; c-basic-offset: 2; indent-tabs-mode: nil; tab-width: 8 -*- */\n                                                                               ^\nmake[6]: *** [_xpidlgen/nsIJSEngineTelemetryStats.h] Error 1\nmake[6]: *** Deleting file `_xpidlgen/nsIJSEngineTelemetryStats.h'\nmake[6]: Leaving directory `/home/dave/repos/mozilla-central/objdir-debug/js/xpconnect/idl'\nmake[5]: *** [export] Error 2\nmake[5]: Leaving directory `/home/dave/repos/mozilla-central/objdir-debug/js/xpconnect'\nmake[4]: *** [export_tier_platform] Error 2\nmake[4]: Leaving directory `/home/dave/repos/mozilla-central/objdir-debug'\nmake[3]: *** [tier_platform] Error 2\nmake[3]: Leaving directory `/home/dave/repos/mozilla-central/objdir-debug'\nmake[2]: *** [default] Error 2\nmake[2]: Leaving directory `/home/dave/repos/mozilla-central/objdir-debug'\nmake[1]: *** [realbuild] Error 2\nmake[1]: Leaving directory `/home/dave/repos/mozilla-central'\nmake: *** [build] Error 2\n\nI think it should be able to survive this; but if others disagree, then at least an error message that makes clear what the issue really is.", "tags": [], "time": "2011-12-01T20:25:17Z", "creation_time": "2011-12-01T20:25:17Z", "author": "david.humphrey@senecacollege.ca", "raw_text": "If an IDL file contains a DOS EOL, xpidl.py dies:\n\n/usr/bin/python2.6 /home/dave/repos/mozilla-central/config/pythonpath.py \\\n          -I/home/dave/repos/mozilla-central/other-licenses/ply \\\n          -I/home/dave/repos/mozilla-central/xpcom/idl-parser \\\n          /home/dave/repos/mozilla-central/xpcom/idl-parser/header.py --cachedir=../../../xpcom/idl-parser -I/home/dave/repos/mozilla-central/js/xpconnect/idl -I../../../dist/idl /home/dave/repos/mozilla-central/js/xpconnect/idl/nsIJSEngineTelemetryStats.idl -d .deps/nsIJSEngineTelemetryStats.h.pp -o _xpidlgen/nsIJSEngineTelemetryStats.h\nTraceback (most recent call last):\n  File \"/home/dave/repos/mozilla-central/config/pythonpath.py\", line 52, in <module>\n    main(sys.argv[1:])\n  File \"/home/dave/repos/mozilla-central/config/pythonpath.py\", line 44, in main\n    execfile(script, frozenglobals)\n  File \"/home/dave/repos/mozilla-central/xpcom/idl-parser/header.py\", line 522, in <module>\n    idl = p.parse(open(file).read(), filename=file)\n  File \"/home/dave/repos/mozilla-central/xpcom/idl-parser/xpidl.py\", line 1478, in parse\n    idl = self.parser.parse(lexer=self)\n  File \"/home/dave/repos/mozilla-central/other-licenses/ply/ply/yacc.py\", line 265, in parse\n    return self.parseopt_notrack(input,lexer,debug,tracking,tokenfunc)\n  File \"/home/dave/repos/mozilla-central/other-licenses/ply/ply/yacc.py\", line 921, in parseopt_notrack\n    lookahead = get_token()     # Get the next token\n  File \"/home/dave/repos/mozilla-central/xpcom/idl-parser/xpidl.py\", line 1467, in token\n    t = self.lexer.token()\n  File \"/home/dave/repos/mozilla-central/other-licenses/ply/ply/lex.py\", line 384, in token\n    newtok = self.lexerrorf(tok)\n  File \"/home/dave/repos/mozilla-central/xpcom/idl-parser/xpidl.py\", line 1150, in t_ANY_error\n    lexpos=self.lexer.lexpos))\nxpidl.IDLError: error: unrecognized input, /home/dave/repos/mozilla-central/js/xpconnect/idl/nsIJSEngineTelemetryStats.idl line 1:79\n/* -*- Mode: C++; c-basic-offset: 2; indent-tabs-mode: nil; tab-width: 8 -*- */\n                                                                               ^\nmake[6]: *** [_xpidlgen/nsIJSEngineTelemetryStats.h] Error 1\nmake[6]: *** Deleting file `_xpidlgen/nsIJSEngineTelemetryStats.h'\nmake[6]: Leaving directory `/home/dave/repos/mozilla-central/objdir-debug/js/xpconnect/idl'\nmake[5]: *** [export] Error 2\nmake[5]: Leaving directory `/home/dave/repos/mozilla-central/objdir-debug/js/xpconnect'\nmake[4]: *** [export_tier_platform] Error 2\nmake[4]: Leaving directory `/home/dave/repos/mozilla-central/objdir-debug'\nmake[3]: *** [tier_platform] Error 2\nmake[3]: Leaving directory `/home/dave/repos/mozilla-central/objdir-debug'\nmake[2]: *** [default] Error 2\nmake[2]: Leaving directory `/home/dave/repos/mozilla-central/objdir-debug'\nmake[1]: *** [realbuild] Error 2\nmake[1]: Leaving directory `/home/dave/repos/mozilla-central'\nmake: *** [build] Error 2\n\nI think it should be able to survive this; but if others disagree, then at least an error message that makes clear what the issue really is.", "attachment_id": null, "id": 5886182}]}}}