{"comments": {}, "bugs": {"691200": {"comments": [{"text": "Created attachment 564086\nstacks.txt\n\nUser Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:7.0.1) Gecko/20100101 Firefox/7.0.1\nBuild ID: 20110928134238\n\nSteps to reproduce:\n\nAttempted to create a certificate with a CRL distribution point URL\n\neg. certutil -d . -S -n \"gyruss.us.oracle.com\" -s \"CN=gyruss.us.oracle.com,OU=Comms Suite Development,OU=CGBU,O=Oracle Corporation\" -c \"Oracle Comms Root CA\" -t \"\" -g 2048 -v 60 -d . -1 -2 -6 -4 -p \"+1 408 276 3650\" -z /etc/passwd -m 2 -f $HOME/.nss/password\n\n\n\n\nActual results:\n\nCertutil incorrectly barfed back an error about extension not found.\n\nExtract of output follows:\n\n.\n.\n.\nEnter the type of the distribution point name:\n        1 - Full Name\n        2 - Relative Name\n        Any other number to finish\n                Choice:  > 1\n\nSelect one of the following general name type: \n        2 - rfc822Name\n        3 - dnsName\n        5 - directoryName\n        7 - uniformResourceidentifier\n        8 - ipAddress\n        9 - registerID\n        Any other number to finish\n                Choice: > 7\n\nEnter data:\nhttp://gyruss.us.oracle.com/ca.crl\n\nSelect one of the following general name type: \n        2 - rfc822Name\n        3 - dnsName\n        5 - directoryName\n        7 - uniformResourceidentifier\n        8 - ipAddress\n        9 - registerID\n        Any other number to finish\n                Choice: > 0\ncertutil: Problem creating CRLDistPoints extension: Certificate extension not found.\ncertutil: unable to create cert (Certificate extension not found.)\n\n\n\nExpected results:\n\nThe problem is that the non-fatal error SEC_ERROR_EXTENSION_NOT_FOUND (-8157) is being passed up the stack, instead of being cleared, resulting in an error being incorrectly detected in AddCrlDistPoint() - mozilla/security/nss/cmd/certutil/certext.c\n\nThis error appears to be set in 4 places:\ncert_FindExtensionByOID() - mozilla/security/nss/lib/certdb/certxutl.c\nCERT_GetExtenCriticality() - mozilla/security/nss/lib/certdb/certxutl.c\ncert_VerifySubjectAltName() - mozilla/security/nss/lib/certdb/certdb.c\nCERT_DecodeAltNameExtension() - mozilla/security/nss/lib/certdb/xconst.c\n\nThe particular invocation of certutil above calls cert_FindExtensionByOID() 12 times, and does NOT call any of the other functions.\n\nAs such, I have attached a file showing each and every stack trace at the time this function was called, so as to enable the developers to determine at what point this non-fatal error needs to be cleared in order to stop it from incorrectly being passed up the stack.", "bug_id": 691200, "tags": [], "attachment_id": 564086, "raw_text": "User Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:7.0.1) Gecko/20100101 Firefox/7.0.1\nBuild ID: 20110928134238\n\nSteps to reproduce:\n\nAttempted to create a certificate with a CRL distribution point URL\n\neg. certutil -d . -S -n \"gyruss.us.oracle.com\" -s \"CN=gyruss.us.oracle.com,OU=Comms Suite Development,OU=CGBU,O=Oracle Corporation\" -c \"Oracle Comms Root CA\" -t \"\" -g 2048 -v 60 -d . -1 -2 -6 -4 -p \"+1 408 276 3650\" -z /etc/passwd -m 2 -f $HOME/.nss/password\n\n\n\n\nActual results:\n\nCertutil incorrectly barfed back an error about extension not found.\n\nExtract of output follows:\n\n.\n.\n.\nEnter the type of the distribution point name:\n        1 - Full Name\n        2 - Relative Name\n        Any other number to finish\n                Choice:  > 1\n\nSelect one of the following general name type: \n        2 - rfc822Name\n        3 - dnsName\n        5 - directoryName\n        7 - uniformResourceidentifier\n        8 - ipAddress\n        9 - registerID\n        Any other number to finish\n                Choice: > 7\n\nEnter data:\nhttp://gyruss.us.oracle.com/ca.crl\n\nSelect one of the following general name type: \n        2 - rfc822Name\n        3 - dnsName\n        5 - directoryName\n        7 - uniformResourceidentifier\n        8 - ipAddress\n        9 - registerID\n        Any other number to finish\n                Choice: > 0\ncertutil: Problem creating CRLDistPoints extension: Certificate extension not found.\ncertutil: unable to create cert (Certificate extension not found.)\n\n\n\nExpected results:\n\nThe problem is that the non-fatal error SEC_ERROR_EXTENSION_NOT_FOUND (-8157) is being passed up the stack, instead of being cleared, resulting in an error being incorrectly detected in AddCrlDistPoint() - mozilla/security/nss/cmd/certutil/certext.c\n\nThis error appears to be set in 4 places:\ncert_FindExtensionByOID() - mozilla/security/nss/lib/certdb/certxutl.c\nCERT_GetExtenCriticality() - mozilla/security/nss/lib/certdb/certxutl.c\ncert_VerifySubjectAltName() - mozilla/security/nss/lib/certdb/certdb.c\nCERT_DecodeAltNameExtension() - mozilla/security/nss/lib/certdb/xconst.c\n\nThe particular invocation of certutil above calls cert_FindExtensionByOID() 12 times, and does NOT call any of the other functions.\n\nAs such, I have attached a file showing each and every stack trace at the time this function was called, so as to enable the developers to determine at what point this non-fatal error needs to be cleared in order to stop it from incorrectly being passed up the stack.", "time": "2011-10-02T21:59:56Z", "creation_time": "2011-10-02T21:59:56Z", "creator": "mckeon@coretron.net", "author": "mckeon@coretron.net", "count": 0, "id": 5753127, "is_private": false}]}}}