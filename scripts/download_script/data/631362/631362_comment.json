{"bugs": {"631362": {"comments": [{"is_private": false, "time": "2011-02-03T22:13:30Z", "author": "rosoma_xa@yahoo.com", "count": 0, "id": 5252765, "tags": [], "creation_time": "2011-02-03T22:13:30Z", "attachment_id": null, "raw_text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US) AppleWebKit/534.10 (KHTML, like Gecko) Chrome/8.0.552.237 Safari/534.10\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 6.0; ru; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7\n\nIf in Account Server Settings change the folder \"when I delete a message\" for the second time, deleted message will not move to that folder (Yahoo account).\n\nReproducible: Sometimes\n\nSteps to Reproduce:\n1. Create a new folder as subfolder of mail account and name it \"Test\".\n2. In Account settings -> server settings ->\"When I delete a message\" choose \"Move it to this folder\" and select the folder \"Test\".\n3. Delete a message.\n4. Turn to the \"Test\" folder.\nActual Results:  \nThe \"Test\" folder is empty.\n\nExpected Results:  \nThe \"Test\" folder should contain deleted message.\n\nI've tried these STR with Yahoo account and deleted message had not been saved in any folder, with Gmail account deleted message saved in Gmail/Trash.\nIf we set the folder in account server setting for the first time, everything works fine. But when we change the folder to the another one this bug happens.", "creator": "rosoma_xa@yahoo.com", "bug_id": 631362, "text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US) AppleWebKit/534.10 (KHTML, like Gecko) Chrome/8.0.552.237 Safari/534.10\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 6.0; ru; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7\n\nIf in Account Server Settings change the folder \"when I delete a message\" for the second time, deleted message will not move to that folder (Yahoo account).\n\nReproducible: Sometimes\n\nSteps to Reproduce:\n1. Create a new folder as subfolder of mail account and name it \"Test\".\n2. In Account settings -> server settings ->\"When I delete a message\" choose \"Move it to this folder\" and select the folder \"Test\".\n3. Delete a message.\n4. Turn to the \"Test\" folder.\nActual Results:  \nThe \"Test\" folder is empty.\n\nExpected Results:  \nThe \"Test\" folder should contain deleted message.\n\nI've tried these STR with Yahoo account and deleted message had not been saved in any folder, with Gmail account deleted message saved in Gmail/Trash.\nIf we set the folder in account server setting for the first time, everything works fine. But when we change the folder to the another one this bug happens."}, {"time": "2011-02-04T08:01:25Z", "count": 1, "raw_text": "With Tb 3.1.7 on Win, with \"All Folders\" view of folder pane.\n\n(a) Yahoo! Imap.\n    \"When I delete a message\", choose \"Move it to this folder\",\n    and select the folder \"Test\".\n    => Icon of Trash(previously set as trash) is changed.\n    Icon of Test is still icon for normal folder.\n    Collaps and re-expand account.\n    => Icon of Test is changed to icon for trash folder.\n    Delete a mail => mail is moved to Test folder as designed, as expected.\n=> WORKSFORME\n\n(b) Gmail IMAP.\n    [Gmail]/Trash is used as trash folder, regardless of folder selection\n    at \"Move it to tis folder\".\n    It's can be called \"current resriction\", but it's current implementation.\n    Read and unerstand bugs listed in dependency for meta bug 402793, please.\n\nPOP3 of Yahoo! instead of IMAP? (local mail folder instead of IMAP folder)\nWith which folder pane view? \"All Folders\"? Or \"Cnsolidated Folders\"? Other?\nIf Yahoo! IMAP, was Trash(previous trash folder) opened before change to Test? \nDoes problem on Yahoo account consistently occur even after restart of Tb?", "creator": "m-wada@usa.com", "text": "With Tb 3.1.7 on Win, with \"All Folders\" view of folder pane.\n\n(a) Yahoo! Imap.\n    \"When I delete a message\", choose \"Move it to this folder\",\n    and select the folder \"Test\".\n    => Icon of Trash(previously set as trash) is changed.\n    Icon of Test is still icon for normal folder.\n    Collaps and re-expand account.\n    => Icon of Test is changed to icon for trash folder.\n    Delete a mail => mail is moved to Test folder as designed, as expected.\n=> WORKSFORME\n\n(b) Gmail IMAP.\n    [Gmail]/Trash is used as trash folder, regardless of folder selection\n    at \"Move it to tis folder\".\n    It's can be called \"current resriction\", but it's current implementation.\n    Read and unerstand bugs listed in dependency for meta bug 402793, please.\n\nPOP3 of Yahoo! instead of IMAP? (local mail folder instead of IMAP folder)\nWith which folder pane view? \"All Folders\"? Or \"Cnsolidated Folders\"? Other?\nIf Yahoo! IMAP, was Trash(previous trash folder) opened before change to Test? \nDoes problem on Yahoo account consistently occur even after restart of Tb?", "author": "m-wada@usa.com", "is_private": false, "id": 5254545, "creation_time": "2011-02-04T08:01:25Z", "tags": [], "attachment_id": null, "bug_id": 631362}, {"time": "2011-02-04T11:16:06Z", "count": 2, "raw_text": "(In reply to comment #1)\n \n> POP3 of Yahoo! instead of IMAP? (local mail folder instead of IMAP folder)\nIMAP of Yahoo! is used. Creating a folder in TB=creating the folder in Yahoo. I haven't tried with POP3.\n\n> With which folder pane view? \"All Folders\"? Or \"Cnsolidated Folders\"? Other?\nI'm not sure if I understand right. Do you mean view->folders=all? If so, \"All folders\" are chosen.\n\n> If Yahoo! IMAP, was Trash(previous trash folder) opened before change to Test?\n\nYes, it was opened previously, marked as trash folder and selected in Account Server Settings as a folder=\"When I delete a message\". When I started TB with this settings and delete a message, everything works fine. Than I change the folder from Trash to \"Test\" and delete a message, the result is the \"Test\" folder doesn't mark as trash and the deleted message doesn't move to the \"Test\". The problem resolves when TB is restarted.", "creator": "rosoma_xa@yahoo.com", "text": "(In reply to comment #1)\n \n> POP3 of Yahoo! instead of IMAP? (local mail folder instead of IMAP folder)\nIMAP of Yahoo! is used. Creating a folder in TB=creating the folder in Yahoo. I haven't tried with POP3.\n\n> With which folder pane view? \"All Folders\"? Or \"Cnsolidated Folders\"? Other?\nI'm not sure if I understand right. Do you mean view->folders=all? If so, \"All folders\" are chosen.\n\n> If Yahoo! IMAP, was Trash(previous trash folder) opened before change to Test?\n\nYes, it was opened previously, marked as trash folder and selected in Account Server Settings as a folder=\"When I delete a message\". When I started TB with this settings and delete a message, everything works fine. Than I change the folder from Trash to \"Test\" and delete a message, the result is the \"Test\" folder doesn't mark as trash and the deleted message doesn't move to the \"Test\". The problem resolves when TB is restarted.", "is_private": false, "author": "rosoma_xa@yahoo.com", "id": 5254800, "creation_time": "2011-02-04T11:16:06Z", "tags": [], "attachment_id": null, "bug_id": 631362}, {"count": 3, "time": "2011-02-05T05:42:30Z", "text": "(In reply to comment #2)\n> Yes, it was opened previously, marked as trash folder and selected in Account\n> Server Settings as a folder=\"When I delete a message\".\n> When I started TB with this settings and delete a message, everything works fine.\n> Then I change the folder from Trash to \"Test\" and delete a message, (snip)\n\nWas icon of Trash(previous trash) changed from \"trash can\" to ordinal icon?\n(in my test, it was changed)\nWas icon of Test(new trash) changed from ordinal icon to \"trash can\"?\n(in my test, it was not changed at this step)\n\n> the result is the \"Test\" folder doesn't mark as trash\n> and the deleted message doesn't move to the \"Test\".\n\nWas deleted mail moved to \"Trash\" which was previous trash?\nOr nothing was deleted and moved?\n\n> The problem resolves when TB is restarted.\n\nIs restart of Tb mandatory?\nIn my test, icon of Test wa changed from ordinal icon to \"trash can\" by collapse&re-expand of account who owns the Test folder, and I couldn't see problem you stated.\nCan it be recovery operation of your problem?", "creator": "m-wada@usa.com", "raw_text": "(In reply to comment #2)\n> Yes, it was opened previously, marked as trash folder and selected in Account\n> Server Settings as a folder=\"When I delete a message\".\n> When I started TB with this settings and delete a message, everything works fine.\n> Then I change the folder from Trash to \"Test\" and delete a message, (snip)\n\nWas icon of Trash(previous trash) changed from \"trash can\" to ordinal icon?\n(in my test, it was changed)\nWas icon of Test(new trash) changed from ordinal icon to \"trash can\"?\n(in my test, it was not changed at this step)\n\n> the result is the \"Test\" folder doesn't mark as trash\n> and the deleted message doesn't move to the \"Test\".\n\nWas deleted mail moved to \"Trash\" which was previous trash?\nOr nothing was deleted and moved?\n\n> The problem resolves when TB is restarted.\n\nIs restart of Tb mandatory?\nIn my test, icon of Test wa changed from ordinal icon to \"trash can\" by collapse&re-expand of account who owns the Test folder, and I couldn't see problem you stated.\nCan it be recovery operation of your problem?", "id": 5257324, "is_private": false, "author": "m-wada@usa.com", "bug_id": 631362, "attachment_id": null, "tags": [], "creation_time": "2011-02-05T05:42:30Z"}, {"time": "2011-02-05T13:54:18Z", "count": 4, "raw_text": "(In reply to comment #3)\n \n> Was icon of Trash(previous trash) changed from \"trash can\" to ordinal icon?\n> (in my test, it was changed)\nRight, the prev. \"Trash\" folder changed to ordinal icon.\n\n> Was icon of Test(new trash) changed from ordinal icon to \"trash can\"?\n> (in my test, it was not changed at this step)\n\nNo, it wasn't. The icon of \"Test\" (new trash) remains as ordinal icon. \n\n> Was deleted mail moved to \"Trash\" which was previous trash?\n> Or nothing was deleted and moved?\n\nThe deleted message doesn't move nor to the \"Trash\" neither to the \"Test\" or any of exciting folder. For instance, I delete a message from Inbox folder, it moved form the Inbox but doesn't appear in any of folders.\n\n> Is restart of Tb mandatory?\n> In my test, icon of Test wa changed from ordinal icon to \"trash can\" by\n> collapse&re-expand of account who owns the Test folder, and I couldn't see\n> problem you stated.\n> Can it be recovery operation of your problem?\n\nCollapse&re-expand of account helped in terms of folder icon, I haven't tried it earlier. But still non of the folders holds the message deleted before collapse&re-expand.", "creator": "rosoma_xa@yahoo.com", "text": "(In reply to comment #3)\n \n> Was icon of Trash(previous trash) changed from \"trash can\" to ordinal icon?\n> (in my test, it was changed)\nRight, the prev. \"Trash\" folder changed to ordinal icon.\n\n> Was icon of Test(new trash) changed from ordinal icon to \"trash can\"?\n> (in my test, it was not changed at this step)\n\nNo, it wasn't. The icon of \"Test\" (new trash) remains as ordinal icon. \n\n> Was deleted mail moved to \"Trash\" which was previous trash?\n> Or nothing was deleted and moved?\n\nThe deleted message doesn't move nor to the \"Trash\" neither to the \"Test\" or any of exciting folder. For instance, I delete a message from Inbox folder, it moved form the Inbox but doesn't appear in any of folders.\n\n> Is restart of Tb mandatory?\n> In my test, icon of Test wa changed from ordinal icon to \"trash can\" by\n> collapse&re-expand of account who owns the Test folder, and I couldn't see\n> problem you stated.\n> Can it be recovery operation of your problem?\n\nCollapse&re-expand of account helped in terms of folder icon, I haven't tried it earlier. But still non of the folders holds the message deleted before collapse&re-expand.", "is_private": false, "author": "rosoma_xa@yahoo.com", "id": 5257610, "tags": [], "creation_time": "2011-02-05T13:54:18Z", "attachment_id": null, "bug_id": 631362}, {"id": 5257662, "author": "m-wada@usa.com", "is_private": false, "bug_id": 631362, "attachment_id": null, "creation_time": "2011-02-05T15:28:29Z", "tags": [], "count": 5, "time": "2011-02-05T15:28:29Z", "text": "I could observe phenomenon of next with your step to reproduce, with Tb 3.1.7.\n(1) trash folder=Trash. delete a mail in Inbox, mail is moved to Trash\n(2) Change trash=TrashXXX from Trash.\n    At Server Settings, change to \"Move it to this foler: TrashXXX\".\n    => Icon of Trash is changed from \"Trash Can\" to ordinal folder icon.\n    => Icon of TrashXXX is not changed from ordinal folder icon to \"Trash Can\".\n(3) Delete another mail at Inbox (call UID=XXX)\n(3-1) At Inbox, uid copy XXX \"trash-folder-name\" is not issued,\n      even though \"move to trash\" model is still chosen by user.\n(3-2) At Inbox, uid XXX store +Flag (\\Seen) is issued\n(3-3) At Inbox, uid XXX store +Flag (\\Seen \\Deleted) is issued\n=> Mail of UID=XXX is not copied to anywhere.\n   i.e. Mail of UID=XXX in Inbox is lost, because \"copy to trash folder\" step\n   is skipped or somehow fails, even though \"Move to trash\" model is chosen.\n\nI'll try to get IMAP log for it.", "creator": "m-wada@usa.com", "raw_text": "I could observe phenomenon of next with your step to reproduce, with Tb 3.1.7.\n(1) trash folder=Trash. delete a mail in Inbox, mail is moved to Trash\n(2) Change trash=TrashXXX from Trash.\n    At Server Settings, change to \"Move it to this foler: TrashXXX\".\n    => Icon of Trash is changed from \"Trash Can\" to ordinal folder icon.\n    => Icon of TrashXXX is not changed from ordinal folder icon to \"Trash Can\".\n(3) Delete another mail at Inbox (call UID=XXX)\n(3-1) At Inbox, uid copy XXX \"trash-folder-name\" is not issued,\n      even though \"move to trash\" model is still chosen by user.\n(3-2) At Inbox, uid XXX store +Flag (\\Seen) is issued\n(3-3) At Inbox, uid XXX store +Flag (\\Seen \\Deleted) is issued\n=> Mail of UID=XXX is not copied to anywhere.\n   i.e. Mail of UID=XXX in Inbox is lost, because \"copy to trash folder\" step\n   is skipped or somehow fails, even though \"Move to trash\" model is chosen.\n\nI'll try to get IMAP log for it."}, {"id": 5258272, "count": 6, "author": "m-wada@usa.com", "time": "2011-02-06T03:58:54Z", "is_private": false, "text": "When \"Empty Trash\" was executed while \"icon for ordinal folder\" was assigned to both Trash and TrashXXX(i.e. there is no folder of \"Trash Can\" icon at folder pane) just after trash folder selection change, following exception was reported to Error Console by Tb 3.1.7.\n\n> Error: An error occurred executing the cmd_emptyTrash command:\n> [Exception... \"Component returned failure code: 0x80004005 (NS_ERROR_FAILURE)\n> [nsIMsgFolder.emptyTrash]\"  nsresult: \"0x80004005 (NS_ERROR_FAILURE)\"\n> location: \"JS frame :: chrome://messenger/content/folderPane.js :: ftc_emptyTrash :: line 2226\"  data: no]\n> Source File: chrome://global/content/globalOverlay.js\nLine: 100\n\nAfter the exception, when account was collapsed/re-expanded, icon of previously selected trash folder was changed to \"Trash Can\" icon, and \"Empty Trash\" was executed on this \"previously selected trash folder\". i.e. Mismatch between current trash and \"Move to this folder\" selection happens, or \"Move to this folder\" setting(mail.server.serverN.trash_folder_name value) is ignored.\nRestart of Tb looked required to resolve this mismatch.", "bug_id": 631362, "creator": "m-wada@usa.com", "raw_text": "When \"Empty Trash\" was executed while \"icon for ordinal folder\" was assigned to both Trash and TrashXXX(i.e. there is no folder of \"Trash Can\" icon at folder pane) just after trash folder selection change, following exception was reported to Error Console by Tb 3.1.7.\n\n> Error: An error occurred executing the cmd_emptyTrash command:\n> [Exception... \"Component returned failure code: 0x80004005 (NS_ERROR_FAILURE)\n> [nsIMsgFolder.emptyTrash]\"  nsresult: \"0x80004005 (NS_ERROR_FAILURE)\"\n> location: \"JS frame :: chrome://messenger/content/folderPane.js :: ftc_emptyTrash :: line 2226\"  data: no]\n> Source File: chrome://global/content/globalOverlay.js\nLine: 100\n\nAfter the exception, when account was collapsed/re-expanded, icon of previously selected trash folder was changed to \"Trash Can\" icon, and \"Empty Trash\" was executed on this \"previously selected trash folder\". i.e. Mismatch between current trash and \"Move to this folder\" selection happens, or \"Move to this folder\" setting(mail.server.serverN.trash_folder_name value) is ignored.\nRestart of Tb looked required to resolve this mismatch.", "attachment_id": null, "tags": [], "creation_time": "2011-02-06T03:58:54Z"}, {"time": "2011-02-06T05:12:11Z", "count": 7, "text": "For recovery operations.\nIf server connection already exists(at least one folder is opened after restart of Tb), icon of newly selected trash folder is changed to \"Trash Can\" icon by collaps/re-expand of accout, and the newly selected trash folder is used as \"trash folder\" by \"Delete of mail\" and \"Empty Trash\".\nIf no server connection is established after restart of Tb, icon of newly selected trash folder is changed to \"Trash Can\" icon by open of a folder, and used as \"trash folder\".\n\nExternal symptom of this bug;\n  Newly selected trash folder at \"Move it to this folder:\" is not used\n  as \"trash folder\" for \"Delete of mail\" and \"Empty Trash\",\n  until icon of the \"newly selected trash\" is changed to \"Trash Can icon\"\n  from \"icon for ordinal folder\" by collapse/re-expand of account or by first\n  folder open after restart of Tb. \n\nConfirming.", "raw_text": "For recovery operations.\nIf server connection already exists(at least one folder is opened after restart of Tb), icon of newly selected trash folder is changed to \"Trash Can\" icon by collaps/re-expand of accout, and the newly selected trash folder is used as \"trash folder\" by \"Delete of mail\" and \"Empty Trash\".\nIf no server connection is established after restart of Tb, icon of newly selected trash folder is changed to \"Trash Can\" icon by open of a folder, and used as \"trash folder\".\n\nExternal symptom of this bug;\n  Newly selected trash folder at \"Move it to this folder:\" is not used\n  as \"trash folder\" for \"Delete of mail\" and \"Empty Trash\",\n  until icon of the \"newly selected trash\" is changed to \"Trash Can icon\"\n  from \"icon for ordinal folder\" by collapse/re-expand of account or by first\n  folder open after restart of Tb. \n\nConfirming.", "creator": "m-wada@usa.com", "id": 5258311, "author": "m-wada@usa.com", "is_private": false, "bug_id": 631362, "tags": [], "creation_time": "2011-02-06T05:12:11Z", "attachment_id": null}, {"id": 5407046, "time": "2011-04-13T18:17:57Z", "author": "vseerror@lehigh.edu", "count": 8, "is_private": false, "text": "possible dups\nBug 591722\nbug 606479", "bug_id": 631362, "raw_text": "possible dups\nBug 591722\nbug 606479", "creator": "vseerror@lehigh.edu", "tags": [], "creation_time": "2011-04-13T18:17:57Z", "attachment_id": null}, {"text": "(In reply to Wayne Mery (:wsmwk) from comment #8)\n> possible dups\n> Bug 591722\n> bug 606479\n\nNot sure these are really relevant. This bug (comment 0) is for imap. The 2nd bug referenced is POP. The first one doesn't mention changing the designated trash folder.\n\nAlso, I guess this bug (comment 0) is really just the fact that if you change the designated trash folder, you have to collapse/expand the folder tree or restart tb. Typical users won't know about the collapse/expand widget or why they need to use it, but it is pretty common for config changes to require a tb restart (although this seems to be frowned on with modern apps). \n\n**Maybe when config change is made something should pop up saying \"A tb restart may be needed for your change to take effect\" and, so \"advanced\" users aren't irritated, a \"don't show this any more\" checkbox should be included.**", "creator": "gds@chartertn.net", "raw_text": "(In reply to Wayne Mery (:wsmwk) from comment #8)\n> possible dups\n> Bug 591722\n> bug 606479\n\nNot sure these are really relevant. This bug (comment 0) is for imap. The 2nd bug referenced is POP. The first one doesn't mention changing the designated trash folder.\n\nAlso, I guess this bug (comment 0) is really just the fact that if you change the designated trash folder, you have to collapse/expand the folder tree or restart tb. Typical users won't know about the collapse/expand widget or why they need to use it, but it is pretty common for config changes to require a tb restart (although this seems to be frowned on with modern apps). \n\n**Maybe when config change is made something should pop up saying \"A tb restart may be needed for your change to take effect\" and, so \"advanced\" users aren't irritated, a \"don't show this any more\" checkbox should be included.**", "count": 9, "time": "2019-07-27T18:23:47Z", "bug_id": 631362, "attachment_id": null, "creation_time": "2019-07-27T18:23:47Z", "tags": [], "id": 14263849, "is_private": false, "author": "gds@chartertn.net"}, {"id": 15743619, "author": "gds@chartertn.net", "is_private": false, "bug_id": 631362, "creation_time": "2022-01-22T19:54:43Z", "tags": [], "attachment_id": null, "time": "2022-01-22T19:54:43Z", "count": 10, "text": "I just tried this with 3 imap accounts and it worked without collapse-expand on charterr,  aol (yahoo based) and gmail.\n\nStart with Trash as trash folder (has icon)\nGo to server setting and change trash destination to existing folder XXX\nCome back to the normal view and folder XXX now has the icon and Trash doesn't\nDelete a random messages and it goes to XXX.\nCan set Trash back as trash folder in the same way and it has the icon and receives deleted messages again.\n\nSo this appears to now be INVALID but not sure why. I remember working on something like this in the past and a quick scan of the hg log brought up bug 1175446. That fix may have affected this, not sure.", "raw_text": "I just tried this with 3 imap accounts and it worked without collapse-expand on charterr,  aol (yahoo based) and gmail.\n\nStart with Trash as trash folder (has icon)\nGo to server setting and change trash destination to existing folder XXX\nCome back to the normal view and folder XXX now has the icon and Trash doesn't\nDelete a random messages and it goes to XXX.\nCan set Trash back as trash folder in the same way and it has the icon and receives deleted messages again.\n\nSo this appears to now be INVALID but not sure why. I remember working on something like this in the past and a quick scan of the hg log brought up bug 1175446. That fix may have affected this, not sure.", "creator": "gds@chartertn.net"}]}}, "comments": {}}