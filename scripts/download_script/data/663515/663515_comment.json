{"comments": {}, "bugs": {"663515": {"comments": [{"bug_id": 663515, "id": 5525777, "text": "Created attachment 538593\ntestcase\n\nSTEPS TO REPRO:\n 1. Load testcase in a window with at least 2 open tabs.\n 2. Click page (to trigger alert)\n 3. Drag tab off of window (or between windows)\n\nEXPECTED RESULTS: The alert should remain until user actually dismisses it.\n\nACTUAL RESULTS: The alert disappears, and this exception is thrown (& caught by my testcase & appended to innerHTML):\n{\n[Exception... \"prompt aborted by user\" nsresult: \"0x80040111 (NS_ERROR_NOT_AVAILABLE)\" location: \"JS frame :: resource:///components/nsPrompter.js :: openTabPrompt :: line 462\" data: no]\n}\n\nThat points to this line:\nhttp://mxr.mozilla.org/mozilla-central/source/toolkit/components/prompts/src/nsPrompter.js?rev=1d48ae2a81a8#462", "count": 0, "author": "dholbert@mozilla.com", "raw_text": "STEPS TO REPRO:\n 1. Load testcase in a window with at least 2 open tabs.\n 2. Click page (to trigger alert)\n 3. Drag tab off of window (or between windows)\n\nEXPECTED RESULTS: The alert should remain until user actually dismisses it.\n\nACTUAL RESULTS: The alert disappears, and this exception is thrown (& caught by my testcase & appended to innerHTML):\n{\n[Exception... \"prompt aborted by user\" nsresult: \"0x80040111 (NS_ERROR_NOT_AVAILABLE)\" location: \"JS frame :: resource:///components/nsPrompter.js :: openTabPrompt :: line 462\" data: no]\n}\n\nThat points to this line:\nhttp://mxr.mozilla.org/mozilla-central/source/toolkit/components/prompts/src/nsPrompter.js?rev=1d48ae2a81a8#462", "time": "2011-06-10T20:21:08Z", "creation_time": "2011-06-10T20:21:08Z", "is_private": false, "creator": "dholbert@mozilla.com", "tags": [], "attachment_id": 538593}, {"time": "2011-06-12T23:39:09Z", "raw_text": "Hmm, interesting! I don't think we ever considered this when implementing the tab-modal prompts. The basic issue is that the prompt is part of chrome, not content, and so the magic stuff we do with detaching/reattaching docshells for detaching tabs doesn't even know about the prompt. This might be quite tricky to fix, as I suspect the call stack entrains certain things specific to the tab prompt originally shown.\n\nWe might want to consider a workaround of just not allowing tab-detach when the tab is showing a prompt.", "author": "jdinbox@gmail.com", "count": 1, "text": "Hmm, interesting! I don't think we ever considered this when implementing the tab-modal prompts. The basic issue is that the prompt is part of chrome, not content, and so the magic stuff we do with detaching/reattaching docshells for detaching tabs doesn't even know about the prompt. This might be quite tricky to fix, as I suspect the call stack entrains certain things specific to the tab prompt originally shown.\n\nWe might want to consider a workaround of just not allowing tab-detach when the tab is showing a prompt.", "bug_id": 663515, "id": 5528008, "attachment_id": null, "tags": [], "creator": "jdinbox@gmail.com", "creation_time": "2011-06-12T23:39:09Z", "is_private": false}, {"creation_time": "2011-06-12T23:44:00Z", "is_private": false, "creator": "jdinbox@gmail.com", "tags": [], "attachment_id": null, "id": 5528012, "bug_id": 663515, "author": "jdinbox@gmail.com", "text": "Hmm, we might also be able to get away with having nsPrompter detect this, and simply show a new prompt (retaining any state from the old one) before returning to content. Could confuse an addon that's fiddling with prompts, but I'd suspect that's quite rare (and would be broken by tab-detach in general, anyway).", "count": 2, "time": "2011-06-12T23:44:00Z", "raw_text": "Hmm, we might also be able to get away with having nsPrompter detect this, and simply show a new prompt (retaining any state from the old one) before returning to content. Could confuse an addon that's fiddling with prompts, but I'd suspect that's quite rare (and would be broken by tab-detach in general, anyway)."}, {"raw_text": "What do you want to do here?\n\n(In reply to Justin Dolske [:Dolske] from comment #1)\n> We might want to consider a workaround of just not allowing tab-detach when\n> the tab is showing a prompt.\n\nIf we consider this acceptable, is there a boolean flag that indicates whether a tab is showing a prompt?", "time": "2011-12-04T02:41:06Z", "id": 5891096, "bug_id": 663515, "text": "What do you want to do here?\n\n(In reply to Justin Dolske [:Dolske] from comment #1)\n> We might want to consider a workaround of just not allowing tab-detach when\n> the tab is showing a prompt.\n\nIf we consider this acceptable, is there a boolean flag that indicates whether a tab is showing a prompt?", "count": 3, "author": "fryn@frankyan.com", "tags": [], "attachment_id": null, "is_private": false, "creation_time": "2011-12-04T02:41:06Z", "creator": "fryn@frankyan.com"}, {"creator": "mozilla+bmo@noorenberghe.ca", "is_private": false, "creation_time": "2014-05-21T06:41:43Z", "attachment_id": null, "tags": [], "author": "mozilla+bmo@noorenberghe.ca", "count": 4, "text": "Bulk move to Toolkit::Notifications and Alerts\n\nFilter on notifications-and-alerts-component.", "id": 8820017, "bug_id": 663515, "time": "2014-05-21T06:41:43Z", "raw_text": "Bulk move to Toolkit::Notifications and Alerts\n\nFilter on notifications-and-alerts-component."}]}}}