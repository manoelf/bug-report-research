{"bugs": {"668087": {"comments": [{"raw_text": "User Agent: Mozilla/5.0 (X11; Linux i686; rv:5.0) Gecko/20100101 Firefox/5.0\nBuild ID: 20110615151330\n\nSteps to reproduce:\n\n1. If I search for an address by going to \"AddressBook->Edit->Search Addresses\" it finds them correctly (it ALSO works in Calendar for inviting attendees)\n\n2. If I type the name into a \"compose email\" \"to\" field, it cannot find them!\n(This despite setting the LDAP server to be searched in both global and account settings' \"Composition & Addressing\")\n\n\nActual results:\n\nIt doesn't find names in my ldap server via the \"to\" field in the composing window.\n\n\nExpected results:\n\nIt should have found the names just like it does in searching the address book and adding attendees for Calendar.", "attachment_id": null, "id": 5563227, "count": 0, "is_private": false, "creator": "donrhummy@yahoo.com", "text": "User Agent: Mozilla/5.0 (X11; Linux i686; rv:5.0) Gecko/20100101 Firefox/5.0\nBuild ID: 20110615151330\n\nSteps to reproduce:\n\n1. If I search for an address by going to \"AddressBook->Edit->Search Addresses\" it finds them correctly (it ALSO works in Calendar for inviting attendees)\n\n2. If I type the name into a \"compose email\" \"to\" field, it cannot find them!\n(This despite setting the LDAP server to be searched in both global and account settings' \"Composition & Addressing\")\n\n\nActual results:\n\nIt doesn't find names in my ldap server via the \"to\" field in the composing window.\n\n\nExpected results:\n\nIt should have found the names just like it does in searching the address book and adding attendees for Calendar.", "bug_id": 668087, "time": "2011-06-28T23:08:07Z", "tags": [], "creation_time": "2011-06-28T23:08:07Z", "author": "donrhummy@yahoo.com"}, {"count": 1, "bug_id": 668087, "attachment_id": null, "raw_text": "Any errors in Tools -> Error console ?\n\nWhat version of Thunderbird are you using ?", "id": 5569372, "creator": "ludovic@hirlimann.net", "is_private": false, "author": "ludovic@hirlimann.net", "creation_time": "2011-07-01T13:09:59Z", "time": "2011-07-01T13:09:59Z", "tags": [], "text": "Any errors in Tools -> Error console ?\n\nWhat version of Thunderbird are you using ?"}, {"creator": "donrhummy@yahoo.com", "is_private": false, "count": 2, "author": "donrhummy@yahoo.com", "creation_time": "2011-07-01T14:33:17Z", "bug_id": 668087, "tags": [], "time": "2011-07-01T14:33:17Z", "text": "I found the solution. The problem was that Thunderbird was sending the wrong search format from the composition window. Here's the fix:\n\n1. Open preferences->Advanced\n- click the \"Config Editor...\" button (then click \"I'll be careful I promise\")\n\n2. Right click on any of the text you see and choose new->string\n\n3. Create the new string preference name:\n\nldap_2.servers.YOUR_LDAP_SERVER_NAME.autoComplete.filterTemplate\n\n(YOUR_LDAP_SERVER_NAME is the name of your ldap server within Thunderbird's config. This has some rules that change it from what you might think is the name. For example, if you named it \"My LDAP\", the name will be \"MyLDAP\" without a space. If you previously configured an ldap addressbook with that same name, then it'll be \"MyLDAP_1\" or _2, _3 etc)\n\n4. Give it the value\n\n(|(displayName=*%v*)(mail=%v)(uid=%v)) \n\nThat will fix the issue and let it properly search the ldap server.", "attachment_id": null, "raw_text": "I found the solution. The problem was that Thunderbird was sending the wrong search format from the composition window. Here's the fix:\n\n1. Open preferences->Advanced\n- click the \"Config Editor...\" button (then click \"I'll be careful I promise\")\n\n2. Right click on any of the text you see and choose new->string\n\n3. Create the new string preference name:\n\nldap_2.servers.YOUR_LDAP_SERVER_NAME.autoComplete.filterTemplate\n\n(YOUR_LDAP_SERVER_NAME is the name of your ldap server within Thunderbird's config. This has some rules that change it from what you might think is the name. For example, if you named it \"My LDAP\", the name will be \"MyLDAP\" without a space. If you previously configured an ldap addressbook with that same name, then it'll be \"MyLDAP_1\" or _2, _3 etc)\n\n4. Give it the value\n\n(|(displayName=*%v*)(mail=%v)(uid=%v)) \n\nThat will fix the issue and let it properly search the ldap server.", "id": 5569506}, {"id": 5569602, "raw_text": "Not sure why you're marking it as resolved worksforme when it doesn't work for me (and many, many others judging by searching on google) without the fix I posted above. Will that fix be incorporated into Thunderbird?", "attachment_id": null, "time": "2011-07-01T15:18:50Z", "tags": [], "text": "Not sure why you're marking it as resolved worksforme when it doesn't work for me (and many, many others judging by searching on google) without the fix I posted above. Will that fix be incorporated into Thunderbird?", "author": "donrhummy@yahoo.com", "creation_time": "2011-07-01T15:18:50Z", "creator": "donrhummy@yahoo.com", "is_private": false, "bug_id": 668087, "count": 3}, {"author": "ludovic@hirlimann.net", "creation_time": "2011-07-01T15:23:44Z", "bug_id": 668087, "tags": [], "time": "2011-07-01T15:23:44Z", "text": "(In reply to comment #3)\n> Not sure why you're marking it as resolved worksforme when it doesn't work\n> for me (and many, many others judging by searching on google) without the\n> fix I posted above. Will that fix be incorporated into Thunderbird?\n\nWell it's configuration value that works for your LDAP server why should we make this one the default ?", "creator": "ludovic@hirlimann.net", "is_private": false, "count": 4, "id": 5569609, "attachment_id": null, "raw_text": "(In reply to comment #3)\n> Not sure why you're marking it as resolved worksforme when it doesn't work\n> for me (and many, many others judging by searching on google) without the\n> fix I posted above. Will that fix be incorporated into Thunderbird?\n\nWell it's configuration value that works for your LDAP server why should we make this one the default ?"}, {"id": 5569741, "raw_text": "It's not just my LDAP server. Search on google and you'll find hundreds of people all unable to get this autocomplete to work, yet for ALL of them, the search in Address Book works. That means that the composition window's search is wrong and the Address Book's is correct. All I'm suggesting is making the composition window's search the same as the built-in, default Thunderbird search config for Address Book search.", "attachment_id": null, "tags": [], "time": "2011-07-01T16:24:05Z", "text": "It's not just my LDAP server. Search on google and you'll find hundreds of people all unable to get this autocomplete to work, yet for ALL of them, the search in Address Book works. That means that the composition window's search is wrong and the Address Book's is correct. All I'm suggesting is making the composition window's search the same as the built-in, default Thunderbird search config for Address Book search.", "author": "donrhummy@yahoo.com", "creation_time": "2011-07-01T16:24:05Z", "creator": "donrhummy@yahoo.com", "is_private": false, "bug_id": 668087, "count": 5}, {"creator": "standard8@mozilla.com", "is_private": false, "count": 6, "author": "standard8@mozilla.com", "creation_time": "2011-08-04T14:11:53Z", "time": "2011-08-04T14:11:53Z", "bug_id": 668087, "tags": [], "text": "Please can you get an LDAP log file showing both an address book search and a compose window search, without the filterTemplate preference set?\n\n(you'll want NSPR_LOG_MODULES set to ldap:5).\n\nI'd like to figure out exactly what is different between the two and why that causes your lookup to fail.", "attachment_id": null, "raw_text": "Please can you get an LDAP log file showing both an address book search and a compose window search, without the filterTemplate preference set?\n\n(you'll want NSPR_LOG_MODULES set to ldap:5).\n\nI'd like to figure out exactly what is different between the two and why that causes your lookup to fail.", "id": 5633123}, {"id": 5635730, "attachment_id": null, "raw_text": "(In reply to Mark Banner (:standard8) from comment #6)\n> Please can you get an LDAP log file showing both an address book search and\n> a compose window search, without the filterTemplate preference set?\n> \n> (you'll want NSPR_LOG_MODULES set to ldap:5).\n> \n> I'd like to figure out exactly what is different between the two and why\n> that causes your lookup to fail.\n\nNo problem. I don't have time this week, but I'll do this next week.", "author": "donrhummy@yahoo.com", "creation_time": "2011-08-05T14:25:23Z", "bug_id": 668087, "tags": [], "time": "2011-08-05T14:25:23Z", "text": "(In reply to Mark Banner (:standard8) from comment #6)\n> Please can you get an LDAP log file showing both an address book search and\n> a compose window search, without the filterTemplate preference set?\n> \n> (you'll want NSPR_LOG_MODULES set to ldap:5).\n> \n> I'd like to figure out exactly what is different between the two and why\n> that causes your lookup to fail.\n\nNo problem. I don't have time this week, but I'll do this next week.", "creator": "donrhummy@yahoo.com", "is_private": false, "count": 7}, {"id": 5642750, "raw_text": "(In reply to Mark Banner (:standard8) from comment #6)\n> Please can you get an LDAP log file showing both an address book search and\n> a compose window search, without the filterTemplate preference set?\n> \n> (you'll want NSPR_LOG_MODULES set to ldap:5).\n> \n> I'd like to figure out exactly what is different between the two and why\n> that causes your lookup to fail.\n\nOK, here's what I found:\n\n(NOTE: All searches were for a person named \"stan\")\n\n1. SEARCHING WITH MY FIX IN PLACE (i.e. a filterTemplate)\n\n    //The LDAP server was sent the following search request\n    (|(uid=stan)(mail=stan)(displayname=*stan*)(cn=stan)(givenname=stan)(sn=stan))\n\nThe above search returned all 5 possible matches correctly.\n\n\n\n2. SEARCHING WITH THUNDERBIRD'S DEFAULT (i.e. no filterTemplate)\n\n    //The LDAP server was sent the following search request\n    (|(sn=stan*)(cn=stan*)(mail=stan*))\n\nThe above search returned ZERO results.\n\nHope this helps!", "attachment_id": null, "text": "(In reply to Mark Banner (:standard8) from comment #6)\n> Please can you get an LDAP log file showing both an address book search and\n> a compose window search, without the filterTemplate preference set?\n> \n> (you'll want NSPR_LOG_MODULES set to ldap:5).\n> \n> I'd like to figure out exactly what is different between the two and why\n> that causes your lookup to fail.\n\nOK, here's what I found:\n\n(NOTE: All searches were for a person named \"stan\")\n\n1. SEARCHING WITH MY FIX IN PLACE (i.e. a filterTemplate)\n\n    //The LDAP server was sent the following search request\n    (|(uid=stan)(mail=stan)(displayname=*stan*)(cn=stan)(givenname=stan)(sn=stan))\n\nThe above search returned all 5 possible matches correctly.\n\n\n\n2. SEARCHING WITH THUNDERBIRD'S DEFAULT (i.e. no filterTemplate)\n\n    //The LDAP server was sent the following search request\n    (|(sn=stan*)(cn=stan*)(mail=stan*))\n\nThe above search returned ZERO results.\n\nHope this helps!", "time": "2011-08-09T17:55:40Z", "tags": [], "creation_time": "2011-08-09T17:55:40Z", "author": "donrhummy@yahoo.com", "is_private": false, "creator": "donrhummy@yahoo.com", "bug_id": 668087, "count": 8}, {"raw_text": "Could you compare the results for a Thunderbird version that you think was working, and one without?\n\nI'm still not sure when you think this stopped working correctly and I'd like to actually find out what changed and what is different in the output, rather than assuming a change will work (for instance, I think your change won't work for all cases).", "attachment_id": null, "id": 5642812, "count": 9, "creator": "standard8@mozilla.com", "is_private": false, "tags": [], "bug_id": 668087, "time": "2011-08-09T18:16:53Z", "text": "Could you compare the results for a Thunderbird version that you think was working, and one without?\n\nI'm still not sure when you think this stopped working correctly and I'd like to actually find out what changed and what is different in the output, rather than assuming a change will work (for instance, I think your change won't work for all cases).", "author": "standard8@mozilla.com", "creation_time": "2011-08-09T18:16:53Z"}, {"count": 10, "bug_id": 668087, "attachment_id": null, "raw_text": "(In reply to Mark Banner (:standard8) from comment #9)\n> Could you compare the results for a Thunderbird version that you think was\n> working, and one without?\n\nWait, I don't understand. It NEVER worked in Thunderbird for me until I made that change. And I know I'm not alone because a lot of other people also had the same problem.\n\n> I'm still not sure when you think this stopped working correctly and I'd\n> like to actually find out what changed and what is different in the output,\n> rather than assuming a change will work (for instance, I think your change\n> won't work for all cases).\n\nI'm not saying my choice of search is necessarily the perfect one (you could put asterisks before/after all the options) but I know for my LDAP server (MS Exchange) and that of many other people:\n\n1. The default in the \"To/Bcc/Cc\" filed does not work\n2. The default in addressbook search is different and DOES work (And I never changed that one)", "id": 5642954, "is_private": false, "creator": "donrhummy@yahoo.com", "creation_time": "2011-08-09T19:03:17Z", "author": "donrhummy@yahoo.com", "text": "(In reply to Mark Banner (:standard8) from comment #9)\n> Could you compare the results for a Thunderbird version that you think was\n> working, and one without?\n\nWait, I don't understand. It NEVER worked in Thunderbird for me until I made that change. And I know I'm not alone because a lot of other people also had the same problem.\n\n> I'm still not sure when you think this stopped working correctly and I'd\n> like to actually find out what changed and what is different in the output,\n> rather than assuming a change will work (for instance, I think your change\n> won't work for all cases).\n\nI'm not saying my choice of search is necessarily the perfect one (you could put asterisks before/after all the options) but I know for my LDAP server (MS Exchange) and that of many other people:\n\n1. The default in the \"To/Bcc/Cc\" filed does not work\n2. The default in addressbook search is different and DOES work (And I never changed that one)", "tags": [], "time": "2011-08-09T19:03:17Z"}, {"raw_text": "Ah ok, thanks that wasn't entirely clear.\n\nCan you log then log a similar search from the address book and post the search request that Thunderbird sends?\n\nAlso, do you know what schema your LDAP server uses?", "attachment_id": null, "id": 5643030, "is_private": false, "creator": "standard8@mozilla.com", "text": "Ah ok, thanks that wasn't entirely clear.\n\nCan you log then log a similar search from the address book and post the search request that Thunderbird sends?\n\nAlso, do you know what schema your LDAP server uses?", "time": "2011-08-09T19:25:01Z", "tags": [], "creation_time": "2011-08-09T19:25:01Z", "author": "standard8@mozilla.com", "count": 11, "bug_id": 668087}, {"creator": "donrhummy@yahoo.com", "is_private": false, "count": 12, "author": "donrhummy@yahoo.com", "creation_time": "2011-08-10T01:00:38Z", "bug_id": 668087, "time": "2011-08-10T01:00:38Z", "tags": [], "text": "Addressbook sends the following:\n\n    (|(sn=*%v*)(cn=*%v*)(mail=*%v*)(givenname=*%v*))\n\nAny idea where I can change that? \n\nI know I can change the autocomplete one via \"ldap_2.servers.myserver.autoComplete.filterTemplate\", is there such a thing for the addressbook?\n\nI'm not sure on the schema for my ldap server. How would I figure this out?", "attachment_id": null, "raw_text": "Addressbook sends the following:\n\n    (|(sn=*%v*)(cn=*%v*)(mail=*%v*)(givenname=*%v*))\n\nAny idea where I can change that? \n\nI know I can change the autocomplete one via \"ldap_2.servers.myserver.autoComplete.filterTemplate\", is there such a thing for the addressbook?\n\nI'm not sure on the schema for my ldap server. How would I figure this out?", "id": 5644068}, {"creator": "standard8@mozilla.com", "is_private": false, "count": 13, "author": "standard8@mozilla.com", "creation_time": "2011-08-10T09:05:51Z", "bug_id": 668087, "time": "2011-08-10T09:05:51Z", "tags": [], "text": "Thanks, that's useful. I've answered the address book query about the search filter on a different bug.\n\nThis is really helpful, and I think we're getting closer to resolving this bug for all users.\n\nSo in short:\n\nAutocomplete: (|(sn=stan*)(cn=stan*)(mail=stan*))\n\n-> Surname, Common name (aka Display Name), email\n\nAddressBook: (|(sn=*%v*)(cn=*%v*)(mail=*%v*)(givenname=*%v*))\n\n-> Surname, Common name (aka Display Name), email, first name\n\nThere's obviously two things that are different here, 1) the addition of givenname, 2) searching at the beginning of the string versus searching within the string.\n\nCan you try changing ldap_2.servers.myserver.autoComplete.filterTemplate to the following and tell me if they work or not for searching for the beginning of a surname:\n\n(|(sn=%v*))\n(|(sn=*%v*))\n\nIf neither work, try changing sn to mail and searching for the start of an email address.", "attachment_id": null, "raw_text": "Thanks, that's useful. I've answered the address book query about the search filter on a different bug.\n\nThis is really helpful, and I think we're getting closer to resolving this bug for all users.\n\nSo in short:\n\nAutocomplete: (|(sn=stan*)(cn=stan*)(mail=stan*))\n\n-> Surname, Common name (aka Display Name), email\n\nAddressBook: (|(sn=*%v*)(cn=*%v*)(mail=*%v*)(givenname=*%v*))\n\n-> Surname, Common name (aka Display Name), email, first name\n\nThere's obviously two things that are different here, 1) the addition of givenname, 2) searching at the beginning of the string versus searching within the string.\n\nCan you try changing ldap_2.servers.myserver.autoComplete.filterTemplate to the following and tell me if they work or not for searching for the beginning of a surname:\n\n(|(sn=%v*))\n(|(sn=*%v*))\n\nIf neither work, try changing sn to mail and searching for the start of an email address.", "id": 5644554}, {"is_private": false, "creator": "donrhummy@yahoo.com", "text": "(In reply to Mark Banner (:standard8) from comment #13)\n> (|(sn=%v*))\n> (|(sn=*%v*))\n> \n\nThey both work.", "tags": [], "time": "2011-08-10T18:15:55Z", "creation_time": "2011-08-10T18:15:55Z", "author": "donrhummy@yahoo.com", "raw_text": "(In reply to Mark Banner (:standard8) from comment #13)\n> (|(sn=%v*))\n> (|(sn=*%v*))\n> \n\nThey both work.", "attachment_id": null, "id": 5645564, "count": 14, "bug_id": 668087}, {"author": "donrhummy@yahoo.com", "creation_time": "2011-08-10T18:20:52Z", "time": "2011-08-10T18:20:52Z", "bug_id": 668087, "tags": [], "text": "(In reply to donrhummy from comment #14)\n> (In reply to Mark Banner (:standard8) from comment #13)\n> > (|(sn=%v*))\n> > (|(sn=*%v*))\n> > \n> \n> They both work.\n\nWhoops, sorry. Don't know why I posted that. ONLY the second one works.\n\nWORKS: (|(sn=*%v*))\n\nDOES NOT WORK: (|(sn=%v*))", "creator": "donrhummy@yahoo.com", "is_private": false, "count": 15, "id": 5645589, "attachment_id": null, "raw_text": "(In reply to donrhummy from comment #14)\n> (In reply to Mark Banner (:standard8) from comment #13)\n> > (|(sn=%v*))\n> > (|(sn=*%v*))\n> > \n> \n> They both work.\n\nWhoops, sorry. Don't know why I posted that. ONLY the second one works.\n\nWORKS: (|(sn=*%v*))\n\nDOES NOT WORK: (|(sn=%v*))"}, {"id": 5653744, "attachment_id": null, "raw_text": "(In reply to donrhummy from comment #15)\n> WORKS: (|(sn=*%v*))\n> \n> DOES NOT WORK: (|(sn=%v*))\n\nJust to clarify, this doesn't work even if you're just searching for the start of a name (which is what autocomplete currently does in TB)?\n\nThe docs I've seen on exchange imply that both of these cases should work for finding the beginning of someone's name.", "creation_time": "2011-08-15T10:34:33Z", "author": "standard8@mozilla.com", "text": "(In reply to donrhummy from comment #15)\n> WORKS: (|(sn=*%v*))\n> \n> DOES NOT WORK: (|(sn=%v*))\n\nJust to clarify, this doesn't work even if you're just searching for the start of a name (which is what autocomplete currently does in TB)?\n\nThe docs I've seen on exchange imply that both of these cases should work for finding the beginning of someone's name.", "time": "2011-08-15T10:34:33Z", "tags": [], "is_private": false, "creator": "standard8@mozilla.com", "bug_id": 668087, "count": 16}, {"bug_id": 668087, "count": 17, "id": 5717862, "attachment_id": null, "raw_text": "(In reply to Mark Banner (:standard8) from comment #16)\n> (In reply to donrhummy from comment #15)\n> > WORKS: (|(sn=*%v*))\n> > \n> > DOES NOT WORK: (|(sn=%v*))\n> \n> Just to clarify, this doesn't work even if you're just searching for the\n> start of a name (which is what autocomplete currently does in TB)?\n\nSorry, I didn't reply earlier, work's been nuts. That is correct. No idea about why, but when I searched for someone names \"sarah\" and I typed in just the letter \"s\", it still didn't find her with that query config.", "author": "donrhummy@yahoo.com", "creation_time": "2011-09-14T23:05:30Z", "time": "2011-09-14T23:05:30Z", "tags": [], "text": "(In reply to Mark Banner (:standard8) from comment #16)\n> (In reply to donrhummy from comment #15)\n> > WORKS: (|(sn=*%v*))\n> > \n> > DOES NOT WORK: (|(sn=%v*))\n> \n> Just to clarify, this doesn't work even if you're just searching for the\n> start of a name (which is what autocomplete currently does in TB)?\n\nSorry, I didn't reply earlier, work's been nuts. That is correct. No idea about why, but when I searched for someone names \"sarah\" and I typed in just the letter \"s\", it still didn't find her with that query config.", "creator": "donrhummy@yahoo.com", "is_private": false}, {"bug_id": 668087, "count": 18, "id": 5733175, "attachment_id": null, "raw_text": "Ok, this is really looking to be a server issue.\n\nDo you know, or could you find out which server and version you are talking to?", "author": "standard8@mozilla.com", "creation_time": "2011-09-23T09:12:41Z", "time": "2011-09-23T09:12:41Z", "tags": [], "text": "Ok, this is really looking to be a server issue.\n\nDo you know, or could you find out which server and version you are talking to?", "creator": "standard8@mozilla.com", "is_private": false}, {"bug_id": 668087, "count": 19, "text": "(In reply to Mark Banner (:standard8) from comment #18)\n> Ok, this is really looking to be a server issue.\n> \nbut its not just a server issue. also at issue is the fact that the search queries are different in auto complete versus\naddress book. they need to be made consistent.", "tags": [], "time": "2011-09-24T17:57:31Z", "creation_time": "2011-09-24T17:57:31Z", "author": "donrhummy@yahoo.com", "is_private": false, "creator": "donrhummy@yahoo.com", "id": 5735532, "raw_text": "(In reply to Mark Banner (:standard8) from comment #18)\n> Ok, this is really looking to be a server issue.\n> \nbut its not just a server issue. also at issue is the fact that the search queries are different in auto complete versus\naddress book. they need to be made consistent.", "attachment_id": null}, {"attachment_id": null, "raw_text": "(In reply to donrhummy from comment #19)\n> (In reply to Mark Banner (:standard8) from comment #18)\n> > Ok, this is really looking to be a server issue.\n> > \n> but its not just a server issue. also at issue is the fact that the search\n> queries are different in auto complete versus\n> address book. they need to be made consistent.\n\nI'm not convinced about that yet - start of word search feels more appropriate to me for autocomplete, although I have been discussing it with our user experience team.\n\nThe fact remains that your server still has an issue, so I'd like to find out which one so I can see if I can report it back.", "id": 5735642, "is_private": false, "creator": "standard8@mozilla.com", "count": 20, "creation_time": "2011-09-24T21:18:33Z", "author": "standard8@mozilla.com", "text": "(In reply to donrhummy from comment #19)\n> (In reply to Mark Banner (:standard8) from comment #18)\n> > Ok, this is really looking to be a server issue.\n> > \n> but its not just a server issue. also at issue is the fact that the search\n> queries are different in auto complete versus\n> address book. they need to be made consistent.\n\nI'm not convinced about that yet - start of word search feels more appropriate to me for autocomplete, although I have been discussing it with our user experience team.\n\nThe fact remains that your server still has an issue, so I'd like to find out which one so I can see if I can report it back.", "time": "2011-09-24T21:18:33Z", "bug_id": 668087, "tags": []}, {"count": 21, "is_private": false, "creator": "donrhummy@yahoo.com", "text": "I believe it's MS Exchange Server 6.5 service pack 2", "time": "2011-09-29T19:51:33Z", "tags": [], "bug_id": 668087, "creation_time": "2011-09-29T19:51:33Z", "author": "donrhummy@yahoo.com", "raw_text": "I believe it's MS Exchange Server 6.5 service pack 2", "attachment_id": null, "id": 5747264}, {"bug_id": 668087, "count": 22, "id": 6196998, "raw_text": "Mark, do we need an ldap log?", "attachment_id": null, "tags": [], "time": "2012-04-04T15:23:22Z", "text": "Mark, do we need an ldap log?", "author": "vseerror@lehigh.edu", "creation_time": "2012-04-04T15:23:22Z", "creator": "vseerror@lehigh.edu", "is_private": false}, {"bug_id": 668087, "count": 23, "author": "euryalus.0@gmail.com", "creation_time": "2013-01-28T10:58:51Z", "tags": [], "time": "2013-01-28T10:58:51Z", "text": "*** Bug 748729 has been marked as a duplicate of this bug. ***", "creator": "euryalus.0@gmail.com", "is_private": false, "id": 7043983, "attachment_id": null, "raw_text": ""}, {"attachment_id": null, "raw_text": "I have copied my findings from the duplicate bug-report 748729 in here.\nHopefully my findings are helpful in resolving this issue.\nIMHO the issue is in the Thunderbird client and not at the LDAP-server side...\n-=-=-=-=-\n\nSteps to reproduce:\n\nAction(1):\n  In a new message compose window write in \"To:\"-field a string\n\nAction(2):\n  In a new message compose window and inside the Contact-sidebar write in \"Search For\"-field the same string.\n\nActual results:\n  Action(1) There was NO contacts shown.\n  Action(2) There where contacts shown.\n\nExpected results:\n  In both ways the same list of contacts/addresses should show up and as such I see this as unexpected behavior.\n\n\nWhile debugging using the DavMail I found the LDAP-search-string being different in both actions;\nwhich obviously lead to different results.\n\nThe string \"meld\" was entered and was shown in the debug as:\n  Action(1) shows: (|(mail=meld*)(cn=meld*)(sn=meld*)) returning attributes: [mail, cn]\n  Action(2) shows: (|(cn=*meld*)(givenname=*meld*)(mail=*meld*)(sn=*meld*)) returning attributes: [custom1, etc......]\n\nIn order to fix this behavior the LDAP-query of (1) needs to be changed into something similar to:\n   (|(cn=*meld*)(givenname=*meld*)(mail=*meld*)(sn=*meld*)) returning attributes: [mail, cn]\n\n\np.s. a screenshot is enclosed to show the difference...", "id": 7050963, "creator": "brouwer.f@xs4all.nl", "is_private": false, "author": "brouwer.f@xs4all.nl", "creation_time": "2013-01-29T22:16:19Z", "time": "2013-01-29T22:16:19Z", "tags": [], "text": "I have copied my findings from the duplicate bug-report 748729 in here.\nHopefully my findings are helpful in resolving this issue.\nIMHO the issue is in the Thunderbird client and not at the LDAP-server side...\n-=-=-=-=-\n\nSteps to reproduce:\n\nAction(1):\n  In a new message compose window write in \"To:\"-field a string\n\nAction(2):\n  In a new message compose window and inside the Contact-sidebar write in \"Search For\"-field the same string.\n\nActual results:\n  Action(1) There was NO contacts shown.\n  Action(2) There where contacts shown.\n\nExpected results:\n  In both ways the same list of contacts/addresses should show up and as such I see this as unexpected behavior.\n\n\nWhile debugging using the DavMail I found the LDAP-search-string being different in both actions;\nwhich obviously lead to different results.\n\nThe string \"meld\" was entered and was shown in the debug as:\n  Action(1) shows: (|(mail=meld*)(cn=meld*)(sn=meld*)) returning attributes: [mail, cn]\n  Action(2) shows: (|(cn=*meld*)(givenname=*meld*)(mail=*meld*)(sn=*meld*)) returning attributes: [custom1, etc......]\n\nIn order to fix this behavior the LDAP-query of (1) needs to be changed into something similar to:\n   (|(cn=*meld*)(givenname=*meld*)(mail=*meld*)(sn=*meld*)) returning attributes: [mail, cn]\n\n\np.s. a screenshot is enclosed to show the difference...", "count": 24, "bug_id": 668087}, {"creator": "brouwer.f@xs4all.nl", "is_private": false, "count": 25, "author": "brouwer.f@xs4all.nl", "creation_time": "2013-01-29T22:17:32Z", "bug_id": 668087, "time": "2013-01-29T22:17:32Z", "tags": [], "text": "Created attachment 707817\nShows the different behavior while searching", "attachment_id": 707817, "raw_text": "", "id": 7050971}, {"is_private": false, "creator": "peter.hozak@gmail.com", "count": 26, "creation_time": "2013-07-05T10:26:50Z", "author": "peter.hozak@gmail.com", "text": "Thunderbird 17.0.7\n\nAutocomplete in \"To:\" field of a new message worked for me - only after I edited Tools  > Options > Composition > Addressing > Directory Server, also it would autocomplete only accounts with email, i.e. (mail=*).", "tags": [], "time": "2013-07-05T10:26:50Z", "bug_id": 668087, "attachment_id": null, "raw_text": "Thunderbird 17.0.7\n\nAutocomplete in \"To:\" field of a new message worked for me - only after I edited Tools  > Options > Composition > Addressing > Directory Server, also it would autocomplete only accounts with email, i.e. (mail=*).", "id": 7605667}, {"creator": "cordes.ben@gmail.com", "is_private": false, "count": 27, "author": "cordes.ben@gmail.com", "creation_time": "2013-12-04T19:37:50Z", "time": "2013-12-04T19:37:50Z", "tags": [], "bug_id": 668087, "text": "Thunderbird 24.1.1, Ubuntu 13.04\n\nSame problem: LDAP lookup works in Address Book but not in Compose.\n\nI turned on LDAP logging, then tried the following:\n\n1) Running a query in AddressBook works. I am able to duplicate the query on the command line (with ldapsearch) and get the same results.\n\n2) Running a query in Compose produces a query in the log, but does not return any results. However, I am able to duplicate the query (which is different than the AddressBook query) on the command line and get valid results.\n\n3) I set a filterTemplate in my config such that (according to the log) the query produced by Compose is identical to the query produced by AddressBook. Still, Compose does not return results, but I can get results on the command line.\n\n4) If I set other arcane options, such as ldap_2.servers.foo.attributes.givenName, or ldap_2.servers.foo.autoComplete.nameFormat, or ldap_2.servers.foo.autoComplete.commentFormat, I can see the changes in the logfile that I would expect during the Compose query, but it still doesn't return any results.\n\n5) Clicking the 'Download Now' button on the Offline tab of Directory Server Properties returns 'Replication succeeded' very very quickly and doesn't appear to change any of the above behaviors. It does create an \"ldap-1.mab\" file that doesn't contain any actual directory entries. Deleting this file doesn't appear to change any of the above behaviors.\n\nAlso, I ran up Wireshark to make sure that the LDAP queries are actually leaving my machine, and they all appear to be.", "attachment_id": null, "raw_text": "Thunderbird 24.1.1, Ubuntu 13.04\n\nSame problem: LDAP lookup works in Address Book but not in Compose.\n\nI turned on LDAP logging, then tried the following:\n\n1) Running a query in AddressBook works. I am able to duplicate the query on the command line (with ldapsearch) and get the same results.\n\n2) Running a query in Compose produces a query in the log, but does not return any results. However, I am able to duplicate the query (which is different than the AddressBook query) on the command line and get valid results.\n\n3) I set a filterTemplate in my config such that (according to the log) the query produced by Compose is identical to the query produced by AddressBook. Still, Compose does not return results, but I can get results on the command line.\n\n4) If I set other arcane options, such as ldap_2.servers.foo.attributes.givenName, or ldap_2.servers.foo.autoComplete.nameFormat, or ldap_2.servers.foo.autoComplete.commentFormat, I can see the changes in the logfile that I would expect during the Compose query, but it still doesn't return any results.\n\n5) Clicking the 'Download Now' button on the Offline tab of Directory Server Properties returns 'Replication succeeded' very very quickly and doesn't appear to change any of the above behaviors. It does create an \"ldap-1.mab\" file that doesn't contain any actual directory entries. Deleting this file doesn't appear to change any of the above behaviors.\n\nAlso, I ran up Wireshark to make sure that the LDAP queries are actually leaving my machine, and they all appear to be.", "id": 8155700}, {"count": 28, "bug_id": 668087, "attachment_id": null, "raw_text": "Doesn't work for me in 24.2, Windows 7, Compose-Window/Autocomplete, if the mail-attribute has been replaced by an ldap-specific one in ldap_2.servers.YOUR_LDAP_SERVER_NAME.autoComplete.filterTemplate.", "id": 8205660, "is_private": false, "creator": "pet.ebe@refofd.verwalt-berlin.de", "creation_time": "2013-12-17T15:31:57Z", "author": "pet.ebe@refofd.verwalt-berlin.de", "text": "Doesn't work for me in 24.2, Windows 7, Compose-Window/Autocomplete, if the mail-attribute has been replaced by an ldap-specific one in ldap_2.servers.YOUR_LDAP_SERVER_NAME.autoComplete.filterTemplate.", "time": "2013-12-17T15:31:57Z", "tags": []}, {"raw_text": "Doesn't work for me either (v. 24.2.0).\nWorks fine in address book, doesn't work for autocomplete.\nautoComplete.filterTemplate doesn't help.\n\nWhen I search in Address book, I see ldap query (firewall monitor). When I type something in \"To:\" field - there's no ldap query at all (???).", "attachment_id": null, "id": 8226550, "creator": "watergad@rambler.ru", "is_private": false, "tags": [], "time": "2013-12-25T09:55:11Z", "text": "Doesn't work for me either (v. 24.2.0).\nWorks fine in address book, doesn't work for autocomplete.\nautoComplete.filterTemplate doesn't help.\n\nWhen I search in Address book, I see ldap query (firewall monitor). When I type something in \"To:\" field - there's no ldap query at all (???).", "author": "watergad@rambler.ru", "creation_time": "2013-12-25T09:55:11Z", "count": 29, "bug_id": 668087}, {"author": "watergad@rambler.ru", "creation_time": "2013-12-25T10:55:31Z", "tags": [], "time": "2013-12-25T10:55:31Z", "text": "(In reply to Watergad from comment #29)\nDone.\nDespite global settings were set for LDAP, Tools -> Accounts -> Manage identities: No LDAP had been set for my account. Works fine after changing to Global.", "creator": "watergad@rambler.ru", "is_private": false, "id": 8226557, "attachment_id": null, "raw_text": "(In reply to Watergad from comment #29)\nDone.\nDespite global settings were set for LDAP, Tools -> Accounts -> Manage identities: No LDAP had been set for my account. Works fine after changing to Global.", "bug_id": 668087, "count": 30}, {"id": 8551729, "attachment_id": null, "raw_text": "I see the same problem with TB 24.4.0 on Windows 7 - no LDAP query to the LDAP server from the compose window, though it does work from the Address Book.\n\nUsing tcpdump on the LDAP server I see there's no attempt from TB to communicate with it at all when trying a lookup from the compose window.", "creation_time": "2014-03-19T10:43:52Z", "author": "liam.gretton@gmail.com", "text": "I see the same problem with TB 24.4.0 on Windows 7 - no LDAP query to the LDAP server from the compose window, though it does work from the Address Book.\n\nUsing tcpdump on the LDAP server I see there's no attempt from TB to communicate with it at all when trying a lookup from the compose window.", "time": "2014-03-19T10:43:52Z", "tags": [], "bug_id": 668087, "is_private": false, "creator": "liam.gretton@gmail.com", "count": 31}, {"id": 8676789, "raw_text": "I can also reproduce this problem with Thunderbird 24.4.0 on Windows 7; setting up an authenticated bind to Active Directory allows searching by the user's first name in the Address Book window, but not in the Write window. It would be highly preferable if we could specify which LDAP fields are used for searching and display when auto-completing anywhere in Thunderbird.", "attachment_id": null, "text": "I can also reproduce this problem with Thunderbird 24.4.0 on Windows 7; setting up an authenticated bind to Active Directory allows searching by the user's first name in the Address Book window, but not in the Write window. It would be highly preferable if we could specify which LDAP fields are used for searching and display when auto-completing anywhere in Thunderbird.", "bug_id": 668087, "time": "2014-04-17T15:37:17Z", "tags": [], "creation_time": "2014-04-17T15:37:17Z", "author": "amartin@xes-inc.com", "count": 32, "is_private": false, "creator": "amartin@xes-inc.com"}, {"text": "Same for me on Linux (OpenSuse 13.1 and Thunderbird 24.5\u00b0\n\nIn the LDAP address book, I can change the CN by Fullname, but when I write an email, the CN comes in place of Fullname.\n\nIn my address book, the CN is a random value not a real name. We can't send this display name in an email.\n\nCan you provide a solution?\n\nthx", "time": "2014-05-16T10:05:45Z", "bug_id": 668087, "tags": [], "creation_time": "2014-05-16T10:05:45Z", "author": "serge.tellier@gmail.com", "count": 33, "is_private": false, "creator": "serge.tellier@gmail.com", "id": 8801597, "raw_text": "Same for me on Linux (OpenSuse 13.1 and Thunderbird 24.5\u00b0\n\nIn the LDAP address book, I can change the CN by Fullname, but when I write an email, the CN comes in place of Fullname.\n\nIn my address book, the CN is a random value not a real name. We can't send this display name in an email.\n\nCan you provide a solution?\n\nthx", "attachment_id": null}, {"attachment_id": null, "raw_text": "We used Thunderbird versions from 3.x to 24.x and did not see this problem (Active Directory ldap address book. Thunderbird on Windows and Debian).\n\nFollowing the upgrade on Windows to version 31, we observed the behaviour reported here. ie: Can look up addresses in the address book (or contacts sidebar), but ldap addresses do not autocomplete.\n\nInterestingly, if I type in the recipient's email address in full, Thunderbird autocompletes the entry. (IE:  \"address@mydomain.com\" is autocompleted to \"Firstname Surname <address@mydomain.com>\"). But reverse-autocompletion is of limited usefulness. ;)\n\nAdditionally, if I change the Base DN from \"dc=mydomain,dc=com,dc=au\" to \"cn=users,dc=mydomain,dc=com,dc=au\" Autocomplete works as before.   The downside of this, of course, is we can no longer search the whole domain.", "id": 9140450, "is_private": false, "creator": "bhay@tsl.com.au", "count": 34, "creation_time": "2014-08-05T02:28:50Z", "author": "bhay@tsl.com.au", "text": "We used Thunderbird versions from 3.x to 24.x and did not see this problem (Active Directory ldap address book. Thunderbird on Windows and Debian).\n\nFollowing the upgrade on Windows to version 31, we observed the behaviour reported here. ie: Can look up addresses in the address book (or contacts sidebar), but ldap addresses do not autocomplete.\n\nInterestingly, if I type in the recipient's email address in full, Thunderbird autocompletes the entry. (IE:  \"address@mydomain.com\" is autocompleted to \"Firstname Surname <address@mydomain.com>\"). But reverse-autocompletion is of limited usefulness. ;)\n\nAdditionally, if I change the Base DN from \"dc=mydomain,dc=com,dc=au\" to \"cn=users,dc=mydomain,dc=com,dc=au\" Autocomplete works as before.   The downside of this, of course, is we can no longer search the whole domain.", "bug_id": 668087, "time": "2014-08-05T02:28:50Z", "tags": []}, {"bug_id": 668087, "count": 35, "author": "standard8@mozilla.com", "creation_time": "2014-08-05T08:27:11Z", "tags": [], "time": "2014-08-05T08:27:11Z", "text": "(In reply to Ben Hay from comment #34)\n> We used Thunderbird versions from 3.x to 24.x and did not see this problem\n> (Active Directory ldap address book. Thunderbird on Windows and Debian).\n\nHi Ben, please can you file a new bug on this issue, and reference it here. It obviously needs addressing, but trying to overload and already overloaded old bug with a new issue is not a good idea...", "creator": "standard8@mozilla.com", "is_private": false, "id": 9141306, "attachment_id": null, "raw_text": "(In reply to Ben Hay from comment #34)\n> We used Thunderbird versions from 3.x to 24.x and did not see this problem\n> (Active Directory ldap address book. Thunderbird on Windows and Debian).\n\nHi Ben, please can you file a new bug on this issue, and reference it here. It obviously needs addressing, but trying to overload and already overloaded old bug with a new issue is not a good idea..."}, {"raw_text": "Has there been any progress on this bug? It is still affecting me", "attachment_id": null, "id": 9629303, "count": 36, "is_private": false, "creator": "amartin@xes-inc.com", "text": "Has there been any progress on this bug? It is still affecting me", "time": "2014-11-24T15:00:34Z", "tags": [], "bug_id": 668087, "creation_time": "2014-11-24T15:00:34Z", "author": "amartin@xes-inc.com"}, {"text": "(In reply to Mark Banner (:standard8) from comment #35)\n> (In reply to Ben Hay from comment #34)\n> > We used Thunderbird versions from 3.x to 24.x and did not see this problem\n> > (Active Directory ldap address book. Thunderbird on Windows and Debian).\n> \n> Hi Ben, please can you file a new bug on this issue, and reference it here.\n> It obviously needs addressing, but trying to overload and already overloaded\n> old bug with a new issue is not a good idea...\n\nA bug report related to this has been opened: https://bugzilla.mozilla.org/show_bug.cgi?id=1010297", "tags": [], "bug_id": 668087, "time": "2014-12-05T11:49:58Z", "creation_time": "2014-12-05T11:49:58Z", "author": "stvdo@gmx.net", "count": 37, "is_private": false, "creator": "stvdo@gmx.net", "id": 9663324, "raw_text": "(In reply to Mark Banner (:standard8) from comment #35)\n> (In reply to Ben Hay from comment #34)\n> > We used Thunderbird versions from 3.x to 24.x and did not see this problem\n> > (Active Directory ldap address book. Thunderbird on Windows and Debian).\n> \n> Hi Ben, please can you file a new bug on this issue, and reference it here.\n> It obviously needs addressing, but trying to overload and already overloaded\n> old bug with a new issue is not a good idea...\n\nA bug report related to this has been opened: https://bugzilla.mozilla.org/show_bug.cgi?id=1010297", "attachment_id": null}, {"text": "Aceman, I am wondering if we can fix this bug for LDAP ABs along the lines of Mark's comment 13.\n1) LDAP search fields for AB vs. Autocomplete should be the same (simple fix)\n2) does our results searching algorithm from Bug 970456 also work for LDAP results?\n- iow, how are LDAP results currently sorted in?\n- if not, can we make it work on LDAP results?\n(I think it should be possible if we're just sorting results which we have already obtained)\n3) If we can get post-filter-sorting 2) to work, then we should consider using .contains algorithm *%v* for LDAP too, as we now do for local AB quicksearch AND local AB autocomplete!\n\n(In reply to Mark Banner (:standard8) from comment #13)\n> Thanks, that's useful. I've answered the address book query about the search\n> filter on a different bug.\n> \n> This is really helpful, and I think we're getting closer to resolving this\n> bug for all users.\n> \n> So in short:\n> \n> Autocomplete: (|(sn=stan*)(cn=stan*)(mail=stan*))\n> \n> -> Surname, Common name (aka Display Name), email\n> \n> AddressBook: (|(sn=*%v*)(cn=*%v*)(mail=*%v*)(givenname=*%v*))\n> \n> -> Surname, Common name (aka Display Name), email, first name\n> \n> There's obviously two things that are different here, 1) the addition of\n> givenname, 2) searching at the beginning of the string versus searching\n> within the string.\n> [SNIP]", "tags": [], "bug_id": 668087, "time": "2014-12-28T16:55:34Z", "creation_time": "2014-12-28T16:55:34Z", "author": "bugzilla2007@duellmann24.net", "count": 38, "is_private": false, "creator": "bugzilla2007@duellmann24.net", "id": 9736278, "raw_text": "Aceman, I am wondering if we can fix this bug for LDAP ABs along the lines of Mark's comment 13.\n1) LDAP search fields for AB vs. Autocomplete should be the same (simple fix)\n2) does our results searching algorithm from Bug 970456 also work for LDAP results?\n- iow, how are LDAP results currently sorted in?\n- if not, can we make it work on LDAP results?\n(I think it should be possible if we're just sorting results which we have already obtained)\n3) If we can get post-filter-sorting 2) to work, then we should consider using .contains algorithm *%v* for LDAP too, as we now do for local AB quicksearch AND local AB autocomplete!\n\n(In reply to Mark Banner (:standard8) from comment #13)\n> Thanks, that's useful. I've answered the address book query about the search\n> filter on a different bug.\n> \n> This is really helpful, and I think we're getting closer to resolving this\n> bug for all users.\n> \n> So in short:\n> \n> Autocomplete: (|(sn=stan*)(cn=stan*)(mail=stan*))\n> \n> -> Surname, Common name (aka Display Name), email\n> \n> AddressBook: (|(sn=*%v*)(cn=*%v*)(mail=*%v*)(givenname=*%v*))\n> \n> -> Surname, Common name (aka Display Name), email, first name\n> \n> There's obviously two things that are different here, 1) the addition of\n> givenname, 2) searching at the beginning of the string versus searching\n> within the string.\n> [SNIP]", "attachment_id": null}, {"creator": "bugzilla2007@duellmann24.net", "is_private": false, "count": 39, "author": "bugzilla2007@duellmann24.net", "creation_time": "2014-12-28T17:36:40Z", "time": "2014-12-28T17:36:40Z", "bug_id": 668087, "tags": [], "text": "(In reply to Thomas D. from comment #38)\n> Aceman, I am wondering if we can fix this bug for LDAP ABs along the lines\n> of Mark's comment 13.\n> 1) LDAP search fields for AB vs. Autocomplete should be the same (simple fix)\n\n1b) we should also port Bug 558931 to LDAP, implement split multiword search! (which might need a new bug)\n\n> 2) does our results searching algorithm from Bug 970456 also work for LDAP\n> results?\n> - iow, how are LDAP results currently sorted in?\n> - if not, can we make it work on LDAP results?\n> (I think it should be possible if we're just sorting results which we have\n> already obtained)\n> 3) If we can get post-filter-sorting 2) to work, then we should consider\n> using .contains algorithm *%v* for LDAP too, as we now do for local AB\n> quicksearch AND local AB autocomplete!\n\nThe hard part about 2) is that we don't support popularityIndex for LDAP yet...\nBut perhaps we could still find an intelligent way of post-sorting better scoring LDAP matches on top of other LDAP matches, so that we could allow *sw1* AND *sw2* algorithm for multiple searchwords (contains + split multiword).", "attachment_id": null, "raw_text": "(In reply to Thomas D. from comment #38)\n> Aceman, I am wondering if we can fix this bug for LDAP ABs along the lines\n> of Mark's comment 13.\n> 1) LDAP search fields for AB vs. Autocomplete should be the same (simple fix)\n\n1b) we should also port Bug 558931 to LDAP, implement split multiword search! (which might need a new bug)\n\n> 2) does our results searching algorithm from Bug 970456 also work for LDAP\n> results?\n> - iow, how are LDAP results currently sorted in?\n> - if not, can we make it work on LDAP results?\n> (I think it should be possible if we're just sorting results which we have\n> already obtained)\n> 3) If we can get post-filter-sorting 2) to work, then we should consider\n> using .contains algorithm *%v* for LDAP too, as we now do for local AB\n> quicksearch AND local AB autocomplete!\n\nThe hard part about 2) is that we don't support popularityIndex for LDAP yet...\nBut perhaps we could still find an intelligent way of post-sorting better scoring LDAP matches on top of other LDAP matches, so that we could allow *sw1* AND *sw2* algorithm for multiple searchwords (contains + split multiword).", "id": 9736313}, {"bug_id": 668087, "time": "2015-01-05T14:13:06Z", "tags": [], "text": "(In reply to Thomas D. from comment #38)\n> Aceman, I am wondering if we can fix this bug for LDAP ABs along the lines\n> of Mark's comment 13.\n> 1) LDAP search fields for AB vs. Autocomplete should be the same (simple fix)\nShould be doable by changing the search string template.\n\n> 2) does our results searching algorithm from Bug 970456 also work for LDAP\n> results?\n> - iow, how are LDAP results currently sorted in?\n> - if not, can we make it work on LDAP results?\n> (I think it should be possible if we're just sorting results which we have\n> already obtained)\nMaybe we could share some code, depends on how the result set differs here. If the results are still usable for the algorithms in local autocomplete even if we searched by different (less) fields.\n\n> 3) If we can get post-filter-sorting 2) to work, then we should consider\n> using .contains algorithm *%v* for LDAP too, as we now do for local AB\n> quicksearch AND local AB autocomplete!\nShould be doable by changing the quesry string. However, it opens a can of worms giving unexpected results to people. And we are still fixing that fallout on local autocomplete :) E.g. the preference of results starting with the search string, that is not yet on TB31.", "author": "acelists@atlas.sk", "creation_time": "2015-01-05T14:13:06Z", "count": 40, "creator": "acelists@atlas.sk", "is_private": false, "id": 9751934, "raw_text": "(In reply to Thomas D. from comment #38)\n> Aceman, I am wondering if we can fix this bug for LDAP ABs along the lines\n> of Mark's comment 13.\n> 1) LDAP search fields for AB vs. Autocomplete should be the same (simple fix)\nShould be doable by changing the search string template.\n\n> 2) does our results searching algorithm from Bug 970456 also work for LDAP\n> results?\n> - iow, how are LDAP results currently sorted in?\n> - if not, can we make it work on LDAP results?\n> (I think it should be possible if we're just sorting results which we have\n> already obtained)\nMaybe we could share some code, depends on how the result set differs here. If the results are still usable for the algorithms in local autocomplete even if we searched by different (less) fields.\n\n> 3) If we can get post-filter-sorting 2) to work, then we should consider\n> using .contains algorithm *%v* for LDAP too, as we now do for local AB\n> quicksearch AND local AB autocomplete!\nShould be doable by changing the quesry string. However, it opens a can of worms giving unexpected results to people. And we are still fixing that fallout on local autocomplete :) E.g. the preference of results starting with the search string, that is not yet on TB31.", "attachment_id": null}, {"raw_text": "Patch that corrected autocomplete behavior for me by turning off LDAP referrals.  A better fix would be to make this an LDAP specific preference.  Tweaking the search filter did not work in my instance.\n\nI built/tested using latest from source.  Issue was present until I added the preference to turn off referrals.\n\nHope this helps.", "attachment_id": 8555213, "id": 9847099, "is_private": false, "creator": "jeremy.nix@cchmc.org", "text": "Created attachment 8555213\nnsLDAPPConnection.diff\n\nPatch that corrected autocomplete behavior for me by turning off LDAP referrals.  A better fix would be to make this an LDAP specific preference.  Tweaking the search filter did not work in my instance.\n\nI built/tested using latest from source.  Issue was present until I added the preference to turn off referrals.\n\nHope this helps.", "time": "2015-01-27T13:09:55Z", "tags": [], "creation_time": "2015-01-27T13:09:55Z", "author": "jeremy.nix@cchmc.org", "count": 41, "bug_id": 668087}, {"author": "ludovic@hirlimann.net", "creation_time": "2015-01-31T12:56:38Z", "bug_id": 668087, "tags": [], "time": "2015-01-31T12:56:38Z", "text": "Comment on attachment 8555213\nnsLDAPPConnection.diff\n\nputting on standard8 as these days I have no clue who's got reveiw/code expereince with ldap.", "creator": "ludovic@hirlimann.net", "is_private": false, "count": 42, "id": 9865989, "attachment_id": 8555213, "raw_text": "putting on standard8 as these days I have no clue who's got reveiw/code expereince with ldap."}, {"count": 43, "creator": "standard8@mozilla.com", "is_private": false, "bug_id": 668087, "tags": [], "time": "2015-02-02T10:29:18Z", "text": "Comment on attachment 8555213\nnsLDAPPConnection.diff\n\n:jcranmer would be a better reviewer.\n\nHowever, I think this bug should really be closed as incomplete or something, and the patch attached to a new fresh bug that clearly describes what it is fixing.\n\nAs I've already stated, this bug went too far.", "author": "standard8@mozilla.com", "creation_time": "2015-02-02T10:29:18Z", "raw_text": ":jcranmer would be a better reviewer.\n\nHowever, I think this bug should really be closed as incomplete or something, and the patch attached to a new fresh bug that clearly describes what it is fixing.\n\nAs I've already stated, this bug went too far.", "attachment_id": 8555213, "id": 9868848}, {"count": 44, "bug_id": 668087, "creator": "denis.savostyanov@gmail.com", "is_private": false, "author": "denis.savostyanov@gmail.com", "creation_time": "2015-07-20T10:31:18Z", "time": "2015-07-20T10:31:18Z", "tags": [], "text": "Created attachment 8635961\nerr.png", "attachment_id": 8635961, "raw_text": "", "id": 10513463}, {"time": "2015-07-20T10:32:46Z", "tags": [], "bug_id": 668087, "text": "Hello, I have same problem in Early Bird 41.0a2.& Windows 7\nBut I don't understand how I can it fixed.\n(add screenshot err.png)\n\nPlease help.\n\nThanks.", "author": "denis.savostyanov@gmail.com", "creation_time": "2015-07-20T10:32:46Z", "count": 45, "creator": "denis.savostyanov@gmail.com", "is_private": false, "id": 10513464, "raw_text": "Hello, I have same problem in Early Bird 41.0a2.& Windows 7\nBut I don't understand how I can it fixed.\n(add screenshot err.png)\n\nPlease help.\n\nThanks.", "attachment_id": null}, {"is_private": false, "creator": "acelists@atlas.sk", "count": 46, "creation_time": "2016-06-03T10:45:52Z", "author": "acelists@atlas.sk", "text": "Jeremy, can you say what the fix does and how it relates to the bug here? The original reporter's problem seems to be that his server didn't return matches when searching for strings in start of fields (the %v*) case even if there should have been matches.", "bug_id": 668087, "tags": [], "time": "2016-06-03T10:45:52Z", "attachment_id": null, "raw_text": "Jeremy, can you say what the fix does and how it relates to the bug here? The original reporter's problem seems to be that his server didn't return matches when searching for strings in start of fields (the %v*) case even if there should have been matches.", "id": 11461096}, {"count": 47, "bug_id": 668087, "attachment_id": null, "raw_text": "aceman,\n\nYou are most likely correct.  I was having similar issues as reported in this ticket.  I ended up changing the following:\n\nautoComplete.filterTemplate => \"(|(CN=%v1*)(displayName=%v1*)(mail=%v1*))\"\nmail.autoComplete.commentColumn => \"2\" (enable customized drop-downs for matches)\nldap_2.servers.MY_SERVER.autoComplete.commentFormat => \"title, department\"\n\nI was still unable to get the auto complete to work within the email editor.  Searching did work within the Address Book component.  After a lot of troubleshooting, I came across the article mentioned in my patch.  After I implemented the change, things started to work properly.  I'm not sure if the behavior I was seeing is specific to our Active Directory setup/configuration or not.  I found it intriguing that search worked in the Address Book without the change.  I did not dig deep enough to see why.\n\nIn the end, I wanted to highlight my findings as it may be something other users come across.  This ticket was the closest thing that exhibited the same end behavior.  As I said, may be worth creating a new property/flag that could turn off LDAP_OPT_REFERRALS if needed.  In my case, it was needed.\n\nHope that helps.\nJeremy", "id": 11461141, "is_private": false, "creator": "jeremy.nix@cchmc.org", "creation_time": "2016-06-03T11:16:49Z", "author": "jeremy.nix@cchmc.org", "text": "aceman,\n\nYou are most likely correct.  I was having similar issues as reported in this ticket.  I ended up changing the following:\n\nautoComplete.filterTemplate => \"(|(CN=%v1*)(displayName=%v1*)(mail=%v1*))\"\nmail.autoComplete.commentColumn => \"2\" (enable customized drop-downs for matches)\nldap_2.servers.MY_SERVER.autoComplete.commentFormat => \"title, department\"\n\nI was still unable to get the auto complete to work within the email editor.  Searching did work within the Address Book component.  After a lot of troubleshooting, I came across the article mentioned in my patch.  After I implemented the change, things started to work properly.  I'm not sure if the behavior I was seeing is specific to our Active Directory setup/configuration or not.  I found it intriguing that search worked in the Address Book without the change.  I did not dig deep enough to see why.\n\nIn the end, I wanted to highlight my findings as it may be something other users come across.  This ticket was the closest thing that exhibited the same end behavior.  As I said, may be worth creating a new property/flag that could turn off LDAP_OPT_REFERRALS if needed.  In my case, it was needed.\n\nHope that helps.\nJeremy", "time": "2016-06-03T11:16:49Z", "tags": []}, {"bug_id": 668087, "count": 48, "text": "*** Bug 1010297 has been marked as a duplicate of this bug. ***", "time": "2016-09-22T11:29:57Z", "tags": [], "creation_time": "2016-09-22T11:29:57Z", "author": "vseerror@lehigh.edu", "is_private": false, "creator": "vseerror@lehigh.edu", "id": 11728897, "raw_text": "", "attachment_id": null}, {"raw_text": "I also had this bug. tb45.4 on ubuntu 14lts and Win7. When I turned on debugging in the logs I could see that the address book search and a new mail autocomplete both correctly queried the server (although with different search filters) and in the logs returned the same number of results. The address book correctly displayed the results, the autocomplete on a new mail didnt show anything. \n\nI read every bug and webpage I could find and tried every fix, but Jeremy's fix of turning off LDAP_OPT_REFERRALS was the only thing that worked (thank you Jeremy!). His suggestion of a switch/property/option to set this somehow would be very helpful for me as well. \n\nThanks", "attachment_id": null, "id": 11841968, "count": 49, "is_private": false, "creator": "mutex77@gmail.com", "text": "I also had this bug. tb45.4 on ubuntu 14lts and Win7. When I turned on debugging in the logs I could see that the address book search and a new mail autocomplete both correctly queried the server (although with different search filters) and in the logs returned the same number of results. The address book correctly displayed the results, the autocomplete on a new mail didnt show anything. \n\nI read every bug and webpage I could find and tried every fix, but Jeremy's fix of turning off LDAP_OPT_REFERRALS was the only thing that worked (thank you Jeremy!). His suggestion of a switch/property/option to set this somehow would be very helpful for me as well. \n\nThanks", "bug_id": 668087, "tags": [], "time": "2016-11-07T18:31:26Z", "creation_time": "2016-11-07T18:31:26Z", "author": "mutex77@gmail.com"}, {"raw_text": "I run into this issue every time I set up a Thunderbird install at work, latest is 52.8.0 Windows/52.7.0 Mac against a simple OpenLDAP server. As always, search works in the address book, does not work while composing.", "attachment_id": null, "id": 13297855, "count": 50, "is_private": false, "creator": "oliver@kfs.org", "text": "I run into this issue every time I set up a Thunderbird install at work, latest is 52.8.0 Windows/52.7.0 Mac against a simple OpenLDAP server. As always, search works in the address book, does not work while composing.", "time": "2018-05-22T20:53:55Z", "tags": [], "bug_id": 668087, "creation_time": "2018-05-22T20:53:55Z", "author": "oliver@kfs.org"}, {"id": 13297862, "attachment_id": null, "raw_text": "(In reply to oliver from comment #50)\n> I run into this issue every time I set up a Thunderbird install at work,\n> latest is 52.8.0 Windows/52.7.0 Mac against a simple OpenLDAP server. As\n> always, search works in the address book, does not work while composing.\n\nAnd then after a 3rd restart of tb, it started working, in both cases.", "author": "oliver@kfs.org", "creation_time": "2018-05-22T21:00:39Z", "time": "2018-05-22T21:00:39Z", "tags": [], "bug_id": 668087, "text": "(In reply to oliver from comment #50)\n> I run into this issue every time I set up a Thunderbird install at work,\n> latest is 52.8.0 Windows/52.7.0 Mac against a simple OpenLDAP server. As\n> always, search works in the address book, does not work while composing.\n\nAnd then after a 3rd restart of tb, it started working, in both cases.", "creator": "oliver@kfs.org", "is_private": false, "count": 51}]}}, "comments": {}}