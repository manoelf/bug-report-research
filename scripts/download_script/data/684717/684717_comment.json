{"bugs": {"684717": {"comments": [{"tags": [], "attachment_id": null, "raw_text": "We should assign type tags in a way, in which we can use a bitmask/and to reuse the same code for different stuff. \nFor example, for ToInt32, it would be useful if we could detected int/boolean/undefined/null, which just require use to use the payload.\n\nI am sure there are some other cases, too. It would be good if we could find out these beforehand.", "time": "2011-09-05T15:11:44Z", "creation_time": "2011-09-05T15:11:44Z", "is_private": false, "id": 5700612, "bug_id": 684717, "author": "evilpies@gmail.com", "text": "We should assign type tags in a way, in which we can use a bitmask/and to reuse the same code for different stuff. \nFor example, for ToInt32, it would be useful if we could detected int/boolean/undefined/null, which just require use to use the payload.\n\nI am sure there are some other cases, too. It would be good if we could find out these beforehand.", "count": 0, "creator": "evilpies@gmail.com"}, {"creation_time": "2011-09-06T05:41:37Z", "is_private": false, "creator": "mail@lukewagner.name", "tags": [], "attachment_id": null, "id": 5701427, "bug_id": 684717, "text": "Originally type tags were just a bitmask.  Punboxing forced a dense index since there were only 3 bits and I just made nunboxing do the same for simplicity in a few cases and to optimize a few conversions in the tracer (hah!).  With nunbox64, the type bitmask could help both 32/64-bit, so I'm excited to see what speedups you find.\n\nOne reason why there may not be a massive speedup awaiting is that js::Value usage in the VM is increasingly not hot and the hot paths often involve single-type queries, isObjectOrNull or isNumber and the latter two are, by design, already single operations.", "count": 1, "author": "mail@lukewagner.name", "time": "2011-09-06T05:41:37Z", "raw_text": "Originally type tags were just a bitmask.  Punboxing forced a dense index since there were only 3 bits and I just made nunboxing do the same for simplicity in a few cases and to optimize a few conversions in the tracer (hah!).  With nunbox64, the type bitmask could help both 32/64-bit, so I'm excited to see what speedups you find.\n\nOne reason why there may not be a massive speedup awaiting is that js::Value usage in the VM is increasingly not hot and the hot paths often involve single-type queries, isObjectOrNull or isNumber and the latter two are, by design, already single operations."}, {"time": "2013-02-22T18:46:06Z", "raw_text": "I am not working on this.", "author": "evilpies@gmail.com", "count": 2, "text": "I am not working on this.", "bug_id": 684717, "id": 7132817, "attachment_id": null, "tags": [], "creator": "evilpies@gmail.com", "is_private": false, "creation_time": "2013-02-22T18:46:06Z"}]}}, "comments": {}}