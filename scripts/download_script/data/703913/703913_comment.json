{"comments": {}, "bugs": {"703913": {"comments": [{"tags": [], "count": 0, "is_private": false, "id": 5860681, "bug_id": 703913, "raw_text": "Some image formats (BMP and ICO in particular, maybe others) can have some problems when small amounts of data are passed into them at a time.  This is not a new issue, but has always been the case.\n\nThis bug is to test with code similar to below and fix the variety of problems found.\n\n> void\n> nsICODecoder::WriteInternal(const char* aBuffer, PRUint32 aCount) \n> {\n>   const int BLOCK_SIZE = 55;\n>   int numBlocks = aCount / BLOCK_SIZE;\n>   int partialBlock = aCount % BLOCK_SIZE;\n>   for (int i = 0; i < numBlocks; ++i) {\n>     WriteInternal2(aBuffer + (BLOCK_SIZE * i), BLOCK_SIZE);\n>   }\n>   WriteInternal2(aBuffer + (BLOCK_SIZE * numBlocks), partialBlock);\n> }\n> void\n> nsICODecoder::WriteInternal2(const char* aBuffer, PRUint32 aCount)\n> {\n>... normal WriteInternal code", "creation_time": "2011-11-19T20:05:13Z", "creator": "netzen@gmail.com", "text": "Some image formats (BMP and ICO in particular, maybe others) can have some problems when small amounts of data are passed into them at a time.  This is not a new issue, but has always been the case.\n\nThis bug is to test with code similar to below and fix the variety of problems found.\n\n> void\n> nsICODecoder::WriteInternal(const char* aBuffer, PRUint32 aCount) \n> {\n>   const int BLOCK_SIZE = 55;\n>   int numBlocks = aCount / BLOCK_SIZE;\n>   int partialBlock = aCount % BLOCK_SIZE;\n>   for (int i = 0; i < numBlocks; ++i) {\n>     WriteInternal2(aBuffer + (BLOCK_SIZE * i), BLOCK_SIZE);\n>   }\n>   WriteInternal2(aBuffer + (BLOCK_SIZE * numBlocks), partialBlock);\n> }\n> void\n> nsICODecoder::WriteInternal2(const char* aBuffer, PRUint32 aCount)\n> {\n>... normal WriteInternal code", "author": "netzen@gmail.com", "attachment_id": null, "time": "2011-11-19T20:05:13Z"}, {"creator": "netzen@gmail.com", "author": "netzen@gmail.com", "tags": [], "is_private": false, "count": 1, "id": 5860683, "bug_id": 703913, "creation_time": "2011-11-19T20:06:05Z", "raw_text": "One example of such a problem is BMP code has always had a problem with BLOCK_SIZE == 55, see Bug 700930.", "text": "One example of such a problem is BMP code has always had a problem with BLOCK_SIZE == 55, see Bug 700930.", "attachment_id": null, "time": "2011-11-19T20:06:05Z"}, {"id": 5871266, "tags": [], "is_private": false, "count": 2, "bug_id": 703913, "raw_text": "Joe drew mentioned:\n> You'll have to write an HTTP reftest, similar to the one in layout/reftests\n> /backgrounds/delay-image-response.sjs, but which sends only part of the \n> image, delays a certain number of seconds, and then sends the rest.", "creation_time": "2011-11-24T19:19:59Z", "time": "2011-11-24T19:19:59Z", "attachment_id": null, "text": "Joe drew mentioned:\n> You'll have to write an HTTP reftest, similar to the one in layout/reftests\n> /backgrounds/delay-image-response.sjs, but which sends only part of the \n> image, delays a certain number of seconds, and then sends the rest.", "author": "netzen@gmail.com", "creator": "netzen@gmail.com"}]}}}