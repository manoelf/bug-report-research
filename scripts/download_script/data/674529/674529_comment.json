{"comments": {}, "bugs": {"674529": {"comments": [{"id": 5616582, "bug_id": 674529, "creation_time": "2011-07-27T14:38:54Z", "is_private": false, "creator": "LpSolit@gmail.com", "author": "LpSolit@gmail.com", "text": "$CGI::POST_MAX lets us limit the size of POST data passed to CGI scripts. If we exceed this limit, CGI.pm throws a \"HTTP/1.1 413 Request entity too large\" error. We could use it to prevent Bugzilla from being DoS'ed.\n\nThe biggest thing we can have in Bugzilla is attachments. If we include the comment which can be passed at the same time, I would say\n\n  $CGI::POST_MAX = 2* max(Param('maxattachmentsize'), Param('maxlocalattachment'))\n\nwould be a reasonable limit.", "count": 0, "tags": [], "time": "2011-07-27T14:38:54Z", "attachment_id": null, "raw_text": "$CGI::POST_MAX lets us limit the size of POST data passed to CGI scripts. If we exceed this limit, CGI.pm throws a \"HTTP/1.1 413 Request entity too large\" error. We could use it to prevent Bugzilla from being DoS'ed.\n\nThe biggest thing we can have in Bugzilla is attachments. If we include the comment which can be passed at the same time, I would say\n\n  $CGI::POST_MAX = 2* max(Param('maxattachmentsize'), Param('maxlocalattachment'))\n\nwould be a reasonable limit."}, {"time": "2011-08-02T23:41:06Z", "attachment_id": null, "raw_text": "Don't we already set POST_MAX? (In order to be able to upload attachments at all.)", "tags": [], "creator": "mkanat@bugzilla.org", "author": "mkanat@bugzilla.org", "text": "Don't we already set POST_MAX? (In order to be able to upload attachments at all.)", "count": 1, "bug_id": 674529, "id": 5629208, "is_private": false, "creation_time": "2011-08-02T23:41:06Z"}, {"creation_time": "2011-08-02T23:46:33Z", "is_private": false, "creator": "LpSolit@gmail.com", "tags": [], "attachment_id": null, "bug_id": 674529, "id": 5629223, "text": "(In reply to comment #1)\n> Don't we already set POST_MAX? (In order to be able to upload attachments at\n> all.)\n\nWe don't, no. Maybe you have MySQL's \"max_allowed_packet\" variable in mind?", "count": 2, "author": "LpSolit@gmail.com", "time": "2011-08-02T23:46:33Z", "raw_text": "(In reply to comment #1)\n> Don't we already set POST_MAX? (In order to be able to upload attachments at\n> all.)\n\nWe don't, no. Maybe you have MySQL's \"max_allowed_packet\" variable in mind?"}, {"raw_text": "(In reply to comment #2)\n> We don't, no. Maybe you have MySQL's \"max_allowed_packet\" variable in mind?\n\n  Huh. I think maybe we used to set it, back in the old days of like 2.18 or something. Maybe I realized it was unnecessary and removed it.\n\n  I would be fine with 2 x max_attachment, that sounds like a good idea.", "time": "2011-08-03T01:20:06Z", "id": 5629408, "bug_id": 674529, "author": "mkanat@bugzilla.org", "text": "(In reply to comment #2)\n> We don't, no. Maybe you have MySQL's \"max_allowed_packet\" variable in mind?\n\n  Huh. I think maybe we used to set it, back in the old days of like 2.18 or something. Maybe I realized it was unnecessary and removed it.\n\n  I would be fine with 2 x max_attachment, that sounds like a good idea.", "count": 3, "tags": [], "attachment_id": null, "creation_time": "2011-08-03T01:20:06Z", "is_private": false, "creator": "mkanat@bugzilla.org"}, {"id": 5863162, "bug_id": 674529, "creation_time": "2011-11-21T19:36:19Z", "is_private": false, "creator": "LpSolit@gmail.com", "author": "LpSolit@gmail.com", "text": "Created attachment 575924\npatch, v1", "count": 4, "tags": [], "time": "2011-11-21T19:36:19Z", "attachment_id": 575924, "raw_text": ""}, {"is_private": false, "creation_time": "2011-11-23T22:02:10Z", "id": 5869519, "bug_id": 674529, "count": 5, "text": "Comment on attachment 575924\npatch, v1\n\nReview of attachment 575924:\n-----------------------------------------------------------------\n\n::: Bugzilla/CGI.pm\n@@ +78,5 @@\n>  \n> +    # Limit the size of the POST data.\n> +    $CGI::POST_MAX = 2 * max(1024 * Bugzilla->params->{maxattachmentsize},\n> +                             1024 * 1024 * Bugzilla->params->{maxlocalattachment});\n> +\n\nHmmm, there's no way to set this on $self instead, is there? This will affect other mod_perl apps on the same server, otherwise. Sometimes CGI.pm globals actually initialize some hidden variable in $self, so perhaps we could use that?", "author": "mkanat@bugzilla.org", "creator": "mkanat@bugzilla.org", "tags": [], "raw_text": "Review of attachment 575924:\n-----------------------------------------------------------------\n\n::: Bugzilla/CGI.pm\n@@ +78,5 @@\n>  \n> +    # Limit the size of the POST data.\n> +    $CGI::POST_MAX = 2 * max(1024 * Bugzilla->params->{maxattachmentsize},\n> +                             1024 * 1024 * Bugzilla->params->{maxlocalattachment});\n> +\n\nHmmm, there's no way to set this on $self instead, is there? This will affect other mod_perl apps on the same server, otherwise. Sometimes CGI.pm globals actually initialize some hidden variable in $self, so perhaps we could use that?", "attachment_id": 575924, "time": "2011-11-23T22:02:10Z"}, {"raw_text": "Pushing this patch out of our radar for now, but we may revive it in the future if we have evidence of such problems.", "time": "2012-04-16T09:39:17Z", "id": 6225333, "bug_id": 674529, "text": "Comment on attachment 575924\npatch, v1\n\nPushing this patch out of our radar for now, but we may revive it in the future if we have evidence of such problems.", "count": 6, "author": "LpSolit@gmail.com", "tags": [], "attachment_id": 575924, "is_private": false, "creation_time": "2012-04-16T09:39:17Z", "creator": "LpSolit@gmail.com"}]}}}