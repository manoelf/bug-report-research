{"comments": {}, "bugs": {"622723": {"comments": [{"tags": [], "creation_time": "2011-01-04T00:21:40Z", "id": 5172532, "count": 0, "text": "Created attachment 500941\nashmem pagefile for jemalloc\n\nThis gets us swap-like behavior on android. I'm sure this isn't the most correct way of turning on pagefile support in jemalloc, but I'm not sure what the proper way is.", "is_private": false, "author": "taras.mozilla@glek.net", "creator": "taras.mozilla@glek.net", "attachment_id": 500941, "time": "2011-01-04T00:21:40Z", "raw_text": "This gets us swap-like behavior on android. I'm sure this isn't the most correct way of turning on pagefile support in jemalloc, but I'm not sure what the proper way is.", "bug_id": 622723}, {"count": 1, "id": 5172874, "text": "We need some numbers to back up a change like this.  Does it help startup, memory usage, page load times, us getting killed off?  Once we have that, would need review from Jason Evans", "is_private": false, "tags": [], "creation_time": "2011-01-04T03:55:06Z", "raw_text": "We need some numbers to back up a change like this.  Does it help startup, memory usage, page load times, us getting killed off?  Once we have that, would need review from Jason Evans", "bug_id": 622723, "attachment_id": null, "author": "pavlov@pavlov.net", "creator": "pavlov@pavlov.net", "time": "2011-01-04T03:55:06Z"}, {"creator": "taras.mozilla@glek.net", "attachment_id": null, "author": "taras.mozilla@glek.net", "time": "2011-01-05T02:18:58Z", "raw_text": "This doesn't help with us getting killed off. If I switch apps, Android seems to use the exact same kill logic with and without this change. However, if I stay in the app it seems to remain alive longer.\n\nI seem to be able to load more stuff into my fennec before plugin-container starts crashing.\n\nI can load about:memory + firefox tinderbox into 2 tabs. Then plugin-container crashes when I load a 3rd tinderbox.\n\nWithout this patch plugin-container dies while loading the second tinderbox.\n\nI'll do some more analysis tomorrow.", "bug_id": 622723, "creation_time": "2011-01-05T02:18:58Z", "tags": [], "id": 5175997, "count": 2, "text": "This doesn't help with us getting killed off. If I switch apps, Android seems to use the exact same kill logic with and without this change. However, if I stay in the app it seems to remain alive longer.\n\nI seem to be able to load more stuff into my fennec before plugin-container starts crashing.\n\nI can load about:memory + firefox tinderbox into 2 tabs. Then plugin-container crashes when I load a 3rd tinderbox.\n\nWithout this patch plugin-container dies while loading the second tinderbox.\n\nI'll do some more analysis tomorrow.", "is_private": false}, {"creation_time": "2011-01-05T08:00:11Z", "tags": [], "id": 5176355, "count": 3, "text": "Comment on attachment 500941\nashmem pagefile for jemalloc\n\n> #ifdef MALLOC_PAGEFILE\n>-static bool\topt_pagefile = false;\n>+static bool\topt_pagefile = true;\n> #endif\n\nYou want to add a #ifdef MOZ_MEMORY_ANDROID here, because otherwise, you change the default behaviour on non OSX unices, which do have optional pagefile support.", "is_private": false, "attachment_id": 500941, "creator": "mh+mozilla@glandium.org", "author": "mh+mozilla@glandium.org", "time": "2011-01-05T08:00:11Z", "raw_text": "> #ifdef MALLOC_PAGEFILE\n>-static bool\topt_pagefile = false;\n>+static bool\topt_pagefile = true;\n> #endif\n\nYou want to add a #ifdef MOZ_MEMORY_ANDROID here, because otherwise, you change the default behaviour on non OSX unices, which do have optional pagefile support.", "bug_id": 622723}, {"count": 4, "id": 5208710, "raw_text": "I haven't heard that this helps anything, clearing the review request", "is_private": false, "bug_id": 622723, "text": "Comment on attachment 500941\nashmem pagefile for jemalloc\n\nI haven't heard that this helps anything, clearing the review request", "attachment_id": 500941, "author": "lassey@chromium.org", "creator": "lassey@chromium.org", "time": "2011-01-18T22:07:40Z", "creation_time": "2011-01-18T22:07:40Z", "tags": []}]}}}