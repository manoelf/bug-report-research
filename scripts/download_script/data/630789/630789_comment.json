{"comments": {}, "bugs": {"630789": {"comments": [{"bug_id": 630789, "attachment_id": null, "creation_time": "2011-02-02T05:48:05Z", "author": "yuki@clear-code.com", "creator": "yuki@clear-code.com", "tags": [], "count": 0, "time": "2011-02-02T05:48:05Z", "raw_text": "Steps to reproduce:\n 1. Go to \"https://addons.mozilla.org/\"\n 2. Run this bookmarklet in the location bar:\n      javascript:var d = document;var i=d.createElement('iframe');\n      i.setAttribute('src','https://unknownhost.localhost/');\n      d.body.appendChild(i);void(0);\n    (Note: \"https://unknownhost.localhost/\" is an invalid url for testing.\n     It should not be connected to the host and Firefox will show\n     \"Server not found\" error. So, as the result, this bookmarklet inserts\n     an iframe which reports a network error, into a secure web page and\n     changes the security state to \"mixed\".)\n\nExpected Result:\n  The locationbar icon turns to gray and the tooltip becomes to\n  \"This web site does not supply identity information.\"\n\nActual Result:\n  The label of the locationbar icon stays \"Mozilla Corporation (US)\"\n  with green background, and the tooltip still says\n  \"Verified by: VeriSign, Inc.\"\n\n\nThere is a comment in the source:\nhttp://mxr.mozilla.org/mozilla-central/source/security/manager/boot/src/nsSecureBrowserUIImpl.cpp#1376\n1376     // we'll treat \"broken\" exactly like \"insecure\",\n1377     // i.e. we do not show alerts when switching between broken and insecure\n1378 \n1379     /*\n1380       from                 to           shows alert\n1381     ------------------------------     ---------------\n1382 \n1383     no or broken -> no or broken    => <NOTHING SHOWN>\n1384 \n1385     no or broken -> mixed           => mixed alert\n1386     no or broken -> low             => low alert\n1387     no or broken -> high            => high alert\n1388     \n1389     mixed, high, low -> no, broken  => leaving secure\n1390 \n1391     mixed        -> low             => low alert\n1392     mixed        -> high            => high alert\n1393 \n1394     high         -> low             => low alert\n1395     high         -> mixed           => mixed\n1396     \n1397     low          -> high            => high\n1398     low          -> mixed           => mixed\n\nThis case seems to match to the case \"no or broken -> mixed\" but there is no alert actually.\n\nBy comparison, this security-state-changed alert works for network errors in an existing iframe. After the step 2, type this bookmarklet into the location bar:\n\n  javascript:document.body.lastChild.contentWindow.location.href=\n  'https://unknownhost.localhost/?';void(0);\n\nThen, the locationbar icon turns to gray as I expected.", "id": 5245415, "text": "Steps to reproduce:\n 1. Go to \"https://addons.mozilla.org/\"\n 2. Run this bookmarklet in the location bar:\n      javascript:var d = document;var i=d.createElement('iframe');\n      i.setAttribute('src','https://unknownhost.localhost/');\n      d.body.appendChild(i);void(0);\n    (Note: \"https://unknownhost.localhost/\" is an invalid url for testing.\n     It should not be connected to the host and Firefox will show\n     \"Server not found\" error. So, as the result, this bookmarklet inserts\n     an iframe which reports a network error, into a secure web page and\n     changes the security state to \"mixed\".)\n\nExpected Result:\n  The locationbar icon turns to gray and the tooltip becomes to\n  \"This web site does not supply identity information.\"\n\nActual Result:\n  The label of the locationbar icon stays \"Mozilla Corporation (US)\"\n  with green background, and the tooltip still says\n  \"Verified by: VeriSign, Inc.\"\n\n\nThere is a comment in the source:\nhttp://mxr.mozilla.org/mozilla-central/source/security/manager/boot/src/nsSecureBrowserUIImpl.cpp#1376\n1376     // we'll treat \"broken\" exactly like \"insecure\",\n1377     // i.e. we do not show alerts when switching between broken and insecure\n1378 \n1379     /*\n1380       from                 to           shows alert\n1381     ------------------------------     ---------------\n1382 \n1383     no or broken -> no or broken    => <NOTHING SHOWN>\n1384 \n1385     no or broken -> mixed           => mixed alert\n1386     no or broken -> low             => low alert\n1387     no or broken -> high            => high alert\n1388     \n1389     mixed, high, low -> no, broken  => leaving secure\n1390 \n1391     mixed        -> low             => low alert\n1392     mixed        -> high            => high alert\n1393 \n1394     high         -> low             => low alert\n1395     high         -> mixed           => mixed\n1396     \n1397     low          -> high            => high\n1398     low          -> mixed           => mixed\n\nThis case seems to match to the case \"no or broken -> mixed\" but there is no alert actually.\n\nBy comparison, this security-state-changed alert works for network errors in an existing iframe. After the step 2, type this bookmarklet into the location bar:\n\n  javascript:document.body.lastChild.contentWindow.location.href=\n  'https://unknownhost.localhost/?';void(0);\n\nThen, the locationbar icon turns to gray as I expected.", "is_private": false}, {"author": "yuki@clear-code.com", "tags": [], "bug_id": 630789, "attachment_id": null, "raw_text": "> This case seems to match to the case \"no or broken -> mixed\" but there is no\n> alert actually.\n\nSorry, I misquoted. This is the case: \"high -> mixed\".", "count": 1, "creator": "yuki@clear-code.com", "creation_time": "2011-02-02T05:49:58Z", "is_private": false, "time": "2011-02-02T05:49:58Z", "text": "> This case seems to match to the case \"no or broken -> mixed\" but there is no\n> alert actually.\n\nSorry, I misquoted. This is the case: \"high -> mixed\".", "id": 5245542}, {"count": 2, "raw_text": "Instead of network errors, I can reproduce this \"no security warning\" with another uri: \"about:logo\". Even if an <iframe src=\"about:logo\"/> is inserted to the page https://addons.mozilla.org/, the page still \"Verified by: VeriSign, Inc.\". I used a simple bookmarklet:\n\n  javascript:document.body.innerHTML+='<iframe src=\"about:logo\" />';void(0);", "attachment_id": null, "bug_id": 630789, "tags": [], "author": "yuki@clear-code.com", "id": 5245989, "text": "Instead of network errors, I can reproduce this \"no security warning\" with another uri: \"about:logo\". Even if an <iframe src=\"about:logo\"/> is inserted to the page https://addons.mozilla.org/, the page still \"Verified by: VeriSign, Inc.\". I used a simple bookmarklet:\n\n  javascript:document.body.innerHTML+='<iframe src=\"about:logo\" />';void(0);", "time": "2011-02-02T05:56:02Z", "is_private": false, "creation_time": "2011-02-02T05:56:02Z", "creator": "yuki@clear-code.com"}]}}}