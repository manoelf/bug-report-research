{"bugs": {"710567": {"comments": [{"text": "User Agent: Mozilla/5.0 (Windows NT 6.1; rv:8.0) Gecko/20100101 Firefox/8.0\nBuild ID: 20111104165243\n\nSteps to reproduce:\n\nWhen I click some link, if firefox does not handle this file type internally, it opens a dialog to select an action (open with, save as). It happens that some server is misconfigured and it returns wrong mime type for known format, so firefox opens this dialog instead of displaying content. E.g. I cannot display JPEG image, when server returns application/binary mime type.\n\n\nActual results:\n\nI had to start an external program to display the image.\n\n\nExpected results:\n\nAdd firefox to list of programs that can handle this format. If user selects this choice, then try to open it in firefox s current tab. It can then do some format detection like linux command \"file\". If it really does not know the format, then display it in binary form.", "count": 0, "author": "literakl@centrum.cz", "creator": "literakl@centrum.cz", "is_private": false, "creation_time": "2011-12-14T09:31:05Z", "id": 5914929, "bug_id": 710567, "raw_text": "User Agent: Mozilla/5.0 (Windows NT 6.1; rv:8.0) Gecko/20100101 Firefox/8.0\nBuild ID: 20111104165243\n\nSteps to reproduce:\n\nWhen I click some link, if firefox does not handle this file type internally, it opens a dialog to select an action (open with, save as). It happens that some server is misconfigured and it returns wrong mime type for known format, so firefox opens this dialog instead of displaying content. E.g. I cannot display JPEG image, when server returns application/binary mime type.\n\n\nActual results:\n\nI had to start an external program to display the image.\n\n\nExpected results:\n\nAdd firefox to list of programs that can handle this format. If user selects this choice, then try to open it in firefox s current tab. It can then do some format detection like linux command \"file\". If it really does not know the format, then display it in binary form.", "attachment_id": null, "time": "2011-12-14T09:31:05Z", "tags": []}, {"attachment_id": null, "raw_text": "You can already choose Firefox.exe but that will create a loop because that opened Firefox.exe also can't handle the mime-type.\n\n>It can then do some format detection like linux command \"file\"\ncontent-type sniffing can be dangerous in the web and that's the reason why Gecko avoids that. Put a little bit JS in the file and deliver it with a jpeg extension and voila you have a big problem.\n\nAnd are you sure that your example is a wrong content-type and not a content-disposition:attachment ?", "time": "2011-12-14T09:55:56Z", "tags": [], "author": "bugzilla@mversen.de", "text": "You can already choose Firefox.exe but that will create a loop because that opened Firefox.exe also can't handle the mime-type.\n\n>It can then do some format detection like linux command \"file\"\ncontent-type sniffing can be dangerous in the web and that's the reason why Gecko avoids that. Put a little bit JS in the file and deliver it with a jpeg extension and voila you have a big problem.\n\nAnd are you sure that your example is a wrong content-type and not a content-disposition:attachment ?", "count": 1, "creator": "bugzilla@mversen.de", "creation_time": "2011-12-14T09:55:56Z", "is_private": false, "bug_id": 710567, "id": 5914959}, {"tags": [], "attachment_id": null, "is_private": false, "creation_time": "2011-12-16T14:33:28Z", "creator": "literakl@centrum.cz", "time": "2011-12-16T14:33:28Z", "raw_text": "Once I find such image, I will post more details. Recently I had an issue with open shell script. It is a text file, but firefox did not display it. It showed Open file dialog instead.\n\nContent-Type:application/x-sh\n\nI understand security concerns. I do not know firefox internal infratsructure. As user I would be happy to have a chance to display any content in firefox directly. Either as text, supported format renderer or binary dump.\n\nBtw what does happen, when I have <img src=\"url\"> and server returns no mime type? Or if it is local file without extension? I think that Firefox has some heuristics in this case.", "bug_id": 710567, "id": 5921766, "author": "literakl@centrum.cz", "count": 2, "text": "Once I find such image, I will post more details. Recently I had an issue with open shell script. It is a text file, but firefox did not display it. It showed Open file dialog instead.\n\nContent-Type:application/x-sh\n\nI understand security concerns. I do not know firefox internal infratsructure. As user I would be happy to have a chance to display any content in firefox directly. Either as text, supported format renderer or binary dump.\n\nBtw what does happen, when I have <img src=\"url\"> and server returns no mime type? Or if it is local file without extension? I think that Firefox has some heuristics in this case."}, {"tags": [], "time": "2011-12-16T21:56:57Z", "attachment_id": null, "raw_text": ">does happen, when I have <img src=\"url\"> and server returns no mime type?\nAll Http/1.0 and Http/1.1 server have to provide a content-type\n\nHttp/0.9, ftp://, file:// don't provide mime-types and Gecko is using content-sniffing.\nThe extension in the case of a local file is only a part of the detection.\n\nA security example would be this:\nAn attacker uploads a html/javascript file in Facebook as image and Facebook accepts this file. The attacker points you now to this image. The attacker can now control your facebook Account if you are logged in and Gecko would use content-sniffing.\n\nThe imagelib in Gecko is doing already content.sniffing because this isn't dangerous. You can rename a .gif file to .jpg and Gecko/Firefox will display it.\n\nand then there is https://addons.mozilla.org/en-US/firefox/addon/open-in-browser/ and bug 57342", "id": 5923182, "bug_id": 710567, "is_private": false, "creation_time": "2011-12-16T21:56:57Z", "creator": "bugzilla@mversen.de", "author": "bugzilla@mversen.de", "text": ">does happen, when I have <img src=\"url\"> and server returns no mime type?\nAll Http/1.0 and Http/1.1 server have to provide a content-type\n\nHttp/0.9, ftp://, file:// don't provide mime-types and Gecko is using content-sniffing.\nThe extension in the case of a local file is only a part of the detection.\n\nA security example would be this:\nAn attacker uploads a html/javascript file in Facebook as image and Facebook accepts this file. The attacker points you now to this image. The attacker can now control your facebook Account if you are logged in and Gecko would use content-sniffing.\n\nThe imagelib in Gecko is doing already content.sniffing because this isn't dangerous. You can rename a .gif file to .jpg and Gecko/Firefox will display it.\n\nand then there is https://addons.mozilla.org/en-US/firefox/addon/open-in-browser/ and bug 57342", "count": 3}]}}, "comments": {}}