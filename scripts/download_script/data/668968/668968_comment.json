{"bugs": {"668968": {"comments": [{"bug_id": 668968, "tags": [], "count": 0, "is_private": false, "id": 5571010, "text": "Created attachment 543588\ninvite.ics\n\nUser Agent: Mozilla/5.0 (X11; Linux x86_64; rv:5.0) Gecko/20100101 Firefox/5.0\nBuild ID: 20110622131247\n\nSteps to reproduce:\n\nthb 5 Lighnting 1.0b4 / linux ( lucid ) /windows ( 7 )\nsend invite to another user via mail, both having ics webdav calendars that work\nother user confirmed the invite, mail gets back source user\n\n\nActual results:\n\nas get confirmation mail got back to the source user\nlooking good in tb 5 ( attached as invite.ics ) ics calender crashed by update\nand got non writable\nerror console says\n\nFehler: Beim Schreiben in den Kalender robert@schetterer.org ist ein Fehler aufgetreten! Fehlercode: MODIFICATION_FAILED. Beschreibung: \nQuelldatei: resource://calendar/modules/calUtils.jsm -> file:///home/rschetterer/.thunderbird/2r3xlxu3.default/extensions/%7Be2fda1a4-762b-4020-b5ad-a41df1933103%7D/calendar-js/calCalendarManager.js\nZeile: 1061\n\nand sometimes\n\nFehler: uncaught exception: [Exception... \"Component returned failure code: 0x804b000a (NS_ERROR_MALFORMED_URI) [nsIWebNavigation.loadURI]\"  nsresult: \"0x804b000a (NS_ERROR_MALFORMED_URI)\"  location: \"JS frame :: chrome://global/content/viewSource.js :: viewSource :: line 179\"  data: no]\n\n\nExpected results:\n\nno crash\n\nthe problem is not on the webdav server side , write looking good in its logs", "attachment_id": 543588, "time": "2011-07-02T09:17:14Z", "creation_time": "2011-07-02T09:17:14Z", "raw_text": "User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:5.0) Gecko/20100101 Firefox/5.0\nBuild ID: 20110622131247\n\nSteps to reproduce:\n\nthb 5 Lighnting 1.0b4 / linux ( lucid ) /windows ( 7 )\nsend invite to another user via mail, both having ics webdav calendars that work\nother user confirmed the invite, mail gets back source user\n\n\nActual results:\n\nas get confirmation mail got back to the source user\nlooking good in tb 5 ( attached as invite.ics ) ics calender crashed by update\nand got non writable\nerror console says\n\nFehler: Beim Schreiben in den Kalender robert@schetterer.org ist ein Fehler aufgetreten! Fehlercode: MODIFICATION_FAILED. Beschreibung: \nQuelldatei: resource://calendar/modules/calUtils.jsm -> file:///home/rschetterer/.thunderbird/2r3xlxu3.default/extensions/%7Be2fda1a4-762b-4020-b5ad-a41df1933103%7D/calendar-js/calCalendarManager.js\nZeile: 1061\n\nand sometimes\n\nFehler: uncaught exception: [Exception... \"Component returned failure code: 0x804b000a (NS_ERROR_MALFORMED_URI) [nsIWebNavigation.loadURI]\"  nsresult: \"0x804b000a (NS_ERROR_MALFORMED_URI)\"  location: \"JS frame :: chrome://global/content/viewSource.js :: viewSource :: line 179\"  data: no]\n\n\nExpected results:\n\nno crash\n\nthe problem is not on the webdav server side , write looking good in its logs", "creator": "robert@schetterer.org", "author": "robert@schetterer.org"}, {"id": 5571052, "is_private": false, "count": 1, "tags": [], "bug_id": 668968, "raw_text": "Is this a real crash, as in the application quits, or does the application just show error messages? If its easier for you, please feel free to contact me via Email in German.", "creation_time": "2011-07-02T09:57:49Z", "attachment_id": null, "time": "2011-07-02T09:57:49Z", "text": "Is this a real crash, as in the application quits, or does the application just show error messages? If its easier for you, please feel free to contact me via Email in German.", "author": "philipp@bugzilla.kewis.ch", "creator": "philipp@bugzilla.kewis.ch"}, {"creation_time": "2011-07-02T13:02:53Z", "raw_text": "sorry , to make it clear , not tb5 crashes, the error is \"modification_failed\"\nthen calendar gets not writable, by importing the invite.ics manual same happens", "text": "sorry , to make it clear , not tb5 crashes, the error is \"modification_failed\"\nthen calendar gets not writable, by importing the invite.ics manual same happens", "time": "2011-07-02T13:02:53Z", "attachment_id": null, "tags": [], "is_private": false, "count": 2, "id": 5571135, "bug_id": 668968, "creator": "robert@schetterer.org", "author": "robert@schetterer.org"}, {"author": "ssitter@gmail.com", "creator": "ssitter@gmail.com", "id": 5571156, "count": 3, "is_private": false, "tags": [], "bug_id": 668968, "raw_text": "iCalendar validation reports that the attached ics file \"is using an invalid newline format. Make sure to use \\r\\n to end lines rather than just \\n\". \n\nhttp://severinghaus.org/projects/icv/\nhttp://icalvalid.cloudapp.net/Default.aspx\n\nMaybe your server doesn't like the line endings? Could you try with a fixed file?", "creation_time": "2011-07-02T13:47:53Z", "attachment_id": null, "time": "2011-07-02T13:47:53Z", "text": "iCalendar validation reports that the attached ics file \"is using an invalid newline format. Make sure to use \\r\\n to end lines rather than just \\n\". \n\nhttp://severinghaus.org/projects/icv/\nhttp://icalvalid.cloudapp.net/Default.aspx\n\nMaybe your server doesn't like the line endings? Could you try with a fixed file?"}, {"tags": [], "is_private": false, "count": 4, "id": 5571421, "bug_id": 668968, "raw_text": "Hi , youre right, format invite.ics is the reason why it fails upload to webdav horde server, it works right with a local calender, no idea , if this an horde bug , or lightning code changed, i only used funambol syncml before, i will cross post this to the kronlith/horde list, no idea if its get patched until the old horde tree is not longer maintained, but i will not go the the recent one next time, for other reasons", "creation_time": "2011-07-02T22:38:31Z", "text": "Hi , youre right, format invite.ics is the reason why it fails upload to webdav horde server, it works right with a local calender, no idea , if this an horde bug , or lightning code changed, i only used funambol syncml before, i will cross post this to the kronlith/horde list, no idea if its get patched until the old horde tree is not longer maintained, but i will not go the the recent one next time, for other reasons", "time": "2011-07-02T22:38:31Z", "attachment_id": null, "creator": "robert@schetterer.org", "author": "robert@schetterer.org"}, {"creator": "robert@schetterer.org", "author": "robert@schetterer.org", "tags": [], "count": 5, "is_private": false, "id": 5571681, "bug_id": 668968, "creation_time": "2011-07-03T10:00:16Z", "raw_text": "i looked at the horde code , and found it ok ( i am no hacker )\nhowever, after long playing with thunderbird decoding stuff etc, i final testet it with a simple apache webdav server, also here ,the problem stays\nso it must be something with lightning ics calender files hosted on webdav, can somebody confirm this", "text": "i looked at the horde code , and found it ok ( i am no hacker )\nhowever, after long playing with thunderbird decoding stuff etc, i final testet it with a simple apache webdav server, also here ,the problem stays\nso it must be something with lightning ics calender files hosted on webdav, can somebody confirm this", "time": "2011-07-03T10:00:16Z", "attachment_id": null}, {"creator": "robert@schetterer.org", "author": "robert@schetterer.org", "bug_id": 668968, "tags": [], "count": 6, "is_private": false, "id": 5582454, "text": "just made tests with ligtning nighly de over webdav with horde 3 ics\nthe Problem stayed, windows7/ubuntu-lucid\nbut now i can import manual invite.ics after corecting\nthe 2 emtpty lines at end of invite.ics, the ics validator\nstill says  invalid newline format, but for now this seems not a real problem any longer, only empty lines at end \nsombody to confirm this ?", "attachment_id": null, "time": "2011-07-09T08:50:19Z", "raw_text": "just made tests with ligtning nighly de over webdav with horde 3 ics\nthe Problem stayed, windows7/ubuntu-lucid\nbut now i can import manual invite.ics after corecting\nthe 2 emtpty lines at end of invite.ics, the ics validator\nstill says  invalid newline format, but for now this seems not a real problem any longer, only empty lines at end \nsombody to confirm this ?", "creation_time": "2011-07-09T08:50:19Z"}, {"author": "robert@schetterer.org", "creator": "robert@schetterer.org", "creation_time": "2011-07-17T12:38:22Z", "raw_text": "looking on bug\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=461826\nwhich relates to leading blank lines i would speculate\nthe problem with blank lines at end is somewhere in \ncalItipEmailTransport.js\n\nat this lines\n\n // Home-grown mail composition; I'd love to use nsIMimeEmitter, but it's not clear to me whether\n            // it can cope with nested attachments,\n            // like multipart/alternative with enclosed text/calendar and text/plain.\n            let mailText = (\"MIME-version: 1.0\\r\\n\" +\n                            (aIdentity.replyTo\n                             ? \"Return-path: \" + aIdentity.replyTo + \"\\r\\n\" : \"\") +\n                            \"From: \" + aIdentity.email + \"\\r\\n\" +\n                            \"To: \" + aToList + \"\\r\\n\" +\n                            \"Date: \" + (new Date()).toUTCString() + \"\\r\\n\" +\n                            \"Subject: \" + encodeMimeHeader(aSubject.replace(/(\\n|\\r\\n)/, \"|\")) + \"\\r\\n\");\n            switch (compatMode) {\n                case 1:\n                    mailText += (\"Content-class: urn:content-classes:calendarmessage\\r\\n\" +\n                                 \"Content-type: text/calendar; method=\" + aItem.responseMethod + \"; charset=UTF-8\\r\\n\" +\n                                 \"Content-transfer-encoding: 8BIT\\r\\n\" +\n                                 \"\\r\\n\" +\n                                 utf8CalText +\n                                 \"\\r\\n\");\n                    break;\n                default:\n                    mailText += (\"Content-type: multipart/mixed; boundary=\\\"Boundary_(ID_qyG4ZdjoAsiZ+Jo19dCbWQ)\\\"\\r\\n\" +\n                                 \"\\r\\n\\r\\n\" +\n                                 \"--Boundary_(ID_qyG4ZdjoAsiZ+Jo19dCbWQ)\\r\\n\" +\n                                 \"Content-type: multipart/alternative;\\r\\n\" +\n                                 \" boundary=\\\"Boundary_(ID_ryU4ZdJoASiZ+Jo21dCbwA)\\\"\\r\\n\" +\n                                 \"\\r\\n\\r\\n\" +\n                                 \"--Boundary_(ID_ryU4ZdJoASiZ+Jo21dCbwA)\\r\\n\" +\n                                 \"Content-type: text/plain; charset=UTF-8\\r\\n\" +\n                                 \"Content-transfer-encoding: 8BIT\\r\\n\" +\n                                 \"\\r\\n\" +\n                                 encodeUTF8(aBody) +\n                                 \"\\r\\n\\r\\n\\r\\n\" +\n                                 \"--Boundary_(ID_ryU4ZdJoASiZ+Jo21dCbwA)\\r\\n\" +\n                                 \"Content-type: text/calendar; method=\" + aItem.responseMethod + \"; charset=UTF-8\\r\\n\" +\n                                 \"Content-transfer-encoding: 8BIT\\r\\n\" +\n                                 \"\\r\\n\" +\n                                 utf8CalText +\n                                 \"\\r\\n\\r\\n\" +\n                                 \"--Boundary_(ID_ryU4ZdJoASiZ+Jo21dCbwA)--\\r\\n\" +\n                                 \"\\r\\n\" +\n                                 \"--Boundary_(ID_qyG4ZdjoAsiZ+Jo19dCbWQ)\\r\\n\" +\n                                 \"Content-type: application/ics; name=invite.ics\\r\\n\" +\n                                 \"Content-transfer-encoding: 8BIT\\r\\n\" +\n                                 \"Content-disposition: attachment; filename=invite.ics\\r\\n\" +\n                                 \"\\r\\n\" +\n                                 utf8CalText +\n                                 \"\\r\\n\\r\\n\" +\n                                 \"--Boundary_(ID_qyG4ZdjoAsiZ+Jo19dCbWQ)--\\r\\n\");\n                    break;\n            }\n            cal.LOG(\"mail text:\\n\" + mailText);\n\ncan anybody have a look at this?", "attachment_id": null, "time": "2011-07-17T12:38:22Z", "text": "looking on bug\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=461826\nwhich relates to leading blank lines i would speculate\nthe problem with blank lines at end is somewhere in \ncalItipEmailTransport.js\n\nat this lines\n\n // Home-grown mail composition; I'd love to use nsIMimeEmitter, but it's not clear to me whether\n            // it can cope with nested attachments,\n            // like multipart/alternative with enclosed text/calendar and text/plain.\n            let mailText = (\"MIME-version: 1.0\\r\\n\" +\n                            (aIdentity.replyTo\n                             ? \"Return-path: \" + aIdentity.replyTo + \"\\r\\n\" : \"\") +\n                            \"From: \" + aIdentity.email + \"\\r\\n\" +\n                            \"To: \" + aToList + \"\\r\\n\" +\n                            \"Date: \" + (new Date()).toUTCString() + \"\\r\\n\" +\n                            \"Subject: \" + encodeMimeHeader(aSubject.replace(/(\\n|\\r\\n)/, \"|\")) + \"\\r\\n\");\n            switch (compatMode) {\n                case 1:\n                    mailText += (\"Content-class: urn:content-classes:calendarmessage\\r\\n\" +\n                                 \"Content-type: text/calendar; method=\" + aItem.responseMethod + \"; charset=UTF-8\\r\\n\" +\n                                 \"Content-transfer-encoding: 8BIT\\r\\n\" +\n                                 \"\\r\\n\" +\n                                 utf8CalText +\n                                 \"\\r\\n\");\n                    break;\n                default:\n                    mailText += (\"Content-type: multipart/mixed; boundary=\\\"Boundary_(ID_qyG4ZdjoAsiZ+Jo19dCbWQ)\\\"\\r\\n\" +\n                                 \"\\r\\n\\r\\n\" +\n                                 \"--Boundary_(ID_qyG4ZdjoAsiZ+Jo19dCbWQ)\\r\\n\" +\n                                 \"Content-type: multipart/alternative;\\r\\n\" +\n                                 \" boundary=\\\"Boundary_(ID_ryU4ZdJoASiZ+Jo21dCbwA)\\\"\\r\\n\" +\n                                 \"\\r\\n\\r\\n\" +\n                                 \"--Boundary_(ID_ryU4ZdJoASiZ+Jo21dCbwA)\\r\\n\" +\n                                 \"Content-type: text/plain; charset=UTF-8\\r\\n\" +\n                                 \"Content-transfer-encoding: 8BIT\\r\\n\" +\n                                 \"\\r\\n\" +\n                                 encodeUTF8(aBody) +\n                                 \"\\r\\n\\r\\n\\r\\n\" +\n                                 \"--Boundary_(ID_ryU4ZdJoASiZ+Jo21dCbwA)\\r\\n\" +\n                                 \"Content-type: text/calendar; method=\" + aItem.responseMethod + \"; charset=UTF-8\\r\\n\" +\n                                 \"Content-transfer-encoding: 8BIT\\r\\n\" +\n                                 \"\\r\\n\" +\n                                 utf8CalText +\n                                 \"\\r\\n\\r\\n\" +\n                                 \"--Boundary_(ID_ryU4ZdJoASiZ+Jo21dCbwA)--\\r\\n\" +\n                                 \"\\r\\n\" +\n                                 \"--Boundary_(ID_qyG4ZdjoAsiZ+Jo19dCbWQ)\\r\\n\" +\n                                 \"Content-type: application/ics; name=invite.ics\\r\\n\" +\n                                 \"Content-transfer-encoding: 8BIT\\r\\n\" +\n                                 \"Content-disposition: attachment; filename=invite.ics\\r\\n\" +\n                                 \"\\r\\n\" +\n                                 utf8CalText +\n                                 \"\\r\\n\\r\\n\" +\n                                 \"--Boundary_(ID_qyG4ZdjoAsiZ+Jo19dCbWQ)--\\r\\n\");\n                    break;\n            }\n            cal.LOG(\"mail text:\\n\" + mailText);\n\ncan anybody have a look at this?", "id": 5595437, "tags": [], "count": 7, "is_private": false, "bug_id": 668968}, {"bug_id": 668968, "tags": [], "count": 8, "is_private": false, "id": 5596463, "text": "looks like solved\ntested with 2 div mail accounts and 2 div calendars on lucid ubuntu in one tb 5 profile\nwith nightly linux 32 bit de ( language ) 1.0b5pre\nthe invite.ics was acepted now on webdav horde 3 server calendar\n\nthe invite.ics file itself seems not got changed\nsame warnings on\nhttp://icalvalid.cloudapp.net/Default.aspx\n\nthere is no recent nightly lighning de win version !", "attachment_id": null, "time": "2011-07-18T14:59:04Z", "creation_time": "2011-07-18T14:59:04Z", "raw_text": "looks like solved\ntested with 2 div mail accounts and 2 div calendars on lucid ubuntu in one tb 5 profile\nwith nightly linux 32 bit de ( language ) 1.0b5pre\nthe invite.ics was acepted now on webdav horde 3 server calendar\n\nthe invite.ics file itself seems not got changed\nsame warnings on\nhttp://icalvalid.cloudapp.net/Default.aspx\n\nthere is no recent nightly lighning de win version !", "creator": "robert@schetterer.org", "author": "robert@schetterer.org"}, {"author": "philipp@bugzilla.kewis.ch", "creator": "philipp@bugzilla.kewis.ch", "raw_text": "Solved? So we can close this bug?", "creation_time": "2011-07-18T15:29:41Z", "time": "2011-07-18T15:29:41Z", "attachment_id": null, "text": "Solved? So we can close this bug?", "id": 5596537, "is_private": false, "count": 9, "tags": [], "bug_id": 668968}, {"attachment_id": null, "time": "2011-07-18T18:34:49Z", "author": "robert@schetterer.org", "text": "no dont close it, it should be minimum tested cross plattform i.e with win32\nbefore closing, and there must be releated patches in lightning nightly\nfixing the problem\nthe solution should be posted here or marked as duplicate done, by cross solved to some other patch,\nfor small looks on the nightly changelog i cant see what exact fixed it\nand it it might come up again during the next code flow\nso let it stay open at minimum to the next beta official release", "creator": "robert@schetterer.org", "raw_text": "no dont close it, it should be minimum tested cross plattform i.e with win32\nbefore closing, and there must be releated patches in lightning nightly\nfixing the problem\nthe solution should be posted here or marked as duplicate done, by cross solved to some other patch,\nfor small looks on the nightly changelog i cant see what exact fixed it\nand it it might come up again during the next code flow\nso let it stay open at minimum to the next beta official release", "creation_time": "2011-07-18T18:34:49Z", "bug_id": 668968, "id": 5597076, "is_private": false, "count": 10, "tags": []}, {"creator": "robert@schetterer.org", "author": "robert@schetterer.org", "text": "tested now on win32 with nightly 1.0b5pre english ,does not  work, bug stays\nas well with older stable lightning releases\nseems only to work if both calenders are in one profile on same machine, same version etc tested on lucid", "time": "2011-07-19T08:48:01Z", "attachment_id": null, "raw_text": "tested now on win32 with nightly 1.0b5pre english ,does not  work, bug stays\nas well with older stable lightning releases\nseems only to work if both calenders are in one profile on same machine, same version etc tested on lucid", "creation_time": "2011-07-19T08:48:01Z", "bug_id": 668968, "tags": [], "count": 11, "is_private": false, "id": 5598640}]}}, "comments": {}}