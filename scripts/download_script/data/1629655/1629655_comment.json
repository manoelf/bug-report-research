{"bugs": {"1629655": {"comments": [{"is_private": false, "bug_id": 1629655, "id": 14752525, "author": "rrelyea@redhat.com", "attachment_id": null, "text": "libcurl uses libpem which uses ckfw to create temporary objects whose space needs to be freed after use (rather than at token shutdown). Currently only token objects are supported and they are allocated out of a global arena owned by the slot, so the objects only go away when the slot is closed. This is a problem for long running servers.\n\nThe overall fix requires changes to libcurl and libpem, but we also need support in nss's ckfw. This bug is only for NSS's portion of the fix. Downstream bug: https://bugzilla.redhat.com/show_bug.cgi?id=1688958", "tags": [], "creator": "rrelyea@redhat.com", "time": "2020-04-13T20:50:51Z", "raw_text": "libcurl uses libpem which uses ckfw to create temporary objects whose space needs to be freed after use (rather than at token shutdown). Currently only token objects are supported and they are allocated out of a global arena owned by the slot, so the objects only go away when the slot is closed. This is a problem for long running servers.\n\nThe overall fix requires changes to libcurl and libpem, but we also need support in nss's ckfw. This bug is only for NSS's portion of the fix. Downstream bug: https://bugzilla.redhat.com/show_bug.cgi?id=1688958", "count": 0, "creation_time": "2020-04-13T20:50:51Z"}, {"creator": "rrelyea@redhat.com", "time": "2020-04-14T17:36:46Z", "tags": [], "is_private": false, "bug_id": 1629655, "creation_time": "2020-04-14T17:36:46Z", "count": 1, "text": "Created attachment 9140523\nBug 1629655 ckfw needs to support temporary session objects.\n\nlibckfw needs to create temporary objects whose space will to be freed after\nuse (rather than at token shutdown). Currently only token objects are supported\nand they are allocated out of a global arena owned by the slot, so the objects\nonly go away when the slot is closed.\n\nThis patch sets the arena to NULL in nssCKFWObject_Create() if the object is\na session object. This tells nssCKFWObject_Create() to create a new arena\nspecifically for this object. That arena is stored in localArena. When the\nobject is destroyed, any localArena's will be freed.", "attachment_id": 9140523, "raw_text": "libckfw needs to create temporary objects whose space will to be freed after\nuse (rather than at token shutdown). Currently only token objects are supported\nand they are allocated out of a global arena owned by the slot, so the objects\nonly go away when the slot is closed.\n\nThis patch sets the arena to NULL in nssCKFWObject_Create() if the object is\na session object. This tells nssCKFWObject_Create() to create a new arena\nspecifically for this object. That arena is stored in localArena. When the\nobject is destroyed, any localArena's will be freed.", "author": "rrelyea@redhat.com", "id": 14754908}]}}, "comments": {}}