{"bugs": {"650630": {"comments": [{"time": "2011-04-17T13:33:39Z", "count": 0, "raw_text": "User-Agent:       Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\nBuild Identifier: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\n\nI'm using an unreliable IPv6 network. But my router knows about this fact. If i'm trying to connect to a website which is reachable with IPv6 and IPv4 and my IPv6 connection is down, it will take several seconds for firefox to switch from IPv6 to IPv4. I'm wondering about this fact, because my home router sends an IPv6 ICMP Address Unreachable (Type 1, Code 3) message to my PC. Therefore Firefox should know about the IPv6 problem and switch to IPv4.\n\nReproducible: Always\n\nActual Results:  \nThe fallback to IPv4 occur after several seconds (about 20).\n\nExpected Results:  \nThe fallback to IPv4 should happen immediately after the IPv6 unreachable messages was received.", "creator": "paul@sogetthis.com", "text": "User-Agent:       Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\nBuild Identifier: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\n\nI'm using an unreliable IPv6 network. But my router knows about this fact. If i'm trying to connect to a website which is reachable with IPv6 and IPv4 and my IPv6 connection is down, it will take several seconds for firefox to switch from IPv6 to IPv4. I'm wondering about this fact, because my home router sends an IPv6 ICMP Address Unreachable (Type 1, Code 3) message to my PC. Therefore Firefox should know about the IPv6 problem and switch to IPv4.\n\nReproducible: Always\n\nActual Results:  \nThe fallback to IPv4 occur after several seconds (about 20).\n\nExpected Results:  \nThe fallback to IPv4 should happen immediately after the IPv6 unreachable messages was received.", "author": "paul@sogetthis.com", "is_private": false, "id": 5414463, "creation_time": "2011-04-17T13:33:39Z", "tags": [], "attachment_id": null, "bug_id": 650630}, {"raw_text": "I've done tests today with FF 52.0.6 ESR on Windows 7.\n\nHere's a recap of my tcpdump captures\n\n15:53:29.0369-15:53:29.0872 => queries for both A and AAAA records + (valid) answers for both queries (in IPv4 over my non-ipv6 compatible vpn tunnel)\n15:53:29.0881-15:53:35.7546 => 3 ipv6 TCP SYN (over my ipv6 compatible wireless interface, but destination is unreachable due to firewalls -I can see the icmpv6-addr-unreachable messages received in my tcpdump captures)\n15:53:47:7421-..................... => 1st IPv4 TCP SYN  (in IPv4 over my non-ipv6 compatible vpn tunnel) and a valid https connection is further established \n\nI must still make sure my Windows firewall doesn't block the icmpv6-addr-unreachable messages, but, though, the IPv4 connection attempts is clearly way too late for \"happy eyeballs\"", "creator": "cyrille.bollu2@gmail.com", "tags": [], "creation_time": "2018-03-06T15:52:27Z", "attachment_id": null, "text": "I've done tests today with FF 52.0.6 ESR on Windows 7.\n\nHere's a recap of my tcpdump captures\n\n15:53:29.0369-15:53:29.0872 => queries for both A and AAAA records + (valid) answers for both queries (in IPv4 over my non-ipv6 compatible vpn tunnel)\n15:53:29.0881-15:53:35.7546 => 3 ipv6 TCP SYN (over my ipv6 compatible wireless interface, but destination is unreachable due to firewalls -I can see the icmpv6-addr-unreachable messages received in my tcpdump captures)\n15:53:47:7421-..................... => 1st IPv4 TCP SYN  (in IPv4 over my non-ipv6 compatible vpn tunnel) and a valid https connection is further established \n\nI must still make sure my Windows firewall doesn't block the icmpv6-addr-unreachable messages, but, though, the IPv4 connection attempts is clearly way too late for \"happy eyeballs\"", "bug_id": 650630, "author": "cyrille.bollu2@gmail.com", "time": "2018-03-06T15:52:27Z", "count": 1, "is_private": false, "id": 13108325}]}}, "comments": {}}