{"bugs": {"702045": {"comments": [{"author": "blizzard@mozilla.com", "text": "Right now Firefox does not survive a Windows system restore.  This is because during a system snapshot only certain files are saved.  We need to make sure that all of the files in our windows install have extensions that will be backed up when a system snapshot is made.\n\nWe know that this affects hundreds of thousands of people during every release we do.\n\nHang issues off this bug.", "count": 0, "bug_id": 702045, "id": 5844919, "raw_text": "Right now Firefox does not survive a Windows system restore.  This is because during a system snapshot only certain files are saved.  We need to make sure that all of the files in our windows install have extensions that will be backed up when a system snapshot is made.\n\nWe know that this affects hundreds of thousands of people during every release we do.\n\nHang issues off this bug.", "time": "2011-11-12T21:33:05Z", "creator": "blizzard@mozilla.com", "creation_time": "2011-11-12T21:33:05Z", "is_private": false, "attachment_id": null, "tags": []}, {"author": "blizzard@mozilla.com", "text": "File names that are monitored for a system restore:\n\nhttp://msdn.microsoft.com/en-us/library/windows/desktop/aa378870%28v=vs.85%29.aspx", "count": 1, "bug_id": 702045, "id": 5844922, "time": "2011-11-12T21:40:32Z", "raw_text": "File names that are monitored for a system restore:\n\nhttp://msdn.microsoft.com/en-us/library/windows/desktop/aa378870%28v=vs.85%29.aspx", "creator": "blizzard@mozilla.com", "is_private": false, "creation_time": "2011-11-12T21:40:32Z", "attachment_id": null, "tags": []}, {"attachment_id": null, "tags": [], "creator": "brian@briansmith.org", "is_private": false, "creation_time": "2011-11-12T22:22:30Z", "raw_text": "(In reply to Robert Strong [:rstrong] from bug 691847 comment 39)\n> Specifically iirc, unless there has been a complete restore point created\n> which is often not the case and we don't definitely create one at this time\n> because that could add several minutes to the update process. We are\n> evaluating creating the restore point with the service in the future after\n> we have the service. It is important to note that this has always been the\n> case regarding system restore and Firefox.\n\n1. Under what conditions does creating a restore point take a long time?\n2. How frequently does that happen?\n3. Do we know if this is better or worse for particular versions of Windows or particular configurations that we can detect at runtime?\n\nNote that the document that blizzard links to says that those file extensions are monitored in VISTA or later--not necessarily XP. If we are going to continue along the \"rename files\" path, we need to find documentation that indicates that it will work on XP too.\n\nBasically, this is me asking if/why we really need to avoid having our installer do things the transactional(-ish?) way that Microsoft recommends and/or Windows requires to prevent these kinds of problems.", "time": "2011-11-12T22:22:30Z", "author": "brian@briansmith.org", "count": 2, "text": "(In reply to Robert Strong [:rstrong] from bug 691847 comment 39)\n> Specifically iirc, unless there has been a complete restore point created\n> which is often not the case and we don't definitely create one at this time\n> because that could add several minutes to the update process. We are\n> evaluating creating the restore point with the service in the future after\n> we have the service. It is important to note that this has always been the\n> case regarding system restore and Firefox.\n\n1. Under what conditions does creating a restore point take a long time?\n2. How frequently does that happen?\n3. Do we know if this is better or worse for particular versions of Windows or particular configurations that we can detect at runtime?\n\nNote that the document that blizzard links to says that those file extensions are monitored in VISTA or later--not necessarily XP. If we are going to continue along the \"rename files\" path, we need to find documentation that indicates that it will work on XP too.\n\nBasically, this is me asking if/why we really need to avoid having our installer do things the transactional(-ish?) way that Microsoft recommends and/or Windows requires to prevent these kinds of problems.", "id": 5844942, "bug_id": 702045}, {"attachment_id": null, "tags": [], "creator": "jdinbox@gmail.com", "is_private": false, "creation_time": "2011-11-12T22:33:09Z", "raw_text": "Whuck. How is it that JAR isn't on that list? Java's been big in enterprise, so can't help but wonder how this manages to not bite such Java apps. Or maybe it does?\n\nAlso, is there no API to allow apps to control how system restore impacts them (not seeing it from a brief search)?\n\nCCing some platform integration folks who should really be involved with this.", "time": "2011-11-12T22:33:09Z", "author": "jdinbox@gmail.com", "count": 3, "text": "Whuck. How is it that JAR isn't on that list? Java's been big in enterprise, so can't help but wonder how this manages to not bite such Java apps. Or maybe it does?\n\nAlso, is there no API to allow apps to control how system restore impacts them (not seeing it from a brief search)?\n\nCCing some platform integration folks who should really be involved with this.", "id": 5844948, "bug_id": 702045}, {"id": 5845031, "bug_id": 702045, "author": "brian@briansmith.org", "count": 4, "text": "(In reply to Christopher Blizzard (:blizzard) from comment #1)\n> File names that are monitored for a system restore:\n> \n> http://msdn.microsoft.com/en-us/library/windows/desktop/aa378870%28v=vs.\n> 85%29.aspx\n\nI verified that \"ja\" is in the filelist.xml on an XP machine in the office.", "raw_text": "(In reply to Christopher Blizzard (:blizzard) from comment #1)\n> File names that are monitored for a system restore:\n> \n> http://msdn.microsoft.com/en-us/library/windows/desktop/aa378870%28v=vs.\n> 85%29.aspx\n\nI verified that \"ja\" is in the filelist.xml on an XP machine in the office.", "time": "2011-11-13T01:03:25Z", "creation_time": "2011-11-13T01:03:25Z", "is_private": false, "creator": "brian@briansmith.org", "tags": [], "attachment_id": null}, {"tags": [], "time": "2011-11-13T04:27:59Z", "raw_text": "(In reply to Brian Smith (:bsmith) from comment #2)\n> Note that the document that blizzard links to says that those file\n> extensions are monitored in VISTA or later--not necessarily XP. If we are\n> going to continue along the \"rename files\" path, we need to find\n> documentation that indicates that it will work on XP too.\n\nFrom the link in comment 1, XP stores files in %windir%\\WINDOWS\\system32\\Restore\\filelist.xml\n\nIn my XP virtual machine, this is what that xml file looks like.", "attachment_id": 574114, "id": 5845110, "bug_id": 702045, "is_private": false, "creation_time": "2011-11-13T04:27:59Z", "creator": "kwierso@gmail.com", "count": 5, "text": "Created attachment 574114\nXP's system restore file\n\n(In reply to Brian Smith (:bsmith) from comment #2)\n> Note that the document that blizzard links to says that those file\n> extensions are monitored in VISTA or later--not necessarily XP. If we are\n> going to continue along the \"rename files\" path, we need to find\n> documentation that indicates that it will work on XP too.\n\nFrom the link in comment 1, XP stores files in %windir%\\WINDOWS\\system32\\Restore\\filelist.xml\n\nIn my XP virtual machine, this is what that xml file looks like.", "author": "kwierso@gmail.com"}, {"creator": "mwu.code@gmail.com", "is_private": false, "creation_time": "2011-11-13T06:02:37Z", "attachment_id": null, "tags": [], "text": "Bug 701875 appears to be enough for firefox to mostly survive a system restore. I installed firefox, made a system restore point, and then deleted everything in the firefox directory. After restoring, we lose:\n\n- Dictionaries\n- Search plugins\n- The update channel prefs file .. or maybe not. I expected this one to go away but I see it's back again.\n- update.locale - This may be a problem since it appears that the updater throws a fit if it can't find this. However, it wouldn't be a problem in the normal system restore scenario if nobody deleted it.\n- blocklist.xml\n- NSS's .chk files\n- precomplete\n- removed-files\n- The default theme (so users wouldn't be able to switch back to the default theme)", "count": 6, "author": "mwu.code@gmail.com", "bug_id": 702045, "id": 5845167, "time": "2011-11-13T06:02:37Z", "raw_text": "Bug 701875 appears to be enough for firefox to mostly survive a system restore. I installed firefox, made a system restore point, and then deleted everything in the firefox directory. After restoring, we lose:\n\n- Dictionaries\n- Search plugins\n- The update channel prefs file .. or maybe not. I expected this one to go away but I see it's back again.\n- update.locale - This may be a problem since it appears that the updater throws a fit if it can't find this. However, it wouldn't be a problem in the normal system restore scenario if nobody deleted it.\n- blocklist.xml\n- NSS's .chk files\n- precomplete\n- removed-files\n- The default theme (so users wouldn't be able to switch back to the default theme)"}, {"tags": [], "time": "2011-11-14T04:30:57Z", "attachment_id": null, "raw_text": "This wasn't implied in Comment 6, but just to be clear I wanted to add that from any system restore, it won't remove the file types that aren't included in that system restore point.  \n\nSo comment 6 mentioned a directory that had no dictionaries, search plugins, ... \nThat test was useful to see what was included, but that exact scenario would only happen if the user uninstalled or deleted Firefox before running the system restore.\n\nSo let's say a user restores to 3 weeks ago, they will still have the dictionaries, search plugins, ..., but they will be the current ones, and not the ones from 3 weeks ago. \n\nBut having files that are consistent with each other is obviously important if they are not backwards compatible.", "bug_id": 702045, "id": 5846073, "is_private": false, "creation_time": "2011-11-14T04:30:57Z", "creator": "netzen@gmail.com", "author": "netzen@gmail.com", "text": "This wasn't implied in Comment 6, but just to be clear I wanted to add that from any system restore, it won't remove the file types that aren't included in that system restore point.  \n\nSo comment 6 mentioned a directory that had no dictionaries, search plugins, ... \nThat test was useful to see what was included, but that exact scenario would only happen if the user uninstalled or deleted Firefox before running the system restore.\n\nSo let's say a user restores to 3 weeks ago, they will still have the dictionaries, search plugins, ..., but they will be the current ones, and not the ones from 3 weeks ago. \n\nBut having files that are consistent with each other is obviously important if they are not backwards compatible.", "count": 7}, {"bug_id": 702045, "id": 5846092, "author": "netzen@gmail.com", "count": 8, "text": "> 3. Do we know if this is better or worse for particular versions of \n> Windows or particular configurations that we can detect at runtime?\n\nWindows Vista and Windows 7 rely on volume shadow copy so they create restore points much faster.  For me it only takes about 15 secons on my development machine. XP works by file copy and compression so is slower.  Also people cusotmize filelist.xml so it gets slower and slower as you get more stuff on your computer.\n\nThe server operating systems don't have system restore installed by default, but you can install it.\n\nOther than providing our own rollbacks for updates, I'm not sure what benefit creating our own system restore points would give us. Creating system restore points ourselves would be nice to have but not related to this bug.\n\nomni.jar was obviously important, but I'm not sure which of the list of Comment 6 are the important non backwards compatible files.  If it wasn't for omni.jar I don't think this bug would have been noticed.  But its' definitely something to look out for.\n\nFor the files that will always be backwards compatible, if any, if a user decides to uninstall or delete all of our files, I'm not sure that system restore should be a supported way for us to be re-installed.", "raw_text": "> 3. Do we know if this is better or worse for particular versions of \n> Windows or particular configurations that we can detect at runtime?\n\nWindows Vista and Windows 7 rely on volume shadow copy so they create restore points much faster.  For me it only takes about 15 secons on my development machine. XP works by file copy and compression so is slower.  Also people cusotmize filelist.xml so it gets slower and slower as you get more stuff on your computer.\n\nThe server operating systems don't have system restore installed by default, but you can install it.\n\nOther than providing our own rollbacks for updates, I'm not sure what benefit creating our own system restore points would give us. Creating system restore points ourselves would be nice to have but not related to this bug.\n\nomni.jar was obviously important, but I'm not sure which of the list of Comment 6 are the important non backwards compatible files.  If it wasn't for omni.jar I don't think this bug would have been noticed.  But its' definitely something to look out for.\n\nFor the files that will always be backwards compatible, if any, if a user decides to uninstall or delete all of our files, I'm not sure that system restore should be a supported way for us to be re-installed.", "time": "2011-11-14T04:50:34Z", "is_private": false, "creation_time": "2011-11-14T04:50:34Z", "creator": "netzen@gmail.com", "tags": [], "attachment_id": null}, {"tags": [], "time": "2011-11-14T05:22:12Z", "raw_text": "(In reply to Brian R. Bondy [:bbondy] from comment #8)\n> > 3. Do we know if this is better or worse for particular versions of \n> > Windows or particular configurations that we can detect at runtime?\n> \n> Windows Vista and Windows 7 rely on volume shadow copy so they create\n> restore points much faster.\n\nof note here is the volume shadow copy service backs up all files on the volume, so this bug should be limited to xp users only (http://blog.szynalski.com/2009/11/23/volume-shadow-copy-system-restore/ and http://technet.microsoft.com/en-us/library/ee923636%28WS.10%29.aspx).\n\n> For the files that will always be backwards compatible, if any, if a user\n> decides to uninstall or delete all of our files, I'm not sure that system\n> restore should be a supported way for us to be re-installed.\n\nwe should at least detect it, and provide the means for the user to get firefox back to a working state.\n\nan option may be to keep a copy of the setup executable and offer to launch this after firefox is partially restored by system-restore.", "attachment_id": null, "id": 5846100, "bug_id": 702045, "creation_time": "2011-11-14T05:22:12Z", "is_private": false, "creator": "glob@mozilla.com", "count": 9, "text": "(In reply to Brian R. Bondy [:bbondy] from comment #8)\n> > 3. Do we know if this is better or worse for particular versions of \n> > Windows or particular configurations that we can detect at runtime?\n> \n> Windows Vista and Windows 7 rely on volume shadow copy so they create\n> restore points much faster.\n\nof note here is the volume shadow copy service backs up all files on the volume, so this bug should be limited to xp users only (http://blog.szynalski.com/2009/11/23/volume-shadow-copy-system-restore/ and http://technet.microsoft.com/en-us/library/ee923636%28WS.10%29.aspx).\n\n> For the files that will always be backwards compatible, if any, if a user\n> decides to uninstall or delete all of our files, I'm not sure that system\n> restore should be a supported way for us to be re-installed.\n\nwe should at least detect it, and provide the means for the user to get firefox back to a working state.\n\nan option may be to keep a copy of the setup executable and offer to launch this after firefox is partially restored by system-restore.", "author": "glob@mozilla.com"}, {"creation_time": "2011-11-14T05:29:14Z", "is_private": false, "bug_id": 702045, "id": 5846107, "author": "netzen@gmail.com", "text": "> so this bug should be limited to xp users only\n\nIt still only protects a filtered file list on Vista and Win7.", "count": 10, "creator": "netzen@gmail.com", "tags": [], "attachment_id": null, "raw_text": "> so this bug should be limited to xp users only\n\nIt still only protects a filtered file list on Vista and Win7.", "time": "2011-11-14T05:29:14Z"}, {"creator": "robert.strong.bugs@gmail.com", "text": "(In reply to Brian Smith (:bsmith) from comment #2)\n> (In reply to Robert Strong [:rstrong] from bug 691847 comment 39)\n> > Specifically iirc, unless there has been a complete restore point created\n> > which is often not the case and we don't definitely create one at this time\n> > because that could add several minutes to the update process. We are\n> > evaluating creating the restore point with the service in the future after\n> > we have the service. It is important to note that this has always been the\n> > case regarding system restore and Firefox.\n> \n> 1. Under what conditions does creating a restore point take a long time?\nAs I understand it this is dependent on how many changes since the last restore point was created and as bbondy points out it is slower on XP and below.\n\n> 2. How frequently does that happen?\nIn my experience often which is entirely anecdotal\n\n> 3. Do we know if this is better or worse for particular versions of Windows\n> or particular configurations that we can detect at runtime?\nXP\n\n> Note that the document that blizzard links to says that those file\n> extensions are monitored in VISTA or later--not necessarily XP. If we are\n> going to continue along the \"rename files\" path, we need to find\n> documentation that indicates that it will work on XP too.\n> \n> Basically, this is me asking if/why we really need to avoid having our\n> installer do things the transactional(-ish?) way that Microsoft recommends\n> and/or Windows requires to prevent these kinds of problems.\nI think you think I don't want to create restore point which is not the case at all. Restore points need to be created prior to changing files / registry and iirc requires admin privileges. So, without going into the specific details based on the previous sentence, using the maintenance service to create a restore point is viable from a technical and a UX point of view where as without the maintenance service... not so much.", "count": 11, "author": "robert.strong.bugs@gmail.com", "bug_id": 702045, "id": 5849789, "creation_time": "2011-11-15T18:04:24Z", "is_private": false, "time": "2011-11-15T18:04:24Z", "raw_text": "(In reply to Brian Smith (:bsmith) from comment #2)\n> (In reply to Robert Strong [:rstrong] from bug 691847 comment 39)\n> > Specifically iirc, unless there has been a complete restore point created\n> > which is often not the case and we don't definitely create one at this time\n> > because that could add several minutes to the update process. We are\n> > evaluating creating the restore point with the service in the future after\n> > we have the service. It is important to note that this has always been the\n> > case regarding system restore and Firefox.\n> \n> 1. Under what conditions does creating a restore point take a long time?\nAs I understand it this is dependent on how many changes since the last restore point was created and as bbondy points out it is slower on XP and below.\n\n> 2. How frequently does that happen?\nIn my experience often which is entirely anecdotal\n\n> 3. Do we know if this is better or worse for particular versions of Windows\n> or particular configurations that we can detect at runtime?\nXP\n\n> Note that the document that blizzard links to says that those file\n> extensions are monitored in VISTA or later--not necessarily XP. If we are\n> going to continue along the \"rename files\" path, we need to find\n> documentation that indicates that it will work on XP too.\n> \n> Basically, this is me asking if/why we really need to avoid having our\n> installer do things the transactional(-ish?) way that Microsoft recommends\n> and/or Windows requires to prevent these kinds of problems.\nI think you think I don't want to create restore point which is not the case at all. Restore points need to be created prior to changing files / registry and iirc requires admin privileges. So, without going into the specific details based on the previous sentence, using the maintenance service to create a restore point is viable from a technical and a UX point of view where as without the maintenance service... not so much.", "attachment_id": null, "tags": []}, {"id": 5850338, "bug_id": 702045, "author": "robert.strong.bugs@gmail.com", "text": "The following is not applicable to the case where someone manually deletes the installation directory and then performs a system restore and IMO this is a case that we shouldn't try to fix.\n\nFirst off, updates still work per Juan's investigation and I have also verified this\n\n- blocklist.xml\nUsed on first run when we don't have a blocklist.xml in the profile.\nA minor issue as I see it.\n\n- NSS's .chk files\nThese being out of sync will disable FIPS mode\nA serious issue for organizations that require FIPS mode. Users in these organizations should not be able to system restore since they would need admin privileges which would also allow them to disable FIPS themselves so I think this is less of an issue than initially thought.\n\n- precomplete\nUsed to remove old application files prior to a complete update\nNot a serious issue as I see it.\n\n- removed-files\nNot used by applications (I have plans to remove it though doing so is extremely low priority)\nNot an issue\n\n- install.log\nNot used by applications\nNot an issue\n\n- The default theme\nThe default theme metadata will not be rolled back, the default theme will be reported as incompatible, and the newer default theme images will be left in place.\nMedium issue - even though the default theme is displayed as incompatible the default theme can still be selected / enabled.\n\n- dictionaries, hyphenation, and searchplugins\nNewer files will be left behind\nNot a serious issue to have the newer files as I see it though a format change could cause problems.\n\n- channel-prefs.js\nThis file is not updated during an update\nNot an issue\n\n- dependentlibs.list\nTested with the file missing, with entries that don't exist, and with missing entries. Everything worked fine. Also took a look at the code and it appears to fallback gracefully.\nQuite certain this is not an issue.\nReference: bug 298044\n\n- uninstall.log\nDoesn't affect Firefox use but could affect Firefox uninstall. If there are dll / exe files in the older build that don't exist in the newer build then uninstalling won't remove these files.\nMinor issue\n\nAs I see it, renaming omni.jar to omni.ja is a good thing to do and we can address the remaining items above as time permits.", "count": 12, "time": "2011-11-15T21:01:44Z", "raw_text": "The following is not applicable to the case where someone manually deletes the installation directory and then performs a system restore and IMO this is a case that we shouldn't try to fix.\n\nFirst off, updates still work per Juan's investigation and I have also verified this\n\n- blocklist.xml\nUsed on first run when we don't have a blocklist.xml in the profile.\nA minor issue as I see it.\n\n- NSS's .chk files\nThese being out of sync will disable FIPS mode\nA serious issue for organizations that require FIPS mode. Users in these organizations should not be able to system restore since they would need admin privileges which would also allow them to disable FIPS themselves so I think this is less of an issue than initially thought.\n\n- precomplete\nUsed to remove old application files prior to a complete update\nNot a serious issue as I see it.\n\n- removed-files\nNot used by applications (I have plans to remove it though doing so is extremely low priority)\nNot an issue\n\n- install.log\nNot used by applications\nNot an issue\n\n- The default theme\nThe default theme metadata will not be rolled back, the default theme will be reported as incompatible, and the newer default theme images will be left in place.\nMedium issue - even though the default theme is displayed as incompatible the default theme can still be selected / enabled.\n\n- dictionaries, hyphenation, and searchplugins\nNewer files will be left behind\nNot a serious issue to have the newer files as I see it though a format change could cause problems.\n\n- channel-prefs.js\nThis file is not updated during an update\nNot an issue\n\n- dependentlibs.list\nTested with the file missing, with entries that don't exist, and with missing entries. Everything worked fine. Also took a look at the code and it appears to fallback gracefully.\nQuite certain this is not an issue.\nReference: bug 298044\n\n- uninstall.log\nDoesn't affect Firefox use but could affect Firefox uninstall. If there are dll / exe files in the older build that don't exist in the newer build then uninstalling won't remove these files.\nMinor issue\n\nAs I see it, renaming omni.jar to omni.ja is a good thing to do and we can address the remaining items above as time permits.", "is_private": false, "creation_time": "2011-11-15T21:01:44Z", "creator": "robert.strong.bugs@gmail.com", "tags": [], "attachment_id": null}, {"author": "robert.strong.bugs@gmail.com", "count": 13, "text": "bug 577563 will make the uninstall.log participate in session restore", "id": 5850394, "bug_id": 702045, "raw_text": "bug 577563 will make the uninstall.log participate in session restore", "time": "2011-11-15T21:20:50Z", "creator": "robert.strong.bugs@gmail.com", "creation_time": "2011-11-15T21:20:50Z", "is_private": false, "attachment_id": null, "tags": []}, {"id": 7617995, "bug_id": 702045, "is_private": false, "creation_time": "2013-07-10T11:56:18Z", "creator": "silaghipaul@gmail.com", "text": "(In reply to Robert Strong [:rstrong] (do not email) from comment #12)\n> The following is not applicable to the case where someone manually deletes\n> the installation directory and then performs a system restore and IMO this\n> is a case that we shouldn't try to fix.\nWhat about bookmarks & history, saved passwords, cookies ? Should they be restored ?", "count": 14, "author": "silaghipaul@gmail.com", "tags": [], "time": "2013-07-10T11:56:18Z", "raw_text": "(In reply to Robert Strong [:rstrong] (do not email) from comment #12)\n> The following is not applicable to the case where someone manually deletes\n> the installation directory and then performs a system restore and IMO this\n> is a case that we shouldn't try to fix.\nWhat about bookmarks & history, saved passwords, cookies ? Should they be restored ?", "attachment_id": null}, {"id": 7622444, "bug_id": 702045, "creation_time": "2013-07-11T04:57:29Z", "is_private": false, "creator": "robert.strong.bugs@gmail.com", "count": 15, "text": "(In reply to Paul Silaghi [QA] from comment #14)\n> (In reply to Robert Strong [:rstrong] (do not email) from comment #12)\n> > The following is not applicable to the case where someone manually deletes\n> > the installation directory and then performs a system restore and IMO this\n> > is a case that we shouldn't try to fix.\n> What about bookmarks & history, saved passwords, cookies ? Should they be\n> restored ?\nNote: the point I was making with the above statement is that system restore is a first in first out system so deleting the files and then performing a restore can cause files that haven't been backed up for a while to no longer be present when restoring the directory. As for files in the profile they will be restored as long as there is still a copy of the file in system restore.", "author": "robert.strong.bugs@gmail.com", "tags": [], "time": "2013-07-11T04:57:29Z", "raw_text": "(In reply to Paul Silaghi [QA] from comment #14)\n> (In reply to Robert Strong [:rstrong] (do not email) from comment #12)\n> > The following is not applicable to the case where someone manually deletes\n> > the installation directory and then performs a system restore and IMO this\n> > is a case that we shouldn't try to fix.\n> What about bookmarks & history, saved passwords, cookies ? Should they be\n> restored ?\nNote: the point I was making with the above statement is that system restore is a first in first out system so deleting the files and then performing a restore can cause files that haven't been backed up for a while to no longer be present when restoring the directory. As for files in the profile they will be restored as long as there is still a copy of the file in system restore.", "attachment_id": null}]}}, "comments": {}}