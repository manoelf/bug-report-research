{"bugs": {"673703": {"comments": [{"id": 5609123, "attachment_id": null, "raw_text": "User Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.16) Gecko/20110701 Iceweasel/3.5.16 (like Firefox/3.5.16)\nBuild ID: 20110701113851\n\nSteps to reproduce:\n\nRegarding all versions at least at Win XP.\n\nSending email fails if the limit of 10000 temp files is reached. I.e. there exists nsmail-9999.tmp in C:\\Documents and Settings\\User\\Local Settings\\Temp.\n\nThe error message is -- if email contains included files, then that the user has not enough rights to this files or if there are no files included then that the network preferences are wrong.\n\n\nActual results:\n\nIn fact TB is limited to 10000 temp files and cannot create a new temp file beyond nsmail-9999.tmp. TB fails without appropriate error message. It also does not remove its temp files, at it should.\n\n\nExpected results:\n\nTB shall remove its temp-files on its own and shall not be limited to 10000 temp-files.", "author": "demon@dim13.org", "creation_time": "2011-07-23T15:09:23Z", "bug_id": 673703, "tags": [], "time": "2011-07-23T15:09:23Z", "text": "User Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.16) Gecko/20110701 Iceweasel/3.5.16 (like Firefox/3.5.16)\nBuild ID: 20110701113851\n\nSteps to reproduce:\n\nRegarding all versions at least at Win XP.\n\nSending email fails if the limit of 10000 temp files is reached. I.e. there exists nsmail-9999.tmp in C:\\Documents and Settings\\User\\Local Settings\\Temp.\n\nThe error message is -- if email contains included files, then that the user has not enough rights to this files or if there are no files included then that the network preferences are wrong.\n\n\nActual results:\n\nIn fact TB is limited to 10000 temp files and cannot create a new temp file beyond nsmail-9999.tmp. TB fails without appropriate error message. It also does not remove its temp files, at it should.\n\n\nExpected results:\n\nTB shall remove its temp-files on its own and shall not be limited to 10000 temp-files.", "creator": "demon@dim13.org", "is_private": false, "count": 0}, {"count": 1, "is_private": false, "creator": "demon@dim13.org", "text": "Workaround: remove all ns*.tmp in C:\\Documents and Settings\\User\\Local Settings\\Temp", "time": "2011-07-23T15:10:44Z", "tags": [], "bug_id": 673703, "creation_time": "2011-07-23T15:10:44Z", "author": "demon@dim13.org", "raw_text": "Workaround: remove all ns*.tmp in C:\\Documents and Settings\\User\\Local Settings\\Temp", "attachment_id": null, "id": 5609129}, {"is_private": false, "creator": "demon@dim13.org", "count": 2, "creation_time": "2011-07-23T19:53:25Z", "author": "demon@dim13.org", "text": "problem place #1: mozilla/xpcom/io/nsLocalFileCommon.cpp: line 172\nmktemp shall be considered as replacement", "time": "2011-07-23T19:53:25Z", "tags": [], "bug_id": 673703, "attachment_id": null, "raw_text": "problem place #1: mozilla/xpcom/io/nsLocalFileCommon.cpp: line 172\nmktemp shall be considered as replacement", "id": 5609276}, {"raw_text": "I can confirm it for linux and tb 5.0\n\nSteps to reproduce:\n$ cd /tmp\n$ touch nscopy.tmp; touch nsemail.eml\n$ for i in `seq 1 9999`; do touch nscopy-$i.tmp; touch nsemail-$i.eml; done\nThen try to write new message and save it as draft", "attachment_id": null, "id": 5610590, "count": 3, "is_private": false, "creator": "pupykin.s@gmail.com", "text": "I can confirm it for linux and tb 5.0\n\nSteps to reproduce:\n$ cd /tmp\n$ touch nscopy.tmp; touch nsemail.eml\n$ for i in `seq 1 9999`; do touch nscopy-$i.tmp; touch nsemail-$i.eml; done\nThen try to write new message and save it as draft", "time": "2011-07-25T10:39:28Z", "tags": [], "bug_id": 673703, "creation_time": "2011-07-25T10:39:28Z", "author": "pupykin.s@gmail.com"}, {"raw_text": "duplicate of bug 389132?", "attachment_id": null, "id": 5640767, "count": 4, "is_private": false, "creator": "vseerror@lehigh.edu", "text": "duplicate of bug 389132?", "time": "2011-08-08T22:07:21Z", "tags": [], "bug_id": 673703, "creation_time": "2011-08-08T22:07:21Z", "author": "vseerror@lehigh.edu"}, {"count": 5, "bug_id": 673703, "is_private": false, "creator": "ludovic@hirlimann.net", "text": "(In reply to Wayne Mery (:wsmwk) from comment #4)\n> duplicate of bug 389132?\n\nNot really - this one would block.(In reply to Dimitri Sokolyuk from comment #2)\n\n> problem place #1: mozilla/xpcom/io/nsLocalFileCommon.cpp: line 172\n> mktemp shall be considered as replacement\n\nDimitri do you think you could come up with a patch to fix the issue ?", "tags": [], "time": "2011-08-10T13:03:44Z", "creation_time": "2011-08-10T13:03:44Z", "author": "ludovic@hirlimann.net", "raw_text": "(In reply to Wayne Mery (:wsmwk) from comment #4)\n> duplicate of bug 389132?\n\nNot really - this one would block.(In reply to Dimitri Sokolyuk from comment #2)\n\n> problem place #1: mozilla/xpcom/io/nsLocalFileCommon.cpp: line 172\n> mktemp shall be considered as replacement\n\nDimitri do you think you could come up with a patch to fix the issue ?", "attachment_id": null, "id": 5644743}, {"id": 5644830, "raw_text": "(In reply to Ludovic Hirlimann [:Usul] from comment #5)\n> Dimitri do you think you could come up with a patch to fix the issue ?\n\nRight now I'm a little out of time, but I'll see what I can do. However it's only a part of a problem. Much bigger problem is, that TB misses somewhere to destroy it's temporary files. I haven't find a location of this second problem right now.", "attachment_id": null, "tags": [], "time": "2011-08-10T13:51:54Z", "bug_id": 673703, "text": "(In reply to Ludovic Hirlimann [:Usul] from comment #5)\n> Dimitri do you think you could come up with a patch to fix the issue ?\n\nRight now I'm a little out of time, but I'll see what I can do. However it's only a part of a problem. Much bigger problem is, that TB misses somewhere to destroy it's temporary files. I haven't find a location of this second problem right now.", "author": "demon@dim13.org", "creation_time": "2011-08-10T13:51:54Z", "count": 6, "creator": "demon@dim13.org", "is_private": false}, {"count": 7, "bug_id": 673703, "creator": "vseerror@lehigh.edu", "is_private": false, "author": "vseerror@lehigh.edu", "creation_time": "2011-08-11T11:27:52Z", "time": "2011-08-11T11:27:52Z", "tags": [], "text": "xref the open bugs in https://bugzilla.mozilla.org/buglist.cgi?type1-0-0=substring&list_id=1045250&short_desc=temp%20tmp%20nsmail&field0-0-0=short_desc&type0-0-1=substring&field0-0-1=keywords&type1-0-1=allwordssubstr&resolution=---&resolution=FIXED&classification=Client%20Software&classification=Components&chfieldto=Now&query_format=advanced&chfieldfrom=3y&longdesc=nsmail%20tmp&short_desc_type=anywordssubstr&type0-0-0=anywordssubstr&field1-0-0=short_desc&product=MailNews%20Core&product=Thunderbird&longdesc_type=allwords&field1-0-1=short_desc\n\nNB bug 377621 is one potential source of these files. And it has a unfinished, uncommitted patch.", "attachment_id": null, "raw_text": "xref the open bugs in https://bugzilla.mozilla.org/buglist.cgi?type1-0-0=substring&list_id=1045250&short_desc=temp%20tmp%20nsmail&field0-0-0=short_desc&type0-0-1=substring&field0-0-1=keywords&type1-0-1=allwordssubstr&resolution=---&resolution=FIXED&classification=Client%20Software&classification=Components&chfieldto=Now&query_format=advanced&chfieldfrom=3y&longdesc=nsmail%20tmp&short_desc_type=anywordssubstr&type0-0-0=anywordssubstr&field1-0-0=short_desc&product=MailNews%20Core&product=Thunderbird&longdesc_type=allwords&field1-0-1=short_desc\n\nNB bug 377621 is one potential source of these files. And it has a unfinished, uncommitted patch.", "id": 5647231}, {"count": 8, "bug_id": 673703, "creator": "vseerror@lehigh.edu", "is_private": false, "author": "vseerror@lehigh.edu", "creation_time": "2011-08-11T11:42:53Z", "tags": [], "time": "2011-08-11T11:42:53Z", "text": "better query, with 25 open bugs - the bugs we want to fix rather than do wallpaper here, ISTM\n\nhttps://bugzilla.mozilla.org/buglist.cgi?type1-0-0=substring&list_id=1057146&short_desc=temp%20tmp%20nsmail%20nsemail&field0-0-0=longdesc&type0-0-1=anywordssubstr&field0-0-1=longdesc&type1-0-1=allwordssubstr&resolution=---&resolution=FIXED&classification=Client%20Software&classification=Components&chfieldto=Now&query_format=advanced&chfieldfrom=3y&short_desc_type=anywordssubstr&value0-0-1=nsmail%20nsemail%20ns%2A&type0-0-0=anywords&value0-0-0=tmp%20temp&field1-0-0=short_desc&product=MailNews%20Core&product=Thunderbird&field1-0-1=short_desc", "attachment_id": null, "raw_text": "better query, with 25 open bugs - the bugs we want to fix rather than do wallpaper here, ISTM\n\nhttps://bugzilla.mozilla.org/buglist.cgi?type1-0-0=substring&list_id=1057146&short_desc=temp%20tmp%20nsmail%20nsemail&field0-0-0=longdesc&type0-0-1=anywordssubstr&field0-0-1=longdesc&type1-0-1=allwordssubstr&resolution=---&resolution=FIXED&classification=Client%20Software&classification=Components&chfieldto=Now&query_format=advanced&chfieldfrom=3y&short_desc_type=anywordssubstr&value0-0-1=nsmail%20nsemail%20ns%2A&type0-0-0=anywords&value0-0-0=tmp%20temp&field1-0-0=short_desc&product=MailNews%20Core&product=Thunderbird&field1-0-1=short_desc", "id": 5647264}, {"is_private": false, "creator": "jporterbugs@gmail.com", "count": 9, "creation_time": "2011-08-19T01:27:13Z", "author": "jporterbugs@gmail.com", "text": "*** Bug 680303 has been marked as a duplicate of this bug. ***", "time": "2011-08-19T01:27:13Z", "tags": [], "bug_id": 673703, "attachment_id": null, "raw_text": "", "id": 5664337}, {"id": 5664344, "attachment_id": null, "raw_text": "(In reply to Wayne Mery (:wsmwk) from comment #7)\n> NB bug 377621 is one potential source of these files. And it has a\n> unfinished, uncommitted patch.\n\nI don't think the nsmail.tmp files come from that, since that bug is about adding a new set of temporary files for drag-and-drop on GTK. Currently, temp files aren't created at all with drag-and-drop on GTK.", "author": "jporterbugs@gmail.com", "creation_time": "2011-08-19T01:29:39Z", "bug_id": 673703, "tags": [], "time": "2011-08-19T01:29:39Z", "text": "(In reply to Wayne Mery (:wsmwk) from comment #7)\n> NB bug 377621 is one potential source of these files. And it has a\n> unfinished, uncommitted patch.\n\nI don't think the nsmail.tmp files come from that, since that bug is about adding a new set of temporary files for drag-and-drop on GTK. Currently, temp files aren't created at all with drag-and-drop on GTK.", "creator": "jporterbugs@gmail.com", "is_private": false, "count": 10}, {"id": 5687046, "attachment_id": null, "raw_text": "xref bug 389132, for ease of tracking & search.\n\nAs I wrote in bug 389132 comment #15, an easiest/simplist way to generate undeleted nsmail-NNNN.tmp is;\n  Compose a mail and attach many mails, and \"Send Later\".\n  Cancel mail sending(or Kill Tb), while creating many nsmail-NNNN.tmp.\nAs seen in bug 389132 comment #11, Tb tries to find free NNNN for nsmail-NNNN.tmp from nsmail.tmp/nsmail-1.tmp always. I was interested in \"creation fail when NNNN==9999\" case in that bug, but I didn't check it.\n\n(In reply to Dimitri Sokolyuk from comment #0)\n> It also does not remove its temp files, at it should.\n\n(A) For \"cancel of mail sending\" case: Tb should remove temp files.\n(B) For crash of Tb case:\n    Application usually can not request remove if crash happens.\n    So, user is usually responsible to remove garbages in /tmp or \\Temp,\n    or to clean up /tmp or \\Temp periodically.\n    It's ordinal design of OS used by PC.\n    \"Clean up by user\" will be mandatory, even if system call like \"mktemp\"\n    will be used, unless OS will be responsible to remove remained temp file\n    after crash of an application.", "creation_time": "2011-08-30T06:28:41Z", "author": "m-wada@usa.com", "text": "xref bug 389132, for ease of tracking & search.\n\nAs I wrote in bug 389132 comment #15, an easiest/simplist way to generate undeleted nsmail-NNNN.tmp is;\n  Compose a mail and attach many mails, and \"Send Later\".\n  Cancel mail sending(or Kill Tb), while creating many nsmail-NNNN.tmp.\nAs seen in bug 389132 comment #11, Tb tries to find free NNNN for nsmail-NNNN.tmp from nsmail.tmp/nsmail-1.tmp always. I was interested in \"creation fail when NNNN==9999\" case in that bug, but I didn't check it.\n\n(In reply to Dimitri Sokolyuk from comment #0)\n> It also does not remove its temp files, at it should.\n\n(A) For \"cancel of mail sending\" case: Tb should remove temp files.\n(B) For crash of Tb case:\n    Application usually can not request remove if crash happens.\n    So, user is usually responsible to remove garbages in /tmp or \\Temp,\n    or to clean up /tmp or \\Temp periodically.\n    It's ordinal design of OS used by PC.\n    \"Clean up by user\" will be mandatory, even if system call like \"mktemp\"\n    will be used, unless OS will be responsible to remove remained temp file\n    after crash of an application.", "time": "2011-08-30T06:28:41Z", "bug_id": 673703, "tags": [], "is_private": false, "creator": "m-wada@usa.com", "count": 11}, {"attachment_id": null, "raw_text": "This bug is applicavle to temp file to open appachment by application.\n\nFor example, open attachment of filename=Voice.PDF by Adobe Reader on MS Win.\n(1) Tb uses random name like \"0QuEzw0F\" (no quote) for temp file.\n(2) Tb deletes C:\\DOCUME~1\\wada\\LOCALS~1\\Temp\\0QuEzw0F.TXT (without \".part\"). \n(3) Tb creates C:\\DOCUME~1\\wada\\LOCALS~1\\Temp\\0QuEzw0F.TXT.part (with \".part\"),\n    and write attachment data to this file.\n(4) Tb tries to rename C:\\DOCUME~1\\wada\\LOCALS~1\\Temp\\0QuEzw0F.TXT.part\n    to Voice.PDF.\n    If Voice.PDF already exists, try to rename to Voice-1.PDF.\n    If Voice-{N}.PDF already exists, try to rename to Voice-{N+1}.PDF,\n    where N == 1 to 9998 (Max {N+1} == 9999).\n(5-A) If rename to Voice.PDF or Voice-X.PDF (X == 1 to 9999) is successful,\n    C:\\DOCUME~1\\wada\\LOCALS~1\\Temp\\Voice-X.PDF is passed to application.\n(5-B) If rename to Voice-9999.PDF fails, following dialog is shown, and \"open attachment by application\" fails.\n> Downloading C:\\DOCUME~1\\wada\\LOCALS~1\\Temp\\0QuEzw0F.TXT.part\n>   ! C:\\DOCUME~1\\wada\\LOCALS~1\\Temp\\0QuEzw0F.TXT.part could not be saved,\n>        because an unknown error occurred.\n>     Try saving to a different location.\n>              [ OK ]\n\nProblems in above.\n(a) File name which is deleted at step (2) (without .part)  is different from file name which is used for data writing at step (3) (with .part).\n(b) Because Tb tries Voice-1.PDF to Voice-9999.PDF serially, it usualy takes long.\n(c) Error message at step (5-B) is incorrect, because writing data to 0QuEzw0F.TXT.part itself is successful. Error message should indicate file name of Voice-9999.PDF in the dialog.\n\nNote-1:\nIf \"Cancel\" is requested at \"Open Dialog\", temp file of C:\\DOCUME~1\\wada\\LOCALS~1\\Temp\\0QuEzw0F.TXT.part is normally deleted by Tb 8. So, garbage is not produced by \"Cancel\" in this case. \n\nNote-2:\nIf \"open attachment by application\" is requested multiple times for same attachment at same time by user, Tb writes data to differnt {random_string}.PDF, and renames to different Voice-NNNN.PDF.\n\nNote-3:\nIf rename to Voice-A.PDF, Voice-B.PDF, Voice-C.PDF, ..., is successful, these temp files are used by external application. So, these files are not deleted by Tb while Tb is running.\nWhen browser.download.manager.retention=1(Tb's default=1), these temp files are deleted upon termination of Tb, if and only if termination of Tb is successful and delete request by Tb is successful.\ni.e.\nIf system crash, power failure, Tb's hung/freeze etc. occurs before deletion of temp files by Tb, or if temp file is still opened by application when Tb tries to delete the temp file upon termiation of Tb, temp file remains in Temp directory of system.\nOS usually never deletes such remaining temp files automatically. So, user needs to delete such garbage files by himself.  It's OS's design.", "id": 5944354, "is_private": false, "creator": "m-wada@usa.com", "creation_time": "2011-12-29T04:49:18Z", "author": "m-wada@usa.com", "text": "This bug is applicavle to temp file to open appachment by application.\n\nFor example, open attachment of filename=Voice.PDF by Adobe Reader on MS Win.\n(1) Tb uses random name like \"0QuEzw0F\" (no quote) for temp file.\n(2) Tb deletes C:\\DOCUME~1\\wada\\LOCALS~1\\Temp\\0QuEzw0F.TXT (without \".part\"). \n(3) Tb creates C:\\DOCUME~1\\wada\\LOCALS~1\\Temp\\0QuEzw0F.TXT.part (with \".part\"),\n    and write attachment data to this file.\n(4) Tb tries to rename C:\\DOCUME~1\\wada\\LOCALS~1\\Temp\\0QuEzw0F.TXT.part\n    to Voice.PDF.\n    If Voice.PDF already exists, try to rename to Voice-1.PDF.\n    If Voice-{N}.PDF already exists, try to rename to Voice-{N+1}.PDF,\n    where N == 1 to 9998 (Max {N+1} == 9999).\n(5-A) If rename to Voice.PDF or Voice-X.PDF (X == 1 to 9999) is successful,\n    C:\\DOCUME~1\\wada\\LOCALS~1\\Temp\\Voice-X.PDF is passed to application.\n(5-B) If rename to Voice-9999.PDF fails, following dialog is shown, and \"open attachment by application\" fails.\n> Downloading C:\\DOCUME~1\\wada\\LOCALS~1\\Temp\\0QuEzw0F.TXT.part\n>   ! C:\\DOCUME~1\\wada\\LOCALS~1\\Temp\\0QuEzw0F.TXT.part could not be saved,\n>        because an unknown error occurred.\n>     Try saving to a different location.\n>              [ OK ]\n\nProblems in above.\n(a) File name which is deleted at step (2) (without .part)  is different from file name which is used for data writing at step (3) (with .part).\n(b) Because Tb tries Voice-1.PDF to Voice-9999.PDF serially, it usualy takes long.\n(c) Error message at step (5-B) is incorrect, because writing data to 0QuEzw0F.TXT.part itself is successful. Error message should indicate file name of Voice-9999.PDF in the dialog.\n\nNote-1:\nIf \"Cancel\" is requested at \"Open Dialog\", temp file of C:\\DOCUME~1\\wada\\LOCALS~1\\Temp\\0QuEzw0F.TXT.part is normally deleted by Tb 8. So, garbage is not produced by \"Cancel\" in this case. \n\nNote-2:\nIf \"open attachment by application\" is requested multiple times for same attachment at same time by user, Tb writes data to differnt {random_string}.PDF, and renames to different Voice-NNNN.PDF.\n\nNote-3:\nIf rename to Voice-A.PDF, Voice-B.PDF, Voice-C.PDF, ..., is successful, these temp files are used by external application. So, these files are not deleted by Tb while Tb is running.\nWhen browser.download.manager.retention=1(Tb's default=1), these temp files are deleted upon termination of Tb, if and only if termination of Tb is successful and delete request by Tb is successful.\ni.e.\nIf system crash, power failure, Tb's hung/freeze etc. occurs before deletion of temp files by Tb, or if temp file is still opened by application when Tb tries to delete the temp file upon termiation of Tb, temp file remains in Temp directory of system.\nOS usually never deletes such remaining temp files automatically. So, user needs to delete such garbage files by himself.  It's OS's design.", "time": "2011-12-29T04:49:18Z", "tags": [], "count": 12, "bug_id": 673703}, {"raw_text": "", "attachment_id": null, "id": 6304333, "count": 13, "creator": "bugzilla2007@duellmann24.net", "is_private": false, "time": "2012-05-14T06:42:49Z", "tags": [], "bug_id": 673703, "text": "*** Bug 671440 has been marked as a duplicate of this bug. ***", "author": "bugzilla2007@duellmann24.net", "creation_time": "2012-05-14T06:42:49Z"}, {"id": 6546785, "raw_text": "", "attachment_id": null, "text": "*** Bug 781478 has been marked as a duplicate of this bug. ***", "tags": [], "bug_id": 673703, "time": "2012-08-10T16:13:44Z", "creation_time": "2012-08-10T16:13:44Z", "author": "m-wada@usa.com", "count": 14, "is_private": false, "creator": "m-wada@usa.com"}, {"creation_time": "2013-05-14T02:06:40Z", "author": "jik@kamens.us", "text": "Impressive that this is still broken almost two years after the bug was filed.", "tags": [], "time": "2013-05-14T02:06:40Z", "bug_id": 673703, "is_private": false, "creator": "jik@kamens.us", "count": 15, "id": 7419241, "attachment_id": null, "raw_text": "Impressive that this is still broken almost two years after the bug was filed."}, {"bug_id": 673703, "count": 16, "id": 7419244, "raw_text": "", "attachment_id": null, "tags": [], "time": "2013-05-14T02:08:26Z", "text": "*** Bug 812949 has been marked as a duplicate of this bug. ***", "author": "jik@kamens.us", "creation_time": "2013-05-14T02:08:26Z", "creator": "jik@kamens.us", "is_private": false}, {"attachment_id": null, "raw_text": "Looks like this is a limitation of createUnique:\nhttp://hg.mozilla.org/mozilla-central/annotate/81dd97739fa1/xpcom/io/nsLocalFileCommon.cpp#l138", "id": 7419673, "creator": "mkmelin+mozilla@iki.fi", "is_private": false, "author": "mkmelin+mozilla@iki.fi", "creation_time": "2013-05-14T06:04:14Z", "time": "2013-05-14T06:04:14Z", "tags": [], "text": "Looks like this is a limitation of createUnique:\nhttp://hg.mozilla.org/mozilla-central/annotate/81dd97739fa1/xpcom/io/nsLocalFileCommon.cpp#l138", "count": 17, "bug_id": 673703}, {"count": 18, "bug_id": 673703, "is_private": false, "creator": "acelists@atlas.sk", "creation_time": "2013-08-21T08:53:19Z", "author": "acelists@atlas.sk", "text": "Jonathan, do you still have 9999 nsmail temp files existing?\nI think recently there were some fixes to not leave stray temp files around.\n\nDoes anybody think we should add some code to TB to delete all stray temp files belonging to TB on startup (e.g. nsmail-*.tmp, but there still may be a clash if Seamonkey is running alongside) ?", "tags": [], "time": "2013-08-21T08:53:19Z", "attachment_id": null, "raw_text": "Jonathan, do you still have 9999 nsmail temp files existing?\nI think recently there were some fixes to not leave stray temp files around.\n\nDoes anybody think we should add some code to TB to delete all stray temp files belonging to TB on startup (e.g. nsmail-*.tmp, but there still may be a clash if Seamonkey is running alongside) ?", "id": 7771930}, {"bug_id": 673703, "count": 19, "id": 7772315, "attachment_id": null, "raw_text": "(In reply to :aceman from comment #18)\n> Jonathan, do you still have 9999 nsmail temp files existing?\n> I think recently there were some fixes to not leave stray temp files around.\n> \n> Does anybody think we should add some code to TB to delete all stray temp\n> files belonging to TB on startup (e.g. nsmail-*.tmp, but there still may be\n> a clash if Seamonkey is running alongside) ?\n\nSomething needs to be done bug I'm ambivalent about a wallpaper solution that hides symptoms of real problems/incorrect code.  In other words, I'm sure there are cases where we can outright fix problems.  https://bugzilla.mozilla.org/buglist.cgi?f1=OP&o3=anywordssubstr&list_id=7707974&short_desc=temp%20tmp%20temporary%20nseml%20nstmp%20nstemp&resolution=---&resolution=FIXED&resolution=EXPIRED&classification=Client%20Software&classification=Components&o2=nowordssubstr&f4=CP&query_format=advanced&j1=OR&f3=keywords&f2=short_desc&short_desc_type=anywords&v2=templat%20biff%20contact%20cert&product=MailNews%20Core&product=Thunderbird lays out the history and what's left to fix.\n\nbug 553165 is the wallpaper idea.", "creation_time": "2013-08-21T11:02:04Z", "author": "vseerror@lehigh.edu", "text": "(In reply to :aceman from comment #18)\n> Jonathan, do you still have 9999 nsmail temp files existing?\n> I think recently there were some fixes to not leave stray temp files around.\n> \n> Does anybody think we should add some code to TB to delete all stray temp\n> files belonging to TB on startup (e.g. nsmail-*.tmp, but there still may be\n> a clash if Seamonkey is running alongside) ?\n\nSomething needs to be done bug I'm ambivalent about a wallpaper solution that hides symptoms of real problems/incorrect code.  In other words, I'm sure there are cases where we can outright fix problems.  https://bugzilla.mozilla.org/buglist.cgi?f1=OP&o3=anywordssubstr&list_id=7707974&short_desc=temp%20tmp%20temporary%20nseml%20nstmp%20nstemp&resolution=---&resolution=FIXED&resolution=EXPIRED&classification=Client%20Software&classification=Components&o2=nowordssubstr&f4=CP&query_format=advanced&j1=OR&f3=keywords&f2=short_desc&short_desc_type=anywords&v2=templat%20biff%20contact%20cert&product=MailNews%20Core&product=Thunderbird lays out the history and what's left to fix.\n\nbug 553165 is the wallpaper idea.", "tags": [], "time": "2013-08-21T11:02:04Z", "is_private": false, "creator": "vseerror@lehigh.edu"}, {"is_private": false, "creator": "infofrommozilla@gmail.com", "creation_time": "2021-02-20T18:18:37Z", "author": "infofrommozilla@gmail.com", "text": "*** Bug 1692907 has been marked as a duplicate of this bug. ***", "tags": [], "time": "2021-02-20T18:18:37Z", "attachment_id": null, "raw_text": "", "id": 15274267, "count": 20, "bug_id": 673703}, {"text": "(In reply to :aceman from comment #18)\n> Jonathan, do you still have 9999 nsmail temp files existing?\n> I think recently there were some fixes to not leave stray temp files around.\n\nI can still reproduce sticking \"nsqmail-*.tmp\" files by placing mails in the Send-Later folder and then calling Send Unsend Messages while the server is down.\n<https://searchfox.org/comm-central/rev/68ba4decd0f0b2e4081c2be892fc12a5e8f44784/mailnews/compose/src/nsMsgSendLater.cpp#557>", "tags": [], "bug_id": 673703, "time": "2021-02-20T18:40:39Z", "creation_time": "2021-02-20T18:40:39Z", "author": "infofrommozilla@gmail.com", "count": 21, "is_private": false, "creator": "infofrommozilla@gmail.com", "id": 15274281, "raw_text": "(In reply to :aceman from comment #18)\n> Jonathan, do you still have 9999 nsmail temp files existing?\n> I think recently there were some fixes to not leave stray temp files around.\n\nI can still reproduce sticking \"nsqmail-*.tmp\" files by placing mails in the Send-Later folder and then calling Send Unsend Messages while the server is down.\n<https://searchfox.org/comm-central/rev/68ba4decd0f0b2e4081c2be892fc12a5e8f44784/mailnews/compose/src/nsMsgSendLater.cpp#557>", "attachment_id": null}, {"time": "2021-03-04T14:47:51Z", "tags": [], "text": "I just had this issue in 2021, \"Assembling message\" then \"sending of the message failed\" suddenly.  After reading this thread, my nsemail* files were 9999 and nsmail was in the 3000s.  Deleted them all, problem solved.  Thanks and yes please write proper error message when this happens.  Much appreciated!", "author": "lisafougere22@gmail.com", "creation_time": "2021-03-04T14:47:51Z", "creator": "lisafougere22@gmail.com", "is_private": false, "id": 15294000, "raw_text": "I just had this issue in 2021, \"Assembling message\" then \"sending of the message failed\" suddenly.  After reading this thread, my nsemail* files were 9999 and nsmail was in the 3000s.  Deleted them all, problem solved.  Thanks and yes please write proper error message when this happens.  Much appreciated!", "attachment_id": null, "bug_id": 673703, "count": 22}]}}, "comments": {}}