{"bugs": {"645806": {"comments": [{"attachment_id": null, "time": "2011-03-28T19:50:43Z", "is_private": false, "author": "gustavo@angulosolido.pt", "bug_id": 645806, "tags": [], "creator": "gustavo@angulosolido.pt", "count": 0, "text": "User-Agent:       Mozilla/5.0 (X11; U; Linux i686; pt-PT; rv:1.9.2.13) Gecko/20101206 Ubuntu/10.04 (lucid) Firefox/3.6.13\nBuild Identifier: Mozilla/5.0 (X11; U; Linux i686; pt-PT; rv:1.9.2.13) Gecko/20101206 Ubuntu/10.04 (lucid) Firefox/3.6.13\n\nI can't get Firefox to authenticate on an NTLM based website without prompting for the password, even though the running user is authenticated to the AD domain.\n\nSome details:\n\n- kerberos authentication for websites on the same domain works well\n- multiple sources on the web claim that NTLM should work as well although they are not explicit about Linux and Mac\n- Firefox logs \"writing to ntlm_auth:\" but the ntlm_auth binary is NOT executed (I wrote a wrapper with debug output to be sure about this)\n- Firefox also logs these self explanatory lines:\n\n-1215531152[b7619060]: Default credentials allowed for host: 1\n-1215531152[b7619060]: Native sys-ntlm auth module not found.\n-1215531152[b7619060]: Trying to fall back on internal ntlm auth.\n-1215531152[b7619060]:   identity invalid = 1\n-1215531152[b7619060]: nsHttpChannel::PromptForIdentity [this=a6febff0]\n\nRelated prefs are as follow:\n\nnetwork.automatic-ntlm-auth.allow-proxies;true\nnetwork.auth.force-generic-ntlm;false\nnetwork.automatic-ntlm-auth.trusted-uris;http://,https://\nnetwork.ntlm.send-lm-response;false\n\nReproducible: Always\n\nSteps to Reproduce:\n1.login on the workstation\n2.go to a local NTLM base website\n3.watch the user/pass prompt appear \nActual Results:  \nFirefox asks for the credentials\n\nExpected Results:  \nI'd expect to have automatic authentication", "creation_time": "2011-03-28T19:50:43Z", "raw_text": "User-Agent:       Mozilla/5.0 (X11; U; Linux i686; pt-PT; rv:1.9.2.13) Gecko/20101206 Ubuntu/10.04 (lucid) Firefox/3.6.13\nBuild Identifier: Mozilla/5.0 (X11; U; Linux i686; pt-PT; rv:1.9.2.13) Gecko/20101206 Ubuntu/10.04 (lucid) Firefox/3.6.13\n\nI can't get Firefox to authenticate on an NTLM based website without prompting for the password, even though the running user is authenticated to the AD domain.\n\nSome details:\n\n- kerberos authentication for websites on the same domain works well\n- multiple sources on the web claim that NTLM should work as well although they are not explicit about Linux and Mac\n- Firefox logs \"writing to ntlm_auth:\" but the ntlm_auth binary is NOT executed (I wrote a wrapper with debug output to be sure about this)\n- Firefox also logs these self explanatory lines:\n\n-1215531152[b7619060]: Default credentials allowed for host: 1\n-1215531152[b7619060]: Native sys-ntlm auth module not found.\n-1215531152[b7619060]: Trying to fall back on internal ntlm auth.\n-1215531152[b7619060]:   identity invalid = 1\n-1215531152[b7619060]: nsHttpChannel::PromptForIdentity [this=a6febff0]\n\nRelated prefs are as follow:\n\nnetwork.automatic-ntlm-auth.allow-proxies;true\nnetwork.auth.force-generic-ntlm;false\nnetwork.automatic-ntlm-auth.trusted-uris;http://,https://\nnetwork.ntlm.send-lm-response;false\n\nReproducible: Always\n\nSteps to Reproduce:\n1.login on the workstation\n2.go to a local NTLM base website\n3.watch the user/pass prompt appear \nActual Results:  \nFirefox asks for the credentials\n\nExpected Results:  \nI'd expect to have automatic authentication", "id": 5375216}, {"author": "gustavo@angulosolido.pt", "attachment_id": null, "text": "Logs were obtained with:\n\nexport NSPR_LOG_FILE=/tmp/moz.log\nexport NSPR_LOG_MODULES=negotiateauth:10,nsHttp:10\n\ntail -f /tmp/moz.log & firefox", "creation_time": "2011-03-28T19:54:54Z", "is_private": false, "raw_text": "Logs were obtained with:\n\nexport NSPR_LOG_FILE=/tmp/moz.log\nexport NSPR_LOG_MODULES=negotiateauth:10,nsHttp:10\n\ntail -f /tmp/moz.log & firefox", "id": 5375232, "bug_id": 645806, "tags": [], "time": "2011-03-28T19:54:54Z", "creator": "gustavo@angulosolido.pt", "count": 1}, {"attachment_id": null, "is_private": false, "time": "2013-05-10T14:16:05Z", "author": "nick@int-r.net", "text": "The same issue exists in OS X.", "creation_time": "2013-05-10T14:16:05Z", "raw_text": "The same issue exists in OS X.", "id": 7409379, "bug_id": 645806, "count": 2, "creator": "nick@int-r.net", "tags": []}, {"time": "2013-08-31T22:06:31Z", "is_private": false, "attachment_id": null, "bug_id": 645806, "creator": "jv.castro@gmail.com", "tags": [], "count": 3, "text": "Issue still present. Running Firefox 23.0 on Ubuntu precise.", "creation_time": "2013-08-31T22:06:31Z", "raw_text": "Issue still present. Running Firefox 23.0 on Ubuntu precise.", "id": 7812226, "author": "jv.castro@gmail.com"}, {"creation_time": "2014-11-26T11:39:33Z", "text": "I have been looking at this issue myself today and came across another bug on this bugtracker that seems related ( https://bugzilla.mozilla.org/show_bug.cgi?id=554122 ). ntlm_auth is called with YR and no response will follow in the log files. If you launch firefox from the same directory that has ntlm_auth in it (usually /usr/bin) the auth will work.", "id": 9640067, "raw_text": "I have been looking at this issue myself today and came across another bug on this bugtracker that seems related ( https://bugzilla.mozilla.org/show_bug.cgi?id=554122 ). ntlm_auth is called with YR and no response will follow in the log files. If you launch firefox from the same directory that has ntlm_auth in it (usually /usr/bin) the auth will work.", "count": 4, "creator": "hans@modpro.be", "tags": [], "bug_id": 645806, "author": "hans@modpro.be", "is_private": false, "time": "2014-11-26T11:39:33Z", "attachment_id": null}, {"creation_time": "2015-08-17T12:14:24Z", "text": "Issue still present. Running Firefox 38.2.0 on Ubuntu and Centos", "id": 10624728, "raw_text": "Issue still present. Running Firefox 38.2.0 on Ubuntu and Centos", "creator": "martincrielaard@gmail.com", "count": 5, "tags": [], "bug_id": 645806, "author": "martincrielaard@gmail.com", "is_private": false, "time": "2015-08-17T12:14:24Z", "attachment_id": null}, {"text": "Issue still present on Ubuntu and Firefox 42.0", "creation_time": "2015-11-17T08:10:50Z", "raw_text": "Issue still present on Ubuntu and Firefox 42.0", "id": 10938566, "bug_id": 645806, "count": 6, "creator": "Peter.Parzer@med.uni-heidelberg.de", "tags": [], "author": "Peter.Parzer@med.uni-heidelberg.de", "is_private": false, "time": "2015-11-17T08:10:50Z", "attachment_id": null}, {"is_private": false, "time": "2016-09-06T09:47:58Z", "attachment_id": null, "raw_text": "I'm using Mozilla Thunderbird 45.3.0 and I also can not send emails via an SMTP server that requires NTLM authentication. If it matters, Evolution on linux can do it with exact same login information I supplied.", "id": 11687875, "text": "I'm using Mozilla Thunderbird 45.3.0 and I also can not send emails via an SMTP server that requires NTLM authentication. If it matters, Evolution on linux can do it with exact same login information I supplied.", "creation_time": "2016-09-06T09:47:58Z", "bug_id": 645806, "tags": [], "count": 7, "creator": "oz.tiram@gmail.com", "author": "oz.tiram@gmail.com"}, {"bug_id": 645806, "count": 8, "creator": "gustavo@angulosolido.pt", "tags": [], "raw_text": "(In reply to Hans from comment #4)\n> I have been looking at this issue myself today and came across another bug\n> on this bugtracker that seems related (\n> https://bugzilla.mozilla.org/show_bug.cgi?id=554122 ). ntlm_auth is called\n> with YR and no response will follow in the log files. If you launch firefox\n> from the same directory that has ntlm_auth in it (usually /usr/bin) the auth\n> will work.\n\nIf you create a symlink to /usr/bin/ntlm_auth on your homedir it will work when launched from a desktop environment. The bug is Firefox not looking up for the command in the $PATH variable.", "id": 11688238, "text": "(In reply to Hans from comment #4)\n> I have been looking at this issue myself today and came across another bug\n> on this bugtracker that seems related (\n> https://bugzilla.mozilla.org/show_bug.cgi?id=554122 ). ntlm_auth is called\n> with YR and no response will follow in the log files. If you launch firefox\n> from the same directory that has ntlm_auth in it (usually /usr/bin) the auth\n> will work.\n\nIf you create a symlink to /usr/bin/ntlm_auth on your homedir it will work when launched from a desktop environment. The bug is Firefox not looking up for the command in the $PATH variable.", "creation_time": "2016-09-06T13:11:15Z", "author": "gustavo@angulosolido.pt", "time": "2016-09-06T13:11:15Z", "is_private": false, "attachment_id": null}, {"tags": [], "count": 9, "creator": "Peter.Parzer@med.uni-heidelberg.de", "bug_id": 645806, "id": 11690886, "raw_text": "With firefox 48 and winbind 4.3.9 even this fix does not work for me. It worked some time, but after an update of winbind (I dont remember the version) it stopped working.", "creation_time": "2016-09-07T06:33:37Z", "text": "With firefox 48 and winbind 4.3.9 even this fix does not work for me. It worked some time, but after an update of winbind (I dont remember the version) it stopped working.", "author": "Peter.Parzer@med.uni-heidelberg.de", "time": "2016-09-07T06:33:37Z", "is_private": false, "attachment_id": null}, {"creation_time": "2017-09-13T18:40:20Z", "text": "Bulk change to priority: https://bugzilla.mozilla.org/show_bug.cgi?id=1399258", "id": 12658932, "raw_text": "Bulk change to priority: https://bugzilla.mozilla.org/show_bug.cgi?id=1399258", "count": 10, "tags": [], "creator": "bug-husbandry-bot@mozilla.bugs", "bug_id": 645806, "author": "bug-husbandry-bot@mozilla.bugs", "is_private": false, "time": "2017-09-13T18:40:20Z", "attachment_id": null}, {"time": "2020-11-20T11:17:28Z", "is_private": false, "attachment_id": null, "count": 11, "creator": "mitja@mttv.it", "tags": [], "bug_id": 645806, "creation_time": "2020-11-20T11:17:28Z", "text": "With Firefox 83.0 on Ubuntu 20.04 (focal fossa) the bug is still present.\nFortunately the \"symlink to/usr/bin/ntlm_auth on your homedir\" workaround proposed at [comment 4](https://bugzilla.mozilla.org/show_bug.cgi?id=645806#c4) still works! So i have solved my usability problem just i take me quite some time to come here and find this workaround. Is this bug so hard to fix after 10 years.", "id": 15141200, "raw_text": "With Firefox 83.0 on Ubuntu 20.04 (focal fossa) the bug is still present.\nFortunately the \"symlink to/usr/bin/ntlm_auth on your homedir\" workaround proposed at [comment 4](https://bugzilla.mozilla.org/show_bug.cgi?id=645806#c4) still works! So i have solved my usability problem just i take me quite some time to come here and find this workaround. Is this bug so hard to fix after 10 years.", "author": "mitja@mttv.it"}]}}, "comments": {}}