{"comments": {}, "bugs": {"688088": {"comments": [{"author": "bzbarsky@mit.edu", "creator": "bzbarsky@mit.edu", "time": "2011-09-21T03:42:43Z", "creation_time": "2011-09-21T03:42:43Z", "is_private": false, "id": 5727410, "count": 0, "tags": [], "bug_id": 688088, "text": "BUILD: Firefox 6.\n\nSTEPS TO REPRODUCE:\n1)  Set up a bookmark to a site with a favicon in your bookmark toolbar.\n2)  Observe that the site's favicon appears next to the bookmark in the toolbar.\n3)  Go find a network with a captive portal that also has a favicon.\n4)  Once connected to that network but before going through the captive portal,\n    click the bookmark toolbar button set up in step 1.\n\nIf in step 4 you didn't get the captive portal page loading in the content area, you did it wrong.\n\nEXPECTED RESULTS: Captive portal loads, you jump through the hoops needed to actually get access to the network, and life is good.\n\nACTUAL RESULTS: Favicon in your bookmarks toolbar changes to the captive portal's favicon instead of the one you used to have.  Then you panic about the site having hacked your browser.\n\nNOTES: Can we only change the favicon if the visit chain is the same as last time?  Or if the final hostname is the same as the hostname in the bookmark?  Most captive portals work by redirecting to some random hostname...", "raw_text": "BUILD: Firefox 6.\n\nSTEPS TO REPRODUCE:\n1)  Set up a bookmark to a site with a favicon in your bookmark toolbar.\n2)  Observe that the site's favicon appears next to the bookmark in the toolbar.\n3)  Go find a network with a captive portal that also has a favicon.\n4)  Once connected to that network but before going through the captive portal,\n    click the bookmark toolbar button set up in step 1.\n\nIf in step 4 you didn't get the captive portal page loading in the content area, you did it wrong.\n\nEXPECTED RESULTS: Captive portal loads, you jump through the hoops needed to actually get access to the network, and life is good.\n\nACTUAL RESULTS: Favicon in your bookmarks toolbar changes to the captive portal's favicon instead of the one you used to have.  Then you panic about the site having hacked your browser.\n\nNOTES: Can we only change the favicon if the visit chain is the same as last time?  Or if the final hostname is the same as the hostname in the bookmark?  Most captive portals work by redirecting to some random hostname...", "attachment_id": null}, {"creator": "mak@mozilla.com", "time": "2011-09-21T07:39:10Z", "creation_time": "2011-09-21T07:39:10Z", "author": "mak@mozilla.com", "is_private": false, "id": 5727586, "count": 1, "text": "We may limit the icon change based on the host, sure, that would regress setting icon for those bookmarks who are temp or perma redirect from different domains though. That by itself may be less problematic than it is having icon of a redirecting access portal.\nThe first suggestion in your note is harder and less performant, since such is getting the last chain, also the first chain we have in history in some case may already be the broken one and we may not distinguish.", "bug_id": 688088, "tags": [], "attachment_id": null, "raw_text": "We may limit the icon change based on the host, sure, that would regress setting icon for those bookmarks who are temp or perma redirect from different domains though. That by itself may be less problematic than it is having icon of a redirecting access portal.\nThe first suggestion in your note is harder and less performant, since such is getting the last chain, also the first chain we have in history in some case may already be the broken one and we may not distinguish."}]}}}