{"bugs": {"708862": {"comments": [{"count": 0, "bug_id": 708862, "attachment_id": null, "raw_text": "All these tests pass in opt builds, and nobody seems to have any trouble with them on Linux.\n\n\n$ g++ -v\nUsing built-in specs.\nTarget: i686-apple-darwin11\nConfigured with: /private/var/tmp/llvmgcc42/llvmgcc42-2336.1~22/src/configure --disable-checking --enable-werror --prefix=/Developer/usr/llvm-gcc-4.2 --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-prefix=llvm- --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin11 --enable-llvm=/private/var/tmp/llvmgcc42/llvmgcc42-2336.1~22/dst-llvmCore/Developer/usr/local --program-prefix=i686-apple-darwin11- --host=x86_64-apple-darwin11 --target=i686-apple-darwin11 --with-gxx-include-dir=/usr/include/c++/4.2.1\nThread model: posix\ngcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.1.00)\n\n$ python tests/jstests.py -so ./d-objdir/js js1_5/Regress/regress-96526-003.js\n/Users/jorendorff/dev/mi/js/src/d-objdir/js -f shell.js -f js1_5/shell.js -f js1_5/Regress/shell.js -f ./js1_5/Regress/regress-96526-003.js\n    rc = 3, run time = 0.050431\ntoo much recursion\nREGRESSIONS\n    js1_5/Regress/regress-96526-003.js\nFAIL\n\n$ python tests/jstests.py -so ./d-objdir/js js1_8/genexps/regress-380237-01.js\n/Users/jorendorff/dev/mi/js/src/d-objdir/js -f shell.js -f js1_8/shell.js -f js1_8/genexps/shell.js -f ./js1_8/genexps/regress-380237-01.js\n    rc = 3, run time = 2.929350\nBUGNUMBER: 380237\nSTATUS: Generator expressions - sudoku\n4 8 3 |9 2 1 |6 5 7 \n9 6 7 |3 4 5 |8 2 1 \n2 5 1 |8 7 6 |4 9 3 \n------+------+------\n5 4 8 |1 3 2 |9 7 6 \n7 2 9 |5 6 4 |1 3 8 \n1 3 6 |7 9 8 |2 4 5 \n------+------+------\n3 7 2 |6 8 9 |5 1 4 \n8 1 4 |2 5 3 |7 6 9 \n6 9 5 |4 1 7 |3 8 2 \n\n\n./js1_8/genexps/regress-380237-01.js:178: InternalError: too much recursion\nREGRESSIONS\n    js1_8/genexps/regress-380237-01.js\nFAIL\n\n$ python jit-test/jit_test.py -so ./d-objdir/js basic/bug529130.js\n/Users/jorendorff/dev/mi/js/src/d-objdir/shell/js -m -e \"const platform='darwin'; const libdir='/Users/jorendorff/dev/mi/js/src/jit-test/lib/';\" -f /Users/jorendorff/dev/mi/js/src/jit-test/lib/prolog.js -f /Users/jorendorff/dev/mi/js/src/jit-test/tests/basic/bug529130.js\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n/Users/jorendorff/dev/mi/js/src/jit-test/tests/basic/bug529130.js:11: InternalError: too much recursion\nExit code: 3", "id": 5902535, "is_private": false, "creator": "jorendorff@mozilla.com", "creation_time": "2011-12-08T23:01:40Z", "author": "jorendorff@mozilla.com", "text": "All these tests pass in opt builds, and nobody seems to have any trouble with them on Linux.\n\n\n$ g++ -v\nUsing built-in specs.\nTarget: i686-apple-darwin11\nConfigured with: /private/var/tmp/llvmgcc42/llvmgcc42-2336.1~22/src/configure --disable-checking --enable-werror --prefix=/Developer/usr/llvm-gcc-4.2 --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-prefix=llvm- --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin11 --enable-llvm=/private/var/tmp/llvmgcc42/llvmgcc42-2336.1~22/dst-llvmCore/Developer/usr/local --program-prefix=i686-apple-darwin11- --host=x86_64-apple-darwin11 --target=i686-apple-darwin11 --with-gxx-include-dir=/usr/include/c++/4.2.1\nThread model: posix\ngcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.1.00)\n\n$ python tests/jstests.py -so ./d-objdir/js js1_5/Regress/regress-96526-003.js\n/Users/jorendorff/dev/mi/js/src/d-objdir/js -f shell.js -f js1_5/shell.js -f js1_5/Regress/shell.js -f ./js1_5/Regress/regress-96526-003.js\n    rc = 3, run time = 0.050431\ntoo much recursion\nREGRESSIONS\n    js1_5/Regress/regress-96526-003.js\nFAIL\n\n$ python tests/jstests.py -so ./d-objdir/js js1_8/genexps/regress-380237-01.js\n/Users/jorendorff/dev/mi/js/src/d-objdir/js -f shell.js -f js1_8/shell.js -f js1_8/genexps/shell.js -f ./js1_8/genexps/regress-380237-01.js\n    rc = 3, run time = 2.929350\nBUGNUMBER: 380237\nSTATUS: Generator expressions - sudoku\n4 8 3 |9 2 1 |6 5 7 \n9 6 7 |3 4 5 |8 2 1 \n2 5 1 |8 7 6 |4 9 3 \n------+------+------\n5 4 8 |1 3 2 |9 7 6 \n7 2 9 |5 6 4 |1 3 8 \n1 3 6 |7 9 8 |2 4 5 \n------+------+------\n3 7 2 |6 8 9 |5 1 4 \n8 1 4 |2 5 3 |7 6 9 \n6 9 5 |4 1 7 |3 8 2 \n\n\n./js1_8/genexps/regress-380237-01.js:178: InternalError: too much recursion\nREGRESSIONS\n    js1_8/genexps/regress-380237-01.js\nFAIL\n\n$ python jit-test/jit_test.py -so ./d-objdir/js basic/bug529130.js\n/Users/jorendorff/dev/mi/js/src/d-objdir/shell/js -m -e \"const platform='darwin'; const libdir='/Users/jorendorff/dev/mi/js/src/jit-test/lib/';\" -f /Users/jorendorff/dev/mi/js/src/jit-test/lib/prolog.js -f /Users/jorendorff/dev/mi/js/src/jit-test/tests/basic/bug529130.js\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n/Users/jorendorff/dev/mi/js/src/jit-test/tests/basic/bug529130.js:11: InternalError: too much recursion\nExit code: 3", "tags": [], "time": "2011-12-08T23:01:40Z"}, {"id": 5902784, "raw_text": "", "attachment_id": null, "text": "*** Bug 708247 has been marked as a duplicate of this bug. ***", "time": "2011-12-09T00:11:14Z", "tags": [], "creation_time": "2011-12-09T00:11:14Z", "author": "jorendorff@mozilla.com", "is_private": false, "creator": "jorendorff@mozilla.com", "bug_id": 708862, "count": 1}, {"count": 2, "creator": "jorendorff@mozilla.com", "is_private": false, "time": "2011-12-09T20:09:44Z", "bug_id": 708862, "tags": [], "text": "The stack frame for js_Interpret is something like 15K large, and local variables only account for a small fraction of that. I sent 25MB of dwarfdump output to jimb and he says it must be a GCC bug.\n\nIt seems unlikely that we are going to get that fixed. But I will leave this bug open since there are other ways to fix this issue (weaken the tests; disable them on mac; tinker with js_Interpret until we're not triggering the bug anymore; increase the stack size; etc.)", "author": "jorendorff@mozilla.com", "creation_time": "2011-12-09T20:09:44Z", "raw_text": "The stack frame for js_Interpret is something like 15K large, and local variables only account for a small fraction of that. I sent 25MB of dwarfdump output to jimb and he says it must be a GCC bug.\n\nIt seems unlikely that we are going to get that fixed. But I will leave this bug open since there are other ways to fix this issue (weaken the tests; disable them on mac; tinker with js_Interpret until we're not triggering the bug anymore; increase the stack size; etc.)", "attachment_id": null, "id": 5905039}, {"tags": [], "time": "2011-12-10T13:46:47Z", "text": "Since this is (likely) a bug in the old GCC version used on Mac OSX, are there any plans to move Mac builds over to Clang? There's a big meta-bug about getting builds working on Clang, but I couldn't find anything about switching over to it.", "author": "emanuel.hoogeveen@protonmail.com", "creation_time": "2011-12-10T13:46:47Z", "creator": "emanuel.hoogeveen@protonmail.com", "is_private": false, "id": 5906339, "raw_text": "Since this is (likely) a bug in the old GCC version used on Mac OSX, are there any plans to move Mac builds over to Clang? There's a big meta-bug about getting builds working on Clang, but I couldn't find anything about switching over to it.", "attachment_id": null, "bug_id": 708862, "count": 3}, {"count": 4, "is_private": false, "creator": "jwalden@mit.edu", "text": "I've seen these tests fail due to too much recursion on Linux64 as well.  I don't remember if this is with gcc 4.6 or with clang 3.0; might be both.", "tags": [], "bug_id": 708862, "time": "2011-12-10T21:21:08Z", "creation_time": "2011-12-10T21:21:08Z", "author": "jwalden@mit.edu", "raw_text": "I've seen these tests fail due to too much recursion on Linux64 as well.  I don't remember if this is with gcc 4.6 or with clang 3.0; might be both.", "attachment_id": null, "id": 5906669}, {"id": 5906671, "raw_text": "(Linux64 debug)", "attachment_id": null, "tags": [], "time": "2011-12-10T21:23:58Z", "bug_id": 708862, "text": "(Linux64 debug)", "author": "jwalden@mit.edu", "creation_time": "2011-12-10T21:23:58Z", "count": 5, "creator": "jwalden@mit.edu", "is_private": false}, {"attachment_id": null, "raw_text": "I get the \"too much recursion\" error with Clang 3.0 on OS X (64-bit), but not with g++-4.2 (g++ without LLVM). The default \"g++\" on OS X uses LLVM nowadays, so this looks like an LLVM problem.", "id": 5906707, "creator": "jdemooij@mozilla.com", "is_private": false, "count": 6, "author": "jdemooij@mozilla.com", "creation_time": "2011-12-10T22:10:05Z", "tags": [], "bug_id": 708862, "time": "2011-12-10T22:10:05Z", "text": "I get the \"too much recursion\" error with Clang 3.0 on OS X (64-bit), but not with g++-4.2 (g++ without LLVM). The default \"g++\" on OS X uses LLVM nowadays, so this looks like an LLVM problem."}, {"raw_text": "The workaround is to configure with \n\n    CC=gcc-apple-4.2 CXX=g++-apple-4.2 ../configure ...", "attachment_id": null, "id": 6025628, "creator": "jorendorff@mozilla.com", "is_private": false, "time": "2012-02-01T15:11:05Z", "tags": [], "text": "The workaround is to configure with \n\n    CC=gcc-apple-4.2 CXX=g++-apple-4.2 ../configure ...", "author": "jorendorff@mozilla.com", "creation_time": "2012-02-01T15:11:05Z", "count": 7, "bug_id": 708862}]}}, "comments": {}}