{"bugs": {"1634468": {"comments": [{"attachment_id": null, "creator": "jklukas@mozilla.com", "creation_time": "2020-04-30T16:58:19Z", "text": "## Proposal for changing an existing or adding a new Glean metric type\n\n### Who is the individual/team requesting this change?\nJeff Klukas, Data Platform Team as a representative of the cross-discipline Account Ecosystem Telemetry working group.\n\n### Is this about changing an existing metric type or creating a new one?\nCreating a new metric type\n\n### Can you describe the data that needs to be recorded?\nFor Account Ecosystem Telemetry, we need clients to be able to send \"account ecosystem\" pings with various metrics. The defining feature of an account ecosystem ping is that it includes a sensitive `ecosystem_anon_id` value that must be decrypted by the data pipeline and replaced with the decrypted `ecosystem_user_id` value before the ping is uploaded to BigQuery.\n\n### Can you provide a raw sample of the data that needs to be recorded (this is in the abstract, and not any particular implementation details about its representation in the payload or the database)\nThe client receives or generates an ecosystem_anon_id value during the FxA login flow. [The ecosystem_anon_id value is a JOSE JWE object in compact serialization form](https://docs.google.com/document/d/1zH3eVVI_28Afg1JXe_McDrW4MTYuWhiJMQR6AQbli8I/edit#), consisting of several hundred characters. That value includes the value to be decrypted along with various metadata describing the public key used to encrypt, encryption type, etc. An example value with whitespace added:\n\n```\neyJhbGciOiJFQ0RILUVTIiwia2lkIjoiMFZFRTdmT0txbFdHVGZrY0taRUJ2W\nWl3dkpMYTRUUGlJVGxXMGJOcDdqVSIsImVwayI6eyJrdHkiOiJFQyIsImNydi\nI6IlAtMjU2IiwieCI6InY3Q1FlRWtVQjMwUGwxV0tPMUZUZ25OQlNQdlFyNlh\n0UnZxT2kzSWdzNHciLCJ5IjoiNDBKVEpaQlMwOXpWNHpxb0hHZDI5NGFDeHRq\ncGU5a09reGhELVctUEZsSSJ9LCJlbmMiOiJBMjU2R0NNIn0.\n.\nA_wzJya943vlHKFH.\nyq0JhkGZiZd6UiZK6goTcEf6i4gbbBeXxvq8QV5_nC4.\nKnl_sYSBrrP-aa54z6B6gA\n\n```\n\n### What is the business question/use-case that requires the data to be recorded?\nThe overall business case for Account Ecosystem Telemetry is nuanced. See the [Product Ecosystem Metrics Proposal](https://docs.google.com/document/d/1KCMN-3UduDy9a2OuUK5msIYcTv9rZsCRtZyPvKaaIGk/edit#heading=h.e4sche1qjtao).\n\n### How would the data be consumed?\nThe `ecosystem_user_id` values present in BigQuery would allow us to correlate usage of a single FxA user across multiple products without knowing who that user is. Various aggregations would be performed across products, grouping by the shared `ecosystem_anon_id` values.\n\n### Why existing metric types are not enough?\nThere are several details here that bump up against limitations of the current Glean SDK.\n\nFirst, `ecosystem_anon_id` values are larger than the current limits of 100 characters for a string metrics or 50 characters for a string list metric.\n\nSecond, this value is subject to a new preprocessing step that has not previously existed in the pipeline. The client would be sending a metric with one name, and the pipeline would remove that field, decrypt it, and place a new `ecosystem_user_id` field into the ping before sending it to the normal Decoder step where schema validation, etc. is performed.\n\n### What is the timeline by which the data needs to be collected?\nWe are targeting desktop first for Account Ecosystem Telemetry, but will be wanting to start testing Glean apps as early as Q3 2020.", "id": 14789281, "time": "2020-04-30T16:58:19Z", "raw_text": "## Proposal for changing an existing or adding a new Glean metric type\n\n### Who is the individual/team requesting this change?\nJeff Klukas, Data Platform Team as a representative of the cross-discipline Account Ecosystem Telemetry working group.\n\n### Is this about changing an existing metric type or creating a new one?\nCreating a new metric type\n\n### Can you describe the data that needs to be recorded?\nFor Account Ecosystem Telemetry, we need clients to be able to send \"account ecosystem\" pings with various metrics. The defining feature of an account ecosystem ping is that it includes a sensitive `ecosystem_anon_id` value that must be decrypted by the data pipeline and replaced with the decrypted `ecosystem_user_id` value before the ping is uploaded to BigQuery.\n\n### Can you provide a raw sample of the data that needs to be recorded (this is in the abstract, and not any particular implementation details about its representation in the payload or the database)\nThe client receives or generates an ecosystem_anon_id value during the FxA login flow. [The ecosystem_anon_id value is a JOSE JWE object in compact serialization form](https://docs.google.com/document/d/1zH3eVVI_28Afg1JXe_McDrW4MTYuWhiJMQR6AQbli8I/edit#), consisting of several hundred characters. That value includes the value to be decrypted along with various metadata describing the public key used to encrypt, encryption type, etc. An example value with whitespace added:\n\n```\neyJhbGciOiJFQ0RILUVTIiwia2lkIjoiMFZFRTdmT0txbFdHVGZrY0taRUJ2W\nWl3dkpMYTRUUGlJVGxXMGJOcDdqVSIsImVwayI6eyJrdHkiOiJFQyIsImNydi\nI6IlAtMjU2IiwieCI6InY3Q1FlRWtVQjMwUGwxV0tPMUZUZ25OQlNQdlFyNlh\n0UnZxT2kzSWdzNHciLCJ5IjoiNDBKVEpaQlMwOXpWNHpxb0hHZDI5NGFDeHRq\ncGU5a09reGhELVctUEZsSSJ9LCJlbmMiOiJBMjU2R0NNIn0.\n.\nA_wzJya943vlHKFH.\nyq0JhkGZiZd6UiZK6goTcEf6i4gbbBeXxvq8QV5_nC4.\nKnl_sYSBrrP-aa54z6B6gA\n\n```\n\n### What is the business question/use-case that requires the data to be recorded?\nThe overall business case for Account Ecosystem Telemetry is nuanced. See the [Product Ecosystem Metrics Proposal](https://docs.google.com/document/d/1KCMN-3UduDy9a2OuUK5msIYcTv9rZsCRtZyPvKaaIGk/edit#heading=h.e4sche1qjtao).\n\n### How would the data be consumed?\nThe `ecosystem_user_id` values present in BigQuery would allow us to correlate usage of a single FxA user across multiple products without knowing who that user is. Various aggregations would be performed across products, grouping by the shared `ecosystem_anon_id` values.\n\n### Why existing metric types are not enough?\nThere are several details here that bump up against limitations of the current Glean SDK.\n\nFirst, `ecosystem_anon_id` values are larger than the current limits of 100 characters for a string metrics or 50 characters for a string list metric.\n\nSecond, this value is subject to a new preprocessing step that has not previously existed in the pipeline. The client would be sending a metric with one name, and the pipeline would remove that field, decrypt it, and place a new `ecosystem_user_id` field into the ping before sending it to the normal Decoder step where schema validation, etc. is performed.\n\n### What is the timeline by which the data needs to be collected?\nWe are targeting desktop first for Account Ecosystem Telemetry, but will be wanting to start testing Glean apps as early as Q3 2020.", "is_private": false, "count": 0, "tags": [], "bug_id": 1634468, "author": "jklukas@mozilla.com"}, {"author": "jklukas@mozilla.com", "tags": [], "bug_id": 1634468, "is_private": false, "count": 1, "raw_text": "See some [relevant discussion with :chutten in the `#account-ecosystem-telemetry` channel on Slack](https://mozilla.slack.com/archives/CNQMURMGT/p1588261028127000?thread_ts=1587753847.123600&cid=CNQMURMGT) that led me to casting this as a new metric proposal.", "time": "2020-04-30T16:59:45Z", "id": 14789285, "text": "See some [relevant discussion with :chutten in the `#account-ecosystem-telemetry` channel on Slack](https://mozilla.slack.com/archives/CNQMURMGT/p1588261028127000?thread_ts=1587753847.123600&cid=CNQMURMGT) that led me to casting this as a new metric proposal.", "creation_time": "2020-04-30T16:59:45Z", "attachment_id": null, "creator": "jklukas@mozilla.com"}, {"time": "2020-04-30T17:06:29Z", "creator": "chutten@mozilla.com", "attachment_id": null, "creation_time": "2020-04-30T17:06:29Z", "raw_text": "May be relevant for the design phase... :klukas, is this id something that will need to be included in \"deletion-request\" pings?", "tags": [], "bug_id": 1634468, "is_private": false, "count": 2, "text": "May be relevant for the design phase... :klukas, is this id something that will need to be included in \"deletion-request\" pings?", "id": 14789296, "author": "chutten@mozilla.com"}, {"id": 14789458, "text": "(In reply to Chris H-C :chutten from comment #2)\n> May be relevant for the design phase... :klukas, is this id something that will need to be included in \"deletion-request\" pings?\n\nMy understanding is that we don't need to include this identifier in the deletion request ping when the client opts out of telemetry. We instead have to send this identifier from FxA when an FxA user requests data deletion at the account level. This is based on :chutten's own comments in [:rfkelly's Google doc about comparing active user definitions](https://docs.google.com/document/d/1-e_UOVziGzbgZOIUzdxTOnlK6p9ImId8mNg9GvXNRvc/edit?ts=5e875139#):\n\n> Had a conversation in the Shredder meeting and the ruling is: On Telemetry opt-out we request the deletion of client-based data only.", "attachment_id": null, "creator": "jklukas@mozilla.com", "creation_time": "2020-04-30T18:20:28Z", "bug_id": 1634468, "tags": [], "count": 3, "is_private": false, "author": "jklukas@mozilla.com", "time": "2020-04-30T18:20:28Z", "raw_text": "(In reply to Chris H-C :chutten from comment #2)\n> May be relevant for the design phase... :klukas, is this id something that will need to be included in \"deletion-request\" pings?\n\nMy understanding is that we don't need to include this identifier in the deletion request ping when the client opts out of telemetry. We instead have to send this identifier from FxA when an FxA user requests data deletion at the account level. This is based on :chutten's own comments in [:rfkelly's Google doc about comparing active user definitions](https://docs.google.com/document/d/1-e_UOVziGzbgZOIUzdxTOnlK6p9ImId8mNg9GvXNRvc/edit?ts=5e875139#):\n\n> Had a conversation in the Shredder meeting and the ruling is: On Telemetry opt-out we request the deletion of client-based data only."}, {"tags": [], "bug_id": 1634468, "count": 4, "is_private": false, "author": "alessio.placitelli@gmail.com", "time": "2020-05-04T08:56:29Z", "raw_text": "Hey Jeff, why is this employee-confidential?", "id": 14795240, "text": "Hey Jeff, why is this employee-confidential?", "attachment_id": null, "creator": "alessio.placitelli@gmail.com", "creation_time": "2020-05-04T08:56:29Z"}, {"time": "2020-05-04T12:50:19Z", "raw_text": "(In reply to Alessio Placitelli [:Dexter] from comment #4)\n> Hey Jeff, why is this employee-confidential?\n\nI was being probably overly cautious due to the discussion of data deletion policy. I want to be careful not to make any explicit statements about compliance with any legislation, but I suppose it's fine to discuss data deletion policies publicly outside the context of compliance.", "tags": [], "bug_id": 1634468, "count": 5, "is_private": false, "author": "jklukas@mozilla.com", "attachment_id": null, "creator": "jklukas@mozilla.com", "creation_time": "2020-05-04T12:50:19Z", "text": "(In reply to Alessio Placitelli [:Dexter] from comment #4)\n> Hey Jeff, why is this employee-confidential?\n\nI was being probably overly cautious due to the discussion of data deletion policy. I want to be careful not to make any explicit statements about compliance with any legislation, but I suppose it's fine to discuss data deletion policies publicly outside the context of compliance.", "id": 14795658}, {"id": 14795709, "text": "Ah, yes, \"the ruling is\". That's me being verbose and broad about technical guidelines, not relaying legislative/legal opinion from people who actually know those things. We're clear, but thank you for your sensitivity.\n\nShows what I get when I ask a question I should've already known the answer to : )", "creator": "chutten@mozilla.com", "attachment_id": null, "creation_time": "2020-05-04T13:12:00Z", "bug_id": 1634468, "tags": [], "is_private": false, "count": 6, "author": "chutten@mozilla.com", "time": "2020-05-04T13:12:00Z", "raw_text": "Ah, yes, \"the ruling is\". That's me being verbose and broad about technical guidelines, not relaying legislative/legal opinion from people who actually know those things. We're clear, but thank you for your sensitivity.\n\nShows what I get when I ask a question I should've already known the answer to : )"}, {"author": "alessio.placitelli@gmail.com", "is_private": false, "count": 7, "bug_id": 1634468, "tags": [], "raw_text": "This is the [discussion document](https://docs.google.com/document/d/1nntNIiE6braTGzoKf-lx21OVDd8ssyeIeJu3jnQQfEE/edit#heading=h.nhtmok1d2nx) for this proposal.\n\nMike, can you designate the group of people who should be working on the initial design for this?", "time": "2020-05-28T14:44:04Z", "id": 14849478, "text": "This is the [discussion document](https://docs.google.com/document/d/1nntNIiE6braTGzoKf-lx21OVDd8ssyeIeJu3jnQQfEE/edit#heading=h.nhtmok1d2nx) for this proposal.\n\nMike, can you designate the group of people who should be working on the initial design for this?", "creation_time": "2020-05-28T14:44:04Z", "creator": "alessio.placitelli@gmail.com", "attachment_id": null}, {"id": 14849537, "text": ":chutten, :dexter : Are you available for the design work on this one?", "attachment_id": null, "creator": "mdroettboom@mozilla.com", "creation_time": "2020-05-28T15:05:57Z", "count": 8, "is_private": false, "tags": [], "bug_id": 1634468, "author": "mdroettboom@mozilla.com", "time": "2020-05-28T15:05:57Z", "raw_text": ":chutten, :dexter : Are you available for the design work on this one?"}, {"time": "2020-05-28T15:59:42Z", "raw_text": "I can make time.", "count": 9, "is_private": false, "tags": [], "bug_id": 1634468, "author": "chutten@mozilla.com", "creator": "chutten@mozilla.com", "attachment_id": null, "creation_time": "2020-05-28T15:59:42Z", "id": 14849725, "text": "I can make time."}, {"attachment_id": null, "creator": "alessio.placitelli@gmail.com", "creation_time": "2020-05-28T16:05:43Z", "id": 14849740, "text": "(In reply to Michael Droettboom [:mdroettboom] from comment #8)\n> :chutten, :dexter : Are you available for the design work on this one?\n\nYup, we'll take care of that", "time": "2020-05-28T16:05:43Z", "raw_text": "(In reply to Michael Droettboom [:mdroettboom] from comment #8)\n> :chutten, :dexter : Are you available for the design work on this one?\n\nYup, we'll take care of that", "tags": [], "bug_id": 1634468, "is_private": false, "count": 10, "author": "alessio.placitelli@gmail.com"}, {"raw_text": "Hey Mike,\n\nme and Chris finalized the work on [this proposal](https://docs.google.com/document/d/1nntNIiE6braTGzoKf-lx21OVDd8ssyeIeJu3jnQQfEE/edit#heading=h.nhtmok1d2nx). I believe this is good to move to the *comment* stage and have others chime in. What do you think?\n\nI'll flag others if that's the case.", "time": "2020-06-22T11:57:14Z", "author": "alessio.placitelli@gmail.com", "tags": [], "bug_id": 1634468, "is_private": false, "count": 11, "creation_time": "2020-06-22T11:57:14Z", "creator": "alessio.placitelli@gmail.com", "attachment_id": null, "text": "Hey Mike,\n\nme and Chris finalized the work on [this proposal](https://docs.google.com/document/d/1nntNIiE6braTGzoKf-lx21OVDd8ssyeIeJu3jnQQfEE/edit#heading=h.nhtmok1d2nx). I believe this is good to move to the *comment* stage and have others chime in. What do you think?\n\nI'll flag others if that's the case.", "id": 14893783}, {"text": "I've moved the document to the comment phase.  I had a couple of minor nits in the document that I don't think need to hold anything up.", "id": 14894349, "attachment_id": null, "creator": "mdroettboom@mozilla.com", "creation_time": "2020-06-22T15:51:01Z", "count": 12, "is_private": false, "bug_id": 1634468, "tags": [], "author": "mdroettboom@mozilla.com", "time": "2020-06-22T15:51:01Z", "raw_text": "I've moved the document to the comment phase.  I had a couple of minor nits in the document that I don't think need to hold anything up."}, {"id": 14894472, "text": "Hey folks,\n\n[the document](https://docs.google.com/document/d/1nntNIiE6braTGzoKf-lx21OVDd8ssyeIeJu3jnQQfEE/edit#heading=h.nhtmok1d2nx) moved from design to comment stage. It is ready for one final look. Final feedback due by June 29th, 2020.\n\nIf that looks good to you, please sign off at the top of the document.", "creator": "alessio.placitelli@gmail.com", "attachment_id": null, "creation_time": "2020-06-22T16:34:08Z", "bug_id": 1634468, "tags": [], "count": 13, "is_private": false, "author": "alessio.placitelli@gmail.com", "time": "2020-06-22T16:34:08Z", "raw_text": "Hey folks,\n\n[the document](https://docs.google.com/document/d/1nntNIiE6braTGzoKf-lx21OVDd8ssyeIeJu3jnQQfEE/edit#heading=h.nhtmok1d2nx) moved from design to comment stage. It is ready for one final look. Final feedback due by June 29th, 2020.\n\nIf that looks good to you, please sign off at the top of the document."}, {"text": "Created attachment 9158243\nproposal\n\nHi Teon,\n\nwe need data-steward review for the [attached proposal](https://docs.google.com/document/d/1nntNIiE6braTGzoKf-lx21OVDd8ssyeIeJu3jnQQfEE/edit?ts=5ee76aa1#). Please check the related Data-Steward section at the top of the document. More information about this process [here](https://wiki.mozilla.org/Glean/Adding_or_changing_Glean_metric_types#The_consulted_stakeholders).", "id": 14894479, "attachment_id": 9158243, "creator": "alessio.placitelli@gmail.com", "creation_time": "2020-06-22T16:36:32Z", "bug_id": 1634468, "tags": [], "is_private": false, "count": 14, "author": "alessio.placitelli@gmail.com", "time": "2020-06-22T16:36:32Z", "raw_text": "Hi Teon,\n\nwe need data-steward review for the [attached proposal](https://docs.google.com/document/d/1nntNIiE6braTGzoKf-lx21OVDd8ssyeIeJu3jnQQfEE/edit?ts=5ee76aa1#). Please check the related Data-Steward section at the top of the document. More information about this process [here](https://wiki.mozilla.org/Glean/Adding_or_changing_Glean_metric_types#The_consulted_stakeholders)."}, {"raw_text": "Hey Mike,\n\nlooks like the majority of folks signed off the proposal. Is now the time to make a call on this (when you're back!)!", "time": "2020-06-30T07:29:37Z", "author": "alessio.placitelli@gmail.com", "is_private": false, "count": 15, "tags": [], "bug_id": 1634468, "creation_time": "2020-06-30T07:29:37Z", "creator": "alessio.placitelli@gmail.com", "attachment_id": null, "id": 14909748, "text": "Hey Mike,\n\nlooks like the majority of folks signed off the proposal. Is now the time to make a call on this (when you're back!)!"}, {"tags": [], "bug_id": 1634468, "count": 16, "is_private": false, "author": "mdroettboom@mozilla.com", "time": "2020-07-06T14:13:54Z", "raw_text": "Approved.  Bug 1650787 is opened to track the implementation.", "text": "Approved.  Bug 1650787 is opened to track the implementation.", "id": 14920821, "creator": "mdroettboom@mozilla.com", "attachment_id": null, "creation_time": "2020-07-06T14:13:54Z"}, {"id": 14927892, "text": "hey :Dexter, I'm very sorry but I'm currently overloaded with work. also, I am currently away at a virtual conference this week. would it be possible to see if some in #data-stewards on matrix might be able to pick this up.", "creation_time": "2020-07-09T16:44:05Z", "attachment_id": null, "creator": "teon@mozilla.com", "author": "teon@mozilla.com", "tags": [], "bug_id": 1634468, "is_private": false, "count": 17, "raw_text": "hey :Dexter, I'm very sorry but I'm currently overloaded with work. also, I am currently away at a virtual conference this week. would it be possible to see if some in #data-stewards on matrix might be able to pick this up.", "time": "2020-07-09T16:44:05Z"}, {"id": 14927898, "text": "(In reply to Teon Brooks [:teon] from comment #17)\n> hey :Dexter, I'm very sorry but I'm currently overloaded with work. also, I am currently away at a virtual conference this week. would it be possible to see if some in #data-stewards on matrix might be able to pick this up.\n\nHey Teon, no worries, this got approved already by Mike (see comment 16). No need to review anymore!", "creation_time": "2020-07-09T16:45:53Z", "attachment_id": null, "creator": "alessio.placitelli@gmail.com", "author": "alessio.placitelli@gmail.com", "is_private": false, "count": 18, "bug_id": 1634468, "tags": [], "raw_text": "(In reply to Teon Brooks [:teon] from comment #17)\n> hey :Dexter, I'm very sorry but I'm currently overloaded with work. also, I am currently away at a virtual conference this week. would it be possible to see if some in #data-stewards on matrix might be able to pick this up.\n\nHey Teon, no worries, this got approved already by Mike (see comment 16). No need to review anymore!", "time": "2020-07-09T16:45:53Z"}]}}, "comments": {}}