{"bugs": {"689942": {"comments": [{"id": 5743100, "raw_text": "User Agent: Mozilla/5.0 (Windows NT 6.0; rv:6.0.2) Gecko/20100101 Firefox/6.0.2\nBuild ID: 20110902133214\n\nSteps to reproduce:\n\nif I name a folder with any word that contains \u00d3\u017b (client of mine named folder R\u00d3\u017bNE which means 'miscellaneous' in Polish), all emails in that folder will be listed, but no one can be opened (message prompts: can not find file c:\\users\\blablalbla\\folder_path\\file_path)\nIt happens only with these two Polish chars together (tried other Polish characters and everything works fine), and only if both are uppercase. Bug was on version 6 and remains on 7th", "attachment_id": 563067, "text": "Created attachment 563067\nTB_bug.JPG\n\nUser Agent: Mozilla/5.0 (Windows NT 6.0; rv:6.0.2) Gecko/20100101 Firefox/6.0.2\nBuild ID: 20110902133214\n\nSteps to reproduce:\n\nif I name a folder with any word that contains \u00d3\u017b (client of mine named folder R\u00d3\u017bNE which means 'miscellaneous' in Polish), all emails in that folder will be listed, but no one can be opened (message prompts: can not find file c:\\users\\blablalbla\\folder_path\\file_path)\nIt happens only with these two Polish chars together (tried other Polish characters and everything works fine), and only if both are uppercase. Bug was on version 6 and remains on 7th", "time": "2011-09-28T14:34:22Z", "tags": [], "creation_time": "2011-09-28T14:34:22Z", "author": "info@aziz.pl", "is_private": false, "creator": "info@aziz.pl", "bug_id": 689942, "count": 0}, {"id": 5743827, "raw_text": "If you look in your user profile directory, what file name is used for this folder? Is there an actual folder with that name, or a folder with a name made of numbers? I tried creating a folder here with the ROZNE name, and we recognized that the characters are illegal for file names, and created a numeric folder name on disk, and associated it with  the ROZNE name in the UI.", "attachment_id": null, "tags": [], "bug_id": 689942, "time": "2011-09-28T18:53:38Z", "text": "If you look in your user profile directory, what file name is used for this folder? Is there an actual folder with that name, or a folder with a name made of numbers? I tried creating a folder here with the ROZNE name, and we recognized that the characters are illegal for file names, and created a numeric folder name on disk, and associated it with  the ROZNE name in the UI.", "author": "mozilla@davidbienvenu.org", "creation_time": "2011-09-28T18:53:38Z", "count": 1, "creator": "mozilla@davidbienvenu.org", "is_private": false}, {"bug_id": 689942, "count": 2, "id": 5745594, "raw_text": "Folder name looks just as I've entered (R\u00d3\u017bNE). If you look at the prompt message I've attached in first post, there is deformed path (instead of \u00d3\u017b there is y with dash upon it - it's not a Polish char at all). I don't know if you can type Polish characters, but if you switch to Polish keyboard just press RightAlt+O or RigthAlt+Z to get it - hope that helps.", "attachment_id": null, "text": "Folder name looks just as I've entered (R\u00d3\u017bNE). If you look at the prompt message I've attached in first post, there is deformed path (instead of \u00d3\u017b there is y with dash upon it - it's not a Polish char at all). I don't know if you can type Polish characters, but if you switch to Polish keyboard just press RightAlt+O or RigthAlt+Z to get it - hope that helps.", "time": "2011-09-29T09:00:16Z", "tags": [], "creation_time": "2011-09-29T09:00:16Z", "author": "info@aziz.pl", "is_private": false, "creator": "info@aziz.pl"}, {"id": 5745643, "raw_text": "If binary of \"\u00d3\u017b\" of \"R\u00d3\u017bNE\" in a charset(perhaps a Polish charset or unicode in your case) is somehow translated by someone to \"y with dash upon it\" of other charset(perhaps popular one or standard one, such as windows-1252), phenomenon you saw can happen.\n\nCharacter set of filename used by Win depends on OS's charset and volume type, and API used by Tb too.\nNTFS volume? Or old volume like FAT32?\nWhat is your OS's system charset? (It's defaulted to Shift_JIS if Japanese Win-XP)\n\nBy the way, can you copy&paste filename with \"y with dash upon it\"?\nAs bugzilla.mozilla.org uses utf-8 as page's charset, unicode version of \"y with dash upon it\" is probably written in comment, regardless of your system charset.", "attachment_id": null, "time": "2011-09-29T09:33:58Z", "bug_id": 689942, "tags": [], "text": "If binary of \"\u00d3\u017b\" of \"R\u00d3\u017bNE\" in a charset(perhaps a Polish charset or unicode in your case) is somehow translated by someone to \"y with dash upon it\" of other charset(perhaps popular one or standard one, such as windows-1252), phenomenon you saw can happen.\n\nCharacter set of filename used by Win depends on OS's charset and volume type, and API used by Tb too.\nNTFS volume? Or old volume like FAT32?\nWhat is your OS's system charset? (It's defaulted to Shift_JIS if Japanese Win-XP)\n\nBy the way, can you copy&paste filename with \"y with dash upon it\"?\nAs bugzilla.mozilla.org uses utf-8 as page's charset, unicode version of \"y with dash upon it\" is probably written in comment, regardless of your system charset.", "author": "m-wada@usa.com", "creation_time": "2011-09-29T09:33:58Z", "count": 3, "creator": "m-wada@usa.com", "is_private": false}, {"id": 5745663, "attachment_id": null, "raw_text": "I've found this bug in client's computer, and recreated on my own. First one is running Polish Windows 7 64-bit Home Premium, second one runs Vista Bussiness 32 bit Polish ,both on NTFS partitions. Both uses \"Polish(programmers)\" keyboard set, windows-1250 charset (Central Europe). \n\nHere is c&p:\nOdnalezienie pliku mailbox:///C|/Users/c2/AppData/Roaming/Thunderbird/Profiles/lhzqivtc.default/Mail/Local Folders/Inbox.sbd/R\u04efNE?number=44172022 by\u0142o niemo\u017cliwe. Sprawd\u017a \u015bcie\u017ck\u0119 dost\u0119pu do pliku, a nast\u0119pnie spr\u00f3buj ponownie.\n\nOne more thing: I can change folder name inside TB and everything works fine - the strange thing is that the folder mail list loads ok, I can change the name of it, I can not only access mail content.", "author": "info@aziz.pl", "creation_time": "2011-09-29T09:50:08Z", "tags": [], "time": "2011-09-29T09:50:08Z", "bug_id": 689942, "text": "I've found this bug in client's computer, and recreated on my own. First one is running Polish Windows 7 64-bit Home Premium, second one runs Vista Bussiness 32 bit Polish ,both on NTFS partitions. Both uses \"Polish(programmers)\" keyboard set, windows-1250 charset (Central Europe). \n\nHere is c&p:\nOdnalezienie pliku mailbox:///C|/Users/c2/AppData/Roaming/Thunderbird/Profiles/lhzqivtc.default/Mail/Local Folders/Inbox.sbd/R\u04efNE?number=44172022 by\u0142o niemo\u017cliwe. Sprawd\u017a \u015bcie\u017ck\u0119 dost\u0119pu do pliku, a nast\u0119pnie spr\u00f3buj ponownie.\n\nOne more thing: I can change folder name inside TB and everything works fine - the strange thing is that the folder mail list loads ok, I can change the name of it, I can not only access mail content.", "creator": "info@aziz.pl", "is_private": false, "count": 4}, {"text": "In windows-1250 ( http://en.wikipedia.org/wiki/Windows-1250 ),\n  0xD3 = \u00d3 (LATIN CAPITAL LETTER O WITH ACUTE) \n  0xAF = \u017b (LATIN CAPITAL LETTER Z WITH DOT ABOVE)\nIn Unicode ( http://www.fileformat.info/info/unicode/char/4ef/index.htm ),\n  \u04ef (CYRILLIC SMALL LETTER U WITH MACRON) = U+04EF\n  utf-8 binary for U+04EF / \u04ef = 0xD3AF\n\nIt's possibly next:\nAs OS's system charset is windows-1250, \u00d3\u017b=0xD3AF in windows-1250 is valid folder name character, so Tb doesn't hash it.\nWhen Tb requests file creation, Tb requests with the valid binary of 0xD3AF of windows-1250.\nHowever, OS interprets it as utf-8 binary, then OS creates file named \u04ef(0xD3AF in utf-8).\n\nFYI.\nUnder Japanese MS Win-XP(Shift_JIS), Tb 6 created files of 79357a77.msf and 79357a77 for folder named R\u00d3\u017bNE. As system charset is Shift_JIS, Tb hashed t.\nIn 79357a77.msf, following data is seen;\n> (84=79357a77)(85=R$C3$93$C5$BBNE)\n$C3$93$C5$BB is hex-decimal representation in .msf by Tb for binary of \u00d3\u017b in utf-8. \n  \u00d3 = U+00D3 : http://www.fileformat.info/info/unicode/char/d3/index.htm\n  \u017b = U*017B : http://www.fileformat.info/info/unicode/char/17b/index.htm", "time": "2011-09-30T14:13:49Z", "bug_id": 689942, "tags": [], "creation_time": "2011-09-30T14:13:49Z", "author": "m-wada@usa.com", "count": 5, "is_private": false, "creator": "m-wada@usa.com", "id": 5749385, "raw_text": "In windows-1250 ( http://en.wikipedia.org/wiki/Windows-1250 ),\n  0xD3 = \u00d3 (LATIN CAPITAL LETTER O WITH ACUTE) \n  0xAF = \u017b (LATIN CAPITAL LETTER Z WITH DOT ABOVE)\nIn Unicode ( http://www.fileformat.info/info/unicode/char/4ef/index.htm ),\n  \u04ef (CYRILLIC SMALL LETTER U WITH MACRON) = U+04EF\n  utf-8 binary for U+04EF / \u04ef = 0xD3AF\n\nIt's possibly next:\nAs OS's system charset is windows-1250, \u00d3\u017b=0xD3AF in windows-1250 is valid folder name character, so Tb doesn't hash it.\nWhen Tb requests file creation, Tb requests with the valid binary of 0xD3AF of windows-1250.\nHowever, OS interprets it as utf-8 binary, then OS creates file named \u04ef(0xD3AF in utf-8).\n\nFYI.\nUnder Japanese MS Win-XP(Shift_JIS), Tb 6 created files of 79357a77.msf and 79357a77 for folder named R\u00d3\u017bNE. As system charset is Shift_JIS, Tb hashed t.\nIn 79357a77.msf, following data is seen;\n> (84=79357a77)(85=R$C3$93$C5$BBNE)\n$C3$93$C5$BB is hex-decimal representation in .msf by Tb for binary of \u00d3\u017b in utf-8. \n  \u00d3 = U+00D3 : http://www.fileformat.info/info/unicode/char/d3/index.htm\n  \u017b = U*017B : http://www.fileformat.info/info/unicode/char/17b/index.htm", "attachment_id": null}, {"bug_id": 689942, "count": 6, "text": "http://en.wikipedia.org/wiki/NTFS#Internals says;\n> Internals\n>(snip)\n> NTFS allows any sequence of 16-bit values for name encoding (file names, stream names, index names, etc.).\n> This means UTF-16 codepoints are supported, but the file system does not check\n> whether a sequence is valid UTF-16\n> (it allows any sequence of short values, not restricted to those in the Unicode standard).\n\nI guess Tb requests file creation using 0xD3AF without windows-1250 to Unicode conversion because 0xD3AF is valid windows-1250 file name character, and Tb interprets returned 0xD3AF in file name as utf-8 then shows it as \u04ef. Tb perhaps uses \u04ef of Unicode = U+04EF in mail folder file access to show mail data and fails to find file. \nUpon rename, binary of 0xD3AF is used by Tb or already obtained file handle is used, then rename is successful.", "tags": [], "time": "2011-10-01T04:25:48Z", "creation_time": "2011-10-01T04:25:48Z", "author": "m-wada@usa.com", "is_private": false, "creator": "m-wada@usa.com", "id": 5751450, "raw_text": "http://en.wikipedia.org/wiki/NTFS#Internals says;\n> Internals\n>(snip)\n> NTFS allows any sequence of 16-bit values for name encoding (file names, stream names, index names, etc.).\n> This means UTF-16 codepoints are supported, but the file system does not check\n> whether a sequence is valid UTF-16\n> (it allows any sequence of short values, not restricted to those in the Unicode standard).\n\nI guess Tb requests file creation using 0xD3AF without windows-1250 to Unicode conversion because 0xD3AF is valid windows-1250 file name character, and Tb interprets returned 0xD3AF in file name as utf-8 then shows it as \u04ef. Tb perhaps uses \u04ef of Unicode = U+04EF in mail folder file access to show mail data and fails to find file. \nUpon rename, binary of 0xD3AF is used by Tb or already obtained file handle is used, then rename is successful.", "attachment_id": null}, {"id": 9853547, "raw_text": "aceman, does this align with your folder work?", "attachment_id": null, "text": "aceman, does this align with your folder work?", "time": "2015-01-28T17:02:39Z", "bug_id": 689942, "tags": [], "creation_time": "2015-01-28T17:02:39Z", "author": "vseerror@lehigh.edu", "count": 7, "is_private": false, "creator": "vseerror@lehigh.edu"}, {"time": "2015-01-28T18:51:29Z", "bug_id": 689942, "tags": [], "text": "I'm not aware of any folder name work. But WADA's explanation seems very reasonable.", "author": "acelists@atlas.sk", "creation_time": "2015-01-28T18:51:29Z", "count": 8, "creator": "acelists@atlas.sk", "is_private": false, "id": 9854187, "raw_text": "I'm not aware of any folder name work. But WADA's explanation seems very reasonable.", "attachment_id": null}, {"attachment_id": null, "raw_text": "Kacper wrote 9/2016 \"yes it still occures, but... only on pop3 accounts\".  (I haven't tested to know if that is still true)", "id": 14066419, "creator": "vseerror@lehigh.edu", "is_private": false, "count": 9, "author": "vseerror@lehigh.edu", "creation_time": "2019-04-22T06:03:29Z", "bug_id": 689942, "tags": [], "time": "2019-04-22T06:03:29Z", "text": "Kacper wrote 9/2016 \"yes it still occures, but... only on pop3 accounts\".  (I haven't tested to know if that is still true)"}]}}, "comments": {}}