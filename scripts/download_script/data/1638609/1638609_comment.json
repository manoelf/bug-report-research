{"comments": {}, "bugs": {"1638609": {"comments": [{"creator": "sancus@pobox.com", "attachment_id": 9149657, "creation_time": "2020-05-17T00:24:41Z", "id": 14825656, "text": "Created attachment 9149657\nscreenshot of discovery pane\n\nThe \"Find More Add-ons\" button at the bottom of the new Discovery Pane is broken. It should open ATN in a new tab(inside Thunderbird). Previously, it opened the link in an external browser, which is also wrong.\n\nThe following error shows in the error console:\nUncaught \nException { name: \"NS_ERROR_ILLEGAL_VALUE\", message: \"Component returned failure code: 0x80070057 (NS_ERROR_ILLEGAL_VALUE) [nsIExternalProtocolService.loadURI]\", result: 2147942487, filename: \"chrome://communicator/content/contentAreaClick.js\", lineNumber: 230, columnNumber: 0, data: null, stack: \"openLinkExternally@chrome://communicator/content/contentAreaClick.js:230:6\\nopenUILinkIn@chrome://communicator/content/contentAreaClick.js:253:21\\nopenTrustedLinkIn@chrome://communicator/content/contentAreaClick.js:267:15\\nopenAmoInTab@chrome://mozapps/content/extensions/aboutaddons.js:4462:26\\nhandleEvent@chrome://mozapps/content/extensions/aboutaddons.js:4180:21\\nEventListener.handleEvent*connectedCallback@chrome://mozapps/content/extensions/aboutaddons.js:4172:12\\nshow@chrome://mozapps/content/extensions/aboutaddons.js:4569:10\\nasync*show@chrome://mozapps/content/extensions/extensions.js:557:41\\nasync*loadViewInternal@chrome://mozapps/content/extensions/extensions.js:451:27\\nloadInitialView@chrome://mozapps/content/extensions/extensions.js:388:10\\nloadInitialViewFn@chrome://mozapps/content/extensions/extensions.js:497:21\\ninitialize@chrome://mozapps/content/extensions/aboutaddons.js:4511:10\\ngetHtmlBrowser/_htmlBrowserLoaded<@chrome://mozapps/content/extensions/extensions.js:531:33\\npromise callback*getHtmlBrowser@chrome://mozapps/content/extensions/extensions.js:530:7\\ninitialize@chrome://mozapps/content/extensions/extensions.js:551:23\\ninitialize@chrome://mozapps/content/extensions/extensions.js:272:12\\ninitialize@chrome://mozapps/content/extensions/extensions.js:51:19\\nEventListener.handleEvent*@chrome://mozapps/content/extensions/extensions.js:24:10\\n\", location: XPCWrappedNative_NoHelper }\ncontentAreaClick.js:230", "time": "2020-05-17T00:24:41Z", "raw_text": "The \"Find More Add-ons\" button at the bottom of the new Discovery Pane is broken. It should open ATN in a new tab(inside Thunderbird). Previously, it opened the link in an external browser, which is also wrong.\n\nThe following error shows in the error console:\nUncaught \nException { name: \"NS_ERROR_ILLEGAL_VALUE\", message: \"Component returned failure code: 0x80070057 (NS_ERROR_ILLEGAL_VALUE) [nsIExternalProtocolService.loadURI]\", result: 2147942487, filename: \"chrome://communicator/content/contentAreaClick.js\", lineNumber: 230, columnNumber: 0, data: null, stack: \"openLinkExternally@chrome://communicator/content/contentAreaClick.js:230:6\\nopenUILinkIn@chrome://communicator/content/contentAreaClick.js:253:21\\nopenTrustedLinkIn@chrome://communicator/content/contentAreaClick.js:267:15\\nopenAmoInTab@chrome://mozapps/content/extensions/aboutaddons.js:4462:26\\nhandleEvent@chrome://mozapps/content/extensions/aboutaddons.js:4180:21\\nEventListener.handleEvent*connectedCallback@chrome://mozapps/content/extensions/aboutaddons.js:4172:12\\nshow@chrome://mozapps/content/extensions/aboutaddons.js:4569:10\\nasync*show@chrome://mozapps/content/extensions/extensions.js:557:41\\nasync*loadViewInternal@chrome://mozapps/content/extensions/extensions.js:451:27\\nloadInitialView@chrome://mozapps/content/extensions/extensions.js:388:10\\nloadInitialViewFn@chrome://mozapps/content/extensions/extensions.js:497:21\\ninitialize@chrome://mozapps/content/extensions/aboutaddons.js:4511:10\\ngetHtmlBrowser/_htmlBrowserLoaded<@chrome://mozapps/content/extensions/extensions.js:531:33\\npromise callback*getHtmlBrowser@chrome://mozapps/content/extensions/extensions.js:530:7\\ninitialize@chrome://mozapps/content/extensions/extensions.js:551:23\\ninitialize@chrome://mozapps/content/extensions/extensions.js:272:12\\ninitialize@chrome://mozapps/content/extensions/extensions.js:51:19\\nEventListener.handleEvent*@chrome://mozapps/content/extensions/extensions.js:24:10\\n\", location: XPCWrappedNative_NoHelper }\ncontentAreaClick.js:230", "bug_id": 1638609, "tags": [], "count": 0, "is_private": false, "author": "sancus@pobox.com"}, {"id": 14825825, "text": "I think bug 1638092 will fix it. Opening links on trunk is kind of broken atm.", "creation_time": "2020-05-17T11:51:58Z", "attachment_id": null, "creator": "mkmelin+mozilla@iki.fi", "author": "mkmelin+mozilla@iki.fi", "bug_id": 1638609, "tags": [], "is_private": false, "count": 1, "raw_text": "I think bug 1638092 will fix it. Opening links on trunk is kind of broken atm.", "time": "2020-05-17T11:51:58Z"}, {"creator": "sancus@pobox.com", "attachment_id": null, "creation_time": "2020-05-17T19:57:40Z", "id": 14826071, "text": "(In reply to Magnus Melin [:mkmelin] from comment #1)\n> I think bug 1638092 will fix it. Opening links on trunk is kind of broken atm.\n\nWill that also fix the issue of it trying to open in external browser though? I guess we'll have to see, and I'll morph this bug if it doesn't. I originally started filing this to report it not opening in a TB tab, which is a big problem for 78 because that button is the only way, other than a search, to get to ATN now.", "time": "2020-05-17T19:57:40Z", "raw_text": "(In reply to Magnus Melin [:mkmelin] from comment #1)\n> I think bug 1638092 will fix it. Opening links on trunk is kind of broken atm.\n\nWill that also fix the issue of it trying to open in external browser though? I guess we'll have to see, and I'll morph this bug if it doesn't. I originally started filing this to report it not opening in a TB tab, which is a big problem for 78 because that button is the only way, other than a search, to get to ATN now.", "count": 2, "is_private": false, "tags": [], "bug_id": 1638609, "author": "sancus@pobox.com"}, {"time": "2020-05-20T02:11:20Z", "raw_text": "So, yeah. Bug 1638092 fixed the brokenness of the link, but now it opens in external browser again. It needs to open in Thunderbird so that people can actually install add-ons.", "count": 3, "is_private": false, "tags": [], "bug_id": 1638609, "author": "sancus@pobox.com", "attachment_id": null, "creator": "sancus@pobox.com", "creation_time": "2020-05-20T02:11:20Z", "text": "So, yeah. Bug 1638092 fixed the brokenness of the link, but now it opens in external browser again. It needs to open in Thunderbird so that people can actually install add-ons.", "id": 14832336}, {"id": 14888831, "text": "Quickly looking at this I think it ends up in openAmoInTab and from there https://searchfox.org/comm-central/rev/9498b3d1accf12df749f19b88fb1d0a1fcad8d4d/mail/base/content/contentAreaClick.js#256\n\n(If not, something with openContentTab?)\n\nI notice the Privacy Policy link below is also wrong (linking to non-openable chrome://). This should be fixable by setting a extensions.recommendations.privacyPolicyUrl value in all-thunderbird.js", "author": "mkmelin+mozilla@iki.fi", "tags": [], "bug_id": 1638609, "is_private": false, "count": 4, "creation_time": "2020-06-18T10:20:03Z", "raw_text": "Quickly looking at this I think it ends up in openAmoInTab and from there https://searchfox.org/comm-central/rev/9498b3d1accf12df749f19b88fb1d0a1fcad8d4d/mail/base/content/contentAreaClick.js#256\n\n(If not, something with openContentTab?)\n\nI notice the Privacy Policy link below is also wrong (linking to non-openable chrome://). This should be fixable by setting a extensions.recommendations.privacyPolicyUrl value in all-thunderbird.js", "time": "2020-06-18T10:20:03Z", "creator": "mkmelin+mozilla@iki.fi", "attachment_id": null}, {"bug_id": 1638609, "tags": [], "is_private": false, "count": 5, "author": "khushil324@gmail.com", "time": "2020-06-18T14:47:39Z", "raw_text": "Adding an extensions.recommendations.privacyPolicyUrl in all-thunderbird.js worked. It is now opening up the privacy policy in the browser. Do we want to open it in the Thunderbird? What URL should we put there? Firefox is putting: https://www.mozilla.org/privacy/firefox/?utm_source=firefox-browser&utm_medium=firefox-browser&utm_content=privacy-policy-link#addons", "id": 14889254, "text": "Adding an extensions.recommendations.privacyPolicyUrl in all-thunderbird.js worked. It is now opening up the privacy policy in the browser. Do we want to open it in the Thunderbird? What URL should we put there? Firefox is putting: https://www.mozilla.org/privacy/firefox/?utm_source=firefox-browser&utm_medium=firefox-browser&utm_content=privacy-policy-link#addons", "creator": "khushil324@gmail.com", "attachment_id": null, "creation_time": "2020-06-18T14:47:39Z"}, {"text": "How about this: https://www.mozilla.org/en-US/privacy/thunderbird/#addons?", "id": 14889270, "creator": "khushil324@gmail.com", "attachment_id": null, "creation_time": "2020-06-18T14:54:21Z", "tags": [], "bug_id": 1638609, "is_private": false, "count": 6, "author": "khushil324@gmail.com", "time": "2020-06-18T14:54:21Z", "raw_text": "How about this: https://www.mozilla.org/en-US/privacy/thunderbird/#addons?"}, {"raw_text": "(In reply to Khushil Mistry [:khushil324] from comment #6)\n> How about this: https://www.mozilla.org/en-US/privacy/thunderbird/#addons?\n\nThat seems fine for now, the privacy policy is being currently rewritten anyway so we may need to change this link in a future release.\n\nE: Oh and I think it's fine if the privacy policy link opens in external browser. Only links to ATN are supposed to always open in Thunderbird.", "time": "2020-06-18T18:00:45Z", "author": "sancus@pobox.com", "bug_id": 1638609, "tags": [], "is_private": false, "count": 7, "creation_time": "2020-06-18T18:00:45Z", "creator": "sancus@pobox.com", "attachment_id": null, "id": 14889613, "text": "(In reply to Khushil Mistry [:khushil324] from comment #6)\n> How about this: https://www.mozilla.org/en-US/privacy/thunderbird/#addons?\n\nThat seems fine for now, the privacy policy is being currently rewritten anyway so we may need to change this link in a future release.\n\nE: Oh and I think it's fine if the privacy policy link opens in external browser. Only links to ATN are supposed to always open in Thunderbird."}, {"author": "khushil324@gmail.com", "is_private": false, "count": 8, "tags": [], "bug_id": 1638609, "raw_text": "", "time": "2020-06-18T18:13:43Z", "text": "Created attachment 9157713\nBug-1638609_fix-reco-addon-links-0.patch", "id": 14889645, "creation_time": "2020-06-18T18:13:43Z", "attachment_id": 9157713, "creator": "khushil324@gmail.com"}, {"text": "*** Bug 1646659 has been marked as a duplicate of this bug. ***", "id": 14889668, "creation_time": "2020-06-18T18:20:36Z", "attachment_id": null, "creator": "richard.marti@gmail.com", "author": "richard.marti@gmail.com", "count": 9, "is_private": false, "tags": [], "bug_id": 1638609, "raw_text": "", "time": "2020-06-18T18:20:36Z"}, {"creation_time": "2020-06-18T18:59:30Z", "raw_text": "Review of attachment 9157713:\n-----------------------------------------------------------------\n\nLGTM, r=mkmelin", "creator": "mkmelin+mozilla@iki.fi", "attachment_id": 9157713, "time": "2020-06-18T18:59:30Z", "id": 14889723, "text": "Comment on attachment 9157713\nBug-1638609_fix-reco-addon-links-0.patch\n\nReview of attachment 9157713:\n-----------------------------------------------------------------\n\nLGTM, r=mkmelin", "author": "mkmelin+mozilla@iki.fi", "is_private": false, "count": 10, "bug_id": 1638609, "tags": []}, {"tags": [], "bug_id": 1638609, "is_private": false, "count": 11, "author": "pulsebot@bots.tld", "time": "2020-06-18T21:47:17Z", "raw_text": "Pushed by mkmelin@iki.fi:\nhttps://hg.mozilla.org/comm-central/rev/23275377fdbe\nfix add-ons discovery pane \"find more addons\" and privacy links. r=mkmelin", "id": 14890042, "text": "Pushed by mkmelin@iki.fi:\nhttps://hg.mozilla.org/comm-central/rev/23275377fdbe\nfix add-ons discovery pane \"find more addons\" and privacy links. r=mkmelin", "attachment_id": null, "creator": "pulsebot@bots.tld", "creation_time": "2020-06-18T21:47:17Z"}, {"creation_time": "2020-06-19T05:39:03Z", "attachment_id": 9157713, "creator": "mkmelin+mozilla@iki.fi", "text": "Comment on attachment 9157713\nBug-1638609_fix-reco-addon-links-0.patch\n\nNeeded to get a couple of links working in the new add-ons discovery pane.", "id": 14890446, "raw_text": "Needed to get a couple of links working in the new add-ons discovery pane.", "time": "2020-06-19T05:39:03Z", "author": "mkmelin+mozilla@iki.fi", "count": 12, "is_private": false, "tags": [], "bug_id": 1638609}, {"creation_time": "2020-06-19T12:07:17Z", "attachment_id": 9157713, "creator": "vseerror@lehigh.edu", "text": "Comment on attachment 9157713\nBug-1638609_fix-reco-addon-links-0.patch\n\nApproved for beta", "id": 14890712, "raw_text": "Approved for beta", "time": "2020-06-19T12:07:17Z", "author": "vseerror@lehigh.edu", "tags": [], "bug_id": 1638609, "count": 13, "is_private": false}, {"attachment_id": null, "creator": "rob@thunderbird.net", "creation_time": "2020-06-21T01:05:45Z", "text": "Thunderbird 78.0b3:\nhttps://hg.mozilla.org/releases/comm-beta/rev/3c83aafae22f", "id": 14891555, "time": "2020-06-21T01:05:45Z", "raw_text": "Thunderbird 78.0b3:\nhttps://hg.mozilla.org/releases/comm-beta/rev/3c83aafae22f", "is_private": false, "count": 14, "bug_id": 1638609, "tags": ["bugherder", "uplift"], "author": "rob@thunderbird.net"}]}}}