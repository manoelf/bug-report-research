{
  "bugs": {
    "1195054": {
      "comments": [
        {
          "count": 0,
          "id": 10622745,
          "creation_time": "2015-08-15T21:31:22Z",
          "tags": [],
          "author": "arni2033@yandex.ru",
          "raw_text": "Plataform: \n(Win7, Nightly 43.0a1 (2015-08-15))  \nSTR:  1. Open new tab.\n2. Open Scratchpad (Shift+F4), paste \"for(i=1;i<=12;i++)window.open('https://www.google.com/search?q='+i)\" without outer quotes.\n3. Run script (so that popups opened and saved in History).\n4. Open new tab. Drag it from Tabs Toolbar to create new window.\n5. Click textarea in location bar [it will become focused]\n6. Press Alt+Down and hold for ~5 seconds\n7. Type \"a\" (without quotes) in location bar\n\nResult:       Location bar displays 12 annoying autocomplete suggestions.\n              That behavior will stay for that window even if you open new tabs.\nExpectations: It should display a box (#PopupAutoCompleteRichResult) with scrollbar\n              where you only see 6 suggestions at a time\n\nNote: It's a bit easier to reproduce on ESR38 - Beta41 (which don't have unified autocomplete).\n      Modify Step 4 and follow all other steps:\n4.* Open new tab.",
          "bug_id": 1195054,
          "attachment_id": 8648433,
          "is_private": false,
          "text": "Created attachment 8648433\nLocation bar displays 12 annoying autocomplete suggestions without scrollbar.webm\n\nSTR:   (Win7, Nightly 43.0a1 (2015-08-15))\n1. Open new tab.\n2. Open Scratchpad (Shift+F4), paste \"for(i=1;i<=12;i++)window.open('https://www.google.com/search?q='+i)\" without outer quotes.\n3. Run script (so that popups opened and saved in History).\n4. Open new tab. Drag it from Tabs Toolbar to create new window.\n5. Click textarea in location bar [it will become focused]\n6. Press Alt+Down and hold for ~5 seconds\n7. Type \"a\" (without quotes) in location bar\n\nResult:       Location bar displays 12 annoying autocomplete suggestions.\n              That behavior will stay for that window even if you open new tabs.\nExpectations: It should display a box (#PopupAutoCompleteRichResult) with scrollbar\n              where you only see 6 suggestions at a time\n\nNote: It's a bit easier to reproduce on ESR38 - Beta41 (which don't have unified autocomplete).\n      Modify Step 4 and follow all other steps:\n4.* Open new tab.",
          "time": "2015-08-15T21:31:22Z",
          "creator": "arni2033@yandex.ru"
        },
        {
          "creator": "mak@mozilla.com",
          "text": "I was able to reproduce this is in the past, there is a series of action that break autocomplete scrollbar.\n\nI didn't try to debug it though cause the plan is to move to 8 results without a scrollbar, so it may be pointless double work.",
          "time": "2015-08-29T10:14:34Z",
          "is_private": false,
          "attachment_id": null,
          "bug_id": 1195054,
          "raw_text": "I was able to reproduce this is in the past, there is a series of action that break autocomplete scrollbar.\n\nI didn't try to debug it though cause the plan is to move to 8 results without a scrollbar, so it may be pointless double work.",
          "creation_time": "2015-08-29T10:14:34Z",
          "tags": [],
          "author": "mak@mozilla.com",
          "id": 10673987,
          "count": 1
        },
        {
          "creation_time": "2015-08-29T13:00:37Z",
          "tags": [],
          "author": "arni2033@yandex.ru",
          "raw_text": "Well thanks for info. Though 8 results are covering all screen as well as 12.\nAcutally 6 results is too much too. Can't even see the text from page when typing it.\n// I wonder if there's add-on that shows suggestions only when you press \"Down\" in location/search bar",
          "count": 2,
          "id": 10674078,
          "is_private": false,
          "text": "Well thanks for info. Though 8 results are covering all screen as well as 12.\nAcutally 6 results is too much too. Can't even see the text from page when typing it.\n// I wonder if there's add-on that shows suggestions only when you press \"Down\" in location/search bar",
          "time": "2015-08-29T13:00:37Z",
          "creator": "arni2033@yandex.ru",
          "bug_id": 1195054,
          "attachment_id": null
        },
        {
          "creator": "mak@mozilla.com",
          "time": "2015-09-09T14:52:48Z",
          "text": "it will be 8 single-line results, so it should take no more space than the current double-line 6 results.",
          "is_private": false,
          "attachment_id": null,
          "bug_id": 1195054,
          "raw_text": "it will be 8 single-line results, so it should take no more space than the current double-line 6 results.",
          "author": "mak@mozilla.com",
          "tags": [],
          "creation_time": "2015-09-09T14:52:48Z",
          "id": 10710809,
          "count": 3
        },
        {
          "bug_id": 1195054,
          "attachment_id": null,
          "is_private": false,
          "text": "*** Bug 1259575 has been marked as a duplicate of this bug. ***",
          "time": "2016-04-06T16:35:26Z",
          "creator": "adw@mozilla.com",
          "id": 11305154,
          "count": 4,
          "creation_time": "2016-04-06T16:35:26Z",
          "tags": [],
          "author": "adw@mozilla.com",
          "raw_text": ""
        },
        {
          "count": 5,
          "id": 11305243,
          "raw_text": "This is one of the most important changes since the new design has landed I think, so I'll work on this next.",
          "author": "adw@mozilla.com",
          "tags": [],
          "creation_time": "2016-04-06T17:03:48Z",
          "attachment_id": null,
          "bug_id": 1195054,
          "creator": "adw@mozilla.com",
          "time": "2016-04-06T17:03:48Z",
          "text": "This is one of the most important changes since the new design has landed I think, so I'll work on this next.",
          "is_private": false
        },
        {
          "creation_time": "2016-04-06T20:25:08Z",
          "author": "adw@mozilla.com",
          "tags": [],
          "raw_text": "Here's what I think we should do, you might disagree.  People complain that not enough results are shown.  But they also complain that there's scrollbar, and I think they'll complain about that regardless of the maxRows of the popup, unless we make maxRichResults >= 2*maxRows or some large number like that.  Because otherwise you feel like the popup is unnecessarily hiding rows from you.\n\nSo this patch sets both maxRows and browser.urlbar.maxRichResults to 10.  If you disagree with browser.urlbar.maxRichResults, then I think 20 is the next smallest number that we should make it.  Incidentally the maxResults getter in autocomplete happens to return 20.\n\nThis actually sets defaultMaxRows instead of maxRows because the new smaller item height is part of toolkit, so I think any toolkit consumer of autocomplete would probably want a larger maxRows.\n\nReview commit: https://reviewboard.mozilla.org/r/44673/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/44673/",
          "id": 11305939,
          "count": 6,
          "is_private": false,
          "text": "Created attachment 8738719\nMozReview Request: Bug 1195054 - The location bar should displays 10 autocomplete suggestions without scrollbar instead of 6. r=mak\n\nHere's what I think we should do, you might disagree.  People complain that not enough results are shown.  But they also complain that there's scrollbar, and I think they'll complain about that regardless of the maxRows of the popup, unless we make maxRichResults >= 2*maxRows or some large number like that.  Because otherwise you feel like the popup is unnecessarily hiding rows from you.\n\nSo this patch sets both maxRows and browser.urlbar.maxRichResults to 10.  If you disagree with browser.urlbar.maxRichResults, then I think 20 is the next smallest number that we should make it.  Incidentally the maxResults getter in autocomplete happens to return 20.\n\nThis actually sets defaultMaxRows instead of maxRows because the new smaller item height is part of toolkit, so I think any toolkit consumer of autocomplete would probably want a larger maxRows.\n\nReview commit: https://reviewboard.mozilla.org/r/44673/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/44673/",
          "time": "2016-04-06T20:25:08Z",
          "creator": "adw@mozilla.com",
          "bug_id": 1195054,
          "attachment_id": 8738719
        },
        {
          "id": 11308422,
          "count": 7,
          "creation_time": "2016-04-07T16:40:35Z",
          "tags": [],
          "author": "adw@mozilla.com",
          "raw_text": "https://treeherder.mozilla.org/#/jobs?repo=try&revision=0f47e93d45f8",
          "bug_id": 1195054,
          "attachment_id": null,
          "is_private": false,
          "text": "https://treeherder.mozilla.org/#/jobs?repo=try&revision=0f47e93d45f8",
          "time": "2016-04-07T16:40:35Z",
          "creator": "adw@mozilla.com"
        },
        {
          "raw_text": "Review request updated; see interdiff: https://reviewboard.mozilla.org/r/44673/diff/1-2/",
          "creation_time": "2016-04-07T18:21:56Z",
          "author": "adw@mozilla.com",
          "tags": [],
          "id": 11308752,
          "count": 8,
          "creator": "adw@mozilla.com",
          "text": "Comment on attachment 8738719\nMozReview Request: Bug 1195054 - The location bar should displays 10 autocomplete suggestions without scrollbar instead of 6. r=mak\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/44673/diff/1-2/",
          "time": "2016-04-07T18:21:56Z",
          "is_private": false,
          "attachment_id": 8738719,
          "bug_id": 1195054
        },
        {
          "id": 11308753,
          "count": 9,
          "raw_text": "Fix for a test failure.\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=1ddee51ed0f0",
          "creation_time": "2016-04-07T18:22:19Z",
          "tags": [],
          "author": "adw@mozilla.com",
          "attachment_id": null,
          "bug_id": 1195054,
          "creator": "adw@mozilla.com",
          "text": "Fix for a test failure.\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=1ddee51ed0f0",
          "time": "2016-04-07T18:22:19Z",
          "is_private": false
        },
        {
          "attachment_id": 8738719,
          "bug_id": 1195054,
          "id": 11308949,
          "count": 10,
          "time": "2016-04-07T19:27:46Z",
          "text": "Comment on attachment 8738719\nMozReview Request: Bug 1195054 - The location bar should displays 10 autocomplete suggestions without scrollbar instead of 6. r=mak\n\nhttps://reviewboard.mozilla.org/r/44673/#review41581\n\nI agree with you. we don't want a scrollbar in general.\n\n::: browser/base/content/test/general/browser_autocomplete_autoselect.js:49\n(Diff revision 2)\n> -  info(\"Key Down 11 times should wrap around all the way around\");\n> -  repeat(11, () => EventUtils.synthesizeKey(\"VK_DOWN\", {}));\n> +  info(\"Key Down 10 times should wrap around all the way around\");\n> +  repeat(10, () => EventUtils.synthesizeKey(\"VK_DOWN\", {}));\n>    is_selected(1);\n>  \n> -  info(\"Key Up 11 times should wrap around the other way\");\n> -  repeat(11, () => EventUtils.synthesizeKey(\"VK_UP\", {}));\n> +  info(\"Key Up 10 times should wrap around the other way\");\n> +  repeat(10, () => EventUtils.synthesizeKey(\"VK_UP\", {}));\n\nI'd say to move this to a named const... or even better, read the value from maxRichrResults pref.\n\n::: toolkit/components/places/UnifiedComplete.js:64\n(Diff revision 2)\n>  // \"comment\" back into the title and the tag.\n>  const TITLE_TAGS_SEPARATOR = \" \\u2013 \";\n>  \n>  // Telemetry probes.\n>  const TELEMETRY_1ST_RESULT = \"PLACES_AUTOCOMPLETE_1ST_RESULT_TIME_MS\";\n> -const TELEMETRY_6_FIRST_RESULTS = \"PLACES_AUTOCOMPLETE_6_FIRST_RESULTS_TIME_MS\";\n> +const TELEMETRY_10_FIRST_RESULTS = \"PLACES_AUTOCOMPLETE_10_FIRST_RESULTS_TIME_MS\";\n\nThis is not going to work unless you change histograms.json...\n\nat this point the histogram would be \"time needed to fetch ALL results\", not just time for the first N results...\n\nI'm not sure whether it-s still a good measure, I think we should retain it as it is so we have a baseline to compare to once we have the first performance fixes in.\nSo yeah, I'd not change it here.\n\n::: toolkit/components/places/UnifiedComplete.js:1442\n(Diff revision 2)\n>                                 match.style,\n>                                 match.finalCompleteValue);\n>  \n> -    if (this._result.matchCount == 6)\n> -      TelemetryStopwatch.finish(TELEMETRY_6_FIRST_RESULTS, this);\n> +    if (this._result.matchCount == 10) {\n> +      TelemetryStopwatch.finish(TELEMETRY_10_FIRST_RESULTS, this);\n> +    }\n\nditto",
          "raw_text": "https://reviewboard.mozilla.org/r/44673/#review41581\n\nI agree with you. we don't want a scrollbar in general.\n\n::: browser/base/content/test/general/browser_autocomplete_autoselect.js:49\n(Diff revision 2)\n> -  info(\"Key Down 11 times should wrap around all the way around\");\n> -  repeat(11, () => EventUtils.synthesizeKey(\"VK_DOWN\", {}));\n> +  info(\"Key Down 10 times should wrap around all the way around\");\n> +  repeat(10, () => EventUtils.synthesizeKey(\"VK_DOWN\", {}));\n>    is_selected(1);\n>  \n> -  info(\"Key Up 11 times should wrap around the other way\");\n> -  repeat(11, () => EventUtils.synthesizeKey(\"VK_UP\", {}));\n> +  info(\"Key Up 10 times should wrap around the other way\");\n> +  repeat(10, () => EventUtils.synthesizeKey(\"VK_UP\", {}));\n\nI'd say to move this to a named const... or even better, read the value from maxRichrResults pref.\n\n::: toolkit/components/places/UnifiedComplete.js:64\n(Diff revision 2)\n>  // \"comment\" back into the title and the tag.\n>  const TITLE_TAGS_SEPARATOR = \" \\u2013 \";\n>  \n>  // Telemetry probes.\n>  const TELEMETRY_1ST_RESULT = \"PLACES_AUTOCOMPLETE_1ST_RESULT_TIME_MS\";\n> -const TELEMETRY_6_FIRST_RESULTS = \"PLACES_AUTOCOMPLETE_6_FIRST_RESULTS_TIME_MS\";\n> +const TELEMETRY_10_FIRST_RESULTS = \"PLACES_AUTOCOMPLETE_10_FIRST_RESULTS_TIME_MS\";\n\nThis is not going to work unless you change histograms.json...\n\nat this point the histogram would be \"time needed to fetch ALL results\", not just time for the first N results...\n\nI'm not sure whether it-s still a good measure, I think we should retain it as it is so we have a baseline to compare to once we have the first performance fixes in.\nSo yeah, I'd not change it here.\n\n::: toolkit/components/places/UnifiedComplete.js:1442\n(Diff revision 2)\n>                                 match.style,\n>                                 match.finalCompleteValue);\n>  \n> -    if (this._result.matchCount == 6)\n> -      TelemetryStopwatch.finish(TELEMETRY_6_FIRST_RESULTS, this);\n> +    if (this._result.matchCount == 10) {\n> +      TelemetryStopwatch.finish(TELEMETRY_10_FIRST_RESULTS, this);\n> +    }\n\nditto",
          "creator": "mak@mozilla.com",
          "tags": [],
          "is_private": false,
          "author": "mak@mozilla.com",
          "creation_time": "2016-04-07T19:27:46Z"
        },
        {
          "attachment_id": null,
          "bug_id": 1195054,
          "count": 11,
          "id": 11308951,
          "creator": "mak@mozilla.com",
          "text": "Btw, it's r=me without the telemetry changes and with a green Try run.",
          "raw_text": "Btw, it's r=me without the telemetry changes and with a green Try run.",
          "time": "2016-04-07T19:28:50Z",
          "creation_time": "2016-04-07T19:28:50Z",
          "is_private": false,
          "tags": [],
          "author": "mak@mozilla.com"
        },
        {
          "id": 11308977,
          "count": 12,
          "creation_time": "2016-04-07T19:37:38Z",
          "author": "adw@mozilla.com",
          "tags": [],
          "raw_text": "Review request updated; see interdiff: https://reviewboard.mozilla.org/r/44673/diff/2-3/",
          "bug_id": 1195054,
          "attachment_id": 8738719,
          "is_private": false,
          "creator": "adw@mozilla.com",
          "text": "Comment on attachment 8738719\nMozReview Request: Bug 1195054 - The location bar should displays 10 autocomplete suggestions without scrollbar instead of 6. r=mak\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/44673/diff/2-3/",
          "time": "2016-04-07T19:37:38Z"
        },
        {
          "raw_text": "https://treeherder.mozilla.org/#/jobs?repo=try&revision=a578ba4e4457",
          "creation_time": "2016-04-07T19:38:50Z",
          "tags": [],
          "author": "adw@mozilla.com",
          "count": 13,
          "id": 11308982,
          "text": "https://treeherder.mozilla.org/#/jobs?repo=try&revision=a578ba4e4457",
          "time": "2016-04-07T19:38:50Z",
          "creator": "adw@mozilla.com",
          "is_private": false,
          "attachment_id": null,
          "bug_id": 1195054
        },
        {
          "is_private": false,
          "text": "Sorry, I just missed the fact the tree-based autocomplete is also affected by defaultMaxRows... Thus I'm not sure it's a good idea to change it in toolkit, cause we will affect all autocomplete widgets around...\n\nI fear we'll have to keep defining maxRows in the browser binding.",
          "time": "2016-04-07T19:48:04Z",
          "creator": "mak@mozilla.com",
          "bug_id": 1195054,
          "attachment_id": null,
          "creation_time": "2016-04-07T19:48:04Z",
          "tags": [],
          "author": "mak@mozilla.com",
          "raw_text": "Sorry, I just missed the fact the tree-based autocomplete is also affected by defaultMaxRows... Thus I'm not sure it's a good idea to change it in toolkit, cause we will affect all autocomplete widgets around...\n\nI fear we'll have to keep defining maxRows in the browser binding.",
          "id": 11309008,
          "count": 14
        },
        {
          "id": 11309033,
          "count": 15,
          "raw_text": "Review request updated; see interdiff: https://reviewboard.mozilla.org/r/44673/diff/3-4/",
          "creation_time": "2016-04-07T19:53:58Z",
          "tags": [],
          "author": "adw@mozilla.com",
          "attachment_id": 8738719,
          "bug_id": 1195054,
          "text": "Comment on attachment 8738719\nMozReview Request: Bug 1195054 - The location bar should displays 10 autocomplete suggestions without scrollbar instead of 6. r=mak\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/44673/diff/3-4/",
          "time": "2016-04-07T19:53:58Z",
          "creator": "adw@mozilla.com",
          "is_private": false
        },
        {
          "tags": [],
          "author": "adw@mozilla.com",
          "creation_time": "2016-04-07T19:54:33Z",
          "raw_text": "https://treeherder.mozilla.org/#/jobs?repo=try&revision=ce91fb3ce856",
          "count": 16,
          "id": 11309038,
          "is_private": false,
          "creator": "adw@mozilla.com",
          "time": "2016-04-07T19:54:33Z",
          "text": "https://treeherder.mozilla.org/#/jobs?repo=try&revision=ce91fb3ce856",
          "bug_id": 1195054,
          "attachment_id": null
        },
        {
          "count": 17,
          "id": 11309040,
          "creation_time": "2016-04-07T19:54:58Z",
          "author": "mak@mozilla.com",
          "tags": [],
          "raw_text": "https://reviewboard.mozilla.org/r/44673/#review41595\n\nyeah, sorry for the noise.",
          "bug_id": 1195054,
          "attachment_id": 8738719,
          "is_private": false,
          "creator": "mak@mozilla.com",
          "text": "Comment on attachment 8738719\nMozReview Request: Bug 1195054 - The location bar should displays 10 autocomplete suggestions without scrollbar instead of 6. r=mak\n\nhttps://reviewboard.mozilla.org/r/44673/#review41595\n\nyeah, sorry for the noise.",
          "time": "2016-04-07T19:54:58Z"
        },
        {
          "count": 18,
          "id": 11309058,
          "raw_text": "I'm the one causing the noise with these sloppy patches. :-)",
          "tags": [],
          "author": "adw@mozilla.com",
          "creation_time": "2016-04-07T20:01:50Z",
          "attachment_id": null,
          "bug_id": 1195054,
          "time": "2016-04-07T20:01:50Z",
          "text": "I'm the one causing the noise with these sloppy patches. :-)",
          "creator": "adw@mozilla.com",
          "is_private": false
        },
        {
          "id": 11309726,
          "count": 19,
          "tags": [],
          "author": "adw@mozilla.com",
          "creation_time": "2016-04-07T23:22:05Z",
          "raw_text": "https://hg.mozilla.org/integration/fx-team/rev/5815d4fc3043",
          "bug_id": 1195054,
          "attachment_id": null,
          "is_private": false,
          "creator": "adw@mozilla.com",
          "time": "2016-04-07T23:22:05Z",
          "text": "https://hg.mozilla.org/integration/fx-team/rev/5815d4fc3043"
        },
        {
          "bug_id": 1195054,
          "attachment_id": null,
          "is_private": false,
          "text": "Those bc7 failures in browser_urlbarEnterAfterMouseOver.js on Mac and Windows on your try push? Yeah, those were yours. Backed out in https://hg.mozilla.org/integration/fx-team/rev/e7466050cdd2.",
          "time": "2016-04-08T02:57:48Z",
          "creator": "philringnalda@gmail.com",
          "id": 11310058,
          "count": 20,
          "creation_time": "2016-04-08T02:57:48Z",
          "tags": [],
          "author": "philringnalda@gmail.com",
          "raw_text": "Those bc7 failures in browser_urlbarEnterAfterMouseOver.js on Mac and Windows on your try push? Yeah, those were yours. Backed out in https://hg.mozilla.org/integration/fx-team/rev/e7466050cdd2."
        },
        {
          "count": 21,
          "id": 11310161,
          "raw_text": "Sorry, Mac and Windows take forever to build on try recently.  Windows was fine.  I am not ashamed.",
          "creation_time": "2016-04-08T04:39:05Z",
          "author": "adw@mozilla.com",
          "tags": [],
          "attachment_id": null,
          "bug_id": 1195054,
          "text": "Sorry, Mac and Windows take forever to build on try recently.  Windows was fine.  I am not ashamed.",
          "time": "2016-04-08T04:39:05Z",
          "creator": "adw@mozilla.com",
          "is_private": false
        },
        {
          "bug_id": 1195054,
          "attachment_id": null,
          "is_private": false,
          "time": "2016-04-08T04:41:27Z",
          "text": "(In reply to Drew Willcoxon :adw from comment #21)\n> Windows was fine.\n\nLinux I meant.",
          "creator": "adw@mozilla.com",
          "id": 11310167,
          "count": 22,
          "tags": [],
          "author": "adw@mozilla.com",
          "creation_time": "2016-04-08T04:41:27Z",
          "raw_text": "(In reply to Drew Willcoxon :adw from comment #21)\n> Windows was fine.\n\nLinux I meant."
        },
        {
          "raw_text": "https://hg.mozilla.org/integration/fx-team/rev/34293bb847d1\n\nThat comment was tounge-in-cheek by the way. :-)",
          "creation_time": "2016-04-08T05:05:20Z",
          "author": "adw@mozilla.com",
          "tags": [],
          "id": 11310182,
          "count": 23,
          "creator": "adw@mozilla.com",
          "text": "https://hg.mozilla.org/integration/fx-team/rev/34293bb847d1\n\nThat comment was tounge-in-cheek by the way. :-)",
          "time": "2016-04-08T05:05:20Z",
          "is_private": false,
          "attachment_id": null,
          "bug_id": 1195054
        },
        {
          "id": 11312335,
          "count": 24,
          "creation_time": "2016-04-08T22:27:46Z",
          "tags": ["bugherder"],
          "author": "kwierso@gmail.com",
          "raw_text": "https://hg.mozilla.org/mozilla-central/rev/34293bb847d1",
          "bug_id": 1195054,
          "attachment_id": null,
          "is_private": false,
          "creator": "kwierso@gmail.com",
          "text": "https://hg.mozilla.org/mozilla-central/rev/34293bb847d1",
          "time": "2016-04-08T22:27:46Z"
        }
      ]
    }
  },
  "comments": {}
}
