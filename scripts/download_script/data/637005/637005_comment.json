{"comments": {}, "bugs": {"637005": {"comments": [{"time": "2011-02-26T13:51:31Z", "id": 5306186, "is_private": false, "raw_text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13 ( .NET CLR 3.5.30729; .NET4.0E)\nBuild Identifier: 3.1.7    Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.8.1.24) Gecko/20100228 Thunderbird/2.0.0.24\n\nS/MIME seems to have gotten unstable somehow.  Having received emails from person A \"signed\" by the sender using a valid certificate form StartSSL.  Two problems with that:\n\n1.  Very often, the mail is indicated as having tapered with, although I doubt that (although not being able to really check that myself).\n\n2.  When trying to send an email signed and encrypted to that person A, Thunderbird keeps complaining that it can not find the necessary certificate for that adressee (email address), although it is now listed in the certificate manager.\n\nRemark:  Both Person A and I have a long history using S/MIME with yearly renewal of certificates.  It is known to us that there have been similar problems in the past like problem #2 when there were many certificates in the local database (including a lot of expired ones).  With earlier versions, this could often be resolved by deleting expired ones.  This is no longer true with the current version.\n\nReproducible: Sometimes\n\nSteps to Reproduce:\n1. Send signed email (preferrably with a certificate by StartSSL) to another account.\n2. See whether the received mail is indicated as being tampered with.\n3. Try to answer that email from the other account to the first one signed and encrypted.\n\nIf this won't reproduce the error(s), try the same with two accounts that have a local database containing many (especially old and expired) certificates (own and of other people).", "bug_id": 637005, "creation_time": "2011-02-26T13:51:31Z", "tags": [], "author": "mkr@onlinehome.de", "count": 0, "text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13 ( .NET CLR 3.5.30729; .NET4.0E)\nBuild Identifier: 3.1.7    Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.8.1.24) Gecko/20100228 Thunderbird/2.0.0.24\n\nS/MIME seems to have gotten unstable somehow.  Having received emails from person A \"signed\" by the sender using a valid certificate form StartSSL.  Two problems with that:\n\n1.  Very often, the mail is indicated as having tapered with, although I doubt that (although not being able to really check that myself).\n\n2.  When trying to send an email signed and encrypted to that person A, Thunderbird keeps complaining that it can not find the necessary certificate for that adressee (email address), although it is now listed in the certificate manager.\n\nRemark:  Both Person A and I have a long history using S/MIME with yearly renewal of certificates.  It is known to us that there have been similar problems in the past like problem #2 when there were many certificates in the local database (including a lot of expired ones).  With earlier versions, this could often be resolved by deleting expired ones.  This is no longer true with the current version.\n\nReproducible: Sometimes\n\nSteps to Reproduce:\n1. Send signed email (preferrably with a certificate by StartSSL) to another account.\n2. See whether the received mail is indicated as being tampered with.\n3. Try to answer that email from the other account to the first one signed and encrypted.\n\nIf this won't reproduce the error(s), try the same with two accounts that have a local database containing many (especially old and expired) certificates (own and of other people).", "attachment_id": null, "creator": "mkr@onlinehome.de"}, {"attachment_id": null, "creator": "ludovic@hirlimann.net", "author": "ludovic@hirlimann.net", "count": 1, "text": "(In reply to comment #0)\n> User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.9.2.13)\n> Gecko/20101203 Firefox/3.6.13 ( .NET CLR 3.5.30729; .NET4.0E)\n> Build Identifier: 3.1.7    Mozilla/5.0 (Windows; U; Windows NT 5.1; de;\n> rv:1.8.1.24) Gecko/20100228 Thunderbird/2.0.0.24\n\nAre you really using Thunderbird 2.0.0.24 ? This is an unsuported version of THunderbird. Please update to 3.1.x\n\n \n> S/MIME seems to have gotten unstable somehow.  Having received emails from\n> person A \"signed\" by the sender using a valid certificate form StartSSL.  Two\n> problems with that:\n> \n> 1.  Very often, the mail is indicated as having tapered with, although I doubt\n> that (although not being able to really check that myself).\n\nYou can using command line tools - ie those that come with nss.", "is_private": false, "bug_id": 637005, "creation_time": "2011-02-28T10:57:34Z", "raw_text": "(In reply to comment #0)\n> User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.9.2.13)\n> Gecko/20101203 Firefox/3.6.13 ( .NET CLR 3.5.30729; .NET4.0E)\n> Build Identifier: 3.1.7    Mozilla/5.0 (Windows; U; Windows NT 5.1; de;\n> rv:1.8.1.24) Gecko/20100228 Thunderbird/2.0.0.24\n\nAre you really using Thunderbird 2.0.0.24 ? This is an unsuported version of THunderbird. Please update to 3.1.x\n\n \n> S/MIME seems to have gotten unstable somehow.  Having received emails from\n> person A \"signed\" by the sender using a valid certificate form StartSSL.  Two\n> problems with that:\n> \n> 1.  Very often, the mail is indicated as having tapered with, although I doubt\n> that (although not being able to really check that myself).\n\nYou can using command line tools - ie those that come with nss.", "tags": [], "time": "2011-02-28T10:57:34Z", "id": 5308212}, {"is_private": false, "attachment_id": null, "creator": "mkr@onlinehome.de", "tags": [], "raw_text": "Hello, thank you for your quick response!\n\nI am using Thunderbird 3.1.7 -- where does the other id come from?  (another \nerror?).\n\nHowever:  I just confirmed at another installation (3.1.7) my finding that \nThunderbird states \"not found\" when trying to send encrypted email in response \nto someone who previously sent a signed eMail.   Again, it is an account with\na long S/MIME history (i.e. database containing quite a lot of own and other's\ncertificates, most of them expired). \n\nI also confirmed that that person's certificate was really listed under the\nsecond tab in the certificate manager.\n\nThe funny thing is:  When I check if that very certificate is trusted, I find\nthat it is NOT trusted (why?).  When I further check that certificate's CA,\nI find that it can not be used for anything (none of the three checkboxes\nchecked, why?).\n\nMost funny, however:  After having changed that (set the checkmarks, set the\ncertificate to trusted), that certificate is automatically moved to the\nthird tab (Server).   ?????\n\nAnd finally, all that doesn't change the situation:  Thunderbird STILL says\n'not found' when I try to send an encrypted eMail to that person whose \ncertificate I'm talking about.\n\nKind regards", "bug_id": 637005, "creation_time": "2011-03-01T23:02:52Z", "id": 5313232, "author": "mkr@onlinehome.de", "time": "2011-03-01T23:02:52Z", "count": 2, "text": "Hello, thank you for your quick response!\n\nI am using Thunderbird 3.1.7 -- where does the other id come from?  (another \nerror?).\n\nHowever:  I just confirmed at another installation (3.1.7) my finding that \nThunderbird states \"not found\" when trying to send encrypted email in response \nto someone who previously sent a signed eMail.   Again, it is an account with\na long S/MIME history (i.e. database containing quite a lot of own and other's\ncertificates, most of them expired). \n\nI also confirmed that that person's certificate was really listed under the\nsecond tab in the certificate manager.\n\nThe funny thing is:  When I check if that very certificate is trusted, I find\nthat it is NOT trusted (why?).  When I further check that certificate's CA,\nI find that it can not be used for anything (none of the three checkboxes\nchecked, why?).\n\nMost funny, however:  After having changed that (set the checkmarks, set the\ncertificate to trusted), that certificate is automatically moved to the\nthird tab (Server).   ?????\n\nAnd finally, all that doesn't change the situation:  Thunderbird STILL says\n'not found' when I try to send an encrypted eMail to that person whose \ncertificate I'm talking about.\n\nKind regards"}, {"attachment_id": null, "is_private": false, "tags": [], "creator": "standard8@mozilla.com", "bug_id": 637005, "creation_time": "2011-03-01T23:10:25Z", "raw_text": "(In reply to comment #2)\n> Hello, thank you for your quick response!\n> \n> I am using Thunderbird 3.1.7 -- where does the other id come from?  (another \n> error?).\n\nIts not quite the same description, but try resetting it following these instructions: https://support.mozillamessaging.com/en-US/kb/*Build+number+not+displayed", "id": 5313264, "time": "2011-03-01T23:10:25Z", "author": "standard8@mozilla.com", "text": "(In reply to comment #2)\n> Hello, thank you for your quick response!\n> \n> I am using Thunderbird 3.1.7 -- where does the other id come from?  (another \n> error?).\n\nIts not quite the same description, but try resetting it following these instructions: https://support.mozillamessaging.com/en-US/kb/*Build+number+not+displayed", "count": 3}, {"count": 4, "text": "I supose there are no error message in Tools -> Error console when your issue arrises ?\n\nThe nss tools are available at ftp://ftp.mozilla.org/pub/mozilla.org/nspr/releases/v4.4.1/ (that might not be the latest version). These tools should let you figure out :\n\n>When I check if that very certificate is trusted, I find that it is NOT trusted \n>(why?).\n\nDoes the person as more than one certificate in your store ? Is the email address in the certificate the same than the one your are using ?", "author": "ludovic@hirlimann.net", "creator": "ludovic@hirlimann.net", "attachment_id": null, "id": 5314714, "time": "2011-03-02T10:22:51Z", "tags": [], "raw_text": "I supose there are no error message in Tools -> Error console when your issue arrises ?\n\nThe nss tools are available at ftp://ftp.mozilla.org/pub/mozilla.org/nspr/releases/v4.4.1/ (that might not be the latest version). These tools should let you figure out :\n\n>When I check if that very certificate is trusted, I find that it is NOT trusted \n>(why?).\n\nDoes the person as more than one certificate in your store ? Is the email address in the certificate the same than the one your are using ?", "bug_id": 637005, "creation_time": "2011-03-02T10:22:51Z", "is_private": false}, {"creation_time": "2011-03-27T20:14:17Z", "bug_id": 637005, "raw_text": "(In reply to comment #0)\n \n> 2.  When trying to send an email signed and encrypted to that person A,\n> Thunderbird keeps complaining that it can not find the necessary certificate\n> for that adressee (email address), although it is now listed in the certificate\n> manager.\n \nI got this issue when replaying / mail to a person who's certificate has more than one email addresses shown under  field  owner in details tab in cert manager. The certificate is only found for the last listed email address for example the certificate owner\n\nE = <deleted>.<deleted>@googlemail.com\nE = <deleted>.<deleted>@web.de\nE = <deleted>.<deleted>@gmx.de\nCN = <deleted> <deleted>\n\nis only found for mails going to <deleted>.<deleted>@gmx.de but not for mails going to <deleted>.<deleted>@googlemail.com or <deleted>.<deleted>@web.de", "tags": [], "creator": "dieter.grosshans@googlemail.com", "is_private": false, "attachment_id": null, "text": "(In reply to comment #0)\n \n> 2.  When trying to send an email signed and encrypted to that person A,\n> Thunderbird keeps complaining that it can not find the necessary certificate\n> for that adressee (email address), although it is now listed in the certificate\n> manager.\n \nI got this issue when replaying / mail to a person who's certificate has more than one email addresses shown under  field  owner in details tab in cert manager. The certificate is only found for the last listed email address for example the certificate owner\n\nE = <deleted>.<deleted>@googlemail.com\nE = <deleted>.<deleted>@web.de\nE = <deleted>.<deleted>@gmx.de\nCN = <deleted> <deleted>\n\nis only found for mails going to <deleted>.<deleted>@gmx.de but not for mails going to <deleted>.<deleted>@googlemail.com or <deleted>.<deleted>@web.de", "count": 5, "time": "2011-03-27T20:14:17Z", "author": "dieter.grosshans@googlemail.com", "id": 5373067}, {"tags": [], "bug_id": 637005, "creation_time": "2011-03-28T01:19:53Z", "raw_text": "", "is_private": false, "id": 5373360, "time": "2011-03-28T01:19:53Z", "creator": "dieter.grosshans@googlemail.com", "attachment_id": 522265, "text": "Created attachment 522265\nCertificate related to comment #5", "count": 6, "author": "dieter.grosshans@googlemail.com"}, {"author": "ludovic@hirlimann.net", "count": 7, "text": "This seems to be related to the fact that you have more than one email address in the cert right ?", "attachment_id": null, "creator": "ludovic@hirlimann.net", "time": "2011-03-28T08:16:08Z", "id": 5373734, "is_private": false, "creation_time": "2011-03-28T08:16:08Z", "bug_id": 637005, "raw_text": "This seems to be related to the fact that you have more than one email address in the cert right ?", "tags": []}, {"id": 5373755, "time": "2011-03-28T08:33:57Z", "tags": [], "raw_text": "Thanks for looking inside this issue!\nNo, it has nothing to do with multiple E-mail addresses in a cert.\nThere's only one.\n\nAnd things work this way:  First, I have a cert from another person (with one eMail-Address in it) that works fine.  Then, it comes close to expiring or already has.  I gets renewed from the same CA (so the next one also has exactly one eMail-Address in it).\n\nThe next one may work fine also.\n\nBut, as year comes after year (and cert after cert), there comes a point when Thunderbird can not find the new cert.  It has been imported OK and appears in the list, but Thunderbird nevertheless won't send encrypted eMails to that certificate's holder because it \"can not find\" it.\n\nThis was true, as I remember now, even for older versions of Thunderbird because I experienced that behavior also at least a year ago (maybe even sooner).\n\nWhat helps is this:  I remove (sadly!) all _expired_ certificates of other people from Thunderbird (using the certificate manager's appropriate function).  Then after re-loading the unexpired ones (by simply reopening those people's newer eMails, I have their valid certificates AND ONLY THOSE.\n\nThen, surprise surprise, everything works fine again!\n\nIt seems as if Thunderbird's S/MIME components don't like it when the certificate database get's too big, especially when it's loaded with older, expired certificates of the same people it has UNexpired ones for.\n\nThat is, to the best of my knowledge, what happens; very well reproducible on many installations and already for a long time.\n\nKind regards\nmkr", "creation_time": "2011-03-28T08:33:57Z", "bug_id": 637005, "is_private": false, "count": 8, "text": "Thanks for looking inside this issue!\nNo, it has nothing to do with multiple E-mail addresses in a cert.\nThere's only one.\n\nAnd things work this way:  First, I have a cert from another person (with one eMail-Address in it) that works fine.  Then, it comes close to expiring or already has.  I gets renewed from the same CA (so the next one also has exactly one eMail-Address in it).\n\nThe next one may work fine also.\n\nBut, as year comes after year (and cert after cert), there comes a point when Thunderbird can not find the new cert.  It has been imported OK and appears in the list, but Thunderbird nevertheless won't send encrypted eMails to that certificate's holder because it \"can not find\" it.\n\nThis was true, as I remember now, even for older versions of Thunderbird because I experienced that behavior also at least a year ago (maybe even sooner).\n\nWhat helps is this:  I remove (sadly!) all _expired_ certificates of other people from Thunderbird (using the certificate manager's appropriate function).  Then after re-loading the unexpired ones (by simply reopening those people's newer eMails, I have their valid certificates AND ONLY THOSE.\n\nThen, surprise surprise, everything works fine again!\n\nIt seems as if Thunderbird's S/MIME components don't like it when the certificate database get's too big, especially when it's loaded with older, expired certificates of the same people it has UNexpired ones for.\n\nThat is, to the best of my knowledge, what happens; very well reproducible on many installations and already for a long time.\n\nKind regards\nmkr", "author": "mkr@onlinehome.de", "creator": "mkr@onlinehome.de", "attachment_id": null}, {"author": "dieter.grosshans@googlemail.com", "text": "should the problem from comment #5 handled as extra bug?", "count": 9, "attachment_id": null, "creator": "dieter.grosshans@googlemail.com", "id": 5373835, "time": "2011-03-28T10:29:37Z", "is_private": false, "tags": [], "creation_time": "2011-03-28T10:29:37Z", "bug_id": 637005, "raw_text": "should the problem from comment #5 handled as extra bug?"}, {"attachment_id": null, "creator": "ludovic@hirlimann.net", "author": "ludovic@hirlimann.net", "text": "(In reply to comment #9)\n> should the problem from comment #5 handled as extra bug?\n\nprobably", "count": 10, "is_private": false, "tags": [], "creation_time": "2011-03-28T11:10:36Z", "bug_id": 637005, "raw_text": "(In reply to comment #9)\n> should the problem from comment #5 handled as extra bug?\n\nprobably", "id": 5373878, "time": "2011-03-28T11:10:36Z"}, {"count": 11, "text": "(In reply to comment #9)\n> should the problem from comment #5 handled as extra bug?\nBug 645680 opend for problem with certifcate with multiple email addresses", "time": "2011-03-29T17:39:02Z", "author": "dieter.grosshans@googlemail.com", "id": 5377959, "creation_time": "2011-03-29T17:39:02Z", "bug_id": 637005, "raw_text": "(In reply to comment #9)\n> should the problem from comment #5 handled as extra bug?\nBug 645680 opend for problem with certifcate with multiple email addresses", "tags": [], "creator": "dieter.grosshans@googlemail.com", "is_private": false, "attachment_id": null}, {"is_private": false, "tags": [], "raw_text": "I have problems with S/MIME and Thunderbird 3.1.8 (3.1.8+build3+nobinonly-0ubuntu0.10.10.1). From time to time I am not able to send encrypted email to my contacts because thunderbird can't find corresponding certificate (\"You specified encryption for this message, but the application failed to find an encryption certificate for ...\"). However recipient's certificate IS in my key store (I can see it in Edit -> Preferences -> Advanced -> Certificates -> View Certificates -> People).\n\nI have tried deleting ALL of certificates, then import them again by opening s/mime signed emails. After opening 3 different signed emails from 3 different people only 2 certificates were imported. Thunderbird is telling on all 3 messages same \"Message is signed\" information. \n\nAfter restarting thunderbird it is possible to send encrypted email to third person even though I don't see his certificate in keystore.\n\nIt is behaving very strange. I am facing this kind of s/mime problems repeatedly. It is annoying :(", "bug_id": 637005, "creation_time": "2011-04-22T13:53:10Z", "id": 5426168, "time": "2011-04-22T13:53:10Z", "attachment_id": null, "creator": "tomas.zatko@gmail.com", "author": "tomas.zatko@gmail.com", "count": 12, "text": "I have problems with S/MIME and Thunderbird 3.1.8 (3.1.8+build3+nobinonly-0ubuntu0.10.10.1). From time to time I am not able to send encrypted email to my contacts because thunderbird can't find corresponding certificate (\"You specified encryption for this message, but the application failed to find an encryption certificate for ...\"). However recipient's certificate IS in my key store (I can see it in Edit -> Preferences -> Advanced -> Certificates -> View Certificates -> People).\n\nI have tried deleting ALL of certificates, then import them again by opening s/mime signed emails. After opening 3 different signed emails from 3 different people only 2 certificates were imported. Thunderbird is telling on all 3 messages same \"Message is signed\" information. \n\nAfter restarting thunderbird it is possible to send encrypted email to third person even though I don't see his certificate in keystore.\n\nIt is behaving very strange. I am facing this kind of s/mime problems repeatedly. It is annoying :("}, {"id": 5426214, "time": "2011-04-22T14:49:18Z", "tags": [], "creation_time": "2011-04-22T14:49:18Z", "bug_id": 637005, "raw_text": "Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9\n\nI have a similarly frustrating experience. Lately, I'm not able to encrypt S/MIME messages to anyone. Not even myself. When I create a new message addressed to myself, I can sign it successfully, but not encrypt it. Clicking on the \"Security\" button reveals that Thundebird seemingly can't find my own certificate: the Status next to my address in the Recipient list says \"not found\". If I open the Certificate Manager, my current valid certificate happily sits there along two expired ones in the Your Certificates section and double-clicking it says it's been verified as both a signer, and a recipient certificate.\n\nI need to \"backup\" all my certificates from Your Certificates, delete them, restart Thunderbird (see below) and import them back again. Then I can write an encrypted e-mail to myself, but not to nearly anyone else from the People section in Certificate Manager. I have to delete and re-import their certificates as well.\n\nAnother interesting point is that after doing nearly any editing in the Certificate Manager, the Mail & Newsgroups window stops being responsive. There seems to be no message written to either stdout, or the Error Console, no elevated load, no \"Not Responding\" label in Activity Manager. The menu works and I can open a new message by hitting cmd+N (not sure about the icons there working though), but reopening the Mail & Newsgroups window does not help and I have to restart the whole mail client.\n\nIt's not an issue of multiple identities or accounts. When I created an empty profile with just one account and one identity and copied the cert8.db and key3.db files over, the behavior was the same.\n\nAnd it doesn't seem to be confined to a specific architecture either. At my work place, there's a mixture of Thunderbird users running Linux, OS X and Windows and pretty much anyone has this issue once his certificate database grows a bit.", "is_private": false, "count": 13, "text": "Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9\n\nI have a similarly frustrating experience. Lately, I'm not able to encrypt S/MIME messages to anyone. Not even myself. When I create a new message addressed to myself, I can sign it successfully, but not encrypt it. Clicking on the \"Security\" button reveals that Thundebird seemingly can't find my own certificate: the Status next to my address in the Recipient list says \"not found\". If I open the Certificate Manager, my current valid certificate happily sits there along two expired ones in the Your Certificates section and double-clicking it says it's been verified as both a signer, and a recipient certificate.\n\nI need to \"backup\" all my certificates from Your Certificates, delete them, restart Thunderbird (see below) and import them back again. Then I can write an encrypted e-mail to myself, but not to nearly anyone else from the People section in Certificate Manager. I have to delete and re-import their certificates as well.\n\nAnother interesting point is that after doing nearly any editing in the Certificate Manager, the Mail & Newsgroups window stops being responsive. There seems to be no message written to either stdout, or the Error Console, no elevated load, no \"Not Responding\" label in Activity Manager. The menu works and I can open a new message by hitting cmd+N (not sure about the icons there working though), but reopening the Mail & Newsgroups window does not help and I have to restart the whole mail client.\n\nIt's not an issue of multiple identities or accounts. When I created an empty profile with just one account and one identity and copied the cert8.db and key3.db files over, the behavior was the same.\n\nAnd it doesn't seem to be confined to a specific architecture either. At my work place, there's a mixture of Thunderbird users running Linux, OS X and Windows and pretty much anyone has this issue once his certificate database grows a bit.", "author": "gali@jungle.sk", "creator": "gali@jungle.sk", "attachment_id": null}, {"author": "sven-mozilla@sven.de", "text": "I had this happen to me today when using TB 10.0.2 on OS X. I had only one certificate yet Thunderbird was unable to find the key to sign mails.\n\nI had to manually to go the account settings in the \"Extras\" menu and select the key in the S/MIME section of the settings.", "count": 14, "attachment_id": null, "creator": "sven-mozilla@sven.de", "id": 6095136, "time": "2012-02-27T14:07:25Z", "is_private": false, "tags": [], "bug_id": 637005, "creation_time": "2012-02-27T14:07:25Z", "raw_text": "I had this happen to me today when using TB 10.0.2 on OS X. I had only one certificate yet Thunderbird was unable to find the key to sign mails.\n\nI had to manually to go the account settings in the \"Extras\" menu and select the key in the S/MIME section of the settings."}]}}}