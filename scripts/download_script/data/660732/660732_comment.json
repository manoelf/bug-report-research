{"bugs": {"660732": {"comments": [{"is_private": false, "id": 5502541, "count": 0, "creator": "jruderman@gmail.com", "creation_time": "2011-05-31T03:29:15Z", "time": "2011-05-31T03:29:15Z", "author": "jruderman@gmail.com", "attachment_id": null, "raw_text": "about:support shows me:\n\n\"GPU Accelerated Windows: 0/1. Blocked for your graphics driver version. Try updating your graphics driver to version NVIDIA 257.21 or newer.\"\n\n\"Updating your graphics driver\" should be a link to https://support.mozilla.com/en-US/kb/how-do-i-upgrade-my-graphics-drivers.  Having to figure it out on your own is not fun.", "text": "about:support shows me:\n\n\"GPU Accelerated Windows: 0/1. Blocked for your graphics driver version. Try updating your graphics driver to version NVIDIA 257.21 or newer.\"\n\n\"Updating your graphics driver\" should be a link to https://support.mozilla.com/en-US/kb/how-do-i-upgrade-my-graphics-drivers.  Having to figure it out on your own is not fun.", "bug_id": 660732, "tags": []}, {"is_private": false, "id": 5505164, "count": 1, "author": "blair@theunfocused.net", "creator": "blair@theunfocused.net", "time": "2011-06-01T02:01:46Z", "creation_time": "2011-06-01T02:01:46Z", "raw_text": "", "attachment_id": 536502, "tags": [], "bug_id": 660732, "text": "Created attachment 536502\nPatch v1"}, {"text": "Comment on attachment 536502\nPatch v1\n\n>diff --git a/toolkit/content/aboutSupport.js b/toolkit/content/aboutSupport.js\n\n>+  try {\n>+    let urlFormatter = Cc[\"@mozilla.org/toolkit/URLFormatterService;1\"]\n\nI don't think any of this is expected to throw, so you should remove the try/catch.\n\n>+    for (let i = 0; i < links.length; i++) {\n>+      links[i].href = supportUrl;\n\nMight be nice to also set target=\"_blank\"\n\n>-function createElement(tagName, textContent, opt_class) {\n>+function createElement(tagName, content, opt_class, isHTML) {\n\nWhy not just set innerHTML instead of textContent unconditionally? It's possible for errorMessageForFeature output to be used for something other than pushFeatureInfoRow, so even if this particular string can't currently show up there in practice, it seems a bit fragile.", "bug_id": 660732, "tags": [], "raw_text": ">diff --git a/toolkit/content/aboutSupport.js b/toolkit/content/aboutSupport.js\n\n>+  try {\n>+    let urlFormatter = Cc[\"@mozilla.org/toolkit/URLFormatterService;1\"]\n\nI don't think any of this is expected to throw, so you should remove the try/catch.\n\n>+    for (let i = 0; i < links.length; i++) {\n>+      links[i].href = supportUrl;\n\nMight be nice to also set target=\"_blank\"\n\n>-function createElement(tagName, textContent, opt_class) {\n>+function createElement(tagName, content, opt_class, isHTML) {\n\nWhy not just set innerHTML instead of textContent unconditionally? It's possible for errorMessageForFeature output to be used for something other than pushFeatureInfoRow, so even if this particular string can't currently show up there in practice, it seems a bit fragile.", "attachment_id": 536502, "author": "gavin.sharp@gmail.com", "creation_time": "2011-06-03T00:44:22Z", "time": "2011-06-03T00:44:22Z", "creator": "gavin.sharp@gmail.com", "count": 2, "id": 5510106, "is_private": false}, {"attachment_id": 537678, "raw_text": "(In reply to comment #2)\n> >+  try {\n> >+    let urlFormatter = Cc[\"@mozilla.org/toolkit/URLFormatterService;1\"]\n> \n> I don't think any of this is expected to throw, so you should remove the\n> try/catch.\n\nFor some reason I thought formatURLPref() threw on a missing pref - but it just returns \"about:blank\". So I've replaced the try/catch with a check for about:blank, in case a toolkit app doesn't set the pref (the support page is in toolkit, and the pref is set per-application).", "text": "Created attachment 537678\nPatch v2\n\n(In reply to comment #2)\n> >+  try {\n> >+    let urlFormatter = Cc[\"@mozilla.org/toolkit/URLFormatterService;1\"]\n> \n> I don't think any of this is expected to throw, so you should remove the\n> try/catch.\n\nFor some reason I thought formatURLPref() threw on a missing pref - but it just returns \"about:blank\". So I've replaced the try/catch with a check for about:blank, in case a toolkit app doesn't set the pref (the support page is in toolkit, and the pref is set per-application).", "bug_id": 660732, "tags": [], "is_private": false, "count": 3, "id": 5516417, "creator": "blair@theunfocused.net", "creation_time": "2011-06-06T23:24:35Z", "time": "2011-06-06T23:24:35Z", "author": "blair@theunfocused.net"}, {"is_private": false, "id": 5516480, "count": 4, "creator": "gavin.sharp@gmail.com", "creation_time": "2011-06-06T23:51:37Z", "time": "2011-06-06T23:51:37Z", "author": "gavin.sharp@gmail.com", "attachment_id": 537678, "raw_text": "Little bit afraid that the \"don't translate\" note will be missed, but that just causes no link to appear, which is pretty good fallback behavior!", "tags": [], "bug_id": 660732, "text": "Comment on attachment 537678\nPatch v2\n\nLittle bit afraid that the \"don't translate\" note will be missed, but that just causes no link to appear, which is pretty good fallback behavior!"}, {"author": "blair@theunfocused.net", "creator": "blair@theunfocused.net", "time": "2011-06-08T11:08:00Z", "creation_time": "2011-06-08T11:08:00Z", "is_private": false, "count": 5, "id": 5519441, "bug_id": 660732, "text": "https://hg.mozilla.org/mozilla-central/rev/010b73990286", "tags": [], "raw_text": "https://hg.mozilla.org/mozilla-central/rev/010b73990286", "attachment_id": null}, {"text": "This patch totally broke about:support \n\nExtensions, Modified Prefs and Graphics are all empty only the banner bar for each category shows.  \n\n\nThese errors in Console2\nError: not well-formed\nSource code:\n<td xmlns=\"http://www.w3.org/1999/xhtml\">&PT</\n\nError: An invalid or illegal string was specified = NS_ERROR_DOM_SYNTAX_ERR\nSource file: chrome://global/content/aboutSupport.js\nLine: 382\n\n\naka/Littlemutt", "bug_id": 660732, "tags": [], "attachment_id": null, "raw_text": "This patch totally broke about:support \n\nExtensions, Modified Prefs and Graphics are all empty only the banner bar for each category shows.  \n\n\nThese errors in Console2\nError: not well-formed\nSource code:\n<td xmlns=\"http://www.w3.org/1999/xhtml\">&PT</\n\nError: An invalid or illegal string was specified = NS_ERROR_DOM_SYNTAX_ERR\nSource file: chrome://global/content/aboutSupport.js\nLine: 382\n\n\naka/Littlemutt", "creator": "jmjjeffery@gmail.com", "time": "2011-06-08T19:32:31Z", "creation_time": "2011-06-08T19:32:31Z", "author": "jmjjeffery@gmail.com", "is_private": false, "id": 5520575, "count": 6}, {"bug_id": 660732, "text": "Filed: https://bugzilla.mozilla.org/show_bug.cgi?id=662901", "tags": [], "raw_text": "Filed: https://bugzilla.mozilla.org/show_bug.cgi?id=662901", "attachment_id": null, "author": "jmjjeffery@gmail.com", "creator": "jmjjeffery@gmail.com", "time": "2011-06-08T19:38:26Z", "creation_time": "2011-06-08T19:38:26Z", "is_private": false, "count": 7, "id": 5520600}, {"tags": [], "text": "I've backed this out because of bug 662901. Would love to see at least a basic test that about:support loads here before landing.\n\nhttp://hg.mozilla.org/mozilla-central/rev/84189d94f01a", "bug_id": 660732, "attachment_id": null, "raw_text": "I've backed this out because of bug 662901. Would love to see at least a basic test that about:support loads here before landing.\n\nhttp://hg.mozilla.org/mozilla-central/rev/84189d94f01a", "creation_time": "2011-06-12T15:50:31Z", "time": "2011-06-12T15:50:31Z", "creator": "dtownsend@mozilla.com", "author": "dtownsend@mozilla.com", "id": 5527678, "count": 8, "is_private": false}]}}, "comments": {}}