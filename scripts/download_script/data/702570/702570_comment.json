{"comments": {}, "bugs": {"702570": {"comments": [{"raw_text": "User Agent: Mozilla/5.0 (Windows NT 5.1; rv:8.0) Gecko/20100101 Firefox/8.0\nBuild ID: 20111104165243\n\nSteps to reproduce:\n\n1. Create iCloud calendars (using patch from Bug 695117)\n2. Create an event for one iCloud calendar\n3. Change the calendar in the event modification dialog box and press ok.\n\n\nActual results:\n\nError message appears\nError code: MODIFICATION_FAILED\nDescription: Status-Code: 409, Resource-Conflict.\n\n<?xml version='1.0' encoding='UTF-8'?><error xmlns='DAV:'><no-uid-conflict xmlns='urn:ietf:params:xml:ns:caldav'><href xmlns='DAV:'>/XXXXXXXX/calendars/home/cc546ca8-14bd-49e6-aa4a-b18d276c6d47.ics</href></no-uid-conflict><error-description xmlns='http://twistedmatrix.com/xml_namespace/dav/'>(4845915782) Found component /XXXXXXX/calendars/work/cc546ca8-14bd-49e6-aa4a-b18d276c6d47.ics with same UID in a different collection: /XXXXXXXX/calendars/home/cc546ca8-14bd-49e6-aa4a-b18d276c6d47.ics</error-description></error>\n\n\nExpected results:\n\nNew clanedar should assigned to event", "attachment_id": null, "id": 5849094, "is_private": false, "creator": "jvoelker@gmx.de", "text": "User Agent: Mozilla/5.0 (Windows NT 5.1; rv:8.0) Gecko/20100101 Firefox/8.0\nBuild ID: 20111104165243\n\nSteps to reproduce:\n\n1. Create iCloud calendars (using patch from Bug 695117)\n2. Create an event for one iCloud calendar\n3. Change the calendar in the event modification dialog box and press ok.\n\n\nActual results:\n\nError message appears\nError code: MODIFICATION_FAILED\nDescription: Status-Code: 409, Resource-Conflict.\n\n<?xml version='1.0' encoding='UTF-8'?><error xmlns='DAV:'><no-uid-conflict xmlns='urn:ietf:params:xml:ns:caldav'><href xmlns='DAV:'>/XXXXXXXX/calendars/home/cc546ca8-14bd-49e6-aa4a-b18d276c6d47.ics</href></no-uid-conflict><error-description xmlns='http://twistedmatrix.com/xml_namespace/dav/'>(4845915782) Found component /XXXXXXX/calendars/work/cc546ca8-14bd-49e6-aa4a-b18d276c6d47.ics with same UID in a different collection: /XXXXXXXX/calendars/home/cc546ca8-14bd-49e6-aa4a-b18d276c6d47.ics</error-description></error>\n\n\nExpected results:\n\nNew clanedar should assigned to event", "tags": [], "time": "2011-11-15T11:58:40Z", "creation_time": "2011-11-15T11:58:40Z", "author": "jvoelker@gmx.de", "count": 0, "bug_id": 702570}, {"count": 1, "bug_id": 702570, "raw_text": "I just tried this on my locally installed Apple Calendar Server and there it works.", "attachment_id": null, "id": 5849687, "creator": "mozilla@felixmoeller.de", "is_private": false, "time": "2011-11-15T17:29:19Z", "tags": [], "text": "I just tried this on my locally installed Apple Calendar Server and there it works.", "author": "mozilla@felixmoeller.de", "creation_time": "2011-11-15T17:29:19Z"}, {"is_private": false, "creator": "mozilla@felixmoeller.de", "creation_time": "2012-09-11T21:25:43Z", "author": "mozilla@felixmoeller.de", "text": "*** Bug 737200 has been marked as a duplicate of this bug. ***", "tags": [], "time": "2012-09-11T21:25:43Z", "attachment_id": null, "raw_text": "", "id": 6626825, "count": 2, "bug_id": 702570}, {"id": 6626828, "raw_text": "", "attachment_id": null, "time": "2012-09-11T21:26:17Z", "tags": [], "text": "*** Bug 751468 has been marked as a duplicate of this bug. ***", "author": "mozilla@felixmoeller.de", "creation_time": "2012-09-11T21:26:17Z", "creator": "mozilla@felixmoeller.de", "is_private": false, "bug_id": 702570, "count": 3}, {"is_private": false, "creator": "philipp@bugzilla.kewis.ch", "count": 4, "creation_time": "2013-09-23T11:49:31Z", "author": "philipp@bugzilla.kewis.ch", "text": "I've just tested this and it works fine for me. Please verify.", "tags": [], "time": "2013-09-23T11:49:31Z", "bug_id": 702570, "attachment_id": null, "raw_text": "I've just tested this and it works fine for me. Please verify.", "id": 7889490}, {"bug_id": 702570, "count": 5, "id": 7890688, "attachment_id": null, "raw_text": "Well, I still get error messages(see below) - I do still believe, that the main problem is, that the Icloud servers do not like to have two same events in two different calendars. Thunderbird wants to copy the event first and then delete the old one, but the mail-server rejects the duplicated event...\n(fyi, I'm using Lightning 1.9.1)\n\nP.S.: workaround: move the event temporarily in an non iCloud calendar\n\n-----------------------------------\nZeitstempel: 23.09.2013 18:14:28\nFehler: Beim Schreiben in den Kalender private_iCloud ist ein Fehler aufgetreten! Fehlercode: MODIFICATION_FAILED. Beschreibung: Status-Code: 2147500037, Die Anfrage kann nicht verarbeitet werden.\n\nServer Replied with 403\nQuelldatei: resource://calendar/modules/calUtils.jsm -> file:///C:/Users/XXXXXXX/AppData/Roaming/Thunderbird/Profiles/dfj95cyn.default/extensions/%7Be2fda1a4-762b-4020-b5ad-a41df1933103%7D/calendar-js/calCalendarManager.js\nZeile: 976\n------------------------------------\nZeitstempel: 23.09.2013 18:14:28\nWarnung: Fehler beim Lesen von Daten f\u00fcr Kalender: private_iCloud. Allerdings ist dieser Fehler wahrscheinlich vernachl\u00e4ssigbar, daher versucht das Programm fortzufahren. Fehlercode: DAV_PUT_ERROR. Beschreibung: Beim Speichern des Eintrags auf dem Server ist ein Fehler aufgetreten.\n------------------------------------\nZeitstempel: 23.09.2013 18:14:28\nFehler: CalDAV: Unexpected status adding item to private_iCloud: 403\nBEGIN:VCALENDAR\nPRODID:-//Mozilla.org/NONSGML Mozilla Calendar V1.1//EN\nVERSION:2.0\nBEGIN:VTIMEZONE\nTZID:Europe/Berlin\nX-LIC-LOCATION:Europe/Berlin\nBEGIN:DAYLIGHT\nTZOFFSETFROM:+0100\nTZOFFSETTO:+0200\nTZNAME:CEST\nDTSTART:19700329T020000\nRRULE:FREQ=YEARLY;BYDAY=-1SU;BYMONTH=3\nEND:DAYLIGHT\nBEGIN:STANDARD\nTZOFFSETFROM:+0200\nTZOFFSETTO:+0100\nTZNAME:CET\nDTSTART:19701025T030000\nRRULE:FREQ=YEARLY;BYDAY=-1SU;BYMONTH=10\nEND:STANDARD\nEND:VTIMEZONE\nBEGIN:VEVENT\nCREATED:20130826T143457Z\nLAST-MODIFIED:20130923T161428Z\nDTSTAMP:20130923T161428Z\nUID:XXXX\nSUMMARY:Testate & co\nDTSTART;TZID=Europe/Berlin:20130828T150000\nDTEND;TZID=Europe/Berlin:20130828T161500\nX-MOZ-GENERATION:2\nTRANSP:OPAQUE\nEND:VEVENT\nEND:VCALENDAR", "creation_time": "2013-09-23T16:27:53Z", "author": "grb19@gmx.de", "text": "Well, I still get error messages(see below) - I do still believe, that the main problem is, that the Icloud servers do not like to have two same events in two different calendars. Thunderbird wants to copy the event first and then delete the old one, but the mail-server rejects the duplicated event...\n(fyi, I'm using Lightning 1.9.1)\n\nP.S.: workaround: move the event temporarily in an non iCloud calendar\n\n-----------------------------------\nZeitstempel: 23.09.2013 18:14:28\nFehler: Beim Schreiben in den Kalender private_iCloud ist ein Fehler aufgetreten! Fehlercode: MODIFICATION_FAILED. Beschreibung: Status-Code: 2147500037, Die Anfrage kann nicht verarbeitet werden.\n\nServer Replied with 403\nQuelldatei: resource://calendar/modules/calUtils.jsm -> file:///C:/Users/XXXXXXX/AppData/Roaming/Thunderbird/Profiles/dfj95cyn.default/extensions/%7Be2fda1a4-762b-4020-b5ad-a41df1933103%7D/calendar-js/calCalendarManager.js\nZeile: 976\n------------------------------------\nZeitstempel: 23.09.2013 18:14:28\nWarnung: Fehler beim Lesen von Daten f\u00fcr Kalender: private_iCloud. Allerdings ist dieser Fehler wahrscheinlich vernachl\u00e4ssigbar, daher versucht das Programm fortzufahren. Fehlercode: DAV_PUT_ERROR. Beschreibung: Beim Speichern des Eintrags auf dem Server ist ein Fehler aufgetreten.\n------------------------------------\nZeitstempel: 23.09.2013 18:14:28\nFehler: CalDAV: Unexpected status adding item to private_iCloud: 403\nBEGIN:VCALENDAR\nPRODID:-//Mozilla.org/NONSGML Mozilla Calendar V1.1//EN\nVERSION:2.0\nBEGIN:VTIMEZONE\nTZID:Europe/Berlin\nX-LIC-LOCATION:Europe/Berlin\nBEGIN:DAYLIGHT\nTZOFFSETFROM:+0100\nTZOFFSETTO:+0200\nTZNAME:CEST\nDTSTART:19700329T020000\nRRULE:FREQ=YEARLY;BYDAY=-1SU;BYMONTH=3\nEND:DAYLIGHT\nBEGIN:STANDARD\nTZOFFSETFROM:+0200\nTZOFFSETTO:+0100\nTZNAME:CET\nDTSTART:19701025T030000\nRRULE:FREQ=YEARLY;BYDAY=-1SU;BYMONTH=10\nEND:STANDARD\nEND:VTIMEZONE\nBEGIN:VEVENT\nCREATED:20130826T143457Z\nLAST-MODIFIED:20130923T161428Z\nDTSTAMP:20130923T161428Z\nUID:XXXX\nSUMMARY:Testate & co\nDTSTART;TZID=Europe/Berlin:20130828T150000\nDTEND;TZID=Europe/Berlin:20130828T161500\nX-MOZ-GENERATION:2\nTRANSP:OPAQUE\nEND:VEVENT\nEND:VCALENDAR", "time": "2013-09-23T16:27:53Z", "tags": [], "is_private": false, "creator": "grb19@gmx.de"}, {"id": 7893151, "raw_text": "Could you provide more exact steps maybe? Change calendar from what to what? One iCloud calendar to another? Anything else aside from the initial steps to reproduce?", "attachment_id": null, "time": "2013-09-24T00:23:00Z", "tags": [], "text": "Could you provide more exact steps maybe? Change calendar from what to what? One iCloud calendar to another? Anything else aside from the initial steps to reproduce?", "author": "philipp@bugzilla.kewis.ch", "creation_time": "2013-09-24T00:23:00Z", "creator": "philipp@bugzilla.kewis.ch", "is_private": false, "bug_id": 702570, "count": 6}, {"id": 7893233, "raw_text": "Any changing within the following calendars does not work:\n\nhttps://p01-caldav.icloud.com/XXXXXXXXXX/calendars/home/\nhttps://p01-caldav.icloud.com/XXXXXXXXXX/calendars/2b6770ea5fb2c5e59c9e6af89e39cc4195339bb56d00543a81de25986e9b4544/\nhttps://p01-caldav.icloud.com/XXXXXXXXXX/calendars/97AF83D4-4247-4180-89D0-BDFFB8324929/\n\nSo the change was between two iCloud calendars, which both belong to the same account.\nEnabled or disabled offline support does not change anything.\nChanging of the receiving server to p02 also has no effect.\n\nUrls were retrieved by the tool, that can be found here:\nhttp://icloud.niftyside.com/", "attachment_id": null, "text": "Any changing within the following calendars does not work:\n\nhttps://p01-caldav.icloud.com/XXXXXXXXXX/calendars/home/\nhttps://p01-caldav.icloud.com/XXXXXXXXXX/calendars/2b6770ea5fb2c5e59c9e6af89e39cc4195339bb56d00543a81de25986e9b4544/\nhttps://p01-caldav.icloud.com/XXXXXXXXXX/calendars/97AF83D4-4247-4180-89D0-BDFFB8324929/\n\nSo the change was between two iCloud calendars, which both belong to the same account.\nEnabled or disabled offline support does not change anything.\nChanging of the receiving server to p02 also has no effect.\n\nUrls were retrieved by the tool, that can be found here:\nhttp://icloud.niftyside.com/", "time": "2013-09-24T00:58:29Z", "tags": [], "creation_time": "2013-09-24T00:58:29Z", "author": "grb19@gmx.de", "is_private": false, "creator": "grb19@gmx.de", "bug_id": 702570, "count": 7}, {"count": 8, "is_private": false, "creator": "philipp@bugzilla.kewis.ch", "text": "Ah ok, I have been able to reproduce this now. I just talked to someone from iCloud: Matching with the observations, the item UID is unique to the whole account instead of just a calendar, due to how implicit scheduling works. There is no sensible way to fix this on iCloud, because invitations don't specify a collection but just a UID.\n\nFor us to fix this, we would have to drastically change the current logic, which is add to new calendar first, then remove from old calendar on success:\n\n* If moving from caldav to non-caldav, use the current logic\n* If moving from caldav to caldav on the same server, use a MOVE operation\n* If moving from caldav to caldav between different servers, use the current logic\n\nWe can't just delete first then add, because it might cause dataloss. We can't delete, then add and on failure add back to the first calendar, because that last add might also fail due to soft quotas.\n\nTo fix this bug, it needs to be implemented in a way that fits in nicely with the providers, but I really think the effort is not worth it.", "tags": [], "time": "2013-09-24T09:53:44Z", "bug_id": 702570, "creation_time": "2013-09-24T09:53:44Z", "author": "philipp@bugzilla.kewis.ch", "raw_text": "Ah ok, I have been able to reproduce this now. I just talked to someone from iCloud: Matching with the observations, the item UID is unique to the whole account instead of just a calendar, due to how implicit scheduling works. There is no sensible way to fix this on iCloud, because invitations don't specify a collection but just a UID.\n\nFor us to fix this, we would have to drastically change the current logic, which is add to new calendar first, then remove from old calendar on success:\n\n* If moving from caldav to non-caldav, use the current logic\n* If moving from caldav to caldav on the same server, use a MOVE operation\n* If moving from caldav to caldav between different servers, use the current logic\n\nWe can't just delete first then add, because it might cause dataloss. We can't delete, then add and on failure add back to the first calendar, because that last add might also fail due to soft quotas.\n\nTo fix this bug, it needs to be implemented in a way that fits in nicely with the providers, but I really think the effort is not worth it.", "attachment_id": null, "id": 7894393}, {"id": 7894463, "attachment_id": null, "raw_text": "I'm not quite sure, whether the third way\n(* If moving from caldav to caldav between different servers, use the current logic)\nwould work. Shouldn't it be different accounts and not different servers?", "author": "grb19@gmx.de", "creation_time": "2013-09-24T10:17:30Z", "tags": [], "time": "2013-09-24T10:17:30Z", "bug_id": 702570, "text": "I'm not quite sure, whether the third way\n(* If moving from caldav to caldav between different servers, use the current logic)\nwould work. Shouldn't it be different accounts and not different servers?", "creator": "grb19@gmx.de", "is_private": false, "count": 9}, {"creator": "philipp@bugzilla.kewis.ch", "is_private": false, "tags": [], "time": "2013-09-26T11:44:25Z", "text": "I'm just saying, this case also needs to be covered given the architecture of Lightning. Calendars are abstracted in a way that a copy/move can happen between any kind of calendar.", "author": "philipp@bugzilla.kewis.ch", "creation_time": "2013-09-26T11:44:25Z", "raw_text": "I'm just saying, this case also needs to be covered given the architecture of Lightning. Calendars are abstracted in a way that a copy/move can happen between any kind of calendar.", "attachment_id": null, "id": 7905304, "count": 10, "bug_id": 702570}, {"raw_text": "", "attachment_id": null, "id": 9960857, "count": 11, "is_private": false, "creator": "ssitter@gmail.com", "text": "*** Bug 1136099 has been marked as a duplicate of this bug. ***", "time": "2015-02-26T09:14:44Z", "tags": [], "bug_id": 702570, "creation_time": "2015-02-26T09:14:44Z", "author": "ssitter@gmail.com"}, {"is_private": false, "creator": "makemyday@gmx-topmail.de", "count": 12, "creation_time": "2015-04-05T22:01:17Z", "author": "makemyday@gmx-topmail.de", "text": "*** Bug 1117104 has been marked as a duplicate of this bug. ***", "bug_id": 702570, "tags": [], "time": "2015-04-05T22:01:17Z", "attachment_id": null, "raw_text": "", "id": 10120084}, {"is_private": false, "creator": "vseerror@lehigh.edu", "count": 13, "creation_time": "2020-08-09T13:52:25Z", "author": "vseerror@lehigh.edu", "text": "comment 8", "time": "2020-08-09T13:52:25Z", "bug_id": 702570, "tags": [], "attachment_id": null, "raw_text": "comment 8", "id": 14979990}, {"count": 14, "is_private": false, "creator": "paul@paulwmorris.com", "text": "This looks like something we should fix eventually, but given the effort involved, I think the priority would be lower, P3 at most.", "tags": [], "bug_id": 702570, "time": "2020-09-01T13:53:20Z", "creation_time": "2020-09-01T13:53:20Z", "author": "paul@paulwmorris.com", "raw_text": "This looks like something we should fix eventually, but given the effort involved, I think the priority would be lower, P3 at most.", "attachment_id": null, "id": 15016358}, {"bug_id": 702570, "tags": [], "time": "2020-10-25T11:06:48Z", "text": "The rationale for the restriction is, that moving an event by PUT+DELETE for server-side scheduled events, on PUT the server has to send iTIP invitations, and on DELETE the server has to send iTIP cancellations.  This is hard to get right.  To test on servers with such behaviour, you can use aaa@aegee.org as principal.  For various reasons mentioned elsewhere, the easiest setup is to use TbSync+Dav-4-TbSync. The secret is abc.\n\nSee also https://github.com/jobisoft/DAV-4-TbSync/issues/187 and https://github.com/cyrusimap/cyrus-imapd/issues/2345.", "author": "dpa-mozilla@aegee.org", "creation_time": "2020-10-25T11:06:48Z", "count": 15, "creator": "dpa-mozilla@aegee.org", "is_private": false, "id": 15098646, "raw_text": "The rationale for the restriction is, that moving an event by PUT+DELETE for server-side scheduled events, on PUT the server has to send iTIP invitations, and on DELETE the server has to send iTIP cancellations.  This is hard to get right.  To test on servers with such behaviour, you can use aaa@aegee.org as principal.  For various reasons mentioned elsewhere, the easiest setup is to use TbSync+Dav-4-TbSync. The secret is abc.\n\nSee also https://github.com/jobisoft/DAV-4-TbSync/issues/187 and https://github.com/cyrusimap/cyrus-imapd/issues/2345.", "attachment_id": null}, {"count": 16, "bug_id": 702570, "creator": "dpa-mozilla@aegee.org", "is_private": false, "author": "dpa-mozilla@aegee.org", "creation_time": "2020-10-25T11:12:23Z", "time": "2020-10-25T11:12:23Z", "tags": [], "text": "I mean that account can be used to test HTTP MOVE, and triggers an error, if PUT+DELETE are used instead.", "attachment_id": null, "raw_text": "I mean that account can be used to test HTTP MOVE, and triggers an error, if PUT+DELETE are used instead.", "id": 15098648}]}}}