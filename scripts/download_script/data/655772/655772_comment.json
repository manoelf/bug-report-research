{"comments": {}, "bugs": {"655772": {"comments": [{"is_private": false, "tags": [], "raw_text": "+++ This bug was initially created as a clone of Bug #613274 +++\n\nLoading the galactic demo in the 2011/5/8 nightly causes my X server process to spin at 100% CPU for minutes at a time, resulting in a completely unusable desktop.  I'm running Xorg 1.9.0 with the binary NVIDIA driver version 260.19.06.\n\nI'm not sure there's a lot we can do here; more filing this bug for tracking/brainstorming purposes.  The demo itself is fundamentally wrong for shoehorning a webgl use case into canvas, and is apparently badly written to boot, but I guess it's Webby.\n\nJudging by what |top| said while I was SSH'd into the DoS'd machine, firefox-bin is staying responsive.  It looks like firefox-bin is firing off commands to Xorg that force it into very slow CPU fallback paths.  (Possibly related to the non-rectangular clips discussed in bug 613274.)\n\nIf there's nothing we can optimize within firefox-bin, I wonder if we could fire off a tracer ping to the X server to check its responsiveness, like what window managers would send to firefox-bin.  If we don't get a response within K seconds, maybe we could suspend script execution a la slow-script timeout?  A problem here is that other applications hogging the X server would trip our detector, and we can't determine with 100% certainty which particular web pages are responsible for the DoS.\n\nMaybe this is something we'll just have to wait for Wayland to fix.", "id": 5457586, "attachment_id": null, "text": "+++ This bug was initially created as a clone of Bug #613274 +++\n\nLoading the galactic demo in the 2011/5/8 nightly causes my X server process to spin at 100% CPU for minutes at a time, resulting in a completely unusable desktop.  I'm running Xorg 1.9.0 with the binary NVIDIA driver version 260.19.06.\n\nI'm not sure there's a lot we can do here; more filing this bug for tracking/brainstorming purposes.  The demo itself is fundamentally wrong for shoehorning a webgl use case into canvas, and is apparently badly written to boot, but I guess it's Webby.\n\nJudging by what |top| said while I was SSH'd into the DoS'd machine, firefox-bin is staying responsive.  It looks like firefox-bin is firing off commands to Xorg that force it into very slow CPU fallback paths.  (Possibly related to the non-rectangular clips discussed in bug 613274.)\n\nIf there's nothing we can optimize within firefox-bin, I wonder if we could fire off a tracer ping to the X server to check its responsiveness, like what window managers would send to firefox-bin.  If we don't get a response within K seconds, maybe we could suspend script execution a la slow-script timeout?  A problem here is that other applications hogging the X server would trip our detector, and we can't determine with 100% certainty which particular web pages are responsible for the DoS.\n\nMaybe this is something we'll just have to wait for Wayland to fix.", "creation_time": "2011-05-09T18:24:05Z", "time": "2011-05-09T18:24:05Z", "bug_id": 655772, "count": 0, "creator": "cjones.bugs@gmail.com", "author": "cjones.bugs@gmail.com"}, {"count": 1, "raw_text": "I also wondered about checking that the server had caught up with the requests sent for bug 559110, but I'm tempted to think the X server is the place to fix this.  Perhaps it could either push back on the client sending requests (Bug 559110 comment 12) or prioritize input events.\n\nFWIW here (X.Org X Server 1.10.1, radeon 6.14.1) the X workspace certainly slows down considerably but I can still interact with apps.", "bug_id": 655772, "is_private": false, "tags": [], "time": "2011-05-09T21:41:51Z", "creation_time": "2011-05-09T21:41:51Z", "author": "karlt@mozbugz.karlt.net", "attachment_id": null, "id": 5458180, "text": "I also wondered about checking that the server had caught up with the requests sent for bug 559110, but I'm tempted to think the X server is the place to fix this.  Perhaps it could either push back on the client sending requests (Bug 559110 comment 12) or prioritize input events.\n\nFWIW here (X.Org X Server 1.10.1, radeon 6.14.1) the X workspace certainly slows down considerably but I can still interact with apps.", "creator": "karlt@mozbugz.karlt.net"}, {"tags": [], "is_private": false, "raw_text": "Sounds like this might be a bug/missing-feature in the nvidia driver.", "text": "Sounds like this might be a bug/missing-feature in the nvidia driver.", "attachment_id": null, "id": 5458216, "creation_time": "2011-05-09T21:54:36Z", "time": "2011-05-09T21:54:36Z", "bug_id": 655772, "count": 2, "creator": "cjones.bugs@gmail.com", "author": "cjones.bugs@gmail.com"}]}}}