{"comments": {}, "bugs": {"1591259": {"comments": [{"author": "richard@torproject.org", "text": "User Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:70.0) Gecko/20100101 Firefox/70.0\n\nSteps to reproduce:\n\nLaunch stock firefox ESR68 with the preference dom.push.enabled=false\n\n\nActual results:\n\nFollowing error appears in debug console:\nuncaught exception: 2147746065 SessionStore.jsm:1325:22", "tags": [], "is_private": false, "bug_id": 1591259, "raw_text": "User Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:70.0) Gecko/20100101 Firefox/70.0\n\nSteps to reproduce:\n\nLaunch stock firefox ESR68 with the preference dom.push.enabled=false\n\n\nActual results:\n\nFollowing error appears in debug console:\nuncaught exception: 2147746065 SessionStore.jsm:1325:22", "attachment_id": null, "creator": "richard@torproject.org", "count": 0, "time": "2019-10-24T22:19:25Z", "id": 14445513, "creation_time": "2019-10-24T22:19:25Z"}, {"count": 1, "id": 14445517, "author": "richard@torproject.org", "text": "The issue does not appear to be present in latest Firefox 70. We have a bug tracking this issue here: https://trac.torproject.org/projects/tor/ticket/31573", "tags": [], "bug_id": 1591259, "raw_text": "The issue does not appear to be present in latest Firefox 70. We have a bug tracking this issue here: https://trac.torproject.org/projects/tor/ticket/31573", "creator": "richard@torproject.org", "attachment_id": null, "creation_time": "2019-10-24T22:22:08Z", "time": "2019-10-24T22:22:08Z", "is_private": false}, {"is_private": false, "creation_time": "2019-10-24T22:45:20Z", "time": "2019-10-24T22:45:20Z", "creator": "richard@torproject.org", "attachment_id": null, "raw_text": "(In reply to Richard Pospesel (Tor Browser Dev) from comment #1)\n> The issue does not appear to be present in latest Firefox 70. We have a bug tracking this issue here: https://trac.torproject.org/projects/tor/ticket/31573\n\nThis appears to have been fixed in commit 6a0111db7ba5a1a92f3eb68b89cb415bd08a4f3e", "bug_id": 1591259, "tags": [], "text": "(In reply to Richard Pospesel (Tor Browser Dev) from comment #1)\n> The issue does not appear to be present in latest Firefox 70. We have a bug tracking this issue here: https://trac.torproject.org/projects/tor/ticket/31573\n\nThis appears to have been fixed in commit 6a0111db7ba5a1a92f3eb68b89cb415bd08a4f3e", "author": "richard@torproject.org", "id": 14445548, "count": 2}, {"time": "2019-10-24T23:03:31Z", "id": 14445571, "creation_time": "2019-10-24T23:03:31Z", "count": 3, "attachment_id": null, "creator": "richard@torproject.org", "raw_text": "(In reply to Richard Pospesel (Tor Browser Dev) from comment #2)\n> (In reply to Richard Pospesel (Tor Browser Dev) from comment #1)\n> > The issue does not appear to be present in latest Firefox 70. We have a bug tracking this issue here: https://trac.torproject.org/projects/tor/ticket/31573\n> \n> This appears to have been fixed in commit 6a0111db7ba5a1a92f3eb68b89cb415bd08a4f3e\n\nWith a followup fix in 192e75e65bb32ce824c332992135aa7e9d6f246d", "bug_id": 1591259, "tags": [], "is_private": false, "text": "(In reply to Richard Pospesel (Tor Browser Dev) from comment #2)\n> (In reply to Richard Pospesel (Tor Browser Dev) from comment #1)\n> > The issue does not appear to be present in latest Firefox 70. We have a bug tracking this issue here: https://trac.torproject.org/projects/tor/ticket/31573\n> \n> This appears to have been fixed in commit 6a0111db7ba5a1a92f3eb68b89cb415bd08a4f3e\n\nWith a followup fix in 192e75e65bb32ce824c332992135aa7e9d6f246d", "author": "richard@torproject.org"}, {"time": "2019-10-24T23:15:38Z", "creation_time": "2019-10-24T23:15:38Z", "attachment_id": null, "creator": "richard@torproject.org", "raw_text": "Act", "is_private": false, "id": 14445594, "count": 4, "bug_id": 1591259, "tags": [], "text": "Act", "author": "richard@torproject.org"}, {"id": 14445596, "count": 5, "text": "Actually, after backporting the two fixes I'm still seeing this issue, and I can confirm this *does* actually happen in stock Firefox 70 as well (if you *actually* have dom.push.enabled=false)", "author": "richard@torproject.org", "bug_id": 1591259, "tags": [], "attachment_id": null, "creator": "richard@torproject.org", "raw_text": "Actually, after backporting the two fixes I'm still seeing this issue, and I can confirm this *does* actually happen in stock Firefox 70 as well (if you *actually* have dom.push.enabled=false)", "time": "2019-10-24T23:17:00Z", "creation_time": "2019-10-24T23:17:00Z", "is_private": false}, {"text": "Hi, Richard!\n\nThanks for your contribution!\n\nThere is an enhancement opened on this matter which you could check here https://bugzilla.mozilla.org/show_bug.cgi?id=1369436. \n\nSo far I couldn\u00b4t reproduce it, I am not receiving the mentioned error but please, check if the enhancement is correctly related to what you are talking about. \n\nI'll add a product and component too. Apparently this was closed a month ago but I was following the entire thread and I assume is the same issue as you mention. \n\n Please, feel free to add any comments or information if needed.\n\nRegards,", "author": "sebastian.scherer@softvision.com", "bug_id": 1591259, "tags": [], "id": 14452416, "count": 6, "is_private": false, "creator": "sebastian.scherer@softvision.com", "attachment_id": null, "raw_text": "Hi, Richard!\n\nThanks for your contribution!\n\nThere is an enhancement opened on this matter which you could check here https://bugzilla.mozilla.org/show_bug.cgi?id=1369436. \n\nSo far I couldn\u00b4t reproduce it, I am not receiving the mentioned error but please, check if the enhancement is correctly related to what you are talking about. \n\nI'll add a product and component too. Apparently this was closed a month ago but I was following the entire thread and I assume is the same issue as you mention. \n\n Please, feel free to add any comments or information if needed.\n\nRegards,", "creation_time": "2019-10-28T19:12:10Z", "time": "2019-10-28T19:12:10Z"}, {"id": 14452446, "count": 7, "text": "Hi Seba,\n\nYeah, I initially tried applying the changes (6a0111db7ba5a1a92f3eb68b89cb415bd08a4f3e and 192e75e65bb32ce824c332992135aa7e9d6f246d in gecko-dev) from #1369436 but the issue remains. The fundamental problem is that the lazyGetter for PushService throws 2147746065 (NS_ERROR_NOT_AVAILABLE) if the dom.push.enabled preference is set to false (I had not correctly diagnosed the problem when I first claimed it did not occur in latest Firefox; you have to toggle the pref to false for it to occur). This issue sill occurs in latest which is unsurprising given that there's no checking before attempting to access PushService.\n\nWe could just catch and swallow the exception where it's currently happening, but I don't know what the effects of doing so in the rest of the system may be.", "author": "richard@torproject.org", "bug_id": 1591259, "tags": [], "attachment_id": null, "creator": "richard@torproject.org", "raw_text": "Hi Seba,\n\nYeah, I initially tried applying the changes (6a0111db7ba5a1a92f3eb68b89cb415bd08a4f3e and 192e75e65bb32ce824c332992135aa7e9d6f246d in gecko-dev) from #1369436 but the issue remains. The fundamental problem is that the lazyGetter for PushService throws 2147746065 (NS_ERROR_NOT_AVAILABLE) if the dom.push.enabled preference is set to false (I had not correctly diagnosed the problem when I first claimed it did not occur in latest Firefox; you have to toggle the pref to false for it to occur). This issue sill occurs in latest which is unsurprising given that there's no checking before attempting to access PushService.\n\nWe could just catch and swallow the exception where it's currently happening, but I don't know what the effects of doing so in the rest of the system may be.", "time": "2019-10-28T19:36:16Z", "creation_time": "2019-10-28T19:36:16Z", "is_private": false}, {"time": "2019-10-31T13:34:23Z", "creation_time": "2019-10-31T13:34:23Z", "raw_text": "It looks like this is coming from BrowserGlue.jsm in this chain of events:\n- observer notification received: https://searchfox.org/mozilla-central/rev/3300072e993ae05d50d5c63d815260367eaf9179/browser/components/BrowserGlue.jsm#865\n- calls _onWindowsRestored: https://searchfox.org/mozilla-central/rev/3300072e993ae05d50d5c63d815260367eaf9179/browser/components/BrowserGlue.jsm#1984\n- calls Services.tm.idleDispatchToMainThread() of a lambda that calls PushService.wrappedJSObject.ensureReady() at https://searchfox.org/mozilla-central/rev/3300072e993ae05d50d5c63d815260367eaf9179/browser/components/BrowserGlue.jsm#2049\n\nSince it's in a lambda, it doesn't actually break anything, but the error is annoying.\n\nMoving to Firefox :: General which is what searchfox thinks BrowserGlue.jsm belongs to per in-tree mappings.", "attachment_id": null, "creator": "bugmail@asutherland.org", "is_private": false, "count": 8, "id": 14459269, "tags": [], "bug_id": 1591259, "author": "bugmail@asutherland.org", "text": "It looks like this is coming from BrowserGlue.jsm in this chain of events:\n- observer notification received: https://searchfox.org/mozilla-central/rev/3300072e993ae05d50d5c63d815260367eaf9179/browser/components/BrowserGlue.jsm#865\n- calls _onWindowsRestored: https://searchfox.org/mozilla-central/rev/3300072e993ae05d50d5c63d815260367eaf9179/browser/components/BrowserGlue.jsm#1984\n- calls Services.tm.idleDispatchToMainThread() of a lambda that calls PushService.wrappedJSObject.ensureReady() at https://searchfox.org/mozilla-central/rev/3300072e993ae05d50d5c63d815260367eaf9179/browser/components/BrowserGlue.jsm#2049\n\nSince it's in a lambda, it doesn't actually break anything, but the error is annoying.\n\nMoving to Firefox :: General which is what searchfox thinks BrowserGlue.jsm belongs to per in-tree mappings."}, {"is_private": false, "attachment_id": null, "creator": "mconley@mozilla.com", "raw_text": "Hey emalysz, this might be related to your work in bug 1584014. Do you have some cycles to help Richard figure out a way forward here?", "time": "2019-11-05T19:36:48Z", "creation_time": "2019-11-05T19:36:48Z", "text": "Hey emalysz, this might be related to your work in bug 1584014. Do you have some cycles to help Richard figure out a way forward here?", "author": "mconley@mozilla.com", "bug_id": 1591259, "tags": [], "id": 14469727, "count": 9}, {"is_private": false, "raw_text": "", "attachment_id": 9106965, "creator": "emmamalysz@gmail.com", "time": "2019-11-06T16:55:07Z", "creation_time": "2019-11-06T16:55:07Z", "author": "emmamalysz@gmail.com", "text": "Created attachment 9106965\nBug 1591259, insert catch block before accessing PushService to avoid exception during session-windows-restored", "tags": [], "bug_id": 1591259, "count": 10, "id": 14471782}, {"count": 11, "id": 14471920, "creation_time": "2019-11-06T17:52:49Z", "time": "2019-11-06T17:52:49Z", "raw_text": "Pushed by mconley@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/da87ab43340f\ninsert catch block before accessing PushService to avoid exception during session-windows-restored r=mconley", "creator": "pulsebot@bots.tld", "attachment_id": null, "is_private": false, "tags": [], "bug_id": 1591259, "author": "pulsebot@bots.tld", "text": "Pushed by mconley@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/da87ab43340f\ninsert catch block before accessing PushService to avoid exception during session-windows-restored r=mconley"}, {"count": 12, "id": 14473246, "author": "apavel@mozilla.com", "text": "https://hg.mozilla.org/mozilla-central/rev/da87ab43340f", "tags": ["bugherder"], "bug_id": 1591259, "raw_text": "https://hg.mozilla.org/mozilla-central/rev/da87ab43340f", "creator": "apavel@mozilla.com", "attachment_id": null, "creation_time": "2019-11-07T10:06:51Z", "time": "2019-11-07T10:06:51Z", "is_private": false}]}}}