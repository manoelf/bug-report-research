{"comments": {}, "bugs": {"1693833": {"comments": [{"bug_id": 1693833, "is_private": false, "raw_text": "User Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0\n\nSteps to reproduce:\n\nIn my Organizanization we have internal sites like this:\nmyserver.dev.ent\nJust enter this address in the URL bar\n\n\n\n\nActual results:\n\nFirefox modify the URL to this: myserver.dev.net\n\n\n\nExpected results:\n\nFirefox should not change the address, because is imposible to enter in sites like these. \nthe only workaround, is to add the adress in a bookmark and access from there.\n\nthe latests version where this is not happening is ESR 68.9. (I'm stuck on this version)\nI can confirm that this behavior is hapening in ESR 78+ until latest firefox release\nI dont know in which firefox specific version this new behavior has been implemented.", "creator": "silpablo@hotmail.com", "author": "silpablo@hotmail.com", "count": 0, "id": 15273266, "attachment_id": null, "text": "User Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0\n\nSteps to reproduce:\n\nIn my Organizanization we have internal sites like this:\nmyserver.dev.ent\nJust enter this address in the URL bar\n\n\n\n\nActual results:\n\nFirefox modify the URL to this: myserver.dev.net\n\n\n\nExpected results:\n\nFirefox should not change the address, because is imposible to enter in sites like these. \nthe only workaround, is to add the adress in a bookmark and access from there.\n\nthe latests version where this is not happening is ESR 68.9. (I'm stuck on this version)\nI can confirm that this behavior is hapening in ESR 78+ until latest firefox release\nI dont know in which firefox specific version this new behavior has been implemented.", "creation_time": "2021-02-19T16:11:15Z", "time": "2021-02-19T16:11:15Z", "tags": []}, {"is_private": false, "bug_id": 1693833, "creator": "release-mgmt-account-bot@mozilla.tld", "author": "release-mgmt-account-bot@mozilla.tld", "raw_text": "The [Bugbug](https://github.com/mozilla/bugbug/) bot thinks this bug should belong to the 'Firefox::Address Bar' component, and is moving the bug to that component. Please revert this change in case you think the bot is wrong.", "attachment_id": null, "id": 15273275, "count": 1, "text": "The [Bugbug](https://github.com/mozilla/bugbug/) bot thinks this bug should belong to the 'Firefox::Address Bar' component, and is moving the bug to that component. Please revert this change in case you think the bot is wrong.", "creation_time": "2021-02-19T16:18:02Z", "tags": [], "time": "2021-02-19T16:18:02Z"}, {"raw_text": "I've managed to reproduce the issue and got the following regression range:\nhttps://hg.mozilla.org/mozilla-central/pushloghtml?fromchange=a6a5a4f31ea26906e584e162b8d9485e6cacca32&tochange=272e82616218411bfb0b89ef7c710cd65830ece1\n\nlast good build: 2020-04-19\nfirst bad build: 2020-04-20\n\nThe bug that seems to have caused this is 1080682, but i'm not 100% sure.", "creator": "cristian.baica@softvision.com", "author": "cristian.baica@softvision.com", "bug_id": 1693833, "is_private": false, "count": 2, "attachment_id": null, "id": 15278473, "creation_time": "2021-02-23T13:36:09Z", "text": "I've managed to reproduce the issue and got the following regression range:\nhttps://hg.mozilla.org/mozilla-central/pushloghtml?fromchange=a6a5a4f31ea26906e584e162b8d9485e6cacca32&tochange=272e82616218411bfb0b89ef7c710cd65830ece1\n\nlast good build: 2020-04-19\nfirst bad build: 2020-04-20\n\nThe bug that seems to have caused this is 1080682, but i'm not 100% sure.", "time": "2021-02-23T13:36:09Z", "tags": []}, {"creation_time": "2021-03-01T23:56:35Z", "id": 15289420, "count": 3, "bug_id": 1693833, "creator": "adw@mozilla.com", "raw_text": "In addition to a bookmark, there are a couple of other workarounds:\n\n* Add a trailing slash when you enter the URL, e.g., `myserver.dev.ent/`\n* Tell Firefox about specific domains using `browser.fixup.domainsuffixwhitelist` hidden preferences. For example, for `myserver.dev.ent`, open about:config, search for `browser.fixup.domainsuffixwhitelist.myserver.dev.ent`, and then click the `+` button to add a boolean preference with value `true`.\n\nFirefox corrects what it thinks is a typo in your input, so that's why this happens, but it is currently the expected behavior.\n\nWe may want to modify fixup so that `ent` TLDs are passed through without fixup. It's too bad `ent` is so close to `net`. Bug 1080682 and other bugs linked in bug 1080682 have details.\n\nI don't think we have a hidden pref for TLDs, something like `browser.fixup.tldWhitelist`, but that would be another possible solution.\n\nI'll leave this bug open in case we want to investigate possible fixes. Bug 1080682 seems like the right candidate as the regressing bug, so I'll mark that too.", "tags": [], "time": "2021-03-01T23:56:35Z", "text": "In addition to a bookmark, there are a couple of other workarounds:\n\n* Add a trailing slash when you enter the URL, e.g., `myserver.dev.ent/`\n* Tell Firefox about specific domains using `browser.fixup.domainsuffixwhitelist` hidden preferences. For example, for `myserver.dev.ent`, open about:config, search for `browser.fixup.domainsuffixwhitelist.myserver.dev.ent`, and then click the `+` button to add a boolean preference with value `true`.\n\nFirefox corrects what it thinks is a typo in your input, so that's why this happens, but it is currently the expected behavior.\n\nWe may want to modify fixup so that `ent` TLDs are passed through without fixup. It's too bad `ent` is so close to `net`. Bug 1080682 and other bugs linked in bug 1080682 have details.\n\nI don't think we have a hidden pref for TLDs, something like `browser.fixup.tldWhitelist`, but that would be another possible solution.\n\nI'll leave this bug open in case we want to investigate possible fixes. Bug 1080682 seems like the right candidate as the regressing bug, so I'll mark that too.", "attachment_id": null, "is_private": false, "author": "adw@mozilla.com"}, {"creation_time": "2021-03-01T23:59:49Z", "text": "Ah wait, I got the pref wrong. If you add `browser.fixup.domainsuffixwhitelist.ent` and set it to true, that should fix `myserver.dev.ent` and any other domain with the `ent` TLD. I got confused with another set of prefs we have, `browser.fixup.domainwhitelist`, which behaves as I described earlier. (In other words, we do have `browser.fixup.tldWhitelist` as I mentioned earlier, but it's called `browser.fixup.domainsuffixwhitelist`.)", "time": "2021-03-01T23:59:49Z", "tags": [], "raw_text": "Ah wait, I got the pref wrong. If you add `browser.fixup.domainsuffixwhitelist.ent` and set it to true, that should fix `myserver.dev.ent` and any other domain with the `ent` TLD. I got confused with another set of prefs we have, `browser.fixup.domainwhitelist`, which behaves as I described earlier. (In other words, we do have `browser.fixup.tldWhitelist` as I mentioned earlier, but it's called `browser.fixup.domainsuffixwhitelist`.)", "author": "adw@mozilla.com", "creator": "adw@mozilla.com", "bug_id": 1693833, "is_private": false, "count": 4, "id": 15289423, "attachment_id": null}, {"tags": [], "time": "2021-03-02T09:34:58Z", "creation_time": "2021-03-02T09:34:58Z", "text": "(In reply to Drew Willcoxon :adw from comment #3)\n> We may want to modify fixup so that `ent` TLDs are passed through without fixup. It's too bad `ent` is so close to `net`.\n\n.ent is not a common suffix, not part of the PSL, and there's so many suffixes one can use that I don't think it's a good idea to add one that looks like a typo.\nI don't think we're going to add any exception for it.\n\nIf domainsuffixwhitelist doesn't work, then we have a bug to fix to teach fixup to consider the list before fixing up, but by code inspection it should work.\n\n(In reply to Drew Willcoxon :adw from comment #4)\n> If you add `browser.fixup.domainsuffixwhitelist.ent` and set it to true, that should fix `myserver.dev.ent` and any other domain with the `ent` TLD.\n\nThis should do in practice, and if it does, then there's no bug to fix, because it's working as intended. Firefox just needs some configuration.\n\nNote that if you have your own internal DNS server you can also use browser.fixup.dns_first_for_single_words, that will make navigation a little bit slower but always check with yout local DNS. It can also be set through GPO.\n\nPlease let us know if one of these prefs solves your troubles.", "id": 15289857, "attachment_id": null, "count": 5, "author": "mak@mozilla.com", "creator": "mak@mozilla.com", "raw_text": "(In reply to Drew Willcoxon :adw from comment #3)\n> We may want to modify fixup so that `ent` TLDs are passed through without fixup. It's too bad `ent` is so close to `net`.\n\n.ent is not a common suffix, not part of the PSL, and there's so many suffixes one can use that I don't think it's a good idea to add one that looks like a typo.\nI don't think we're going to add any exception for it.\n\nIf domainsuffixwhitelist doesn't work, then we have a bug to fix to teach fixup to consider the list before fixing up, but by code inspection it should work.\n\n(In reply to Drew Willcoxon :adw from comment #4)\n> If you add `browser.fixup.domainsuffixwhitelist.ent` and set it to true, that should fix `myserver.dev.ent` and any other domain with the `ent` TLD.\n\nThis should do in practice, and if it does, then there's no bug to fix, because it's working as intended. Firefox just needs some configuration.\n\nNote that if you have your own internal DNS server you can also use browser.fixup.dns_first_for_single_words, that will make navigation a little bit slower but always check with yout local DNS. It can also be set through GPO.\n\nPlease let us know if one of these prefs solves your troubles.", "is_private": false, "bug_id": 1693833}, {"id": 15290824, "attachment_id": null, "count": 6, "is_private": false, "bug_id": 1693833, "author": "silpablo@hotmail.com", "creator": "silpablo@hotmail.com", "raw_text": "browser.fixup.domainsuffixwhitelist.ent worked for me in firefox ESR 78.8.0\n\nI understand your comment about the expected behavior, but the real problem here is the user experience.  For a long time I've managed to use other browsers because of this.\nI am having a similar situation with the encriptation used in the cert of some sites where other browsers allow the access (with warning) but firefox not. \n\nAnyway, I really appreciatte all the help provided and any further questions or actions please let me know", "tags": [], "time": "2021-03-02T17:39:41Z", "text": "browser.fixup.domainsuffixwhitelist.ent worked for me in firefox ESR 78.8.0\n\nI understand your comment about the expected behavior, but the real problem here is the user experience.  For a long time I've managed to use other browsers because of this.\nI am having a similar situation with the encriptation used in the cert of some sites where other browsers allow the access (with warning) but firefox not. \n\nAnyway, I really appreciatte all the help provided and any further questions or actions please let me know", "creation_time": "2021-03-02T17:39:41Z"}, {"creation_time": "2021-03-02T17:41:55Z", "text": "Just a comment, In spanish \"ent\" comes from word \"Entorno\", that it means \"Environment\". that is why my organization use this short for", "tags": [], "time": "2021-03-02T17:41:55Z", "creator": "silpablo@hotmail.com", "author": "silpablo@hotmail.com", "raw_text": "Just a comment, In spanish \"ent\" comes from word \"Entorno\", that it means \"Environment\". that is why my organization use this short for", "is_private": false, "bug_id": 1693833, "attachment_id": null, "id": 15290828, "count": 7}, {"count": 8, "attachment_id": null, "id": 15290875, "raw_text": "(In reply to Dinamik from comment #6)\n> I understand your comment about the expected behavior, but the real problem here is the user experience.  For a long time I've managed to use other browsers because of this.\n\nI totally understand, but the enteprise environments are different enough from our common users environment that the only sustainable way to support both well is to provide options to customize the behavior. A common non-enteprise user would not encounter an .ent suffix and would rather mistype .net.\nOther browsers may not care and just present to the user a not found page, maybe with alternative suggestions. That may also be a valid solution.\n\n(In reply to Dinamik from comment #7)\n> Just a comment, In spanish \"ent\" comes from word \"Entorno\", that it means \"Environment\". that is why my organization use this short for\n\nThat makes sense, but it's likely every locale will then want their own special Environment suffix, and we'll have to maintain this parallel and unpredictable list of exceptions.\n\nIf the prefs work, as you said, I think this is not a bug we can fix without breaking something else. It's possible one day our not found page will be so cool that fixing typos won't be considered necessary anymore. But not today.", "author": "mak@mozilla.com", "creator": "mak@mozilla.com", "bug_id": 1693833, "is_private": false, "time": "2021-03-02T18:13:26Z", "tags": [], "creation_time": "2021-03-02T18:13:26Z", "text": "(In reply to Dinamik from comment #6)\n> I understand your comment about the expected behavior, but the real problem here is the user experience.  For a long time I've managed to use other browsers because of this.\n\nI totally understand, but the enteprise environments are different enough from our common users environment that the only sustainable way to support both well is to provide options to customize the behavior. A common non-enteprise user would not encounter an .ent suffix and would rather mistype .net.\nOther browsers may not care and just present to the user a not found page, maybe with alternative suggestions. That may also be a valid solution.\n\n(In reply to Dinamik from comment #7)\n> Just a comment, In spanish \"ent\" comes from word \"Entorno\", that it means \"Environment\". that is why my organization use this short for\n\nThat makes sense, but it's likely every locale will then want their own special Environment suffix, and we'll have to maintain this parallel and unpredictable list of exceptions.\n\nIf the prefs work, as you said, I think this is not a bug we can fix without breaking something else. It's possible one day our not found page will be so cool that fixing typos won't be considered necessary anymore. But not today."}]}}}