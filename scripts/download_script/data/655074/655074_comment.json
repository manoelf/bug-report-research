{"bugs": {"655074": {"comments": [{"attachment_id": null, "tags": [], "creation_time": "2011-05-05T17:32:40Z", "creator": "brian@interlinx.bc.ca", "raw_text": "User-Agent:       Mozilla/5.0 (X11; Linux i686) AppleWebKit/534.24 (KHTML, like Gecko) Ubuntu/10.10 Chromium/11.0.696.57 Chrome/11.0.696.57 Safari/534.24\nBuild Identifier: \n\nI have an LDAP server which allows GSSAPI authentication.  That works fine.  I can authenticate and browse/search with \"GQ\" without any problems.\n\nWith Thunderbird however, I can see using wireshark that it does initially bind with GSSAPI and it appears to be successful however subsequent searches fail.\n\nIf I change the authentication method to simple and bind with my password the search returns results.\n\nWhere should I start in debugging this?  Is there some Thunderbird side debug which will help us determine what is not working?\n\nReproducible: Always", "bug_id": 655074, "text": "User-Agent:       Mozilla/5.0 (X11; Linux i686) AppleWebKit/534.24 (KHTML, like Gecko) Ubuntu/10.10 Chromium/11.0.696.57 Chrome/11.0.696.57 Safari/534.24\nBuild Identifier: \n\nI have an LDAP server which allows GSSAPI authentication.  That works fine.  I can authenticate and browse/search with \"GQ\" without any problems.\n\nWith Thunderbird however, I can see using wireshark that it does initially bind with GSSAPI and it appears to be successful however subsequent searches fail.\n\nIf I change the authentication method to simple and bind with my password the search returns results.\n\nWhere should I start in debugging this?  Is there some Thunderbird side debug which will help us determine what is not working?\n\nReproducible: Always", "is_private": false, "count": 0, "time": "2011-05-05T17:32:40Z", "author": "brian@interlinx.bc.ca", "id": 5451401}, {"count": 1, "time": "2011-05-05T18:05:54Z", "creator": "shopik@inblock.ru", "raw_text": "You can attach pcap file from wireshark or you can follow instructions\nhttps://wiki.mozilla.org/MailNews:Logging", "text": "You can attach pcap file from wireshark or you can follow instructions\nhttps://wiki.mozilla.org/MailNews:Logging", "author": "shopik@inblock.ru", "is_private": false, "id": 5451490, "attachment_id": null, "tags": [], "creation_time": "2011-05-05T18:05:54Z", "bug_id": 655074}, {"count": 2, "time": "2011-05-05T18:13:38Z", "creator": "brian@interlinx.bc.ca", "raw_text": "NSPR_LOG_MODULES=ldap:5 didn't seem to yield anything terribly useful:\n\n-1324213392[a094f2f0]: nsLDAPConnection::Run() entered\n-1216943440[b750f060]: pending operation added; total pending operations now = 1\n-1324213392[a094f2f0]: nsLDAPConnection::RemovePendingOperation(): operation removed; total pending operations now = 0\n-1324213392[a094f2f0]: pending operation added; total pending operations now = 1\n-1324213392[a094f2f0]: nsLDAPConnection::RemovePendingOperation(): operation removed; total pending operations now = 0\n-1324213392[a094f2f0]: pending operation added; total pending operations now = 1\n-1324213392[a094f2f0]: pending operation removed; total pending operations now = 0\n-1454376080[a48f9f50]: nsLDAPConnection::Run() entered\n-1216943440[b750f060]: pending operation added; total pending operations now = 1\n-1454376080[a48f9f50]: nsLDAPConnection::RemovePendingOperation(): operation removed; total pending operations now = 0\n-1454376080[a48f9f50]: pending operation added; total pending operations now = 1\n-1454376080[a48f9f50]: nsLDAPConnection::RemovePendingOperation(): operation removed; total pending operations now = 0\n-1454376080[a48f9f50]: pending operation added; total pending operations now = 1\n-1454376080[a48f9f50]: pending operation removed; total pending operations now = 0\n-1324213392[a094f2f0]: unbinding\n-1324213392[a094f2f0]: unbound\n-1454376080[a48f9f50]: unbinding\n-1454376080[a48f9f50]: unbound", "text": "NSPR_LOG_MODULES=ldap:5 didn't seem to yield anything terribly useful:\n\n-1324213392[a094f2f0]: nsLDAPConnection::Run() entered\n-1216943440[b750f060]: pending operation added; total pending operations now = 1\n-1324213392[a094f2f0]: nsLDAPConnection::RemovePendingOperation(): operation removed; total pending operations now = 0\n-1324213392[a094f2f0]: pending operation added; total pending operations now = 1\n-1324213392[a094f2f0]: nsLDAPConnection::RemovePendingOperation(): operation removed; total pending operations now = 0\n-1324213392[a094f2f0]: pending operation added; total pending operations now = 1\n-1324213392[a094f2f0]: pending operation removed; total pending operations now = 0\n-1454376080[a48f9f50]: nsLDAPConnection::Run() entered\n-1216943440[b750f060]: pending operation added; total pending operations now = 1\n-1454376080[a48f9f50]: nsLDAPConnection::RemovePendingOperation(): operation removed; total pending operations now = 0\n-1454376080[a48f9f50]: pending operation added; total pending operations now = 1\n-1454376080[a48f9f50]: nsLDAPConnection::RemovePendingOperation(): operation removed; total pending operations now = 0\n-1454376080[a48f9f50]: pending operation added; total pending operations now = 1\n-1454376080[a48f9f50]: pending operation removed; total pending operations now = 0\n-1324213392[a094f2f0]: unbinding\n-1324213392[a094f2f0]: unbound\n-1454376080[a48f9f50]: unbinding\n-1454376080[a48f9f50]: unbound", "author": "brian@interlinx.bc.ca", "is_private": false, "id": 5451506, "attachment_id": null, "tags": [], "creation_time": "2011-05-05T18:13:38Z", "bug_id": 655074}, {"creator": "shopik@inblock.ru", "raw_text": "Yep, so it's better to see what's going during binding, can you attach pcap file? What LDAP server you are connecting to?", "attachment_id": null, "creation_time": "2011-05-05T18:15:27Z", "tags": [], "text": "Yep, so it's better to see what's going during binding, can you attach pcap file? What LDAP server you are connecting to?", "bug_id": 655074, "count": 3, "time": "2011-05-05T18:15:27Z", "author": "shopik@inblock.ru", "is_private": false, "id": 5451514}, {"count": 4, "author": "brian@interlinx.bc.ca", "time": "2011-05-05T18:20:06Z", "is_private": false, "id": 5451526, "creator": "brian@interlinx.bc.ca", "raw_text": "Well, I am sure you can understand how I am reluctant to post a network trace complete with authentication credentials in it right?\n\nLDAP server is OpenLDAP.", "attachment_id": null, "tags": [], "creation_time": "2011-05-05T18:20:06Z", "text": "Well, I am sure you can understand how I am reluctant to post a network trace complete with authentication credentials in it right?\n\nLDAP server is OpenLDAP.", "bug_id": 655074}, {"id": 5451549, "is_private": false, "count": 5, "author": "shopik@inblock.ru", "time": "2011-05-05T18:27:09Z", "bug_id": 655074, "text": "You can send it to me privately. And you do know how GSSAPI work right, no clear password is sent during this negotiation. If you still afraid to do this just do cap and save file, change you password.", "attachment_id": null, "creation_time": "2011-05-05T18:27:09Z", "tags": [], "creator": "shopik@inblock.ru", "raw_text": "You can send it to me privately. And you do know how GSSAPI work right, no clear password is sent during this negotiation. If you still afraid to do this just do cap and save file, change you password."}, {"bug_id": 655074, "creation_time": "2011-05-05T18:34:26Z", "tags": [], "attachment_id": null, "id": 5451576, "is_private": false, "author": "brian@interlinx.bc.ca", "text": "Sent privately.  And yes, I do know that in theory, no clear-text password is sent over the wire, but just because I'm paranoid doesn't mean everyone isn't out to get me.  :-)", "raw_text": "Sent privately.  And yes, I do know that in theory, no clear-text password is sent over the wire, but just because I'm paranoid doesn't mean everyone isn't out to get me.  :-)", "creator": "brian@interlinx.bc.ca", "time": "2011-05-05T18:34:26Z", "count": 6}, {"bug_id": 655074, "attachment_id": null, "tags": [], "creation_time": "2011-05-05T18:40:45Z", "id": 5451597, "is_private": false, "author": "shopik@inblock.ru", "text": "Here is detailed error from OpenLDAP\nLDAPMessage bindResponse(3) insufficientAccessRights (SASL(-14): authorization failure: Inappropriate authentication)\n\nI think there maybe some misconfiguration of GSSAPI or some accessRights wrong in OpenLDAP can't sure not familiar with OpenLDAP really.", "creator": "shopik@inblock.ru", "raw_text": "Here is detailed error from OpenLDAP\nLDAPMessage bindResponse(3) insufficientAccessRights (SASL(-14): authorization failure: Inappropriate authentication)\n\nI think there maybe some misconfiguration of GSSAPI or some accessRights wrong in OpenLDAP can't sure not familiar with OpenLDAP really.", "count": 7, "time": "2011-05-05T18:40:45Z"}, {"count": 8, "time": "2011-05-05T18:47:38Z", "creator": "brian@interlinx.bc.ca", "raw_text": "Right.  I saw that too of course, but as I mentioned previously, both GQ and Evolution have no problem with this exact same server for the exact same user.  Thunderbird appears to be the odd-man out here.", "text": "Right.  I saw that too of course, but as I mentioned previously, both GQ and Evolution have no problem with this exact same server for the exact same user.  Thunderbird appears to be the odd-man out here.", "is_private": false, "author": "brian@interlinx.bc.ca", "id": 5451621, "attachment_id": null, "creation_time": "2011-05-05T18:47:38Z", "tags": [], "bug_id": 655074}, {"id": 5451631, "author": "shopik@inblock.ru", "is_private": false, "bug_id": 655074, "creation_time": "2011-05-05T18:51:06Z", "tags": [], "attachment_id": null, "time": "2011-05-05T18:51:06Z", "count": 9, "text": "Can you bind with your server using ldapsearch?\nldapsearch  -LLL -b 'dc=example,dc=com' '(givenname=Murrell)' cn", "raw_text": "Can you bind with your server using ldapsearch?\nldapsearch  -LLL -b 'dc=example,dc=com' '(givenname=Murrell)' cn", "creator": "shopik@inblock.ru"}, {"count": 10, "time": "2011-05-05T19:18:19Z", "author": "brian@interlinx.bc.ca", "is_private": false, "id": 5451708, "creator": "brian@interlinx.bc.ca", "raw_text": "$ ldapsearch -LLL -b 'ou=People,dc=example,dc=com' '(uid=brian)' cn\nSASL/GSSAPI authentication started\nSASL username: brian@ILINX\nSASL SSF: 56\nSASL data security layer installed.\ndn: uid=brian,ou=People,dc=example,dc=com\ncn: Brian J. Murrell", "attachment_id": null, "creation_time": "2011-05-05T19:18:19Z", "tags": [], "text": "$ ldapsearch -LLL -b 'ou=People,dc=example,dc=com' '(uid=brian)' cn\nSASL/GSSAPI authentication started\nSASL username: brian@ILINX\nSASL SSF: 56\nSASL data security layer installed.\ndn: uid=brian,ou=People,dc=example,dc=com\ncn: Brian J. Murrell", "bug_id": 655074}, {"id": 5451744, "author": "shopik@inblock.ru", "is_private": false, "bug_id": 655074, "attachment_id": null, "tags": [], "creation_time": "2011-05-05T19:35:27Z", "count": 11, "time": "2011-05-05T19:35:27Z", "text": "Looks good I assume you are using 3.1.10 release. Because I having problem right now with LDAP gssapi with Mozilla/5.0 (Windows NT 6.1; WOW64; rv:5.0a2) Gecko/20110505 Thunderbird/3.3a4pre. Little different from yours but this could be some regression anyway.", "creator": "shopik@inblock.ru", "raw_text": "Looks good I assume you are using 3.1.10 release. Because I having problem right now with LDAP gssapi with Mozilla/5.0 (Windows NT 6.1; WOW64; rv:5.0a2) Gecko/20110505 Thunderbird/3.3a4pre. Little different from yours but this could be some regression anyway."}, {"text": "3.1.8 in fact.", "creator": "brian@interlinx.bc.ca", "raw_text": "3.1.8 in fact.", "count": 12, "time": "2011-05-05T19:37:02Z", "bug_id": 655074, "attachment_id": null, "creation_time": "2011-05-05T19:37:02Z", "tags": [], "id": 5451750, "is_private": false, "author": "brian@interlinx.bc.ca"}, {"text": "It seems your third bind request in pcap file isn't complete it doesn't contain  GSSAPI krb5_blob section, thus OpenLDAP complain about that. It just have there mechanism and credentials. This is need more attention who familiar with Kerberos code in TB.", "bug_id": 655074, "raw_text": "It seems your third bind request in pcap file isn't complete it doesn't contain  GSSAPI krb5_blob section, thus OpenLDAP complain about that. It just have there mechanism and credentials. This is need more attention who familiar with Kerberos code in TB.", "creator": "shopik@inblock.ru", "tags": [], "creation_time": "2011-05-05T19:50:55Z", "attachment_id": null, "id": 5451789, "time": "2011-05-05T19:50:55Z", "author": "shopik@inblock.ru", "count": 13, "is_private": false}, {"creator": "amessina@messinet.com", "raw_text": "I am finding this same issue with Thunderbird 13.0.1 on Fedora 17 x86_64:\n\n~]$ export NSPR_LOG_MODULES=\"ldap:10,gssapi:10,ldapautocomplete:10,negotiateauth:10\"\n~]$ thunderbird -addressbook -safe-mode\n-424626368[7f2de6921590]: entering nsAuthGSSAPI::nsAuthGSSAPI()\n-424626368[7f2de6921590]: Attempting to load gss functions\n-424626368[7f2de6921590]: entering nsAuthGSSAPI::Init()\n-424626368[7f2de6921590]: entering nsAuthGSSAPI::GetNextToken()\n-424626368[7f2de6921590]:   leaving nsAuthGSSAPI::GetNextToken [rv=0]\n-424626368[7f2de6921590]: pending operation added; total pending operations now = 1\n-1044388096[7f2dc3632120]: nsLDAPConnection::RemovePendingOperation(): operation removed\n-1044388096[7f2dc3632120]: nsLDAPConnection::RemovePendingOperation(): operation removed; total pending operations now = 0\n-1044388096[7f2dc3632120]: entering nsAuthGSSAPI::GetNextToken()\n-1044388096[7f2dc3632120]:   leaving nsAuthGSSAPI::GetNextToken [rv=4b0028]\n-1044388096[7f2dc3632120]: pending operation added; total pending operations now = 1\n-1044388096[7f2dc3632120]: nsLDAPConnection::RemovePendingOperation(): operation removed\n-1044388096[7f2dc3632120]: nsLDAPConnection::RemovePendingOperation(): operation removed; total pending operations now = 0\n-1044388096[7f2dc3632120]: pending operation added; total pending operations now = 1\n-1044388096[7f2dc3632120]: pending operation removed; total pending operations now = 0\n-424626368[7f2de6921590]: entering nsAuthGSSAPI::nsAuthGSSAPI()\n-424626368[7f2de6921590]: entering nsAuthGSSAPI::Init()\n-424626368[7f2de6921590]: entering nsAuthGSSAPI::GetNextToken()\n-424626368[7f2de6921590]:   leaving nsAuthGSSAPI::GetNextToken [rv=0]\n-424626368[7f2de6921590]: pending operation added; total pending operations now = 1\n-1044388096[7f2dc3632120]: nsLDAPConnection::RemovePendingOperation(): operation removed\n-1044388096[7f2dc3632120]: nsLDAPConnection::RemovePendingOperation(): operation removed; total pending operations now = 0\n-1044388096[7f2dc3632120]: entering nsAuthGSSAPI::GetNextToken()\n-1044388096[7f2dc3632120]:   leaving nsAuthGSSAPI::GetNextToken [rv=4b0028]\n-1044388096[7f2dc3632120]: pending operation added; total pending operations now = 1\n-1044388096[7f2dc3632120]: nsLDAPConnection::RemovePendingOperation(): operation removed\n-1044388096[7f2dc3632120]: nsLDAPConnection::RemovePendingOperation(): operation removed; total pending operations now = 0\n-1044388096[7f2dc3632120]: pending operation added; total pending operations now = 1\n-1044388096[7f2dc3632120]: pending operation removed; total pending operations now = 0\n\nI am using the 389 Directory Server (http://port389.org) and command line ldapsearch has no issue finding all of my contacts.", "text": "I am finding this same issue with Thunderbird 13.0.1 on Fedora 17 x86_64:\n\n~]$ export NSPR_LOG_MODULES=\"ldap:10,gssapi:10,ldapautocomplete:10,negotiateauth:10\"\n~]$ thunderbird -addressbook -safe-mode\n-424626368[7f2de6921590]: entering nsAuthGSSAPI::nsAuthGSSAPI()\n-424626368[7f2de6921590]: Attempting to load gss functions\n-424626368[7f2de6921590]: entering nsAuthGSSAPI::Init()\n-424626368[7f2de6921590]: entering nsAuthGSSAPI::GetNextToken()\n-424626368[7f2de6921590]:   leaving nsAuthGSSAPI::GetNextToken [rv=0]\n-424626368[7f2de6921590]: pending operation added; total pending operations now = 1\n-1044388096[7f2dc3632120]: nsLDAPConnection::RemovePendingOperation(): operation removed\n-1044388096[7f2dc3632120]: nsLDAPConnection::RemovePendingOperation(): operation removed; total pending operations now = 0\n-1044388096[7f2dc3632120]: entering nsAuthGSSAPI::GetNextToken()\n-1044388096[7f2dc3632120]:   leaving nsAuthGSSAPI::GetNextToken [rv=4b0028]\n-1044388096[7f2dc3632120]: pending operation added; total pending operations now = 1\n-1044388096[7f2dc3632120]: nsLDAPConnection::RemovePendingOperation(): operation removed\n-1044388096[7f2dc3632120]: nsLDAPConnection::RemovePendingOperation(): operation removed; total pending operations now = 0\n-1044388096[7f2dc3632120]: pending operation added; total pending operations now = 1\n-1044388096[7f2dc3632120]: pending operation removed; total pending operations now = 0\n-424626368[7f2de6921590]: entering nsAuthGSSAPI::nsAuthGSSAPI()\n-424626368[7f2de6921590]: entering nsAuthGSSAPI::Init()\n-424626368[7f2de6921590]: entering nsAuthGSSAPI::GetNextToken()\n-424626368[7f2de6921590]:   leaving nsAuthGSSAPI::GetNextToken [rv=0]\n-424626368[7f2de6921590]: pending operation added; total pending operations now = 1\n-1044388096[7f2dc3632120]: nsLDAPConnection::RemovePendingOperation(): operation removed\n-1044388096[7f2dc3632120]: nsLDAPConnection::RemovePendingOperation(): operation removed; total pending operations now = 0\n-1044388096[7f2dc3632120]: entering nsAuthGSSAPI::GetNextToken()\n-1044388096[7f2dc3632120]:   leaving nsAuthGSSAPI::GetNextToken [rv=4b0028]\n-1044388096[7f2dc3632120]: pending operation added; total pending operations now = 1\n-1044388096[7f2dc3632120]: nsLDAPConnection::RemovePendingOperation(): operation removed\n-1044388096[7f2dc3632120]: nsLDAPConnection::RemovePendingOperation(): operation removed; total pending operations now = 0\n-1044388096[7f2dc3632120]: pending operation added; total pending operations now = 1\n-1044388096[7f2dc3632120]: pending operation removed; total pending operations now = 0\n\nI am using the 389 Directory Server (http://port389.org) and command line ldapsearch has no issue finding all of my contacts.", "count": 14, "time": "2012-06-27T12:38:40Z", "attachment_id": null, "creation_time": "2012-06-27T12:38:40Z", "tags": [], "bug_id": 655074, "is_private": false, "author": "amessina@messinet.com", "id": 6426729}, {"id": 6426741, "is_private": false, "author": "ludovic@hirlimann.net", "bug_id": 655074, "attachment_id": null, "tags": [], "creation_time": "2012-06-27T12:44:20Z", "count": 15, "time": "2012-06-27T12:44:20Z", "text": "*** Bug 768854 has been marked as a duplicate of this bug. ***", "creator": "ludovic@hirlimann.net", "raw_text": ""}, {"time": "2015-03-02T18:30:15Z", "author": "karl@kornel.us", "count": 16, "is_private": false, "id": 9974840, "raw_text": "Hello!\n\nI can confirm that GSSAPI binding to an LDAP server is still not working.  I tested on Thunderbird 31.5, 36.0b1, and 38.0a2.  In all 3 cases, Thunderbird reports the same messages to what was shown in comment 14.  When I look at a packet capture, I see that Thunderbird starts the binding process OK, but eventually fails with the following error from the LDAP server:\n\n> generic failure: protocol violation: client requested invalid layer\n\nOne interesting note:  If I turn on SSL, it looks like the bind works!  I am not able to look into the traffic with Wireshark anymore, but Thunderbird's debugging shows that it has moved on to searching.  I don't get any results from my query, but I think that's a different issue.", "creator": "karl@kornel.us", "creation_time": "2015-03-02T18:30:15Z", "tags": [], "attachment_id": null, "text": "Hello!\n\nI can confirm that GSSAPI binding to an LDAP server is still not working.  I tested on Thunderbird 31.5, 36.0b1, and 38.0a2.  In all 3 cases, Thunderbird reports the same messages to what was shown in comment 14.  When I look at a packet capture, I see that Thunderbird starts the binding process OK, but eventually fails with the following error from the LDAP server:\n\n> generic failure: protocol violation: client requested invalid layer\n\nOne interesting note:  If I turn on SSL, it looks like the bind works!  I am not able to look into the traffic with Wireshark anymore, but Thunderbird's debugging shows that it has moved on to searching.  I don't get any results from my query, but I think that's a different issue.", "bug_id": 655074}, {"text": "Here's the debug output Thunderbird provides when NSPR_LOG_MODULES is set to \"ldap:10,gssapi:10,negotiateauth:10\":\n\n-216611040[7fe5f1e3b260]: entering nsAuthGSSAPI::nsAuthGSSAPI()\n-216611040[7fe5f1e3b260]: Attempting to load gss functions\n-216611040[7fe5f1e3b260]: entering nsAuthGSSAPI::Init()\n-216611040[7fe5f1e3b260]: entering nsAuthGSSAPI::GetNextToken()\n-216611040[7fe5f1e3b260]:   leaving nsAuthGSSAPI::GetNextToken [rv=0]\n-216611040[7fe5f1e3b260]: pending operation added; total pending operations now = 1\n-1101060352[7fe5ca941b80]: nsLDAPConnection::RemovePendingOperation(): operation removed\n-1101060352[7fe5ca941b80]: nsLDAPConnection::RemovePendingOperation(): operation removed; total pending operations now = 0\n-1101060352[7fe5ca941b80]: entering nsAuthGSSAPI::GetNextToken()\n-1101060352[7fe5ca941b80]:   leaving nsAuthGSSAPI::GetNextToken [rv=4b0028]\n-1101060352[7fe5ca941b80]: pending operation added; total pending operations now = 1\n-1101060352[7fe5ca941b80]: nsLDAPConnection::RemovePendingOperation(): operation removed\n-1101060352[7fe5ca941b80]: nsLDAPConnection::RemovePendingOperation(): operation removed; total pending operations now = 0\n-1101060352[7fe5ca941b80]: pending operation added; total pending operations now = 1\n-1101060352[7fe5ca941b80]: pending operation removed; total pending operations now = 0\n-216611040[7fe5f1e3b260]: nsLDAPOperation::SearchExt(): called with aBaseDn = 'cn=people,dc=stanford,dc=edu'; aFilter = '(&(|(mail=*NAME_HERE*)(cn=*NAME_HERE*)(givenName=*NAME_HERE*)(sn=*NAME_HERE*)))'; aAttributes = mozillaUseHtmlMail,xmozillausehtmlmail,description,notes,telephoneNumber,title,sn,surname,mozillaHomeLocalityName,o,company,givenName,mozillaHomeState,mail,mozillaWorkUrl,workurl,labeledURI,mozillaNickname,xmozillanickname,nsAIMid,nscpaimscreenname,mozillaHomeStreet2,mobile,cellphone,carphone,modifytimestamp,birthmonth,facsimiletelephonenumber,fax,birthyear,c,countryname,mozillaHomeStreet,ou,department,departmentnumber,orgunit,mozillaSecondEmail,xmozillasecondemail,postalCode,zip,mozillaCustom1,custom1,mozillaHomeCountryName,homePhone,st,region,mozillaCustom2,custom2,pager,pagerphone,mozillaHomePostalCode,mozillaCustom3,custom3,birthday,street,streetaddress,postOfficeBox,mozillaCustom4,custom4,mozillaHomeUrl,homeurl,l,locality,cn,commonname,mozillaWorkStreet2,objectClass; aSizeLimit = 100\n-216611040[7fe5f1e3b260]: pending operation added; total pending operations now = 1\n-1101060352[7fe5ca941b80]: pending operation removed; total pending operations now = 0\n\nI replaced the name I was searching for with \"NAME_HERE\".\n\nI am not able to provide any pcap, because the above results were obtained using SSL.", "bug_id": 655074, "creator": "karl@kornel.us", "raw_text": "Here's the debug output Thunderbird provides when NSPR_LOG_MODULES is set to \"ldap:10,gssapi:10,negotiateauth:10\":\n\n-216611040[7fe5f1e3b260]: entering nsAuthGSSAPI::nsAuthGSSAPI()\n-216611040[7fe5f1e3b260]: Attempting to load gss functions\n-216611040[7fe5f1e3b260]: entering nsAuthGSSAPI::Init()\n-216611040[7fe5f1e3b260]: entering nsAuthGSSAPI::GetNextToken()\n-216611040[7fe5f1e3b260]:   leaving nsAuthGSSAPI::GetNextToken [rv=0]\n-216611040[7fe5f1e3b260]: pending operation added; total pending operations now = 1\n-1101060352[7fe5ca941b80]: nsLDAPConnection::RemovePendingOperation(): operation removed\n-1101060352[7fe5ca941b80]: nsLDAPConnection::RemovePendingOperation(): operation removed; total pending operations now = 0\n-1101060352[7fe5ca941b80]: entering nsAuthGSSAPI::GetNextToken()\n-1101060352[7fe5ca941b80]:   leaving nsAuthGSSAPI::GetNextToken [rv=4b0028]\n-1101060352[7fe5ca941b80]: pending operation added; total pending operations now = 1\n-1101060352[7fe5ca941b80]: nsLDAPConnection::RemovePendingOperation(): operation removed\n-1101060352[7fe5ca941b80]: nsLDAPConnection::RemovePendingOperation(): operation removed; total pending operations now = 0\n-1101060352[7fe5ca941b80]: pending operation added; total pending operations now = 1\n-1101060352[7fe5ca941b80]: pending operation removed; total pending operations now = 0\n-216611040[7fe5f1e3b260]: nsLDAPOperation::SearchExt(): called with aBaseDn = 'cn=people,dc=stanford,dc=edu'; aFilter = '(&(|(mail=*NAME_HERE*)(cn=*NAME_HERE*)(givenName=*NAME_HERE*)(sn=*NAME_HERE*)))'; aAttributes = mozillaUseHtmlMail,xmozillausehtmlmail,description,notes,telephoneNumber,title,sn,surname,mozillaHomeLocalityName,o,company,givenName,mozillaHomeState,mail,mozillaWorkUrl,workurl,labeledURI,mozillaNickname,xmozillanickname,nsAIMid,nscpaimscreenname,mozillaHomeStreet2,mobile,cellphone,carphone,modifytimestamp,birthmonth,facsimiletelephonenumber,fax,birthyear,c,countryname,mozillaHomeStreet,ou,department,departmentnumber,orgunit,mozillaSecondEmail,xmozillasecondemail,postalCode,zip,mozillaCustom1,custom1,mozillaHomeCountryName,homePhone,st,region,mozillaCustom2,custom2,pager,pagerphone,mozillaHomePostalCode,mozillaCustom3,custom3,birthday,street,streetaddress,postOfficeBox,mozillaCustom4,custom4,mozillaHomeUrl,homeurl,l,locality,cn,commonname,mozillaWorkStreet2,objectClass; aSizeLimit = 100\n-216611040[7fe5f1e3b260]: pending operation added; total pending operations now = 1\n-1101060352[7fe5ca941b80]: pending operation removed; total pending operations now = 0\n\nI replaced the name I was searching for with \"NAME_HERE\".\n\nI am not able to provide any pcap, because the above results were obtained using SSL.", "attachment_id": null, "creation_time": "2015-03-02T18:32:59Z", "tags": [], "id": 9974858, "count": 17, "time": "2015-03-02T18:32:59Z", "author": "karl@kornel.us", "is_private": false}]}}, "comments": {}}