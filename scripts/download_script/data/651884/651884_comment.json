{"bugs": {"651884": {"comments": [{"attachment_id": 527559, "is_private": false, "time": "2011-04-21T16:33:35Z", "author": "mh+mozilla@glandium.org", "creation_time": "2011-04-21T16:33:35Z", "text": "Created attachment 527559\nTest extension\n\nOne way I found to alleviate the effects of bug 650968 is to use the load event on the XUL window to set the background image instead of having the background set directly from the binding.\n\nThe problem is that, on Linux, the window contents are not displayed until that background image has been loaded.\n\nWhat is even more interesting is that the same XUL window, when loaded in the browser view, does display before the background image is loaded.\n\nI'm attaching a test extension that provides chrome://test/content/test.xul.\n- When loading that url through the url bar, you can first see the blue background while the image is being loaded, and then the red background being shown.\n- When loading with firefox -chrome chrome://..., the window only shows up when the background image has been loaded.\nOn Windows and Mac, both cases do the former.", "id": 5424217, "raw_text": "One way I found to alleviate the effects of bug 650968 is to use the load event on the XUL window to set the background image instead of having the background set directly from the binding.\n\nThe problem is that, on Linux, the window contents are not displayed until that background image has been loaded.\n\nWhat is even more interesting is that the same XUL window, when loaded in the browser view, does display before the background image is loaded.\n\nI'm attaching a test extension that provides chrome://test/content/test.xul.\n- When loading that url through the url bar, you can first see the blue background while the image is being loaded, and then the red background being shown.\n- When loading with firefox -chrome chrome://..., the window only shows up when the background image has been loaded.\nOn Windows and Mac, both cases do the former.", "creator": "mh+mozilla@glandium.org", "count": 0, "tags": [], "bug_id": 651884}, {"author": "kairo@kairo.at", "creator": "kairo@kairo.at", "tags": [], "count": 1, "bug_id": 651884, "id": 5601553, "raw_text": "Does that also apply to Android (I guess it does to maemo/MeeGo)? If so, fixing this might make startup *feel* faster there, which would be quite helpful experience-wise...", "creation_time": "2011-07-20T13:55:38Z", "text": "Does that also apply to Android (I guess it does to maemo/MeeGo)? If so, fixing this might make startup *feel* faster there, which would be quite helpful experience-wise...", "attachment_id": null, "time": "2011-07-20T13:55:38Z", "is_private": false}, {"attachment_id": null, "is_private": false, "time": "2011-07-20T14:23:51Z", "author": "mh+mozilla@glandium.org", "raw_text": "(In reply to comment #1)\n> Does that also apply to Android (I guess it does to maemo/MeeGo)? If so,\n> fixing this might make startup *feel* faster there, which would be quite\n> helpful experience-wise...\n\nAFAIK, it doesn't. This is probably a gtk widget problem.", "id": 5601635, "text": "(In reply to comment #1)\n> Does that also apply to Android (I guess it does to maemo/MeeGo)? If so,\n> fixing this might make startup *feel* faster there, which would be quite\n> helpful experience-wise...\n\nAFAIK, it doesn't. This is probably a gtk widget problem.", "creation_time": "2011-07-20T14:23:51Z", "bug_id": 651884, "creator": "mh+mozilla@glandium.org", "tags": [], "count": 2}, {"id": 6444574, "raw_text": "Should we do the same for GTK as we did for Windows in bug 594821? Something like this inserted at the end of nsWindow::Show() seems to work somehow:\n\n> if (mGdkWindow && aState) {\n>     // invalidate the window\n>     gdk_window_invalidate_rect(mGdkWindow, NULL, false);\n>     // force a sync update\n>     gdk_window_process_updates(mGdkWindow, false);\n> }\n\n... but instead of seeing the blue background the window comes up earlier but distorted. Also, nsWindow::OnExposeEvent() returns early because mHasMappedToplevel=false (I just commented it out for testing).", "is_private": false, "creation_time": "2012-07-04T13:27:46Z", "text": "Should we do the same for GTK as we did for Windows in bug 594821? Something like this inserted at the end of nsWindow::Show() seems to work somehow:\n\n> if (mGdkWindow && aState) {\n>     // invalidate the window\n>     gdk_window_invalidate_rect(mGdkWindow, NULL, false);\n>     // force a sync update\n>     gdk_window_process_updates(mGdkWindow, false);\n> }\n\n... but instead of seeing the blue background the window comes up earlier but distorted. Also, nsWindow::OnExposeEvent() returns early because mHasMappedToplevel=false (I just commented it out for testing).", "tags": [], "time": "2012-07-04T13:27:46Z", "creator": "ttaubert@mozilla.com", "count": 3, "bug_id": 651884, "attachment_id": null, "author": "ttaubert@mozilla.com"}]}}, "comments": {}}