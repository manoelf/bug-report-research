{"bugs": {"1634691": {"comments": [{"time": "2020-05-01T14:01:48Z", "creator": "mjzffr@gmail.com", "tags": [], "count": 0, "creation_time": "2020-05-01T14:01:48Z", "raw_text": "It already returns early for data: and about: schemes, so this just expands the condition.\n\nOtherwise the command times out because the current implementation is waiting for events that don't occur in these cases.\n\nThis at least makes the command usable for file:// etc while follow-up bugs get fixed (such as Bug 1634690)", "bug_id": 1634691, "is_private": false, "text": "It already returns early for data: and about: schemes, so this just expands the condition.\n\nOtherwise the command times out because the current implementation is waiting for events that don't occur in these cases.\n\nThis at least makes the command usable for file:// etc while follow-up bugs get fixed (such as Bug 1634690)", "author": "mjzffr@gmail.com", "id": 14791095, "attachment_id": null}, {"text": "While writing a test for file urls, I saw RemoteAgent.close() hit an error in test teardown because a destructor was unable to look up the id of a target to clean up. For some reason, that target did not have a browsing context id. (Perhaps it wasn't fully initialized after file:// navigation?)\n\nhttps://treeherder.mozilla.org/logviewer.html#/jobs?job_id=300284517&repo=try&lineNumber=4798\n\nExcerpt:\n\n```\nRemoteAgent\tERROR\tunable to stop listener: TypeError: can't access property \"id\", this.browsingContext is null(chrome://remote/content/targets/TabTarget.jsm:55:5) JS Stack trace: get id@TabTarget.jsm:55:5\ndestroyTarget@TargetList.jsm:104:5\ndestructor@TargetList.jsm:114:12\nclose@RemoteAgent.jsm:115:22\nfn@head.js:90:25\nAsync*Tester_execTest/<@browser-test.js:1039:34\nasync*Tester_execTest@browser-test.js:1074:11\nnextTest/<@browser-test.js:904:14\nSimpleTest.waitForFocus/waitForFocusInner/focusedOrLoaded/<@SimpleTest.js:918:23\n!!! could not start server on port 9222: [Exception... \"Component returned failure code: 0x804b0036 (NS_ERROR_SOCKET_ADDRESS_IN_USE) [nsIServerSocket.init]\"  nsresult: \"0x804b0036 (NS_ERROR_SOCKET_ADDRESS_IN_USE)\"  location: \"JS frame :: chrome://remote/content/server/HTTPD.jsm :: _start :: line 567\"  data: no]\n1588278702525\tRemoteAgent\tERROR\tunable to stop listener: [Exception... \"Unexpected error\"  nsresult: \"0x8000ffff (NS_ERROR_UNEXPECTED)\"  location: \"JS frame :: chrome://remote/content/server/HTTPD.jsm :: stop :: line 621\"  data: no] Stack trace: stop()@HTTPD.jsm:621\nclose()@RemoteAgent.jsm:119\nasyncListen()@RemoteAgent.jsm:100\n```", "id": 14791115, "author": "mjzffr@gmail.com", "attachment_id": null, "bug_id": 1634691, "is_private": false, "count": 1, "creation_time": "2020-05-01T14:14:47Z", "raw_text": "While writing a test for file urls, I saw RemoteAgent.close() hit an error in test teardown because a destructor was unable to look up the id of a target to clean up. For some reason, that target did not have a browsing context id. (Perhaps it wasn't fully initialized after file:// navigation?)\n\nhttps://treeherder.mozilla.org/logviewer.html#/jobs?job_id=300284517&repo=try&lineNumber=4798\n\nExcerpt:\n\n```\nRemoteAgent\tERROR\tunable to stop listener: TypeError: can't access property \"id\", this.browsingContext is null(chrome://remote/content/targets/TabTarget.jsm:55:5) JS Stack trace: get id@TabTarget.jsm:55:5\ndestroyTarget@TargetList.jsm:104:5\ndestructor@TargetList.jsm:114:12\nclose@RemoteAgent.jsm:115:22\nfn@head.js:90:25\nAsync*Tester_execTest/<@browser-test.js:1039:34\nasync*Tester_execTest@browser-test.js:1074:11\nnextTest/<@browser-test.js:904:14\nSimpleTest.waitForFocus/waitForFocusInner/focusedOrLoaded/<@SimpleTest.js:918:23\n!!! could not start server on port 9222: [Exception... \"Component returned failure code: 0x804b0036 (NS_ERROR_SOCKET_ADDRESS_IN_USE) [nsIServerSocket.init]\"  nsresult: \"0x804b0036 (NS_ERROR_SOCKET_ADDRESS_IN_USE)\"  location: \"JS frame :: chrome://remote/content/server/HTTPD.jsm :: _start :: line 567\"  data: no]\n1588278702525\tRemoteAgent\tERROR\tunable to stop listener: [Exception... \"Unexpected error\"  nsresult: \"0x8000ffff (NS_ERROR_UNEXPECTED)\"  location: \"JS frame :: chrome://remote/content/server/HTTPD.jsm :: stop :: line 621\"  data: no] Stack trace: stop()@HTTPD.jsm:621\nclose()@RemoteAgent.jsm:119\nasyncListen()@RemoteAgent.jsm:100\n```", "creator": "mjzffr@gmail.com", "time": "2020-05-01T14:14:47Z", "tags": []}, {"text": "Created attachment 9145029\nBug 1634691 - Decouple Target id from browsing context id\n\n\nThis fixes exceptions hit in destructors when the browsing context\nis null.", "id": 14791167, "author": "mjzffr@gmail.com", "attachment_id": 9145029, "is_private": false, "bug_id": 1634691, "count": 2, "creation_time": "2020-05-01T14:45:20Z", "raw_text": "\nThis fixes exceptions hit in destructors when the browsing context\nis null.", "creator": "mjzffr@gmail.com", "time": "2020-05-01T14:45:20Z", "tags": []}, {"text": "Created attachment 9145030\nBug 1634691 - Return early in Page.navigate for all non-http traffic\n\n\n\nDepends on D73459", "author": "mjzffr@gmail.com", "id": 14791169, "attachment_id": 9145030, "bug_id": 1634691, "is_private": false, "count": 3, "creation_time": "2020-05-01T14:47:35Z", "raw_text": "\n\nDepends on D73459", "creator": "mjzffr@gmail.com", "time": "2020-05-01T14:47:35Z", "tags": []}, {"tags": [], "time": "2020-05-04T14:49:42Z", "creator": "pulsebot@bots.tld", "raw_text": "Pushed by mjzffr@gmail.com:\nhttps://hg.mozilla.org/integration/autoland/rev/6253f484818a\nDecouple Target id from browsing context id r=remote-protocol-reviewers,whimboo\nhttps://hg.mozilla.org/integration/autoland/rev/c3478c000960\nReturn early in Page.navigate for all non-http traffic r=remote-protocol-reviewers,whimboo", "creation_time": "2020-05-04T14:49:42Z", "count": 4, "is_private": false, "bug_id": 1634691, "attachment_id": null, "author": "pulsebot@bots.tld", "id": 14795900, "text": "Pushed by mjzffr@gmail.com:\nhttps://hg.mozilla.org/integration/autoland/rev/6253f484818a\nDecouple Target id from browsing context id r=remote-protocol-reviewers,whimboo\nhttps://hg.mozilla.org/integration/autoland/rev/c3478c000960\nReturn early in Page.navigate for all non-http traffic r=remote-protocol-reviewers,whimboo"}, {"tags": ["bugherder"], "time": "2020-05-04T20:56:44Z", "creator": "ccoroiu@mozilla.com", "raw_text": "https://hg.mozilla.org/mozilla-central/rev/6253f484818a\nhttps://hg.mozilla.org/mozilla-central/rev/c3478c000960", "count": 5, "creation_time": "2020-05-04T20:56:44Z", "bug_id": 1634691, "is_private": false, "id": 14796595, "author": "ccoroiu@mozilla.com", "attachment_id": null, "text": "https://hg.mozilla.org/mozilla-central/rev/6253f484818a\nhttps://hg.mozilla.org/mozilla-central/rev/c3478c000960"}]}}, "comments": {}}