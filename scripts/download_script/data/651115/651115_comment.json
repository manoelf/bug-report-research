{"bugs": {"651115": {"comments": [{"author": "garnerji@mail.nih.gov", "attachment_id": null, "id": 5418411, "creator": "garnerji@mail.nih.gov", "text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.15) Gecko/20110303 Firefox/3.6.15 GTB7.1\nBuild Identifier: Mozilla/5.0 (Windows NT5.1;RV:20) Gecko/20100101 Firefox/4.0\n\nThe actual line in the HTML is <input type=\"TEXT\" name=\"initials\" size=\"9\" maxlength=8 value=\"%WWW.VAR.INITIALS%\">, my server removes the %WWW.VAR.INITIALS% and sends only the two quotes for a null value.  Upon return the \"initials\" value is not returned.  This works under IE 8, Firefox 3.6.15 and only fails on Firefox V4.\n\nSent to Browser in both cases:\n\n0174597036 14:26:09 8BAD90 00200540 Sendtrace(T): 118 - <input type=\"TEXT\"                                              \n 0174597037 14:26:09 8BAD90 00200540 Sendtrace(T): 119 - name=\"initials\" size=\"9\" maxlength=8 VALUE=\"\">\n\nTrace of Firefox V3 where it works shows the following coming back:\n\n0174592251 13:00:29 8BAD90 00200514 URL   - rJATPHBRlTaKEtgyPcGSFIRov20wYN89hKgeW8YEXgMPKJx6gz2Vyo/xYGVtwDom2OBGx8dzeGs/\n                                     8K/lPbmCuRbl+K1begcN5dmHzLPR35wkHWKZOKIPwn5s8dQx7zbsDZ26FJP/vkHE+v8am5umoPK/UgrhC4g8\n                                     uvGEFF/KimoRHAbmRG7eUzN6PGxk4LHA0lqQ2I/23WLYGSgM9zi74Lme8LeCu8TIdYa7m/A7NwMOxAilBjlr\n                                     nHrLrIi4AKVHEFBzxUB6y1FtJIFY/cgypjcForUY9INg9Ijar3pTMkUZDRGRDi3iH0AJgw5t3aWy7YnUDnLe\n                                     TECfHw5EuC  Authorization: XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX  Content-Type: application\n                                     /x-www-form-urlencoded  Content-Length: 136    function=RS&subtype=Submit+Initials+R\n                                     equest&page=RESTORE&initials=garner9&likefn=Begins+With&fname=&likeln=BEG&lname=&Dis\n                                     playnfo=Restore\n\nNotice initials=garner9\n\non V4 the return is:\n\n0174597101 14:26:17 8BAD90 00200542 URL   - 12861.23; __utmz=123533593.1301578730.9.2.utmcsr=google|utmccn=(organic)|utm\n                                     cmd=organic|utmctr=dns; __utmc=123533593  Authorization: XXXXXXXXXXXXXXXXXXXXXXXXXX \n                                      Content-Type: application/x-www-form-urlencoded  Content-Length: 119    function=RS\n                                     &subtype=Submit+Initials+Request&page=RESTORE&likefn=Begins+With&fname=&likeln=BEG&l\n                                     name=&Displaynfo=Restore\n\nNotice initials= is missing.\n\nthe next HTML stsatent was a </font>, I moved  this up before the <input> statement and now it works.\n\nI'll include actual HTML before and after as an attachment (the button for an attachment is not present for some reason, I'll try to attach after submission, but if not send me a note and I'll supply the HTML), please note that the %WWW.VAR.INITIALS% are stripped by the server before being sent to the browser.\n\n\n\n\nReproducible: Always\n\nActual Results:  \nDescribed above.\n\nExpected Results:  \nvalue of initials should have been returned.", "creation_time": "2011-04-19T13:39:20Z", "is_private": false, "tags": [], "time": "2011-04-19T13:39:20Z", "count": 0, "raw_text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.15) Gecko/20110303 Firefox/3.6.15 GTB7.1\nBuild Identifier: Mozilla/5.0 (Windows NT5.1;RV:20) Gecko/20100101 Firefox/4.0\n\nThe actual line in the HTML is <input type=\"TEXT\" name=\"initials\" size=\"9\" maxlength=8 value=\"%WWW.VAR.INITIALS%\">, my server removes the %WWW.VAR.INITIALS% and sends only the two quotes for a null value.  Upon return the \"initials\" value is not returned.  This works under IE 8, Firefox 3.6.15 and only fails on Firefox V4.\n\nSent to Browser in both cases:\n\n0174597036 14:26:09 8BAD90 00200540 Sendtrace(T): 118 - <input type=\"TEXT\"                                              \n 0174597037 14:26:09 8BAD90 00200540 Sendtrace(T): 119 - name=\"initials\" size=\"9\" maxlength=8 VALUE=\"\">\n\nTrace of Firefox V3 where it works shows the following coming back:\n\n0174592251 13:00:29 8BAD90 00200514 URL   - rJATPHBRlTaKEtgyPcGSFIRov20wYN89hKgeW8YEXgMPKJx6gz2Vyo/xYGVtwDom2OBGx8dzeGs/\n                                     8K/lPbmCuRbl+K1begcN5dmHzLPR35wkHWKZOKIPwn5s8dQx7zbsDZ26FJP/vkHE+v8am5umoPK/UgrhC4g8\n                                     uvGEFF/KimoRHAbmRG7eUzN6PGxk4LHA0lqQ2I/23WLYGSgM9zi74Lme8LeCu8TIdYa7m/A7NwMOxAilBjlr\n                                     nHrLrIi4AKVHEFBzxUB6y1FtJIFY/cgypjcForUY9INg9Ijar3pTMkUZDRGRDi3iH0AJgw5t3aWy7YnUDnLe\n                                     TECfHw5EuC  Authorization: XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX  Content-Type: application\n                                     /x-www-form-urlencoded  Content-Length: 136    function=RS&subtype=Submit+Initials+R\n                                     equest&page=RESTORE&initials=garner9&likefn=Begins+With&fname=&likeln=BEG&lname=&Dis\n                                     playnfo=Restore\n\nNotice initials=garner9\n\non V4 the return is:\n\n0174597101 14:26:17 8BAD90 00200542 URL   - 12861.23; __utmz=123533593.1301578730.9.2.utmcsr=google|utmccn=(organic)|utm\n                                     cmd=organic|utmctr=dns; __utmc=123533593  Authorization: XXXXXXXXXXXXXXXXXXXXXXXXXX \n                                      Content-Type: application/x-www-form-urlencoded  Content-Length: 119    function=RS\n                                     &subtype=Submit+Initials+Request&page=RESTORE&likefn=Begins+With&fname=&likeln=BEG&l\n                                     name=&Displaynfo=Restore\n\nNotice initials= is missing.\n\nthe next HTML stsatent was a </font>, I moved  this up before the <input> statement and now it works.\n\nI'll include actual HTML before and after as an attachment (the button for an attachment is not present for some reason, I'll try to attach after submission, but if not send me a note and I'll supply the HTML), please note that the %WWW.VAR.INITIALS% are stripped by the server before being sent to the browser.\n\n\n\n\nReproducible: Always\n\nActual Results:  \nDescribed above.\n\nExpected Results:  \nvalue of initials should have been returned.", "bug_id": 651115}, {"count": 1, "raw_text": "", "bug_id": 651115, "is_private": false, "tags": [], "time": "2011-04-19T13:46:31Z", "creation_time": "2011-04-19T13:46:31Z", "author": "garnerji@mail.nih.gov", "attachment_id": 526974, "id": 5418425, "creator": "garnerji@mail.nih.gov", "text": "Created attachment 526974\nThis is the HTML that did not work.  <input> statement is at line 112"}, {"count": 2, "bug_id": 651115, "raw_text": "", "tags": [], "is_private": false, "time": "2011-04-19T13:48:56Z", "creation_time": "2011-04-19T13:48:56Z", "author": "garnerji@mail.nih.gov", "text": "Created attachment 526975\nTHis is the version where I moved the </font> tag, <input> is now at line 110.  I also removed the \" around the value parameter, I had added the \" in anattempt to fix the problem. it made no differenc", "creator": "garnerji@mail.nih.gov", "attachment_id": 526975, "id": 5418432}, {"tags": [], "is_private": false, "raw_text": "There's lots of wrongly nested <table>/<tr>/<td> tags.\n\nMy guess as to what's going on here is that the relevant <input> is moved around due to being in the wrong place in a <table> and moved out of the <form>.\n\nSo my guess is that implementing the HTML5 parser broke this.\n\nJim: would be great to have a smaller testcase to see what exactly broke this page. It's likely that most of the contents in your examples aren't relevant to reproducing the breakage here. With a smaller testcase it would be easier to see if this was an intentional change or not.\n\nI *don't* think that actual form submission code changes are involved here. As far as I know none of the changes we made should be relevant to this testcase (i.e. there are no emptynamed or nameless <input>s, nor any <input type=image>)", "text": "There's lots of wrongly nested <table>/<tr>/<td> tags.\n\nMy guess as to what's going on here is that the relevant <input> is moved around due to being in the wrong place in a <table> and moved out of the <form>.\n\nSo my guess is that implementing the HTML5 parser broke this.\n\nJim: would be great to have a smaller testcase to see what exactly broke this page. It's likely that most of the contents in your examples aren't relevant to reproducing the breakage here. With a smaller testcase it would be easier to see if this was an intentional change or not.\n\nI *don't* think that actual form submission code changes are involved here. As far as I know none of the changes we made should be relevant to this testcase (i.e. there are no emptynamed or nameless <input>s, nor any <input type=image>)", "attachment_id": null, "id": 5419506, "creation_time": "2011-04-19T20:25:49Z", "time": "2011-04-19T20:25:49Z", "count": 3, "bug_id": 651115, "author": "jonas@sicking.cc", "creator": "jonas@sicking.cc"}, {"raw_text": "", "bug_id": 651115, "count": 4, "time": "2011-04-19T21:15:04Z", "is_private": false, "tags": [], "creation_time": "2011-04-19T21:15:04Z", "id": 5419652, "attachment_id": 527100, "text": "Created attachment 527100\nShortened version of HTML, this version fails. <input> at line 19", "creator": "garnerji@mail.nih.gov", "author": "garnerji@mail.nih.gov"}, {"time": "2011-04-19T21:18:48Z", "bug_id": 651115, "count": 5, "creator": "garnerji@mail.nih.gov", "author": "garnerji@mail.nih.gov", "tags": [], "is_private": false, "raw_text": "By the way, this was written long ago by those no longer with us.  So, I'm not sensitive to any comments on how it is structured.  Probably a lot of this kind of stuff around the internet.\n\nLet me know if you want me to do more.\n\nThanks,\n\nJim", "text": "Created attachment 527101\nHTML that works.  </font> moved up 2 lines, <input> now at line 20\n\nBy the way, this was written long ago by those no longer with us.  So, I'm not sensitive to any comments on how it is structured.  Probably a lot of this kind of stuff around the internet.\n\nLet me know if you want me to do more.\n\nThanks,\n\nJim", "id": 5419655, "attachment_id": 527101, "creation_time": "2011-04-19T21:18:48Z"}, {"author": "jonas@sicking.cc", "creator": "jonas@sicking.cc", "time": "2011-04-19T22:18:06Z", "count": 6, "bug_id": 651115, "text": "I'll leave this up to Henri. I do think it would be interesting to know what type of markup stopped working. But it's not at all clear to me that we actually want to make any changes to firefox. A minimized testcase is needed to figure that out.\n\nLike you say, there is a lot of this stuff on the internet. The HTML5 parsing algorithm does a really good job at being able to parse it all, but there is always room for improvement.", "attachment_id": null, "id": 5419853, "creation_time": "2011-04-19T22:18:06Z", "tags": [], "is_private": false, "raw_text": "I'll leave this up to Henri. I do think it would be interesting to know what type of markup stopped working. But it's not at all clear to me that we actually want to make any changes to firefox. A minimized testcase is needed to figure that out.\n\nLike you say, there is a lot of this stuff on the internet. The HTML5 parsing algorithm does a really good job at being able to parse it all, but there is always room for improvement."}, {"is_private": false, "tags": [], "raw_text": "The form association of the name=initials controls works exactly the same way in Chrome, so this has to be a feature of the HTML parsing algorithm. I haven't yet worked out why the placement of the </font> end tag affects the form association here.", "attachment_id": null, "id": 5420732, "text": "The form association of the name=initials controls works exactly the same way in Chrome, so this has to be a feature of the HTML parsing algorithm. I haven't yet worked out why the placement of the </font> end tag affects the form association here.", "creation_time": "2011-04-20T07:07:13Z", "time": "2011-04-20T07:07:13Z", "count": 7, "bug_id": 651115, "author": "hsivonen@mozilla.com", "creator": "hsivonen@mozilla.com"}, {"creation_time": "2011-04-20T07:23:06Z", "text": "Minimized test case:\nhttp://software.hixie.ch/utilities/js/live-dom-viewer/saved/939\n\nI think what happens here is that </font> causes reparenting in the AAA and the reparenting resets the form pointer since the form pointer always resets when the parent chain changes.\n\nSo if we wanted to support this particular flavor of bogus markup, we should have a way for the parser to tell the DOM not to reset the form pointer on the form controls during a parent chain change. Apparently Opera Ragnar\u00f6k doesn't reset the form pointer in this case.\n\nDo we want to go there?", "attachment_id": null, "id": 5420749, "raw_text": "Minimized test case:\nhttp://software.hixie.ch/utilities/js/live-dom-viewer/saved/939\n\nI think what happens here is that </font> causes reparenting in the AAA and the reparenting resets the form pointer since the form pointer always resets when the parent chain changes.\n\nSo if we wanted to support this particular flavor of bogus markup, we should have a way for the parser to tell the DOM not to reset the form pointer on the form controls during a parent chain change. Apparently Opera Ragnar\u00f6k doesn't reset the form pointer in this case.\n\nDo we want to go there?", "tags": [], "is_private": false, "creator": "hsivonen@mozilla.com", "author": "hsivonen@mozilla.com", "bug_id": 651115, "count": 8, "time": "2011-04-20T07:23:06Z"}, {"count": 9, "bug_id": 651115, "raw_text": "> Apparently Opera Ragnar\u00f6k doesn't reset the form pointer in this case.\n\nOn the face of it, this is a bug per the current spec text.\n\nAlso, shades of bug 635924.", "tags": [], "is_private": false, "time": "2011-04-20T07:32:08Z", "creation_time": "2011-04-20T07:32:08Z", "author": "bzbarsky@mit.edu", "creator": "bzbarsky@mit.edu", "text": "> Apparently Opera Ragnar\u00f6k doesn't reset the form pointer in this case.\n\nOn the face of it, this is a bug per the current spec text.\n\nAlso, shades of bug 635924.", "id": 5420756, "attachment_id": null}, {"is_private": false, "tags": [], "raw_text": "(In reply to comment #9)\n> > Apparently Opera Ragnar\u00f6k doesn't reset the form pointer in this case.\n> \n> On the face of it, this is a bug per the current spec text.\n\nYes. Per spec, Opera is wrong and Firefox and Chrome are right.", "attachment_id": null, "id": 5420763, "text": "(In reply to comment #9)\n> > Apparently Opera Ragnar\u00f6k doesn't reset the form pointer in this case.\n> \n> On the face of it, this is a bug per the current spec text.\n\nYes. Per spec, Opera is wrong and Firefox and Chrome are right.", "creation_time": "2011-04-20T07:41:12Z", "time": "2011-04-20T07:41:12Z", "count": 10, "bug_id": 651115, "author": "hsivonen@mozilla.com", "creator": "hsivonen@mozilla.com"}, {"time": "2011-06-23T16:03:55Z", "tags": [], "is_private": false, "bug_id": 651115, "raw_text": "", "count": 11, "text": "*** Bug 666322 has been marked as a duplicate of this bug. ***", "creator": "hsivonen@mozilla.com", "id": 5551224, "attachment_id": null, "author": "hsivonen@mozilla.com", "creation_time": "2011-06-23T16:03:55Z"}, {"is_private": false, "tags": [], "time": "2020-12-14T17:07:36Z", "count": 12, "raw_text": "Bulk-downgrade of unassigned, >=3 years untouched DOM/Storage bug's priority.\n\nIf you have reason to believe this is wrong, please write a comment and ni :jstutte.", "bug_id": 651115, "author": "jstutte@mozilla.com", "attachment_id": null, "id": 15174613, "creator": "jstutte@mozilla.com", "text": "Bulk-downgrade of unassigned, >=3 years untouched DOM/Storage bug's priority.\n\nIf you have reason to believe this is wrong, please write a comment and ni :jstutte.", "creation_time": "2020-12-14T17:07:36Z"}]}}, "comments": {}}