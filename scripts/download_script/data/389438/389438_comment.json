{"bugs": {"389438": {"comments": [{"is_private": false, "attachment_id": null, "count": 0, "time": "2007-07-24T19:03:08Z", "id": 3258445, "bug_id": 389438, "tags": [], "author": "christopherbare@cbare.org", "creation_time": "2007-07-24T19:03:08Z", "text": "User-Agent:       Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O; en-US; rv:1.8.1.5) Gecko/20070713 Firefox/2.0.0.5\nBuild Identifier: Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O; en-US; rv:1.8.1.5) Gecko/20070713 Firefox/2.0.0.5\n\nOpen an XUL dialog (part of an add-on extension) and press command-Q to quit. Dialog closes, crash dialog appears, and this appears in the console:\n\n[error occurred during error reporting, step 0, id 0xa]\n\n/Applications/firefox.app/Contents/MacOS/run-mozilla.sh: line 424: 18640 Segmentation fault      \"$prog\" ${1+\"$@\"}\n\n\nReproducible: Always\n\nSteps to Reproduce:\nReproduces consistently for me:\n\n1. Install Firegoose extension\n2. Select \"more\" in the target drop-down on the firegoose toolbar.\n3. xul dialog pops up.\n4. command-Q to quit browser\n5. crash\n\nActual Results:  \nsegmentation fault during shutdown.\n\nExpected Results:  \nshut down browser normally\n\n\na javascript ondialogaccept handler is registered that accesses the preference service and the console output service. What the hell, here's the XUL file:\n\n<?xml version=\"1.0\"?>\n\n<?xml-stylesheet href=\"chrome://global/skin/\" type=\"text/css\"?>\n<?xml-stylesheet href=\"chrome://firegoose/skin/overlay.css\" type=\"text/css\"?>\n\n<!DOCTYPE dialog SYSTEM \"chrome://firegoose/locale/firegoose.dtd\">\n\n<dialog id=\"fgEnableWebsites\"\n        xmlns=\"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul\"\n        title=\"&firegoose.enableWebsites.label;\"\n        buttons=\"accept,cancel\"\n        ondialogaccept=\"FG_dialogAccept();\" >\n\n  <script type=\"application/x-javascript\" src=\"firegoose.js\"/>\n\n  <script type=\"application/x-javascript\">\n\tvar windowParams = window.arguments[0];\n\n\twindow.addEventListener(\"load\", function() { FG_dialogInit(); }, false);\n\t\n\tfunction FG_dialogInit() {\n\t\tFG_trace(\"preferences init\");\n\t\tvar prefs = Components.classes[\"@mozilla.org/preferences-service;1\"].\n  \t\t            getService(Components.interfaces.nsIPrefBranch);\n\n\t\tfunction isVisible(name) {\n\t\t\ttry {\n\t\t    \treturn prefs.getBoolPref(FG_fixName(name));\n\t\t    }\n\t\t    catch (e) {\n\t\t    \treturn true;\n\t\t    }\n\t\t}\n\n\t\tfunction createListItem(name, visible) {\n\t\t    var item = document.createElement(\"richlistitem\");\n\t\t    var checkbox = document.createElement(\"checkbox\");\n\t\t    checkbox.setAttribute(\"label\", name);\n\t\t    checkbox.setAttribute(\"checked\", visible);\n\t\t    item.appendChild(checkbox);\n\t\t    return item;\n\t\t}\n\n        var websiteList = document.getElementById(\"websiteList\");\n\n\t\tfor (var name in windowParams.websiteHandlers) {\n\t\t\tif (!windowParams.websiteHandlers[name].dontDisplayInMenu)\n\t\t    \twebsiteList.appendChild(createListItem(name, isVisible(name)));\n\t\t}\n\t}\n\n\tfunction FG_dialogAccept() {\n\t\tFG_trace(\"ok\");\n\n        function toBoolean(value) {\n        \tif (\"true\" == value)\n\t\t\t\treturn true;\n\t\t\telse\n\t\t\t\treturn false;\n\t\t}\n\t\t\n\t\tvar prefs = Components.classes[\"@mozilla.org/preferences-service;1\"].\n  \t\t            getService(Components.interfaces.nsIPrefBranch);\n\n        var websiteList = document.getElementById(\"websiteList\");\n        var children = websiteList.childNodes;\n\n\t\tfor (var i=0; i &lt; children.length; i++) {\n\t\t\tvar node = children.item(i).firstChild;\n\t\t\tvar checked = toBoolean(node.getAttribute(\"checked\"));\n\t\t\tvar name = node.getAttribute(\"label\");\n\t\t\tprefs.setBoolPref(FG_fixName(name), checked);\n\t\t}\n\t\t\n\t\twindowParams[\"ok\"] = true;\n  \t}\n  </script>\n\n  <vbox flex=\"1\">\n\t<label control=\"websiteList\" class=\"dialogTitle\" value=\"Enable Websites\" />\n    <separator/>\n\t<description style=\"width: 30em;\">\n      Select the target websites that will be visible in the drop-down menu. Some\n      targets listed here are experimental.\n\t</description>\n    <separator/>\n    <richlistbox id=\"websiteList\" flex=\"1\" tooltiptext=\"Enable or disable firegoose access to websites\">\n    </richlistbox>\n  </vbox>\n\n  <separator/>\n\n</dialog>\n\n\n\nand here's FG_trace:\n\n\nfunction FG_trace(msg) {\n    Components.classes[\"@mozilla.org/consoleservice;1\"]\n        .getService(Components.interfaces.nsIConsoleService)\n            .logStringMessage(msg);\n}", "creator": "christopherbare@cbare.org", "raw_text": "User-Agent:       Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O; en-US; rv:1.8.1.5) Gecko/20070713 Firefox/2.0.0.5\nBuild Identifier: Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O; en-US; rv:1.8.1.5) Gecko/20070713 Firefox/2.0.0.5\n\nOpen an XUL dialog (part of an add-on extension) and press command-Q to quit. Dialog closes, crash dialog appears, and this appears in the console:\n\n[error occurred during error reporting, step 0, id 0xa]\n\n/Applications/firefox.app/Contents/MacOS/run-mozilla.sh: line 424: 18640 Segmentation fault      \"$prog\" ${1+\"$@\"}\n\n\nReproducible: Always\n\nSteps to Reproduce:\nReproduces consistently for me:\n\n1. Install Firegoose extension\n2. Select \"more\" in the target drop-down on the firegoose toolbar.\n3. xul dialog pops up.\n4. command-Q to quit browser\n5. crash\n\nActual Results:  \nsegmentation fault during shutdown.\n\nExpected Results:  \nshut down browser normally\n\n\na javascript ondialogaccept handler is registered that accesses the preference service and the console output service. What the hell, here's the XUL file:\n\n<?xml version=\"1.0\"?>\n\n<?xml-stylesheet href=\"chrome://global/skin/\" type=\"text/css\"?>\n<?xml-stylesheet href=\"chrome://firegoose/skin/overlay.css\" type=\"text/css\"?>\n\n<!DOCTYPE dialog SYSTEM \"chrome://firegoose/locale/firegoose.dtd\">\n\n<dialog id=\"fgEnableWebsites\"\n        xmlns=\"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul\"\n        title=\"&firegoose.enableWebsites.label;\"\n        buttons=\"accept,cancel\"\n        ondialogaccept=\"FG_dialogAccept();\" >\n\n  <script type=\"application/x-javascript\" src=\"firegoose.js\"/>\n\n  <script type=\"application/x-javascript\">\n\tvar windowParams = window.arguments[0];\n\n\twindow.addEventListener(\"load\", function() { FG_dialogInit(); }, false);\n\t\n\tfunction FG_dialogInit() {\n\t\tFG_trace(\"preferences init\");\n\t\tvar prefs = Components.classes[\"@mozilla.org/preferences-service;1\"].\n  \t\t            getService(Components.interfaces.nsIPrefBranch);\n\n\t\tfunction isVisible(name) {\n\t\t\ttry {\n\t\t    \treturn prefs.getBoolPref(FG_fixName(name));\n\t\t    }\n\t\t    catch (e) {\n\t\t    \treturn true;\n\t\t    }\n\t\t}\n\n\t\tfunction createListItem(name, visible) {\n\t\t    var item = document.createElement(\"richlistitem\");\n\t\t    var checkbox = document.createElement(\"checkbox\");\n\t\t    checkbox.setAttribute(\"label\", name);\n\t\t    checkbox.setAttribute(\"checked\", visible);\n\t\t    item.appendChild(checkbox);\n\t\t    return item;\n\t\t}\n\n        var websiteList = document.getElementById(\"websiteList\");\n\n\t\tfor (var name in windowParams.websiteHandlers) {\n\t\t\tif (!windowParams.websiteHandlers[name].dontDisplayInMenu)\n\t\t    \twebsiteList.appendChild(createListItem(name, isVisible(name)));\n\t\t}\n\t}\n\n\tfunction FG_dialogAccept() {\n\t\tFG_trace(\"ok\");\n\n        function toBoolean(value) {\n        \tif (\"true\" == value)\n\t\t\t\treturn true;\n\t\t\telse\n\t\t\t\treturn false;\n\t\t}\n\t\t\n\t\tvar prefs = Components.classes[\"@mozilla.org/preferences-service;1\"].\n  \t\t            getService(Components.interfaces.nsIPrefBranch);\n\n        var websiteList = document.getElementById(\"websiteList\");\n        var children = websiteList.childNodes;\n\n\t\tfor (var i=0; i &lt; children.length; i++) {\n\t\t\tvar node = children.item(i).firstChild;\n\t\t\tvar checked = toBoolean(node.getAttribute(\"checked\"));\n\t\t\tvar name = node.getAttribute(\"label\");\n\t\t\tprefs.setBoolPref(FG_fixName(name), checked);\n\t\t}\n\t\t\n\t\twindowParams[\"ok\"] = true;\n  \t}\n  </script>\n\n  <vbox flex=\"1\">\n\t<label control=\"websiteList\" class=\"dialogTitle\" value=\"Enable Websites\" />\n    <separator/>\n\t<description style=\"width: 30em;\">\n      Select the target websites that will be visible in the drop-down menu. Some\n      targets listed here are experimental.\n\t</description>\n    <separator/>\n    <richlistbox id=\"websiteList\" flex=\"1\" tooltiptext=\"Enable or disable firegoose access to websites\">\n    </richlistbox>\n  </vbox>\n\n  <separator/>\n\n</dialog>\n\n\n\nand here's FG_trace:\n\n\nfunction FG_trace(msg) {\n    Components.classes[\"@mozilla.org/consoleservice;1\"]\n        .getService(Components.interfaces.nsIConsoleService)\n            .logStringMessage(msg);\n}"}, {"count": 1, "attachment_id": null, "time": "2007-07-24T19:04:39Z", "is_private": false, "id": 3258446, "bug_id": 389438, "tags": [], "author": "christopherbare@cbare.org", "creator": "christopherbare@cbare.org", "creation_time": "2007-07-24T19:04:39Z", "text": "Forgot to say, Firegoose extension is here: http://gaggle.systemsbiology.org/docs/geese/firegoose/\n\nProblem is likely not specific to this extension.", "raw_text": "Forgot to say, Firegoose extension is here: http://gaggle.systemsbiology.org/docs/geese/firegoose/\n\nProblem is likely not specific to this extension."}, {"raw_text": "Can you reproduce the crash with any dialogs that are part of Firefox?\n\nDoes the crash still happen on trunk?", "creator": "jruderman@gmail.com", "text": "Can you reproduce the crash with any dialogs that are part of Firefox?\n\nDoes the crash still happen on trunk?", "creation_time": "2007-07-25T03:09:56Z", "author": "jruderman@gmail.com", "tags": [], "bug_id": 389438, "id": 3258980, "attachment_id": null, "count": 2, "time": "2007-07-25T03:09:56Z", "is_private": false}, {"bug_id": 389438, "id": 3259780, "is_private": false, "count": 3, "attachment_id": null, "time": "2007-07-25T18:04:39Z", "raw_text": "Does the <dialog ...> XUL tag get used within firefox? It looks like all the \"dialogs\" that are part of FF are actually separate windows. For example, if I open preferences and hit command-Q FF exits normally with no crash. But, the preferences dialog is it's own window whereas my dialogs slide down from the top bar like a alert box. I assume that's because the built-in dialogs aren't using the <dialog> XUL tag. Maybe I shouldn't either.\n\nI was hoping the debugging output (which comes from FF not from me) would make it possible to figure out even w/out an easy repro:\n\n[error occurred during error reporting, step 0, id 0xa]\n\nSometimes I get several of these and then:\n\n[Too many errors, abort]\n\n\n-chris", "text": "Does the <dialog ...> XUL tag get used within firefox? It looks like all the \"dialogs\" that are part of FF are actually separate windows. For example, if I open preferences and hit command-Q FF exits normally with no crash. But, the preferences dialog is it's own window whereas my dialogs slide down from the top bar like a alert box. I assume that's because the built-in dialogs aren't using the <dialog> XUL tag. Maybe I shouldn't either.\n\nI was hoping the debugging output (which comes from FF not from me) would make it possible to figure out even w/out an easy repro:\n\n[error occurred during error reporting, step 0, id 0xa]\n\nSometimes I get several of these and then:\n\n[Too many errors, abort]\n\n\n-chris", "creation_time": "2007-07-25T18:04:39Z", "creator": "christopherbare@cbare.org", "author": "christopherbare@cbare.org", "tags": []}, {"tags": [], "bug_id": 389438, "id": 3259795, "is_private": false, "time": "2007-07-25T18:15:51Z", "attachment_id": null, "count": 4, "raw_text": "After a little more experimentation, it looks like the ondialogaccept callback never gets called.\n\nI added some debugging output (dump(\"wtf\\n\"); to me FG_dialogAccept function), which appears if I press OK, but doesn't appear if I press command-Q causing the crash. That would seem to rule out the idea that something I'm doing in my ondialogaccept handler is the culprit, but ya never know.\n\nI'm guessing the bug happens if you have an XUL <dialog> open and press command-Q.\n\n\nHere's this, in case it helps:\n\nDate/Time:      2007-07-25 11:10:54.260 -0700\nOS Version:     10.4.10 (Build 8R218)\nReport Version: 4\n\nCommand: firefox-bin\nPath:    /Applications/firefox.app/Contents/MacOS/firefox-bin\nParent:  sh [19116]\n\nVersion: 2.0.0.5 (2.0.0.5)\n\nPID:    19122\nThread: 0\n\nException:  EXC_BAD_ACCESS (0x0001)\nCodes:      KERN_INVALID_ADDRESS (0x0001) at 0x2c0e4000\n\nThread 0 Crashed:\n0   libxpcom_core.dylib \t0x2c01cbc0 nsVoidArray::IndexOf(void*) const + 44\n1   libxpcom_core.dylib \t0x2c01d068 nsVoidArray::RemoveElement(void*) + 24\n2   org.mozilla.firefox \t0x0061a760 nsMacEventDispatchHandler::SetWidgetHit(nsWindow*) + 56\n3   org.mozilla.firefox \t0x0061c804 nsMacEventHandler::HandleMouseUpEvent(EventRecord&) + 212\n4   org.mozilla.firefox \t0x0061aa70 nsMacEventHandler::HandleOSEvent(EventRecord&) + 108\n5   org.mozilla.firefox \t0x0029d2e8 nsMacWindow::DispatchEvent(void*, int*) + 80\n6   org.mozilla.firefox \t0x00616f10 nsMacMessagePump::DispatchOSEventToRaptor(EventRecord&, OpaqueWindowPtr*) + 96\n7   org.mozilla.firefox \t0x00616e0c nsMacMessagePump::DoMouseUp(EventRecord&) + 76\n8   org.mozilla.firefox \t0x00616794 nsMacMessagePump::DispatchEvent(EventRecord*) + 92\n9   org.mozilla.firefox \t0x00617020 nsMacMessagePump::WNETransitionEventHandler(OpaqueEventHandlerCallRef*, OpaqueEventRef*, void*) + 44\n10  com.apple.HIToolbox \t0x93294934 DispatchEventToHandlers(EventTargetRec*, OpaqueEventRef*, HandlerCallRec*) + 692\n11  com.apple.HIToolbox \t0x9329408c SendEventToEventTargetInternal(OpaqueEventRef*, OpaqueEventTargetRef*, HandlerCallRec*) + 372\n12  com.apple.HIToolbox \t0x9329ae90 SendEventToEventTarget + 40\n13  com.apple.HIToolbox \t0x93327224 HandleMouseEventForWindow(OpaqueWindowPtr*, OpaqueEventRef*, unsigned short) + 236\n14  com.apple.HIToolbox \t0x9348a3dc HandleMouseEvent(OpaqueEventRef*) + 368\n15  com.apple.HIToolbox \t0x9329b1fc ToolboxEventDispatcherHandler(OpaqueEventHandlerCallRef*, OpaqueEventRef*, void*) + 496\n16  com.apple.HIToolbox \t0x93294b84 DispatchEventToHandlers(EventTargetRec*, OpaqueEventRef*, HandlerCallRec*) + 1284\n17  com.apple.HIToolbox \t0x9329408c SendEventToEventTargetInternal(OpaqueEventRef*, OpaqueEventTargetRef*, HandlerCallRec*) + 372\n18  com.apple.HIToolbox \t0x9329ae90 SendEventToEventTarget + 40\n19  com.apple.HIToolbox \t0x932dbc04 ToolboxEventDispatcher + 92\n20  com.apple.HIToolbox \t0x932dbb90 HLTBEventDispatcher + 16\n21  com.apple.HIToolbox \t0x932da148 RunApplicationEventLoop + 148\n22  org.mozilla.firefox \t0x002964fc nsAppShell::Run() + 64\n23  org.mozilla.firefox \t0x00334134 nsAppStartup::Run() + 60\n24  org.mozilla.firefox \t0x00012a14 XRE_main + 4904\n25  org.mozilla.firefox \t0x0000d768 start + 432\n26  org.mozilla.firefox \t0x0000d5e8 start + 48\n", "text": "After a little more experimentation, it looks like the ondialogaccept callback never gets called.\n\nI added some debugging output (dump(\"wtf\\n\"); to me FG_dialogAccept function), which appears if I press OK, but doesn't appear if I press command-Q causing the crash. That would seem to rule out the idea that something I'm doing in my ondialogaccept handler is the culprit, but ya never know.\n\nI'm guessing the bug happens if you have an XUL <dialog> open and press command-Q.\n\n\nHere's this, in case it helps:\n\nDate/Time:      2007-07-25 11:10:54.260 -0700\nOS Version:     10.4.10 (Build 8R218)\nReport Version: 4\n\nCommand: firefox-bin\nPath:    /Applications/firefox.app/Contents/MacOS/firefox-bin\nParent:  sh [19116]\n\nVersion: 2.0.0.5 (2.0.0.5)\n\nPID:    19122\nThread: 0\n\nException:  EXC_BAD_ACCESS (0x0001)\nCodes:      KERN_INVALID_ADDRESS (0x0001) at 0x2c0e4000\n\nThread 0 Crashed:\n0   libxpcom_core.dylib \t0x2c01cbc0 nsVoidArray::IndexOf(void*) const + 44\n1   libxpcom_core.dylib \t0x2c01d068 nsVoidArray::RemoveElement(void*) + 24\n2   org.mozilla.firefox \t0x0061a760 nsMacEventDispatchHandler::SetWidgetHit(nsWindow*) + 56\n3   org.mozilla.firefox \t0x0061c804 nsMacEventHandler::HandleMouseUpEvent(EventRecord&) + 212\n4   org.mozilla.firefox \t0x0061aa70 nsMacEventHandler::HandleOSEvent(EventRecord&) + 108\n5   org.mozilla.firefox \t0x0029d2e8 nsMacWindow::DispatchEvent(void*, int*) + 80\n6   org.mozilla.firefox \t0x00616f10 nsMacMessagePump::DispatchOSEventToRaptor(EventRecord&, OpaqueWindowPtr*) + 96\n7   org.mozilla.firefox \t0x00616e0c nsMacMessagePump::DoMouseUp(EventRecord&) + 76\n8   org.mozilla.firefox \t0x00616794 nsMacMessagePump::DispatchEvent(EventRecord*) + 92\n9   org.mozilla.firefox \t0x00617020 nsMacMessagePump::WNETransitionEventHandler(OpaqueEventHandlerCallRef*, OpaqueEventRef*, void*) + 44\n10  com.apple.HIToolbox \t0x93294934 DispatchEventToHandlers(EventTargetRec*, OpaqueEventRef*, HandlerCallRec*) + 692\n11  com.apple.HIToolbox \t0x9329408c SendEventToEventTargetInternal(OpaqueEventRef*, OpaqueEventTargetRef*, HandlerCallRec*) + 372\n12  com.apple.HIToolbox \t0x9329ae90 SendEventToEventTarget + 40\n13  com.apple.HIToolbox \t0x93327224 HandleMouseEventForWindow(OpaqueWindowPtr*, OpaqueEventRef*, unsigned short) + 236\n14  com.apple.HIToolbox \t0x9348a3dc HandleMouseEvent(OpaqueEventRef*) + 368\n15  com.apple.HIToolbox \t0x9329b1fc ToolboxEventDispatcherHandler(OpaqueEventHandlerCallRef*, OpaqueEventRef*, void*) + 496\n16  com.apple.HIToolbox \t0x93294b84 DispatchEventToHandlers(EventTargetRec*, OpaqueEventRef*, HandlerCallRec*) + 1284\n17  com.apple.HIToolbox \t0x9329408c SendEventToEventTargetInternal(OpaqueEventRef*, OpaqueEventTargetRef*, HandlerCallRec*) + 372\n18  com.apple.HIToolbox \t0x9329ae90 SendEventToEventTarget + 40\n19  com.apple.HIToolbox \t0x932dbc04 ToolboxEventDispatcher + 92\n20  com.apple.HIToolbox \t0x932dbb90 HLTBEventDispatcher + 16\n21  com.apple.HIToolbox \t0x932da148 RunApplicationEventLoop + 148\n22  org.mozilla.firefox \t0x002964fc nsAppShell::Run() + 64\n23  org.mozilla.firefox \t0x00334134 nsAppStartup::Run() + 60\n24  org.mozilla.firefox \t0x00012a14 XRE_main + 4904\n25  org.mozilla.firefox \t0x0000d768 start + 432\n26  org.mozilla.firefox \t0x0000d5e8 start + 48\n", "creation_time": "2007-07-25T18:15:51Z", "creator": "christopherbare@cbare.org", "author": "christopherbare@cbare.org"}, {"is_private": false, "time": "2007-07-25T19:01:40Z", "attachment_id": null, "count": 5, "bug_id": 389438, "id": 3259860, "author": "christopherbare@cbare.org", "tags": [], "raw_text": "I also get this in the console log:\n\n\nJul 25 11:36:03 220Volt /Applications/firefox.app/Contents/MacOS/firefox-bin:\n\n[...snip...]\n\nAn unexpected Java error has been detected by HotSpot Virtual Machine.\nJava VM: Java HotSpot(TM) Client VM (1.5.0_07-87 mixed mode)\nBus Error (0xa) at pc=0x2c01cbc0\nProcess ID: 19165, Current Thread: 33893888\n\n[...snip...]\n\nJul 25 11:36:06 220Volt crashdump[19167]: firefox-bin crashed\nJul 25 11:36:06 220Volt crashdump[19167]: crash report written to: /Users/cbare/Library/Logs/CrashReporter/firefox-bin.crash.log\n\nand in JavaNativeCrash_pid19165.crash.log:\n\nVM state:not at safepoint (normal execution)\n\n\nMy guess is that this is the JVM's way of complaining about not being shut down properly, but I can't say that's based on a lot of knowledge. It could be that FF crashes and takes the JVM with it, or maybe the other way around.\n\nWe use java in our toolbar, but not in the particular dialog in question.\n\n-chris\n", "text": "I also get this in the console log:\n\n\nJul 25 11:36:03 220Volt /Applications/firefox.app/Contents/MacOS/firefox-bin:\n\n[...snip...]\n\nAn unexpected Java error has been detected by HotSpot Virtual Machine.\nJava VM: Java HotSpot(TM) Client VM (1.5.0_07-87 mixed mode)\nBus Error (0xa) at pc=0x2c01cbc0\nProcess ID: 19165, Current Thread: 33893888\n\n[...snip...]\n\nJul 25 11:36:06 220Volt crashdump[19167]: firefox-bin crashed\nJul 25 11:36:06 220Volt crashdump[19167]: crash report written to: /Users/cbare/Library/Logs/CrashReporter/firefox-bin.crash.log\n\nand in JavaNativeCrash_pid19165.crash.log:\n\nVM state:not at safepoint (normal execution)\n\n\nMy guess is that this is the JVM's way of complaining about not being shut down properly, but I can't say that's based on a lot of knowledge. It could be that FF crashes and takes the JVM with it, or maybe the other way around.\n\nWe use java in our toolbar, but not in the particular dialog in question.\n\n-chris\n", "creation_time": "2007-07-25T19:01:40Z", "creator": "christopherbare@cbare.org"}, {"id": 3259913, "bug_id": 389438, "count": 6, "time": "2007-07-25T19:57:57Z", "attachment_id": null, "is_private": false, "creator": "smichaud@pobox.com", "creation_time": "2007-07-25T19:57:57Z", "text": "What happens if you disable Java before running your test?\n\n(Yes, I know that doing this will (partially?) disable your toolbar.\nBut if possible please try it anyway.)\n", "raw_text": "What happens if you disable Java before running your test?\n\n(Yes, I know that doing this will (partially?) disable your toolbar.\nBut if possible please try it anyway.)\n", "author": "smichaud@pobox.com", "tags": []}, {"tags": [], "id": 3260106, "bug_id": 389438, "is_private": false, "count": 7, "attachment_id": null, "time": "2007-07-25T22:17:16Z", "text": "I was able to try that. I unchecked \"enable Java\" and restarted FF. Then opened my dialog and pressed command-Q. I still get the crash. No Java error. Slightly different output in the terminal window:\n\nI still get:\n\n/Applications/firefox.app/Contents/MacOS/run-mozilla.sh: line 424: 19392 Segmentation fault      \"$prog\" ${1+\"$@\"}\n\nThe previous output about \"[error occurred during error reporting, step 0, id 0xa]\" does NOT appear. Nor does the \"too many errors\" thing.\n\nSame trace appears in the crash log:\n\nVersion: 2.0.0.5 (2.0.0.5)\n\nPID:    19409\nThread: 0\n\nException:  EXC_BAD_ACCESS (0x0001)\nCodes:      KERN_PROTECTION_FAILURE (0x0002) at 0x00000005\n\nThread 0 Crashed:\n0   libxpcom_core.dylib \t0x2c01cb94 nsVoidArray::IndexOf(void*) const + 0\n1   libxpcom_core.dylib \t0x2c01d068 nsVoidArray::RemoveElement(void*) + 24\n2   org.mozilla.firefox \t0x0061a760 nsMacEventDispatchHandler::SetWidgetHit(nsWindow*) + 56\n[...etc...]\n\n\nIf you guys think it's worth while, I can try to create a minimal XPI that reproduces the problem. The only problem is, I doubt I'll have time right away, but I could try.\n\n\n-chris\n", "creation_time": "2007-07-25T22:17:16Z", "creator": "christopherbare@cbare.org", "raw_text": "I was able to try that. I unchecked \"enable Java\" and restarted FF. Then opened my dialog and pressed command-Q. I still get the crash. No Java error. Slightly different output in the terminal window:\n\nI still get:\n\n/Applications/firefox.app/Contents/MacOS/run-mozilla.sh: line 424: 19392 Segmentation fault      \"$prog\" ${1+\"$@\"}\n\nThe previous output about \"[error occurred during error reporting, step 0, id 0xa]\" does NOT appear. Nor does the \"too many errors\" thing.\n\nSame trace appears in the crash log:\n\nVersion: 2.0.0.5 (2.0.0.5)\n\nPID:    19409\nThread: 0\n\nException:  EXC_BAD_ACCESS (0x0001)\nCodes:      KERN_PROTECTION_FAILURE (0x0002) at 0x00000005\n\nThread 0 Crashed:\n0   libxpcom_core.dylib \t0x2c01cb94 nsVoidArray::IndexOf(void*) const + 0\n1   libxpcom_core.dylib \t0x2c01d068 nsVoidArray::RemoveElement(void*) + 24\n2   org.mozilla.firefox \t0x0061a760 nsMacEventDispatchHandler::SetWidgetHit(nsWindow*) + 56\n[...etc...]\n\n\nIf you guys think it's worth while, I can try to create a minimal XPI that reproduces the problem. The only problem is, I doubt I'll have time right away, but I could try.\n\n\n-chris\n", "author": "christopherbare@cbare.org"}, {"author": "smichaud@pobox.com", "tags": [], "raw_text": "Thanks for the info.  I'm the author of the Java Embedding Plugin\nbundled with Mac distros of Mozilla.org browsers ... so I breathe a\nsigh of relief :-)\n\n> I can try to create a minimal XPI that reproduces the problem.\n\nI think this would be very useful.\n\nAnd don't forget Jesse's questions from comment #2:\n\n> Can you reproduce the crash with any dialogs that are part of\n> Firefox?\n>\n> Does the crash still happen on trunk?\n", "creator": "smichaud@pobox.com", "creation_time": "2007-07-25T22:26:12Z", "text": "Thanks for the info.  I'm the author of the Java Embedding Plugin\nbundled with Mac distros of Mozilla.org browsers ... so I breathe a\nsigh of relief :-)\n\n> I can try to create a minimal XPI that reproduces the problem.\n\nI think this would be very useful.\n\nAnd don't forget Jesse's questions from comment #2:\n\n> Can you reproduce the crash with any dialogs that are part of\n> Firefox?\n>\n> Does the crash still happen on trunk?\n", "count": 8, "time": "2007-07-25T22:26:12Z", "attachment_id": null, "is_private": false, "bug_id": 389438, "id": 3260118}, {"bug_id": 389438, "id": 5018309, "count": 9, "time": "2010-10-18T19:50:49Z", "attachment_id": null, "is_private": false, "raw_text": "This bug was reported using Firefox 3.0 or older, which is no longer supported. The bug has also not been changed in over 500 days and is still in UNCO.\nReporter, please retest this bug in Firefox 3.6.10 or later using a fresh profile, http://support.mozilla.com/en-US/kb/managing+profiles. If you still see this problem, please update the bug. If you no longer see the bug, please set the resolution to RESOLVED, WORKSFORME.\n\nThis is a mass search of unconfirmed bugs that have no activity on them, so if you feel a bug was marked in error, just remove the CLOSEME comment in the whiteboard within the next month.", "creator": "tdowner@mozilla.com", "creation_time": "2010-10-18T19:50:49Z", "text": "This bug was reported using Firefox 3.0 or older, which is no longer supported. The bug has also not been changed in over 500 days and is still in UNCO.\nReporter, please retest this bug in Firefox 3.6.10 or later using a fresh profile, http://support.mozilla.com/en-US/kb/managing+profiles. If you still see this problem, please update the bug. If you no longer see the bug, please set the resolution to RESOLVED, WORKSFORME.\n\nThis is a mass search of unconfirmed bugs that have no activity on them, so if you feel a bug was marked in error, just remove the CLOSEME comment in the whiteboard within the next month.", "author": "tdowner@mozilla.com", "tags": []}, {"bug_id": 389438, "id": 5082068, "is_private": false, "time": "2010-11-15T18:49:17Z", "count": 10, "attachment_id": null, "raw_text": "No reply, INCOMPLETE. Please retest with Firefox 3.6.12 or later and a new profile (http://support.mozilla.com/kb/Managing+profiles). If you continue to see this issue with the newest firefox and a new profile, then please comment on this bug.", "text": "No reply, INCOMPLETE. Please retest with Firefox 3.6.12 or later and a new profile (http://support.mozilla.com/kb/Managing+profiles). If you continue to see this issue with the newest firefox and a new profile, then please comment on this bug.", "creation_time": "2010-11-15T18:49:17Z", "creator": "tdowner@mozilla.com", "author": "tdowner@mozilla.com", "tags": []}]}}, "comments": {}}