{"bugs": {"638936": {"comments": [{"is_private": false, "tags": [], "time": "2011-03-04T21:46:41Z", "count": 0, "raw_text": "A user with an old NVIDIA Quadro driver on Windows XP is reporting he has driver version 8.3.1.3, so he's getting unwillingly whitelisted because on XP we require 6.14.12.5721 (while on vista/7 we require 8.17.12.5721).\n\nLet's only use the two last numbers here (12.5721).", "bug_id": 638936, "author": "jacob.benoit.1@gmail.com", "attachment_id": null, "id": 5322762, "creator": "jacob.benoit.1@gmail.com", "text": "A user with an old NVIDIA Quadro driver on Windows XP is reporting he has driver version 8.3.1.3, so he's getting unwillingly whitelisted because on XP we require 6.14.12.5721 (while on vista/7 we require 8.17.12.5721).\n\nLet's only use the two last numbers here (12.5721).", "creation_time": "2011-03-04T21:46:41Z"}, {"creation_time": "2011-03-04T22:40:20Z", "attachment_id": 517010, "id": 5322886, "text": "Created attachment 517010\ndon't get confused by NVIDIA driver versions\n\nTryserver build:\nhttp://tbpl.mozilla.org/?tree=MozillaTry&rev=ebc52969d789\n\nNot suggesting that we absolutely need this in Firefox 4.0.0.0.0. This patch is not 100% risk-free. I'm testing it as much as I can by spoofing, but my advice is to take that in the first bugfix update.", "raw_text": "Tryserver build:\nhttp://tbpl.mozilla.org/?tree=MozillaTry&rev=ebc52969d789\n\nNot suggesting that we absolutely need this in Firefox 4.0.0.0.0. This patch is not 100% risk-free. I'm testing it as much as I can by spoofing, but my advice is to take that in the first bugfix update.", "is_private": false, "tags": [], "author": "jacob.benoit.1@gmail.com", "creator": "jacob.benoit.1@gmail.com", "count": 1, "bug_id": 638936, "time": "2011-03-04T22:40:20Z"}, {"count": 2, "bug_id": 638936, "time": "2011-03-07T17:27:47Z", "author": "jacob.benoit.1@gmail.com", "creator": "jacob.benoit.1@gmail.com", "raw_text": "I have now tested this patch a lot using spoofing, and it seems to be running well.\n\nAlso, I have extracted some stats from crash reports, and they hint that we should really use this patch:\n\n$ grep AdapterVendorID 20110306-pub-crashdata.csv | wc -l\n94367\n\nThat tells us that 94.4K reports received yesterday were Firefox 4 (since Firefox 3 reports don't have AdapterVendorID)\n\n$ grep AdapterVendorID\\:\\ 10de 20110306-pub-crashdata.csv | wc -l\n29621\n\nThat tells us that out of these 94.4K reports, at least 29.6K are using Nvidia cards.\n\n$ egrep AdapterDriverVersion\\:\\ [0-9]\\\\.[0-9]\\\\.[0-9]\\\\.[0-9] 20110306-pub-cras\nhdata.csv  | grep AdapterVendorID\\:\\ 10de | wc -l\n5506\n\nThat tells us that out of these 29.6K Nvidia reports, 5.5K have these weird version numbers. That's 19% of all reports using Nvidia cards.\n\n$ egrep AdapterDriverVersion\\:\\ [7-9]\\\\.[0-9]\\\\.[0-9]\\\\.[0-9] 20110306-pub-cras\nhdata.csv  | grep AdapterVendorID\\:\\ 10de | wc -l\n1735\n\nThat tells us that out of these 5.5K reports, 1.7K are on machines getting incorrectly whitelisted (assuming they're all on WindowsXP), like the version '8.3.1.3' initially reported, because 8.3.1.3 >= 6.14.12.5721.\n\n1735/29621 = 6% of Nvidia users\n1735/94621 = 1.8% of all Firefox 4 reports\n\nSo I think that's quite serious and we should land the patch.", "is_private": false, "tags": [], "creation_time": "2011-03-07T17:27:47Z", "id": 5327429, "attachment_id": null, "text": "I have now tested this patch a lot using spoofing, and it seems to be running well.\n\nAlso, I have extracted some stats from crash reports, and they hint that we should really use this patch:\n\n$ grep AdapterVendorID 20110306-pub-crashdata.csv | wc -l\n94367\n\nThat tells us that 94.4K reports received yesterday were Firefox 4 (since Firefox 3 reports don't have AdapterVendorID)\n\n$ grep AdapterVendorID\\:\\ 10de 20110306-pub-crashdata.csv | wc -l\n29621\n\nThat tells us that out of these 94.4K reports, at least 29.6K are using Nvidia cards.\n\n$ egrep AdapterDriverVersion\\:\\ [0-9]\\\\.[0-9]\\\\.[0-9]\\\\.[0-9] 20110306-pub-cras\nhdata.csv  | grep AdapterVendorID\\:\\ 10de | wc -l\n5506\n\nThat tells us that out of these 29.6K Nvidia reports, 5.5K have these weird version numbers. That's 19% of all reports using Nvidia cards.\n\n$ egrep AdapterDriverVersion\\:\\ [7-9]\\\\.[0-9]\\\\.[0-9]\\\\.[0-9] 20110306-pub-cras\nhdata.csv  | grep AdapterVendorID\\:\\ 10de | wc -l\n1735\n\nThat tells us that out of these 5.5K reports, 1.7K are on machines getting incorrectly whitelisted (assuming they're all on WindowsXP), like the version '8.3.1.3' initially reported, because 8.3.1.3 >= 6.14.12.5721.\n\n1735/29621 = 6% of Nvidia users\n1735/94621 = 1.8% of all Firefox 4 reports\n\nSo I think that's quite serious and we should land the patch."}, {"raw_text": "There actually was a bug there that would have made the current entry in the downloaded blocklist, using 8.17.x.x numbers, not take effect. Scary! patch updated.", "is_private": false, "tags": [], "creation_time": "2011-03-07T17:36:04Z", "id": 5327456, "attachment_id": 517446, "text": "Created attachment 517446\nDon't get confused by NVIDIA driver versions, updated\n\nThere actually was a bug there that would have made the current entry in the downloaded blocklist, using 8.17.x.x numbers, not take effect. Scary! patch updated.", "count": 3, "bug_id": 638936, "time": "2011-03-07T17:36:04Z", "author": "jacob.benoit.1@gmail.com", "creator": "jacob.benoit.1@gmail.com"}, {"time": "2011-03-07T18:48:09Z", "is_private": false, "tags": [], "raw_text": "After discussion with Joe: since:\n * this is important enough that we want it in Firefox 4.0 if possible, but\n * this is probably not important enough to delay Firefox 4 release by itself,\nthis looks like a good 'RC ride-along' candidate.", "bug_id": 638936, "count": 4, "id": 5327678, "attachment_id": null, "text": "After discussion with Joe: since:\n * this is important enough that we want it in Firefox 4.0 if possible, but\n * this is probably not important enough to delay Firefox 4 release by itself,\nthis looks like a good 'RC ride-along' candidate.", "creator": "jacob.benoit.1@gmail.com", "author": "jacob.benoit.1@gmail.com", "creation_time": "2011-03-07T18:48:09Z"}, {"tags": [], "is_private": false, "time": "2011-03-07T19:13:12Z", "count": 5, "bug_id": 638936, "raw_text": "As follow-ups for this, we should a) insert a test that makes sure 8.1.1.0-style stuff is blocked on XP, and that the first two numbers also don't impact the blacklisting; b) contact NVIDIA to figure out what their long-term driver version style is going to be, so we can code for that.", "author": "joe@drew.ca", "text": "Comment on attachment 517446\nDon't get confused by NVIDIA driver versions, updated\n\nAs follow-ups for this, we should a) insert a test that makes sure 8.1.1.0-style stuff is blocked on XP, and that the first two numbers also don't impact the blacklisting; b) contact NVIDIA to figure out what their long-term driver version style is going to be, so we can code for that.", "creator": "joe@drew.ca", "attachment_id": 517446, "id": 5327766, "creation_time": "2011-03-07T19:13:12Z"}, {"author": "joe@drew.ca", "creator": "joe@drew.ca", "time": "2011-03-07T19:14:30Z", "count": 6, "bug_id": 638936, "text": "Er, actually, maybe we should remove that const_cast<>, and use a temporary instead. Not sure whether we can rely on the ability to modify const globals.", "attachment_id": null, "id": 5327769, "creation_time": "2011-03-07T19:14:30Z", "tags": [], "is_private": false, "raw_text": "Er, actually, maybe we should remove that const_cast<>, and use a temporary instead. Not sure whether we can rely on the ability to modify const globals."}, {"bug_id": 638936, "raw_text": "You can see the tests I wrote in bug 625160, and use them as a template.", "count": 7, "time": "2011-03-07T19:15:33Z", "tags": [], "is_private": false, "creation_time": "2011-03-07T19:15:33Z", "text": "You can see the tests I wrote in bug 625160, and use them as a template.", "creator": "joe@drew.ca", "id": 5327772, "attachment_id": null, "author": "joe@drew.ca"}]}}, "comments": {}}