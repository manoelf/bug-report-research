{"comments": {}, "bugs": {"691196": {"comments": [{"is_private": false, "count": 0, "id": 5753057, "creator": "mckeon@coretron.net", "time": "2011-10-02T20:55:57Z", "creation_time": "2011-10-02T20:55:57Z", "author": "mckeon@coretron.net", "attachment_id": 564081, "raw_text": "User Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:7.0.1) Gecko/20100101 Firefox/7.0.1\nBuild ID: 20110928134238\n\nSteps to reproduce:\n\nAttempted to create a CRL using the crlutil tool specifying an output file that already exists and is LARGER.\n\nie. Running these two commands will show the problem. The first command creates a CRL of size 484 bytes, the second should create a CRL of size 467 bytes, but does not.\n\nie. crlutil -d. -G -n \"Oracle Comms Root CA\" -f $HOME/.nss/password -o ca.crl << EOF\nupdate=20110901000000Z\nnextupdate=20110915235959Z\naddcert 4 20110805135000Z\nEOF\n\ncrlutil -d. -G -n \"Oracle Comms Root CA\" -f $HOME/.nss/password -o ca.crl << EOF\nupdate=20110916000000Z\naddcert 4 20110805135000Z\nEOF\n\n\n\n\nActual results:\n\nGeneration of the CRL (and output file) occurred BUT since the original file size was larger than the newer CRL, and  trucation of the file did not occur during opening, excess data was left at the end fo the file. As a result, the output file CRL was unusable, and attempting to use it in NSS would result in SEC_ERROR_EXTRA_INPUT\nerrors.\n\n\nExpected results:\n\nUpon writing the output file, the file should be truncated first.", "tags": [], "text": "Created attachment 564081\nAdd PR_TRUNCATE to output file create calls\n\nUser Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:7.0.1) Gecko/20100101 Firefox/7.0.1\nBuild ID: 20110928134238\n\nSteps to reproduce:\n\nAttempted to create a CRL using the crlutil tool specifying an output file that already exists and is LARGER.\n\nie. Running these two commands will show the problem. The first command creates a CRL of size 484 bytes, the second should create a CRL of size 467 bytes, but does not.\n\nie. crlutil -d. -G -n \"Oracle Comms Root CA\" -f $HOME/.nss/password -o ca.crl << EOF\nupdate=20110901000000Z\nnextupdate=20110915235959Z\naddcert 4 20110805135000Z\nEOF\n\ncrlutil -d. -G -n \"Oracle Comms Root CA\" -f $HOME/.nss/password -o ca.crl << EOF\nupdate=20110916000000Z\naddcert 4 20110805135000Z\nEOF\n\n\n\n\nActual results:\n\nGeneration of the CRL (and output file) occurred BUT since the original file size was larger than the newer CRL, and  trucation of the file did not occur during opening, excess data was left at the end fo the file. As a result, the output file CRL was unusable, and attempting to use it in NSS would result in SEC_ERROR_EXTRA_INPUT\nerrors.\n\n\nExpected results:\n\nUpon writing the output file, the file should be truncated first.", "bug_id": 691196}, {"attachment_id": null, "raw_text": "Please note that I have NOT tested or attempted compilation with the attached\npatch diffs.", "tags": [], "bug_id": 691196, "text": "Please note that I have NOT tested or attempted compilation with the attached\npatch diffs.", "is_private": false, "id": 5753061, "count": 1, "creator": "mckeon@coretron.net", "time": "2011-10-02T20:57:27Z", "creation_time": "2011-10-02T20:57:27Z", "author": "mckeon@coretron.net"}]}}}