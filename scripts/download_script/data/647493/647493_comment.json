{"comments": {}, "bugs": {"647493": {"comments": [{"author": "firstpeterfourten@gmail.com", "creator": "firstpeterfourten@gmail.com", "time": "2011-04-03T00:02:03Z", "count": 0, "bug_id": 647493, "text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.2.16) Gecko/20110319 Firefox/3.6.16 (.NET CLR 3.5.30729)\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9\n\nNewsgroup retention policy is disregarded on load. \n\n\nReproducible: Always\n\nSteps to Reproduce:\nI am subscribed to an IMAP server and there's a particular high-traffic bulletin board (newsgroup) that I've been subscribed to for a few months.  \n1. Right click on the newsgroup folder and choose Retention Policy tab.\n2. Uncheck Use my Account Settings, if checked.\n3. Select \"Delete all but the most recent 100 messages.\"  Check Always Keep Starred Messages.\n4. Click OK. \n5. Right click on folder again. \n6. Click Compact.\n7. Select all to observe that the folder now has only 100 messages in it, as desired. \n8. Click to view another folder.\n9. Click back to view the original folder.\nActual Results:  \n10.  All of the messages, from the time I started subscribing, are re-downloaded from the server.  There are now 2400 messages in this folder.  \n\n\nExpected Results:  \n10. If there are a few new messages, they are downloaded, and may replace some older unstarred messages (or bring the total over 100, until another Compact command).  The previously deleted messages should not be restored.\n\n\nMany of the messages have attachments.  This folder has filled my hard drive up completely on one machine and is getting there on a second.  That is a major issue because it crashes the computer completely!", "attachment_id": null, "id": 5388726, "creation_time": "2011-04-03T00:02:03Z", "tags": ["str"], "is_private": false, "raw_text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.2.16) Gecko/20110319 Firefox/3.6.16 (.NET CLR 3.5.30729)\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9\n\nNewsgroup retention policy is disregarded on load. \n\n\nReproducible: Always\n\nSteps to Reproduce:\nI am subscribed to an IMAP server and there's a particular high-traffic bulletin board (newsgroup) that I've been subscribed to for a few months.  \n1. Right click on the newsgroup folder and choose Retention Policy tab.\n2. Uncheck Use my Account Settings, if checked.\n3. Select \"Delete all but the most recent 100 messages.\"  Check Always Keep Starred Messages.\n4. Click OK. \n5. Right click on folder again. \n6. Click Compact.\n7. Select all to observe that the folder now has only 100 messages in it, as desired. \n8. Click to view another folder.\n9. Click back to view the original folder.\nActual Results:  \n10.  All of the messages, from the time I started subscribing, are re-downloaded from the server.  There are now 2400 messages in this folder.  \n\n\nExpected Results:  \n10. If there are a few new messages, they are downloaded, and may replace some older unstarred messages (or bring the total over 100, until another Compact command).  The previously deleted messages should not be restored.\n\n\nMany of the messages have attachments.  This folder has filled my hard drive up completely on one machine and is getting there on a second.  That is a major issue because it crashes the computer completely!"}, {"author": "firstpeterfourten@gmail.com", "creator": "firstpeterfourten@gmail.com", "count": 1, "bug_id": 647493, "time": "2011-04-03T00:02:41Z", "creation_time": "2011-04-03T00:02:41Z", "text": "Possibly related: Bug 479207, \"Message aging / retention (delete messages more than N days old) doesn't work\"", "id": 5388727, "attachment_id": null, "raw_text": "Possibly related: Bug 479207, \"Message aging / retention (delete messages more than N days old) doesn't work\"", "tags": [], "is_private": false}, {"count": 2, "raw_text": "This has been replicated by another subscriber (who will hopefully come comment here) who uses a temporal (7-day) retention policy.\n\nThe newsgroup host thinks it's probably related to the fact that I don't have the \"write\" permissions that would let me delete messages from that [shared] folder, because that would delete them for all users.\nPun intended.\n\nI've also looked at Tools->Options->Advanced->Network & Disk Space->Disk Space, where it says \"Use up to 50 MB of space for the cache.\"  40+ GB is definitely not respecting that limit.  Setting it to 0 doesn't help.", "bug_id": 647493, "is_private": false, "tags": [], "time": "2011-04-16T18:34:09Z", "creation_time": "2011-04-16T18:34:09Z", "author": "firstpeterfourten@gmail.com", "attachment_id": null, "id": 5413874, "creator": "firstpeterfourten@gmail.com", "text": "This has been replicated by another subscriber (who will hopefully come comment here) who uses a temporal (7-day) retention policy.\n\nThe newsgroup host thinks it's probably related to the fact that I don't have the \"write\" permissions that would let me delete messages from that [shared] folder, because that would delete them for all users.\nPun intended.\n\nI've also looked at Tools->Options->Advanced->Network & Disk Space->Disk Space, where it says \"Use up to 50 MB of space for the cache.\"  40+ GB is definitely not respecting that limit.  Setting it to 0 doesn't help."}, {"count": 3, "bug_id": 647493, "time": "2011-04-17T01:37:20Z", "author": "Pidgeot18@gmail.com", "creator": "Pidgeot18@gmail.com", "raw_text": "(In reply to comment #0)\n> I am subscribed to an IMAP server and there's a particular high-traffic\n> bulletin board (newsgroup) that I've been subscribed to for a few months.  \n\nIs this a newsgroup exposed as a folder on an IMAP server or a newsgroup on an NNTP server? That makes a big difference.\n\n> Many of the messages have attachments.  This folder has filled my hard drive up\n> completely on one machine and is getting there on a second.  That is a major\n> issue because it crashes the computer completely!\n\nNNTP does not store messages offline by default. IMAP does.\n\nEither way, you can specify whether or not you want the files to be stored offline (Synchronization & Storage tab in account settings). You can also specify to not store very large offline messages (cut off by total size).\n\n(In reply to comment #2)\n> I've also looked at Tools->Options->Advanced->Network & Disk Space->Disk Space,\n> where it says \"Use up to 50 MB of space for the cache.\"  40+ GB is definitely\n> not respecting that limit.  Setting it to 0 doesn't help.\n\nThat is not for the offline storage cache, that is for the generic Necko cache, i.e., backing disk store for the memory cache.", "tags": [], "is_private": false, "creation_time": "2011-04-17T01:37:20Z", "text": "(In reply to comment #0)\n> I am subscribed to an IMAP server and there's a particular high-traffic\n> bulletin board (newsgroup) that I've been subscribed to for a few months.  \n\nIs this a newsgroup exposed as a folder on an IMAP server or a newsgroup on an NNTP server? That makes a big difference.\n\n> Many of the messages have attachments.  This folder has filled my hard drive up\n> completely on one machine and is getting there on a second.  That is a major\n> issue because it crashes the computer completely!\n\nNNTP does not store messages offline by default. IMAP does.\n\nEither way, you can specify whether or not you want the files to be stored offline (Synchronization & Storage tab in account settings). You can also specify to not store very large offline messages (cut off by total size).\n\n(In reply to comment #2)\n> I've also looked at Tools->Options->Advanced->Network & Disk Space->Disk Space,\n> where it says \"Use up to 50 MB of space for the cache.\"  40+ GB is definitely\n> not respecting that limit.  Setting it to 0 doesn't help.\n\nThat is not for the offline storage cache, that is for the generic Necko cache, i.e., backing disk store for the memory cache.", "id": 5414161, "attachment_id": null}, {"text": "(In reply to comment #3)\n> Is this a newsgroup exposed as a folder on an IMAP server or a newsgroup on an\n> NNTP server? That makes a big difference.\n\nIt is a newsgroup exposed as a folder on an IMAP server.  Thunderbird calls it a newsgroup, so I used that term.\n\n> NNTP does not store messages offline by default. IMAP does.\n> \n> Either way, you can specify whether or not you want the files to be stored\n> offline (Synchronization & Storage tab in account settings). You can also\n> specify to not store very large offline messages (cut off by total size).\n\nThese policies should be overridden by the per-folder retention and synchronization policies.  I want to keep local copies of even large or old messages for the important e-mail folders, such as documents circulated with my work group.  \n\nThere are a few places where one can select the folder for \"synchronization\" for offline use.  These are selected by default, and selecting/deselecting a folder doesn't affect its subfolders.  Also, when a folder is added, it is selected for synchronization by default. \n\nAs I have two machines (A and B), if I add the folder on B - even as unsynchronized - it appears on A as a folder to be synchronized.  Certain operations may have the effect of unsubscribing and resubscribing to a folder, which has invisible effects to the user of that machine, but may cause the other one to start synchronizing that folder.  I now suspect that this may have happened to me, and that the backup I relied on (retention policy) just didn't hold up either.\n\nIf I find other clues or details, or see a reset of synchronization policy, I'll post that information.", "creator": "firstpeterfourten@gmail.com", "attachment_id": null, "id": 5416196, "author": "firstpeterfourten@gmail.com", "creation_time": "2011-04-18T17:53:38Z", "time": "2011-04-18T17:53:38Z", "tags": [], "is_private": false, "bug_id": 647493, "raw_text": "(In reply to comment #3)\n> Is this a newsgroup exposed as a folder on an IMAP server or a newsgroup on an\n> NNTP server? That makes a big difference.\n\nIt is a newsgroup exposed as a folder on an IMAP server.  Thunderbird calls it a newsgroup, so I used that term.\n\n> NNTP does not store messages offline by default. IMAP does.\n> \n> Either way, you can specify whether or not you want the files to be stored\n> offline (Synchronization & Storage tab in account settings). You can also\n> specify to not store very large offline messages (cut off by total size).\n\nThese policies should be overridden by the per-folder retention and synchronization policies.  I want to keep local copies of even large or old messages for the important e-mail folders, such as documents circulated with my work group.  \n\nThere are a few places where one can select the folder for \"synchronization\" for offline use.  These are selected by default, and selecting/deselecting a folder doesn't affect its subfolders.  Also, when a folder is added, it is selected for synchronization by default. \n\nAs I have two machines (A and B), if I add the folder on B - even as unsynchronized - it appears on A as a folder to be synchronized.  Certain operations may have the effect of unsubscribing and resubscribing to a folder, which has invisible effects to the user of that machine, but may cause the other one to start synchronizing that folder.  I now suspect that this may have happened to me, and that the backup I relied on (retention policy) just didn't hold up either.\n\nIf I find other clues or details, or see a reset of synchronization policy, I'll post that information.", "count": 4}, {"author": "vseerror@lehigh.edu", "id": 11241551, "attachment_id": null, "text": "(In reply to WBT from comment #4)\n> (In reply to comment #3)\n> > Is this a newsgroup exposed as a folder on an IMAP server or a newsgroup on an\n> > NNTP server? That makes a big difference.\n> \n> It is a newsgroup exposed as a folder on an IMAP server.  Thunderbird calls\n> it a newsgroup, so I used that term.\n\nWBT, do you still see your issue?\n\nI changed mozilla.test newsgroup to 20 message retention, posted 7 new articles, the 7 oldest articles aged off leaving just 20 articles", "creator": "vseerror@lehigh.edu", "creation_time": "2016-03-12T16:06:17Z", "is_private": false, "tags": [], "time": "2016-03-12T16:06:17Z", "count": 5, "raw_text": "(In reply to WBT from comment #4)\n> (In reply to comment #3)\n> > Is this a newsgroup exposed as a folder on an IMAP server or a newsgroup on an\n> > NNTP server? That makes a big difference.\n> \n> It is a newsgroup exposed as a folder on an IMAP server.  Thunderbird calls\n> it a newsgroup, so I used that term.\n\nWBT, do you still see your issue?\n\nI changed mozilla.test newsgroup to 20 message retention, posted 7 new articles, the 7 oldest articles aged off leaving just 20 articles", "bug_id": 647493}, {"creation_time": "2016-03-12T16:33:47Z", "text": "I just reproduced everything in Comment 0 (noting that I previously missed a substep 1b: click \"Properties\" in the right-click menu).   On this occasion, \"use my account settings\" had been selected, there were >2100 unread messages in the newsgroup folder.  After following the steps, there were 100 messages marked unread (those that survived the Compact step) and all the 2K+ messages re-downloaded in Step 10 were marked read.  Is there reason to believe this would have been fixed?", "creator": "firstpeterfourten@gmail.com", "id": 11241576, "attachment_id": null, "author": "firstpeterfourten@gmail.com", "bug_id": 647493, "raw_text": "I just reproduced everything in Comment 0 (noting that I previously missed a substep 1b: click \"Properties\" in the right-click menu).   On this occasion, \"use my account settings\" had been selected, there were >2100 unread messages in the newsgroup folder.  After following the steps, there were 100 messages marked unread (those that survived the Compact step) and all the 2K+ messages re-downloaded in Step 10 were marked read.  Is there reason to believe this would have been fixed?", "count": 6, "time": "2016-03-12T16:33:47Z", "tags": [], "is_private": false}, {"count": 7, "bug_id": 647493, "raw_text": "comment 0 mentions compact, so this can't be about a newsgroup. It must be an imap folder.  There are occassional reports of retention issues. http://mzl.la/1QTZg7o\n\nI won't be of much help here, but at least the summary now reflects reality", "tags": [], "is_private": false, "time": "2016-03-12T17:09:57Z", "creation_time": "2016-03-12T17:09:57Z", "author": "vseerror@lehigh.edu", "text": "comment 0 mentions compact, so this can't be about a newsgroup. It must be an imap folder.  There are occassional reports of retention issues. http://mzl.la/1QTZg7o\n\nI won't be of much help here, but at least the summary now reflects reality", "creator": "vseerror@lehigh.edu", "id": 11241600, "attachment_id": null}, {"time": "2016-06-27T01:17:00Z", "is_private": false, "tags": ["off-topic"], "raw_text": "My Thunderbird 45 install on Windows 10 is also affected. Advanced options say, as defaults want, to \"Use up to 350 MB of space for the cache\". \"C:\\Users\\Philippe\\AppData\\Roaming\\Thunderbird\\Profiles\\wadzk524.default\\ImapMail\\imap.gmail.com\" is 2.23 GB, which means it is not limited at all.", "bug_id": 647493, "count": 8, "attachment_id": null, "id": 11503246, "text": "My Thunderbird 45 install on Windows 10 is also affected. Advanced options say, as defaults want, to \"Use up to 350 MB of space for the cache\". \"C:\\Users\\Philippe\\AppData\\Roaming\\Thunderbird\\Profiles\\wadzk524.default\\ImapMail\\imap.gmail.com\" is 2.23 GB, which means it is not limited at all.", "creator": "chealer@gmail.com", "author": "chealer@gmail.com", "creation_time": "2016-06-27T01:17:00Z"}, {"creation_time": "2017-12-23T18:18:49Z", "author": "vseerror@lehigh.edu", "id": 12934483, "attachment_id": null, "creator": "vseerror@lehigh.edu", "text": "David, can you distill comment 0, comment 4, comment 6 to something actionable?", "count": 9, "raw_text": "David, can you distill comment 0, comment 4, comment 6 to something actionable?", "bug_id": 647493, "is_private": false, "tags": [], "time": "2017-12-23T18:18:49Z"}, {"creation_time": "2017-12-23T19:32:25Z", "text": "Action item in comment #9 was misdirected to the wrong David.  I do not use IMAP and and no experience with it.", "creator": "david@rossde.com", "attachment_id": null, "id": 12934513, "author": "david@rossde.com", "bug_id": 647493, "raw_text": "Action item in comment #9 was misdirected to the wrong David.  I do not use IMAP and and no experience with it.", "count": 10, "time": "2017-12-23T19:32:25Z", "tags": [], "is_private": false}, {"time": "2018-05-29T23:10:59Z", "tags": [], "is_private": false, "bug_id": 647493, "raw_text": "(In reply to David E. Ross from comment #10)\n> Action item in comment #9 was misdirected to the wrong David.  I do not use\n> IMAP and and no experience with it.\n\nSorry, summary is wrong - this is actually about news - ref. comment 6", "count": 11, "creator": "vseerror@lehigh.edu", "text": "(In reply to David E. Ross from comment #10)\n> Action item in comment #9 was misdirected to the wrong David.  I do not use\n> IMAP and and no experience with it.\n\nSorry, summary is wrong - this is actually about news - ref. comment 6", "attachment_id": null, "id": 13372895, "author": "vseerror@lehigh.edu", "creation_time": "2018-05-29T23:10:59Z"}, {"text": "(In reply to Wayne Mery (:wsmwk) from comment #11)\n> (In reply to David E. Ross from comment #10)\n> > Action item in comment #9 was misdirected to the wrong David.  I do not use\n> > IMAP and and no experience with it.\n> \n> Sorry, summary is wrong - this is actually about news - ref. comment 6\n\nNevertheless, I am not at all familiar with this bug report.  The circumstances presented in the Description is definitely not how I setup my use of newsgroups.", "creator": "david@rossde.com", "id": 13382284, "attachment_id": null, "author": "david@rossde.com", "creation_time": "2018-06-02T17:10:04Z", "time": "2018-06-02T17:10:04Z", "tags": [], "is_private": false, "bug_id": 647493, "raw_text": "(In reply to Wayne Mery (:wsmwk) from comment #11)\n> (In reply to David E. Ross from comment #10)\n> > Action item in comment #9 was misdirected to the wrong David.  I do not use\n> > IMAP and and no experience with it.\n> \n> Sorry, summary is wrong - this is actually about news - ref. comment 6\n\nNevertheless, I am not at all familiar with this bug report.  The circumstances presented in the Description is definitely not how I setup my use of newsgroups.", "count": 12}, {"author": "antoine.mechelynck@gmail.com", "attachment_id": null, "id": 13422042, "creator": "antoine.mechelynck@gmail.com", "text": "1. Sorry for late reply.\n2. Sorry, not using Mail & Newsgroup anymore, I read my mail by webmail nowadays.", "creation_time": "2018-06-24T14:44:25Z", "is_private": false, "tags": [], "time": "2018-06-24T14:44:25Z", "count": 13, "raw_text": "1. Sorry for late reply.\n2. Sorry, not using Mail & Newsgroup anymore, I read my mail by webmail nowadays.", "bug_id": 647493}, {"creator": "vseerror@lehigh.edu", "text": "(In reply to WBT from comment #4)\n> (In reply to comment #3)\n> > Is this a newsgroup exposed as a folder on an IMAP server or a newsgroup on an\n> > NNTP server? That makes a big difference.\n> \n> It is a newsgroup exposed as a folder on an IMAP server.  Thunderbird calls\n> it a newsgroup, so I used that term.\n\nI still cannot fathom this. Please post a screen shot of the folder properties _general information_ tab, so we can clear this up", "id": 14081393, "attachment_id": null, "author": "vseerror@lehigh.edu", "creation_time": "2019-04-28T10:57:29Z", "time": "2019-04-28T10:57:29Z", "tags": [], "is_private": false, "bug_id": 647493, "raw_text": "(In reply to WBT from comment #4)\n> (In reply to comment #3)\n> > Is this a newsgroup exposed as a folder on an IMAP server or a newsgroup on an\n> > NNTP server? That makes a big difference.\n> \n> It is a newsgroup exposed as a folder on an IMAP server.  Thunderbird calls\n> it a newsgroup, so I used that term.\n\nI still cannot fathom this. Please post a screen shot of the folder properties _general information_ tab, so we can clear this up", "count": 14}, {"text": "Apologies, I no longer use TB after too many years of waiting on unfixed bugs like this which seriously impaired my ability to use the computers for other tasks.  I did get *very* detailed in the original post and would prefer if someone else tried duplication, instead of requiring that *only OP* return *8 years later* or else have the bug closed for everybody.", "id": 14118665, "attachment_id": null, "creation_time": "2019-05-14T23:13:48Z", "tags": [], "is_private": false, "raw_text": "Apologies, I no longer use TB after too many years of waiting on unfixed bugs like this which seriously impaired my ability to use the computers for other tasks.  I did get *very* detailed in the original post and would prefer if someone else tried duplication, instead of requiring that *only OP* return *8 years later* or else have the bug closed for everybody.", "author": "firstpeterfourten@gmail.com", "creator": "firstpeterfourten@gmail.com", "time": "2019-05-14T23:13:48Z", "count": 15, "bug_id": 647493}, {"is_private": false, "tags": [], "raw_text": "Hopefully Ben can have a look.  Gene or someone else was also looking at retention issues", "id": 14118787, "attachment_id": null, "text": "Hopefully Ben can have a look.  Gene or someone else was also looking at retention issues", "creation_time": "2019-05-15T01:31:25Z", "time": "2019-05-15T01:31:25Z", "bug_id": 647493, "count": 16, "creator": "vseerror@lehigh.edu", "author": "vseerror@lehigh.edu"}, {"creation_time": "2019-09-02T14:15:22Z", "author": "benjamin@thunderbird.net", "text": "I know everyone is busy, but Gene do you mind having a look? Wayne which Ben are you referring to?", "creator": "benjamin@thunderbird.net", "id": 14337335, "attachment_id": null, "count": 17, "bug_id": 647493, "raw_text": "I know everyone is busy, but Gene do you mind having a look? Wayne which Ben are you referring to?", "tags": [], "is_private": false, "time": "2019-09-02T14:15:22Z"}, {"text": "I tried on a gmail imap folder with about 10 test (useless) messages in it. I told to to keep just the most recent 3 and it worked, but compact was needed. However, what I see is that it is not based on the date of the message but on the order received (actually UID of the message). So it actually kept the 3 messages with the highest uid which means they were most recently placed in the folder (but not necessarily the 3 with most recent date).\n\nI then copied another message to the folder with the limit of 3 messages. This added a 4th message that stayed. Only compact again deleted the \"oldest\" message.  Looking at imap log, I see that the older messages are only marked as deleted when a compact is done. I haven't seen a background thread (like autosync) going through and trimming folders automatically . So this might be considered a bug. However, I don't see old messages that were previously deleted being re-downloaded as mentioned in comment 0. \n\nNote also, that the reporter mentioned shared folders. That might be why he reported a problem and I don't see the same problem with a normal folder.", "creator": "gds@chartertn.net", "id": 14337560, "attachment_id": null, "author": "gds@chartertn.net", "creation_time": "2019-09-02T17:09:44Z", "time": "2019-09-02T17:09:44Z", "tags": [], "is_private": false, "bug_id": 647493, "raw_text": "I tried on a gmail imap folder with about 10 test (useless) messages in it. I told to to keep just the most recent 3 and it worked, but compact was needed. However, what I see is that it is not based on the date of the message but on the order received (actually UID of the message). So it actually kept the 3 messages with the highest uid which means they were most recently placed in the folder (but not necessarily the 3 with most recent date).\n\nI then copied another message to the folder with the limit of 3 messages. This added a 4th message that stayed. Only compact again deleted the \"oldest\" message.  Looking at imap log, I see that the older messages are only marked as deleted when a compact is done. I haven't seen a background thread (like autosync) going through and trimming folders automatically . So this might be considered a bug. However, I don't see old messages that were previously deleted being re-downloaded as mentioned in comment 0. \n\nNote also, that the reporter mentioned shared folders. That might be why he reported a problem and I don't see the same problem with a normal folder.", "count": 18}]}}}