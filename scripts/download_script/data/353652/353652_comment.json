{"comments": {}, "bugs": {"353652": {"comments": [{"id": 2989446, "count": 0, "bug_id": 353652, "tags": [], "text": "Steps to reproduce:\n\n1) Open a tab\n2) Close it\n3) Try to unclose it\n\nActual results: No context menu entry on tab strip, 'recently closed tabs' entry in history menu disabled and the following in the error console (when opening history menu).\n\nError: this._windows[aWindow.__SSi] has no properties\nSource File: file:///F:/Program%20Files/Mozilla%20Firefox/components/nsSessionStore.js\nLine: 648\n\nError: uncaught exception: [Exception... \"'[JavaScript Error: \"this._windows[aWindow.__SSi] has no properties\" {file: \"file:///F:/Program%20Files/Mozilla%20Firefox/components/nsSessionStore.js\" line: 648}]' when calling method: [nsISessionStore::getClosedTabCount]\"  nsresult: \"0x80570021 (NS_ERROR_XPC_JAVASCRIPT_ERROR_WITH_DETAILS)\"  location: \"JS frame :: chrome://browser/content/browser.js :: PHM_toggleRecentlyClosedTabs :: line 6674\"  data: yes]\n\nExpected results: Get my tab back\n\n\nTest builds: Minefield/20060920 and Minefield/20060921.\nOccurs in safe mode as well.\n\nN.B. In my profile I have a file named 'sessionstore.ini', that lists websites I last visited several weeks ago, but nothing from the last session I had.", "author": "bugzilla1@dougweb.org", "creation_time": "2006-09-21T14:54:33Z", "time": "2006-09-21T14:54:33Z", "creator": "bugzilla1@dougweb.org", "attachment_id": null, "raw_text": "Steps to reproduce:\n\n1) Open a tab\n2) Close it\n3) Try to unclose it\n\nActual results: No context menu entry on tab strip, 'recently closed tabs' entry in history menu disabled and the following in the error console (when opening history menu).\n\nError: this._windows[aWindow.__SSi] has no properties\nSource File: file:///F:/Program%20Files/Mozilla%20Firefox/components/nsSessionStore.js\nLine: 648\n\nError: uncaught exception: [Exception... \"'[JavaScript Error: \"this._windows[aWindow.__SSi] has no properties\" {file: \"file:///F:/Program%20Files/Mozilla%20Firefox/components/nsSessionStore.js\" line: 648}]' when calling method: [nsISessionStore::getClosedTabCount]\"  nsresult: \"0x80570021 (NS_ERROR_XPC_JAVASCRIPT_ERROR_WITH_DETAILS)\"  location: \"JS frame :: chrome://browser/content/browser.js :: PHM_toggleRecentlyClosedTabs :: line 6674\"  data: yes]\n\nExpected results: Get my tab back\n\n\nTest builds: Minefield/20060920 and Minefield/20060921.\nOccurs in safe mode as well.\n\nN.B. In my profile I have a file named 'sessionstore.ini', that lists websites I last visited several weeks ago, but nothing from the last session I had.", "is_private": false}, {"attachment_id": null, "creator": "ria.klaassen@gmail.com", "raw_text": "I can't reproduce this with Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9a1) Gecko/20060921 Minefield/3.0a1\nThe errors however are nearly similar to the ones in Bug 353297.", "time": "2006-09-21T15:06:18Z", "creation_time": "2006-09-21T15:06:18Z", "is_private": false, "id": 2989452, "count": 1, "text": "I can't reproduce this with Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9a1) Gecko/20060921 Minefield/3.0a1\nThe errors however are nearly similar to the ones in Bug 353297.", "author": "ria.klaassen@gmail.com", "bug_id": 353652, "tags": []}, {"is_private": false, "raw_text": "These errors happen when SessionStore is disabled (see bug 352524) or not correctly initialized. Can you verify that SessionStore is indeed running (10 seconds after startup, the file sessionstore.js in your profile should contain the key-value-pair state:\"running\".\n\nIf that's not the case, can you indicate a regression window?\n\n(In reply to comment #0)\n> N.B. In my profile I have a file named 'sessionstore.ini', that lists websites\n> I last visited several weeks ago, but nothing from the last session I had.\n\nThat's just a remainder from the file format change (sessionstore.ini to sessionstore.js) a few months ago (see bug 328162).", "attachment_id": null, "creator": "zeniko@gmail.com", "time": "2006-09-21T15:12:25Z", "creation_time": "2006-09-21T15:12:25Z", "author": "zeniko@gmail.com", "text": "These errors happen when SessionStore is disabled (see bug 352524) or not correctly initialized. Can you verify that SessionStore is indeed running (10 seconds after startup, the file sessionstore.js in your profile should contain the key-value-pair state:\"running\".\n\nIf that's not the case, can you indicate a regression window?\n\n(In reply to comment #0)\n> N.B. In my profile I have a file named 'sessionstore.ini', that lists websites\n> I last visited several weeks ago, but nothing from the last session I had.\n\nThat's just a remainder from the file format change (sessionstore.ini to sessionstore.js) a few months ago (see bug 328162).", "tags": [], "bug_id": 353652, "count": 2, "id": 2989458}, {"creation_time": "2006-09-21T15:34:18Z", "time": "2006-09-21T15:34:18Z", "creator": "polidobj@yahoo.com", "attachment_id": null, "raw_text": "From what Simon said I'm guessing the reporter probably needs to change browser.startup.page to 3.  The pref used to control session restore changed weeks ago which probably corresponds to the age of the reporter's sessionstore ini.", "is_private": false, "id": 2989484, "count": 3, "bug_id": 353652, "tags": [], "text": "From what Simon said I'm guessing the reporter probably needs to change browser.startup.page to 3.  The pref used to control session restore changed weeks ago which probably corresponds to the age of the reporter's sessionstore ini.", "author": "polidobj@yahoo.com"}, {"is_private": false, "creator": "polidobj@yahoo.com", "attachment_id": null, "raw_text": "Is undo close tab supposed to work without session restore?", "creation_time": "2006-09-21T15:37:04Z", "time": "2006-09-21T15:37:04Z", "text": "Is undo close tab supposed to work without session restore?", "author": "polidobj@yahoo.com", "bug_id": 353652, "tags": [], "id": 2989488, "count": 4}, {"is_private": false, "raw_text": "(In reply to comment #2)\n> These errors happen when SessionStore is disabled (see bug 352524) or not\n> correctly initialized. Can you verify that SessionStore is indeed running (10\n> seconds after startup, the file sessionstore.js in your profile should contain\n> the key-value-pair state:\"running\".\nI certainly haven't disabled sessionstore.\n\nIn about:config, I see\n\nbrowser.sessionhistory.max_entries : 50\nbrowser.sessionhistory.max_total_viewers : -1\n\nwhich are both the default values.\n\nI can't see a file named 'sessionstore.js'. Should it be in the root of my profile, along with the old sessionstore.ini?\n\n> \n> If that's not the case, can you indicate a regression window?\nIt's been a few weeks since I last wanted to undo a tab, so I'll have to download some old builds.\n> \n> (In reply to comment #0)\n> > N.B. In my profile I have a file named 'sessionstore.ini', that lists websites\n> > I last visited several weeks ago, but nothing from the last session I had.\n> \n> That's just a remainder from the file format change (sessionstore.ini to\n> sessionstore.js) a few months ago (see bug 328162).\n> \n\n", "creator": "bugzilla1@dougweb.org", "attachment_id": null, "creation_time": "2006-09-21T15:41:55Z", "time": "2006-09-21T15:41:55Z", "author": "bugzilla1@dougweb.org", "text": "(In reply to comment #2)\n> These errors happen when SessionStore is disabled (see bug 352524) or not\n> correctly initialized. Can you verify that SessionStore is indeed running (10\n> seconds after startup, the file sessionstore.js in your profile should contain\n> the key-value-pair state:\"running\".\nI certainly haven't disabled sessionstore.\n\nIn about:config, I see\n\nbrowser.sessionhistory.max_entries : 50\nbrowser.sessionhistory.max_total_viewers : -1\n\nwhich are both the default values.\n\nI can't see a file named 'sessionstore.js'. Should it be in the root of my profile, along with the old sessionstore.ini?\n\n> \n> If that's not the case, can you indicate a regression window?\nIt's been a few weeks since I last wanted to undo a tab, so I'll have to download some old builds.\n> \n> (In reply to comment #0)\n> > N.B. In my profile I have a file named 'sessionstore.ini', that lists websites\n> > I last visited several weeks ago, but nothing from the last session I had.\n> \n> That's just a remainder from the file format change (sessionstore.ini to\n> sessionstore.js) a few months ago (see bug 328162).\n> \n\n", "tags": [], "bug_id": 353652, "count": 5, "id": 2989490}, {"creator": "bugzilla1@dougweb.org", "attachment_id": null, "raw_text": "(In reply to comment #3)\n> From what Simon said I'm guessing the reporter probably needs to change\n> browser.startup.page to 3.  The pref used to control session restore changed\n> weeks ago which probably corresponds to the age of the reporter's sessionstore\n> ini.\n> \n\n1) I've just tried changing the pref, and undo close tab is still borked.\n2) I don't see how/why wanting a blank page when opening Firefox should have any effect on my ability to undo closed tabs ?!", "creation_time": "2006-09-21T15:44:46Z", "time": "2006-09-21T15:44:46Z", "is_private": false, "id": 2989493, "count": 6, "text": "(In reply to comment #3)\n> From what Simon said I'm guessing the reporter probably needs to change\n> browser.startup.page to 3.  The pref used to control session restore changed\n> weeks ago which probably corresponds to the age of the reporter's sessionstore\n> ini.\n> \n\n1) I've just tried changing the pref, and undo close tab is still borked.\n2) I don't see how/why wanting a blank page when opening Firefox should have any effect on my ability to undo closed tabs ?!", "author": "bugzilla1@dougweb.org", "bug_id": 353652, "tags": []}, {"attachment_id": null, "creator": "zeniko@gmail.com", "raw_text": "(In reply to comment #4)\n> Is undo close tab supposed to work without session restore?\n\nIt doesn't work without the SessionStore service, but it of course should work without having one's session resumed at startup or after a crash.\n\n(In reply to comment #6)\n> 2) I don't see how/why wanting a blank page when opening Firefox should have\n> any effect on my ability to undo closed tabs ?!\n\nIt doesn't. The pref in question is browser.sessionstore.enabled which should be non-existent or |true|.", "time": "2006-09-21T15:47:34Z", "id": 2989495, "creation_time": "2006-09-21T15:47:34Z", "count": 7, "text": "(In reply to comment #4)\n> Is undo close tab supposed to work without session restore?\n\nIt doesn't work without the SessionStore service, but it of course should work without having one's session resumed at startup or after a crash.\n\n(In reply to comment #6)\n> 2) I don't see how/why wanting a blank page when opening Firefox should have\n> any effect on my ability to undo closed tabs ?!\n\nIt doesn't. The pref in question is browser.sessionstore.enabled which should be non-existent or |true|.", "author": "zeniko@gmail.com", "bug_id": 353652, "is_private": false, "tags": []}, {"is_private": false, "creation_time": "2006-09-21T15:55:32Z", "time": "2006-09-21T15:55:32Z", "creator": "bugzilla1@dougweb.org", "attachment_id": null, "raw_text": "> It doesn't. The pref in question is browser.sessionstore.enabled which should\n> be non-existent or |true|.\n> \n\nIt's non-existent.", "bug_id": 353652, "tags": [], "text": "> It doesn't. The pref in question is browser.sessionstore.enabled which should\n> be non-existent or |true|.\n> \n\nIt's non-existent.", "author": "bugzilla1@dougweb.org", "id": 2989500, "count": 8}, {"id": 2989516, "count": 9, "bug_id": 353652, "tags": [], "text": "(In reply to comment #5)\n> I can't see a file named 'sessionstore.js'. Should it be in the root of my\n> profile, along with the old sessionstore.ini?\n\nYes, it should be in the very same place.\n\n(In reply to comment #8)\n> It's non-existent.\n\nThis sounds like SessionStore isn't correctly initialized for you, which however is - as Ria pointed out - WORKSFORME.\n\nPlease do a clean install (and use a clean profile) to verify this.", "author": "zeniko@gmail.com", "creation_time": "2006-09-21T16:15:18Z", "time": "2006-09-21T16:15:18Z", "creator": "zeniko@gmail.com", "attachment_id": null, "raw_text": "(In reply to comment #5)\n> I can't see a file named 'sessionstore.js'. Should it be in the root of my\n> profile, along with the old sessionstore.ini?\n\nYes, it should be in the very same place.\n\n(In reply to comment #8)\n> It's non-existent.\n\nThis sounds like SessionStore isn't correctly initialized for you, which however is - as Ria pointed out - WORKSFORME.\n\nPlease do a clean install (and use a clean profile) to verify this.", "is_private": false}, {"is_private": false, "raw_text": "A clean profile restored functionality.\n\nI then restored my original profile and started deleting files to see if I could identify the culprit.\n\nThe problem file turned out to be bookmarks_history.sqlite, which I believe is places code?\n\nCould a places bug be the reason why sessionstore stopped working?", "attachment_id": null, "creator": "bugzilla1@dougweb.org", "time": "2006-09-21T16:42:43Z", "creation_time": "2006-09-21T16:42:43Z", "author": "bugzilla1@dougweb.org", "text": "A clean profile restored functionality.\n\nI then restored my original profile and started deleting files to see if I could identify the culprit.\n\nThe problem file turned out to be bookmarks_history.sqlite, which I believe is places code?\n\nCould a places bug be the reason why sessionstore stopped working?", "tags": [], "bug_id": 353652, "count": 10, "id": 2989541}, {"is_private": false, "creator": "bugzilla1@dougweb.org", "attachment_id": null, "raw_text": "This was fixed by bug 353571.", "creation_time": "2006-09-30T19:08:10Z", "time": "2006-09-30T19:08:10Z", "text": "This was fixed by bug 353571.", "author": "bugzilla1@dougweb.org", "bug_id": 353652, "tags": [], "id": 2998991, "count": 11}]}}}