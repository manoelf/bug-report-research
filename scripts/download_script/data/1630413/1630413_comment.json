{"bugs": {"1630413": {"comments": [{"creation_time": "2020-04-15T21:09:41Z", "creator": "mixedpuppy@gmail.com", "attachment_id": null, "text": "", "id": 14757816, "raw_text": "", "time": "2020-04-15T21:09:41Z", "author": "mixedpuppy@gmail.com", "tags": [], "bug_id": 1630413, "is_private": false, "count": 0}, {"creation_time": "2020-04-17T01:40:37Z", "attachment_id": 9141137, "creator": "mixedpuppy@gmail.com", "id": 14760622, "text": "Created attachment 9141137\nBug 1630413 support unlimitedStorage as an optional extension permission", "raw_text": "", "time": "2020-04-17T01:40:37Z", "author": "mixedpuppy@gmail.com", "count": 1, "is_private": false, "tags": [], "bug_id": 1630413}, {"author": "mixedpuppy@gmail.com", "is_private": false, "count": 2, "tags": [], "bug_id": 1630413, "raw_text": "Since we have code to test the removal of the permission on addon upgrade, I'm presuming that we're good to go.  However, it might be good to know what, if any, issues there are with removing the peristed storage.  Andrew, any thoughts on that?", "time": "2020-04-17T01:42:22Z", "id": 14760626, "text": "Since we have code to test the removal of the permission on addon upgrade, I'm presuming that we're good to go.  However, it might be good to know what, if any, issues there are with removing the peristed storage.  Andrew, any thoughts on that?", "creation_time": "2020-04-17T01:42:22Z", "attachment_id": null, "creator": "mixedpuppy@gmail.com"}, {"raw_text": "So, bug 1558478 applies in that once persistent-storage is granted to an origin, it's currently forever granted unless you wipe the data for the origin.  I'm not sure there's practically anything you can do about that other than wiping the origin instead of removing the permission.  This sounds somewhat user hostile though.  Taking the action of removing the permission should be sufficient for QuotaManager to auto-correct in the future, though.", "time": "2020-04-17T13:14:46Z", "author": "bugmail@asutherland.org", "count": 3, "is_private": false, "bug_id": 1630413, "tags": [], "creation_time": "2020-04-17T13:14:46Z", "attachment_id": null, "creator": "bugmail@asutherland.org", "id": 14761397, "text": "So, bug 1558478 applies in that once persistent-storage is granted to an origin, it's currently forever granted unless you wipe the data for the origin.  I'm not sure there's practically anything you can do about that other than wiping the origin instead of removing the permission.  This sounds somewhat user hostile though.  Taking the action of removing the permission should be sufficient for QuotaManager to auto-correct in the future, though."}, {"author": "mixedpuppy@gmail.com", "bug_id": 1630413, "tags": [], "is_private": false, "count": 4, "raw_text": "", "time": "2020-04-21T19:06:59Z", "id": 14770019, "text": "Created attachment 9142145\nBug 1630413 don't prompt for unlimitedStorage extension permission", "creation_time": "2020-04-21T19:06:59Z", "attachment_id": 9142145, "creator": "mixedpuppy@gmail.com"}, {"author": "rob@robwu.nl", "tags": [], "bug_id": 1630413, "count": 5, "is_private": false, "raw_text": "Needs to be updated:\nhttps://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/storage/local\nhttps://extensionworkshop.com/documentation/develop/request-the-right-permissions/\n\nand maybe also\nhttps://support.mozilla.org/en-US/kb/permission-request-messages-firefox-extensions#w_store-unlimited-amount-of-client-side-data", "time": "2020-04-22T20:51:25Z", "text": "Needs to be updated:\nhttps://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/storage/local\nhttps://extensionworkshop.com/documentation/develop/request-the-right-permissions/\n\nand maybe also\nhttps://support.mozilla.org/en-US/kb/permission-request-messages-firefox-extensions#w_store-unlimited-amount-of-client-side-data", "id": 14772675, "creation_time": "2020-04-22T20:51:25Z", "attachment_id": null, "creator": "rob@robwu.nl"}, {"text": "Pushed by scaraveo@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/4d7dd79ef9ec\ndon't prompt for unlimitedStorage extension permission r=rpl", "id": 14786702, "attachment_id": null, "creator": "pulsebot@bots.tld", "creation_time": "2020-04-29T17:25:21Z", "count": 6, "is_private": false, "tags": [], "bug_id": 1630413, "author": "pulsebot@bots.tld", "time": "2020-04-29T17:25:21Z", "raw_text": "Pushed by scaraveo@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/4d7dd79ef9ec\ndon't prompt for unlimitedStorage extension permission r=rpl"}, {"time": "2020-04-29T21:59:20Z", "raw_text": "https://hg.mozilla.org/mozilla-central/rev/4d7dd79ef9ec", "count": 7, "is_private": false, "tags": ["bugherder"], "bug_id": 1630413, "author": "malexandru@mozilla.com", "attachment_id": null, "creator": "malexandru@mozilla.com", "creation_time": "2020-04-29T21:59:20Z", "id": 14787254, "text": "https://hg.mozilla.org/mozilla-central/rev/4d7dd79ef9ec"}, {"creation_time": "2020-05-01T10:20:04Z", "raw_text": "To confirm, the documentation changes needed are to state that this permission is now optional?", "creator": "richard@sherpa.co.nz", "attachment_id": null, "time": "2020-05-01T10:20:04Z", "id": 14790818, "text": "To confirm, the documentation changes needed are to state that this permission is now optional?", "author": "richard@sherpa.co.nz", "is_private": false, "count": 8, "bug_id": 1630413, "tags": []}, {"time": "2020-05-01T15:31:21Z", "creator": "rob@robwu.nl", "attachment_id": null, "creation_time": "2020-05-01T15:31:21Z", "raw_text": "The permission is optional AND there is no permission warning any more (see comment 5).", "tags": [], "bug_id": 1630413, "is_private": false, "count": 9, "text": "The permission is optional AND there is no permission warning any more (see comment 5).", "id": 14791443, "author": "rob@robwu.nl"}, {"author": "mixedpuppy@gmail.com", "bug_id": 1630413, "tags": [], "count": 10, "is_private": false, "raw_text": "(In reply to Rob Wu [:robwu] from comment #9)\n> The permission is optional AND there is no permission warning any more (see comment 5).\n\nIt is not optional, but we do not prompt for it at this time to allow addons to update without interruption.  It will eventually move to optional, and we'll may re-introduce the prompt at that time.\n\nGiven that, I'm not certain we need to make a change unless there is anything that states it will be in the permission prompt at install.", "time": "2020-05-01T16:21:41Z", "id": 14791513, "text": "(In reply to Rob Wu [:robwu] from comment #9)\n> The permission is optional AND there is no permission warning any more (see comment 5).\n\nIt is not optional, but we do not prompt for it at this time to allow addons to update without interruption.  It will eventually move to optional, and we'll may re-introduce the prompt at that time.\n\nGiven that, I'm not certain we need to make a change unless there is anything that states it will be in the permission prompt at install.", "creation_time": "2020-05-01T16:21:41Z", "attachment_id": null, "creator": "mixedpuppy@gmail.com"}, {"id": 14800540, "text": "There is mention of the prompting from unlimitedStorage on the Extension Workshop page [Requesting the right permissions](https://extensionworkshop.com/documentation/develop/request-the-right-permissions/) and an appropriate change has been submitted in [Removal of unlimitedStorage prompting #633](https://github.com/mozilla/extension-workshop/pull/633). The [release notes](https://wiki.developer.mozilla.org/en-US/docs/Mozilla/Firefox/Releases/77#Other_2) have also been updated. Please let me know if you think there should be any further changes.", "creation_time": "2020-05-06T15:43:03Z", "attachment_id": null, "creator": "richard@sherpa.co.nz", "author": "richard@sherpa.co.nz", "bug_id": 1630413, "tags": [], "count": 11, "is_private": false, "raw_text": "There is mention of the prompting from unlimitedStorage on the Extension Workshop page [Requesting the right permissions](https://extensionworkshop.com/documentation/develop/request-the-right-permissions/) and an appropriate change has been submitted in [Removal of unlimitedStorage prompting #633](https://github.com/mozilla/extension-workshop/pull/633). The [release notes](https://wiki.developer.mozilla.org/en-US/docs/Mozilla/Firefox/Releases/77#Other_2) have also been updated. Please let me know if you think there should be any further changes.", "time": "2020-05-06T15:43:03Z"}, {"raw_text": "thanks!", "time": "2020-05-06T16:46:41Z", "author": "mixedpuppy@gmail.com", "count": 12, "is_private": false, "bug_id": 1630413, "tags": [], "creation_time": "2020-05-06T16:46:41Z", "creator": "mixedpuppy@gmail.com", "attachment_id": null, "text": "thanks!", "id": 14800708}]}}, "comments": {}}