{"bugs": {"1629721": {"comments": [{"creation_time": "2020-04-14T01:36:19Z", "creator": "tcampbell@mozilla.com", "tags": [], "count": 0, "time": "2020-04-14T01:36:19Z", "is_private": false, "raw_text": "The `TreatAsRunOnce` flag is a source of the BytecodeEmitter reading and writing from live `BaseScript` instances which we would like to avoid for Project Stencil. These patches also try to unify more of the lazy and non-lazy paths in the BCE.", "text": "The `TreatAsRunOnce` flag is a source of the BytecodeEmitter reading and writing from live `BaseScript` instances which we would like to avoid for Project Stencil. These patches also try to unify more of the lazy and non-lazy paths in the BCE.", "id": 14753043, "author": "tcampbell@mozilla.com", "bug_id": 1629721, "attachment_id": null}, {"author": "tcampbell@mozilla.com", "id": 14753045, "raw_text": "\n\nDepends on D70726", "text": "Created attachment 9140290\nBug 1629721 - Use the TreatAsRunOnce flag on SharedContext. r?mgaudet\n\n\n\nDepends on D70726", "is_private": false, "attachment_id": 9140290, "bug_id": 1629721, "creator": "tcampbell@mozilla.com", "creation_time": "2020-04-14T01:38:31Z", "time": "2020-04-14T01:38:31Z", "count": 1, "tags": []}, {"bug_id": 1629721, "attachment_id": 9140291, "is_private": false, "raw_text": "\nUse the same conditions for qualifying an inner function as a run-once-lambda\nbetween the lazy and non-lazy code paths. Use the FunctionBox::immutableFlags\nso that this works well with delazification too.\n\nDepends on D70778", "text": "Created attachment 9140291\nBug 1629721 - Unified runOnceLambda definition for lazy/non-lazy. r?mgaudet\n\n\nUse the same conditions for qualifying an inner function as a run-once-lambda\nbetween the lazy and non-lazy code paths. Use the FunctionBox::immutableFlags\nso that this works well with delazification too.\n\nDepends on D70778", "author": "tcampbell@mozilla.com", "id": 14753046, "tags": [], "count": 2, "time": "2020-04-14T01:38:35Z", "creation_time": "2020-04-14T01:38:35Z", "creator": "tcampbell@mozilla.com"}, {"attachment_id": 9140292, "bug_id": 1629721, "author": "tcampbell@mozilla.com", "id": 14753047, "is_private": false, "text": "Created attachment 9140292\nBug 1629721 - Remove BytecodeEmitter::runOnceLambda helper. r?mgaudet\n\n\nInstead rely on consistent definitions of the TreatAsRunOnce flag on the\nSharedContext. Also simplify the BCE::check{RunOnce,Singleton}Context\naccessors. Note that the TreatAsRunOnce flag indicates the script is expected\nto run-once, but the BCE also checks for isInLoop to decide if current\nbytecode location within the script should still be considered run-once.\n\nDepends on D70779", "raw_text": "\nInstead rely on consistent definitions of the TreatAsRunOnce flag on the\nSharedContext. Also simplify the BCE::check{RunOnce,Singleton}Context\naccessors. Note that the TreatAsRunOnce flag indicates the script is expected\nto run-once, but the BCE also checks for isInLoop to decide if current\nbytecode location within the script should still be considered run-once.\n\nDepends on D70779", "time": "2020-04-14T01:38:43Z", "tags": [], "count": 3, "creation_time": "2020-04-14T01:38:43Z", "creator": "tcampbell@mozilla.com"}, {"is_private": false, "raw_text": "\nMove the TI heuristic into BCE::emitFunction where the other special mutation\nof inner-functions is happening.\n\nDepends on D70780", "text": "Created attachment 9140293\nBug 1629721 - Remove FunctionEmitter::interpretedCommon. r?mgaudet\n\n\nMove the TI heuristic into BCE::emitFunction where the other special mutation\nof inner-functions is happening.\n\nDepends on D70780", "author": "tcampbell@mozilla.com", "id": 14753048, "bug_id": 1629721, "attachment_id": 9140293, "creation_time": "2020-04-14T01:38:46Z", "creator": "tcampbell@mozilla.com", "tags": [], "count": 4, "time": "2020-04-14T01:38:46Z"}, {"count": 5, "bug_id": 1629721, "tags": [], "time": "2020-04-15T22:11:05Z", "attachment_id": null, "text": "Pushed by tcampbell@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/f7cd6b6c2334\nUse the TreatAsRunOnce flag on SharedContext. r=mgaudet\nhttps://hg.mozilla.org/integration/autoland/rev/19a37953cb0d\nUnified runOnceLambda definition for lazy/non-lazy. r=mgaudet\nhttps://hg.mozilla.org/integration/autoland/rev/2c04486aa1e7\nRemove BytecodeEmitter::runOnceLambda helper. r=mgaudet\nhttps://hg.mozilla.org/integration/autoland/rev/90bc2f89ea84\nRemove FunctionEmitter::interpretedCommon. r=mgaudet", "raw_text": "Pushed by tcampbell@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/f7cd6b6c2334\nUse the TreatAsRunOnce flag on SharedContext. r=mgaudet\nhttps://hg.mozilla.org/integration/autoland/rev/19a37953cb0d\nUnified runOnceLambda definition for lazy/non-lazy. r=mgaudet\nhttps://hg.mozilla.org/integration/autoland/rev/2c04486aa1e7\nRemove BytecodeEmitter::runOnceLambda helper. r=mgaudet\nhttps://hg.mozilla.org/integration/autoland/rev/90bc2f89ea84\nRemove FunctionEmitter::interpretedCommon. r=mgaudet", "is_private": false, "creator": "pulsebot@bots.tld", "author": "pulsebot@bots.tld", "creation_time": "2020-04-15T22:11:05Z", "id": 14757970}, {"is_private": false, "text": "https://hg.mozilla.org/mozilla-central/rev/f7cd6b6c2334\nhttps://hg.mozilla.org/mozilla-central/rev/19a37953cb0d\nhttps://hg.mozilla.org/mozilla-central/rev/2c04486aa1e7\nhttps://hg.mozilla.org/mozilla-central/rev/90bc2f89ea84", "raw_text": "https://hg.mozilla.org/mozilla-central/rev/f7cd6b6c2334\nhttps://hg.mozilla.org/mozilla-central/rev/19a37953cb0d\nhttps://hg.mozilla.org/mozilla-central/rev/2c04486aa1e7\nhttps://hg.mozilla.org/mozilla-central/rev/90bc2f89ea84", "author": "cbrindusan@mozilla.com", "creation_time": "2020-04-16T09:50:54Z", "id": 14758656, "creator": "cbrindusan@mozilla.com", "tags": ["bugherder"], "bug_id": 1629721, "count": 6, "attachment_id": null, "time": "2020-04-16T09:50:54Z"}, {"time": "2020-04-22T20:46:56Z", "count": 7, "tags": [], "creator": "tcampbell@mozilla.com", "creation_time": "2020-04-22T20:46:56Z", "attachment_id": null, "bug_id": 1629721, "id": 14772663, "author": "tcampbell@mozilla.com", "text": "*** Bug 1607855 has been marked as a duplicate of this bug. ***", "raw_text": "", "is_private": false}]}}, "comments": {}}