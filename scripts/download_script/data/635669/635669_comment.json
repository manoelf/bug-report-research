{"bugs": {"635669": {"comments": [{"bug_id": 635669, "tags": [], "creator": "lany@ngs.ru", "count": 0, "raw_text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; ru; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13 ( .NET CLR 3.5.30729)\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; ru; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13 ( .NET CLR 3.5.30729)\n\nWhen rendering text using fillText after applying transform to the canvas which greatly reduces scale, text is rendered incorrectly. Seems that the problem appears on Windows only. I don't experience the same problem with Opera, Safari and Chrome.\n\nReproducible: Always\n\nSteps to Reproduce:\n<html>\n<body>\n<canvas id=\"test\">\n</canvas>\n<script>\nvar ctx = document.getElementById(\"test\").getContext(\"2d\");\nctx.save();\nctx.fillText(\"<- 1/1\", 40, 20);\nctx.fillText(\"test\", 0, 20);\nctx.restore();\n\nctx.save();\nctx.fillText(\"<- 1/2\", 40, 40);\nctx.scale(0.5, 0.5)\nctx.fillText(\"test\", 0, 80);\nctx.restore();\n\nctx.save();\nctx.fillText(\"<- 1/4\", 40, 60);\nctx.scale(0.25, 0.25)\nctx.fillText(\"test\", 0, 240);\nctx.restore();\n\nctx.save();\nctx.fillText(\"<- 1/8\", 40, 80);\nctx.scale(0.125, 0.125)\nctx.fillText(\"test\", 0, 640);\nctx.restore();\n\nctx.save();\nctx.fillText(\"<- 1/16\", 40, 100);\nctx.scale(0.0625, 0.0625)\nctx.fillText(\"test\", 0, 1600);\nctx.restore();\n\nctx.save();\nctx.fillText(\"<- 1/32\", 40, 120);\nctx.scale(0.03125, 0.03125)\nctx.fillText(\"test\", 0, 3840);\nctx.restore();\n</script>\n</body>\n</html>\nActual Results:  \nhttp://biorainbow.com/~lan/observed.png - look into the last row.\n\nExpected Results:  \nhttp://biorainbow.com/~lan/expected.png - (actually screenshot from Opera where this works normally)", "id": 5293760, "text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; ru; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13 ( .NET CLR 3.5.30729)\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; ru; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13 ( .NET CLR 3.5.30729)\n\nWhen rendering text using fillText after applying transform to the canvas which greatly reduces scale, text is rendered incorrectly. Seems that the problem appears on Windows only. I don't experience the same problem with Opera, Safari and Chrome.\n\nReproducible: Always\n\nSteps to Reproduce:\n<html>\n<body>\n<canvas id=\"test\">\n</canvas>\n<script>\nvar ctx = document.getElementById(\"test\").getContext(\"2d\");\nctx.save();\nctx.fillText(\"<- 1/1\", 40, 20);\nctx.fillText(\"test\", 0, 20);\nctx.restore();\n\nctx.save();\nctx.fillText(\"<- 1/2\", 40, 40);\nctx.scale(0.5, 0.5)\nctx.fillText(\"test\", 0, 80);\nctx.restore();\n\nctx.save();\nctx.fillText(\"<- 1/4\", 40, 60);\nctx.scale(0.25, 0.25)\nctx.fillText(\"test\", 0, 240);\nctx.restore();\n\nctx.save();\nctx.fillText(\"<- 1/8\", 40, 80);\nctx.scale(0.125, 0.125)\nctx.fillText(\"test\", 0, 640);\nctx.restore();\n\nctx.save();\nctx.fillText(\"<- 1/16\", 40, 100);\nctx.scale(0.0625, 0.0625)\nctx.fillText(\"test\", 0, 1600);\nctx.restore();\n\nctx.save();\nctx.fillText(\"<- 1/32\", 40, 120);\nctx.scale(0.03125, 0.03125)\nctx.fillText(\"test\", 0, 3840);\nctx.restore();\n</script>\n</body>\n</html>\nActual Results:  \nhttp://biorainbow.com/~lan/observed.png - look into the last row.\n\nExpected Results:  \nhttp://biorainbow.com/~lan/expected.png - (actually screenshot from Opera where this works normally)", "creation_time": "2011-02-21T09:38:10Z", "author": "lany@ngs.ru", "time": "2011-02-21T09:38:10Z", "is_private": false, "attachment_id": null}, {"author": "xtc4uall@gmail.com", "attachment_id": null, "bug_id": 635669, "creator": "xtc4uall@gmail.com", "tags": [], "count": 1, "time": "2011-02-21T12:29:55Z", "raw_text": "Confirmed using Mozilla/5.0 (Windows NT 5.1; rv:2.0b12pre) Gecko/20110220 Firefox/4.0b12pre ID:20110220030351.", "id": 5293944, "text": "Confirmed using Mozilla/5.0 (Windows NT 5.1; rv:2.0b12pre) Gecko/20110220 Firefox/4.0b12pre ID:20110220030351.", "is_private": false, "creation_time": "2011-02-21T12:29:55Z"}, {"attachment_id": 513968, "time": "2011-02-21T12:30:19Z", "is_private": false, "author": "xtc4uall@gmail.com", "count": 2, "tags": [], "creator": "xtc4uall@gmail.com", "bug_id": 635669, "id": 5293945, "raw_text": "", "creation_time": "2011-02-21T12:30:19Z", "text": "Created attachment 513968\nReporter's Testcase"}, {"author": "bzbarsky@mit.edu", "creator": "bzbarsky@mit.edu", "tags": [], "count": 3, "bug_id": 635669, "id": 5294137, "raw_text": "Looks Windows-only; I see totally different behavior on Mac.", "creation_time": "2011-02-21T15:33:39Z", "text": "Looks Windows-only; I see totally different behavior on Mac.", "attachment_id": null, "time": "2011-02-21T15:33:39Z", "is_private": false}, {"author": "bugzilla@spray.se", "creator": "bugzilla@spray.se", "tags": [], "count": 4, "bug_id": 635669, "creation_time": "2011-02-21T15:38:55Z", "text": "Build ID: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0b12pre) Gecko/20110221 Firefox/4.0b12pre\n\n  Graphics\n\n        Adapter Description\n        ATI Mobility Radeon HD 3400 Series\n\n        Driver Version\n        8.752.4.0\n\n        Driver Date\n        10-22-2010\n\n        Direct2D Enabled\n        true\n\n        DirectWrite Enabled\n        true (6.1.7600.20781, font cache n/a)\n\n        WebGL Renderer\n        Google Inc. -- ANGLE -- OpenGL ES 2.0 (ANGLE 0.0.0.541)\n\n        GPU Accelerated Windows\n        1/1 Direct3D 10\n\nI see what the expected.png screenshot shows in comment 0 shows.", "id": 5294146, "raw_text": "Build ID: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0b12pre) Gecko/20110221 Firefox/4.0b12pre\n\n  Graphics\n\n        Adapter Description\n        ATI Mobility Radeon HD 3400 Series\n\n        Driver Version\n        8.752.4.0\n\n        Driver Date\n        10-22-2010\n\n        Direct2D Enabled\n        true\n\n        DirectWrite Enabled\n        true (6.1.7600.20781, font cache n/a)\n\n        WebGL Renderer\n        Google Inc. -- ANGLE -- OpenGL ES 2.0 (ANGLE 0.0.0.541)\n\n        GPU Accelerated Windows\n        1/1 Direct3D 10\n\nI see what the expected.png screenshot shows in comment 0 shows.", "attachment_id": null, "time": "2011-02-21T15:38:55Z", "is_private": false}, {"attachment_id": null, "is_private": false, "time": "2011-02-21T15:51:53Z", "author": "bzbarsky@mit.edu", "raw_text": "Do you still see that if you turn off direct2/directwrite?", "id": 5294162, "text": "Do you still see that if you turn off direct2/directwrite?", "creation_time": "2011-02-21T15:51:53Z", "bug_id": 635669, "tags": [], "creator": "bzbarsky@mit.edu", "count": 5}, {"author": "bugzilla@spray.se", "raw_text": "(In reply to comment #5)\n> Do you still see that if you turn off direct2/directwrite?\n\nAh... I actually see the \"observed.png\" if i turn off hardware acceleration.", "id": 5294175, "text": "(In reply to comment #5)\n> Do you still see that if you turn off direct2/directwrite?\n\nAh... I actually see the \"observed.png\" if i turn off hardware acceleration.", "creation_time": "2011-02-21T15:59:37Z", "bug_id": 635669, "tags": [], "creator": "bugzilla@spray.se", "count": 6, "attachment_id": null, "is_private": false, "time": "2011-02-21T15:59:37Z"}, {"author": "bas@basschouten.com", "creator": "bas@basschouten.com", "count": 7, "tags": [], "bug_id": 635669, "id": 5978777, "raw_text": "This seems fine on hardware acceleration + Azure. Presumably this is a GDI/Cairo issue.", "creation_time": "2012-01-13T17:17:04Z", "text": "This seems fine on hardware acceleration + Azure. Presumably this is a GDI/Cairo issue.", "attachment_id": null, "time": "2012-01-13T17:17:04Z", "is_private": false}]}}, "comments": {}}