{"bugs": {"690229": {"comments": [{"author": "nivtwig@gmail.com", "count": 0, "text": "User Agent: Mozilla/5.0 (Windows NT 6.1; rv:10.0a1) Gecko/20110928 Firefox/10.0a1\nBuild ID: 20110928030855\n\nSteps to reproduce:\n\nStart Firefox (happens both with addons, and without addons in safemode, all addons disabled), open the following 12 randomly selected articles (from a major,popular Israeli financial site), in separate tabs:\nhttp://www.globes.co.il/news/article.aspx?did=1000685209\nhttp://www.globes.co.il/news/article.aspx?did=1000683988\nhttp://www.globes.co.il/news/article.aspx?did=1000684773\nhttp://www.globes.co.il/news/article.aspx?did=1000684758\nhttp://www.globes.co.il/news/article.aspx?did=1000681089\nhttp://www.globes.co.il/news/article.aspx?did=1000681323\nhttp://www.globes.co.il/news/article.aspx?did=1000682260\nhttp://www.globes.co.il/news/article.aspx?did=1000682664\nhttp://www.globes.co.il/news/article.aspx?did=1000568376\nhttp://www.globes.co.il/news/article.aspx?did=1000683361\nhttp://www.globes.co.il/news/article.aspx?did=1000683064\nhttp://www.globes.co.il/news/article.aspx?did=1000683645\n\nThe problem occurs on all versions of Firefox 6.* , 7.0, and nightly. Therefore, I marked the Firefox version of this bug to 7, but the result numbers are from Nightly (version 10.0.a1 2011-09-28)\n\n\n\n\nActual results:\n\nOpening \"Task Manager\", it shows Firefox nightly uses about 1GB memory (Private working set). That is a lot, 80MB+ memory per tab on average . If I use for the testcase just 20-30 articles/tabs instead of 12 from this site, firefox exhausts the computer memory (I have 2GB), and slows down, becomes unresponsive and hangs (due to swapping to disk)\n\nUsing \"about:memory\" I see that some of the main memory usages are:\n979.34 MB (100.0%) -- explicit\n   667.70 MB (68.18%) -- js\n      447.07 MB (45.65%) -- compartment(https://www.facebook.com/extern/login_status.ph...\n      119.05 MB (12.16%) -- compartment(http://www.globes.co.il/news/article.aspx?did=1000 ...\n      29.78 MB (03.04%) -- compartment(http://www.facebook.com/plugins/activity.php?site=www.globe ...\n   228.18 MB (23.30%) -- heap-unclassified   \n\nThat means that facebook javascript, with its 2 entries uses a huge amount of memory 477MB (that is ~40BM per tab!).\n\nBut facebook is not the only problem on this site. Even without considering facebook, Firefox used for the globes site itself 119MB for javascript (10MB per tab), and uses a lot of memory,228MB, categorized in heap unclassified (~20MB per tab)\n\nI have a facebook account that I didn't use for a very long time, therefore I cleared all my browsing history and cookies, and checked that I don't have any facebook cookies, to make sure it is not something specific to my facebook account.\n\n\n\nExpected results:\n\nMuch less memory usage per tab.\n\nI didn't test this with other non-facebook sites that use facebook (which needs to be checked when fixing this bug), but I suspect it may happen on many other sites that use facebook.\nTherefore, even if the problem is because of Facebook JS code and not because of Firefox, it should still be addressed, since it makes Firefox be perceived bad (due to using a lot of memory) by users of many web sites that use Facebook code/widgets (the \"like\" button etc.).", "creator": "nivtwig@gmail.com", "is_private": false, "creation_time": "2011-09-29T04:05:56Z", "bug_id": 690229, "id": 5745195, "attachment_id": null, "raw_text": "User Agent: Mozilla/5.0 (Windows NT 6.1; rv:10.0a1) Gecko/20110928 Firefox/10.0a1\nBuild ID: 20110928030855\n\nSteps to reproduce:\n\nStart Firefox (happens both with addons, and without addons in safemode, all addons disabled), open the following 12 randomly selected articles (from a major,popular Israeli financial site), in separate tabs:\nhttp://www.globes.co.il/news/article.aspx?did=1000685209\nhttp://www.globes.co.il/news/article.aspx?did=1000683988\nhttp://www.globes.co.il/news/article.aspx?did=1000684773\nhttp://www.globes.co.il/news/article.aspx?did=1000684758\nhttp://www.globes.co.il/news/article.aspx?did=1000681089\nhttp://www.globes.co.il/news/article.aspx?did=1000681323\nhttp://www.globes.co.il/news/article.aspx?did=1000682260\nhttp://www.globes.co.il/news/article.aspx?did=1000682664\nhttp://www.globes.co.il/news/article.aspx?did=1000568376\nhttp://www.globes.co.il/news/article.aspx?did=1000683361\nhttp://www.globes.co.il/news/article.aspx?did=1000683064\nhttp://www.globes.co.il/news/article.aspx?did=1000683645\n\nThe problem occurs on all versions of Firefox 6.* , 7.0, and nightly. Therefore, I marked the Firefox version of this bug to 7, but the result numbers are from Nightly (version 10.0.a1 2011-09-28)\n\n\n\n\nActual results:\n\nOpening \"Task Manager\", it shows Firefox nightly uses about 1GB memory (Private working set). That is a lot, 80MB+ memory per tab on average . If I use for the testcase just 20-30 articles/tabs instead of 12 from this site, firefox exhausts the computer memory (I have 2GB), and slows down, becomes unresponsive and hangs (due to swapping to disk)\n\nUsing \"about:memory\" I see that some of the main memory usages are:\n979.34 MB (100.0%) -- explicit\n   667.70 MB (68.18%) -- js\n      447.07 MB (45.65%) -- compartment(https://www.facebook.com/extern/login_status.ph...\n      119.05 MB (12.16%) -- compartment(http://www.globes.co.il/news/article.aspx?did=1000 ...\n      29.78 MB (03.04%) -- compartment(http://www.facebook.com/plugins/activity.php?site=www.globe ...\n   228.18 MB (23.30%) -- heap-unclassified   \n\nThat means that facebook javascript, with its 2 entries uses a huge amount of memory 477MB (that is ~40BM per tab!).\n\nBut facebook is not the only problem on this site. Even without considering facebook, Firefox used for the globes site itself 119MB for javascript (10MB per tab), and uses a lot of memory,228MB, categorized in heap unclassified (~20MB per tab)\n\nI have a facebook account that I didn't use for a very long time, therefore I cleared all my browsing history and cookies, and checked that I don't have any facebook cookies, to make sure it is not something specific to my facebook account.\n\n\n\nExpected results:\n\nMuch less memory usage per tab.\n\nI didn't test this with other non-facebook sites that use facebook (which needs to be checked when fixing this bug), but I suspect it may happen on many other sites that use facebook.\nTherefore, even if the problem is because of Facebook JS code and not because of Firefox, it should still be addressed, since it makes Firefox be perceived bad (due to using a lot of memory) by users of many web sites that use Facebook code/widgets (the \"like\" button etc.).", "time": "2011-09-29T04:05:56Z", "tags": []}, {"text": "I can confirm this, on Win XP. Loading just 2 of those links:\n\n193.56 MB (100.0%) -- explicit\n\u251c\u2500\u2500114.14 MB (58.97%) -- js\n\u2502  \u251c\u2500\u2500\u250054.09 MB (27.94%) -- compartment(https://www.facebook.com/plugins/like.php?action=recommend&api_key=159652850757022&channel_url=https%3A%2F%2Fs-static.ak.fbcdn.net%2Fconnect%2Fxd_proxy.php%3Fversion%3D3%23cb%3Df4255f70d866bc%26origin%3Dhttp%253A%252F%252Fwww.globes.co.il%252Ff1839a87b8e4778%26relation%3Dparent.parent%26transport%3Dpostmessage&extended_social_context=false&font=arial&href=http%3A%2F%2Fwww.globes.co.il%2Fnews%2Farticle.aspx%3Ffbdid%3D1000685209&layout=button_count&locale=en_US&node_type=link&sdk=joey&send=false&show_faces=false&width=130)\n\u2502  \u2502   \u251c\u2500\u250028.27 MB (14.60%) -- gc-heap\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25009.85 MB (05.09%) -- objects\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25008.34 MB (04.31%) -- shapes\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25005.13 MB (02.65%) -- scripts\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25003.97 MB (02.05%) -- arena-unused\n\u2502  \u2502   \u2502  \u2514\u2500\u2500\u25000.99 MB (00.51%) -- (4 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25007.98 MB (04.12%) -- script-data\n\u2502  \u2502   \u251c\u2500\u2500\u25007.19 MB (03.71%) -- mjit-code\n\u2502  \u2502   \u2502   \u251c\u2500\u25005.93 MB (03.06%) -- method\n\u2502  \u2502   \u2502   \u251c\u2500\u25001.11 MB (00.57%) -- regexp\n\u2502  \u2502   \u2502   \u2514\u2500\u25000.15 MB (00.08%) -- (1 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25002.82 MB (01.46%) -- type-inference\n\u2502  \u2502   \u2502   \u251c\u2500\u25001.78 MB (00.92%) -- object-main\n\u2502  \u2502   \u2502   \u2514\u2500\u25001.04 MB (00.54%) -- (2 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25002.76 MB (01.43%) -- analysis-temporary\n\u2502  \u2502   \u251c\u2500\u2500\u25002.68 MB (01.39%) -- property-tables\n\u2502  \u2502   \u251c\u2500\u2500\u25001.90 MB (00.98%) -- object-slots\n\u2502  \u2502   \u2514\u2500\u2500\u25000.49 MB (00.25%) -- (3 omitted)\n\u2502  \u251c\u2500\u2500\u250017.14 MB (08.85%) -- compartment(http://www.globes.co.il/news/article.asp\n\nFortunately, after closing the tabs all the compartments are deallocated and js drops to 17MB (only the about:memory tab open).\n\nHowever, it may be bloat on facebook side, which Firefox can't do much about. Can you see how much memory other browsers take? IE, Chrome?", "count": 1, "author": "acelists@atlas.sk", "creator": "acelists@atlas.sk", "creation_time": "2011-09-29T06:49:13Z", "is_private": false, "id": 5745407, "bug_id": 690229, "raw_text": "I can confirm this, on Win XP. Loading just 2 of those links:\n\n193.56 MB (100.0%) -- explicit\n\u251c\u2500\u2500114.14 MB (58.97%) -- js\n\u2502  \u251c\u2500\u2500\u250054.09 MB (27.94%) -- compartment(https://www.facebook.com/plugins/like.php?action=recommend&api_key=159652850757022&channel_url=https%3A%2F%2Fs-static.ak.fbcdn.net%2Fconnect%2Fxd_proxy.php%3Fversion%3D3%23cb%3Df4255f70d866bc%26origin%3Dhttp%253A%252F%252Fwww.globes.co.il%252Ff1839a87b8e4778%26relation%3Dparent.parent%26transport%3Dpostmessage&extended_social_context=false&font=arial&href=http%3A%2F%2Fwww.globes.co.il%2Fnews%2Farticle.aspx%3Ffbdid%3D1000685209&layout=button_count&locale=en_US&node_type=link&sdk=joey&send=false&show_faces=false&width=130)\n\u2502  \u2502   \u251c\u2500\u250028.27 MB (14.60%) -- gc-heap\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25009.85 MB (05.09%) -- objects\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25008.34 MB (04.31%) -- shapes\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25005.13 MB (02.65%) -- scripts\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25003.97 MB (02.05%) -- arena-unused\n\u2502  \u2502   \u2502  \u2514\u2500\u2500\u25000.99 MB (00.51%) -- (4 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25007.98 MB (04.12%) -- script-data\n\u2502  \u2502   \u251c\u2500\u2500\u25007.19 MB (03.71%) -- mjit-code\n\u2502  \u2502   \u2502   \u251c\u2500\u25005.93 MB (03.06%) -- method\n\u2502  \u2502   \u2502   \u251c\u2500\u25001.11 MB (00.57%) -- regexp\n\u2502  \u2502   \u2502   \u2514\u2500\u25000.15 MB (00.08%) -- (1 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25002.82 MB (01.46%) -- type-inference\n\u2502  \u2502   \u2502   \u251c\u2500\u25001.78 MB (00.92%) -- object-main\n\u2502  \u2502   \u2502   \u2514\u2500\u25001.04 MB (00.54%) -- (2 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25002.76 MB (01.43%) -- analysis-temporary\n\u2502  \u2502   \u251c\u2500\u2500\u25002.68 MB (01.39%) -- property-tables\n\u2502  \u2502   \u251c\u2500\u2500\u25001.90 MB (00.98%) -- object-slots\n\u2502  \u2502   \u2514\u2500\u2500\u25000.49 MB (00.25%) -- (3 omitted)\n\u2502  \u251c\u2500\u2500\u250017.14 MB (08.85%) -- compartment(http://www.globes.co.il/news/article.asp\n\nFortunately, after closing the tabs all the compartments are deallocated and js drops to 17MB (only the about:memory tab open).\n\nHowever, it may be bloat on facebook side, which Firefox can't do much about. Can you see how much memory other browsers take? IE, Chrome?", "attachment_id": null, "time": "2011-09-29T06:49:13Z", "tags": []}, {"is_private": false, "creation_time": "2011-09-29T13:43:53Z", "bug_id": 690229, "id": 5746002, "author": "continuation@gmail.com", "text": "This also happens on Nightly (55mb-ish compartment for Facebook when opening two of those links), so nothing in the intervening time has fixed it.\n\n26mb for the first link\n55mb when I also opened the second link\n78mb when I also opened the third link\n270mb when I also opened the 5th link in a new tab, and Firefox also became fairly laggy\n\nAfter closing the first 3 links, the JS compartment for https://www.facebook.com/extern/login_status.php remained at 200mb, so http://www.globes.co.il/news/article.aspx?did=1000681089 apparently results in a very large FB compartment by itself.", "count": 2, "creator": "continuation@gmail.com", "tags": [], "attachment_id": null, "raw_text": "This also happens on Nightly (55mb-ish compartment for Facebook when opening two of those links), so nothing in the intervening time has fixed it.\n\n26mb for the first link\n55mb when I also opened the second link\n78mb when I also opened the third link\n270mb when I also opened the 5th link in a new tab, and Firefox also became fairly laggy\n\nAfter closing the first 3 links, the JS compartment for https://www.facebook.com/extern/login_status.php remained at 200mb, so http://www.globes.co.il/news/article.aspx?did=1000681089 apparently results in a very large FB compartment by itself.", "time": "2011-09-29T13:43:53Z"}, {"attachment_id": null, "tags": [], "creator": "continuation@gmail.com", "is_private": false, "creation_time": "2011-09-29T13:51:50Z", "time": "2011-09-29T13:51:50Z", "raw_text": "http://www.globes.co.il/news/article.aspx?did=1000681089 takes about 280MB in Chrome (for the entire page, not just JS, which is what I was measuring for Firefox).", "text": "http://www.globes.co.il/news/article.aspx?did=1000681089 takes about 280MB in Chrome (for the entire page, not just JS, which is what I was measuring for Firefox).", "count": 3, "author": "continuation@gmail.com", "bug_id": 690229, "id": 5746016}, {"raw_text": "That seems quite comparable (Chrome 280MB total vs. Firefox 200MB JS + X MB of some layout etc).", "time": "2011-09-29T13:57:56Z", "author": "acelists@atlas.sk", "text": "That seems quite comparable (Chrome 280MB total vs. Firefox 200MB JS + X MB of some layout etc).", "count": 4, "bug_id": 690229, "id": 5746029, "attachment_id": null, "tags": [], "creator": "acelists@atlas.sk", "is_private": false, "creation_time": "2011-09-29T13:57:56Z"}, {"attachment_id": null, "raw_text": "On a random Washington Post story, that FB compartment only takes about 4MB.  On the TechCrunch front page, after scrolling down the page slowly so all the little widgets load up, that compartment takes about 22MB, and on a single TechCrunch story that FB compartment takes only a few megs.", "time": "2011-09-29T14:01:11Z", "tags": [], "author": "continuation@gmail.com", "count": 5, "text": "On a random Washington Post story, that FB compartment only takes about 4MB.  On the TechCrunch front page, after scrolling down the page slowly so all the little widgets load up, that compartment takes about 22MB, and on a single TechCrunch story that FB compartment takes only a few megs.", "creator": "continuation@gmail.com", "creation_time": "2011-09-29T14:01:11Z", "is_private": false, "id": 5746038, "bug_id": 690229}, {"id": 5746611, "bug_id": 690229, "is_private": false, "creation_time": "2011-09-29T17:31:00Z", "creator": "nivtwig@gmail.com", "text": "I guess that what distinguishes http://www.globes.co.il/news/article.aspx?did=1000681089 higher memory consumption from the rest of the links, is that it has a large number of comments, 1007, on the article, although those 1007 comments are not displayed on the article page, just the last ~20 comments.\nWhen clicking with the mouse to open a comment, you can see that basically each comment has a Facebook \"recommend\" button, and a Google \"+1\" button. (strangely some of the comments are missing the Facebook \"recommend\" button, which may be a bug ...)\n\nThere is a button/link for loading more comments at the bottom. When pressing it the comments load instantly so it seems all 1007 comments are preloaded, but just the ~20 are displayed at the start.\n\nIf the page takes ~200MB facebook JS memory for all ~1000 comments, that means ~200KB per comment, which is still a lot. \n\nAs I said in my opening comment, even if this is a Facebook problem, I think it should be addressed by mozilla, with Facebook contact people, since it makes Firefox be perceived by users as very memory hungry on a lot of sites since Facebook \"recommend\" button is used on many sites.", "count": 6, "author": "nivtwig@gmail.com", "tags": [], "time": "2011-09-29T17:31:00Z", "raw_text": "I guess that what distinguishes http://www.globes.co.il/news/article.aspx?did=1000681089 higher memory consumption from the rest of the links, is that it has a large number of comments, 1007, on the article, although those 1007 comments are not displayed on the article page, just the last ~20 comments.\nWhen clicking with the mouse to open a comment, you can see that basically each comment has a Facebook \"recommend\" button, and a Google \"+1\" button. (strangely some of the comments are missing the Facebook \"recommend\" button, which may be a bug ...)\n\nThere is a button/link for loading more comments at the bottom. When pressing it the comments load instantly so it seems all 1007 comments are preloaded, but just the ~20 are displayed at the start.\n\nIf the page takes ~200MB facebook JS memory for all ~1000 comments, that means ~200KB per comment, which is still a lot. \n\nAs I said in my opening comment, even if this is a Facebook problem, I think it should be addressed by mozilla, with Facebook contact people, since it makes Firefox be perceived by users as very memory hungry on a lot of sites since Facebook \"recommend\" button is used on many sites.", "attachment_id": null}, {"time": "2011-09-29T17:42:44Z", "raw_text": "Andrew, we should contact FB. I will email you a contact.", "bug_id": 690229, "id": 5746669, "author": "gal@uci.edu", "text": "Andrew, we should contact FB. I will email you a contact.", "count": 7, "tags": [], "attachment_id": null, "creation_time": "2011-09-29T17:42:44Z", "is_private": false, "creator": "gal@uci.edu"}, {"time": "2011-09-30T20:59:16Z", "raw_text": "Please note that this bug is not only about the Facebook JS memory problem, so Mozilla developers should check it further, and not wait for Facebook.\n\nAs I wrote when reporting the bug on the first comment:\"Facebook is not the only problem on this site. Even without considering facebook, Firefox used for the globes site itself 119MB for javascript (10MB per tab), and uses a lot of memory,228MB, categorized in heap unclassified (~20MB per tab)\"\n\nThat is an additional ~30MB memory on average per tab !, memory which is apparently not related to Facebook .\n\nAndrew Mccreight changed the summary to make it only a Facebook JS memory bug, but the original intention was about all memory problems on this site.\n\n(Summary: huge memory use,mostly Facebook JS,on non-Facebook site (80MB per tab) \u2794 Facebook JS compartment on non-Facebook site uses 25-200MB per tab )\n\nyou can take as a testcase only this link:\nhttp://www.globes.co.il/news/article.aspx?did=1000681089\n\nWhen you open Firefox with \"about:blank\", \"about:memory\" shows something like:\n30 MB (100.0%) -- explicit\n\u251c\u2500\u250015 MB  -- js\n\u251c\u2500\u2500\u250011 MB -- heap-unclassified\n\nWhen you open the link above, \"about:memory\" shows this (unnecessary details omitted):\n445.10 MB (100.0%) -- explicit\n\u251c\u2500\u2500337.25 MB (75.77%) -- js\n\u2502  \u251c\u2500\u2500254.14 MB (57.10%) -- compartment(https://www.facebook.com/extern/login_status.php...\n\u2502  \u251c\u2500\u2500\u250035.33 MB (07.94%) -- compartment(http://www.globes.co.il/news/article.aspx?did=1000681089)\n\u2502  \u2502   \u251c\u2500\u250017.93 MB (04.03%) -- gc-heap\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25007.44 MB (01.67%) -- objects\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25006.41 MB (01.44%) -- shapes\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25003.03 MB (00.68%) -- arena-unused\n\u2502  \u2502   \u2502  \u2514\u2500\u2500\u25001.06 MB (00.24%) -- (5 omitted)\n\u2502  \u2502   \u251c\u2500\u250012.07 MB (02.71%) -- string-chars\n\u2502  \u2502   \u2514\u2500\u2500\u25005.33 MB (01.20%) -- (9 omitted)\n\u2502  \u251c\u2500\u2500\u2500\u25003.91 MB (00.88%) -- compartment(http://www.facebook.com/plugins/activity.php...\n\u251c\u2500\u2500\u250086.94 MB (19.53%) -- heap-unclassified\n\nWhich means that apart from Facebook taking 260MB memory on this page, there is a globes JS compartment taking 35MB for just this one page, and an additional 70MB in \"heap-unclassified\", compared to the results of \"about:blank\".\ni.e. a total of 100MB for this one page (!), that is apparently unrelated to Facebook.\n\nEven if (for the sake of discussion) you claim that Globes JS is allocating that much heap memory and there is nothing you can do, then what can possibly be in \"heap-unclassified\" that requires 70MB for one page ?", "id": 5750665, "bug_id": 690229, "count": 8, "text": "Please note that this bug is not only about the Facebook JS memory problem, so Mozilla developers should check it further, and not wait for Facebook.\n\nAs I wrote when reporting the bug on the first comment:\"Facebook is not the only problem on this site. Even without considering facebook, Firefox used for the globes site itself 119MB for javascript (10MB per tab), and uses a lot of memory,228MB, categorized in heap unclassified (~20MB per tab)\"\n\nThat is an additional ~30MB memory on average per tab !, memory which is apparently not related to Facebook .\n\nAndrew Mccreight changed the summary to make it only a Facebook JS memory bug, but the original intention was about all memory problems on this site.\n\n(Summary: huge memory use,mostly Facebook JS,on non-Facebook site (80MB per tab) \u2794 Facebook JS compartment on non-Facebook site uses 25-200MB per tab )\n\nyou can take as a testcase only this link:\nhttp://www.globes.co.il/news/article.aspx?did=1000681089\n\nWhen you open Firefox with \"about:blank\", \"about:memory\" shows something like:\n30 MB (100.0%) -- explicit\n\u251c\u2500\u250015 MB  -- js\n\u251c\u2500\u2500\u250011 MB -- heap-unclassified\n\nWhen you open the link above, \"about:memory\" shows this (unnecessary details omitted):\n445.10 MB (100.0%) -- explicit\n\u251c\u2500\u2500337.25 MB (75.77%) -- js\n\u2502  \u251c\u2500\u2500254.14 MB (57.10%) -- compartment(https://www.facebook.com/extern/login_status.php...\n\u2502  \u251c\u2500\u2500\u250035.33 MB (07.94%) -- compartment(http://www.globes.co.il/news/article.aspx?did=1000681089)\n\u2502  \u2502   \u251c\u2500\u250017.93 MB (04.03%) -- gc-heap\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25007.44 MB (01.67%) -- objects\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25006.41 MB (01.44%) -- shapes\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25003.03 MB (00.68%) -- arena-unused\n\u2502  \u2502   \u2502  \u2514\u2500\u2500\u25001.06 MB (00.24%) -- (5 omitted)\n\u2502  \u2502   \u251c\u2500\u250012.07 MB (02.71%) -- string-chars\n\u2502  \u2502   \u2514\u2500\u2500\u25005.33 MB (01.20%) -- (9 omitted)\n\u2502  \u251c\u2500\u2500\u2500\u25003.91 MB (00.88%) -- compartment(http://www.facebook.com/plugins/activity.php...\n\u251c\u2500\u2500\u250086.94 MB (19.53%) -- heap-unclassified\n\nWhich means that apart from Facebook taking 260MB memory on this page, there is a globes JS compartment taking 35MB for just this one page, and an additional 70MB in \"heap-unclassified\", compared to the results of \"about:blank\".\ni.e. a total of 100MB for this one page (!), that is apparently unrelated to Facebook.\n\nEven if (for the sake of discussion) you claim that Globes JS is allocating that much heap memory and there is nothing you can do, then what can possibly be in \"heap-unclassified\" that requires 70MB for one page ?", "author": "nivtwig@gmail.com", "tags": [], "attachment_id": null, "is_private": false, "creation_time": "2011-09-30T20:59:16Z", "creator": "nivtwig@gmail.com"}, {"attachment_id": null, "tags": [], "creator": "continuation@gmail.com", "creation_time": "2011-09-30T21:08:58Z", "is_private": false, "raw_text": "35MB of JS for a tab isn't really that much for a complex JS website.  Gmail is currently using about that much for me.\n\nSimilarly, 20% heap-unclassified is actually on the low side.  I currently have 22% heap-unclassified in my browser.  It is unfortunate that it is routinely so high.  We do have some ongoing efforts to improve this, in the dependent bugs in Bug 563700.\n\nWhile it would obviously be great to improve both numbers, as far as I can see it is only the gigantic Facebook compartment that is unusual.  As you pointed out in Comment 6, the really big page has a huge number of comments, so perhaps the Facebook commenting widget is downloading all the comments.", "time": "2011-09-30T21:08:58Z", "text": "35MB of JS for a tab isn't really that much for a complex JS website.  Gmail is currently using about that much for me.\n\nSimilarly, 20% heap-unclassified is actually on the low side.  I currently have 22% heap-unclassified in my browser.  It is unfortunate that it is routinely so high.  We do have some ongoing efforts to improve this, in the dependent bugs in Bug 563700.\n\nWhile it would obviously be great to improve both numbers, as far as I can see it is only the gigantic Facebook compartment that is unusual.  As you pointed out in Comment 6, the really big page has a huge number of comments, so perhaps the Facebook commenting widget is downloading all the comments.", "count": 9, "author": "continuation@gmail.com", "bug_id": 690229, "id": 5750696}, {"id": 5750730, "bug_id": 690229, "count": 10, "text": "This is about:memory with the http://www.globes.co.il/news/article.aspx?did=1000681089 loaded and facebook blocked on the firewall.\nThere is 32% of heap unclassified.\n\nExplicit Allocations\n178.93 MB (100.0%) -- explicit\n\u251c\u2500\u2500101.43 MB (56.69%) -- js\n\u2502  \u251c\u2500\u2500\u250049.21 MB (27.50%) -- (216 omitted)\n\u2502  \u251c\u2500\u2500\u250027.12 MB (15.15%) -- compartment(http://www.globes.co.il/news/article.aspx?did=1000681089)\n\u2502  \u2502   \u251c\u2500\u250012.62 MB (07.05%) -- string-chars\n\u2502  \u2502   \u251c\u2500\u250010.75 MB (06.01%) -- gc-heap\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25004.38 MB (02.45%) -- arena-unused\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25003.32 MB (01.85%) -- objects\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25002.29 MB (01.28%) -- shapes\n\u2502  \u2502   \u2502  \u2514\u2500\u2500\u25000.76 MB (00.43%) -- (5 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25002.68 MB (01.50%) -- (8 omitted)\n\u2502  \u2502   \u2514\u2500\u2500\u25001.06 MB (00.59%) -- mjit-code\n\u2502  \u2502       \u2514\u2500\u25001.06 MB (00.59%) -- (3 omitted)\n\u2502  \u251c\u2500\u2500\u250010.29 MB (05.75%) -- compartment([System Principal], 0xffffffffb3155000)\n\u2502  \u2502   \u251c\u2500\u2500\u25005.82 MB (03.26%) -- gc-heap\n\u2502  \u2502   \u2502   \u251c\u2500\u25002.30 MB (01.29%) -- objects\n\u2502  \u2502   \u2502   \u251c\u2500\u25001.44 MB (00.81%) -- shapes\n\u2502  \u2502   \u2502   \u251c\u2500\u25001.28 MB (00.72%) -- arena-unused\n\u2502  \u2502   \u2502   \u2514\u2500\u25000.80 MB (00.45%) -- (6 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25002.35 MB (01.31%) -- (10 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25001.12 MB (00.62%) -- script-data\n\u2502  \u2502   \u2514\u2500\u2500\u25001.00 MB (00.56%) -- mjit-code\n\u2502  \u2502       \u2514\u2500\u25001.00 MB (00.56%) -- (3 omitted)\n\u2502  \u251c\u2500\u2500\u2500\u25008.00 MB (04.47%) -- stack\n\u2502  \u251c\u2500\u2500\u2500\u25005.05 MB (02.82%) -- gc-heap-chunk-dirty-unused\n\u2502  \u2514\u2500\u2500\u2500\u25001.77 MB (00.99%) -- compartment(atoms)\n\u2502       \u251c\u2500\u25001.10 MB (00.61%) -- string-chars\n\u2502       \u2514\u2500\u25000.67 MB (00.38%) -- (1 omitted)\n\u251c\u2500\u2500\u250057.22 MB (31.98%) -- heap-unclassified\n\u251c\u2500\u2500\u2500\u25007.62 MB (04.26%) -- layout\n\u2502    \u251c\u2500\u25004.02 MB (02.25%) -- shell(about:memory?verbose)\n\u2502    \u2502  \u251c\u2500\u25003.98 MB (02.22%) -- arenas\n\u2502    \u2502  \u2514\u2500\u25000.04 MB (00.02%) -- (1 omitted)\n\u2502    \u251c\u2500\u25002.06 MB (01.15%) -- (19 omitted)\n\u2502    \u2514\u2500\u25001.54 MB (00.86%) -- shell(http://www.globes.co.il/news/article.aspx?did=1000681089)\n\u2502       \u251c\u2500\u25001.29 MB (00.72%) -- arenas [3]\n\u2502       \u2514\u2500\u25000.25 MB (00.14%) -- (1 omitted)\n\u251c\u2500\u2500\u2500\u25004.59 MB (02.57%) -- dom\n\u251c\u2500\u2500\u2500\u25003.89 MB (02.17%) -- storage\n\u2502    \u2514\u2500\u25003.89 MB (02.17%) -- sqlite\n\u2502       \u251c\u2500\u25002.17 MB (01.21%) -- (10 omitted)\n\u2502       \u2514\u2500\u25001.72 MB (00.96%) -- places.sqlite\n\u2502          \u251c\u2500\u25001.48 MB (00.83%) -- cache-used [4]\n\u2502          \u2514\u2500\u25000.24 MB (00.13%) -- (2 omitted)\n\u251c\u2500\u2500\u2500\u25002.21 MB (01.23%) -- spell-check\n\u251c\u2500\u2500\u2500\u25001.10 MB (00.61%) -- images\n\u2502    \u251c\u2500\u25001.06 MB (00.59%) -- content\n\u2502    \u2502  \u251c\u2500\u25001.06 MB (00.59%) -- used\n\u2502    \u2502  \u2502  \u2514\u2500\u25001.06 MB (00.59%) -- (3 omitted)\n\u2502    \u2502  \u2514\u2500\u25000.00 MB (00.00%) -- (1 omitted)\n\u2502    \u2514\u2500\u25000.04 MB (00.02%) -- (1 omitted)\n\u2514\u2500\u2500\u2500\u25000.87 MB (00.49%) -- (3 omitted)\n\nThose 216 ommited reporters are actually frames with Network error (as facebook is not accessible). Their total size of 49MB is quite disgusting.\n\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500235,552 B (00.14%) -- compartment(about:neterror?e=connectionFailure&u=https%3A//www.facebook.com/plugins/like.php%3Faction%3Drecommend%26api_key%3D159652850757022%26channel_url%3Dhttps%253A%252F%252Fs-static.ak.fbcdn.net%252Fconnect%252Fxd_proxy.php%253Fversion%253D3%2523cb%253Df3947e871a1dc64%2526origin%253Dhttp%25253A%25252F%25252Fwww.globes.co.il%25252Ff3b6c2563791242%2526relation%253Dparent.parent%2526transport%253Dpostmessage%26extended_social_context%3Dfalse%26font%3Darial%26href%3Dhttp%25253A%252F%252Fwww.globes.co.il%252Fnews%252Farticle.aspx%25253Fresid%25253D124099%26layout%3Dbutton_count%26locale%3Den_US%26node_type%3Dlink%26sdk%3Djoey%26send%3Dfalse%26show_faces%3Dfalse%26width%3D130&c=UTF-8&d=Firefox%20can%27t%20establish%20a%20connection%20to%20the%20server%20at%20www.facebook.com.)\n\u2502  \u2502      \u251c\u2500\u2500147,456 B (00.09%) -- gc-heap\n\u2502  \u2502      \u2502  \u251c\u2500\u2500\u250051,424 B (00.03%) -- arena-unused\n\u2502  \u2502      \u2502  \u251c\u2500\u2500\u250048,240 B (00.03%) -- objects\n\u2502  \u2502      \u2502  \u251c\u2500\u2500\u250044,080 B (00.03%) -- shapes\n\u2502  \u2502      \u2502  \u251c\u2500\u2500\u2500\u25001,360 B (00.00%) -- scripts\n\u2502  \u2502      \u2502  \u251c\u2500\u2500\u2500\u25001,312 B (00.00%) -- type-objects\n\u2502  \u2502      \u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500576 B (00.00%) -- arena-headers\n\u2502  \u2502      \u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500320 B (00.00%) -- arena-padding\n\u2502  \u2502      \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500144 B (00.00%) -- strings\n\u2502  \u2502      \u251c\u2500\u2500\u250065,536 B (00.04%) -- mjit-code\n\u2502  \u2502      \u2502   \u251c\u2500\u250064,392 B (00.04%) -- unused\n\u2502  \u2502      \u2502   \u251c\u2500\u2500\u25001,064 B (00.00%) -- regexp\n\u2502  \u2502      \u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u250080 B (00.00%) -- method\n\u2502  \u2502      \u251c\u2500\u2500\u250010,560 B (00.01%) -- object-slots\n\u2502  \u2502      \u251c\u2500\u2500\u2500\u25005,664 B (00.00%) -- property-tables\n\u2502  \u2502      \u251c\u2500\u2500\u2500\u25002,864 B (00.00%) -- script-data\n\u2502  \u2502      \u251c\u2500\u2500\u2500\u25001,456 B (00.00%) -- type-inference\n\u2502  \u2502      \u2502    \u2514\u2500\u25001,456 B (00.00%) -- object-main\n\u2502  \u2502      \u251c\u2500\u2500\u2500\u25001,120 B (00.00%) -- shape-kids\n\u2502  \u2502      \u251c\u2500\u2500\u2500\u2500\u2500\u2500768 B (00.00%) -- object-empty-shapes\n\u2502  \u2502      \u2514\u2500\u2500\u2500\u2500\u2500\u2500128 B (00.00%) -- string-chars", "author": "acelists@atlas.sk", "raw_text": "This is about:memory with the http://www.globes.co.il/news/article.aspx?did=1000681089 loaded and facebook blocked on the firewall.\nThere is 32% of heap unclassified.\n\nExplicit Allocations\n178.93 MB (100.0%) -- explicit\n\u251c\u2500\u2500101.43 MB (56.69%) -- js\n\u2502  \u251c\u2500\u2500\u250049.21 MB (27.50%) -- (216 omitted)\n\u2502  \u251c\u2500\u2500\u250027.12 MB (15.15%) -- compartment(http://www.globes.co.il/news/article.aspx?did=1000681089)\n\u2502  \u2502   \u251c\u2500\u250012.62 MB (07.05%) -- string-chars\n\u2502  \u2502   \u251c\u2500\u250010.75 MB (06.01%) -- gc-heap\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25004.38 MB (02.45%) -- arena-unused\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25003.32 MB (01.85%) -- objects\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25002.29 MB (01.28%) -- shapes\n\u2502  \u2502   \u2502  \u2514\u2500\u2500\u25000.76 MB (00.43%) -- (5 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25002.68 MB (01.50%) -- (8 omitted)\n\u2502  \u2502   \u2514\u2500\u2500\u25001.06 MB (00.59%) -- mjit-code\n\u2502  \u2502       \u2514\u2500\u25001.06 MB (00.59%) -- (3 omitted)\n\u2502  \u251c\u2500\u2500\u250010.29 MB (05.75%) -- compartment([System Principal], 0xffffffffb3155000)\n\u2502  \u2502   \u251c\u2500\u2500\u25005.82 MB (03.26%) -- gc-heap\n\u2502  \u2502   \u2502   \u251c\u2500\u25002.30 MB (01.29%) -- objects\n\u2502  \u2502   \u2502   \u251c\u2500\u25001.44 MB (00.81%) -- shapes\n\u2502  \u2502   \u2502   \u251c\u2500\u25001.28 MB (00.72%) -- arena-unused\n\u2502  \u2502   \u2502   \u2514\u2500\u25000.80 MB (00.45%) -- (6 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25002.35 MB (01.31%) -- (10 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25001.12 MB (00.62%) -- script-data\n\u2502  \u2502   \u2514\u2500\u2500\u25001.00 MB (00.56%) -- mjit-code\n\u2502  \u2502       \u2514\u2500\u25001.00 MB (00.56%) -- (3 omitted)\n\u2502  \u251c\u2500\u2500\u2500\u25008.00 MB (04.47%) -- stack\n\u2502  \u251c\u2500\u2500\u2500\u25005.05 MB (02.82%) -- gc-heap-chunk-dirty-unused\n\u2502  \u2514\u2500\u2500\u2500\u25001.77 MB (00.99%) -- compartment(atoms)\n\u2502       \u251c\u2500\u25001.10 MB (00.61%) -- string-chars\n\u2502       \u2514\u2500\u25000.67 MB (00.38%) -- (1 omitted)\n\u251c\u2500\u2500\u250057.22 MB (31.98%) -- heap-unclassified\n\u251c\u2500\u2500\u2500\u25007.62 MB (04.26%) -- layout\n\u2502    \u251c\u2500\u25004.02 MB (02.25%) -- shell(about:memory?verbose)\n\u2502    \u2502  \u251c\u2500\u25003.98 MB (02.22%) -- arenas\n\u2502    \u2502  \u2514\u2500\u25000.04 MB (00.02%) -- (1 omitted)\n\u2502    \u251c\u2500\u25002.06 MB (01.15%) -- (19 omitted)\n\u2502    \u2514\u2500\u25001.54 MB (00.86%) -- shell(http://www.globes.co.il/news/article.aspx?did=1000681089)\n\u2502       \u251c\u2500\u25001.29 MB (00.72%) -- arenas [3]\n\u2502       \u2514\u2500\u25000.25 MB (00.14%) -- (1 omitted)\n\u251c\u2500\u2500\u2500\u25004.59 MB (02.57%) -- dom\n\u251c\u2500\u2500\u2500\u25003.89 MB (02.17%) -- storage\n\u2502    \u2514\u2500\u25003.89 MB (02.17%) -- sqlite\n\u2502       \u251c\u2500\u25002.17 MB (01.21%) -- (10 omitted)\n\u2502       \u2514\u2500\u25001.72 MB (00.96%) -- places.sqlite\n\u2502          \u251c\u2500\u25001.48 MB (00.83%) -- cache-used [4]\n\u2502          \u2514\u2500\u25000.24 MB (00.13%) -- (2 omitted)\n\u251c\u2500\u2500\u2500\u25002.21 MB (01.23%) -- spell-check\n\u251c\u2500\u2500\u2500\u25001.10 MB (00.61%) -- images\n\u2502    \u251c\u2500\u25001.06 MB (00.59%) -- content\n\u2502    \u2502  \u251c\u2500\u25001.06 MB (00.59%) -- used\n\u2502    \u2502  \u2502  \u2514\u2500\u25001.06 MB (00.59%) -- (3 omitted)\n\u2502    \u2502  \u2514\u2500\u25000.00 MB (00.00%) -- (1 omitted)\n\u2502    \u2514\u2500\u25000.04 MB (00.02%) -- (1 omitted)\n\u2514\u2500\u2500\u2500\u25000.87 MB (00.49%) -- (3 omitted)\n\nThose 216 ommited reporters are actually frames with Network error (as facebook is not accessible). Their total size of 49MB is quite disgusting.\n\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500235,552 B (00.14%) -- compartment(about:neterror?e=connectionFailure&u=https%3A//www.facebook.com/plugins/like.php%3Faction%3Drecommend%26api_key%3D159652850757022%26channel_url%3Dhttps%253A%252F%252Fs-static.ak.fbcdn.net%252Fconnect%252Fxd_proxy.php%253Fversion%253D3%2523cb%253Df3947e871a1dc64%2526origin%253Dhttp%25253A%25252F%25252Fwww.globes.co.il%25252Ff3b6c2563791242%2526relation%253Dparent.parent%2526transport%253Dpostmessage%26extended_social_context%3Dfalse%26font%3Darial%26href%3Dhttp%25253A%252F%252Fwww.globes.co.il%252Fnews%252Farticle.aspx%25253Fresid%25253D124099%26layout%3Dbutton_count%26locale%3Den_US%26node_type%3Dlink%26sdk%3Djoey%26send%3Dfalse%26show_faces%3Dfalse%26width%3D130&c=UTF-8&d=Firefox%20can%27t%20establish%20a%20connection%20to%20the%20server%20at%20www.facebook.com.)\n\u2502  \u2502      \u251c\u2500\u2500147,456 B (00.09%) -- gc-heap\n\u2502  \u2502      \u2502  \u251c\u2500\u2500\u250051,424 B (00.03%) -- arena-unused\n\u2502  \u2502      \u2502  \u251c\u2500\u2500\u250048,240 B (00.03%) -- objects\n\u2502  \u2502      \u2502  \u251c\u2500\u2500\u250044,080 B (00.03%) -- shapes\n\u2502  \u2502      \u2502  \u251c\u2500\u2500\u2500\u25001,360 B (00.00%) -- scripts\n\u2502  \u2502      \u2502  \u251c\u2500\u2500\u2500\u25001,312 B (00.00%) -- type-objects\n\u2502  \u2502      \u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500576 B (00.00%) -- arena-headers\n\u2502  \u2502      \u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500320 B (00.00%) -- arena-padding\n\u2502  \u2502      \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500144 B (00.00%) -- strings\n\u2502  \u2502      \u251c\u2500\u2500\u250065,536 B (00.04%) -- mjit-code\n\u2502  \u2502      \u2502   \u251c\u2500\u250064,392 B (00.04%) -- unused\n\u2502  \u2502      \u2502   \u251c\u2500\u2500\u25001,064 B (00.00%) -- regexp\n\u2502  \u2502      \u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u250080 B (00.00%) -- method\n\u2502  \u2502      \u251c\u2500\u2500\u250010,560 B (00.01%) -- object-slots\n\u2502  \u2502      \u251c\u2500\u2500\u2500\u25005,664 B (00.00%) -- property-tables\n\u2502  \u2502      \u251c\u2500\u2500\u2500\u25002,864 B (00.00%) -- script-data\n\u2502  \u2502      \u251c\u2500\u2500\u2500\u25001,456 B (00.00%) -- type-inference\n\u2502  \u2502      \u2502    \u2514\u2500\u25001,456 B (00.00%) -- object-main\n\u2502  \u2502      \u251c\u2500\u2500\u2500\u25001,120 B (00.00%) -- shape-kids\n\u2502  \u2502      \u251c\u2500\u2500\u2500\u2500\u2500\u2500768 B (00.00%) -- object-empty-shapes\n\u2502  \u2502      \u2514\u2500\u2500\u2500\u2500\u2500\u2500128 B (00.00%) -- string-chars", "time": "2011-09-30T21:20:05Z", "creation_time": "2011-09-30T21:20:05Z", "is_private": false, "creator": "acelists@atlas.sk", "tags": [], "attachment_id": null}, {"creator": "bzbarsky@mit.edu", "author": "bzbarsky@mit.edu", "text": "The most likely explanation here is that each of those Like buttons is in fact active at once.  So there is one iframe per like button, with some facebook JS in that iframe.  That means lots of copies of that script, etc.\n\nIf we shared the JSScript across all those, we could probably win big here...", "count": 11, "id": 5756442, "bug_id": 690229, "creation_time": "2011-10-04T04:17:09Z", "is_private": false, "time": "2011-10-04T04:17:09Z", "attachment_id": null, "raw_text": "The most likely explanation here is that each of those Like buttons is in fact active at once.  So there is one iframe per like button, with some facebook JS in that iframe.  That means lots of copies of that script, etc.\n\nIf we shared the JSScript across all those, we could probably win big here...", "tags": []}, {"is_private": false, "creation_time": "2011-10-04T17:18:08Z", "bug_id": 690229, "id": 5757803, "author": "nivtwig@gmail.com", "count": 12, "text": "(In reply to Andrew McCreight [:mccr8] from comment #9)\n> 35MB of JS for a tab isn't really that much for a complex JS website.  Gmail\n> is currently using about that much for me.\n\nNote also that the Globes Javascript compartment is using ~12.5MB for string-chars, whereas the Facebook compartment doesn't use that large amount (only ~300KB). Note also that this link has a larger number of string-chars reported than for example the first globes link (which has less than 1MB string-chars), therefore I suspect that it relates to the number of comments (1007) on this page.\n\nWhat is it used for? \nIf the comments are stored in the JS memory then if the page has 1000 comments, each with 1K characters on average (and this is exaggerated, the average is much lower, since most comments are a short text of a few lines), then it needs on the order of about 1M of string-chars to store, much less than the 12MB it uses.\nIs it possible that there is inadequate use of JS memory by Firefox in this case?\n\nCan someone explain or find out why does it use so much string-chars memory?", "creator": "nivtwig@gmail.com", "tags": [], "attachment_id": null, "raw_text": "(In reply to Andrew McCreight [:mccr8] from comment #9)\n> 35MB of JS for a tab isn't really that much for a complex JS website.  Gmail\n> is currently using about that much for me.\n\nNote also that the Globes Javascript compartment is using ~12.5MB for string-chars, whereas the Facebook compartment doesn't use that large amount (only ~300KB). Note also that this link has a larger number of string-chars reported than for example the first globes link (which has less than 1MB string-chars), therefore I suspect that it relates to the number of comments (1007) on this page.\n\nWhat is it used for? \nIf the comments are stored in the JS memory then if the page has 1000 comments, each with 1K characters on average (and this is exaggerated, the average is much lower, since most comments are a short text of a few lines), then it needs on the order of about 1M of string-chars to store, much less than the 12MB it uses.\nIs it possible that there is inadequate use of JS memory by Firefox in this case?\n\nCan someone explain or find out why does it use so much string-chars memory?", "time": "2011-10-04T17:18:08Z"}, {"is_private": false, "creation_time": "2011-10-04T20:19:53Z", "creator": "continuation@gmail.com", "tags": [], "attachment_id": null, "bug_id": 690229, "id": 5758392, "author": "continuation@gmail.com", "count": 13, "text": "I can probably modify some JS heap dumping tools to get the strings in the compartment.", "raw_text": "I can probably modify some JS heap dumping tools to get the strings in the compartment.", "time": "2011-10-04T20:19:53Z"}, {"is_private": false, "creation_time": "2011-10-05T05:17:39Z", "id": 5759486, "bug_id": 690229, "count": 14, "text": "I checked this again, and the FB compartment was only around 7 MB for the first few links.  The really huge one (1000681089) is still really huge, however.", "author": "continuation@gmail.com", "creator": "continuation@gmail.com", "tags": [], "raw_text": "I checked this again, and the FB compartment was only around 7 MB for the first few links.  The really huge one (1000681089) is still really huge, however.", "attachment_id": null, "time": "2011-10-05T05:17:39Z"}, {"attachment_id": null, "tags": [], "creator": "nivtwig@gmail.com", "is_private": false, "creation_time": "2011-10-05T20:56:58Z", "raw_text": "(In reply to Boris Zbarsky (:bz) from comment #11)\n> The most likely explanation here is that each of those Like buttons is in\n> fact active at once.  So there is one iframe per like button, with some\n> facebook JS in that iframe.  That means lots of copies of that script, etc.\n> \n> If we shared the JSScript across all those, we could probably win big here...\n\nCan someone estimate, for the reference, what needs to be done, and how much complicated is this (sharing JS between iframes, as I understand)?", "time": "2011-10-05T20:56:58Z", "text": "(In reply to Boris Zbarsky (:bz) from comment #11)\n> The most likely explanation here is that each of those Like buttons is in\n> fact active at once.  So there is one iframe per like button, with some\n> facebook JS in that iframe.  That means lots of copies of that script, etc.\n> \n> If we shared the JSScript across all those, we could probably win big here...\n\nCan someone estimate, for the reference, what needs to be done, and how much complicated is this (sharing JS between iframes, as I understand)?", "count": 15, "author": "nivtwig@gmail.com", "id": 5761519, "bug_id": 690229}, {"attachment_id": null, "tags": [], "creator": "bzbarsky@mit.edu", "creation_time": "2011-10-05T21:05:39Z", "is_private": false, "raw_text": "Luke has some work in progress to allow doing it to start with (nixing compile-n-go and so forth).  Then we need to actually store the JSScript somewhere we can retrieve it from.  See bug 679942 and its dependencies.", "time": "2011-10-05T21:05:39Z", "author": "bzbarsky@mit.edu", "text": "Luke has some work in progress to allow doing it to start with (nixing compile-n-go and so forth).  Then we need to actually store the JSScript somewhere we can retrieve it from.  See bug 679942 and its dependencies.", "count": 16, "bug_id": 690229, "id": 5761557}, {"creation_time": "2012-01-08T03:16:47Z", "is_private": false, "creator": "danialhorton@gmail.com", "tags": [], "attachment_id": null, "bug_id": 690229, "id": 5963511, "author": "danialhorton@gmail.com", "text": "opened facebook, this is a 8-12MB compartment\n\n\u2502  \u251c\u2500\u2500\u25009.49 MB (13.27%) -- compartment(http://www.facebook.com/)\n\u2502  \u2502   \u251c\u2500\u25005.66 MB (07.92%) -- gc-heap\n\u2502  \u2502   \u2502  \u251c\u2500\u25002.38 MB (03.33%) -- arena\n\u2502  \u2502   \u2502  \u2502  \u251c\u2500\u25002.33 MB (03.26%) -- unused\n\u2502  \u2502   \u2502  \u2502  \u2514\u2500\u25000.05 MB (00.07%) -- (2 omitted)\n\u2502  \u2502   \u2502  \u251c\u2500\u25001.58 MB (02.22%) -- objects\n\u2502  \u2502   \u2502  \u2502  \u251c\u2500\u25000.85 MB (01.18%) -- non-function\n\u2502  \u2502   \u2502  \u2502  \u2514\u2500\u25000.74 MB (01.03%) -- function\n\u2502  \u2502   \u2502  \u251c\u2500\u25000.96 MB (01.35%) -- shapes\n\u2502  \u2502   \u2502  \u2502  \u251c\u2500\u25000.69 MB (00.97%) -- tree\n\u2502  \u2502   \u2502  \u2502  \u2514\u2500\u25000.27 MB (00.38%) -- (1 omitted)\n\u2502  \u2502   \u2502  \u251c\u2500\u25000.53 MB (00.74%) -- scripts\n\u2502  \u2502   \u2502  \u2514\u2500\u25000.20 MB (00.29%) -- (2 omitted)\n\u2502  \u2502   \u251c\u2500\u25001.06 MB (01.49%) -- mjit-code\n\u2502  \u2502   \u2502  \u251c\u2500\u25000.89 MB (01.24%) -- method\n\u2502  \u2502   \u2502  \u2514\u2500\u25000.18 MB (00.25%) -- (2 omitted)\n\u2502  \u2502   \u251c\u2500\u25001.01 MB (01.42%) -- (3 omitted)\n\u2502  \u2502   \u251c\u2500\u25000.82 MB (01.15%) -- script-data\n\u2502  \u2502   \u251c\u2500\u25000.54 MB (00.75%) -- type-inference\n\u2502  \u2502   \u2502  \u251c\u2500\u25000.39 MB (00.54%) -- script-main\n\u2502  \u2502   \u2502  \u2514\u2500\u25000.15 MB (00.21%) -- (2 omitted)\n\u2502  \u2502   \u2514\u2500\u25000.39 MB (00.54%) -- shapes-extra\n\u2502  \u2502      \u2514\u2500\u25000.39 MB (00.54%) -- (4 omitted)\n\nopened 18 tabs containing the mangafox homepage (has a facebook share button)\n\n\u2502  \u251c\u2500\u2500\u250077.22 MB (20.33%) -- compartment(http://www.facebook.com/)\n\u2502  \u2502   \u251c\u2500\u250039.33 MB (10.36%) -- gc-heap\n\u2502  \u2502   \u2502  \u251c\u2500\u250016.31 MB (04.30%) -- objects\n\u2502  \u2502   \u2502  \u2502  \u251c\u2500\u250011.12 MB (02.93%) -- function\n\u2502  \u2502   \u2502  \u2502  \u2514\u2500\u2500\u25005.19 MB (01.37%) -- non-function\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25009.98 MB (02.63%) -- shapes\n\u2502  \u2502   \u2502  \u2502   \u251c\u2500\u25007.60 MB (02.00%) -- tree\n\u2502  \u2502   \u2502  \u2502   \u2514\u2500\u25002.39 MB (00.63%) -- dict\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25008.60 MB (02.26%) -- scripts\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25002.13 MB (00.56%) -- type-objects\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25002.13 MB (00.56%) -- arena\n\u2502  \u2502   \u2502  \u2502   \u2514\u2500\u25002.13 MB (00.56%) -- (3 omitted)\n\u2502  \u2502   \u2502  \u2514\u2500\u2500\u25000.18 MB (00.05%) -- (1 omitted)\n\u2502  \u2502   \u251c\u2500\u250014.27 MB (03.76%) -- script-data\n\u2502  \u2502   \u251c\u2500\u250010.25 MB (02.70%) -- mjit-code\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25008.74 MB (02.30%) -- method\n\u2502  \u2502   \u2502  \u2514\u2500\u2500\u25001.51 MB (00.40%) -- (2 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25004.98 MB (01.31%) -- type-inference\n\u2502  \u2502   \u2502   \u251c\u2500\u25003.17 MB (00.83%) -- script-main\n\u2502  \u2502   \u2502   \u2514\u2500\u25001.82 MB (00.48%) -- (2 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25003.72 MB (00.98%) -- shapes-extra\n\u2502  \u2502   \u2502   \u251c\u2500\u25002.56 MB (00.68%) -- tree-tables\n\u2502  \u2502   \u2502   \u2514\u2500\u25001.15 MB (00.30%) -- (3 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25003.19 MB (00.84%) -- object-slots\n\u2502  \u2502   \u2514\u2500\u2500\u25001.49 MB (00.39%) -- (2 omitted)\n\nclosed the facebook tab, leaving the 18 instances of the mangafox home page open\n\n\u2502  \u251c\u2500\u2500\u250069.77 MB (18.89%) -- compartment(http://www.facebook.com/)\n\u2502  \u2502   \u251c\u2500\u250038.05 MB (10.30%) -- gc-heap\n\u2502  \u2502   \u2502  \u251c\u2500\u250014.74 MB (03.99%) -- objects\n\u2502  \u2502   \u2502  \u2502  \u251c\u2500\u250010.38 MB (02.81%) -- function\n\u2502  \u2502   \u2502  \u2502  \u2514\u2500\u2500\u25004.36 MB (01.18%) -- non-function\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25009.15 MB (02.48%) -- shapes\n\u2502  \u2502   \u2502  \u2502   \u251c\u2500\u25007.05 MB (01.91%) -- tree\n\u2502  \u2502   \u2502  \u2502   \u2514\u2500\u25002.10 MB (00.57%) -- dict\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25008.07 MB (02.19%) -- scripts\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25003.98 MB (01.08%) -- arena\n\u2502  \u2502   \u2502  \u2502   \u251c\u2500\u25003.75 MB (01.01%) -- unused\n\u2502  \u2502   \u2502  \u2502   \u2514\u2500\u25000.24 MB (00.06%) -- (2 omitted)\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25002.01 MB (00.54%) -- type-objects\n\u2502  \u2502   \u2502  \u2514\u2500\u2500\u25000.09 MB (00.03%) -- (1 omitted)\n\u2502  \u2502   \u251c\u2500\u250013.44 MB (03.64%) -- script-data\n\u2502  \u2502   \u251c\u2500\u2500\u25009.56 MB (02.59%) -- mjit-code\n\u2502  \u2502   \u2502   \u251c\u2500\u25008.09 MB (02.19%) -- method\n\u2502  \u2502   \u2502   \u2514\u2500\u25001.47 MB (00.40%) -- (2 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25003.36 MB (00.91%) -- shapes-extra\n\u2502  \u2502   \u2502   \u251c\u2500\u25002.33 MB (00.63%) -- tree-tables\n\u2502  \u2502   \u2502   \u2514\u2500\u25001.03 MB (00.28%) -- (3 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25002.86 MB (00.77%) -- object-slots\n\u2502  \u2502   \u2514\u2500\u2500\u25002.49 MB (00.67%) -- (3 omitted)\n\nthen navigated each of those mangafox tabs to a different manga series from the home page (all 18 on a different page)\n\n\u2502  \u251c\u2500\u2500\u250025.49 MB (09.45%) -- compartment(http://www.facebook.com/)\n\u2502  \u2502   \u251c\u2500\u250017.30 MB (06.42%) -- gc-heap\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25007.45 MB (02.76%) -- arena\n\u2502  \u2502   \u2502  \u2502   \u251c\u2500\u25007.34 MB (02.72%) -- unused\n\u2502  \u2502   \u2502  \u2502   \u2514\u2500\u25000.11 MB (00.04%) -- (2 omitted)\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25004.37 MB (01.62%) -- objects\n\u2502  \u2502   \u2502  \u2502   \u251c\u2500\u25003.18 MB (01.18%) -- function\n\u2502  \u2502   \u2502  \u2502   \u2514\u2500\u25001.19 MB (00.44%) -- (1 omitted)\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25003.04 MB (01.13%) -- shapes\n\u2502  \u2502   \u2502  \u2502   \u251c\u2500\u25002.45 MB (00.91%) -- tree\n\u2502  \u2502   \u2502  \u2502   \u2514\u2500\u25000.59 MB (00.22%) -- (1 omitted)\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25001.83 MB (00.68%) -- scripts\n\u2502  \u2502   \u2502  \u2514\u2500\u2500\u25000.61 MB (00.23%) -- (2 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25003.36 MB (01.25%) -- script-data\n\u2502  \u2502   \u251c\u2500\u2500\u25001.64 MB (00.61%) -- shapes-extra\n\u2502  \u2502   \u2502   \u251c\u2500\u25001.35 MB (00.50%) -- tree-tables\n\u2502  \u2502   \u2502   \u2514\u2500\u25000.28 MB (00.11%) -- (3 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25001.63 MB (00.60%) -- mjit-code\n\u2502  \u2502   \u2502   \u2514\u2500\u25001.63 MB (00.60%) -- (3 omitted)\n\u2502  \u2502   \u2514\u2500\u2500\u25001.57 MB (00.58%) -- (4 omitted)\n\nThis is from a clean profile in 10b3\n\nsurely that facebook compartment on the mangafox home page is excessive.....\n\nin all seriousness, there should be no reason at all for the like or share button to create such a huge compartment period. i could understand if it was a continuously running script but it just sits there useless 99% of the time, however after reading through this bug, it would actually appear the script IS constantly active!\n\nFacebook is the enemy of the memshrink, lol.", "count": 17, "time": "2012-01-08T03:16:47Z", "raw_text": "opened facebook, this is a 8-12MB compartment\n\n\u2502  \u251c\u2500\u2500\u25009.49 MB (13.27%) -- compartment(http://www.facebook.com/)\n\u2502  \u2502   \u251c\u2500\u25005.66 MB (07.92%) -- gc-heap\n\u2502  \u2502   \u2502  \u251c\u2500\u25002.38 MB (03.33%) -- arena\n\u2502  \u2502   \u2502  \u2502  \u251c\u2500\u25002.33 MB (03.26%) -- unused\n\u2502  \u2502   \u2502  \u2502  \u2514\u2500\u25000.05 MB (00.07%) -- (2 omitted)\n\u2502  \u2502   \u2502  \u251c\u2500\u25001.58 MB (02.22%) -- objects\n\u2502  \u2502   \u2502  \u2502  \u251c\u2500\u25000.85 MB (01.18%) -- non-function\n\u2502  \u2502   \u2502  \u2502  \u2514\u2500\u25000.74 MB (01.03%) -- function\n\u2502  \u2502   \u2502  \u251c\u2500\u25000.96 MB (01.35%) -- shapes\n\u2502  \u2502   \u2502  \u2502  \u251c\u2500\u25000.69 MB (00.97%) -- tree\n\u2502  \u2502   \u2502  \u2502  \u2514\u2500\u25000.27 MB (00.38%) -- (1 omitted)\n\u2502  \u2502   \u2502  \u251c\u2500\u25000.53 MB (00.74%) -- scripts\n\u2502  \u2502   \u2502  \u2514\u2500\u25000.20 MB (00.29%) -- (2 omitted)\n\u2502  \u2502   \u251c\u2500\u25001.06 MB (01.49%) -- mjit-code\n\u2502  \u2502   \u2502  \u251c\u2500\u25000.89 MB (01.24%) -- method\n\u2502  \u2502   \u2502  \u2514\u2500\u25000.18 MB (00.25%) -- (2 omitted)\n\u2502  \u2502   \u251c\u2500\u25001.01 MB (01.42%) -- (3 omitted)\n\u2502  \u2502   \u251c\u2500\u25000.82 MB (01.15%) -- script-data\n\u2502  \u2502   \u251c\u2500\u25000.54 MB (00.75%) -- type-inference\n\u2502  \u2502   \u2502  \u251c\u2500\u25000.39 MB (00.54%) -- script-main\n\u2502  \u2502   \u2502  \u2514\u2500\u25000.15 MB (00.21%) -- (2 omitted)\n\u2502  \u2502   \u2514\u2500\u25000.39 MB (00.54%) -- shapes-extra\n\u2502  \u2502      \u2514\u2500\u25000.39 MB (00.54%) -- (4 omitted)\n\nopened 18 tabs containing the mangafox homepage (has a facebook share button)\n\n\u2502  \u251c\u2500\u2500\u250077.22 MB (20.33%) -- compartment(http://www.facebook.com/)\n\u2502  \u2502   \u251c\u2500\u250039.33 MB (10.36%) -- gc-heap\n\u2502  \u2502   \u2502  \u251c\u2500\u250016.31 MB (04.30%) -- objects\n\u2502  \u2502   \u2502  \u2502  \u251c\u2500\u250011.12 MB (02.93%) -- function\n\u2502  \u2502   \u2502  \u2502  \u2514\u2500\u2500\u25005.19 MB (01.37%) -- non-function\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25009.98 MB (02.63%) -- shapes\n\u2502  \u2502   \u2502  \u2502   \u251c\u2500\u25007.60 MB (02.00%) -- tree\n\u2502  \u2502   \u2502  \u2502   \u2514\u2500\u25002.39 MB (00.63%) -- dict\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25008.60 MB (02.26%) -- scripts\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25002.13 MB (00.56%) -- type-objects\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25002.13 MB (00.56%) -- arena\n\u2502  \u2502   \u2502  \u2502   \u2514\u2500\u25002.13 MB (00.56%) -- (3 omitted)\n\u2502  \u2502   \u2502  \u2514\u2500\u2500\u25000.18 MB (00.05%) -- (1 omitted)\n\u2502  \u2502   \u251c\u2500\u250014.27 MB (03.76%) -- script-data\n\u2502  \u2502   \u251c\u2500\u250010.25 MB (02.70%) -- mjit-code\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25008.74 MB (02.30%) -- method\n\u2502  \u2502   \u2502  \u2514\u2500\u2500\u25001.51 MB (00.40%) -- (2 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25004.98 MB (01.31%) -- type-inference\n\u2502  \u2502   \u2502   \u251c\u2500\u25003.17 MB (00.83%) -- script-main\n\u2502  \u2502   \u2502   \u2514\u2500\u25001.82 MB (00.48%) -- (2 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25003.72 MB (00.98%) -- shapes-extra\n\u2502  \u2502   \u2502   \u251c\u2500\u25002.56 MB (00.68%) -- tree-tables\n\u2502  \u2502   \u2502   \u2514\u2500\u25001.15 MB (00.30%) -- (3 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25003.19 MB (00.84%) -- object-slots\n\u2502  \u2502   \u2514\u2500\u2500\u25001.49 MB (00.39%) -- (2 omitted)\n\nclosed the facebook tab, leaving the 18 instances of the mangafox home page open\n\n\u2502  \u251c\u2500\u2500\u250069.77 MB (18.89%) -- compartment(http://www.facebook.com/)\n\u2502  \u2502   \u251c\u2500\u250038.05 MB (10.30%) -- gc-heap\n\u2502  \u2502   \u2502  \u251c\u2500\u250014.74 MB (03.99%) -- objects\n\u2502  \u2502   \u2502  \u2502  \u251c\u2500\u250010.38 MB (02.81%) -- function\n\u2502  \u2502   \u2502  \u2502  \u2514\u2500\u2500\u25004.36 MB (01.18%) -- non-function\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25009.15 MB (02.48%) -- shapes\n\u2502  \u2502   \u2502  \u2502   \u251c\u2500\u25007.05 MB (01.91%) -- tree\n\u2502  \u2502   \u2502  \u2502   \u2514\u2500\u25002.10 MB (00.57%) -- dict\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25008.07 MB (02.19%) -- scripts\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25003.98 MB (01.08%) -- arena\n\u2502  \u2502   \u2502  \u2502   \u251c\u2500\u25003.75 MB (01.01%) -- unused\n\u2502  \u2502   \u2502  \u2502   \u2514\u2500\u25000.24 MB (00.06%) -- (2 omitted)\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25002.01 MB (00.54%) -- type-objects\n\u2502  \u2502   \u2502  \u2514\u2500\u2500\u25000.09 MB (00.03%) -- (1 omitted)\n\u2502  \u2502   \u251c\u2500\u250013.44 MB (03.64%) -- script-data\n\u2502  \u2502   \u251c\u2500\u2500\u25009.56 MB (02.59%) -- mjit-code\n\u2502  \u2502   \u2502   \u251c\u2500\u25008.09 MB (02.19%) -- method\n\u2502  \u2502   \u2502   \u2514\u2500\u25001.47 MB (00.40%) -- (2 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25003.36 MB (00.91%) -- shapes-extra\n\u2502  \u2502   \u2502   \u251c\u2500\u25002.33 MB (00.63%) -- tree-tables\n\u2502  \u2502   \u2502   \u2514\u2500\u25001.03 MB (00.28%) -- (3 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25002.86 MB (00.77%) -- object-slots\n\u2502  \u2502   \u2514\u2500\u2500\u25002.49 MB (00.67%) -- (3 omitted)\n\nthen navigated each of those mangafox tabs to a different manga series from the home page (all 18 on a different page)\n\n\u2502  \u251c\u2500\u2500\u250025.49 MB (09.45%) -- compartment(http://www.facebook.com/)\n\u2502  \u2502   \u251c\u2500\u250017.30 MB (06.42%) -- gc-heap\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25007.45 MB (02.76%) -- arena\n\u2502  \u2502   \u2502  \u2502   \u251c\u2500\u25007.34 MB (02.72%) -- unused\n\u2502  \u2502   \u2502  \u2502   \u2514\u2500\u25000.11 MB (00.04%) -- (2 omitted)\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25004.37 MB (01.62%) -- objects\n\u2502  \u2502   \u2502  \u2502   \u251c\u2500\u25003.18 MB (01.18%) -- function\n\u2502  \u2502   \u2502  \u2502   \u2514\u2500\u25001.19 MB (00.44%) -- (1 omitted)\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25003.04 MB (01.13%) -- shapes\n\u2502  \u2502   \u2502  \u2502   \u251c\u2500\u25002.45 MB (00.91%) -- tree\n\u2502  \u2502   \u2502  \u2502   \u2514\u2500\u25000.59 MB (00.22%) -- (1 omitted)\n\u2502  \u2502   \u2502  \u251c\u2500\u2500\u25001.83 MB (00.68%) -- scripts\n\u2502  \u2502   \u2502  \u2514\u2500\u2500\u25000.61 MB (00.23%) -- (2 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25003.36 MB (01.25%) -- script-data\n\u2502  \u2502   \u251c\u2500\u2500\u25001.64 MB (00.61%) -- shapes-extra\n\u2502  \u2502   \u2502   \u251c\u2500\u25001.35 MB (00.50%) -- tree-tables\n\u2502  \u2502   \u2502   \u2514\u2500\u25000.28 MB (00.11%) -- (3 omitted)\n\u2502  \u2502   \u251c\u2500\u2500\u25001.63 MB (00.60%) -- mjit-code\n\u2502  \u2502   \u2502   \u2514\u2500\u25001.63 MB (00.60%) -- (3 omitted)\n\u2502  \u2502   \u2514\u2500\u2500\u25001.57 MB (00.58%) -- (4 omitted)\n\nThis is from a clean profile in 10b3\n\nsurely that facebook compartment on the mangafox home page is excessive.....\n\nin all seriousness, there should be no reason at all for the like or share button to create such a huge compartment period. i could understand if it was a continuously running script but it just sits there useless 99% of the time, however after reading through this bug, it would actually appear the script IS constantly active!\n\nFacebook is the enemy of the memshrink, lol."}, {"bug_id": 690229, "id": 6055619, "author": "scrapmachines@gmail.com", "count": 18, "text": "Is someone looking into this bug ?\nI seem to have discovered another issue, if any site contains a FB social plugin, a like button or anything like mentioned in the above comments, then it also causes Zombie compartments if you have a facebook.com tab opened side by side.\nFor example having both Facebook.com and 9gag.com tabs opeoned, I have : \n\u25002,333,184 B (01.08%) -- top=312 (inner=315)\n\u2502      \u2502  \u2502   \u251c\u2500\u2500\u2500\u2500828,421 B (00.38%) -- inner-window(id=339, uri=https://www.facebook.com/plugins/comments.php?api_key=111569915535689&channel_url=https%3A%2F%2Fs-static.ak.fbcdn.net%2Fconnect%2Fxd_proxy.php%3Fversion%3D3%23cb%3Df17cc1cd0b69958%26origin%3Dhttp%253A%252F%252F9gag.com%252Ffa54797aaf742a%26relation%3Dparent.parent%26transport%3Dpostmessage&href=http%3A%2F%2F9gag.com%2Fgag%2F2535083&locale=en_US&numposts=10&sdk=joey&width=700)\n\u2502      \u2502  \u2502   \u2502    \u251c\u2500\u2500515,965 B (00.24%) \u2500\u2500 dom\n\u2502      \u2502  \u2502   \u2502    \u2514\u2500\u2500312,456 B (00.14%) \u2500\u2500 style-sheets\n\u2502      \u2502  \u2502   \u251c\u2500\u2500\u2500\u2500676,677 B (00.31%) -- inner-window(id=315, uri=http://9gag.com/gag/2535083?ref=fb)\n\u2502      \u2502  \u2502   \u2502    \u251c\u2500\u2500545,632 B (00.25%) \u2500\u2500 style-sheets\n\u2502      \u2502  \u2502   \u2502    \u2514\u2500\u2500131,045 B (00.06%) \u2500\u2500 dom\n\u2502      \u2502  \u2502   \u251c\u2500\u2500\u2500\u2500218,806 B (00.10%) -- inner-window(id=352, uri=https://www.facebook.com/plugins/like.php?api_key=111569915535689&channel_url=https%3A%2F%2Fs-static.ak.fbcdn.net%2Fconnect%2Fxd_proxy.php%3Fversion%3D3%23cb%3Df3d1c00768edae8%26origin%3Dhttp%253A%252F%252F9gag.com%252Ffa54797aaf742a%26relation%3Dparent.parent%26transport%3Dpostmessage&extended_social_context=false&href=http%3A%2F%2Ffacebook.com%2F9gag&layout=standard&locale=en_US&node_type=link&sdk=joey&send=false&show_faces=true&width=270)\n\u2502      \u2502  \u2502   \u2502    \u251c\u2500\u2500170,776 B (00.08%) \u2500\u2500 style-sheets\n\u2502      \u2502  \u2502   \u2502    \u2514\u2500\u2500\u250048,030 B (00.02%) \u2500\u2500 dom\n\u2502      \u2502  \u2502   \u251c\u2500\u2500\u2500\u2500205,921 B (00.10%) -- inner-window(id=351, uri=https://www.facebook.com/plugins/like.php?api_key=111569915535689&channel_url=https%3A%2F%2Fs-static.ak.fbcdn.net%2Fconnect%2Fxd_proxy.php%3Fversion%3D3%23cb%3Df27bba46e6ed47e%26origin%3Dhttp%253A%252F%252F9gag.com%252Ffa54797aaf742a%26relation%3Dparent.parent%26transport%3Dpostmessage&extended_social_context=false&href=http%3A%2F%2F9gag.com%2Fgag%2F2535083&layout=button_count&locale=en_US&node_type=link&sdk=joey&send=false&show_faces=false&width=90)\n\u2502      \u2502  \u2502   \u2502    \u251c\u2500\u2500171,080 B (00.08%) \u2500\u2500 style-sheets\n\u2502      \u2502  \u2502   \u2502    \u2514\u2500\u2500\u250034,841 B (00.02%) \u2500\u2500 dom\n\u2502      \u2502  \u2502   \u251c\u2500\u2500\u2500\u2500111,366 B (00.05%) -- inner-window(id=336, uri=http://platform.twitter.com/widgets/follow_button.1326407570.html#_=1329133121577&_version=2&enableNewSizing=false&id=twitter-widget-2&lang=en&screen_name=9gag&size=m)\n\u2502      \u2502  \u2502   \u2502    \u251c\u2500\u2500\u250084,814 B (00.04%) \u2500\u2500 dom\n\u2502      \u2502  \u2502   \u2502    \u2514\u2500\u2500\u250026,552 B (00.01%) \u2500\u2500 style-sheets\n\u2502      \u2502  \u2502  \n\nas the breakdown of compartment created by FB on 9gag.\nThis is the 9gag.com breakdown\n\u25004,592,296 B (02.12%) -- compartment(http://9gag.com/gag/2535083?ref=fb)\n\u2502  \u2502    \u251c\u2500\u25002,666,496 B (01.23%) -- gc-heap\n\u2502  \u2502    \u2502  \u251c\u2500\u2500\u2500\u2500932,744 B (00.43%) -- arena\n\u2502  \u2502    \u2502  \u2502    \u251c\u2500\u2500912,152 B (00.42%) \u2500\u2500 unused\n\u2502  \u2502    \u2502  \u2502    \u251c\u2500\u2500\u250010,416 B (00.00%) \u2500\u2500 headers\n\u2502  \u2502    \u2502  \u2502    \u2514\u2500\u2500\u250010,176 B (00.00%) \u2500\u2500 padding\n\u2502  \u2502    \u2502  \u251c\u2500\u2500\u2500\u2500625,232 B (00.29%) -- objects\n\u2502  \u2502    \u2502  \u2502    \u251c\u2500\u2500325,056 B (00.15%) \u2500\u2500 function\n\u2502  \u2502    \u2502  \u2502    \u2514\u2500\u2500300,176 B (00.14%) \u2500\u2500 non-function\n\u2502  \u2502    \u2502  \u251c\u2500\u2500\u2500\u2500498,240 B (00.23%) \u2500\u2500 scripts\n\u2502  \u2502    \u2502  \u251c\u2500\u2500\u2500\u2500456,152 B (00.21%) -- shapes\n\u2502  \u2502    \u2502  \u2502    \u251c\u2500\u2500222,384 B (00.10%) \u2500\u2500 tree\n\u2502  \u2502    \u2502  \u2502    \u251c\u2500\u2500182,184 B (00.08%) \u2500\u2500 dict\n\u2502  \u2502    \u2502  \u2502    \u2514\u2500\u2500\u250051,584 B (00.02%) \u2500\u2500 base\n\u2502  \u2502    \u2502  \u251c\u2500\u2500\u2500\u2500144,416 B (00.07%) \u2500\u2500 type-objects\n\u2502  \u2502    \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u25009,712 B (00.00%) \u2500\u2500 strings\n\u2502  \u2502    \u251c\u2500\u2500\u2500\u2500835,776 B (00.39%) \u2500\u2500 script-data\n\u2502  \u2502    \u251c\u2500\u2500\u2500\u2500376,512 B (00.17%) -- shapes-extra\n\u2502  \u2502    \u2502    \u251c\u2500\u2500223,008 B (00.10%) \u2500\u2500 tree-tables\n\u2502  \u2502    \u2502    \u251c\u2500\u2500\u250076,352 B (00.04%) \u2500\u2500 dict-tables\n\u2502  \u2502    \u2502    \u251c\u2500\u2500\u250044,128 B (00.02%) \u2500\u2500 tree-shape-kids\n\u2502  \u2502    \u2502    \u2514\u2500\u2500\u250033,024 B (00.02%) \u2500\u2500 compartment-tables\n\u2502  \u2502    \u251c\u2500\u2500\u2500\u2500327,680 B (00.15%) -- mjit\n\u2502  \u2502    \u2502    \u2514\u2500\u2500327,680 B (00.15%) \u2500\u2500 code\n\u2502  \u2502    \u251c\u2500\u2500\u2500\u2500176,280 B (00.08%) -- objects\n\u2502  \u2502    \u2502    \u251c\u2500\u2500164,800 B (00.08%) \u2500\u2500 slots\n\u2502  \u2502    \u2502    \u251c\u2500\u2500\u2500\u25007,512 B (00.00%) \u2500\u2500 misc\n\u2502  \u2502    \u2502    \u2514\u2500\u2500\u2500\u25003,968 B (00.00%) \u2500\u2500 elements\n\u2502  \u2502    \u251c\u2500\u2500\u2500\u2500150,056 B (00.07%) -- type-inference\n\u2502  \u2502    \u2502    \u251c\u2500\u2500\u250088,720 B (00.04%) \u2500\u2500 object-main\n\u2502  \u2502    \u2502    \u251c\u2500\u2500\u250038,368 B (00.02%) \u2500\u2500 script-main\n\u2502  \u2502    \u2502    \u2514\u2500\u2500\u250022,968 B (00.01%) \u2500\u2500 tables\n\u2502  \u2502    \u251c\u2500\u2500\u2500\u2500\u250042,352 B (00.02%) \u2500\u2500 analysis-temporary\n\u2502  \u2502    \u2514\u2500\u2500\u2500\u2500\u250017,144 B (00.01%) \u2500\u2500 string-chars\n\nnow when  close 9gag.com tab and still have facebook.com tab open I have (after pressing minimize memory button many times):\n\u251c\u2500\u2500\u2500\u2500400 B (00.00%) -- inner-window(id=352, uri=https://www.facebook.com/plugins/like.php?api_key=111569915535689&channel_url=https%3A%2F%2Fs-static.ak.fbcdn.net%2Fconnect%2Fxd_proxy.php%3Fversion%3D3%23cb%3Df3d1c00768edae8%26origin%3Dhttp%253A%252F%252F9gag.com%252Ffa54797aaf742a%26relation%3Dparent.parent%26transport%3Dpostmessage&extended_social_context=false&href=http%3A%2F%2Ffacebook.com%2F9gag&layout=standard&locale=en_US&node_type=link&sdk=joey&send=false&show_faces=true&width=270)\n\u2502                 \u2502    \u2514\u2500\u2500400 B (00.00%) \u2500\u2500 dom\n\u2502                 \n\nEven though this is only 400 B , but it was not present before opening the 9gag page, but is still left out after closing it. Thus is a zombie compartment.\n\nIf I close Facebook.com page now, then the compartment goes away and the memory is released.\nIMO, this is not just Facebook's issue, but somehow Firefox thinks that the dom is still in use as it sees facebook.com in the url of the script and thus keeps it active. Once facebook.com is also closed, it releases the memory as it thinkgs that was associated with facebook.com tab ??", "time": "2012-02-13T11:48:33Z", "raw_text": "Is someone looking into this bug ?\nI seem to have discovered another issue, if any site contains a FB social plugin, a like button or anything like mentioned in the above comments, then it also causes Zombie compartments if you have a facebook.com tab opened side by side.\nFor example having both Facebook.com and 9gag.com tabs opeoned, I have : \n\u25002,333,184 B (01.08%) -- top=312 (inner=315)\n\u2502      \u2502  \u2502   \u251c\u2500\u2500\u2500\u2500828,421 B (00.38%) -- inner-window(id=339, uri=https://www.facebook.com/plugins/comments.php?api_key=111569915535689&channel_url=https%3A%2F%2Fs-static.ak.fbcdn.net%2Fconnect%2Fxd_proxy.php%3Fversion%3D3%23cb%3Df17cc1cd0b69958%26origin%3Dhttp%253A%252F%252F9gag.com%252Ffa54797aaf742a%26relation%3Dparent.parent%26transport%3Dpostmessage&href=http%3A%2F%2F9gag.com%2Fgag%2F2535083&locale=en_US&numposts=10&sdk=joey&width=700)\n\u2502      \u2502  \u2502   \u2502    \u251c\u2500\u2500515,965 B (00.24%) \u2500\u2500 dom\n\u2502      \u2502  \u2502   \u2502    \u2514\u2500\u2500312,456 B (00.14%) \u2500\u2500 style-sheets\n\u2502      \u2502  \u2502   \u251c\u2500\u2500\u2500\u2500676,677 B (00.31%) -- inner-window(id=315, uri=http://9gag.com/gag/2535083?ref=fb)\n\u2502      \u2502  \u2502   \u2502    \u251c\u2500\u2500545,632 B (00.25%) \u2500\u2500 style-sheets\n\u2502      \u2502  \u2502   \u2502    \u2514\u2500\u2500131,045 B (00.06%) \u2500\u2500 dom\n\u2502      \u2502  \u2502   \u251c\u2500\u2500\u2500\u2500218,806 B (00.10%) -- inner-window(id=352, uri=https://www.facebook.com/plugins/like.php?api_key=111569915535689&channel_url=https%3A%2F%2Fs-static.ak.fbcdn.net%2Fconnect%2Fxd_proxy.php%3Fversion%3D3%23cb%3Df3d1c00768edae8%26origin%3Dhttp%253A%252F%252F9gag.com%252Ffa54797aaf742a%26relation%3Dparent.parent%26transport%3Dpostmessage&extended_social_context=false&href=http%3A%2F%2Ffacebook.com%2F9gag&layout=standard&locale=en_US&node_type=link&sdk=joey&send=false&show_faces=true&width=270)\n\u2502      \u2502  \u2502   \u2502    \u251c\u2500\u2500170,776 B (00.08%) \u2500\u2500 style-sheets\n\u2502      \u2502  \u2502   \u2502    \u2514\u2500\u2500\u250048,030 B (00.02%) \u2500\u2500 dom\n\u2502      \u2502  \u2502   \u251c\u2500\u2500\u2500\u2500205,921 B (00.10%) -- inner-window(id=351, uri=https://www.facebook.com/plugins/like.php?api_key=111569915535689&channel_url=https%3A%2F%2Fs-static.ak.fbcdn.net%2Fconnect%2Fxd_proxy.php%3Fversion%3D3%23cb%3Df27bba46e6ed47e%26origin%3Dhttp%253A%252F%252F9gag.com%252Ffa54797aaf742a%26relation%3Dparent.parent%26transport%3Dpostmessage&extended_social_context=false&href=http%3A%2F%2F9gag.com%2Fgag%2F2535083&layout=button_count&locale=en_US&node_type=link&sdk=joey&send=false&show_faces=false&width=90)\n\u2502      \u2502  \u2502   \u2502    \u251c\u2500\u2500171,080 B (00.08%) \u2500\u2500 style-sheets\n\u2502      \u2502  \u2502   \u2502    \u2514\u2500\u2500\u250034,841 B (00.02%) \u2500\u2500 dom\n\u2502      \u2502  \u2502   \u251c\u2500\u2500\u2500\u2500111,366 B (00.05%) -- inner-window(id=336, uri=http://platform.twitter.com/widgets/follow_button.1326407570.html#_=1329133121577&_version=2&enableNewSizing=false&id=twitter-widget-2&lang=en&screen_name=9gag&size=m)\n\u2502      \u2502  \u2502   \u2502    \u251c\u2500\u2500\u250084,814 B (00.04%) \u2500\u2500 dom\n\u2502      \u2502  \u2502   \u2502    \u2514\u2500\u2500\u250026,552 B (00.01%) \u2500\u2500 style-sheets\n\u2502      \u2502  \u2502  \n\nas the breakdown of compartment created by FB on 9gag.\nThis is the 9gag.com breakdown\n\u25004,592,296 B (02.12%) -- compartment(http://9gag.com/gag/2535083?ref=fb)\n\u2502  \u2502    \u251c\u2500\u25002,666,496 B (01.23%) -- gc-heap\n\u2502  \u2502    \u2502  \u251c\u2500\u2500\u2500\u2500932,744 B (00.43%) -- arena\n\u2502  \u2502    \u2502  \u2502    \u251c\u2500\u2500912,152 B (00.42%) \u2500\u2500 unused\n\u2502  \u2502    \u2502  \u2502    \u251c\u2500\u2500\u250010,416 B (00.00%) \u2500\u2500 headers\n\u2502  \u2502    \u2502  \u2502    \u2514\u2500\u2500\u250010,176 B (00.00%) \u2500\u2500 padding\n\u2502  \u2502    \u2502  \u251c\u2500\u2500\u2500\u2500625,232 B (00.29%) -- objects\n\u2502  \u2502    \u2502  \u2502    \u251c\u2500\u2500325,056 B (00.15%) \u2500\u2500 function\n\u2502  \u2502    \u2502  \u2502    \u2514\u2500\u2500300,176 B (00.14%) \u2500\u2500 non-function\n\u2502  \u2502    \u2502  \u251c\u2500\u2500\u2500\u2500498,240 B (00.23%) \u2500\u2500 scripts\n\u2502  \u2502    \u2502  \u251c\u2500\u2500\u2500\u2500456,152 B (00.21%) -- shapes\n\u2502  \u2502    \u2502  \u2502    \u251c\u2500\u2500222,384 B (00.10%) \u2500\u2500 tree\n\u2502  \u2502    \u2502  \u2502    \u251c\u2500\u2500182,184 B (00.08%) \u2500\u2500 dict\n\u2502  \u2502    \u2502  \u2502    \u2514\u2500\u2500\u250051,584 B (00.02%) \u2500\u2500 base\n\u2502  \u2502    \u2502  \u251c\u2500\u2500\u2500\u2500144,416 B (00.07%) \u2500\u2500 type-objects\n\u2502  \u2502    \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u25009,712 B (00.00%) \u2500\u2500 strings\n\u2502  \u2502    \u251c\u2500\u2500\u2500\u2500835,776 B (00.39%) \u2500\u2500 script-data\n\u2502  \u2502    \u251c\u2500\u2500\u2500\u2500376,512 B (00.17%) -- shapes-extra\n\u2502  \u2502    \u2502    \u251c\u2500\u2500223,008 B (00.10%) \u2500\u2500 tree-tables\n\u2502  \u2502    \u2502    \u251c\u2500\u2500\u250076,352 B (00.04%) \u2500\u2500 dict-tables\n\u2502  \u2502    \u2502    \u251c\u2500\u2500\u250044,128 B (00.02%) \u2500\u2500 tree-shape-kids\n\u2502  \u2502    \u2502    \u2514\u2500\u2500\u250033,024 B (00.02%) \u2500\u2500 compartment-tables\n\u2502  \u2502    \u251c\u2500\u2500\u2500\u2500327,680 B (00.15%) -- mjit\n\u2502  \u2502    \u2502    \u2514\u2500\u2500327,680 B (00.15%) \u2500\u2500 code\n\u2502  \u2502    \u251c\u2500\u2500\u2500\u2500176,280 B (00.08%) -- objects\n\u2502  \u2502    \u2502    \u251c\u2500\u2500164,800 B (00.08%) \u2500\u2500 slots\n\u2502  \u2502    \u2502    \u251c\u2500\u2500\u2500\u25007,512 B (00.00%) \u2500\u2500 misc\n\u2502  \u2502    \u2502    \u2514\u2500\u2500\u2500\u25003,968 B (00.00%) \u2500\u2500 elements\n\u2502  \u2502    \u251c\u2500\u2500\u2500\u2500150,056 B (00.07%) -- type-inference\n\u2502  \u2502    \u2502    \u251c\u2500\u2500\u250088,720 B (00.04%) \u2500\u2500 object-main\n\u2502  \u2502    \u2502    \u251c\u2500\u2500\u250038,368 B (00.02%) \u2500\u2500 script-main\n\u2502  \u2502    \u2502    \u2514\u2500\u2500\u250022,968 B (00.01%) \u2500\u2500 tables\n\u2502  \u2502    \u251c\u2500\u2500\u2500\u2500\u250042,352 B (00.02%) \u2500\u2500 analysis-temporary\n\u2502  \u2502    \u2514\u2500\u2500\u2500\u2500\u250017,144 B (00.01%) \u2500\u2500 string-chars\n\nnow when  close 9gag.com tab and still have facebook.com tab open I have (after pressing minimize memory button many times):\n\u251c\u2500\u2500\u2500\u2500400 B (00.00%) -- inner-window(id=352, uri=https://www.facebook.com/plugins/like.php?api_key=111569915535689&channel_url=https%3A%2F%2Fs-static.ak.fbcdn.net%2Fconnect%2Fxd_proxy.php%3Fversion%3D3%23cb%3Df3d1c00768edae8%26origin%3Dhttp%253A%252F%252F9gag.com%252Ffa54797aaf742a%26relation%3Dparent.parent%26transport%3Dpostmessage&extended_social_context=false&href=http%3A%2F%2Ffacebook.com%2F9gag&layout=standard&locale=en_US&node_type=link&sdk=joey&send=false&show_faces=true&width=270)\n\u2502                 \u2502    \u2514\u2500\u2500400 B (00.00%) \u2500\u2500 dom\n\u2502                 \n\nEven though this is only 400 B , but it was not present before opening the 9gag page, but is still left out after closing it. Thus is a zombie compartment.\n\nIf I close Facebook.com page now, then the compartment goes away and the memory is released.\nIMO, this is not just Facebook's issue, but somehow Firefox thinks that the dom is still in use as it sees facebook.com in the url of the script and thus keeps it active. Once facebook.com is also closed, it releases the memory as it thinkgs that was associated with facebook.com tab ??", "creation_time": "2012-02-13T11:48:33Z", "is_private": false, "creator": "scrapmachines@gmail.com", "tags": [], "attachment_id": null}, {"bug_id": 690229, "id": 6055627, "creation_time": "2012-02-13T11:52:22Z", "is_private": false, "creator": "danialhorton@gmail.com", "author": "danialhorton@gmail.com", "count": 19, "text": "already reported that in another memshrink/js bug.", "tags": [], "time": "2012-02-13T11:52:22Z", "attachment_id": null, "raw_text": "already reported that in another memshrink/js bug."}, {"creation_time": "2012-02-13T11:54:28Z", "is_private": false, "bug_id": 690229, "id": 6055630, "text": "right above yours infact!", "count": 20, "author": "danialhorton@gmail.com", "creator": "danialhorton@gmail.com", "tags": [], "raw_text": "right above yours infact!", "attachment_id": null, "time": "2012-02-13T11:54:28Z"}, {"creation_time": "2012-02-13T11:55:48Z", "is_private": false, "id": 6055631, "bug_id": 690229, "author": "danialhorton@gmail.com", "text": "should this be marked as depends on bug 679942 ?", "count": 21, "creator": "danialhorton@gmail.com", "tags": [], "attachment_id": null, "raw_text": "should this be marked as depends on bug 679942 ?", "time": "2012-02-13T11:55:48Z"}, {"creator": "scrapmachines@gmail.com", "count": 22, "text": "No No , the comment right above mine is about excessive usage of memory by small like buttons etc.\nI am pointing out the fact that some portion of memory from these pages still remain even after closing the pages and lives as zombie compartments, until facebook.com tabs is not closed.\nMemory used by opening/closing of 9gag or any other site that uses fb social plugin should not depend on the presence of facebook.com open in another tab.", "author": "scrapmachines@gmail.com", "id": 6055633, "bug_id": 690229, "creation_time": "2012-02-13T11:58:50Z", "is_private": false, "time": "2012-02-13T11:58:50Z", "raw_text": "No No , the comment right above mine is about excessive usage of memory by small like buttons etc.\nI am pointing out the fact that some portion of memory from these pages still remain even after closing the pages and lives as zombie compartments, until facebook.com tabs is not closed.\nMemory used by opening/closing of 9gag or any other site that uses fb social plugin should not depend on the presence of facebook.com open in another tab.", "attachment_id": null, "tags": []}, {"tags": [], "attachment_id": null, "creation_time": "2012-02-13T12:09:49Z", "is_private": false, "creator": "danialhorton@gmail.com", "raw_text": "these buttons are part of the very facebook social plugin system you refer to ;)", "time": "2012-02-13T12:09:49Z", "bug_id": 690229, "id": 6055652, "author": "danialhorton@gmail.com", "count": 23, "text": "these buttons are part of the very facebook social plugin system you refer to ;)"}, {"creator": "danialhorton@gmail.com", "author": "danialhorton@gmail.com", "count": 24, "text": "in my post, it displays facebook.com because that was the site that created the compartment initially.\n\nthe same pages open today have facebook load in \n\n\u2502  \u251c\u2500\u2500\u250010.86 MB (01.98%) -- compartment(http://www.facebook.com/plugins/like.php?locale=en_US&href=http%3A%2F%2Fwww.facebook.com%2Fmangafoxlife&send=false&layout=button_count&width=100&show_faces=false&action=like&colorscheme=light&font&height=21&appId=141149349292130)\n\nas the plugin was the compartment creator (from the mangafox site) instead of facebook.com", "bug_id": 690229, "id": 6055658, "is_private": false, "creation_time": "2012-02-13T12:14:27Z", "time": "2012-02-13T12:14:27Z", "attachment_id": null, "raw_text": "in my post, it displays facebook.com because that was the site that created the compartment initially.\n\nthe same pages open today have facebook load in \n\n\u2502  \u251c\u2500\u2500\u250010.86 MB (01.98%) -- compartment(http://www.facebook.com/plugins/like.php?locale=en_US&href=http%3A%2F%2Fwww.facebook.com%2Fmangafoxlife&send=false&layout=button_count&width=100&show_faces=false&action=like&colorscheme=light&font&height=21&appId=141149349292130)\n\nas the plugin was the compartment creator (from the mangafox site) instead of facebook.com", "tags": []}, {"raw_text": "I am a little confused. What exactly do you mean ?\n\nIMO what's the use of the button (or the memory used by the button) if the page containing the buttons have been closed. The memory should be released.", "time": "2012-02-13T12:16:41Z", "author": "scrapmachines@gmail.com", "count": 25, "text": "I am a little confused. What exactly do you mean ?\n\nIMO what's the use of the button (or the memory used by the button) if the page containing the buttons have been closed. The memory should be released.", "id": 6055662, "bug_id": 690229, "attachment_id": null, "tags": [], "creator": "scrapmachines@gmail.com", "is_private": false, "creation_time": "2012-02-13T12:16:41Z"}, {"tags": [], "time": "2012-02-13T12:22:13Z", "raw_text": "9gag created the compartment initial compartment for the facebook plugin, then you opened a instance of facebook in another tab.\n\nthe instance of facebook will use the plugin compartment created by the 9gag site as it has the same origin.\n\nThats why \"https://www.facebook.com/plugins/like.php?api_key=111569915535689&..... \" remains until you close the facebook tab.\n\nIt can also remain open if any other tab you have opened implements a facebook plugin/script.", "attachment_id": null, "id": 6055666, "bug_id": 690229, "is_private": false, "creation_time": "2012-02-13T12:22:13Z", "creator": "danialhorton@gmail.com", "count": 26, "text": "9gag created the compartment initial compartment for the facebook plugin, then you opened a instance of facebook in another tab.\n\nthe instance of facebook will use the plugin compartment created by the 9gag site as it has the same origin.\n\nThats why \"https://www.facebook.com/plugins/like.php?api_key=111569915535689&..... \" remains until you close the facebook tab.\n\nIt can also remain open if any other tab you have opened implements a facebook plugin/script.", "author": "danialhorton@gmail.com"}, {"creator": "danialhorton@gmail.com", "author": "danialhorton@gmail.com", "text": "\"Firefox\u2019s JavaScript memory is segregated into compartments.  Roughly speaking, all memory used by JavaScript code that is from a particular origin (i.e. website) goes into its own compartment.  Firefox\u2019s own JavaScript code also gets one or more compartments.  Compartments improve security and memory locality.\"\n\nfrom http://blog.mozilla.com/nnethercote/2011/07/20/zombie-compartments-recognize-and-report-them-stop-the-screaming/", "count": 27, "bug_id": 690229, "id": 6055668, "creation_time": "2012-02-13T12:24:10Z", "is_private": false, "time": "2012-02-13T12:24:10Z", "attachment_id": null, "raw_text": "\"Firefox\u2019s JavaScript memory is segregated into compartments.  Roughly speaking, all memory used by JavaScript code that is from a particular origin (i.e. website) goes into its own compartment.  Firefox\u2019s own JavaScript code also gets one or more compartments.  Compartments improve security and memory locality.\"\n\nfrom http://blog.mozilla.com/nnethercote/2011/07/20/zombie-compartments-recognize-and-report-them-stop-the-screaming/", "tags": []}, {"text": "Ok, I see what you are saying.\nBut I opened the FB page first, then 9gag. and closed 9gag first then fb.\n\nAlso I am aware of the way JS compartments behave. Its just that even if another tab/site created the compartment of the same origin as that of facebook.com, closing the tab should have removed the memory. Isn't it ?\nI think then this flaw is by design?", "count": 28, "author": "scrapmachines@gmail.com", "creator": "scrapmachines@gmail.com", "creation_time": "2012-02-13T12:27:48Z", "is_private": false, "id": 6055673, "bug_id": 690229, "raw_text": "Ok, I see what you are saying.\nBut I opened the FB page first, then 9gag. and closed 9gag first then fb.\n\nAlso I am aware of the way JS compartments behave. Its just that even if another tab/site created the compartment of the same origin as that of facebook.com, closing the tab should have removed the memory. Isn't it ?\nI think then this flaw is by design?", "attachment_id": null, "time": "2012-02-13T12:27:48Z", "tags": []}, {"creator": "danialhorton@gmail.com", "creation_time": "2012-02-13T12:48:25Z", "is_private": false, "attachment_id": null, "tags": [], "text": "if the flaw is that the compartment namespace doesn't change to the current open domain, then yes.", "count": 29, "author": "danialhorton@gmail.com", "bug_id": 690229, "id": 6055704, "time": "2012-02-13T12:48:25Z", "raw_text": "if the flaw is that the compartment namespace doesn't change to the current open domain, then yes."}, {"tags": [], "attachment_id": null, "raw_text": "scrapmachines, you're talking about zombie compartments but most of what you've copied are entries showing inner windows.  It's not clear to me there's a problem.  \n\nBut if you think there is a problem, can you please open a separate bug?  Things are much simpler if we stick to one issue per bug, and this bug is about large Facebook compartments.  Thanks.", "time": "2012-02-13T23:40:05Z", "is_private": false, "creation_time": "2012-02-13T23:40:05Z", "bug_id": 690229, "id": 6057985, "author": "n.nethercote@gmail.com", "count": 30, "text": "scrapmachines, you're talking about zombie compartments but most of what you've copied are entries showing inner windows.  It's not clear to me there's a problem.  \n\nBut if you think there is a problem, can you please open a separate bug?  Things are much simpler if we stick to one issue per bug, and this bug is about large Facebook compartments.  Thanks.", "creator": "n.nethercote@gmail.com"}, {"id": 6130744, "bug_id": 690229, "creation_time": "2012-03-11T07:23:27Z", "is_private": false, "creator": "danialhorton@gmail.com", "count": 31, "text": "As something to check, i just installed the antisocial subscription for ABP and the amount of zombie compartments occuring dropped dramatically (to none infact). Just to note i was not able to generate zombies normally with a quick run through with my usual extensions enabled, only with extended usage.\n\nWith how these plugins and scripts choke the JS memory use, its possible some of these zombie compartments are occuring in the JS compilation, particularly when opening a great number of sites that use these social media plugins.", "author": "danialhorton@gmail.com", "tags": [], "time": "2012-03-11T07:23:27Z", "raw_text": "As something to check, i just installed the antisocial subscription for ABP and the amount of zombie compartments occuring dropped dramatically (to none infact). Just to note i was not able to generate zombies normally with a quick run through with my usual extensions enabled, only with extended usage.\n\nWith how these plugins and scripts choke the JS memory use, its possible some of these zombie compartments are occuring in the JS compilation, particularly when opening a great number of sites that use these social media plugins.", "attachment_id": null}, {"creation_time": "2012-03-11T07:32:48Z", "is_private": false, "bug_id": 690229, "id": 6130752, "author": "danialhorton@gmail.com", "text": "I should also mention that blocking the facebook scripts alone dropped GC times by around half. (for my session, from 680ms to 360ms)", "count": 32, "creator": "danialhorton@gmail.com", "tags": [], "attachment_id": null, "raw_text": "I should also mention that blocking the facebook scripts alone dropped GC times by around half. (for my session, from 680ms to 360ms)", "time": "2012-03-11T07:32:48Z"}, {"raw_text": "since a few days I have the same problems with this script window. At the moment Seamoney 2.25 Beta 1 uses about 750 MB (with Java & Flash Player) and about 14 or 15 Tabs in five windows. I spend some time into Facebook, just writing and sharing some things, playing one or two games) and from this moment the CPU usage rises high.. a bit down, then up again. And few moments later this \"script follow or stop\" occurs. But none of those options are useful, but the memory Usage of Seamonkey is about 1600 MB. So I guess there are some problems with Java especially in this Facebook webpage. With Opera i don't have these problems.", "time": "2014-02-21T03:05:36Z", "bug_id": 690229, "id": 8446209, "author": "haertetest_extrem@objectmail.com", "count": 33, "text": "since a few days I have the same problems with this script window. At the moment Seamoney 2.25 Beta 1 uses about 750 MB (with Java & Flash Player) and about 14 or 15 Tabs in five windows. I spend some time into Facebook, just writing and sharing some things, playing one or two games) and from this moment the CPU usage rises high.. a bit down, then up again. And few moments later this \"script follow or stop\" occurs. But none of those options are useful, but the memory Usage of Seamonkey is about 1600 MB. So I guess there are some problems with Java especially in this Facebook webpage. With Opera i don't have these problems.", "tags": [], "attachment_id": null, "is_private": false, "creation_time": "2014-02-21T03:05:36Z", "creator": "haertetest_extrem@objectmail.com"}, {"count": 34, "text": "Created attachment 8831986\ncontent://media/external/file/47393", "author": "jsuekemp@gmail.com", "creator": "jsuekemp@gmail.com", "is_private": false, "creation_time": "2017-01-31T11:30:56Z", "bug_id": 690229, "id": 12024071, "raw_text": "", "attachment_id": 8831986, "time": "2017-01-31T11:30:56Z", "tags": ["spam"]}]}}, "comments": {}}