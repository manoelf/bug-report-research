{"comments": {}, "bugs": {"654751": {"comments": [{"raw_text": "User-Agent:       Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\nBuild Identifier: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\n\nMy JavaScript code is receiving JSON data via an AJAX call, which in turn is inserted into the DOM as <select> nodes with 3 <option> nodes each. When inserting approximately 300, Firefox 4.0.x hangs for approximately 20-30 seconds, but is fine after that.\n\nAdditionally, if I insert anything else, such as text, <input> or <textarea>, there is NO slow down with Firefox.\n\nReproducible: Always\n\nSteps to Reproduce:\n1. Load a page.\n2. Page makes AJAX call for JSON data.\n3. Insert data into the DOM as <select/> nodes.\n\nActual Results:  \nVery significant browser hang. Windows ghosts the window as \"Not Responding\" for at least 20-30 seconds, then control is returned.\n\nExpected Results:  \nNo browser hang. Other tested browsers do not exhibit the slowdown.\n\nTested on an Intel Q6600 w/ 8GB RAM.\n\nApproximately 300 <select> nodes were inserted with my code. 300 <input> or <textarea> nodes did not slow down at all.", "id": 5448673, "text": "User-Agent:       Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\nBuild Identifier: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\n\nMy JavaScript code is receiving JSON data via an AJAX call, which in turn is inserted into the DOM as <select> nodes with 3 <option> nodes each. When inserting approximately 300, Firefox 4.0.x hangs for approximately 20-30 seconds, but is fine after that.\n\nAdditionally, if I insert anything else, such as text, <input> or <textarea>, there is NO slow down with Firefox.\n\nReproducible: Always\n\nSteps to Reproduce:\n1. Load a page.\n2. Page makes AJAX call for JSON data.\n3. Insert data into the DOM as <select/> nodes.\n\nActual Results:  \nVery significant browser hang. Windows ghosts the window as \"Not Responding\" for at least 20-30 seconds, then control is returned.\n\nExpected Results:  \nNo browser hang. Other tested browsers do not exhibit the slowdown.\n\nTested on an Intel Q6600 w/ 8GB RAM.\n\nApproximately 300 <select> nodes were inserted with my code. 300 <input> or <textarea> nodes did not slow down at all.", "is_private": false, "creation_time": "2011-05-04T17:19:29Z", "bug_id": 654751, "tags": [], "time": "2011-05-04T17:19:29Z", "creator": "jimmy@basicmatrix.com", "count": 0, "author": "jimmy@basicmatrix.com", "attachment_id": null}, {"bug_id": 654751, "tags": [], "count": 1, "creator": "jimmy@basicmatrix.com", "raw_text": "This test case requires jQuery and this markup:\n\n<table class=\"target_table\"><tbody></tbody></table>\n\nIt is derived from my auction code, which I cannot post as-is, but should produce the same result. I have tried many different insert targets in the DOM and they all slow it down if I am inserting <select> nodes.", "id": 5448709, "text": "Created attachment 530068\n<select> node slow insertion test case\n\nThis test case requires jQuery and this markup:\n\n<table class=\"target_table\"><tbody></tbody></table>\n\nIt is derived from my auction code, which I cannot post as-is, but should produce the same result. I have tried many different insert targets in the DOM and they all slow it down if I am inserting <select> nodes.", "creation_time": "2011-05-04T17:28:02Z", "author": "jimmy@basicmatrix.com", "time": "2011-05-04T17:28:02Z", "is_private": false, "attachment_id": 530068}, {"attachment_id": null, "is_private": false, "time": "2011-05-04T17:37:11Z", "author": "bzbarsky@mit.edu", "id": 5448749, "raw_text": "For the given testcase, I see times around 800ms in Firefox 4 and around 120ms for tip builds if I time the insert operation and a following layout flush.  But that's on Mac.\n\nReporter, would you be willing to try an Aurora build of Firefox 5?  It's pretty likely that the fix for bug 610391 makes this a lot faster.", "creation_time": "2011-05-04T17:37:11Z", "text": "For the given testcase, I see times around 800ms in Firefox 4 and around 120ms for tip builds if I time the insert operation and a following layout flush.  But that's on Mac.\n\nReporter, would you be willing to try an Aurora build of Firefox 5?  It's pretty likely that the fix for bug 610391 makes this a lot faster.", "count": 2, "tags": [], "creator": "bzbarsky@mit.edu", "bug_id": 654751}, {"attachment_id": 530089, "author": "jimmy@basicmatrix.com", "creator": "jimmy@basicmatrix.com", "count": 3, "tags": [], "time": "2011-05-04T18:16:54Z", "bug_id": 654751, "id": 5448928, "raw_text": "I will try to test a FF5 build, but only if I can do that along side my FF4 installation. Is that possible? (I've never used a non-public release.)\n\nWhen you said you ran the test in 800ms, I was concerned I might have presented a broken test case. I have now created a complete test case that runs in 17-20 sec for me. Other browsers tested (Chrome, IE9) are instant (< 1 sec). If you run my complete test case, do you still get 800ms with Firefox 4? What about if you run it in Firefox 5?", "is_private": false, "creation_time": "2011-05-04T18:16:54Z", "text": "Created attachment 530089\nComplete Test Case: select_insert_bug_test_case.zip\n\nI will try to test a FF5 build, but only if I can do that along side my FF4 installation. Is that possible? (I've never used a non-public release.)\n\nWhen you said you ran the test in 800ms, I was concerned I might have presented a broken test case. I have now created a complete test case that runs in 17-20 sec for me. Other browsers tested (Chrome, IE9) are instant (< 1 sec). If you run my complete test case, do you still get 800ms with Firefox 4? What about if you run it in Firefox 5?"}, {"attachment_id": null, "author": "bzbarsky@mit.edu", "count": 4, "tags": [], "creator": "bzbarsky@mit.edu", "time": "2011-05-04T18:26:31Z", "bug_id": 654751, "id": 5448979, "raw_text": "You can test Fx5 alongside Fx4, yes.  Create a separate profile, then start Fx5 using that profile.  There are instructions at http://support.mozilla.com/en-US/kb/Managing%20profiles\n\nJust make sure to then start up Fx4 pointing back to your old profile, because the profile used by default if none is specified is the last-used one.\n\nOn the testcase you just attached I see a time under 1s in Fx4.  But again, this is on Mac.  The performance characteristics here may well be very different on Windows, since there's OS-specific code involved in <select> in Fx4.", "is_private": false, "creation_time": "2011-05-04T18:26:31Z", "text": "You can test Fx5 alongside Fx4, yes.  Create a separate profile, then start Fx5 using that profile.  There are instructions at http://support.mozilla.com/en-US/kb/Managing%20profiles\n\nJust make sure to then start up Fx4 pointing back to your old profile, because the profile used by default if none is specified is the last-used one.\n\nOn the testcase you just attached I see a time under 1s in Fx4.  But again, this is on Mac.  The performance characteristics here may well be very different on Windows, since there's OS-specific code involved in <select> in Fx4."}, {"attachment_id": null, "time": "2011-05-04T18:35:47Z", "is_private": false, "author": "jimmy@basicmatrix.com", "bug_id": 654751, "tags": [], "count": 5, "creator": "jimmy@basicmatrix.com", "raw_text": "Thanks for all the info. I'll try to test FF5 later.\n\nFWIW, my business partner just tested it with Firefox 3.6.17 and he only sees 3-4 sec, which is an improvement but still much slower. Same spec machines (Windows 7 64-bit, Intel Core 2 Q6600 w/ 8GB ram).\n\nMy Linux box, running under VMware on the same machine, does not show the problem (FF 3.6).\n\nSo perhaps this is only affecting Windows. Firefox 3 somewhat, and Firefox 4 much more.", "id": 5449017, "text": "Thanks for all the info. I'll try to test FF5 later.\n\nFWIW, my business partner just tested it with Firefox 3.6.17 and he only sees 3-4 sec, which is an improvement but still much slower. Same spec machines (Windows 7 64-bit, Intel Core 2 Q6600 w/ 8GB ram).\n\nMy Linux box, running under VMware on the same machine, does not show the problem (FF 3.6).\n\nSo perhaps this is only affecting Windows. Firefox 3 somewhat, and Firefox 4 much more.", "creation_time": "2011-05-04T18:35:47Z"}]}}}