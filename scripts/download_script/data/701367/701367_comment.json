{"comments": {}, "bugs": {"701367": {"comments": [{"creator": "dbolter@mozilla.com", "is_private": false, "creation_time": "2011-11-10T15:38:06Z", "attachment_id": null, "tags": [], "text": "Bug starts in FF 4.0 (not present in 3.6.3)\n\nSTR:\n\nIn Windows XP (32 bit), Vista (32 bit) and Windows 7 (64 bit) - other Windows versions not tried.\n\nUsing ZoomText 9.19 demo...\n\n1. Display a page with lots of text in FF.\n2. With Firefox being the foreground application hit the ZoomText hotkey Ctrl+Alt+Shift+U which forces a redraw of all windows. The text in Firefox becomes unsmoothed and only after a focus change away from Firefox it will smooth again.\n\nThe focus away step shouldn't be required.", "count": 0, "author": "dbolter@mozilla.com", "id": 5840024, "bug_id": 701367, "time": "2011-11-10T15:38:06Z", "raw_text": "Bug starts in FF 4.0 (not present in 3.6.3)\n\nSTR:\n\nIn Windows XP (32 bit), Vista (32 bit) and Windows 7 (64 bit) - other Windows versions not tried.\n\nUsing ZoomText 9.19 demo...\n\n1. Display a page with lots of text in FF.\n2. With Firefox being the foreground application hit the ZoomText hotkey Ctrl+Alt+Shift+U which forces a redraw of all windows. The text in Firefox becomes unsmoothed and only after a focus change away from Firefox it will smooth again.\n\nThe focus away step shouldn't be required."}, {"tags": [], "attachment_id": null, "is_private": false, "creation_time": "2011-11-10T16:50:12Z", "creator": "marco.zehe@gmail.com", "raw_text": "Asking for the team responsible for Windows widgetry to have a look at this. The drawing code is not part of disability access APIs. Any idea, folks, what's going on? Is this fall-out from bug 352093?", "time": "2011-11-10T16:50:12Z", "bug_id": 701367, "id": 5840264, "text": "Asking for the team responsible for Windows widgetry to have a look at this. The drawing code is not part of disability access APIs. Any idea, folks, what's going on? Is this fall-out from bug 352093?", "count": 1, "author": "marco.zehe@gmail.com"}, {"author": "marco.zehe@gmail.com", "text": "To be clear: ZoomText is THE most widely used screen magnifying program for low-vision people on Windows.", "count": 2, "id": 5840269, "bug_id": 701367, "time": "2011-11-10T16:50:49Z", "raw_text": "To be clear: ZoomText is THE most widely used screen magnifying program for low-vision people on Windows.", "creator": "marco.zehe@gmail.com", "creation_time": "2011-11-10T16:50:49Z", "is_private": false, "attachment_id": null, "tags": []}, {"bug_id": 701367, "id": 5848905, "creation_time": "2011-11-15T08:19:11Z", "is_private": false, "creator": "surkov.alexander@gmail.com", "author": "surkov.alexander@gmail.com", "text": "Some background: it's likely they send WM_ERASEBKGND and WM_PAINT message. Jim, can you think of any change in these messages handling from Firefox 3.6?", "count": 3, "tags": [], "time": "2011-11-15T08:19:11Z", "attachment_id": null, "raw_text": "Some background: it's likely they send WM_ERASEBKGND and WM_PAINT message. Jim, can you think of any change in these messages handling from Firefox 3.6?"}, {"creation_time": "2011-11-15T15:35:49Z", "is_private": false, "bug_id": 701367, "id": 5849406, "author": "jmathies@mozilla.com", "count": 4, "text": "(In reply to alexander surkov from comment #3)\n> Some background: it's likely they send WM_ERASEBKGND and WM_PAINT message.\n> Jim, can you think of any change in these messages handling from Firefox 3.6?\n\nHardware acceleration landed in 4, we removed child widgets and the top level embedded widget, plus the titlebar work. A lot of work went on here. \n\nCan someone who can reproduce this post their about:support as an attachment?", "creator": "jmathies@mozilla.com", "tags": [], "attachment_id": null, "raw_text": "(In reply to alexander surkov from comment #3)\n> Some background: it's likely they send WM_ERASEBKGND and WM_PAINT message.\n> Jim, can you think of any change in these messages handling from Firefox 3.6?\n\nHardware acceleration landed in 4, we removed child widgets and the top level embedded widget, plus the titlebar work. A lot of work went on here. \n\nCan someone who can reproduce this post their about:support as an attachment?", "time": "2011-11-15T15:35:49Z"}, {"id": 5849466, "bug_id": 701367, "is_private": false, "creation_time": "2011-11-15T15:59:22Z", "creator": "jeckhardt@aisquared.com", "author": "jeckhardt@aisquared.com", "text": "Created attachment 574600\nabout:support of one machine that experiences the issue\n\nthis is the about:support of one of many machines where we can reproduce the issue.", "count": 5, "tags": [], "time": "2011-11-15T15:59:22Z", "attachment_id": 574600, "raw_text": "this is the about:support of one of many machines where we can reproduce the issue."}, {"creator": "jmathies@mozilla.com", "creation_time": "2011-11-15T16:21:45Z", "is_private": false, "attachment_id": null, "tags": [], "text": "(In reply to Jost Eckhardt, Ai Squared from comment #5)\n> Created attachment 574600 [details]\n> about:support of one machine that experiences the issue\n> \n> this is the about:support of one of many machines where we can reproduce the\n> issue.\n\nInteresting, you're running with GDI.\n\nSo to reproduce, basically:\n\n1) install the ZoomText trial (may require reboot)\n2) open fx, display a page with text\n3) hit Ctrl+Alt+Shift+U\n\nany missing steps here?", "count": 6, "author": "jmathies@mozilla.com", "bug_id": 701367, "id": 5849511, "raw_text": "(In reply to Jost Eckhardt, Ai Squared from comment #5)\n> Created attachment 574600 [details]\n> about:support of one machine that experiences the issue\n> \n> this is the about:support of one of many machines where we can reproduce the\n> issue.\n\nInteresting, you're running with GDI.\n\nSo to reproduce, basically:\n\n1) install the ZoomText trial (may require reboot)\n2) open fx, display a page with text\n3) hit Ctrl+Alt+Shift+U\n\nany missing steps here?", "time": "2011-11-15T16:21:45Z"}, {"creation_time": "2011-11-15T16:27:39Z", "is_private": false, "bug_id": 701367, "id": 5849521, "author": "dbolter@mozilla.com", "text": "(In reply to Jim Mathies [:jimm] from comment #6)\n \n> Interesting, you're running with GDI.\n\nYeah, lot's of AT still need to use GDI hooks.\n\nI believe those are the steps yep. Does it happen for you?", "count": 7, "creator": "dbolter@mozilla.com", "tags": [], "attachment_id": null, "raw_text": "(In reply to Jim Mathies [:jimm] from comment #6)\n \n> Interesting, you're running with GDI.\n\nYeah, lot's of AT still need to use GDI hooks.\n\nI believe those are the steps yep. Does it happen for you?", "time": "2011-11-15T16:27:39Z"}, {"attachment_id": null, "tags": [], "creator": "jeckhardt@aisquared.com", "is_private": false, "creation_time": "2011-11-15T16:32:57Z", "raw_text": "yes, GDI still needed for us\n\nthe steps should do it", "time": "2011-11-15T16:32:57Z", "text": "yes, GDI still needed for us\n\nthe steps should do it", "count": 8, "author": "jeckhardt@aisquared.com", "bug_id": 701367, "id": 5849536}, {"tags": [], "time": "2011-11-15T17:20:55Z", "raw_text": "Can you give us a bit of background one what this software does to the display of the system and what steps you take when the hot key is selected?\n\nI was able to reproduce, although I wasn't able to take a screen shot of the differences. (Both screen shots looked the same, which is interesting.)", "attachment_id": null, "bug_id": 701367, "id": 5849668, "is_private": false, "creation_time": "2011-11-15T17:20:55Z", "creator": "jmathies@mozilla.com", "text": "Can you give us a bit of background one what this software does to the display of the system and what steps you take when the hot key is selected?\n\nI was able to reproduce, although I wasn't able to take a screen shot of the differences. (Both screen shots looked the same, which is interesting.)", "count": 9, "author": "jmathies@mozilla.com"}, {"tags": [], "attachment_id": null, "is_private": false, "creation_time": "2011-11-15T19:06:20Z", "creator": "jeckhardt@aisquared.com", "raw_text": "The Windows Print Screen does not capture the magnified view. Try the ZoomText screen capture command Ctrl+Alt+Shift+C", "time": "2011-11-15T19:06:20Z", "bug_id": 701367, "id": 5849977, "count": 10, "text": "The Windows Print Screen does not capture the magnified view. Try the ZoomText screen capture command Ctrl+Alt+Shift+C", "author": "jeckhardt@aisquared.com"}, {"raw_text": "ZoomText magnifies the screen by redirecting all output heading for the screen to another location, then magnifying it and putting it on the screen. \n\nZoomText renders the text at the magnified level for smooth text output. In order to do this ZT maintains a database with the text and information to render the text. \n\nWhen the user hits Ctrl+Alt+Shitf+U the database is regenerated. And as part of that ZT is sending the redraw command to Windows.", "attachment_id": null, "time": "2011-11-15T19:10:02Z", "tags": [], "count": 11, "text": "ZoomText magnifies the screen by redirecting all output heading for the screen to another location, then magnifying it and putting it on the screen. \n\nZoomText renders the text at the magnified level for smooth text output. In order to do this ZT maintains a database with the text and information to render the text. \n\nWhen the user hits Ctrl+Alt+Shitf+U the database is regenerated. And as part of that ZT is sending the redraw command to Windows.", "author": "jeckhardt@aisquared.com", "creator": "jeckhardt@aisquared.com", "creation_time": "2011-11-15T19:10:02Z", "is_private": false, "bug_id": 701367, "id": 5849995}, {"attachment_id": null, "raw_text": "(In reply to Jost Eckhardt, Ai Squared from comment #11)\n> ZoomText magnifies the screen by redirecting all output heading for the\n> screen to another location, then magnifying it and putting it on the screen. \n> \n> ZoomText renders the text at the magnified level for smooth text output. In\n> order to do this ZT maintains a database with the text and information to\n> render the text. \n> \n> When the user hits Ctrl+Alt+Shitf+U the database is regenerated. And as part\n> of that ZT is sending the redraw command to Windows.\n\nCould you clarify how that works exactly? I don't see how ZT renders the text in Firefox's window, we do that. But if your app is somehow involved in our app's text rendering, why is this a Firefox bug?", "time": "2011-11-15T19:13:46Z", "tags": [], "author": "jmathies@mozilla.com", "count": 12, "text": "(In reply to Jost Eckhardt, Ai Squared from comment #11)\n> ZoomText magnifies the screen by redirecting all output heading for the\n> screen to another location, then magnifying it and putting it on the screen. \n> \n> ZoomText renders the text at the magnified level for smooth text output. In\n> order to do this ZT maintains a database with the text and information to\n> render the text. \n> \n> When the user hits Ctrl+Alt+Shitf+U the database is regenerated. And as part\n> of that ZT is sending the redraw command to Windows.\n\nCould you clarify how that works exactly? I don't see how ZT renders the text in Firefox's window, we do that. But if your app is somehow involved in our app's text rendering, why is this a Firefox bug?", "creator": "jmathies@mozilla.com", "creation_time": "2011-11-15T19:13:46Z", "is_private": false, "bug_id": 701367, "id": 5850006}, {"is_private": false, "creation_time": "2011-11-15T19:15:45Z", "bug_id": 701367, "id": 5850016, "author": "jmathies@mozilla.com", "count": 13, "text": "[cc'ing some folks who know a bit about how our text rendering works.]", "creator": "jmathies@mozilla.com", "tags": [], "attachment_id": null, "raw_text": "[cc'ing some folks who know a bit about how our text rendering works.]", "time": "2011-11-15T19:15:45Z"}, {"tags": [], "attachment_id": null, "raw_text": "Our application renders the entire screen, but based on the original rendering that the applications do. \n\nWe use the following command to force all currently open windows to redraw themselves:\n\nRedrawWindow(NULL, NULL, NULL, RDW_ERASE |RDW_FRAME |RDW_INTERNALPAINT |RDW_INVALIDATE |RDW_UPDATENOW |RDW_ALLCHILDREN);\n\nYour window should receive a WM_ERASEBKGND and WM_PAINT notification.", "time": "2011-11-15T19:20:03Z", "is_private": false, "creation_time": "2011-11-15T19:20:03Z", "bug_id": 701367, "id": 5850030, "author": "jeckhardt@aisquared.com", "text": "Our application renders the entire screen, but based on the original rendering that the applications do. \n\nWe use the following command to force all currently open windows to redraw themselves:\n\nRedrawWindow(NULL, NULL, NULL, RDW_ERASE |RDW_FRAME |RDW_INTERNALPAINT |RDW_INVALIDATE |RDW_UPDATENOW |RDW_ALLCHILDREN);\n\nYour window should receive a WM_ERASEBKGND and WM_PAINT notification.", "count": 14, "creator": "jeckhardt@aisquared.com"}, {"time": "2011-11-15T19:21:19Z", "raw_text": "We need Firefox to rerender the window, so we can update the text information in our database to provide magnified smooth text.\n\nIf this approach does not work, is there another way to ask Firefox to rerender its window?", "bug_id": 701367, "id": 5850033, "text": "We need Firefox to rerender the window, so we can update the text information in our database to provide magnified smooth text.\n\nIf this approach does not work, is there another way to ask Firefox to rerender its window?", "count": 15, "author": "jeckhardt@aisquared.com", "tags": [], "attachment_id": null, "is_private": false, "creation_time": "2011-11-15T19:21:19Z", "creator": "jeckhardt@aisquared.com"}, {"is_private": false, "creation_time": "2011-11-15T19:32:23Z", "id": 5850063, "bug_id": 701367, "author": "jmathies@mozilla.com", "count": 16, "text": "When I had magnification set to 1.0, I didn't see the problem after hitting the hot key. Does ZT still invalidate the window in that case?", "creator": "jmathies@mozilla.com", "tags": [], "attachment_id": null, "raw_text": "When I had magnification set to 1.0, I didn't see the problem after hitting the hot key. Does ZT still invalidate the window in that case?", "time": "2011-11-15T19:32:23Z"}, {"author": "jmathies@mozilla.com", "text": "(In reply to Jost Eckhardt, Ai Squared from comment #14)\n> Our application renders the entire screen, but based on the original\n> rendering that the applications do. \n> \n> We use the following command to force all currently open windows to redraw\n> themselves:\n> \n> RedrawWindow(NULL, NULL, NULL, RDW_ERASE |RDW_FRAME |RDW_INTERNALPAINT\n> |RDW_INVALIDATE |RDW_UPDATENOW |RDW_ALLCHILDREN);\n> \n> Your window should receive a WM_ERASEBKGND and WM_PAINT notification.\n\nI should be able to test this using a simple stand-alone test app, which I will try. But I'm guessing our text display will not change.\n\nWhich yields the question, what's going on when: magnification is > 1.0 in ZoomText, FX redraws and ZT ends up with something different on it's screen? There must be something going on in the middle there that causes the text to become corrupt. But I'm not sure how to track it down because I don't understand the overall process taking place between FX rendering -> ZT displaying.", "count": 17, "creator": "jmathies@mozilla.com", "creation_time": "2011-11-15T19:36:18Z", "is_private": false, "id": 5850071, "bug_id": 701367, "attachment_id": null, "raw_text": "(In reply to Jost Eckhardt, Ai Squared from comment #14)\n> Our application renders the entire screen, but based on the original\n> rendering that the applications do. \n> \n> We use the following command to force all currently open windows to redraw\n> themselves:\n> \n> RedrawWindow(NULL, NULL, NULL, RDW_ERASE |RDW_FRAME |RDW_INTERNALPAINT\n> |RDW_INVALIDATE |RDW_UPDATENOW |RDW_ALLCHILDREN);\n> \n> Your window should receive a WM_ERASEBKGND and WM_PAINT notification.\n\nI should be able to test this using a simple stand-alone test app, which I will try. But I'm guessing our text display will not change.\n\nWhich yields the question, what's going on when: magnification is > 1.0 in ZoomText, FX redraws and ZT ends up with something different on it's screen? There must be something going on in the middle there that causes the text to become corrupt. But I'm not sure how to track it down because I don't understand the overall process taking place between FX rendering -> ZT displaying.", "time": "2011-11-15T19:36:18Z", "tags": []}, {"creator": "jeckhardt@aisquared.com", "creation_time": "2011-11-15T19:51:17Z", "is_private": false, "attachment_id": null, "tags": [], "text": "So you see FX redrawing the window in response to Ctrl+Alt+Shift+U?\n\nZT should not render the text at 1x.", "count": 18, "author": "jeckhardt@aisquared.com", "id": 5850119, "bug_id": 701367, "time": "2011-11-15T19:51:17Z", "raw_text": "So you see FX redrawing the window in response to Ctrl+Alt+Shift+U?\n\nZT should not render the text at 1x."}, {"bug_id": 701367, "id": 5850494, "creation_time": "2011-11-15T21:41:43Z", "is_private": false, "creator": "jmathies@mozilla.com", "text": "(In reply to Jost Eckhardt, Ai Squared from comment #18)\n> So you see FX redrawing the window in response to Ctrl+Alt+Shift+U?\n> \n> ZT should not render the text at 1x.\n\nDon't know yet, I was just asking. Working on getting a current build, debugger, and your software set up in an image.", "count": 19, "author": "jmathies@mozilla.com", "tags": [], "time": "2011-11-15T21:41:43Z", "raw_text": "(In reply to Jost Eckhardt, Ai Squared from comment #18)\n> So you see FX redrawing the window in response to Ctrl+Alt+Shift+U?\n> \n> ZT should not render the text at 1x.\n\nDon't know yet, I was just asking. Working on getting a current build, debugger, and your software set up in an image.", "attachment_id": null}, {"is_private": false, "creation_time": "2011-12-01T17:52:20Z", "creator": "jmathies@mozilla.com", "tags": [], "attachment_id": null, "id": 5885529, "bug_id": 701367, "author": "jmathies@mozilla.com", "text": "So I've tested this now in a vmware image looking for some sort of issue in how we render our text which might cause problems for *whatever* it is ZT is doing. Honestly I can't find much. I also experimented with manually re-triggering rendering at 1x to be sure it wasn't a problem with our invalidate/redraw, and didn't see any problems. So I'm not sure where to go next on this. If we could get some added detail on exactly what happens when ZT \"renders our text\" that might help to track down the issue. As it stands now it seems to be some sort of an incompatibility between our newer versions and how ZT works, but I have very little go on beyond that.", "count": 20, "time": "2011-12-01T17:52:20Z", "raw_text": "So I've tested this now in a vmware image looking for some sort of issue in how we render our text which might cause problems for *whatever* it is ZT is doing. Honestly I can't find much. I also experimented with manually re-triggering rendering at 1x to be sure it wasn't a problem with our invalidate/redraw, and didn't see any problems. So I'm not sure where to go next on this. If we could get some added detail on exactly what happens when ZT \"renders our text\" that might help to track down the issue. As it stands now it seems to be some sort of an incompatibility between our newer versions and how ZT works, but I have very little go on beyond that."}, {"tags": [], "attachment_id": null, "creation_time": "2011-12-01T20:05:06Z", "is_private": false, "creator": "jeckhardt@aisquared.com", "raw_text": "Let me go back and try to figure out the exact details what we see on our machines here.", "time": "2011-12-01T20:05:06Z", "id": 5886109, "bug_id": 701367, "count": 21, "text": "Let me go back and try to figure out the exact details what we see on our machines here.", "author": "jeckhardt@aisquared.com"}]}}}