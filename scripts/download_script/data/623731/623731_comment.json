{"comments": {}, "bugs": {"623731": {"comments": [{"raw_text": "I have an onsubmit handler on a form to prevent multiple form submissions. After the first click, the handler returns false, preventing the form from being submitted. I noticed that while it prevents additional submits immediately after the user clicks the button, it does not prevent additional submits immediately before the new page is shown.\n\nI did some investigation and I found that the JS from the old page no longer works when the HTML of the new page had finished loading, but its stylesheets were still being loaded.\n\nI set up a test case for this at http://userstyles.org/first.html. The first button simply appends text to the page (to show that JS works). The \"Search Google\" button sends you to Google (to show that other UI works). The link is to a page that takes 5 seconds to load, and references a stylesheet that takes an additional 5 seconds to load.\n\nIf you click the link, then start regularly clicking the \"Add text\" button, you can see that the JS works for the first 5 seconds, stops working for 5 seconds, then the new page loads. The Google button will always work.\n\nI did some testing on various browsers, and this is what I found:\n\n\nFirefox 3.6, 4.0b8:\n\nPage begins loading.\n\t-Old page still displayed. JS, forms, and links work.\nPage loaded, stylesheet loading.\n\t-Old page still displayed. Forms and links work. JS does not.\nStylesheet loads.\n\t-New page displayed with stylesheet applied.\n\n\nChrome 9:\n\nPage begins loading.\n\t-Old page still displayed. JS, forms, and links work.\nPage loaded, stylesheet loading.\n\t-New page displayed (blank page).\nStylesheet loads.\n\t-New page displayed with stylesheet applied.\n\n\t\nIE 8, 9:\n\nPage begins loading.\n\t-Old page still displayed. JS, forms, and links work.\nPage loaded, stylesheet loading.\n\t-Old page still displayed. Clicking on items does nothing.\nStylesheet loads.\n\t-New page displayed with stylesheet applied.\n\t\n\nOpera 11:\n\nPage begins loading.\n\t-Old page still displayed. JS, forms, and links work.\nPage loaded, stylesheet loading.\n\t-New page displayed without stylesheet.\nStylesheet loads.\n\t-Stylesheet applied to new page.\n\n\nSo essentially Firefox is the only browser where the page can be in a state where its buttons and links work, but its JS does not.", "is_private": false, "bug_id": 623731, "text": "I have an onsubmit handler on a form to prevent multiple form submissions. After the first click, the handler returns false, preventing the form from being submitted. I noticed that while it prevents additional submits immediately after the user clicks the button, it does not prevent additional submits immediately before the new page is shown.\n\nI did some investigation and I found that the JS from the old page no longer works when the HTML of the new page had finished loading, but its stylesheets were still being loaded.\n\nI set up a test case for this at http://userstyles.org/first.html. The first button simply appends text to the page (to show that JS works). The \"Search Google\" button sends you to Google (to show that other UI works). The link is to a page that takes 5 seconds to load, and references a stylesheet that takes an additional 5 seconds to load.\n\nIf you click the link, then start regularly clicking the \"Add text\" button, you can see that the JS works for the first 5 seconds, stops working for 5 seconds, then the new page loads. The Google button will always work.\n\nI did some testing on various browsers, and this is what I found:\n\n\nFirefox 3.6, 4.0b8:\n\nPage begins loading.\n\t-Old page still displayed. JS, forms, and links work.\nPage loaded, stylesheet loading.\n\t-Old page still displayed. Forms and links work. JS does not.\nStylesheet loads.\n\t-New page displayed with stylesheet applied.\n\n\nChrome 9:\n\nPage begins loading.\n\t-Old page still displayed. JS, forms, and links work.\nPage loaded, stylesheet loading.\n\t-New page displayed (blank page).\nStylesheet loads.\n\t-New page displayed with stylesheet applied.\n\n\t\nIE 8, 9:\n\nPage begins loading.\n\t-Old page still displayed. JS, forms, and links work.\nPage loaded, stylesheet loading.\n\t-Old page still displayed. Clicking on items does nothing.\nStylesheet loads.\n\t-New page displayed with stylesheet applied.\n\t\n\nOpera 11:\n\nPage begins loading.\n\t-Old page still displayed. JS, forms, and links work.\nPage loaded, stylesheet loading.\n\t-New page displayed without stylesheet.\nStylesheet loads.\n\t-Stylesheet applied to new page.\n\n\nSo essentially Firefox is the only browser where the page can be in a state where its buttons and links work, but its JS does not.", "attachment_id": null, "id": 5181106, "creator": "jason.barnabe@gmail.com", "author": "jason.barnabe@gmail.com", "time": "2011-01-06T22:29:17Z", "count": 0, "creation_time": "2011-01-06T22:29:17Z", "tags": []}, {"creator": "jason.barnabe@gmail.com", "attachment_id": 501818, "id": 5181111, "text": "Created attachment 501818\nfirst.html", "raw_text": "", "is_private": false, "bug_id": 623731, "tags": [], "count": 1, "creation_time": "2011-01-06T22:30:29Z", "author": "jason.barnabe@gmail.com", "time": "2011-01-06T22:30:29Z"}, {"text": "Created attachment 501819\nslow.php", "is_private": false, "bug_id": 623731, "raw_text": "", "creator": "jason.barnabe@gmail.com", "id": 5181112, "attachment_id": 501819, "creation_time": "2011-01-06T22:30:47Z", "count": 2, "time": "2011-01-06T22:30:47Z", "author": "jason.barnabe@gmail.com", "tags": []}, {"tags": [], "count": 3, "creation_time": "2011-01-06T22:31:10Z", "author": "jason.barnabe@gmail.com", "time": "2011-01-06T22:31:10Z", "creator": "jason.barnabe@gmail.com", "attachment_id": 501821, "id": 5181114, "text": "Created attachment 501821\nslowstylesheet.php", "raw_text": "", "is_private": false, "bug_id": 623731}, {"id": 5181119, "attachment_id": null, "creator": "jason.barnabe@gmail.com", "bug_id": 623731, "is_private": false, "raw_text": "I attached the files used in the testcase. They only work from a server that supports PHP, so don't work from Bugzilla. See http://userstyles.org/first.html for a working example.", "text": "I attached the files used in the testcase. They only work from a server that supports PHP, so don't work from Bugzilla. See http://userstyles.org/first.html for a working example.", "tags": [], "time": "2011-01-06T22:32:05Z", "author": "jason.barnabe@gmail.com", "creation_time": "2011-01-06T22:32:05Z", "count": 4}, {"author": "bzbarsky@mit.edu", "time": "2011-01-07T07:55:09Z", "count": 5, "creation_time": "2011-01-07T07:55:09Z", "tags": [], "raw_text": "Yeah, we should probably implement what IE does here.", "bug_id": 623731, "is_private": false, "text": "Yeah, we should probably implement what IE does here.", "attachment_id": null, "id": 5182064, "creator": "bzbarsky@mit.edu"}, {"id": 5182386, "attachment_id": null, "creator": "bugs@pettay.fi", "is_private": false, "bug_id": 623731, "raw_text": "Yeah, I agree. We should probably just disable default handling (PostHandleEvent calls) if\ncurrent target isn't in the current inner window.\nBut how to do that so that it doesn't affect badly to event dispatch performance...", "text": "Yeah, I agree. We should probably just disable default handling (PostHandleEvent calls) if\ncurrent target isn't in the current inner window.\nBut how to do that so that it doesn't affect badly to event dispatch performance...", "tags": [], "time": "2011-01-07T12:58:29Z", "author": "bugs@pettay.fi", "creation_time": "2011-01-07T12:58:29Z", "count": 6}, {"tags": [], "count": 7, "creation_time": "2011-01-07T16:23:21Z", "author": "bzbarsky@mit.edu", "time": "2011-01-07T16:23:21Z", "creator": "bzbarsky@mit.edu", "attachment_id": null, "id": 5182701, "text": "That seems like it would be a pretty quick check, no?  Or at least could be made so (hang it off the document or whatnot, say).", "raw_text": "That seems like it would be a pretty quick check, no?  Or at least could be made so (hang it off the document or whatnot, say).", "bug_id": 623731, "is_private": false}]}}}