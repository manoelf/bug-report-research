{"comments": {}, "bugs": {"655484": {"comments": [{"text": "User-Agent:       Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\nBuild Identifier: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\n\nWhen I shutdown windows (or logout) and Firefox is running windows can't shutdown. It says it is waiting for firefox to finish and that process is blocking the shutdown. Firefox will never quit so the shutdown hangs forever. Only by forcing windows to kill firefox a shutdown is possible.\n\nWhen I cancel the shutdown I still can see the firefox window, but it has become completly unresponsive and can't be closed. I would have to use taskmanager/process explorer to kill firefox.\n\n\nReproducible: Always\n\nSteps to Reproduce:\nI'm using firefox sync, and I'm having a master password to locally encrypt stored password. When I start firefox after some seconds the master password popup appears, so I believe this is the moment when some background job starts the sync and need the master password to be able to sync passwords, too. I'm not perfectly sure but I believe the problem only occurs AFTER I have entered the master password, i.e. the sync job has started.\n\n1. Create a firefox sync account, tell firefox to sync everything.\n2. Create a master password for your saved personal data.\n3. Start firefox\n4. Wait a while for the master password popup to appear (or visit a site that need a saved password for a form)\n5. Enter the master password.\n6. Log out or shut down windows\n\n\nActual Results:  \nShutdown hangs forever. If the shutdown is cancelled the remaining firefox window is unresponsive. Firefox can only be killed with the task manager.\n\nExpected Results:  \nFirefox should quit, windows shutdown should not be blocked.", "id": 5455251, "attachment_id": null, "creation_time": "2011-05-07T14:34:02Z", "tags": [], "is_private": false, "raw_text": "User-Agent:       Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\nBuild Identifier: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\n\nWhen I shutdown windows (or logout) and Firefox is running windows can't shutdown. It says it is waiting for firefox to finish and that process is blocking the shutdown. Firefox will never quit so the shutdown hangs forever. Only by forcing windows to kill firefox a shutdown is possible.\n\nWhen I cancel the shutdown I still can see the firefox window, but it has become completly unresponsive and can't be closed. I would have to use taskmanager/process explorer to kill firefox.\n\n\nReproducible: Always\n\nSteps to Reproduce:\nI'm using firefox sync, and I'm having a master password to locally encrypt stored password. When I start firefox after some seconds the master password popup appears, so I believe this is the moment when some background job starts the sync and need the master password to be able to sync passwords, too. I'm not perfectly sure but I believe the problem only occurs AFTER I have entered the master password, i.e. the sync job has started.\n\n1. Create a firefox sync account, tell firefox to sync everything.\n2. Create a master password for your saved personal data.\n3. Start firefox\n4. Wait a while for the master password popup to appear (or visit a site that need a saved password for a form)\n5. Enter the master password.\n6. Log out or shut down windows\n\n\nActual Results:  \nShutdown hangs forever. If the shutdown is cancelled the remaining firefox window is unresponsive. Firefox can only be killed with the task manager.\n\nExpected Results:  \nFirefox should quit, windows shutdown should not be blocked.", "creator": "u290877@disabled.tld", "author": "u290877@disabled.tld", "time": "2011-05-07T14:34:02Z", "bug_id": 655484, "count": 0}, {"count": 1, "bug_id": 655484, "raw_text": "This is what sysinternal's process explorer shows as a stack trace AFTER a shutdown attempt and when firefox is not responding any more. It's the only thread that is still running from the firefox process. Maybe this is helpful in some way.", "tags": [], "is_private": false, "time": "2011-05-07T14:37:15Z", "creation_time": "2011-05-07T14:37:15Z", "author": "u290877@disabled.tld", "text": "Created attachment 530836\nStack trace\n\nThis is what sysinternal's process explorer shows as a stack trace AFTER a shutdown attempt and when firefox is not responding any more. It's the only thread that is still running from the firefox process. Maybe this is helpful in some way.", "creator": "u290877@disabled.tld", "id": 5455253, "attachment_id": 530836}, {"creation_time": "2011-10-06T14:42:26Z", "text": "This could also be fixed by implementing 489915 \"Password required popup window should appear in taskbar always\". Now the dialogue would be non-modal so should not interfere with shutdown.", "id": 5763317, "attachment_id": null, "raw_text": "This could also be fixed by implementing 489915 \"Password required popup window should appear in taskbar always\". Now the dialogue would be non-modal so should not interfere with shutdown.", "tags": [], "is_private": false, "author": "harry@harrygreen.org.uk", "creator": "harry@harrygreen.org.uk", "count": 2, "bug_id": 655484, "time": "2011-10-06T14:42:26Z"}]}}}