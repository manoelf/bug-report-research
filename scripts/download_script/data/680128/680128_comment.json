{"comments": {}, "bugs": {"680128": {"comments": [{"count": 0, "bug_id": 680128, "creator": "mh+mozilla@glandium.org", "is_private": false, "author": "mh+mozilla@glandium.org", "creation_time": "2011-08-18T16:50:08Z", "tags": [], "time": "2011-08-18T16:50:08Z", "text": "The update url is currently:\nhttps://aus3.mozilla.org/update/3/%PRODUCT%/%VERSION%/%BUILD_ID%/%BUILD_TARGET%/%LOCALE%/%CHANNEL%/%OS_VERSION%/%DISTRIBUTION%/%DISTRIBUTION_VERSION%/update.xml\n\nThe URL formatter replaces DISTRIBUTION and DISTRIBUTION_VERSION with the content of the distribution.id and distribution.version preferences, which in turn, if I'm reading the whole thing correctly, are initialized from a distribution/distribution.ini file in the Firefox directory.\n\nThis means that in practice, as Mozilla builds are not going shipping this file, we don't get any meaningful information about the distribution being used. It also means that currently, the ones in position of filling this information are the very ones that won't use the update service (distribution packages are updated with the distro packaging system).\n\nWhile I can imagine the purpose of these fields to be about other redistributors, it may also make sense to make that information meaningful for Mozilla builds by actually getting the distribution name and version from the OS.\n\nMost Linux distributions should have a lsb_release script that can return this information (though, for example, the one in Debian and Ubuntu is a python script, so it has some execution overhead, which should be kept in mind if the value would be gotten during startup).\n\nFiling in Firefox:General because I'm unsure at what level this should be done (xpcom/SystemInfo.cpp, browser/components/distribution.js), etc.", "attachment_id": null, "raw_text": "The update url is currently:\nhttps://aus3.mozilla.org/update/3/%PRODUCT%/%VERSION%/%BUILD_ID%/%BUILD_TARGET%/%LOCALE%/%CHANNEL%/%OS_VERSION%/%DISTRIBUTION%/%DISTRIBUTION_VERSION%/update.xml\n\nThe URL formatter replaces DISTRIBUTION and DISTRIBUTION_VERSION with the content of the distribution.id and distribution.version preferences, which in turn, if I'm reading the whole thing correctly, are initialized from a distribution/distribution.ini file in the Firefox directory.\n\nThis means that in practice, as Mozilla builds are not going shipping this file, we don't get any meaningful information about the distribution being used. It also means that currently, the ones in position of filling this information are the very ones that won't use the update service (distribution packages are updated with the distro packaging system).\n\nWhile I can imagine the purpose of these fields to be about other redistributors, it may also make sense to make that information meaningful for Mozilla builds by actually getting the distribution name and version from the OS.\n\nMost Linux distributions should have a lsb_release script that can return this information (though, for example, the one in Debian and Ubuntu is a python script, so it has some execution overhead, which should be kept in mind if the value would be gotten during startup).\n\nFiling in Firefox:General because I'm unsure at what level this should be done (xpcom/SystemInfo.cpp, browser/components/distribution.js), etc.", "id": 5662769}]}}}