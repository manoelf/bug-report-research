{"comments": {}, "bugs": {"697799": {"comments": [{"is_private": false, "count": 0, "id": 5809755, "author": "Manuel.Spam@nurfuerspam.de", "creator": "Manuel.Spam@nurfuerspam.de", "creation_time": "2011-10-27T19:59:03Z", "time": "2011-10-27T19:59:03Z", "raw_text": "To allow importing a sidebar into opera, a webmaster can use a link like this:\n\n<a href=\"http://domain.tld/sidebar.html\" rel=\"sidebar\" title=\"sidebar-title\">...\n\nIf we support this in SeaMonkey, nearly all panels, made for opera, should work with SeaMonkey, too. Probably this could even be a replacement for the existing API which gets less relevant as Firefox dropped it.", "attachment_id": 570060, "tags": [], "text": "Created attachment 570060\nFirst patch\n\nTo allow importing a sidebar into opera, a webmaster can use a link like this:\n\n<a href=\"http://domain.tld/sidebar.html\" rel=\"sidebar\" title=\"sidebar-title\">...\n\nIf we support this in SeaMonkey, nearly all panels, made for opera, should work with SeaMonkey, too. Probably this could even be a replacement for the existing API which gets less relevant as Firefox dropped it.", "bug_id": 697799}, {"text": "Do you have a page with an Opera sidebar we can test this with?", "bug_id": 697799, "tags": [], "raw_text": "Do you have a page with an Opera sidebar we can test this with?", "attachment_id": null, "author": "philip.chee@gmail.com", "creator": "philip.chee@gmail.com", "time": "2011-11-03T19:53:33Z", "creation_time": "2011-11-03T19:53:33Z", "is_private": false, "id": 5824492, "count": 1}, {"id": 5827265, "count": 2, "is_private": false, "time": "2011-11-04T20:06:59Z", "creation_time": "2011-11-04T20:06:59Z", "creator": "mnyromyr@tprac.de", "author": "mnyromyr@tprac.de", "attachment_id": null, "raw_text": "(In reply to Philip Chee from comment #1)\n> Do you have a page with an Opera sidebar we can test this with?\n\nOpera sidebar directory:\nhttp://my.opera.com/community/customize/panel/directory/", "tags": [], "bug_id": 697799, "text": "(In reply to Philip Chee from comment #1)\n> Do you have a page with an Opera sidebar we can test this with?\n\nOpera sidebar directory:\nhttp://my.opera.com/community/customize/panel/directory/"}, {"raw_text": ">+function SidebarAddPanel(aTitle, aContentURL)\n\nIt'd probably better to call it \"SidebarAddLinkRelPanel\" or \"SidebarAddWebPanel\".\n\n>+{\n>+  // Check if URL is allowed in sidebar\n>+  if (!/(^https?:|^ftp:)/i.test(aContentURL))\n>+    throw \"Script attempted to add sidebar panel from illegal source\";\n\nWhy are random *URLs* more secure than others? Why should it be more secure to not allow file: URLs?\n(Apart from Windows bugs.)\nIt'd make more sense to run it past a scam test, etc. \nAfter all, we don't allow installation without confirmation anyway.", "attachment_id": 570060, "tags": [], "text": "Comment on attachment 570060\nFirst patch\n\n>+function SidebarAddPanel(aTitle, aContentURL)\n\nIt'd probably better to call it \"SidebarAddLinkRelPanel\" or \"SidebarAddWebPanel\".\n\n>+{\n>+  // Check if URL is allowed in sidebar\n>+  if (!/(^https?:|^ftp:)/i.test(aContentURL))\n>+    throw \"Script attempted to add sidebar panel from illegal source\";\n\nWhy are random *URLs* more secure than others? Why should it be more secure to not allow file: URLs?\n(Apart from Windows bugs.)\nIt'd make more sense to run it past a scam test, etc. \nAfter all, we don't allow installation without confirmation anyway.", "bug_id": 697799, "is_private": false, "id": 5828396, "count": 3, "author": "mnyromyr@tprac.de", "creator": "mnyromyr@tprac.de", "time": "2011-11-05T13:52:36Z", "creation_time": "2011-11-05T13:52:36Z"}, {"id": 5856628, "count": 4, "is_private": false, "creation_time": "2011-11-17T22:33:44Z", "time": "2011-11-17T22:33:44Z", "creator": "neil@httl.net", "author": "neil@httl.net", "attachment_id": 570060, "raw_text": "Sorry for the delay in the review, I've been busier than usual recently. The patch works well but I would appreciate a few tweaks as follows:\n\n>+        if (component == \"navigator:browser\" && event.button == 0 &&\nShould we check for modifiers as well?\n\n>+            ceParams.linkNode.getAttribute(\"rel\") == \"sidebar\" &&\n>+            ceParams.linkNode.getAttribute(\"title\")) {\nUse ceParams.linkNode.rel == \"sidebar\" && ceParams.linkNode.title\n(and title again on the next line)\n\n>+      stringBundle = Services.strings.createBundle(\"chrome://communicator/locale/sidebar/sidebar.properties\");\n>+      brandStringBundle = Services.strings.createBundle(\"chrome://branding/locale/brand.properties\");\nThese should use <stringbundle> elements in the XUL (navigator.js defines gBrandBundle for brand.properties but you would have to create your own for sidebar.properties) and you probably don't need the try/catch any more.\n\n>+        dialogMessage = dialogMessage.replace(/%url%/, aContentURL);\n>+        dialogMessage = dialogMessage.replace(/%name%/, sidebarName);\n[We should really use getFormattedString for this, but that's a separate bug.]\n\n>+    Services.prompt.alert(null, titleMessage, dialogMessage);\nUse window for all prompts, since we actually have one now.", "text": "Comment on attachment 570060\nFirst patch\n\nSorry for the delay in the review, I've been busier than usual recently. The patch works well but I would appreciate a few tweaks as follows:\n\n>+        if (component == \"navigator:browser\" && event.button == 0 &&\nShould we check for modifiers as well?\n\n>+            ceParams.linkNode.getAttribute(\"rel\") == \"sidebar\" &&\n>+            ceParams.linkNode.getAttribute(\"title\")) {\nUse ceParams.linkNode.rel == \"sidebar\" && ceParams.linkNode.title\n(and title again on the next line)\n\n>+      stringBundle = Services.strings.createBundle(\"chrome://communicator/locale/sidebar/sidebar.properties\");\n>+      brandStringBundle = Services.strings.createBundle(\"chrome://branding/locale/brand.properties\");\nThese should use <stringbundle> elements in the XUL (navigator.js defines gBrandBundle for brand.properties but you would have to create your own for sidebar.properties) and you probably don't need the try/catch any more.\n\n>+        dialogMessage = dialogMessage.replace(/%url%/, aContentURL);\n>+        dialogMessage = dialogMessage.replace(/%name%/, sidebarName);\n[We should really use getFormattedString for this, but that's a separate bug.]\n\n>+    Services.prompt.alert(null, titleMessage, dialogMessage);\nUse window for all prompts, since we actually have one now.", "bug_id": 697799, "tags": []}, {"bug_id": 697799, "text": "*** Bug 192030 has been marked as a duplicate of this bug. ***", "tags": [], "raw_text": "", "attachment_id": null, "author": "mnyromyr@tprac.de", "creator": "mnyromyr@tprac.de", "creation_time": "2011-11-25T19:56:54Z", "time": "2011-11-25T19:56:54Z", "is_private": false, "count": 5, "id": 5872701}]}}}