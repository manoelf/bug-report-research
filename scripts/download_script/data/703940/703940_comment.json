{"comments": {}, "bugs": {"703940": {"comments": [{"tags": [], "text": "Firefox\u00a07.0.1 on Mac\u00a0OS\u00a0X\u00a010.6.8.\n\nAt the top of the page http://toolserver.org/~geohack/geohack.php?pagename=%C3%8Eles_Kouriles&language=fr&params=47.148_N_152.427_E_type:isle_scale:300000\u00a0, the circumflex accent on \u00celes gets eaten. What I see instead looks more like a dieresis.\nSee screen photo of Firefox\u00a0:\nhttp://screencast.com/t/OpgPG6Da\n\nCamino looks like Firefox.\n\nSafari looks a little better. See screen photo of Safari\u00a0:\nhttp://screencast.com/t/yOpekzW7GcT\n\nOmniWeb and iCab look like Safari.\n\nSome of the problem may lie in the page. Some of the problem may lie in Firefox. Thank you for correcting Firefox' part.\n\nSee also request bug\u00a0696184, which appears to be closely related.\n\nNicolas", "bug_id": 703940, "raw_text": "Firefox\u00a07.0.1 on Mac\u00a0OS\u00a0X\u00a010.6.8.\n\nAt the top of the page http://toolserver.org/~geohack/geohack.php?pagename=%C3%8Eles_Kouriles&language=fr&params=47.148_N_152.427_E_type:isle_scale:300000\u00a0, the circumflex accent on \u00celes gets eaten. What I see instead looks more like a dieresis.\nSee screen photo of Firefox\u00a0:\nhttp://screencast.com/t/OpgPG6Da\n\nCamino looks like Firefox.\n\nSafari looks a little better. See screen photo of Safari\u00a0:\nhttp://screencast.com/t/yOpekzW7GcT\n\nOmniWeb and iCab look like Safari.\n\nSome of the problem may lie in the page. Some of the problem may lie in Firefox. Thank you for correcting Firefox' part.\n\nSee also request bug\u00a0696184, which appears to be closely related.\n\nNicolas", "attachment_id": null, "author": "nicolas.barbulesco@supinfo.com", "creation_time": "2011-11-20T02:27:32Z", "time": "2011-11-20T02:27:32Z", "creator": "nicolas.barbulesco@supinfo.com", "count": 0, "id": 5860939, "is_private": false}, {"author": "bzbarsky@mit.edu", "creator": "bzbarsky@mit.edu", "time": "2011-11-21T15:40:08Z", "creation_time": "2011-11-21T15:40:08Z", "is_private": false, "count": 1, "id": 5862443, "tags": [], "text": "I see the same thing (also on Mac 10.6.8), but only for whatever font \"sans-serif\", which is what the page uses, ends up getting mapped to over here.  In particular, for that particular font the font metrics do not include any space for the accent over the capital letter, so most of the accent overflows the block the text is in.  And the page styles the block as \"overflow: hidden\".\n\nIf I change the font to \"serif\", for example, the rendering is just fine....", "bug_id": 703940, "raw_text": "I see the same thing (also on Mac 10.6.8), but only for whatever font \"sans-serif\", which is what the page uses, ends up getting mapped to over here.  In particular, for that particular font the font metrics do not include any space for the accent over the capital letter, so most of the accent overflows the block the text is in.  And the page styles the block as \"overflow: hidden\".\n\nIf I change the font to \"serif\", for example, the rendering is just fine....", "attachment_id": null}, {"is_private": false, "id": 10864306, "count": 2, "author": "ryanvm@gmail.com", "creator": "ryanvm@gmail.com", "time": "2015-10-22T17:14:20Z", "creation_time": "2015-10-22T17:14:20Z", "raw_text": "The URL in comment 0 is 404 now. Is there another URL that reproduces the problem?", "attachment_id": null, "text": "The URL in comment 0 is 404 now. Is there another URL that reproduces the problem?", "bug_id": 703940, "tags": []}, {"author": "ryanvm@gmail.com", "time": "2015-11-17T21:43:37Z", "creation_time": "2015-11-17T21:43:37Z", "creator": "ryanvm@gmail.com", "id": 10941247, "count": 3, "is_private": false, "text": "Closing this as incomplete due to inactivity and the lack of a reproducible test case. Feel free to reopen the bug if there's an updated testcase that still reproduces the issue.", "bug_id": 703940, "tags": [], "raw_text": "Closing this as incomplete due to inactivity and the lack of a reproducible test case. Feel free to reopen the bug if there's an updated testcase that still reproduces the issue.", "attachment_id": null}, {"time": "2016-01-13T21:13:24Z", "creation_time": "2016-01-13T21:13:24Z", "creator": "nicolas.barbulesco@supinfo.com", "author": "nicolas.barbulesco@supinfo.com", "count": 4, "id": 11073989, "is_private": false, "bug_id": 703940, "text": "In Firefox 43.0.4 on Mac OS X 10.9.2, the bug occurs, with this address: \nhttp://tools.wmflabs.org/geohack/geohack.php?language=fr&pagename=%C3%8Eles_Kouriles&params=47.148_N_152.427_E_type:isle_scale:300000", "tags": [], "attachment_id": null, "raw_text": "In Firefox 43.0.4 on Mac OS X 10.9.2, the bug occurs, with this address: \nhttp://tools.wmflabs.org/geohack/geohack.php?language=fr&pagename=%C3%8Eles_Kouriles&params=47.148_N_152.427_E_type:isle_scale:300000"}, {"count": 5, "id": 11074103, "is_private": false, "author": "bzbarsky@mit.edu", "time": "2016-01-13T21:44:07Z", "creation_time": "2016-01-13T21:44:07Z", "creator": "bzbarsky@mit.edu", "raw_text": "See comment 1 for what's going on here...", "attachment_id": null, "tags": [], "text": "See comment 1 for what's going on here...", "bug_id": 703940}, {"time": "2016-01-14T04:02:04Z", "creation_time": "2016-01-14T04:02:04Z", "creator": "ryanvm@gmail.com", "author": "ryanvm@gmail.com", "id": 11075049, "count": 6, "is_private": false, "bug_id": 703940, "text": "(In reply to Nicolas Barbulesco from comment #4)\n> In Firefox 43.0.4 on Mac OS X 10.9.2, the bug occurs, with this address: \n> http://tools.wmflabs.org/geohack/geohack.\n> php?language=fr&pagename=%C3%8Eles_Kouriles&params=47.148_N_152.427_E_type:\n> isle_scale:300000\n\nBeautiful, I can reproduce this as well on OSX 10.11. Windows and Linux both handle it fine. Looks like it actually got worse when bug 674373 landed. Jonathan, is there something we can do better here?", "tags": [], "attachment_id": null, "raw_text": "(In reply to Nicolas Barbulesco from comment #4)\n> In Firefox 43.0.4 on Mac OS X 10.9.2, the bug occurs, with this address: \n> http://tools.wmflabs.org/geohack/geohack.\n> php?language=fr&pagename=%C3%8Eles_Kouriles&params=47.148_N_152.427_E_type:\n> isle_scale:300000\n\nBeautiful, I can reproduce this as well on OSX 10.11. Windows and Linux both handle it fine. Looks like it actually got worse when bug 674373 landed. Jonathan, is there something we can do better here?"}, {"id": 11075824, "count": 7, "is_private": false, "author": "jfkthame@gmail.com", "creation_time": "2016-01-14T13:09:40Z", "time": "2016-01-14T13:09:40Z", "creator": "jfkthame@gmail.com", "raw_text": "We run into this because the Helvetica shipped with OS X has font ascent/descent metrics that don't include space for accents; see attached screenshot, where it's clear that the circumflex lies (almost entirely) outside the font's nominal metrics. Our \"normal\" line-height computation ends up using this ascent, and if the text is at the very top of the window (as in the example from comment 4, where it's in an element with position:absolute and top:0px), the accent is not visible.\n\nNote that if you change the default sans-serif font to Arial or to Helvetica Neue, for example, the problem doesn't arise. Or if you set an explicit line-height such as \"line-height:1.4\" on the element.\n\nSimple illustration of the issue: try\n\n  data:text/html;charset=utf-8,<div style=\"font:50px helvetica;background:yellow;\">\u00d4\n\non OS X, and note how the circumflex is outside the div's yellow background. It's only visible because of the default margins on the (implicit) <body>.\n\nNow remove those margins:\n\n  data:text/html;charset=utf-8,<body style=\"margin:0\">\n                               <div style=\"font:50px helvetica;background:yellow;\">\u00d4\n\nand the circumflex is no longer visible at all.\n\nTo fix this, we'd need to revise how we're computing default line-height metrics. Which would probably be a good thing -- we currently have some inconsistencies between platforms, and other oddities -- but is tricky as the potential effects of any change are so widespread, throughout the browser UI as well as content.", "attachment_id": 8707845, "bug_id": 703940, "text": "Created attachment 8707845\nscreenshot showing accent placement in relation to font ascent in Helvetica\n\nWe run into this because the Helvetica shipped with OS X has font ascent/descent metrics that don't include space for accents; see attached screenshot, where it's clear that the circumflex lies (almost entirely) outside the font's nominal metrics. Our \"normal\" line-height computation ends up using this ascent, and if the text is at the very top of the window (as in the example from comment 4, where it's in an element with position:absolute and top:0px), the accent is not visible.\n\nNote that if you change the default sans-serif font to Arial or to Helvetica Neue, for example, the problem doesn't arise. Or if you set an explicit line-height such as \"line-height:1.4\" on the element.\n\nSimple illustration of the issue: try\n\n  data:text/html;charset=utf-8,<div style=\"font:50px helvetica;background:yellow;\">\u00d4\n\non OS X, and note how the circumflex is outside the div's yellow background. It's only visible because of the default margins on the (implicit) <body>.\n\nNow remove those margins:\n\n  data:text/html;charset=utf-8,<body style=\"margin:0\">\n                               <div style=\"font:50px helvetica;background:yellow;\">\u00d4\n\nand the circumflex is no longer visible at all.\n\nTo fix this, we'd need to revise how we're computing default line-height metrics. Which would probably be a good thing -- we currently have some inconsistencies between platforms, and other oddities -- but is tricky as the potential effects of any change are so widespread, throughout the browser UI as well as content.", "tags": []}, {"raw_text": "Thank you Jonathan.\n\nSee also the request\u00a0bug\u00a0695864 that may be linked.", "attachment_id": null, "text": "Thank you Jonathan.\n\nSee also the request\u00a0bug\u00a0695864 that may be linked.", "bug_id": 703940, "tags": [], "count": 8, "id": 11855309, "is_private": false, "author": "nicolas.barbulesco@supinfo.com", "creation_time": "2016-11-12T15:09:05Z", "time": "2016-11-12T15:09:05Z", "creator": "nicolas.barbulesco@supinfo.com"}, {"text": "*** Bug 695864 has been marked as a duplicate of this bug. ***", "bug_id": 703940, "tags": [], "raw_text": "", "attachment_id": null, "author": "vseerror@lehigh.edu", "creator": "vseerror@lehigh.edu", "creation_time": "2016-12-22T14:55:35Z", "time": "2016-12-22T14:55:35Z", "is_private": false, "id": 11937750, "count": 9}]}}}