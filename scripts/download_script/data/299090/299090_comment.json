{"comments": {}, "bugs": {"299090": {"comments": [{"attachment_id": null, "creator": "greenreaper@hotmail.com", "time": "2005-06-29T04:06:29Z", "raw_text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8b2) Gecko/20050427 Firefox/1.0+\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8b2) Gecko/20050427 Firefox/1.0+\n\nIt is possible to fool firefox into adding a search engine that does not exist\nif you specify a valid icon for that search engine in the call to\naddSearchEngine(). Selecting this search engine will then crash Firefox.\n\nConfusingly, it will not do this the next time you try it, because it will not\nadd the search engine if an icon file with the specified name already exists,\nand it already downloaded it into the searchplugins folder.\n\nCrucially it does not seem to check for the existence of the src file for the\nplugin before adding it to the list.\n\nReproducible: Always\n\nSteps to Reproduce:\nMake a call to window.sidebar.addSearchEngine() within the following restrictions:\n1. The search plugin icon must be a valid file\n2. The search plugin icon file must not already be downloaded (either because\nit's used by an existing plugin, or because you've tried this before)\n3. The search plugin source file must *not* be a valid file (or not accessible)\n\nThen,\n4. Select the search entry (which will have an icon but no text) in the search\nengine dropdown.\nActual Results:  \nFirefox downloaded the icon but not the source file (which didn't exist) without\ncomplaint. It added an item to the end of the list of search engines with the\nicon specified, but no text. When this item was selected, Firefox crashed.\n\nExpected Results:  \nIf the file was not found, the icon and entry in the list should not have been\nadded (this is what Mozilla does). Some sort of error message would have been\nnice, too. :-)\n\nAttaching testcase (as linked) and stack trace.", "id": 2538338, "bug_id": 299090, "count": 0, "text": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8b2) Gecko/20050427 Firefox/1.0+\nBuild Identifier: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8b2) Gecko/20050427 Firefox/1.0+\n\nIt is possible to fool firefox into adding a search engine that does not exist\nif you specify a valid icon for that search engine in the call to\naddSearchEngine(). Selecting this search engine will then crash Firefox.\n\nConfusingly, it will not do this the next time you try it, because it will not\nadd the search engine if an icon file with the specified name already exists,\nand it already downloaded it into the searchplugins folder.\n\nCrucially it does not seem to check for the existence of the src file for the\nplugin before adding it to the list.\n\nReproducible: Always\n\nSteps to Reproduce:\nMake a call to window.sidebar.addSearchEngine() within the following restrictions:\n1. The search plugin icon must be a valid file\n2. The search plugin icon file must not already be downloaded (either because\nit's used by an existing plugin, or because you've tried this before)\n3. The search plugin source file must *not* be a valid file (or not accessible)\n\nThen,\n4. Select the search entry (which will have an icon but no text) in the search\nengine dropdown.\nActual Results:  \nFirefox downloaded the icon but not the source file (which didn't exist) without\ncomplaint. It added an item to the end of the list of search engines with the\nicon specified, but no text. When this item was selected, Firefox crashed.\n\nExpected Results:  \nIf the file was not found, the icon and entry in the list should not have been\nadded (this is what Mozilla does). Some sort of error message would have been\nnice, too. :-)\n\nAttaching testcase (as linked) and stack trace.", "author": "greenreaper@hotmail.com", "tags": [], "creation_time": "2005-06-29T04:06:29Z", "is_private": false}, {"creation_time": "2005-06-29T04:08:00Z", "tags": [], "author": "greenreaper@hotmail.com", "is_private": false, "attachment_id": 187597, "creator": "greenreaper@hotmail.com", "bug_id": 299090, "count": 1, "text": "Created attachment 187597\nTestcase showing the problem", "time": "2005-06-29T04:08:00Z", "raw_text": "", "id": 2538339}, {"text": "Created attachment 187598\nStack trace of crash on click", "count": 2, "bug_id": 299090, "id": 2538340, "is_private": false, "time": "2005-06-29T04:09:28Z", "raw_text": "", "creation_time": "2005-06-29T04:09:28Z", "tags": [], "creator": "greenreaper@hotmail.com", "attachment_id": 187598, "author": "greenreaper@hotmail.com"}, {"author": "timeless@bemail.org", "tags": [], "creation_time": "2005-06-29T05:51:39Z", "attachment_id": 187598, "creator": "timeless@bemail.org", "time": "2005-06-29T05:51:39Z", "raw_text": "this doesn't look right, what kind of build did you use and what debugger?", "id": 2538373, "is_private": false, "bug_id": 299090, "text": "Comment on attachment 187598\nStack trace of crash on click\n\nthis doesn't look right, what kind of build did you use and what debugger?", "count": 3}, {"text": "(In reply to comment #3)\n> (From update of attachment 187598 [edit])\n> this doesn't look right, what kind of build did you use and what debugger?\n> \n\nMicrosoft Visual Studio 2003. I don't have symbols or source for Firefox, it's\njust the call stack for the thread that was shown as highlighted. This is from\ndebugging when it throws up the error.\n\nI was using it with Bluefyre builds, I guess that messed up the stack trace.\nLet's try an hourly build from a few hours ago . . .", "count": 4, "bug_id": 299090, "id": 2538385, "raw_text": "(In reply to comment #3)\n> (From update of attachment 187598 [edit])\n> this doesn't look right, what kind of build did you use and what debugger?\n> \n\nMicrosoft Visual Studio 2003. I don't have symbols or source for Firefox, it's\njust the call stack for the thread that was shown as highlighted. This is from\ndebugging when it throws up the error.\n\nI was using it with Bluefyre builds, I guess that messed up the stack trace.\nLet's try an hourly build from a few hours ago . . .", "time": "2005-06-29T06:19:43Z", "creator": "greenreaper@hotmail.com", "attachment_id": null, "is_private": false, "creation_time": "2005-06-29T06:19:43Z", "tags": [], "author": "greenreaper@hotmail.com"}, {"is_private": false, "author": "greenreaper@hotmail.com", "creation_time": "2005-06-29T06:20:21Z", "tags": [], "time": "2005-06-29T06:20:21Z", "raw_text": "", "id": 2538387, "bug_id": 299090, "text": "Created attachment 187607\nStack trace, version 2", "count": 5, "attachment_id": 187607, "creator": "greenreaper@hotmail.com"}, {"creator": "greenreaper@hotmail.com", "attachment_id": null, "time": "2005-06-29T06:25:11Z", "raw_text": "I'm guessing that's not going to be much use either - either way, they're\noptimized bulids. It should be easy to duplicate this crash with the testcase,\nthough.", "id": 2538394, "bug_id": 299090, "count": 6, "text": "I'm guessing that's not going to be much use either - either way, they're\noptimized bulids. It should be easy to duplicate this crash with the testcase,\nthough.", "author": "greenreaper@hotmail.com", "tags": [], "creation_time": "2005-06-29T06:25:11Z", "is_private": false}, {"creator": "timeless@bemail.org", "attachment_id": 187607, "raw_text": "why not install talkback and let it report the crash? without symbols, all you\nhave are exports and offsets from them, which are rarely helpful.", "time": "2005-06-29T07:00:03Z", "id": 2538409, "bug_id": 299090, "text": "Comment on attachment 187607\nStack trace, version 2\n\nwhy not install talkback and let it report the crash? without symbols, all you\nhave are exports and offsets from them, which are rarely helpful.", "count": 7, "author": "timeless@bemail.org", "creation_time": "2005-06-29T07:00:03Z", "tags": [], "is_private": false}, {"count": 8, "text": "(In reply to comment #7)\n> (From update of attachment 187607 [edit])\n> why not install talkback and let it report the crash? without symbols, all you\n> have are exports and offsets from them, which are rarely helpful.\n> \n\nWell, the main reason would be that whenever I try to install a build having\nselected the TalkBack feature, it falls over while it's doing that part of the\ninstall:\n\n---------------------------\nError\n---------------------------\nError occurred during installation - Quality Feedback Agent: -214 DOES_NOT_EXIST\n---------------------------\nOK   \n---------------------------\n\nfrom install_wizard.log\n\nQuality Feedback Utility (version 1.0.5)\n------------------------\n\n** initInstall: 0\n** communicatorFolder: C:\\Program Files\\Communications\\Mozilla Firefox\\\n** File to delete: C:\\Program Files\\Communications\\Mozilla\nFirefox\\components\\l10n.ini\\\n** addDirectory() returned: -214\n\nInstall **FAILED** with error -214  --  2005-06-29 08:17:44", "bug_id": 299090, "id": 2538426, "time": "2005-06-29T07:28:06Z", "raw_text": "(In reply to comment #7)\n> (From update of attachment 187607 [edit])\n> why not install talkback and let it report the crash? without symbols, all you\n> have are exports and offsets from them, which are rarely helpful.\n> \n\nWell, the main reason would be that whenever I try to install a build having\nselected the TalkBack feature, it falls over while it's doing that part of the\ninstall:\n\n---------------------------\nError\n---------------------------\nError occurred during installation - Quality Feedback Agent: -214 DOES_NOT_EXIST\n---------------------------\nOK   \n---------------------------\n\nfrom install_wizard.log\n\nQuality Feedback Utility (version 1.0.5)\n------------------------\n\n** initInstall: 0\n** communicatorFolder: C:\\Program Files\\Communications\\Mozilla Firefox\\\n** File to delete: C:\\Program Files\\Communications\\Mozilla\nFirefox\\components\\l10n.ini\\\n** addDirectory() returned: -214\n\nInstall **FAILED** with error -214  --  2005-06-29 08:17:44", "attachment_id": null, "creator": "greenreaper@hotmail.com", "is_private": false, "tags": [], "creation_time": "2005-06-29T07:28:06Z", "author": "greenreaper@hotmail.com"}, {"author": "jaime.bugzilla@gmail.com", "creation_time": "2005-06-29T13:06:33Z", "tags": [], "is_private": false, "creator": "jaime.bugzilla@gmail.com", "attachment_id": null, "id": 2538577, "raw_text": "> > why not install talkback and let it report the crash? without symbols, all you\n\n> Well, the main reason would be that whenever I try to install a build having\n> selected the TalkBack feature, it falls over while it's doing that part of the\n> install:\n\nThe build ID you are using is very old. Try with this build\nhttp://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/latest-trunk/firefox-1.0+.en-US.win32.installer.exe\nand selecting Mozilla Quality Feedback Agent during a custom install.", "time": "2005-06-29T13:06:33Z", "count": 9, "text": "> > why not install talkback and let it report the crash? without symbols, all you\n\n> Well, the main reason would be that whenever I try to install a build having\n> selected the TalkBack feature, it falls over while it's doing that part of the\n> install:\n\nThe build ID you are using is very old. Try with this build\nhttp://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/latest-trunk/firefox-1.0+.en-US.win32.installer.exe\nand selecting Mozilla Quality Feedback Agent during a custom install.", "bug_id": 299090}, {"is_private": false, "tags": [], "creation_time": "2005-06-29T15:24:37Z", "author": "ajschult784@gmail.com", "count": 10, "text": "Created attachment 187668\nstacktrace\n\nnsPrefLocalizedString::SetData is getting a NULL pointer", "bug_id": 299090, "id": 2538687, "time": "2005-06-29T15:24:37Z", "raw_text": "nsPrefLocalizedString::SetData is getting a NULL pointer", "attachment_id": 187668, "creator": "ajschult784@gmail.com"}, {"is_private": false, "author": "ajschult784@gmail.com", "tags": [], "creation_time": "2005-06-29T15:27:18Z", "raw_text": "confirmed with current firefox CVS", "time": "2005-06-29T15:27:18Z", "id": 2538694, "bug_id": 299090, "count": 11, "text": "confirmed with current firefox CVS", "creator": "ajschult784@gmail.com", "attachment_id": null}, {"count": 12, "text": "ok, the crash will be handled elsewhere.\n\ni'm betting the js cause is\nhttp://bonsai.mozilla.org/cvsblame.cgi?file=mozilla/browser/base/content/search.xml&rev=1.23&mark=182#168\n\nbut i'm waiting for confirmation from someone. once the crash is fixed, someone\nneeds to figure out if the js in firefox is behaving reasonably, and if not, fix it.", "bug_id": 299090, "id": 2538735, "raw_text": "ok, the crash will be handled elsewhere.\n\ni'm betting the js cause is\nhttp://bonsai.mozilla.org/cvsblame.cgi?file=mozilla/browser/base/content/search.xml&rev=1.23&mark=182#168\n\nbut i'm waiting for confirmation from someone. once the crash is fixed, someone\nneeds to figure out if the js in firefox is behaving reasonably, and if not, fix it.", "time": "2005-06-29T16:16:22Z", "creator": "timeless@bemail.org", "attachment_id": null, "is_private": false, "creation_time": "2005-06-29T16:16:22Z", "tags": [], "author": "timeless@bemail.org"}, {"author": "torisugari@gmail.com", "creation_time": "2005-08-09T10:38:33Z", "tags": [], "is_private": false, "creator": "torisugari@gmail.com", "attachment_id": null, "raw_text": "(In reply to comment #12)\n> ok, the crash will be handled elsewhere.\n\nIs there any chance bug 299146 will be fixed on 1.0 branch as well?\n\nAccording to bug 271287#c2 , more than 10 guys/day (firefox 1.0 - 1.0.6 users)\ncrash their browser due to this bug.\n\n> i'm betting the js cause is \nhttp://bonsai.mozilla.org/cvsblame.cgi?file=mozilla/browser/base/content/search.xml&rev=1.23&mark=182#168\n\nIt seems to me you are right.\n\n> but i'm waiting for confirmation from someone. once the crash is fixed,\n> someone needs to figure out if the js in firefox is behaving reasonably,\n> and if not, fix it.\n\nEmpty string would be handled correctly after restart the browser (the default\nengine will be selected). So it's not that bad to set the pref null.\n\nMaybe we should not show such a crappy engine in the list, in the first place.", "time": "2005-08-09T10:38:33Z", "id": 2576182, "bug_id": 299090, "text": "(In reply to comment #12)\n> ok, the crash will be handled elsewhere.\n\nIs there any chance bug 299146 will be fixed on 1.0 branch as well?\n\nAccording to bug 271287#c2 , more than 10 guys/day (firefox 1.0 - 1.0.6 users)\ncrash their browser due to this bug.\n\n> i'm betting the js cause is \nhttp://bonsai.mozilla.org/cvsblame.cgi?file=mozilla/browser/base/content/search.xml&rev=1.23&mark=182#168\n\nIt seems to me you are right.\n\n> but i'm waiting for confirmation from someone. once the crash is fixed,\n> someone needs to figure out if the js in firefox is behaving reasonably,\n> and if not, fix it.\n\nEmpty string would be handled correctly after restart the browser (the default\nengine will be selected). So it's not that bad to set the pref null.\n\nMaybe we should not show such a crappy engine in the list, in the first place.", "count": 13}, {"attachment_id": null, "creator": "ispiked@gmail.com", "bug_id": 299090, "text": "This was fixed by the checkin for bug 299146. Follow-up bugs should be filed separately.", "count": 14, "raw_text": "This was fixed by the checkin for bug 299146. Follow-up bugs should be filed separately.", "time": "2005-11-27T03:39:39Z", "id": 2708127, "creation_time": "2005-11-27T03:39:39Z", "tags": [], "author": "ispiked@gmail.com", "is_private": false}]}}}