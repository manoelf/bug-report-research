{"bugs": {"683248": {"comments": [{"text": "Now that CRT allocations come from one heap and Mozilla allocations come from another, calling CRT symbols that allocate memory is no longer safe (unless you just leak that memory, but I'm going to presume for the moment that we don't need to do that).\n\nMy plan for solving this is to rig up a symbol blacklist, and add a script to the build that runs after linking libxul that ensures that libxul is not importing blacklisted symbols.  If it is, we cause the build to fail.", "creator": "khuey@kylehuey.com", "author": "khuey@kylehuey.com", "time": "2011-08-30T19:06:47Z", "attachment_id": null, "creation_time": "2011-08-30T19:06:47Z", "raw_text": "Now that CRT allocations come from one heap and Mozilla allocations come from another, calling CRT symbols that allocate memory is no longer safe (unless you just leak that memory, but I'm going to presume for the moment that we don't need to do that).\n\nMy plan for solving this is to rig up a symbol blacklist, and add a script to the build that runs after linking libxul that ensures that libxul is not importing blacklisted symbols.  If it is, we cause the build to fail.", "bug_id": 683248, "tags": [], "count": 0, "is_private": false, "id": 5688518}, {"tags": [], "count": 1, "is_private": false, "id": 5690245, "bug_id": 683248, "creation_time": "2011-08-31T11:42:19Z", "raw_text": "Note that a few different \"je_free | foo\" signatures turned up on trunk recently, with bug 682313 just being the largest one, so there might be some other violations of this in the code already. A generic mechanism to detect those would surely be good.", "text": "Note that a few different \"je_free | foo\" signatures turned up on trunk recently, with bug 682313 just being the largest one, so there might be some other violations of this in the code already. A generic mechanism to detect those would surely be good.", "time": "2011-08-31T11:42:19Z", "attachment_id": null, "creator": "kairo@kairo.at", "author": "kairo@kairo.at"}, {"bug_id": 683248, "id": 5694566, "tags": [], "is_private": false, "count": 2, "time": "2011-09-01T20:11:20Z", "attachment_id": null, "text": "https://crash-stats.mozilla.com/report/list?signature=je_free%20%7C%20DefWindowProcW is another one of those, not sure if it's different or covered by bug 682313 already.", "creation_time": "2011-09-01T20:11:20Z", "raw_text": "https://crash-stats.mozilla.com/report/list?signature=je_free%20%7C%20DefWindowProcW is another one of those, not sure if it's different or covered by bug 682313 already.", "author": "kairo@kairo.at", "creator": "kairo@kairo.at"}, {"author": "kairo@kairo.at", "creator": "kairo@kairo.at", "time": "2011-09-02T14:49:34Z", "attachment_id": null, "text": "https://crash-stats.mozilla.com/report/list?signature=je_free%20%7C%20nsWindow%3A%3ADealWithPopups%28HWND__%2A%2C%20unsigned%20int%2C%20unsigned%20__int64%2C%20__int64%2C%20__int64%2A%29 is another one. Should we file separate bugs for those?", "creation_time": "2011-09-02T14:49:34Z", "raw_text": "https://crash-stats.mozilla.com/report/list?signature=je_free%20%7C%20nsWindow%3A%3ADealWithPopups%28HWND__%2A%2C%20unsigned%20int%2C%20unsigned%20__int64%2C%20__int64%2C%20__int64%2A%29 is another one. Should we file separate bugs for those?", "bug_id": 683248, "id": 5696261, "tags": [], "count": 3, "is_private": false}, {"author": "khuey@kylehuey.com", "creator": "khuey@kylehuey.com", "creation_time": "2011-09-02T14:52:42Z", "raw_text": "No, those are both bug 682313 (you can see the DeferredSettingChangeMessage stuff a bit further down the stack).", "attachment_id": null, "time": "2011-09-02T14:52:42Z", "text": "No, those are both bug 682313 (you can see the DeferredSettingChangeMessage stuff a bit further down the stack).", "id": 5696268, "tags": [], "is_private": false, "count": 4, "bug_id": 683248}, {"author": "etienne.massip@gmail.com", "creator": "etienne.massip@gmail.com", "attachment_id": null, "time": "2011-09-02T14:59:50Z", "text": "Not sure this is related but I had no crashes for a long time then got bug \t682313 which fix seems efficient since yesterday and today this one appeared for first time and it's also malloc related:\nhttps://crash-stats.mozilla.com/report/index/bp-01e9a6bb-1099-42c2-9819-b2b092110902", "creation_time": "2011-09-02T14:59:50Z", "raw_text": "Not sure this is related but I had no crashes for a long time then got bug \t682313 which fix seems efficient since yesterday and today this one appeared for first time and it's also malloc related:\nhttps://crash-stats.mozilla.com/report/index/bp-01e9a6bb-1099-42c2-9819-b2b092110902", "bug_id": 683248, "id": 5696284, "tags": [], "is_private": false, "count": 5}, {"creator": "khuey@kylehuey.com", "author": "khuey@kylehuey.com", "bug_id": 683248, "tags": [], "is_private": false, "count": 6, "id": 5696292, "text": "(In reply to etienne.massip from comment #5)\n> Not sure this is related but I had no crashes for a long time then got bug \n> 682313 which fix seems efficient since yesterday and today this one appeared\n> for first time and it's also malloc related:\n> https://crash-stats.mozilla.com/report/index/bp-01e9a6bb-1099-42c2-9819-\n> b2b092110902\n\nThat is just a generic out of memory crash, and doesn't have anything to do with this.", "attachment_id": null, "time": "2011-09-02T15:02:13Z", "creation_time": "2011-09-02T15:02:13Z", "raw_text": "(In reply to etienne.massip from comment #5)\n> Not sure this is related but I had no crashes for a long time then got bug \n> 682313 which fix seems efficient since yesterday and today this one appeared\n> for first time and it's also malloc related:\n> https://crash-stats.mozilla.com/report/index/bp-01e9a6bb-1099-42c2-9819-\n> b2b092110902\n\nThat is just a generic out of memory crash, and doesn't have anything to do with this."}, {"id": 5696611, "tags": [], "is_private": false, "count": 7, "bug_id": 683248, "creation_time": "2011-09-02T16:33:45Z", "raw_text": "(In reply to Kyle Huey [:khuey] (khuey@mozilla.com) from comment #4)\n> No, those are both bug 682313\n\nGood, thanks, will add the signatures there, sorry for the bugspam.", "author": "kairo@kairo.at", "attachment_id": null, "time": "2011-09-02T16:33:45Z", "creator": "kairo@kairo.at", "text": "(In reply to Kyle Huey [:khuey] (khuey@mozilla.com) from comment #4)\n> No, those are both bug 682313\n\nGood, thanks, will add the signatures there, sorry for the bugspam."}, {"author": "christian@legnitto.com", "creator": "christian@legnitto.com", "bug_id": 683248, "id": 5916948, "is_private": false, "count": 8, "tags": [], "time": "2011-12-14T21:33:07Z", "attachment_id": null, "text": "We are tracking this for Fx9...do we still need to? Is there work to be done here or can we ship as-is?", "raw_text": "We are tracking this for Fx9...do we still need to? Is there work to be done here or can we ship as-is?", "creation_time": "2011-12-14T21:33:07Z"}, {"attachment_id": null, "time": "2011-12-14T21:54:40Z", "text": "We can ship without this.", "creation_time": "2011-12-14T21:54:40Z", "raw_text": "We can ship without this.", "bug_id": 683248, "id": 5917022, "is_private": false, "count": 9, "tags": [], "author": "khuey@kylehuey.com", "creator": "khuey@kylehuey.com"}]}}, "comments": {}}