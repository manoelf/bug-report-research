{"bugs": {"699196": {"comments": [{"tags": [], "time": "2011-11-02T19:54:51Z", "text": "At the moment, the code JaegerMonkey generates in compartments that are in debug mode avoids the use of inline caches; all calls are uncached calls. (See the check for debugMode() in mjit::Compiler::inlineCallHelper.)\n\nBrian Hackett says that it should be possible to use ICs in debug mode now. Before type inference, we couldn't recompile scripts when ICs were active, but now we can. If we can get debug mode working with ICs now, those changes should carry over to IonMonkey.\n\nOne note: at present, debug mode code only uses the invokeEntry entry point for JITted code. This never reaches the out-of-line prologue functions like CheckArgumentTypes and FunctionFramePrologue, which means that their associated REJOIN tails in js_InternalInterpret are never exercised in debug mode. If we enable caches, those paths will need to be tested with the debugger.", "author": "jimb@mozilla.com", "creation_time": "2011-11-02T19:54:51Z", "creator": "jimb@mozilla.com", "is_private": false, "id": 5821671, "raw_text": "At the moment, the code JaegerMonkey generates in compartments that are in debug mode avoids the use of inline caches; all calls are uncached calls. (See the check for debugMode() in mjit::Compiler::inlineCallHelper.)\n\nBrian Hackett says that it should be possible to use ICs in debug mode now. Before type inference, we couldn't recompile scripts when ICs were active, but now we can. If we can get debug mode working with ICs now, those changes should carry over to IonMonkey.\n\nOne note: at present, debug mode code only uses the invokeEntry entry point for JITted code. This never reaches the out-of-line prologue functions like CheckArgumentTypes and FunctionFramePrologue, which means that their associated REJOIN tails in js_InternalInterpret are never exercised in debug mode. If we enable caches, those paths will need to be tested with the debugger.", "attachment_id": null, "bug_id": 699196, "count": 0}, {"bug_id": 699196, "count": 1, "id": 5821739, "raw_text": "Brian further argues that it would be best to do this sooner, rather than later, so we can become aware of the issues involved:\n\n<bhackett> jimb: we would need to make sure to do the right thing when the\n           debugger modifies variables in an optimized frame, or tries to\n           access dead variables and so forth", "attachment_id": null, "time": "2011-11-02T20:15:16Z", "tags": [], "text": "Brian further argues that it would be best to do this sooner, rather than later, so we can become aware of the issues involved:\n\n<bhackett> jimb: we would need to make sure to do the right thing when the\n           debugger modifies variables in an optimized frame, or tries to\n           access dead variables and so forth", "author": "jimb@mozilla.com", "creation_time": "2011-11-02T20:15:16Z", "creator": "jimb@mozilla.com", "is_private": false}]}}, "comments": {}}