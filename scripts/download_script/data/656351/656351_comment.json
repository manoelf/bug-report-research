{"bugs": {"656351": {"comments": [{"time": "2011-05-11T17:10:44Z", "is_private": false, "tags": [], "raw_text": "Followup from bug 639303 comment 36:\n\nJoe Drew (:JOEDREW!) 2011-04-21 12:17:19 PDT:\n\n>@@ -2406,28 +2418,29 @@ RasterImage::SyncDecode()\n\n>-  if (IsDecodeFinished()) {\n>+  if (mDecoder && IsDecodeFinished()) {\n>     rv = ShutdownDecoder(eShutdownIntent_Done);\n>     CONTAINER_ENSURE_SUCCESS(rv);\n>   }\n\n>@@ -2688,17 +2703,17 @@ imgDecodeWorker::Run()\n\n>   // If the decode finished, shutdown the decoder\n>-  if (image->IsDecodeFinished()) {\n>+  if (image->mDecoder && image->IsDecodeFinished()) {\n\nThese two null checks should be moved inside IsDecodeFinished or ShutdownDecoder, or wherever they're necessary. I'm OK with it if you do that as a followup bug.", "bug_id": 656351, "count": 0, "id": 5463034, "attachment_id": null, "creator": "MatsPalmgren_bugz@use.startmail.com", "text": "Followup from bug 639303 comment 36:\n\nJoe Drew (:JOEDREW!) 2011-04-21 12:17:19 PDT:\n\n>@@ -2406,28 +2418,29 @@ RasterImage::SyncDecode()\n\n>-  if (IsDecodeFinished()) {\n>+  if (mDecoder && IsDecodeFinished()) {\n>     rv = ShutdownDecoder(eShutdownIntent_Done);\n>     CONTAINER_ENSURE_SUCCESS(rv);\n>   }\n\n>@@ -2688,17 +2703,17 @@ imgDecodeWorker::Run()\n\n>   // If the decode finished, shutdown the decoder\n>-  if (image->IsDecodeFinished()) {\n>+  if (image->mDecoder && image->IsDecodeFinished()) {\n\nThese two null checks should be moved inside IsDecodeFinished or ShutdownDecoder, or wherever they're necessary. I'm OK with it if you do that as a followup bug.", "author": "MatsPalmgren_bugz@use.startmail.com", "creation_time": "2011-05-11T17:10:44Z"}, {"text": "These checks are located here: http://hg.mozilla.org/mozilla-central/file/49936b49aff3/image/src/RasterImage.cpp#l2539\nand here: http://hg.mozilla.org/mozilla-central/file/49936b49aff3/image/src/RasterImage.cpp#l2855\n\nAt minimum, this bug needs us to move the mDecoder null check into RasterImage::IsDecodeFinished and/or ShutdownDecoder, so we don't use it when it's NULL.", "creator": "joe@drew.ca", "attachment_id": null, "id": 5996812, "author": "joe@drew.ca", "creation_time": "2012-01-20T22:15:39Z", "time": "2012-01-20T22:15:39Z", "tags": [], "is_private": false, "bug_id": 656351, "raw_text": "These checks are located here: http://hg.mozilla.org/mozilla-central/file/49936b49aff3/image/src/RasterImage.cpp#l2539\nand here: http://hg.mozilla.org/mozilla-central/file/49936b49aff3/image/src/RasterImage.cpp#l2855\n\nAt minimum, this bug needs us to move the mDecoder null check into RasterImage::IsDecodeFinished and/or ShutdownDecoder, so we don't use it when it's NULL.", "count": 1}, {"creation_time": "2012-03-18T09:45:35Z", "attachment_id": 606955, "id": 6149675, "creator": "trunga0@gmail.com", "text": "Created attachment 606955\nPropose patch", "author": "trunga0@gmail.com", "raw_text": "", "bug_id": 656351, "count": 2, "time": "2012-03-18T09:45:35Z", "is_private": false, "tags": []}, {"author": "josh@joshmatthews.net", "creator": "josh@joshmatthews.net", "time": "2012-03-18T12:22:27Z", "count": 3, "bug_id": 656351, "attachment_id": 606955, "id": 6149754, "text": "Comment on attachment 606955\nPropose patch\n\nThanks for the patch, Nguyen! You should ask for a review of future patches by visiting the Details link on the attachment, setting the review field to ? and adding an email address of name of a reviewer.", "creation_time": "2012-03-18T12:22:27Z", "is_private": false, "tags": [], "raw_text": "Thanks for the patch, Nguyen! You should ask for a review of future patches by visiting the Details link on the attachment, setting the review field to ? and adding an email address of name of a reviewer."}, {"text": "Comment on attachment 606955\nPropose patch\n\n>diff -r e94edfdb1f5b image/src/RasterImage.cpp\n> bool\n> RasterImage::IsDecodeFinished()\n> {\n>   // Precondition\n>   NS_ABORT_IF_FALSE(mDecoder, \"Can't call IsDecodeFinished() without decoder!\");\n>+\t\n>+  // If decoder is null \n>+  if (!mDecoder) \n>+    return false;\n\nI'm not joedrew (and not a real reviewer here) but NS_ABORT_IF_FALSE will ensure you will never reach your new condition. My (personal) recommendation is to delete that line and its comment because we're now caring about it inside this function rather than outside.\n\nAlso comment 0 in this bug suggests there is/may be another |mDecoder| check elsewhere to drop.", "id": 6149766, "attachment_id": 606955, "creation_time": "2012-03-18T12:35:35Z", "tags": [], "is_private": false, "raw_text": ">diff -r e94edfdb1f5b image/src/RasterImage.cpp\n> bool\n> RasterImage::IsDecodeFinished()\n> {\n>   // Precondition\n>   NS_ABORT_IF_FALSE(mDecoder, \"Can't call IsDecodeFinished() without decoder!\");\n>+\t\n>+  // If decoder is null \n>+  if (!mDecoder) \n>+    return false;\n\nI'm not joedrew (and not a real reviewer here) but NS_ABORT_IF_FALSE will ensure you will never reach your new condition. My (personal) recommendation is to delete that line and its comment because we're now caring about it inside this function rather than outside.\n\nAlso comment 0 in this bug suggests there is/may be another |mDecoder| check elsewhere to drop.", "author": "bugspam.Callek@gmail.com", "creator": "bugspam.Callek@gmail.com", "time": "2012-03-18T12:35:35Z", "count": 4, "bug_id": 656351}, {"time": "2012-03-20T14:04:34Z", "tags": [], "is_private": false, "bug_id": 656351, "raw_text": "Review of attachment 606955:\n-----------------------------------------------------------------\n\nNguyen Nogc Trung, you'll need to remove the NS_ABORT_IF_FALSE above the if() you added; as it is, we have two logically inconsistent blocks.\n\nIf you can upload an patch with that changed, I'll be very glad to get it in to Mozilla!", "count": 5, "text": "Comment on attachment 606955\nPropose patch\n\nReview of attachment 606955:\n-----------------------------------------------------------------\n\nNguyen Nogc Trung, you'll need to remove the NS_ABORT_IF_FALSE above the if() you added; as it is, we have two logically inconsistent blocks.\n\nIf you can upload an patch with that changed, I'll be very glad to get it in to Mozilla!", "creator": "joe@drew.ca", "id": 6154965, "attachment_id": 606955, "author": "joe@drew.ca", "creation_time": "2012-03-20T14:04:34Z"}, {"creation_time": "2012-04-04T06:26:05Z", "author": "trunga0@gmail.com", "attachment_id": 612111, "id": 6196108, "text": "Created attachment 612111\nUpdated patch with new changes.\n\nI have gotten rid of the precondition as you said.", "creator": "trunga0@gmail.com", "count": 6, "raw_text": "I have gotten rid of the precondition as you said.", "bug_id": 656351, "is_private": false, "tags": [], "time": "2012-04-04T06:26:05Z"}, {"count": 7, "bug_id": 656351, "time": "2012-04-25T15:52:35Z", "author": "justin.lebar+bug@gmail.com", "creator": "justin.lebar+bug@gmail.com", "raw_text": "Be sure to mark the reviewer on patches you'd like reviewed, otherwise we're likely to miss them (as we apparently did this time).", "tags": [], "is_private": false, "creation_time": "2012-04-25T15:52:35Z", "text": "Be sure to mark the reviewer on patches you'd like reviewed, otherwise we're likely to miss them (as we apparently did this time).", "attachment_id": null, "id": 6253235}, {"author": "joe@drew.ca", "creator": "joe@drew.ca", "time": "2012-05-07T17:47:11Z", "count": 8, "bug_id": 656351, "id": 6286277, "attachment_id": 612111, "text": "Comment on attachment 612111\nUpdated patch with new changes.\n\nReview of attachment 612111:\n-----------------------------------------------------------------\n\n::: image/src/RasterImage.cpp\n@@ +2734,5 @@\n>  // This method may not be called if there is no decoder.\n>  bool\n>  RasterImage::IsDecodeFinished()\n> +{\t\n> +  // If decoder is null \n\nunnecessary comment :)", "creation_time": "2012-05-07T17:47:11Z", "is_private": false, "tags": [], "raw_text": "Review of attachment 612111:\n-----------------------------------------------------------------\n\n::: image/src/RasterImage.cpp\n@@ +2734,5 @@\n>  // This method may not be called if there is no decoder.\n>  bool\n>  RasterImage::IsDecodeFinished()\n> +{\t\n> +  // If decoder is null \n\nunnecessary comment :)"}, {"is_private": false, "tags": [], "time": "2012-12-26T21:22:35Z", "count": 9, "raw_text": "It looks like this patch was reviewed but never checked in.  At last part of it still applies; can it be updated and checked in?", "bug_id": 656351, "author": "mbrubeck@limpet.net", "id": 6945636, "attachment_id": null, "creator": "mbrubeck@limpet.net", "text": "It looks like this patch was reviewed but never checked in.  At last part of it still applies; can it be updated and checked in?", "creation_time": "2012-12-26T21:22:35Z"}, {"time": "2013-01-03T16:16:43Z", "bug_id": 656351, "count": 10, "creator": "joe@drew.ca", "author": "joe@drew.ca", "is_private": false, "tags": [], "raw_text": "Trung, can you update the patch to remove that comment and re-upload it? Then we can check it in!", "attachment_id": null, "id": 6959868, "text": "Trung, can you update the patch to remove that comment and re-upload it? Then we can check it in!", "creation_time": "2013-01-03T16:16:43Z"}, {"count": 11, "bug_id": 656351, "raw_text": "Whoops, not sure what happened there.", "tags": [], "is_private": false, "time": "2013-04-17T21:39:37Z", "creation_time": "2013-04-17T21:39:37Z", "author": "joe@drew.ca", "text": "Whoops, not sure what happened there.", "creator": "joe@drew.ca", "id": 7327714, "attachment_id": null}, {"raw_text": "Hi,\n\nI would like to complete this bug. Is the work we would like to complete in this bug still in force? I saw that code touched by the patch slightly changed. It mostly relates to the ending of the method RasterImage::SyncDecode().", "bug_id": 656351, "count": 12, "time": "2014-10-10T18:32:16Z", "is_private": false, "tags": [], "creation_time": "2014-10-10T18:32:16Z", "attachment_id": null, "id": 9431914, "text": "Hi,\n\nI would like to complete this bug. Is the work we would like to complete in this bug still in force? I saw that code touched by the patch slightly changed. It mostly relates to the ending of the method RasterImage::SyncDecode().", "creator": "nicklebedev37@gmail.com", "author": "nicklebedev37@gmail.com"}, {"count": 13, "bug_id": 656351, "time": "2014-10-10T19:17:21Z", "author": "seth.bugzilla@blackhail.net", "creator": "seth.bugzilla@blackhail.net", "raw_text": "So I'm actually in the process of refactoring related stuff right now. This seems like a good followup for bug 1079653, which I hope to land today.\n\nAlso, not sure why this got marked ASSIGNED with an empty \"Assigned To\" field. Nick, do you want this to be assigned to you? If so, please set the field appropriately. If not, I'll be happy to take this over.", "is_private": false, "tags": [], "creation_time": "2014-10-10T19:17:21Z", "id": 9432109, "attachment_id": null, "text": "So I'm actually in the process of refactoring related stuff right now. This seems like a good followup for bug 1079653, which I hope to land today.\n\nAlso, not sure why this got marked ASSIGNED with an empty \"Assigned To\" field. Nick, do you want this to be assigned to you? If so, please set the field appropriately. If not, I'll be happy to take this over."}, {"creation_time": "2014-10-10T19:19:52Z", "attachment_id": null, "id": 9432124, "text": "Yes, i would like to take the bug. I just forget to put me into 'assign to' field :)", "raw_text": "Yes, i would like to take the bug. I just forget to put me into 'assign to' field :)", "is_private": false, "tags": [], "creator": "nicklebedev37@gmail.com", "author": "nicklebedev37@gmail.com", "bug_id": 656351, "count": 14, "time": "2014-10-10T19:19:52Z"}]}}, "comments": {}}