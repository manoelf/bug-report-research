{"bugs": {"657507": {"comments": [{"author": "sdwilsh@forerunnerdesigns.com", "tags": [], "count": 0, "creator": "sdwilsh@forerunnerdesigns.com", "bug_id": 657507, "creation_time": "2011-05-16T23:13:48Z", "text": "Last week I spent over an hour trying to debug a hang in a test that would not have taken very long at all had xpcshell either been throwing an error or at the very least logging when some code does Components.utils.reportError.  I'm leaning toward error being the right call, but at this point, we might have tests that depend on that not failing, so logging may be the only option.  See https://hg.mozilla.org/mozilla-central/annotate/6105fb36f613/toolkit/components/places/tests/unit/test_preventive_maintenance_console.js#l17 for an example on how to do this (hell, I'll even write this patch if someone makes the decision on which way to go).", "id": 5473657, "raw_text": "Last week I spent over an hour trying to debug a hang in a test that would not have taken very long at all had xpcshell either been throwing an error or at the very least logging when some code does Components.utils.reportError.  I'm leaning toward error being the right call, but at this point, we might have tests that depend on that not failing, so logging may be the only option.  See https://hg.mozilla.org/mozilla-central/annotate/6105fb36f613/toolkit/components/places/tests/unit/test_preventive_maintenance_console.js#l17 for an example on how to do this (hell, I'll even write this patch if someone makes the decision on which way to go).", "attachment_id": null, "time": "2011-05-16T23:13:48Z", "is_private": false}, {"author": "ted@mielczarek.org", "creation_time": "2011-05-17T00:17:31Z", "text": "If it doesn't fail any tests, then make it error. If it does, then just make it log for now.", "id": 5473803, "raw_text": "If it doesn't fail any tests, then make it error. If it does, then just make it log for now.", "creator": "ted@mielczarek.org", "tags": [], "count": 1, "bug_id": 657507, "attachment_id": null, "is_private": false, "time": "2011-05-17T00:17:31Z"}, {"text": "Created attachment 551960\nWrite all console service messages to output, v1\n\nIn the course of filing bug 677779, I created a simple patch to write all console service messages to the output of the xpcshell test harness.\n\nThe patch doesn't conditionally log (as desired from comment #1), so I'm not submitting it for review. But, if somebody wants to use it as the base for the final patch, be my guest! Or, if we just want to ignore comment #1, I suppose this is ready for review.", "is_private": false, "creation_time": "2011-08-10T00:29:04Z", "raw_text": "In the course of filing bug 677779, I created a simple patch to write all console service messages to the output of the xpcshell test harness.\n\nThe patch doesn't conditionally log (as desired from comment #1), so I'm not submitting it for review. But, if somebody wants to use it as the base for the final patch, be my guest! Or, if we just want to ignore comment #1, I suppose this is ready for review.", "id": 5644018, "bug_id": 657507, "creator": "gps@mozilla.com", "tags": [], "time": "2011-08-10T00:29:04Z", "count": 2, "author": "gps@mozilla.com", "attachment_id": 551960}, {"attachment_id": 565412, "is_private": false, "time": "2011-10-07T00:37:00Z", "author": "gps@mozilla.com", "text": "Created attachment 565412\nWrite console service messages to output, v2\n\nThis patch will have xpcshell write *all* console service messages to the output. I have a Try running now. It will report in when complete.\n\nIt's possible this may add significant output to xpcshell tests and may even cause them to slow down or break some parsers of the output. Should I consider limiting printing to cases that begin with \"[JavaScript Error:\" ? Is this satisfactory to catch all swallowed messages?", "creation_time": "2011-10-07T00:37:00Z", "raw_text": "This patch will have xpcshell write *all* console service messages to the output. I have a Try running now. It will report in when complete.\n\nIt's possible this may add significant output to xpcshell tests and may even cause them to slow down or break some parsers of the output. Should I consider limiting printing to cases that begin with \"[JavaScript Error:\" ? Is this satisfactory to catch all swallowed messages?", "id": 5765312, "bug_id": 657507, "tags": [], "count": 3, "creator": "gps@mozilla.com"}, {"creation_time": "2011-10-07T17:50:23Z", "text": "Comment on attachment 565412\nWrite console service messages to output, v2\n\nCancelling review due to Try failures.", "id": 5767155, "raw_text": "Cancelling review due to Try failures.", "tags": [], "creator": "gps@mozilla.com", "count": 4, "bug_id": 657507, "author": "gps@mozilla.com", "is_private": false, "time": "2011-10-07T17:50:23Z", "attachment_id": 565412}, {"attachment_id": null, "time": "2012-09-12T10:47:01Z", "is_private": false, "author": "markh@mozilla.com", "bug_id": 657507, "count": 5, "tags": [], "creator": "markh@mozilla.com", "raw_text": "(In reply to Gregory Szorc [:gps] from comment #4)\n> Comment on attachment 565412\n> Cancelling review due to Try failures.\n\nCan you remember what kinds of errors you saw on try?  This cost me some time today too - maybe a lighter approach with less impact on a \"normal\" run is to have the harness buffer output from a test and only dump it on test failure?", "id": 6628413, "text": "(In reply to Gregory Szorc [:gps] from comment #4)\n> Comment on attachment 565412\n> Cancelling review due to Try failures.\n\nCan you remember what kinds of errors you saw on try?  This cost me some time today too - maybe a lighter approach with less impact on a \"normal\" run is to have the harness buffer output from a test and only dump it on test failure?", "creation_time": "2012-09-12T10:47:01Z"}]}}, "comments": {}}